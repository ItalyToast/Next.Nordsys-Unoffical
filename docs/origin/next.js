var $jscomp = $jscomp || {};
$jscomp.scope = {};
$jscomp.defineProperty =
  typeof Object.defineProperties == "function"
    ? Object.defineProperty
    : function (b, c, a) {
        a = a;
        if (b == Array.prototype || b == Object.prototype) {
          return;
        }
        b[c] = a.value;
      };
$jscomp.getGlobal = function (a) {
  return typeof window != "undefined" && window === a
    ? a
    : typeof global != "undefined" && global != null
    ? global
    : a;
};
$jscomp.global = $jscomp.getGlobal(this);
$jscomp.polyfill = function (i, f, j, k) {
  if (!f) {
    return;
  }
  var a = $jscomp.global;
  var b = i.split(".");
  for (var e = 0; e < b.length - 1; e++) {
    var d = b[e];
    if (!(d in a)) {
      a[d] = {};
    }
    a = a[d];
  }
  var g = b[b.length - 1];
  var h = a[g];
  var c = f(h);
  if (c == h || c == null) {
    return;
  }
  $jscomp.defineProperty(a, g, { configurable: !0, writable: !0, value: c });
};
$jscomp.polyfill(
  "Array.prototype.copyWithin",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (d, c, b) {
      var e = this.length;
      d = Number(d);
      c = Number(c);
      b = Number(b != null ? b : e);
      if (d < c) {
        b = Math.min(b, e);
        while (c < b) {
          if (c in this) {
            this[d++] = this[c++];
          } else {
            delete this[d++];
            c++;
          }
        }
      } else {
        b = Math.min(b, e + c - d);
        d += b - c;
        while (b > c) {
          if (--b in this) {
            this[--d] = this[b];
          } else {
            delete this[d];
          }
        }
      }
      return this;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};
  if (!$jscomp.global["Symbol"]) {
    $jscomp.global["Symbol"] = $jscomp.Symbol;
  }
};
$jscomp.symbolCounter_ = 0;
$jscomp.Symbol = function (a) {
  return $jscomp.SYMBOL_PREFIX + (a || "") + $jscomp.symbolCounter_++;
};
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();
  var a = $jscomp.global["Symbol"].iterator;
  if (!a) {
    a = $jscomp.global["Symbol"].iterator =
      $jscomp.global["Symbol"]("iterator");
  }
  if (typeof Array.prototype[a] != "function") {
    $jscomp.defineProperty(Array.prototype, a, {
      configurable: !0,
      writable: !0,
      value: function () {
        return $jscomp.arrayIterator(this);
      },
    });
  }
  $jscomp.initSymbolIterator = function () {};
};
$jscomp.arrayIterator = function (a) {
  var b = 0;
  return $jscomp.iteratorPrototype(function () {
    if (b < a.length) {
      return { done: !1, value: a[b++] };
    } else {
      return { done: !0 };
    }
  });
};
$jscomp.iteratorPrototype = function (b) {
  $jscomp.initSymbolIterator();
  var a = { next: b };
  a[$jscomp.global["Symbol"].iterator] = function () {
    return this;
  };
  return a;
};
$jscomp.iteratorFromArray = function (a, d) {
  $jscomp.initSymbolIterator();
  if (a instanceof String) {
    a = a + "";
  }
  var c = 0;
  var b = {
    next: function () {
      if (c < a.length) {
        var e = c++;
        return { value: d(e, a[e]), done: !1 };
      }
      b.next = function () {
        return { done: !0, value: void 0 };
      };
      return b.next();
    },
  };
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  b[Symbol.iterator] = function () {
    return b;
  };
  return b;
};
$jscomp.polyfill(
  "Array.prototype.entries",
  function (a) {
    if (a) {
      return a;
    }
    var b = function () {
      return $jscomp.iteratorFromArray(this, function (b, c) {
        return [b, c];
      });
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.fill",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (f, c, b) {
      var d = this.length || 0;
      if (c < 0) {
        c = Math.max(0, d + c);
      }
      if (b == null || b > d) {
        b = d;
      }
      b = Number(b);
      if (b < 0) {
        b = Math.max(0, d + b);
      }
      for (var e = Number(c || 0); e < b; e++) {
        this[e] = f;
      }
      return this;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.findInternal = function (a, d, e) {
  if (a instanceof String) {
    a = String(a);
  }
  var f = a.length;
  for (var b = 0; b < f; b++) {
    var c = a[b];
    if (d.call(e, c, b, a)) {
      return { i: b, v: c };
    }
  }
  return { i: -1, v: void 0 };
};
$jscomp.polyfill(
  "Array.prototype.find",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, b) {
      return $jscomp.findInternal(this, c, b).v;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.findIndex",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, b) {
      return $jscomp.findInternal(this, c, b).i;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.from",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, c, g) {
      $jscomp.initSymbolIterator();
      c =
        c != null
          ? c
          : function (d) {
              return d;
            };
      var d = [];
      $jscomp.initSymbol();
      $jscomp.initSymbolIterator();
      var f = b[Symbol.iterator];
      if (typeof f == "function") {
        b = f.call(b);
        var h;
        while (!(h = b.next()).done) {
          d.push(c.call(g, h.value));
        }
      } else {
        var i = b.length;
        for (var e = 0; e < i; e++) {
          d.push(c.call(g, b[e]));
        }
      }
      return d;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Object.is",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, c) {
      if (b === c) {
        return b !== 0 || 1 / b === 1 / c;
      } else {
        return b !== b && c !== c;
      }
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.includes",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (d, e) {
      var b = this;
      if (b instanceof String) {
        b = String(b);
      }
      var f = b.length;
      for (var c = e || 0; c < f; c++) {
        if (b[c] == d || Object.is(b[c], d)) {
          return !0;
        }
      }
      return !1;
    };
    return b;
  },
  "es7",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.keys",
  function (a) {
    if (a) {
      return a;
    }
    var b = function () {
      return $jscomp.iteratorFromArray(this, function (b) {
        return b;
      });
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.of",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      return Array.from(arguments);
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Array.prototype.values",
  function (a) {
    if (a) {
      return a;
    }
    var b = function () {
      return $jscomp.iteratorFromArray(this, function (c, b) {
        return b;
      });
    };
    return b;
  },
  "es6",
  "es3"
);
$jscomp.makeIterator = function (a) {
  $jscomp.initSymbolIterator();
  $jscomp.initSymbol();
  $jscomp.initSymbolIterator();
  var b = a[Symbol.iterator];
  return b ? b.call(a) : $jscomp.arrayIterator(a);
};
$jscomp.EXPOSE_ASYNC_EXECUTOR = !0;
$jscomp.FORCE_POLYFILL_PROMISE = !1;
$jscomp.polyfill(
  "Promise",
  function (c) {
    if (c && !$jscomp.FORCE_POLYFILL_PROMISE) {
      return c;
    }
    function AsyncExecutor() {
      this.batch_ = null;
    }
    AsyncExecutor.prototype.asyncExecute = function (a) {
      if (this.batch_ == null) {
        this.batch_ = [];
        this.asyncExecuteBatch_();
      }
      this.batch_.push(a);
      return this;
    };
    AsyncExecutor.prototype.asyncExecuteBatch_ = function () {
      var a = this;
      this.asyncExecuteFunction(function () {
        a.executeBatch_();
      });
    };
    var e = $jscomp.global["setTimeout"];
    AsyncExecutor.prototype.asyncExecuteFunction = function (a) {
      e(a, 0);
    };
    AsyncExecutor.prototype.executeBatch_ = function () {
      while (this.batch_ && this.batch_.length) {
        var b = this.batch_;
        this.batch_ = [];
        for (var a = 0; a < b.length; ++a) {
          var d = b[a];
          delete b[a];
          try {
            d();
          } catch (f) {
            this.asyncThrow_(f);
          }
        }
      }
      this.batch_ = null;
    };
    AsyncExecutor.prototype.asyncThrow_ = function (a) {
      this.asyncExecuteFunction(function () {
        throw a;
      });
    };
    var b = { PENDING: 0, FULFILLED: 1, REJECTED: 2 };
    var a = function (d) {
      this.state_ = b.PENDING;
      this.result_ = undefined;
      this.onSettledCallbacks_ = [];
      var a = this.createResolveAndReject_();
      try {
        d(a.resolve, a.reject);
      } catch (f) {
        a.reject(f);
      }
    };
    a.prototype.createResolveAndReject_ = function () {
      var b = this;
      var a = !1;
      function firstCallWins(d) {
        return function (e) {
          if (!a) {
            a = !0;
            d.call(b, e);
          }
        };
      }
      return {
        resolve: firstCallWins(this.resolveTo_),
        reject: firstCallWins(this.reject_),
      };
    };
    a.prototype.resolveTo_ = function (b) {
      if (b === this) {
        this.reject_(new TypeError("A Promise cannot resolve to itself"));
      } else {
        if (b instanceof a) {
          this.settleSameAsPromise_(b);
        } else {
          if (isObject(b)) {
            this.resolveToNonPromiseObj_(b);
          } else {
            this.fulfill_(b);
          }
        }
      }
    };
    a.prototype.resolveToNonPromiseObj_ = function (b) {
      var a = undefined;
      try {
        a = b.then;
      } catch (f) {
        this.reject_(f);
        return;
      }
      if (typeof a == "function") {
        this.settleSameAsThenable_(a, b);
      } else {
        this.fulfill_(b);
      }
    };
    function isObject(a) {
      switch (typeof a) {
        case "object":
          return a != null;
        case "function":
          return !0;
        default:
          return !1;
      }
    }
    a.prototype.reject_ = function (a) {
      this.settle_(b.REJECTED, a);
    };
    a.prototype.fulfill_ = function (a) {
      this.settle_(b.FULFILLED, a);
    };
    a.prototype.settle_ = function (d, a) {
      if (this.state_ != b.PENDING) {
        throw new Error(
          ("Cannot settle(" + d + ", " + a) |
            ("): Promise already settled in state" + this.state_)
        );
      }
      this.state_ = d;
      this.result_ = a;
      this.executeOnSettledCallbacks_();
    };
    a.prototype.executeOnSettledCallbacks_ = function () {
      if (this.onSettledCallbacks_ != null) {
        var b = this.onSettledCallbacks_;
        for (var a = 0; a < b.length; ++a) {
          b[a].call();
          b[a] = null;
        }
        this.onSettledCallbacks_ = null;
      }
    };
    var d = new AsyncExecutor();
    a.prototype.settleSameAsPromise_ = function (b) {
      var a = this.createResolveAndReject_();
      b.callWhenSettled_(a.resolve, a.reject);
    };
    a.prototype.settleSameAsThenable_ = function (b, d) {
      var a = this.createResolveAndReject_();
      try {
        b.call(d, a.resolve, a.reject);
      } catch (f) {
        a.reject(f);
      }
    };
    a.prototype.then = function (f, g) {
      var b;
      var d;
      var e = new a(function (a, e) {
        b = a;
        d = e;
      });
      function createCallback(a, e) {
        if (typeof a == "function") {
          return function (h) {
            try {
              b(a(h));
            } catch (i) {
              d(i);
            }
          };
        } else {
          return e;
        }
      }
      this.callWhenSettled_(createCallback(f, b), createCallback(g, d));
      return e;
    };
    a.prototype["catch"] = function (a) {
      return this.then(undefined, a);
    };
    a.prototype.callWhenSettled_ = function (e, f) {
      var a = this;
      function callback() {
        switch (a.state_) {
          case b.FULFILLED:
            e(a.result_);
            break;
          case b.REJECTED:
            f(a.result_);
            break;
          default:
            throw new Error("Unexpected state: " + a.state_);
        }
      }
      if (this.onSettledCallbacks_ == null) {
        d.asyncExecute(callback);
      } else {
        this.onSettledCallbacks_.push(function () {
          d.asyncExecute(callback);
        });
      }
    };
    a.resolve = function (b) {
      if (b instanceof a) {
        return b;
      } else {
        return new a(function (a, d) {
          a(b);
        });
      }
    };
    a.reject = function (b) {
      return new a(function (d, a) {
        a(b);
      });
    };
    a.race = function (b) {
      return new a(function (f, g) {
        var e = $jscomp.makeIterator(b);
        for (var d = e.next(); !d.done; d = e.next()) {
          a.resolve(d.value).callWhenSettled_(f, g);
        }
      });
    };
    a.all = function (e) {
      var d = $jscomp.makeIterator(e);
      var b = d.next();
      if (b.done) {
        return a.resolve([]);
      } else {
        return new a(function (h, i) {
          var f = [];
          var g = 0;
          function onFulfilled(a) {
            return function (b) {
              f[a] = b;
              g--;
              if (g == 0) {
                h(f);
              }
            };
          }
          do {
            f.push(undefined);
            g++;
            a.resolve(b.value).callWhenSettled_(onFulfilled(f.length - 1), i);
            b = d.next();
          } while (!b.done);
        });
      }
    };
    if ($jscomp.EXPOSE_ASYNC_EXECUTOR) {
      a["$jscomp$new$AsyncExecutor"] = function () {
        return new AsyncExecutor();
      };
    }
    return a;
  },
  "es6-impl",
  "es3"
);
$jscomp.executeAsyncGenerator = function (a) {
  function passValueToGenerator(b) {
    return a.next(b);
  }
  function passErrorToGenerator(b) {
    return a["throw"](b);
  }
  return new Promise(function (b, c) {
    function handleGeneratorRecord(d) {
      if (d.done) {
        b(d.value);
      } else {
        Promise.resolve(d.value)
          .then(passValueToGenerator, passErrorToGenerator)
          .then(handleGeneratorRecord, c);
      }
    }
    handleGeneratorRecord(a.next());
  });
};
$jscomp.owns = function (b, a) {
  return Object.prototype.hasOwnProperty.call(b, a);
};
$jscomp.polyfill(
  "WeakMap",
  function (c) {
    function isConformant() {
      if (!c || !Object.seal) {
        return !1;
      }
      try {
        var b = Object.seal({});
        var d = Object.seal({});
        var a = new c([
          [b, 2],
          [d, 3],
        ]);
        if (a.get(b) != 2 || a.get(d) != 3) {
          return !1;
        }
        a["delete"](b);
        a.set(d, 4);
        return !a.has(b) && a.get(d) == 4;
      } catch (e) {
        return !1;
      }
    }
    if (isConformant()) {
      return c;
    }
    var a = "$jscomp_hidden_" + Math.random().toString().substring(2);
    function insert(b) {
      if (!$jscomp.owns(b, a)) {
        var d = {};
        $jscomp.defineProperty(b, a, { value: d });
      }
    }
    function patch(a) {
      var b = Object[a];
      if (b) {
        Object[a] = function (d) {
          insert(d);
          return b(d);
        };
      }
    }
    patch("freeze");
    patch("preventExtensions");
    patch("seal");
    var d = 0;
    var b = function (a) {
      this.id_ = (d += Math.random() + 1).toString();
      if (a) {
        $jscomp.initSymbol();
        $jscomp.initSymbolIterator();
        var f = $jscomp.makeIterator(a);
        var b;
        while (!(b = f.next()).done) {
          var e = b.value;
          this.set(e[0], e[1]);
        }
      }
    };
    b.prototype.set = function (b, d) {
      insert(b);
      if (!$jscomp.owns(b, a)) {
        throw new Error("WeakMap key fail: " + b);
      }
      b[a][this.id_] = d;
      return this;
    };
    b.prototype.get = function (b) {
      return $jscomp.owns(b, a) ? b[a][this.id_] : undefined;
    };
    b.prototype.has = function (b) {
      return $jscomp.owns(b, a) && $jscomp.owns(b[a], this.id_);
    };
    b.prototype["delete"] = function (b) {
      if (!$jscomp.owns(b, a) || !$jscomp.owns(b[a], this.id_)) {
        return !1;
      }
      return delete b[a][this.id_];
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.MapEntry = function () {
  this.previous;
  this.next;
  this.head;
  this.key;
  this.value;
};
$jscomp.ASSUME_NO_NATIVE_MAP = !1;
$jscomp.polyfill(
  "Map",
  function (b) {
    var g =
      !$jscomp.ASSUME_NO_NATIVE_MAP &&
      (function () {
        if (!b || !b.prototype.entries || typeof Object.seal != "function") {
          return !1;
        }
        try {
          b = b;
          var e = Object.seal({ x: 4 });
          var c = new b($jscomp.makeIterator([[e, "s"]]));
          if (
            c.get(e) != "s" ||
            c.size != 1 ||
            c.get({ x: 4 }) ||
            c.set({ x: 4 }, "t") != c ||
            c.size != 2
          ) {
            return !1;
          }
          var d = c.entries();
          var a = d.next();
          if (a.done || a.value[0] != e || a.value[1] != "s") {
            return !1;
          }
          a = d.next();
          if (
            a.done ||
            a.value[0].x != 4 ||
            a.value[1] != "t" ||
            !d.next().done
          ) {
            return !1;
          }
          return !0;
        } catch (j) {
          return !1;
        }
      })();
    if (g) {
      return b;
    }
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    var e = new WeakMap();
    var a = function (a) {
      this.data_ = {};
      this.head_ = f();
      this.size = 0;
      if (a) {
        var e = $jscomp.makeIterator(a);
        var c;
        while (!(c = e.next()).done) {
          var d = c.value;
          this.set(d[0], d[1]);
        }
      }
    };
    a.prototype.set = function (e, d) {
      var a = c(this, e);
      if (!a.list) {
        a.list = this.data_[a.id] = [];
      }
      if (!a.entry) {
        a.entry = {
          next: this.head_,
          previous: this.head_.previous,
          head: this.head_,
          key: e,
          value: d,
        };
        a.list.push(a.entry);
        this.head_.previous.next = a.entry;
        this.head_.previous = a.entry;
        this.size++;
      } else {
        a.entry.value = d;
      }
      return this;
    };
    a.prototype["delete"] = function (d) {
      var a = c(this, d);
      if (a.entry && a.list) {
        a.list.splice(a.index, 1);
        if (!a.list.length) {
          delete this.data_[a.id];
        }
        a.entry.previous.next = a.entry.next;
        a.entry.next.previous = a.entry.previous;
        a.entry.head = null;
        this.size--;
        return !0;
      }
      return !1;
    };
    a.prototype.clear = function () {
      this.data_ = {};
      this.head_ = this.head_.previous = f();
      this.size = 0;
    };
    a.prototype.has = function (a) {
      return !!c(this, a).entry;
    };
    a.prototype.get = function (d) {
      var a = c(this, d).entry;
      return a && a.value;
    };
    a.prototype.entries = function () {
      return d(this, function (a) {
        return [a.key, a.value];
      });
    };
    a.prototype.keys = function () {
      return d(this, function (a) {
        return a.key;
      });
    };
    a.prototype.values = function () {
      return d(this, function (a) {
        return a.value;
      });
    };
    a.prototype.forEach = function (e, d) {
      var f = this.entries();
      var c;
      while (!(c = f.next()).done) {
        var a = c.value;
        e.call(d, a[1], a[0], this);
      }
    };
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    a.prototype[Symbol.iterator] = a.prototype.entries;
    var c = function (g, e) {
      var f = i(e);
      var a = g.data_[f];
      if (a && $jscomp.owns(g.data_, f)) {
        for (var d = 0; d < a.length; d++) {
          var c = a[d];
          if ((e !== e && c.key !== c.key) || e === c.key) {
            return { id: f, list: a, index: d, entry: c };
          }
        }
      }
      return { id: f, list: a, index: -1, entry: undefined };
    };
    var d = function (c, d) {
      var a = c.head_;
      return $jscomp.iteratorPrototype(function () {
        if (a) {
          while (a.head != c.head_) {
            a = a.previous;
          }
          while (a.next != a.head) {
            a = a.next;
            return { done: !1, value: d(a) };
          }
          a = null;
        }
        return { done: !0, value: void 0 };
      });
    };
    var f = function () {
      var a = {};
      a.previous = a.next = a.head = a;
      return a;
    };
    var h = 0;
    var i = function (a) {
      var c = a && typeof a;
      if (c == "object" || c == "function") {
        a = a;
        if (!e.has(a)) {
          var d = "" + ++h;
          e.set(a, d);
          return d;
        }
        return e.get(a);
      }
      return "p_" + a;
    };
    return a;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.acosh",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      return Math.log(b + Math.sqrt(b * b - 1));
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.asinh",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      if (b === 0) {
        return b;
      }
      var c = Math.log(Math.abs(b) + Math.sqrt(b * b + 1));
      return b < 0 ? -c : c;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.log1p",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      if (b < 0.25 && b > -0.25) {
        var f = b;
        var g = 1;
        var c = b;
        var d = 0;
        var e = 1;
        while (d != c) {
          f *= b;
          e *= -1;
          c = (d = c) + (e * f) / ++g;
        }
        return c;
      }
      return Math.log(1 + b);
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.atanh",
  function (b) {
    if (b) {
      return b;
    }
    var a = Math.log1p;
    var c = function (c) {
      c = Number(c);
      return (a(c) - a(-c)) / 2;
    };
    return c;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.cbrt",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      if (b === 0) {
        return b;
      }
      b = Number(b);
      var c = Math.pow(Math.abs(b), 1 / 3);
      return b < 0 ? -c : c;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.clz32",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b) >>> 0;
      if (b === 0) {
        return 32;
      }
      var c = 0;
      if ((b & 4.29490176e9) === 0) {
        b <<= 16;
        c += 16;
      }
      if ((b & 4.27819008e9) === 0) {
        b <<= 8;
        c += 8;
      }
      if ((b & 4.02653184e9) === 0) {
        b <<= 4;
        c += 4;
      }
      if ((b & 3.221225472e9) === 0) {
        b <<= 2;
        c += 2;
      }
      if ((b & 2.147483648e9) === 0) {
        c++;
      }
      return c;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.cosh",
  function (a) {
    if (a) {
      return a;
    }
    var b = Math.exp;
    var c = function (c) {
      c = Number(c);
      return (b(c) + b(-c)) / 2;
    };
    return c;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.expm1",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      if (b < 0.25 && b > -0.25) {
        var e = b;
        var f = 1;
        var c = b;
        var d = 0;
        while (d != c) {
          e *= b / ++f;
          c = (d = c) + e;
        }
        return c;
      }
      return Math.exp(b) - 1;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.hypot",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, d, h) {
      c = Number(c);
      d = Number(d);
      var b, g, f;
      var e = Math.max(Math.abs(c), Math.abs(d));
      for (b = 2; b < arguments.length; b++) {
        e = Math.max(e, Math.abs(arguments[b]));
      }
      if (e > 1.0e100 || e < 1.0e-100) {
        c = c / e;
        d = d / e;
        f = c * c + d * d;
        for (b = 2; b < arguments.length; b++) {
          g = Number(arguments[b]) / e;
          f += g * g;
        }
        return Math.sqrt(f) * e;
      } else {
        f = c * c + d * d;
        for (b = 2; b < arguments.length; b++) {
          g = Number(arguments[b]);
          f += g * g;
        }
        return Math.sqrt(f);
      }
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.imul",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, c) {
      b = Number(b);
      c = Number(c);
      var f = (b >>> 16) & 65535;
      var d = b & 65535;
      var g = (c >>> 16) & 65535;
      var e = c & 65535;
      var h = ((f * e + d * g) << 16) >>> 0;
      return (d * e + h) | 0;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.log10",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      return Math.log(b) / Math.LN10;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.log2",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      return Math.log(b) / Math.LN2;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.sign",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      return b === 0 || isNaN(b) ? b : b > 0 ? 1 : -1;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.sinh",
  function (a) {
    if (a) {
      return a;
    }
    var b = Math.exp;
    var c = function (c) {
      c = Number(c);
      if (c === 0) {
        return c;
      }
      return (b(c) - b(-c)) / 2;
    };
    return c;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.tanh",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      if (b === 0) {
        return b;
      }
      var c = Math.exp(-2 * Math.abs(b));
      var d = (1 - c) / (1 + c);
      return b < 0 ? -d : d;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Math.trunc",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      b = Number(b);
      if (isNaN(b) || b === Infinity || b === -Infinity || b === 0) {
        return b;
      }
      var c = Math.floor(Math.abs(b));
      return b < 0 ? -c : c;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.EPSILON",
  function (a) {
    return Math.pow(2, -52);
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.MAX_SAFE_INTEGER",
  function () {
    return 9.007199254740991e15;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.MIN_SAFE_INTEGER",
  function () {
    return -9.007199254740991e15;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.isFinite",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      if (typeof b !== "number") {
        return !1;
      }
      return !isNaN(b) && b !== Infinity && b !== -Infinity;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.isInteger",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      if (!Number.isFinite(b)) {
        return !1;
      }
      return b === Math.floor(b);
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.isNaN",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      return typeof b === "number" && isNaN(b);
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Number.isSafeInteger",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      return Number.isInteger(b) && Math.abs(b) <= Number.MAX_SAFE_INTEGER;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Object.assign",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (e, f) {
      for (var d = 1; d < arguments.length; d++) {
        var b = arguments[d];
        if (!b) {
          continue;
        }
        for (var c in b) {
          if ($jscomp.owns(b, c)) {
            e[c] = b[c];
          }
        }
      }
      return e;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "Object.entries",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c) {
      var d = [];
      for (var b in c) {
        if ($jscomp.owns(c, b)) {
          d.push([b, c[b]]);
        }
      }
      return d;
    };
    return b;
  },
  "es8",
  "es3"
);
$jscomp.polyfill(
  "Object.getOwnPropertySymbols",
  function (a) {
    if (a) {
      return a;
    }
    return function () {
      return [];
    };
  },
  "es6-impl",
  "es5"
);
$jscomp.polyfill(
  "Reflect.ownKeys",
  function (b) {
    if (b) {
      return b;
    }
    var a = "jscomp_symbol_";
    function isSymbol(c) {
      return c.substring(0, a.length) == a;
    }
    var c = function (e) {
      var f = [];
      var c = Object.getOwnPropertyNames(e);
      var d = Object.getOwnPropertySymbols(e);
      for (var a = 0; a < c.length; a++) {
        (isSymbol(c[a]) ? d : f).push(c[a]);
      }
      return f.concat(d);
    };
    return c;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Object.getOwnPropertyDescriptors",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (e) {
      var d = {};
      var c = Reflect.ownKeys(e);
      for (var b = 0; b < c.length; b++) {
        d[c[b]] = Object.getOwnPropertyDescriptor(e, c[b]);
      }
      return d;
    };
    return b;
  },
  "es8",
  "es5"
);
$jscomp.polyfill(
  "Object.setPrototypeOf",
  function (a) {
    if (a) {
      return a;
    }
    if (typeof "".__proto__ != "object") {
      return null;
    }
    var b = function (b, c) {
      b.__proto__ = c;
      if (b.__proto__ !== c) {
        throw new TypeError(b + " is not extensible");
      }
      return b;
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Object.values",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      var c = [];
      for (var d in b) {
        if ($jscomp.owns(b, d)) {
          c.push(b[d]);
        }
      }
      return c;
    };
    return b;
  },
  "es8",
  "es3"
);
$jscomp.polyfill(
  "Reflect.apply",
  function (a) {
    if (a) {
      return a;
    }
    var c = Function.prototype.apply;
    var b = function (e, d, b) {
      return c.call(e, d, b);
    };
    return b;
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Reflect.construct",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, e, b) {
      if (b === undefined) {
        b = c;
      }
      var f = b.prototype || Object.prototype;
      var d = Object.create(f);
      var g = Reflect.apply(c, d, e);
      return g || d;
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Reflect.defineProperty",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (e, d, c) {
      try {
        Object.defineProperty(e, d, c);
        var b = Object.getOwnPropertyDescriptor(e, d);
        if (!b) {
          return !1;
        }
        return (
          b.configurable === (c.configurable || !1) &&
          b.enumerable === (c.enumerable || !1) &&
          ("value" in b
            ? b.value === c.value && b.writable === (c.writable || !1)
            : b.get === c.get && b.set === c.set)
        );
      } catch (f) {
        return !1;
      }
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Reflect.deleteProperty",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, b) {
      if (!$jscomp.owns(c, b)) {
        return !0;
      }
      try {
        return delete c[b];
      } catch (d) {
        return !1;
      }
    };
    return b;
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Reflect.getOwnPropertyDescriptor",
  function (a) {
    return a || Object.getOwnPropertyDescriptor;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Reflect.getPrototypeOf",
  function (a) {
    return a || Object.getPrototypeOf;
  },
  "es6",
  "es5"
);
$jscomp.findDescriptor = function (d, c) {
  var a = d;
  while (a) {
    var b = Reflect.getOwnPropertyDescriptor(a, c);
    if (b) {
      return b;
    }
    a = Reflect.getPrototypeOf(a);
  }
  return undefined;
};
$jscomp.polyfill(
  "Reflect.get",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (d, c, e) {
      if (arguments.length <= 2) {
        return d[c];
      }
      var b = $jscomp.findDescriptor(d, c);
      if (b) {
        return b.get ? b.get.call(e) : b.value;
      }
      return undefined;
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Reflect.has",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (c, b) {
      return b in c;
    };
    return b;
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Reflect.isExtensible",
  function (a) {
    if (a) {
      return a;
    }
    if (typeof Object.isExtensible == "function") {
      return Object.isExtensible;
    }
    return function () {
      return !0;
    };
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Reflect.preventExtensions",
  function (a) {
    if (a) {
      return a;
    }
    if (typeof Object.preventExtensions != "function") {
      return function () {
        return !1;
      };
    }
    var b = function (b) {
      Object.preventExtensions(b);
      return !Object.isExtensible(b);
    };
    return b;
  },
  "es6",
  "es3"
);
$jscomp.polyfill(
  "Reflect.set",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, d, e, f) {
      var c = $jscomp.findDescriptor(b, d);
      if (!c) {
        if (Reflect.isExtensible(b)) {
          b[d] = e;
          return !0;
        }
        return !1;
      }
      if (c.set) {
        c.set.call(arguments.length > 3 ? f : b, e);
        return !0;
      } else {
        if (c.writable && !Object.isFrozen(b)) {
          b[d] = e;
          return !0;
        }
      }
      return !1;
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.polyfill(
  "Reflect.setPrototypeOf",
  function (a) {
    if (a) {
      return a;
    }
    if (typeof "".__proto__ != "object") {
      return null;
    }
    var b = function (b, c) {
      try {
        b.__proto__ = c;
        return b.__proto__ === c;
      } catch (d) {
        return !1;
      }
    };
    return b;
  },
  "es6",
  "es5"
);
$jscomp.ASSUME_NO_NATIVE_SET = !1;
$jscomp.polyfill(
  "Set",
  function (b) {
    var c =
      !$jscomp.ASSUME_NO_NATIVE_SET &&
      (function () {
        if (!b || !b.prototype.entries || typeof Object.seal != "function") {
          return !1;
        }
        try {
          b = b;
          var d = Object.seal({ x: 4 });
          var c = new b($jscomp.makeIterator([d]));
          if (
            !c.has(d) ||
            c.size != 1 ||
            c.add(d) != c ||
            c.size != 1 ||
            c.add({ x: 4 }) != c ||
            c.size != 2
          ) {
            return !1;
          }
          var e = c.entries();
          var a = e.next();
          if (a.done || a.value[0] != d || a.value[1] != d) {
            return !1;
          }
          a = e.next();
          if (
            a.done ||
            a.value[0] == d ||
            a.value[0].x != 4 ||
            a.value[1] != a.value[0]
          ) {
            return !1;
          }
          return e.next().done;
        } catch (f) {
          return !1;
        }
      })();
    if (c) {
      return b;
    }
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    var a = function (a) {
      this.map_ = new Map();
      if (a) {
        var e = $jscomp.makeIterator(a);
        var c;
        while (!(c = e.next()).done) {
          var d = c.value;
          this.add(d);
        }
      }
      this.size = this.map_.size;
    };
    a.prototype.add = function (a) {
      this.map_.set(a, a);
      this.size = this.map_.size;
      return this;
    };
    a.prototype["delete"] = function (c) {
      var a = this.map_["delete"](c);
      this.size = this.map_.size;
      return a;
    };
    a.prototype.clear = function () {
      this.map_.clear();
      this.size = 0;
    };
    a.prototype.has = function (a) {
      return this.map_.has(a);
    };
    a.prototype.entries = function () {
      return this.map_.entries();
    };
    a.prototype.values = function () {
      return this.map_.values();
    };
    a.prototype.keys = a.prototype.values;
    $jscomp.initSymbol();
    $jscomp.initSymbolIterator();
    a.prototype[Symbol.iterator] = a.prototype.values;
    a.prototype.forEach = function (c, a) {
      var d = this;
      this.map_.forEach(function (e) {
        return c.call(a, e, e, d);
      });
    };
    return a;
  },
  "es6-impl",
  "es3"
);
$jscomp.checkStringArgs = function (a, c, b) {
  if (a == null) {
    throw new TypeError(
      "The 'this' value for String.prototype." +
        b +
        " must not be null or undefined"
    );
  }
  if (c instanceof RegExp) {
    throw new TypeError(
      "First argument to String.prototype." +
        b +
        " must not be a regular expression"
    );
  }
  return a + "";
};
$jscomp.polyfill(
  "String.prototype.codePointAt",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      var e = $jscomp.checkStringArgs(this, null, "codePointAt");
      var f = e.length;
      b = Number(b) || 0;
      if (!(b >= 0 && b < f)) {
        return void 0;
      }
      b = b | 0;
      var c = e.charCodeAt(b);
      if (c < 55296 || c > 56319 || b + 1 === f) {
        return c;
      }
      var d = e.charCodeAt(b + 1);
      if (d < 56320 || d > 57343) {
        return c;
      }
      return (c - 55296) * 1024 + d + 9216;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.endsWith",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, c) {
      var d = $jscomp.checkStringArgs(this, b, "endsWith");
      b = b + "";
      if (c === void 0) {
        c = d.length;
      }
      var f = Math.max(0, Math.min(c | 0, d.length));
      var e = b.length;
      while (e > 0 && f > 0) {
        if (d[--f] != b[--e]) {
          return !1;
        }
      }
      return e <= 0;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "String.fromCodePoint",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (e) {
      var c = "";
      for (var d = 0; d < arguments.length; d++) {
        var b = Number(arguments[d]);
        if (b < 0 || b > 1114111 || b !== Math.floor(b)) {
          throw new RangeError("invalid_code_point " + b);
        }
        if (b <= 65535) {
          c += String.fromCharCode(b);
        } else {
          b -= 65536;
          c += String.fromCharCode(((b >>> 10) & 1023) | 55296);
          c += String.fromCharCode((b & 1023) | 56320);
        }
      }
      return c;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.includes",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, c) {
      var d = $jscomp.checkStringArgs(this, b, "includes");
      return d.indexOf(b, c || 0) !== -1;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.repeat",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b) {
      var c = $jscomp.checkStringArgs(this, null, "repeat");
      if (b < 0 || b > 1342177279) {
        throw new RangeError("Invalid count value");
      }
      b = b | 0;
      var d = "";
      while (b) {
        if (b & 1) {
          d += c;
        }
        if ((b >>>= 1)) {
          c += c;
        }
      }
      return d;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.stringPadding = function (c, a) {
  var b = c !== undefined ? String(c) : " ";
  if (!(a > 0) || !b) {
    return "";
  }
  var d = Math.ceil(a / b.length);
  return b.repeat(d).substring(0, a);
};
$jscomp.polyfill(
  "String.prototype.padEnd",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (d, c) {
      var b = $jscomp.checkStringArgs(this, null, "padStart");
      var e = d - b.length;
      return b + $jscomp.stringPadding(c, e);
    };
    return b;
  },
  "es8",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.padStart",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (d, c) {
      var b = $jscomp.checkStringArgs(this, null, "padStart");
      var e = d - b.length;
      return $jscomp.stringPadding(c, e) + b;
    };
    return b;
  },
  "es8",
  "es3"
);
$jscomp.polyfill(
  "String.prototype.startsWith",
  function (a) {
    if (a) {
      return a;
    }
    var b = function (b, g) {
      var c = $jscomp.checkStringArgs(this, b, "startsWith");
      b = b + "";
      var h = c.length;
      var e = b.length;
      var f = Math.max(0, Math.min(g | 0, c.length));
      var d = 0;
      while (d < e && f < h) {
        if (c[f++] != b[d++]) {
          return !1;
        }
      }
      return d >= e;
    };
    return b;
  },
  "es6-impl",
  "es3"
);
$jscomp.arrayFromIterator = function (c) {
  var b;
  var a = [];
  while (!(b = c.next()).done) {
    a.push(b.value);
  }
  return a;
};
$jscomp.arrayFromIterable = function (a) {
  if (a instanceof Array) {
    return a;
  } else {
    return $jscomp.arrayFromIterator($jscomp.makeIterator(a));
  }
};
$jscomp.inherits = function (a, b) {
  function tempCtor() {}
  tempCtor.prototype = b.prototype;
  a.superClass_ = b.prototype;
  a.prototype = new tempCtor();
  a.prototype.constructor = a;
  for (var c in b) {
    if (Object.defineProperties) {
      var d = Object.getOwnPropertyDescriptor(b, c);
      if (d) {
        Object.defineProperty(a, c, d);
      }
    } else {
      a[c] = b[c];
    }
  }
};
$jscomp.polyfill(
  "WeakSet",
  function (b) {
    function isConformant() {
      if (!b || !Object.seal) {
        return !1;
      }
      try {
        var c = Object.seal({});
        var d = Object.seal({});
        var a = new b([c]);
        if (!a.has(c) || a.has(d)) {
          return !1;
        }
        a["delete"](c);
        a.add(d);
        return !a.has(c) && a.has(d);
      } catch (e) {
        return !1;
      }
    }
    if (isConformant()) {
      return b;
    }
    var a = function (a) {
      this.map_ = new WeakMap();
      if (a) {
        $jscomp.initSymbol();
        $jscomp.initSymbolIterator();
        var e = $jscomp.makeIterator(a);
        var c;
        while (!(c = e.next()).done) {
          var d = c.value;
          this.add(d);
        }
      }
    };
    a.prototype.add = function (a) {
      this.map_.set(a, !0);
      return this;
    };
    a.prototype.has = function (a) {
      return this.map_.has(a);
    };
    a.prototype["delete"] = function (a) {
      return this.map_["delete"](a);
    };
    return a;
  },
  "es6-impl",
  "es3"
);
try {
  if (Array.prototype.values.toString().indexOf("[native code]") == -1) {
    delete Array.prototype.values;
  }
} catch (a) {}
(function () {
  var global = this,
    objectPrototype = Object.prototype,
    toString = objectPrototype.toString,
    enumerables = !0,
    enumerablesTest = { toString: 1 },
    emptyFn = function () {},
    i;
  if (typeof Ext === "undefined") {
    global.Ext = {};
  }
  Ext.global = global;
  for (i in enumerablesTest) {
    enumerables = null;
  }
  if (enumerables) {
    enumerables = [
      "hasOwnProperty",
      "valueOf",
      "isPrototypeOf",
      "propertyIsEnumerable",
      "toLocaleString",
      "toString",
      "constructor",
    ];
  }
  Ext.enumerables = enumerables;
  Ext.apply = function (b, a, f) {
    if (f) {
      Ext.apply(b, f);
    }
    if (b && a && typeof a === "object") {
      var d, e, c;
      for (d in a) {
        b[d] = a[d];
      }
      if (enumerables) {
        for (e = enumerables.length; e--; ) {
          c = enumerables[e];
          if (a.hasOwnProperty(c)) {
            b[c] = a[c];
          }
        }
      }
    }
    return b;
  };
  Ext.buildSettings = Ext.apply(
    { baseCSSPrefix: "x-", scopeResetCSS: !1 },
    Ext.buildSettings || {}
  );
  Ext.apply(Ext, {
    emptyFn: emptyFn,
    baseCSSPrefix: Ext.buildSettings.baseCSSPrefix,
    applyIf: function (b, c) {
      var a;
      if (b) {
        for (a in c) {
          if (b[a] === undefined) {
            b[a] = c[a];
          }
        }
      }
      return b;
    },
    iterate: function (a, c, b) {
      if (Ext.isEmpty(a)) {
        return;
      }
      if (b === undefined) {
        b = a;
      }
      if (Ext.isIterable(a)) {
        Ext.Array.each.call(Ext.Array, a, c, b);
      } else {
        Ext.Object.each.call(Ext.Object, a, c, b);
      }
    },
  });
  Ext.apply(Ext, {
    extend: (function () {
      var a = objectPrototype.constructor,
        b = function (b) {
          for (var a in b) {
            if (!b.hasOwnProperty(a)) {
              continue;
            }
            this[a] = b[a];
          }
        };
      return function (c, d, g) {
        if (Ext.isObject(d)) {
          g = d;
          d = c;
          c =
            g.constructor !== a
              ? g.constructor
              : function () {
                  d.apply(this, arguments);
                };
        }
        var h = function () {},
          e,
          f = d.prototype;
        h.prototype = f;
        e = c.prototype = new h();
        e.constructor = c;
        c.superclass = f;
        if (f.constructor === a) {
          f.constructor = d;
        }
        c.override = function (a) {
          Ext.override(c, a);
        };
        e.override = b;
        e.proto = e;
        c.override(g);
        c.extend = function (a) {
          return Ext.extend(c, a);
        };
        return c;
      };
    })(),
    override: function (a, b) {
      if (a.$isClass) {
        return a.override(b);
      } else {
        Ext.apply(a.prototype, b);
      }
    },
  });
  Ext.apply(Ext, {
    valueFrom: function (a, b, c) {
      return Ext.isEmpty(a, c) ? b : a;
    },
    typeOf: function (b) {
      if (b === null) {
        return "null";
      }
      var a = typeof b;
      if (
        a === "undefined" ||
        a === "string" ||
        a === "number" ||
        a === "boolean"
      ) {
        return a;
      }
      var c = toString.call(b);
      switch (c) {
        case "[object Array]":
          return "array";
        case "[object Date]":
          return "date";
        case "[object Boolean]":
          return "boolean";
        case "[object Number]":
          return "number";
        case "[object RegExp]":
          return "regexp";
      }
      if (a === "function") {
        return "function";
      }
      if (a === "object") {
        if (b.nodeType !== undefined) {
          if (b.nodeType === 3) {
            return /\S/.test(b.nodeValue) ? "textnode" : "whitespace";
          } else {
            return "element";
          }
        }
        return "object";
      }
    },
    isEmpty: function (a, b) {
      return (
        a === null ||
        a === undefined ||
        (!b ? a === "" : !1) ||
        (Ext.isArray(a) && a.length === 0)
      );
    },
    isArray:
      "isArray" in Array
        ? Array.isArray
        : function (a) {
            return toString.call(a) === "[object Array]";
          },
    isDate: function (a) {
      return toString.call(a) === "[object Date]";
    },
    isMSDate: function (a) {
      if (!Ext.isString(a)) {
        return !1;
      } else {
        return (
          a.match("\\\\?/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\\\?/") !== null
        );
      }
    },
    isObject:
      toString.call(null) === "[object Object]"
        ? function (a) {
            return (
              a !== null &&
              a !== undefined &&
              toString.call(a) === "[object Object]" &&
              a.ownerDocument === undefined
            );
          }
        : function (a) {
            return toString.call(a) === "[object Object]";
          },
    isSimpleObject: function (a) {
      return a instanceof Object && a.constructor === Object;
    },
    isPrimitive: function (b) {
      var a = typeof b;
      return a === "string" || a === "number" || a === "boolean";
    },
    isFunction:
      typeof document !== "undefined" &&
      typeof document.getElementsByTagName("body") === "function"
        ? function (a) {
            return toString.call(a) === "[object Function]";
          }
        : function (a) {
            return typeof a === "function";
          },
    isNumber: function (a) {
      return typeof a === "number" && isFinite(a);
    },
    isNumeric: function (a) {
      return !isNaN(parseFloat(a)) && isFinite(a);
    },
    isString: function (a) {
      return typeof a === "string";
    },
    isBoolean: function (a) {
      return typeof a === "boolean";
    },
    isElement: function (a) {
      return a ? a.nodeType === 1 : !1;
    },
    isTextNode: function (a) {
      return a ? a.nodeName === "#text" : !1;
    },
    isDefined: function (a) {
      return typeof a !== "undefined";
    },
    isIterable: function (a) {
      return a && typeof a !== "string" ? a.length !== undefined : !1;
    },
  });
  Ext.apply(Ext, {
    clone: function (a) {
      if (a === null || a === undefined) {
        return a;
      }
      if (a.nodeType && a.cloneNode) {
        return a.cloneNode(!0);
      }
      var d = toString.call(a);
      if (d === "[object Date]") {
        return new Date(a.getTime());
      }
      var c, f, g, b, e;
      if (d === "[object Array]") {
        c = a.length;
        b = [];
        while (c--) {
          b[c] = Ext.clone(a[c]);
        }
      } else {
        if (d === "[object Object]" && a.constructor === Object) {
          b = {};
          for (e in a) {
            b[e] = Ext.clone(a[e]);
          }
          if (enumerables) {
            for (f = enumerables.length; f--; ) {
              g = enumerables[f];
              b[g] = a[g];
            }
          }
        }
      }
      return b || a;
    },
    getUniqueGlobalNamespace: function () {
      var a = this.uniqueGlobalNamespace;
      if (a === undefined) {
        var b = 0;
        do {
          a = "ExtBox" + ++b;
        } while (Ext.global[a] !== undefined);
        Ext.global[a] = Ext;
        this.uniqueGlobalNamespace = a;
      }
      return a;
    },
    functionFactory: function () {
      var a = Array.prototype.slice.call(arguments),
        b = a.length;
      if (b > 0) {
        a[b - 1] =
          "var Ext=window." + this.getUniqueGlobalNamespace() + ";" + a[b - 1];
      }
      return Function.prototype.constructor.apply(Function.prototype, a);
    },
    globalEval:
      "execScript" in global
        ? function (a) {
            global.execScript(a);
          }
        : function (code) {
            (function () {
              eval(code);
            })();
          },
  });
  Ext.type = Ext.typeOf;
})();
(function () {
  var b = "2.3.1.410",
    a;
  Ext.Version = a = Ext.extend(Object, {
    constructor: function (e) {
      var d = this.toNumber,
        b,
        c;
      if (e instanceof a) {
        return e;
      }
      this.version = this.shortVersion = String(e)
        .toLowerCase()
        .replace(/_/g, ".")
        .replace(/[\-+]/g, "");
      c = this.version.search(/([^\d\.])/);
      if (c !== -1) {
        this.release = this.version.substr(c, e.length);
        this.shortVersion = this.version.substr(0, c);
      }
      this.shortVersion = this.shortVersion.replace(/[^\d]/g, "");
      b = this.version.split(".");
      this.major = d(b.shift());
      this.minor = d(b.shift());
      this.patch = d(b.shift());
      this.build = d(b.shift());
      return this;
    },
    toNumber: function (a) {
      a = parseInt(a || 0, 10);
      if (isNaN(a)) {
        a = 0;
      }
      return a;
    },
    toString: function () {
      return this.version;
    },
    valueOf: function () {
      return this.version;
    },
    getMajor: function () {
      return this.major || 0;
    },
    getMinor: function () {
      return this.minor || 0;
    },
    getPatch: function () {
      return this.patch || 0;
    },
    getBuild: function () {
      return this.build || 0;
    },
    getRelease: function () {
      return this.release || "";
    },
    isGreaterThan: function (b) {
      return a.compare(this.version, b) === 1;
    },
    isGreaterThanOrEqual: function (b) {
      return a.compare(this.version, b) >= 0;
    },
    isLessThan: function (b) {
      return a.compare(this.version, b) === -1;
    },
    isLessThanOrEqual: function (b) {
      return a.compare(this.version, b) <= 0;
    },
    equals: function (b) {
      return a.compare(this.version, b) === 0;
    },
    match: function (a) {
      a = String(a);
      return this.version.substr(0, a.length) === a;
    },
    toArray: function () {
      return [
        this.getMajor(),
        this.getMinor(),
        this.getPatch(),
        this.getBuild(),
        this.getRelease(),
      ];
    },
    getShortVersion: function () {
      return this.shortVersion;
    },
    gt: function () {
      return this.isGreaterThan.apply(this, arguments);
    },
    lt: function () {
      return this.isLessThan.apply(this, arguments);
    },
    gtEq: function () {
      return this.isGreaterThanOrEqual.apply(this, arguments);
    },
    ltEq: function () {
      return this.isLessThanOrEqual.apply(this, arguments);
    },
  });
  Ext.apply(a, {
    releaseValueMap: {
      dev: -6,
      alpha: -5,
      a: -5,
      beta: -4,
      b: -4,
      rc: -3,
      "#": -2,
      p: -1,
      pl: -1,
    },
    getComponentValue: function (a) {
      return !a ? 0 : isNaN(a) ? this.releaseValueMap[a] || a : parseInt(a, 10);
    },
    compare: function (c, d) {
      var e, f, b;
      c = new a(c).toArray();
      d = new a(d).toArray();
      for (b = 0; b < Math.max(c.length, d.length); b++) {
        e = this.getComponentValue(c[b]);
        f = this.getComponentValue(d[b]);
        if (e < f) {
          return -1;
        } else {
          if (e > f) {
            return 1;
          }
        }
      }
      return 0;
    },
  });
  Ext.apply(Ext, {
    versions: {},
    lastRegisteredVersion: null,
    setVersion: function (b, c) {
      Ext.versions[b] = new a(c);
      Ext.lastRegisteredVersion = Ext.versions[b];
      return this;
    },
    getVersion: function (a) {
      if (a === undefined) {
        return Ext.lastRegisteredVersion;
      }
      return Ext.versions[a];
    },
    deprecate: function (b, e, c, d) {
      if (a.compare(Ext.getVersion(b), e) < 1) {
        c.call(d);
      }
    },
  });
  Ext.setVersion("core", b);
})();
Ext.String = {
  trimRegex:
    /^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,
  escapeRe: /('|\\)/g,
  formatRe: /\{(\d+)\}/g,
  escapeRegexRe: /([-.*+?^${}()|[\]\/\\])/g,
  htmlEncode: (function () {
    var a = { "&": "&amp;", ">": "&gt;", "<": "&lt;", '"': "&quot;" },
      c = [],
      d,
      b;
    for (d in a) {
      c.push(d);
    }
    b = new RegExp("(" + c.join("|") + ")", "g");
    return function (c) {
      return !c
        ? c
        : String(c).replace(b, function (d, b) {
            return a[b];
          });
    };
  })(),
  htmlDecode: (function () {
    var a = { "&amp;": "&", "&gt;": ">", "&lt;": "<", "&quot;": '"' },
      c = [],
      d,
      b;
    for (d in a) {
      c.push(d);
    }
    b = new RegExp("(" + c.join("|") + "|&#[0-9]{1,5};" + ")", "g");
    return function (c) {
      return !c
        ? c
        : String(c).replace(b, function (d, b) {
            if (b in a) {
              return a[b];
            } else {
              return String.fromCharCode(parseInt(b.substr(2), 10));
            }
          });
    };
  })(),
  urlAppend: function (a, b) {
    if (!Ext.isEmpty(b)) {
      return a + (a.indexOf("?") === -1 ? "?" : "&") + b;
    }
    return a;
  },
  trim: function (a) {
    return a.replace(Ext.String.trimRegex, "");
  },
  capitalize: function (a) {
    return a.charAt(0).toUpperCase() + a.substr(1);
  },
  ellipsis: function (a, c, e) {
    if (a && a.length > c) {
      if (e) {
        var b = a.substr(0, c - 2),
          d = Math.max(
            b.lastIndexOf(" "),
            b.lastIndexOf("."),
            b.lastIndexOf("!"),
            b.lastIndexOf("?")
          );
        if (d !== -1 && d >= c - 15) {
          return b.substr(0, d) + "...";
        }
      }
      return a.substr(0, c - 3) + "...";
    }
    return a;
  },
  escapeRegex: function (a) {
    return a.replace(Ext.String.escapeRegexRe, "\\$1");
  },
  escape: function (a) {
    return a.replace(Ext.String.escapeRe, "\\$1");
  },
  toggle: function (b, a, c) {
    return b === a ? c : a;
  },
  leftPad: function (c, d, b) {
    var a = String(c);
    b = b || " ";
    while (a.length < d) {
      a = b + a;
    }
    return a;
  },
  format: function (a) {
    var b = Ext.Array.toArray(arguments, 1);
    return a.replace(Ext.String.formatRe, function (d, c) {
      return b[c];
    });
  },
  repeat: function (b, c, d) {
    for (var a = [], e = c; e--; ) {
      a.push(b);
    }
    return a.join(d || "");
  },
};
Ext.htmlEncode = Ext.String.htmlEncode;
Ext.htmlDecode = Ext.String.htmlDecode;
Ext.urlAppend = Ext.String.urlAppend;
(function () {
  var c = Array.prototype,
    b = c.slice,
    d = (function () {
      var a = [],
        b,
        c = 20;
      if (!a.splice) {
        return !1;
      }
      while (c--) {
        a.push("A");
      }
      a.splice(
        15,
        0,
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F",
        "F"
      );
      b = a.length;
      a.splice(13, 0, "XXX");
      if (b + 1 != a.length) {
        return !1;
      }
      return !0;
    })(),
    i = "forEach" in c,
    n = "map" in c,
    g = "indexOf" in c,
    k = "every" in c,
    l = "some" in c,
    j = "filter" in c,
    m = (function () {
      var a = [1, 2, 3, 4, 5].sort(function () {
        return 0;
      });
      return a[0] === 1 && a[1] === 2 && a[2] === 3 && a[3] === 4 && a[4] === 5;
    })(),
    f = !0,
    a;
  try {
    if (typeof document !== "undefined") {
      b.call(document.getElementsByTagName("body"));
    }
  } catch (p) {
    f = !1;
  }
  function fixArrayIndex(b, a) {
    return a < 0 ? Math.max(0, b.length + a) : Math.min(b.length, a);
  }
  function replaceSim(a, m, l, d) {
    var e = d ? d.length : 0,
      h = a.length,
      f = fixArrayIndex(a, m);
    if (f === h) {
      if (e) {
        a.push.apply(a, d);
      }
    } else {
      var j = Math.min(l, h - f),
        c = f + j,
        g = c + e - j,
        k = h - c,
        i = h - j,
        b;
      if (g < c) {
        for (b = 0; b < k; ++b) {
          a[g + b] = a[c + b];
        }
      } else {
        if (g > c) {
          for (b = k; b--; ) {
            a[g + b] = a[c + b];
          }
        }
      }
      if (e && f === i) {
        a.length = i;
        a.push.apply(a, d);
      } else {
        a.length = i + e;
        for (b = 0; b < e; ++b) {
          a[f + b] = d[b];
        }
      }
    }
    return a;
  }
  function replaceNative(a, c, d, b) {
    if (b && b.length) {
      if (c < a.length) {
        a.splice.apply(a, [c, d].concat(b));
      } else {
        a.push.apply(a, b);
      }
    } else {
      a.splice(c, d);
    }
    return a;
  }
  function eraseSim(b, c, a) {
    return replaceSim(b, c, a);
  }
  function eraseNative(a, c, b) {
    a.splice(c, b);
    return a;
  }
  function spliceSim(a, e, c) {
    var d = fixArrayIndex(a, e),
      f = a.slice(e, fixArrayIndex(a, d + c));
    if (arguments.length < 4) {
      replaceSim(a, d, c);
    } else {
      replaceSim(a, d, c, b.call(arguments, 3));
    }
    return f;
  }
  function spliceNative(a) {
    return a.splice.apply(a, b.call(arguments, 1));
  }
  var e = d ? eraseNative : eraseSim,
    h = d ? replaceNative : replaceSim,
    o = d ? spliceNative : spliceSim;
  a = Ext.Array = {
    each: function (c, e, d, g) {
      c = a.from(c);
      var b,
        f = c.length;
      if (g !== !0) {
        for (b = 0; b < f; b++) {
          if (e.call(d || c[b], c[b], b, c) === !1) {
            return b;
          }
        }
      } else {
        for (b = f - 1; b > -1; b--) {
          if (e.call(d || c[b], c[b], b, c) === !1) {
            return b;
          }
        }
      }
      return !0;
    },
    forEach: i
      ? function (a, c, b) {
          return a.forEach(c, b);
        }
      : function (b, d, c) {
          var a = 0,
            e = b.length;
          for (; a < e; a++) {
            d.call(c, b[a], a, b);
          }
        },
    indexOf: g
      ? function (a, c, b) {
          return a.indexOf(c, b);
        }
      : function (d, e, b) {
          var a,
            c = d.length;
          for (a = b < 0 ? Math.max(0, c + b) : b || 0; a < c; a++) {
            if (d[a] === e) {
              return a;
            }
          }
          return -1;
        },
    contains: g
      ? function (a, b) {
          return a.indexOf(b) !== -1;
        }
      : function (b, d) {
          var a, c;
          for (a = 0, c = b.length; a < c; a++) {
            if (b[a] === d) {
              return !0;
            }
          }
          return !1;
        },
    toArray: function (a, d, c) {
      if (!a || !a.length) {
        return [];
      }
      if (typeof a === "string") {
        a = a.split("");
      }
      if (f) {
        return b.call(a, d || 0, c || a.length);
      }
      var g = [],
        e;
      d = d || 0;
      c = c ? (c < 0 ? a.length + c : c) : a.length;
      for (e = d; e < c; e++) {
        g.push(a[e]);
      }
      return g;
    },
    pluck: function (b, f) {
      var d = [],
        a,
        e,
        c;
      for (a = 0, e = b.length; a < e; a++) {
        c = b[a];
        d.push(c[f]);
      }
      return d;
    },
    map: n
      ? function (a, c, b) {
          return a.map(c, b);
        }
      : function (b, f, d) {
          var c = [],
            a = 0,
            e = b.length;
          for (; a < e; a++) {
            c[a] = f.call(d, b[a], a, b);
          }
          return c;
        },
    every: function (a, d, c) {
      if (k) {
        return a.every(d, c);
      }
      var b = 0,
        e = a.length;
      for (; b < e; ++b) {
        if (!d.call(c, a[b], b, a)) {
          return !1;
        }
      }
      return !0;
    },
    some: function (a, d, c) {
      if (l) {
        return a.some(d, c);
      }
      var b = 0,
        e = a.length;
      for (; b < e; ++b) {
        if (d.call(c, a[b], b, a)) {
          return !0;
        }
      }
      return !1;
    },
    clean: function (d) {
      var c = [],
        b = 0,
        e = d.length,
        a;
      for (; b < e; b++) {
        a = d[b];
        if (!Ext.isEmpty(a)) {
          c.push(a);
        }
      }
      return c;
    },
    unique: function (e) {
      var b = [],
        d = 0,
        f = e.length,
        c;
      for (; d < f; d++) {
        c = e[d];
        if (a.indexOf(b, c) === -1) {
          b.push(c);
        }
      }
      return b;
    },
    filter: function (a, e, d) {
      if (j) {
        return a.filter(e, d);
      }
      var c = [],
        b = 0,
        f = a.length;
      for (; b < f; b++) {
        if (e.call(d, a[b], b, a)) {
          c.push(a[b]);
        }
      }
      return c;
    },
    from: function (c, d) {
      if (c === undefined || c === null) {
        return [];
      }
      if (Ext.isArray(c)) {
        return d ? b.call(c) : c;
      }
      if (c && c.length !== undefined && typeof c !== "string") {
        return a.toArray(c);
      }
      return [c];
    },
    remove: function (b, d) {
      var c = a.indexOf(b, d);
      if (c !== -1) {
        e(b, c, 1);
      }
      return b;
    },
    include: function (b, c) {
      if (!a.contains(b, c)) {
        b.push(c);
      }
    },
    clone: function (a) {
      return b.call(a);
    },
    merge: function () {
      var e = b.call(arguments),
        d = [],
        c,
        f;
      for (c = 0, f = e.length; c < f; c++) {
        d = d.concat(e[c]);
      }
      return a.unique(d);
    },
    intersect: function () {
      var f = [],
        c = b.call(arguments),
        h,
        g,
        e,
        d;
      if (!c.length) {
        return f;
      }
      c = c.sort(function (a, b) {
        if (a.length > b.length) {
          return 1;
        } else {
          if (a.length < b.length) {
            return -1;
          } else {
            return 0;
          }
        }
      });
      g = a.unique(c[0]);
      for (e = 0; e < g.length; e++) {
        h = g[e];
        for (d = 1; d < c.length; d++) {
          if (c[d].indexOf(h) === -1) {
            break;
          }
          if (d == c.length - 1) {
            f.push(h);
          }
        }
      }
      return f;
    },
    difference: function (i, f) {
      var c = b.call(i),
        h = c.length,
        d,
        a,
        g;
      for (d = 0, g = f.length; d < g; d++) {
        for (a = 0; a < h; a++) {
          if (c[a] === f[d]) {
            e(c, a, 1);
            a--;
            h--;
          }
        }
      }
      return c;
    },
    slice: function (a, c, d) {
      return b.call(a, c, d);
    },
    sort: function (a, e) {
      if (m) {
        if (e) {
          return a.sort(e);
        } else {
          return a.sort();
        }
      }
      var g = a.length,
        c = 0,
        f,
        d,
        b,
        h;
      for (; c < g; c++) {
        b = c;
        for (d = c + 1; d < g; d++) {
          if (e) {
            f = e(a[d], a[b]);
            if (f < 0) {
              b = d;
            }
          } else {
            if (a[d] < a[b]) {
              b = d;
            }
          }
        }
        if (b !== c) {
          h = a[c];
          a[c] = a[b];
          a[b] = h;
        }
      }
      return a;
    },
    flatten: function (b) {
      var a = [];
      function rFlatten(f) {
        var c, e, d;
        for (c = 0, e = f.length; c < e; c++) {
          d = f[c];
          if (Ext.isArray(d)) {
            rFlatten(d);
          } else {
            a.push(d);
          }
        }
        return a;
      }
      return rFlatten(b);
    },
    min: function (d, e) {
      var b = d[0],
        c,
        f,
        a;
      for (c = 0, f = d.length; c < f; c++) {
        a = d[c];
        if (e) {
          if (e(b, a) === 1) {
            b = a;
          }
        } else {
          if (a < b) {
            b = a;
          }
        }
      }
      return b;
    },
    max: function (d, e) {
      var b = d[0],
        c,
        f,
        a;
      for (c = 0, f = d.length; c < f; c++) {
        a = d[c];
        if (e) {
          if (e(b, a) === -1) {
            b = a;
          }
        } else {
          if (a > b) {
            b = a;
          }
        }
      }
      return b;
    },
    mean: function (b) {
      return b.length > 0 ? a.sum(b) / b.length : undefined;
    },
    sum: function (b) {
      var d = 0,
        a,
        e,
        c;
      for (a = 0, e = b.length; a < e; a++) {
        c = b[a];
        d += c;
      }
      return d;
    },
    erase: e,
    insert: function (a, b, c) {
      return h(a, b, 0, c);
    },
    replace: h,
    splice: o,
  };
  Ext.each = a.each;
  a.union = a.merge;
  Ext.min = a.min;
  Ext.max = a.max;
  Ext.sum = a.sum;
  Ext.mean = a.mean;
  Ext.flatten = a.flatten;
  Ext.clean = a.clean;
  Ext.unique = a.unique;
  Ext.pluck = a.pluck;
  Ext.toArray = function () {
    return a.toArray.apply(a, arguments);
  };
})();
(function () {
  var a = (0.9).toFixed() !== "1";
  Ext.Number = {
    constrain: function (a, c, b) {
      a = parseFloat(a);
      if (!isNaN(c)) {
        a = Math.max(a, c);
      }
      if (!isNaN(b)) {
        a = Math.min(a, b);
      }
      return a;
    },
    snap: function (d, a, f, e) {
      var c = d,
        b;
      if (!(a && d)) {
        return d;
      }
      b = d % a;
      if (b !== 0) {
        c -= b;
        if (b * 2 >= a) {
          c += a;
        } else {
          if (b * 2 < -a) {
            c -= a;
          }
        }
      }
      return Ext.Number.constrain(c, f, e);
    },
    toFixed: function (c, b) {
      if (a) {
        b = b || 0;
        var d = Math.pow(10, b);
        return (Math.round(c * d) / d).toFixed(b);
      }
      return c.toFixed(b);
    },
    from: function (a, b) {
      if (isFinite(a)) {
        a = parseFloat(a);
      }
      return !isNaN(a) ? a : b;
    },
  };
})();
Ext.num = function () {
  return Ext.Number.from.apply(this, arguments);
};
(function () {
  var b = function () {};
  var a = (Ext.Object = {
    chain:
      "create" in Object
        ? function (a) {
            return Object.create(a);
          }
        : function (a) {
            b.prototype = a;
            var c = new b();
            b.prototype = null;
            return c;
          },
    toQueryObjects: function (e, c, f) {
      var g = a.toQueryObjects,
        d = [],
        b,
        h;
      if (Ext.isArray(c)) {
        for (b = 0, h = c.length; b < h; b++) {
          if (f) {
            d = d.concat(g(e + "[" + b + "]", c[b], !0));
          } else {
            d.push({ name: e, value: c[b] });
          }
        }
      } else {
        if (Ext.isObject(c)) {
          for (b in c) {
            if (c.hasOwnProperty(b)) {
              if (f) {
                d = d.concat(g(e + "[" + b + "]", c[b], !0));
              } else {
                d.push({ name: e, value: c[b] });
              }
            }
          }
        } else {
          d.push({ name: e, value: c });
        }
      }
      return d;
    },
    toQueryString: function (g, j) {
      var c = [],
        h = [],
        d,
        e,
        i,
        f,
        b;
      for (d in g) {
        if (g.hasOwnProperty(d)) {
          c = c.concat(a.toQueryObjects(d, g[d], j));
        }
      }
      for (e = 0, i = c.length; e < i; e++) {
        f = c[e];
        b = f.value;
        if (Ext.isEmpty(b)) {
          b = "";
        } else {
          if (Ext.isDate(b)) {
            b = Ext.Date.toString(b);
          }
        }
        h.push(
          encodeURIComponent(f.name) + "=" + encodeURIComponent(String(b))
        );
      }
      return h.join("&");
    },
    fromQueryString: function (q, r) {
      var o = q.replace(/^\?/, "").split("&"),
        d = {},
        e,
        j,
        b,
        f,
        k,
        p,
        m,
        c,
        h,
        i,
        n,
        g,
        a,
        l;
      for (k = 0, p = o.length; k < p; k++) {
        m = o[k];
        if (m.length > 0) {
          j = m.split("=");
          b = decodeURIComponent(j[0]);
          f = j[1] !== undefined ? decodeURIComponent(j[1]) : "";
          if (!r) {
            if (d.hasOwnProperty(b)) {
              if (!Ext.isArray(d[b])) {
                d[b] = [d[b]];
              }
              d[b].push(f);
            } else {
              d[b] = f;
            }
          } else {
            i = b.match(/(\[):?([^\]]*)\]/g);
            n = b.match(/^([^\[]+)/);
            b = n[0];
            g = [];
            if (i === null) {
              d[b] = f;
              continue;
            }
            for (c = 0, h = i.length; c < h; c++) {
              a = i[c];
              a = a.length === 2 ? "" : a.substring(1, a.length - 1);
              g.push(a);
            }
            g.unshift(b);
            e = d;
            for (c = 0, h = g.length; c < h; c++) {
              a = g[c];
              if (c === h - 1) {
                if (Ext.isArray(e) && a === "") {
                  e.push(f);
                } else {
                  e[a] = f;
                }
              } else {
                if (e[a] === undefined || typeof e[a] === "string") {
                  l = g[c + 1];
                  e[a] = Ext.isNumeric(l) || l === "" ? [] : {};
                }
                e = e[a];
              }
            }
          }
        }
      }
      return d;
    },
    each: function (a, d, c) {
      for (var b in a) {
        if (a.hasOwnProperty(b)) {
          if (d.call(c || a, b, a[b], a) === !1) {
            return;
          }
        }
      }
    },
    merge: function (e) {
      var g = 1,
        j = arguments.length,
        i = a.merge,
        h = Ext.clone,
        f,
        c,
        b,
        d;
      for (; g < j; g++) {
        f = arguments[g];
        for (c in f) {
          b = f[c];
          if (b && b.constructor === Object) {
            d = e[c];
            if (d && d.constructor === Object) {
              i(d, b);
            } else {
              e[c] = h(b);
            }
          } else {
            e[c] = b;
          }
        }
      }
      return e;
    },
    mergeIf: function (c) {
      var e = 1,
        g = arguments.length,
        f = Ext.clone,
        d,
        b,
        a;
      for (; e < g; e++) {
        d = arguments[e];
        for (b in d) {
          if (!(b in c)) {
            a = d[b];
            if (a && a.constructor === Object) {
              c[b] = f(a);
            } else {
              c[b] = a;
            }
          }
        }
      }
      return c;
    },
    getKey: function (b, c) {
      for (var a in b) {
        if (b.hasOwnProperty(a) && b[a] === c) {
          return a;
        }
      }
      return null;
    },
    getValues: function (b) {
      var c = [],
        a;
      for (a in b) {
        if (b.hasOwnProperty(a)) {
          c.push(b[a]);
        }
      }
      return c;
    },
    getKeys:
      "keys" in Object
        ? Object.keys
        : function (b) {
            var c = [],
              a;
            for (a in b) {
              if (b.hasOwnProperty(a)) {
                c.push(a);
              }
            }
            return c;
          },
    getSize: function (b) {
      var c = 0,
        a;
      for (a in b) {
        if (b.hasOwnProperty(a)) {
          c++;
        }
      }
      return c;
    },
    classify: function (c) {
      var e = [],
        f = [],
        h = {},
        i = function () {
          var a = 0,
            d = e.length,
            b;
          for (; a < d; a++) {
            b = e[a];
            this[b] = new h[b]();
          }
          d = f.length;
          for (a = 0; a < d; a++) {
            b = f[a];
            this[b] = c[b].slice();
          }
        },
        b,
        d,
        g;
      for (b in c) {
        if (c.hasOwnProperty(b)) {
          d = c[b];
          if (d) {
            g = d.constructor;
            if (g === Object) {
              e.push(b);
              h[b] = a.classify(d);
            } else {
              if (g === Array) {
                f.push(b);
              }
            }
          }
        }
      }
      i.prototype = c;
      return i;
    },
    equals: function (c, d) {
      var f = typeof c,
        e = typeof d,
        b;
      if (e === e) {
        if (f === "object") {
          for (b in c) {
            if (!(b in d)) {
              return !1;
            }
            if (!a.equals(c[b], d[b])) {
              return !1;
            }
          }
          for (b in d) {
            if (!(b in c)) {
              return !1;
            }
          }
          return !0;
        } else {
          return c === d;
        }
      }
      return !1;
    },
    defineProperty:
      "defineProperty" in Object
        ? Object.defineProperty
        : function (b, c, a) {
            if (a.get) {
              b.__defineGetter__(c, a.get);
            }
            if (a.set) {
              b.__defineSetter__(c, a.set);
            }
          },
  });
  Ext.merge = Ext.Object.merge;
  Ext.mergeIf = Ext.Object.mergeIf;
  Ext.urlEncode = function () {
    var b = Ext.Array.from(arguments),
      c = "";
    if (typeof b[1] === "string") {
      c = b[1] + "&";
      b[1] = !1;
    }
    return c + a.toQueryString.apply(a, b);
  };
  Ext.urlDecode = function () {
    return a.fromQueryString.apply(a, arguments);
  };
})();
Ext.Function = {
  flexSetter: function (a) {
    return function (b, e) {
      var c, d;
      if (b === null) {
        return this;
      }
      if (typeof b !== "string") {
        for (c in b) {
          if (b.hasOwnProperty(c)) {
            a.call(this, c, b[c]);
          }
        }
        if (Ext.enumerables) {
          for (d = Ext.enumerables.length; d--; ) {
            c = Ext.enumerables[d];
            if (b.hasOwnProperty(c)) {
              a.call(this, c, b[c]);
            }
          }
        }
      } else {
        a.call(this, b, e);
      }
      return this;
    };
  },
  bind: function (e, c, b, a) {
    if (arguments.length === 2) {
      return function () {
        return e.apply(c, arguments);
      };
    }
    var f = e,
      d = Array.prototype.slice;
    return function () {
      var g = b || arguments;
      if (a === !0) {
        g = d.call(arguments, 0);
        g = g.concat(b);
      } else {
        if (typeof a == "number") {
          g = d.call(arguments, 0);
          Ext.Array.insert(g, a, b);
        }
      }
      return f.apply(c || window, g);
    };
  },
  pass: function (c, a, b) {
    if (!Ext.isArray(a)) {
      a = Ext.Array.clone(a);
    }
    return function () {
      a.push.apply(a, arguments);
      return c.apply(b || this, a);
    };
  },
  alias: function (a, b) {
    return function () {
      return a[b].apply(a, arguments);
    };
  },
  clone: function (a) {
    return function () {
      return a.apply(this, arguments);
    };
  },
  createInterceptor: function (a, b, d, c) {
    var e = a;
    if (!Ext.isFunction(b)) {
      return a;
    } else {
      return function () {
        var e = this,
          f = arguments;
        b.target = e;
        b.method = a;
        return b.apply(d || e || window, f) !== !1
          ? a.apply(e || window, f)
          : c || null;
      };
    }
  },
  createDelayed: function (a, e, b, c, d) {
    if (b || c) {
      a = Ext.Function.bind(a, b, c, d);
    }
    return function () {
      var g = this,
        f = Array.prototype.slice.call(arguments);
      setTimeout(function () {
        a.apply(g, f);
      }, e);
    };
  },
  defer: function (a, b, d, e, c) {
    a = Ext.Function.bind(a, d, e, c);
    if (b > 0) {
      return setTimeout(a, b);
    }
    a();
    return 0;
  },
  createSequence: function (a, b, c) {
    if (!b) {
      return a;
    } else {
      return function () {
        var d = a.apply(this, arguments);
        b.apply(c || this, arguments);
        return d;
      };
    }
  },
  createBuffered: function (e, b, c, d) {
    var a;
    return function () {
      var f = d || Array.prototype.slice.call(arguments, 0),
        g = c || this;
      if (a) {
        clearTimeout(a);
      }
      a = setTimeout(function () {
        e.apply(g, f);
      }, b);
    };
  },
  createThrottled: function (h, c, g) {
    var a,
      b,
      d,
      f,
      e = function () {
        h.apply(g || this, d);
        a = new Date().getTime();
      };
    return function () {
      b = new Date().getTime() - a;
      d = arguments;
      clearTimeout(f);
      if (!a || b >= c) {
        e();
      } else {
        f = setTimeout(e, c - b);
      }
    };
  },
  interceptBefore: function (b, a, e, d) {
    var c = b[a] || Ext.emptyFn;
    return (b[a] = function () {
      var f = e.apply(d || this, arguments);
      c.apply(this, arguments);
      return f;
    });
  },
  interceptAfter: function (b, a, e, d) {
    var c = b[a] || Ext.emptyFn;
    return (b[a] = function () {
      c.apply(this, arguments);
      return e.apply(d || this, arguments);
    });
  },
};
Ext.defer = Ext.Function.alias(Ext.Function, "defer");
Ext.pass = Ext.Function.alias(Ext.Function, "pass");
Ext.bind = Ext.Function.alias(Ext.Function, "bind");
Ext.JSON = new (function () {
  var useHasOwn = !!{}.hasOwnProperty,
    isNative = (function () {
      var a = null;
      return function () {
        if (a === null) {
          a =
            Ext.USE_NATIVE_JSON &&
            window.JSON &&
            JSON.toString() == "[object JSON]";
        }
        return a;
      };
    })(),
    pad = function (a) {
      return a < 10 ? "0" + a : a;
    },
    doDecode = function (json) {
      return eval("(" + json + ")");
    },
    doEncode = function (a) {
      if (!Ext.isDefined(a) || a === null) {
        return "null";
      } else {
        if (Ext.isArray(a)) {
          return encodeArray(a);
        } else {
          if (Ext.isDate(a)) {
            return Ext.JSON.encodeDate(a);
          } else {
            if (Ext.isString(a)) {
              if (Ext.isMSDate(a)) {
                return encodeMSDate(a);
              } else {
                return encodeString(a);
              }
            } else {
              if (typeof a == "number") {
                return isFinite(a) ? String(a) : "null";
              } else {
                if (Ext.isBoolean(a)) {
                  return String(a);
                } else {
                  if (Ext.isObject(a)) {
                    return encodeObject(a);
                  } else {
                    if (typeof a === "function") {
                      return "null";
                    }
                  }
                }
              }
            }
          }
        }
      }
      return "undefined";
    },
    m = {
      "\b": "\\b",
      "\t": "\\t",
      "\n": "\\n",
      "\f": "\\f",
      "\r": "\\r",
      '"': '\\"',
      "\\": "\\\\",
      "\v": "\\u000b",
    },
    charToReplace = /[\\\"\x00-\x1f\x7f-\uffff]/g,
    encodeString = function (a) {
      return (
        '"' +
        a.replace(charToReplace, function (b) {
          var c = m[b];
          return typeof c === "string"
            ? c
            : "\\u" + ("0000" + b.charCodeAt(0).toString(16)).slice(-4);
        }) +
        '"'
      );
    },
    encodeArray = function (c) {
      var a = ["[", ""],
        d = c.length,
        b;
      for (b = 0; b < d; b += 1) {
        a.push(doEncode(c[b]), ",");
      }
      a[a.length - 1] = "]";
      return a.join("");
    },
    encodeObject = function (c) {
      var a = ["{", ""],
        b;
      for (b in c) {
        if (!useHasOwn || c.hasOwnProperty(b)) {
          a.push(doEncode(b), ":", doEncode(c[b]), ",");
        }
      }
      a[a.length - 1] = "}";
      return a.join("");
    },
    encodeMSDate = function (a) {
      return '"' + a + '"';
    };
  this.encodeDate = function (a) {
    return (
      '"' +
      a.getFullYear() +
      "-" +
      pad(a.getMonth() + 1) +
      "-" +
      pad(a.getDate()) +
      "T" +
      pad(a.getHours()) +
      ":" +
      pad(a.getMinutes()) +
      ":" +
      pad(a.getSeconds()) +
      '"'
    );
  };
  this.encode = (function () {
    var a;
    return function (b) {
      if (!a) {
        a = isNative() ? JSON.stringify : doEncode;
      }
      return a(b);
    };
  })();
  this.decode = (function () {
    var a;
    return function (b, c) {
      if (!a) {
        a = isNative() ? JSON.parse : doDecode;
      }
      try {
        return a(b);
      } catch (d) {
        if (c === !0) {
          return null;
        }
        Ext.Error.raise({
          sourceClass: "Ext.JSON",
          sourceMethod: "decode",
          msg: "You're trying to decode an invalid JSON String: " + b,
        });
      }
    };
  })();
})();
Ext.encode = Ext.JSON.encode;
Ext.decode = Ext.JSON.decode;
Ext.Error = {
  raise: function (a) {
    throw new Error(a.msg);
  },
};
Ext.Date = {
  now: Date.now,
  toString: function (a) {
    if (!a) {
      a = new Date();
    }
    var b = Ext.String.leftPad;
    return (
      a.getFullYear() +
      "-" +
      b(a.getMonth() + 1, 2, "0") +
      "-" +
      b(a.getDate(), 2, "0") +
      "T" +
      b(a.getHours(), 2, "0") +
      ":" +
      b(a.getMinutes(), 2, "0") +
      ":" +
      b(a.getSeconds(), 2, "0")
    );
  },
};
(function (c) {
  var a = [],
    b = function () {};
  Ext.apply(b, {
    $className: "Ext.Base",
    $isClass: !0,
    create: function () {
      return Ext.create.apply(
        Ext,
        [this].concat(Array.prototype.slice.call(arguments, 0))
      );
    },
    extend: function (b) {
      var d = b.prototype,
        a,
        g,
        h,
        f,
        e;
      a = this.prototype = Ext.Object.chain(d);
      a.self = this;
      this.superclass = a.superclass = d;
      if (!b.$isClass) {
        Ext.apply(a, Ext.Base.prototype);
        a.constructor = function () {
          d.constructor.apply(this, arguments);
        };
      }
      e = d.$inheritableStatics;
      if (e) {
        for (g = 0, h = e.length; g < h; g++) {
          f = e[g];
          if (!this.hasOwnProperty(f)) {
            this[f] = b[f];
          }
        }
      }
      if (b.$onExtended) {
        this.$onExtended = b.$onExtended.slice();
      }
      a.config = a.defaultConfig = new a.configClass();
      a.initConfigList = a.initConfigList.slice();
      a.initConfigMap = Ext.Object.chain(a.initConfigMap);
    },
    $onExtended: [],
    triggerExtended: function () {
      var d = this.$onExtended,
        e = d.length,
        a,
        b;
      if (e > 0) {
        for (a = 0; a < e; a++) {
          b = d[a];
          b.fn.apply(b.scope || this, arguments);
        }
      }
    },
    onExtended: function (b, a) {
      this.$onExtended.push({ fn: b, scope: a });
      return this;
    },
    addConfig: function (b, e) {
      var f = this.prototype,
        i = f.initConfigList,
        h = f.initConfigMap,
        d = f.defaultConfig,
        g,
        a,
        j;
      e = Boolean(e);
      for (a in b) {
        if (b.hasOwnProperty(a) && (e || !(a in d))) {
          j = b[a];
          g = h[a];
          if (j !== null) {
            if (!g) {
              h[a] = !0;
              i.push(a);
            }
          } else {
            if (g) {
              h[a] = !1;
              Ext.Array.remove(i, a);
            }
          }
        }
      }
      if (e) {
        Ext.merge(d, b);
      } else {
        Ext.mergeIf(d, b);
      }
      f.configClass = Ext.Object.classify(d);
    },
    addStatics: function (b) {
      var d, a;
      for (a in b) {
        if (b.hasOwnProperty(a)) {
          d = b[a];
          this[a] = d;
        }
      }
      return this;
    },
    addInheritableStatics: function (f) {
      var d,
        b,
        e = this.prototype,
        a,
        g;
      d = e.$inheritableStatics;
      b = e.$hasInheritableStatics;
      if (!d) {
        d = e.$inheritableStatics = [];
        b = e.$hasInheritableStatics = {};
      }
      for (a in f) {
        if (f.hasOwnProperty(a)) {
          g = f[a];
          this[a] = g;
          if (!b[a]) {
            b[a] = !0;
            d.push(a);
          }
        }
      }
      return this;
    },
    addMembers: function (d) {
      var e = this.prototype,
        f = [],
        b,
        a;
      for (b in d) {
        if (d.hasOwnProperty(b)) {
          a = d[b];
          if (typeof a == "function" && !a.$isClass && a !== Ext.emptyFn) {
            a.$owner = this;
            a.$name = b;
          }
          e[b] = a;
        }
      }
      return this;
    },
    addMember: function (b, a) {
      if (typeof a == "function" && !a.$isClass && a !== Ext.emptyFn) {
        a.$owner = this;
        a.$name = b;
      }
      this.prototype[b] = a;
      return this;
    },
    implement: function () {
      this.addMembers.apply(this, arguments);
    },
    borrow: function (j, d) {
      var g = this.prototype,
        i = j.prototype,
        f,
        h,
        a,
        e,
        b;
      d = Ext.Array.from(d);
      for (f = 0, h = d.length; f < h; f++) {
        a = d[f];
        b = i[a];
        if (typeof b == "function") {
          e = function () {
            return b.apply(this, arguments);
          };
          e.$owner = this;
          e.$name = a;
          g[a] = e;
        } else {
          g[a] = b;
        }
      }
      return this;
    },
    override: function (d) {
      var g = this,
        h = Ext.enumerables,
        f = g.prototype,
        m = Ext.Function.clone,
        n = f.config,
        a,
        k,
        b,
        j,
        e,
        i,
        l,
        o;
      if (arguments.length === 2) {
        a = d;
        d = {};
        d[a] = arguments[1];
        h = null;
      }
      do {
        e = [];
        j = null;
        for (a in d) {
          if (a == "statics") {
            j = d[a];
          } else {
            if (a == "config") {
              l = d[a];
              g.addConfig(l, !0);
            } else {
              e.push(a);
            }
          }
        }
        if (h) {
          e.push.apply(e, h);
        }
        for (k = e.length; k--; ) {
          a = e[k];
          if (d.hasOwnProperty(a)) {
            b = d[a];
            if (typeof b == "function" && !b.$className && b !== Ext.emptyFn) {
              if (typeof b.$owner != "undefined") {
                b = m(b);
              }
              b.$owner = g;
              b.$name = a;
              i = f[a];
              if (i) {
                b.$previous = i;
              }
            }
            f[a] = b;
          }
        }
        f = g;
        d = j;
      } while (d);
      return this;
    },
    callParent: function (d) {
      var b;
      return (
        (b = this.callParent.caller) &&
        (
          b.$previous ||
          ((b = b.$owner ? b : b.caller) && b.$owner.superclass.$class[b.$name])
        ).apply(this, d || a)
      );
    },
    mixin: function (f, e) {
      var b = e.prototype,
        a = this.prototype,
        d;
      if (typeof b.onClassMixedIn != "undefined") {
        b.onClassMixedIn.call(e, this);
      }
      if (!a.hasOwnProperty("mixins")) {
        if ("mixins" in a) {
          a.mixins = Ext.Object.chain(a.mixins);
        } else {
          a.mixins = {};
        }
      }
      for (d in b) {
        if (d === "mixins") {
          Ext.merge(a.mixins, b[d]);
        } else {
          if (typeof a[d] == "undefined" && d != "mixinId" && d != "config") {
            a[d] = b[d];
          }
        }
      }
      if ("config" in b) {
        this.addConfig(b.config, !1);
      }
      a.mixins[f] = b;
    },
    getName: function () {
      return Ext.getClassName(this);
    },
    createAlias: c(function (b, a) {
      this.override(b, function () {
        return this[a].apply(this, arguments);
      });
    }),
    addXtype: function (b) {
      var a = this.prototype,
        d = a.xtypesMap,
        f = a.xtypes,
        e = a.xtypesChain;
      if (!a.hasOwnProperty("xtypesMap")) {
        d = a.xtypesMap = Ext.merge({}, a.xtypesMap || {});
        f = a.xtypes = a.xtypes ? [].concat(a.xtypes) : [];
        e = a.xtypesChain = a.xtypesChain ? [].concat(a.xtypesChain) : [];
        a.xtype = b;
      }
      if (!d[b]) {
        d[b] = !0;
        f.push(b);
        e.push(b);
        Ext.ClassManager.setAlias(this, "widget." + b);
      }
      return this;
    },
  });
  b.implement({
    isInstance: !0,
    $className: "Ext.Base",
    configClass: Ext.emptyFn,
    initConfigList: [],
    initConfigMap: {},
    statics: function () {
      var a = this.statics.caller,
        b = this.self;
      if (!a) {
        return b;
      }
      return a.$owner;
    },
    callParent: function (e) {
      var b,
        d =
          (b = this.callParent.caller) &&
          (b.$previous ||
            ((b = b.$owner ? b : b.caller) && b.$owner.superclass[b.$name]));
      return d.apply(this, e || a);
    },
    callSuper: function (e) {
      var b,
        d =
          (b = this.callSuper.caller) &&
          (b = b.$owner ? b : b.caller) &&
          b.$owner.superclass[b.$name];
      return d.apply(this, e || a);
    },
    callOverridden: function (d) {
      var b = this.callOverridden.caller;
      return b && b.$previous.apply(this, d || a);
    },
    self: b,
    constructor: function () {
      return this;
    },
    wasInstantiated: !1,
    initConfig: function (h) {
      var j = Ext.Class.configNameCache,
        g = this.self.prototype,
        e = this.initConfigList,
        m = this.initConfigMap,
        i = new this.configClass(),
        k = this.defaultConfig,
        b,
        f,
        a,
        n,
        d,
        l;
      this.initConfig = Ext.emptyFn;
      this.initialConfig = h || {};
      if (h) {
        Ext.merge(i, h);
      }
      this.config = i;
      if (!g.hasOwnProperty("wasInstantiated")) {
        g.wasInstantiated = !0;
        for (b = 0, f = e.length; b < f; b++) {
          a = e[b];
          d = j[a];
          n = k[a];
          if (
            !(d.apply in g) &&
            !(d.update in g) &&
            g[d.set].$isDefault &&
            typeof n != "object"
          ) {
            g[d.internal] = k[a];
            m[a] = !1;
            Ext.Array.remove(e, a);
            b--;
            f--;
          }
        }
      }
      if (h) {
        e = e.slice();
        for (a in h) {
          if (a in k && !m[a]) {
            e.push(a);
          }
        }
      }
      for (b = 0, f = e.length; b < f; b++) {
        a = e[b];
        d = j[a];
        this[d.get] = this[d.initGet];
      }
      this.beforeInitConfig(i);
      for (b = 0, f = e.length; b < f; b++) {
        a = e[b];
        d = j[a];
        l = d.get;
        if (this.hasOwnProperty(l)) {
          this[d.set].call(this, i[a]);
          delete this[l];
        }
      }
      return this;
    },
    beforeInitConfig: Ext.emptyFn,
    getCurrentConfig: function () {
      var f = this.defaultConfig,
        e = Ext.Class.configNameCache,
        d = {},
        a,
        b;
      for (a in f) {
        b = e[a];
        d[a] = this[b.get].call(this);
      }
      return d;
    },
    setConfig: function (d, f) {
      if (!d) {
        return this;
      }
      var h = Ext.Class.configNameCache,
        j = this.config,
        k = this.defaultConfig,
        l = this.initialConfig,
        g = [],
        a,
        e,
        i,
        b;
      f = Boolean(f);
      for (a in d) {
        if (f && a in l) {
          continue;
        }
        j[a] = d[a];
        if (a in k) {
          g.push(a);
          b = h[a];
          this[b.get] = this[b.initGet];
        }
      }
      for (e = 0, i = g.length; e < i; e++) {
        a = g[e];
        b = h[a];
        this[b.set].call(this, d[a]);
        delete this[b.get];
      }
      return this;
    },
    set: function (b, a) {
      return this[Ext.Class.configNameCache[b].set].call(this, a);
    },
    get: function (a) {
      return this[Ext.Class.configNameCache[a].get].call(this);
    },
    getConfig: function (a) {
      return this[Ext.Class.configNameCache[a].get].call(this);
    },
    hasConfig: function (a) {
      return a in this.defaultConfig;
    },
    getInitialConfig: function (b) {
      var a = this.config;
      if (!b) {
        return a;
      } else {
        return a[b];
      }
    },
    onConfigUpdate: function (d, j, e) {
      var k = this.self,
        f,
        i,
        h,
        a,
        g,
        b;
      d = Ext.Array.from(d);
      e = e || this;
      for (f = 0, i = d.length; f < i; f++) {
        h = d[f];
        a = "update" + Ext.String.capitalize(h);
        g = this[a] || Ext.emptyFn;
        b = function () {
          g.apply(this, arguments);
          e[j].apply(e, arguments);
        };
        b.$name = a;
        b.$owner = k;
        this[a] = b;
      }
    },
    link: function (b, a) {
      this.$links = {};
      this.link = this.doLink;
      return this.link.apply(this, arguments);
    },
    doLink: function (b, a) {
      this.$links[b] = !0;
      this[b] = a;
      return a;
    },
    unlink: function () {
      var d, e, b, a;
      for (d = 0, e = arguments.length; d < e; d++) {
        b = arguments[d];
        if (this.hasOwnProperty(b)) {
          a = this[b];
          if (a) {
            if (a.isInstance && !a.isDestroyed) {
              a.destroy();
            } else {
              if (a.parentNode && "nodeType" in a) {
                a.parentNode.removeChild(a);
              }
            }
          }
          delete this[b];
        }
      }
      return this;
    },
    destroy: function () {
      this.destroy = Ext.emptyFn;
      this.isDestroyed = !0;
      if (this.hasOwnProperty("$links")) {
        this.unlink.apply(this, Ext.Object.getKeys(this.$links));
        delete this.$links;
      }
    },
  });
  Ext.Base = b;
})(Ext.Function.flexSetter);
(function () {
  var a,
    d = Ext.Base,
    b = [],
    c,
    e;
  for (c in d) {
    if (d.hasOwnProperty(c)) {
      b.push(c);
    }
  }
  e = b.length;
  Ext.Class = a = function (b, c, d) {
    if (typeof b != "function") {
      d = c;
      c = b;
      b = null;
    }
    if (!c) {
      c = {};
    }
    b = a.create(b);
    a.process(b, c, d);
    return b;
  };
  Ext.apply(a, {
    onBeforeCreated: function (a, c, b) {
      a.addMembers(c);
      b.onCreated.call(a, a);
    },
    create: function (a) {
      var f, c;
      if (!a) {
        a = function () {
          return this.constructor.apply(this, arguments);
        };
      }
      for (c = 0; c < e; c++) {
        f = b[c];
        a[f] = d[f];
      }
      return a;
    },
    process: function (n, g, m) {
      var k = g.preprocessors || a.defaultPreprocessors,
        l = this.preprocessors,
        o = {
          onBeforeCreated: this.onBeforeCreated,
          onCreated: m || Ext.emptyFn,
        },
        p = 0,
        h,
        c,
        d,
        f,
        j,
        b,
        i,
        e;
      delete g.preprocessors;
      e = function (q, o, a) {
        b = null;
        while (b === null) {
          h = k[p++];
          if (h) {
            c = l[h];
            d = c.properties;
            if (d === !0) {
              b = c.fn;
            } else {
              for (f = 0, j = d.length; f < j; f++) {
                i = d[f];
                if (o.hasOwnProperty(i)) {
                  b = c.fn;
                  break;
                }
              }
            }
          } else {
            a.onBeforeCreated.apply(this, arguments);
            return;
          }
        }
        if (b.call(this, q, o, a, e) !== !1) {
          e.apply(this, arguments);
        }
      };
      e.call(this, n, g, o);
    },
    preprocessors: {},
    registerPreprocessor: function (a, e, b, c, d) {
      if (!c) {
        c = "last";
      }
      if (!b) {
        b = [a];
      }
      this.preprocessors[a] = { name: a, properties: b || !1, fn: e };
      this.setDefaultPreprocessorPosition(a, c, d);
      return this;
    },
    getPreprocessor: function (a) {
      return this.preprocessors[a];
    },
    getPreprocessors: function () {
      return this.preprocessors;
    },
    defaultPreprocessors: [],
    getDefaultPreprocessors: function () {
      return this.defaultPreprocessors;
    },
    setDefaultPreprocessors: function (a) {
      this.defaultPreprocessors = Ext.Array.from(a);
      return this;
    },
    setDefaultPreprocessorPosition: function (d, a, e) {
      var b = this.defaultPreprocessors,
        c;
      if (typeof a == "string") {
        if (a === "first") {
          b.unshift(d);
          return this;
        } else {
          if (a === "last") {
            b.push(d);
            return this;
          }
        }
        a = a === "after" ? 1 : -1;
      }
      c = Ext.Array.indexOf(b, e);
      if (c !== -1) {
        Ext.Array.splice(b, Math.max(0, c + a), 0, d);
      }
      return this;
    },
    configNameCache: {},
    getConfigNameMap: function (b) {
      var d = this.configNameCache,
        c = d[b],
        a;
      if (!c) {
        a = b.charAt(0).toUpperCase() + b.substr(1);
        c = d[b] = {
          name: b,
          internal: "_" + b,
          initializing: "is" + a + "Initializing",
          apply: "apply" + a,
          update: "update" + a,
          set: "set" + a,
          get: "get" + a,
          initGet: "initGet" + a,
          doSet: "doSet" + a,
          changeEvent: b.toLowerCase() + "change",
        };
      }
      return c;
    },
    generateSetter: function (a) {
      var c = a.internal,
        f = a.get,
        e = a.apply,
        d = a.update,
        b;
      b = function (b) {
        var g = this[c],
          h = this[e],
          i = this[d];
        delete this[f];
        if (h) {
          b = h.call(this, b, g);
          if (typeof b == "undefined") {
            return this;
          }
        }
        this[c] = b;
        if (i && b !== g) {
          i.call(this, b, g);
        }
        return this;
      };
      b.$isDefault = !0;
      return b;
    },
    generateInitGetter: function (a) {
      var e = a.name,
        d = a.set,
        c = a.get,
        b = a.initializing;
      return function () {
        this[b] = !0;
        delete this[c];
        this[d].call(this, this.config[e]);
        delete this[b];
        return this[c].apply(this, arguments);
      };
    },
    generateGetter: function (b) {
      var a = b.internal;
      return function () {
        return this[a];
      };
    },
  });
  a.registerPreprocessor(
    "extend",
    function (a, b) {
      var e = Ext.Base,
        d = b.extend,
        c;
      delete b.extend;
      if (d && d !== Object) {
        c = d;
      } else {
        c = e;
      }
      a.extend(c);
      a.triggerExtended.apply(a, arguments);
      if (b.onClassExtended) {
        a.onExtended(b.onClassExtended, a);
        delete b.onClassExtended;
      }
    },
    !0
  );
  a.registerPreprocessor("statics", function (b, a) {
    b.addStatics(a.statics);
    delete a.statics;
  });
  a.registerPreprocessor("inheritableStatics", function (b, a) {
    b.addInheritableStatics(a.inheritableStatics);
    delete a.inheritableStatics;
  });
  a.registerPreprocessor("platformConfig", function (l, f, m) {
    var h = f.platformConfig,
      j = f.config || {},
      d,
      e,
      a,
      b,
      k,
      c,
      g,
      i;
    delete f.platformConfig;
    if (!Ext.filterPlatform) {
      Ext.filterPlatform = function (c) {
        var b = !1,
          a = navigator.userAgent,
          e,
          k;
        c = [].concat(c);
        function isPhone(a) {
          var b = /Mobile(\/|\s)/.test(a);
          return (
            /(iPhone|iPod)/.test(a) ||
            (!/(Silk)/.test(a) &&
              /(Android)/.test(a) &&
              (/(Android 2)/.test(a) || b)) ||
            (/(BlackBerry|BB)/.test(a) && b) ||
            /(Windows Phone)/.test(a)
          );
        }
        function isTablet(a) {
          return (
            !isPhone(a) &&
            (/iPad/.test(a) ||
              /Android/.test(a) ||
              /(RIM Tablet OS)/.test(a) ||
              (/MSIE 10/.test(a) && /; Touch/.test(a)))
          );
        }
        var n = window.location.search.substr(1),
          h = n.split("&"),
          j = {},
          g,
          d;
        for (d = 0; d < h.length; d++) {
          var i = h[d].split("=");
          j[i[0]] = i[1];
        }
        g = j.platform;
        if (g) {
          return c.indexOf(g) != -1;
        }
        for (e = 0, k = c.length; e < k; e++) {
          switch (c[e]) {
            case "phone":
              b = isPhone(a);
              break;
            case "tablet":
              b = isTablet(a);
              break;
            case "desktop":
              b = !isPhone(a) && !isTablet(a);
              break;
            case "ios":
              b = /(iPad|iPhone|iPod)/.test(a);
              break;
            case "android":
              b = /(Android|Silk)/.test(a);
              break;
            case "blackberry":
              b = /(BlackBerry|BB)/.test(a);
              break;
            case "safari":
              b = /Safari/.test(a) && !/(BlackBerry|BB)/.test(a);
              break;
            case "chrome":
              b = /Chrome/.test(a);
              break;
            case "ie10":
              b = /MSIE 10/.test(a);
              break;
            case "windows":
              b = /MSIE 10/.test(a) || /Trident/.test(a);
              break;
            case "tizen":
              b = /Tizen/.test(a);
              break;
            case "firefox":
              b = /Firefox/.test(a);
          }
          if (b) {
            return !0;
          }
        }
        return !1;
      };
    }
    for (b = 0, k = h.length; b < k; b++) {
      a = h[b];
      d = a.platform;
      i = a.exclude || [];
      delete a.platform;
      e = [].concat(a.theme);
      g = e.length;
      delete a.theme;
      if (d && Ext.filterPlatform(d) && !Ext.filterPlatform(i)) {
        Ext.merge(j, a);
      }
      if (g) {
        for (c = 0; c < g; c++) {
          if (Ext.theme.name == e[c]) {
            Ext.merge(j, a);
          }
        }
      }
    }
  });
  a.registerPreprocessor("config", function (i, a) {
    var d = a.config,
      l = i.prototype,
      k = l.config,
      b,
      c,
      g,
      f,
      h,
      e,
      j;
    delete a.config;
    for (c in d) {
      if (d.hasOwnProperty(c) && !(c in k)) {
        j = d[c];
        b = this.getConfigNameMap(c);
        g = b.set;
        f = b.get;
        h = b.initGet;
        e = b.internal;
        a[h] = this.generateInitGetter(b);
        if (j === null && !a.hasOwnProperty(e)) {
          a[e] = null;
        }
        if (!a.hasOwnProperty(f)) {
          a[f] = this.generateGetter(b);
        }
        if (!a.hasOwnProperty(g)) {
          a[g] = this.generateSetter(b);
        }
      }
    }
    i.addConfig(d, !0);
  });
  a.registerPreprocessor("mixins", function (e, f, h) {
    var a = f.mixins,
      b,
      c,
      d,
      g;
    delete f.mixins;
    Ext.Function.interceptBefore(h, "onCreated", function () {
      if (a instanceof Array) {
        for (d = 0, g = a.length; d < g; d++) {
          c = a[d];
          b = c.prototype.mixinId || c.$className;
          e.mixin(b, c);
        }
      } else {
        for (b in a) {
          if (a.hasOwnProperty(b)) {
            e.mixin(b, a[b]);
          }
        }
      }
    });
  });
  Ext.extend = function (d, c, b) {
    if (arguments.length === 2 && Ext.isObject(c)) {
      b = c;
      c = d;
      d = null;
    }
    var e;
    if (!c) {
      throw new Error(
        "[Ext.extend] Attempting to extend from a class which has not been loaded on the page."
      );
    }
    b.extend = c;
    b.preprocessors = [
      "extend",
      "statics",
      "inheritableStatics",
      "mixins",
      "platformConfig",
      "config",
    ];
    if (d) {
      e = new a(d, b);
    } else {
      e = new a(b);
    }
    e.prototype.override = function (e) {
      for (var a in e) {
        if (e.hasOwnProperty(a)) {
          this[a] = e[a];
        }
      }
    };
    return e;
  };
})();
(function (f, b, e, d, c) {
  var a = (Ext.ClassManager = {
    classes: {},
    existCache: {},
    namespaceRewrites: [{ from: "Ext.", to: Ext }],
    maps: {
      alternateToName: {},
      aliasToName: {},
      nameToAliases: {},
      nameToAlternates: {},
    },
    enableNamespaceParseCache: !0,
    namespaceParseCache: {},
    instantiators: [],
    isCreated: function (g) {
      var k = this.existCache,
        i,
        l,
        h,
        a,
        j;
      if (this.classes[g] || k[g]) {
        return !0;
      }
      a = c;
      j = this.parseNamespace(g);
      for (i = 0, l = j.length; i < l; i++) {
        h = j[i];
        if (typeof h != "string") {
          a = h;
        } else {
          if (!a || !a[h]) {
            return !1;
          }
          a = a[h];
        }
      }
      k[g] = !0;
      this.triggerCreated(g);
      return !0;
    },
    createdListeners: [],
    nameCreatedListeners: {},
    triggerCreated: function (m) {
      var g = this.createdListeners,
        o = this.nameCreatedListeners,
        n = this.maps.nameToAlternates[m],
        i = [m],
        a,
        k,
        l,
        p,
        h,
        j;
      for (a = 0, k = g.length; a < k; a++) {
        h = g[a];
        h.fn.call(h.scope, m);
      }
      if (n) {
        i.push.apply(i, n);
      }
      for (a = 0, k = i.length; a < k; a++) {
        j = i[a];
        g = o[j];
        if (g) {
          for (l = 0, p = g.length; l < p; l++) {
            h = g[l];
            h.fn.call(h.scope, j);
          }
          delete o[j];
        }
      }
    },
    onCreated: function (j, i, a) {
      var k = this.createdListeners,
        g = this.nameCreatedListeners,
        h = { fn: j, scope: i };
      if (a) {
        if (this.isCreated(a)) {
          j.call(i, a);
          return;
        }
        if (!g[a]) {
          g[a] = [];
        }
        g[a].push(h);
      } else {
        k.push(h);
      }
    },
    parseNamespace: function (i) {
      var m = this.namespaceParseCache;
      if (this.enableNamespaceParseCache) {
        if (m.hasOwnProperty(i)) {
          return m[i];
        }
      }
      var a = [],
        n = this.namespaceRewrites,
        o = c,
        h = i,
        l,
        g,
        j,
        k,
        p;
      for (k = 0, p = n.length; k < p; k++) {
        l = n[k];
        g = l.from;
        j = l.to;
        if (h === g || h.substring(0, g.length) === g) {
          h = h.substring(g.length);
          if (typeof j != "string") {
            o = j;
          } else {
            a = a.concat(j.split("."));
          }
          break;
        }
      }
      a.push(o);
      a = a.concat(h.split("."));
      if (this.enableNamespaceParseCache) {
        m[i] = a;
      }
      return a;
    },
    setNamespace: function (m, l) {
      var a = c,
        i = this.parseNamespace(m),
        k = i.length - 1,
        j = i[k],
        h,
        g;
      for (h = 0; h < k; h++) {
        g = i[h];
        if (typeof g != "string") {
          a = g;
        } else {
          if (!a[g]) {
            a[g] = {};
          }
          a = a[g];
        }
      }
      a[j] = l;
      return a[j];
    },
    createNamespaces: function () {
      var g = c,
        j,
        a,
        h,
        i,
        l,
        k;
      for (h = 0, l = arguments.length; h < l; h++) {
        j = this.parseNamespace(arguments[h]);
        for (i = 0, k = j.length; i < k; i++) {
          a = j[i];
          if (typeof a != "string") {
            g = a;
          } else {
            if (!g[a]) {
              g[a] = {};
            }
            g = g[a];
          }
        }
      }
      return g;
    },
    set: function (g, k) {
      var h = this,
        l = h.maps,
        i = l.nameToAlternates,
        a = h.getName(k),
        j;
      h.classes[g] = h.setNamespace(g, k);
      if (a && a !== g) {
        l.alternateToName[g] = a;
        j = i[a] || (i[a] = []);
        j.push(g);
      }
      return this;
    },
    get: function (i) {
      var j = this.classes;
      if (j[i]) {
        return j[i];
      }
      var a = c,
        k = this.parseNamespace(i),
        g,
        h,
        l;
      for (h = 0, l = k.length; h < l; h++) {
        g = k[h];
        if (typeof g != "string") {
          a = g;
        } else {
          if (!a || !a[g]) {
            return null;
          }
          a = a[g];
        }
      }
      return a;
    },
    setAlias: function (i, g) {
      var j = this.maps.aliasToName,
        h = this.maps.nameToAliases,
        a;
      if (typeof i == "string") {
        a = i;
      } else {
        a = this.getName(i);
      }
      if (g && j[g] !== a) {
        j[g] = a;
      }
      if (!h[a]) {
        h[a] = [];
      }
      if (g) {
        Ext.Array.include(h[a], g);
      }
      return this;
    },
    addNameAliasMappings: function (i) {
      var k = this.maps.aliasToName,
        j = this.maps.nameToAliases,
        a,
        l,
        g,
        h;
      for (a in i) {
        l = j[a] || (j[a] = []);
        for (h = 0; h < i[a].length; h++) {
          g = i[a][h];
          if (!k[g]) {
            k[g] = a;
            l.push(g);
          }
        }
      }
      return this;
    },
    addNameAlternateMappings: function (h) {
      var k = this.maps.alternateToName,
        j = this.maps.nameToAlternates,
        a,
        l,
        g,
        i;
      for (a in h) {
        l = j[a] || (j[a] = []);
        for (i = 0; i < h[a].length; i++) {
          g = h[a];
          if (!k[g]) {
            k[g] = a;
            l.push(g);
          }
        }
      }
      return this;
    },
    getByAlias: function (a) {
      return this.get(this.getNameByAlias(a));
    },
    getNameByAlias: function (a) {
      return this.maps.aliasToName[a] || "";
    },
    getNameByAlternate: function (a) {
      return this.maps.alternateToName[a] || "";
    },
    getAliasesByName: function (a) {
      return this.maps.nameToAliases[a] || [];
    },
    getName: function (a) {
      return (a && a.$className) || "";
    },
    getClass: function (a) {
      return (a && a.self) || null;
    },
    create: function (h, g, i) {
      g.$className = h;
      return new f(g, function () {
        var q = g.postprocessors || a.defaultPostprocessors,
          t = a.postprocessors,
          u = 0,
          l = [],
          j,
          m,
          n,
          s,
          o,
          r,
          k,
          p;
        delete g.postprocessors;
        for (n = 0, s = q.length; n < s; n++) {
          j = q[n];
          if (typeof j == "string") {
            j = t[j];
            k = j.properties;
            if (k === !0) {
              l.push(j.fn);
            } else {
              if (k) {
                for (o = 0, r = k.length; o < r; o++) {
                  p = k[o];
                  if (g.hasOwnProperty(p)) {
                    l.push(j.fn);
                    break;
                  }
                }
              }
            }
          } else {
            l.push(j);
          }
        }
        m = function (o, k, n) {
          j = l[u++];
          if (!j) {
            a.set(h, k);
            if (i) {
              i.call(k, k);
            }
            a.triggerCreated(h);
            return;
          }
          if (j.call(this, o, k, n, m) !== !1) {
            m.apply(this, arguments);
          }
        };
        m.call(a, h, this, g);
      });
    },
    createOverride: function (h, a, i) {
      var g = a.override,
        j = Ext.Array.from(a.requires);
      delete a.override;
      delete a.requires;
      this.existCache[h] = !0;
      Ext.require(
        j,
        function () {
          this.onCreated(
            function () {
              var j = this.get(g);
              if (j.singleton) {
                j.self.override(a);
              } else {
                j.override(a);
              }
              if (i) {
                i.call(j, j);
              }
              this.triggerCreated(h);
            },
            this,
            g
          );
        },
        this
      );
      return this;
    },
    instantiateByAlias: function () {
      var g = arguments[0],
        h = e.call(arguments),
        a = this.getNameByAlias(g);
      if (!a) {
        a = this.maps.aliasToName[g];
        Ext.syncRequire(a);
      }
      h[0] = a;
      return this.instantiate.apply(this, h);
    },
    instantiate: function () {
      var a = arguments[0],
        i = e.call(arguments, 1),
        j = a,
        h,
        g;
      if (typeof a != "function") {
        g = this.get(a);
      } else {
        g = a;
      }
      if (!g) {
        h = this.getNameByAlias(a);
        if (h) {
          a = h;
          g = this.get(a);
        }
      }
      if (!g) {
        h = this.getNameByAlternate(a);
        if (h) {
          a = h;
          g = this.get(a);
        }
      }
      if (!g) {
        Ext.syncRequire(a);
        g = this.get(a);
      }
      return this.getInstantiator(i.length)(g, i);
    },
    dynInstantiate: function (g, a) {
      a = d(a, !0);
      a.unshift(g);
      return this.instantiate.apply(this, a);
    },
    getInstantiator: function (g) {
      var i = this.instantiators,
        a;
      a = i[g];
      if (!a) {
        var h = g,
          j = [];
        for (h = 0; h < g; h++) {
          j.push("a[" + h + "]");
        }
        a = i[g] = new Function("c", "a", "return new c(" + j.join(",") + ")");
      }
      return a;
    },
    postprocessors: {},
    defaultPostprocessors: [],
    registerPostprocessor: function (a, j, g, h, i) {
      if (!h) {
        h = "last";
      }
      if (!g) {
        g = [a];
      }
      this.postprocessors[a] = { name: a, properties: g || !1, fn: j };
      this.setDefaultPostprocessorPosition(a, h, i);
      return this;
    },
    setDefaultPostprocessors: function (a) {
      this.defaultPostprocessors = d(a);
      return this;
    },
    setDefaultPostprocessorPosition: function (i, a, j) {
      var g = this.defaultPostprocessors,
        h;
      if (typeof a == "string") {
        if (a === "first") {
          g.unshift(i);
          return this;
        } else {
          if (a === "last") {
            g.push(i);
            return this;
          }
        }
        a = a === "after" ? 1 : -1;
      }
      h = Ext.Array.indexOf(g, j);
      if (h !== -1) {
        Ext.Array.splice(g, Math.max(0, h + a), 0, i);
      }
      return this;
    },
    getNamesByExpression: function (a) {
      var k = this.maps.nameToAliases,
        h = [],
        i,
        n,
        l,
        g,
        m,
        j,
        o;
      if (a.indexOf("*") !== -1) {
        a = a.replace(/\*/g, "(.*?)");
        m = new RegExp("^" + a + "$");
        for (i in k) {
          if (k.hasOwnProperty(i)) {
            l = k[i];
            if (i.search(m) !== -1) {
              h.push(i);
            } else {
              for (j = 0, o = l.length; j < o; j++) {
                n = l[j];
                if (n.search(m) !== -1) {
                  h.push(i);
                  break;
                }
              }
            }
          }
        }
      } else {
        g = this.getNameByAlias(a);
        if (g) {
          h.push(g);
        } else {
          g = this.getNameByAlternate(a);
          if (g) {
            h.push(g);
          } else {
            h.push(a);
          }
        }
      }
      return h;
    },
  });
  a.registerPostprocessor(
    "alias",
    function (k, j, i) {
      var g = i.alias,
        a,
        h;
      for (a = 0, h = g.length; a < h; a++) {
        b = g[a];
        this.setAlias(j, b);
      }
    },
    ["xtype", "alias"]
  );
  a.registerPostprocessor("singleton", function (g, h, a, i) {
    i.call(this, g, new h(), a);
    return !1;
  });
  a.registerPostprocessor("alternateClassName", function (l, k, j) {
    var a = j.alternateClassName,
      g,
      i,
      h;
    if (!(a instanceof Array)) {
      a = [a];
    }
    for (g = 0, i = a.length; g < i; g++) {
      h = a[g];
      this.set(h, k);
    }
  });
  Ext.apply(Ext, {
    create: b(a, "instantiate"),
    widget: function (h) {
      var g = e.call(arguments);
      g[0] = "widget." + h;
      return a.instantiateByAlias.apply(a, g);
    },
    createByAlias: b(a, "instantiateByAlias"),
    define: function (h, g, i) {
      if ("override" in g) {
        return a.createOverride.apply(a, arguments);
      }
      return a.create.apply(a, arguments);
    },
    getClassName: b(a, "getName"),
    getDisplayName: function (a) {
      if (a) {
        if (a.displayName) {
          return a.displayName;
        }
        if (a.$name && a.$class) {
          return Ext.getClassName(a.$class) + "#" + a.$name;
        }
        if (a.$className) {
          return a.$className;
        }
      }
      return "Anonymous";
    },
    getClass: b(a, "getClass"),
    namespace: b(a, "createNamespaces"),
  });
  Ext.createWidget = Ext.widget;
  Ext.ns = Ext.namespace;
  f.registerPreprocessor(
    "className",
    function (g, a) {
      if (a.$className) {
        g.$className = a.$className;
      }
    },
    !0,
    "first"
  );
  f.registerPreprocessor(
    "alias",
    function (r, i) {
      var o = r.prototype,
        h = d(i.xtype),
        l = d(i.alias),
        m = "widget.",
        q = m.length,
        n = Array.prototype.slice.call(o.xtypesChain || []),
        k = Ext.merge({}, o.xtypesMap || {}),
        a,
        j,
        p,
        g;
      for (a = 0, j = l.length; a < j; a++) {
        p = l[a];
        if (p.substring(0, q) === m) {
          g = p.substring(q);
          Ext.Array.include(h, g);
        }
      }
      r.xtype = i.xtype = h[0];
      i.xtypes = h;
      for (a = 0, j = h.length; a < j; a++) {
        g = h[a];
        if (!k[g]) {
          k[g] = !0;
          n.push(g);
        }
      }
      i.xtypesChain = n;
      i.xtypesMap = k;
      Ext.Function.interceptAfter(i, "onClassCreated", function () {
        var l = o.mixins,
          m,
          p;
        for (m in l) {
          if (l.hasOwnProperty(m)) {
            p = l[m];
            h = p.xtypes;
            if (h) {
              for (a = 0, j = h.length; a < j; a++) {
                g = h[a];
                if (!k[g]) {
                  k[g] = !0;
                  n.push(g);
                }
              }
            }
          }
        }
      });
      for (a = 0, j = h.length; a < j; a++) {
        g = h[a];
        Ext.Array.include(l, m + g);
      }
      i.alias = l;
    },
    ["xtype", "alias"]
  );
})(
  Ext.Class,
  Ext.Function.alias,
  Array.prototype.slice,
  Ext.Array.from,
  Ext.global
);
(function (a, k, j, f, g, e, h, i) {
  var c = ["extend", "mixins", "requires"],
    b,
    d = 0;
  b = Ext.Loader = {
    isInHistory: {},
    history: [],
    config: {
      enabled: !0,
      disableCaching: !0,
      disableCachingParam: "_dc",
      paths: { Ext: "." },
    },
    setConfig: function (b, c) {
      if (Ext.isObject(b) && arguments.length === 1) {
        Ext.merge(this.config, b);
      } else {
        this.config[b] = Ext.isObject(c) ? Ext.merge(this.config[b], c) : c;
      }
      d += 1;
      return this;
    },
    getConfig: function (b) {
      if (b) {
        return this.config[b];
      }
      return this.config;
    },
    setPath: j(function (b, c) {
      this.config.paths[b] = c;
      d += 1;
      return this;
    }),
    addClassPathMappings: function (c) {
      var l;
      if (d == 0) {
        b.config.paths = c;
      } else {
        for (l in c) {
          b.config.paths[l] = c[l];
        }
      }
      d++;
      return b;
    },
    getPath: function (b) {
      var d = "",
        l = this.config.paths,
        c = this.getPrefix(b);
      if (c.length > 0) {
        if (c === b) {
          return l[c];
        }
        d = l[c];
        b = b.substring(c.length + 1);
      }
      if (d.length > 0) {
        d += "/";
      }
      return d.replace(/\/\.\//g, "/") + b.replace(/\./g, "/") + ".js";
    },
    getPrefix: function (d) {
      var l = this.config.paths,
        b,
        c = "";
      if (l.hasOwnProperty(d)) {
        return d;
      }
      for (b in l) {
        if (l.hasOwnProperty(b) && b + "." === d.substring(0, b.length + 1)) {
          if (b.length > c.length) {
            c = b;
          }
        }
      }
      return c;
    },
    require: function (d, b, c, l) {
      if (b) {
        b.call(c);
      }
    },
    syncRequire: function () {},
    exclude: function (b) {
      var c = this;
      return {
        require: function (d, m, l) {
          return c.require(d, m, l, b);
        },
        syncRequire: function (d, m, l) {
          return c.syncRequire(d, m, l, b);
        },
      };
    },
    onReady: function (b, d, l, m) {
      var c;
      if (l !== !1 && Ext.onDocumentReady) {
        c = b;
        b = function () {
          Ext.onDocumentReady(c, d, m);
        };
      }
      b.call(d);
    },
  };
  Ext.apply(b, {
    documentHead:
      typeof document != "undefined" &&
      (document.head || document.getElementsByTagName("head")[0]),
    isLoading: !1,
    queue: [],
    isClassFileLoaded: {},
    isFileLoaded: {},
    readyListeners: [],
    optionalRequires: [],
    requiresMap: {},
    numPendingFiles: 0,
    numLoadedFiles: 0,
    hasFileLoadError: !1,
    classNameToFilePathMap: {},
    syncModeEnabled: !1,
    scriptElements: {},
    refreshQueue: function () {
      var m = this.queue,
        n = m.length,
        d,
        b,
        l,
        c,
        o;
      if (n === 0) {
        this.triggerReady();
        return;
      }
      for (d = 0; d < n; d++) {
        b = m[d];
        if (b) {
          c = b.requires;
          o = b.references;
          if (c.length > this.numLoadedFiles) {
            continue;
          }
          l = 0;
          do {
            if (a.isCreated(c[l])) {
              h(c, l, 1);
            } else {
              l++;
            }
          } while (l < c.length);
          if (b.requires.length === 0) {
            h(m, d, 1);
            b.callback.call(b.scope);
            this.refreshQueue();
            break;
          }
        }
      }
      return this;
    },
    injectScriptElement: function (q, p, o, l, d) {
      var b = document.createElement("script"),
        m = this,
        c = function () {
          m.cleanupScriptElement(b);
          p.call(l);
        },
        n = function () {
          m.cleanupScriptElement(b);
          o.call(l);
        };
      b.type = "text/javascript";
      b.src = q;
      b.onload = c;
      b.onerror = n;
      b.onreadystatechange = function () {
        if (this.readyState === "loaded" || this.readyState === "complete") {
          c();
        }
      };
      if (d) {
        b.charset = d;
      }
      this.documentHead.appendChild(b);
      return b;
    },
    removeScriptElement: function (c) {
      var b = this.scriptElements;
      if (b[c]) {
        this.cleanupScriptElement(b[c], !0);
        delete b[c];
      }
      return this;
    },
    cleanupScriptElement: function (b, c) {
      b.onload = null;
      b.onreadystatechange = null;
      b.onerror = null;
      if (c) {
        this.documentHead.removeChild(b);
      }
      return this;
    },
    loadScriptFile: function (c, p, u, l, s) {
      var t = this,
        r = this.isFileLoaded,
        q = this.scriptElements,
        n =
          c +
          (this.getConfig("disableCaching")
            ? "?" + this.getConfig("disableCachingParam") + "=" + Ext.Date.now()
            : ""),
        b,
        d,
        o,
        m;
      if (r[c]) {
        return this;
      }
      l = l || this;
      this.isLoading = !0;
      if (!s) {
        m = function () {};
        if (!Ext.isReady && Ext.onDocumentReady) {
          Ext.onDocumentReady(function () {
            if (!r[c]) {
              q[c] = t.injectScriptElement(n, p, m, l);
            }
          });
        } else {
          q[c] = this.injectScriptElement(n, p, m, l);
        }
      } else {
        if (typeof XMLHttpRequest != "undefined") {
          b = new XMLHttpRequest();
        } else {
          b = new ActiveXObject("Microsoft.XMLHTTP");
        }
        try {
          b.open("GET", n, !1);
          b.send(null);
        } catch (v) {}
        d = b.status == 1223 ? 204 : b.status;
        o = b.responseText;
        if ((d >= 200 && d < 300) || d == 304 || (d == 0 && o.length > 0)) {
          Ext.globalEval(o + "\n//@ sourceURL=" + c);
          p.call(l);
        } else {
        }
        b = null;
      }
    },
    syncRequire: function () {
      var b = this.syncModeEnabled;
      if (!b) {
        this.syncModeEnabled = !0;
      }
      this.require.apply(this, arguments);
      if (!b) {
        this.syncModeEnabled = !1;
      }
      this.refreshQueue();
    },
    require: function (u, y, s, r) {
      var C = {},
        D = {},
        F = this.queue,
        E = this.classNameToFilePathMap,
        t = this.isClassFileLoaded,
        z = [],
        A = [],
        m = [],
        B = [],
        o,
        q,
        p,
        v,
        w,
        c,
        l,
        b,
        d,
        n,
        x;
      if (r) {
        r = e(r);
        for (b = 0, n = r.length; b < n; b++) {
          w = r[b];
          if (typeof w == "string" && w.length > 0) {
            z = a.getNamesByExpression(w);
            for (d = 0, x = z.length; d < x; d++) {
              C[z[d]] = !0;
            }
          }
        }
      }
      u = e(u);
      if (y) {
        if (y.length > 0) {
          o = function () {
            var c = [],
              b,
              l,
              d;
            for (b = 0, l = B.length; b < l; b++) {
              d = B[b];
              c.push(a.get(d));
            }
            return y.apply(this, c);
          };
        } else {
          o = y;
        }
      } else {
        o = Ext.emptyFn;
      }
      s = s || Ext.global;
      for (b = 0, n = u.length; b < n; b++) {
        v = u[b];
        if (typeof v == "string" && v.length > 0) {
          A = a.getNamesByExpression(v);
          x = A.length;
          for (d = 0; d < x; d++) {
            l = A[d];
            if (C[l] !== !0) {
              B.push(l);
              if (!a.isCreated(l) && !D[l]) {
                D[l] = !0;
                m.push(l);
              }
            }
          }
        }
      }
      if (m.length > 0) {
        if (!this.config.enabled) {
          throw new Error(
            "Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. " +
              "Missing required class" +
              (m.length > 1 ? "es" : "") +
              ": " +
              m.join(", ")
          );
        }
      } else {
        o.call(s);
        return this;
      }
      q = this.syncModeEnabled;
      if (!q) {
        F.push({ requires: m.slice(), callback: o, scope: s });
      }
      n = m.length;
      for (b = 0; b < n; b++) {
        c = m[b];
        p = this.getPath(c);
        if (q && t.hasOwnProperty(c)) {
          this.numPendingFiles--;
          this.removeScriptElement(p);
          delete t[c];
        }
        if (!t.hasOwnProperty(c)) {
          t[c] = !1;
          E[c] = p;
          this.numPendingFiles++;
          this.loadScriptFile(
            p,
            g(this.onFileLoaded, [c, p], this),
            g(this.onFileLoadError, [c, p]),
            this,
            q
          );
        }
      }
      if (q) {
        o.call(s);
        if (n === 1) {
          return a.get(c);
        }
      }
      return this;
    },
    onFileLoaded: function (b, c) {
      this.numLoadedFiles++;
      this.isClassFileLoaded[b] = !0;
      this.isFileLoaded[c] = !0;
      this.numPendingFiles--;
      if (this.numPendingFiles === 0) {
        this.refreshQueue();
      }
    },
    onFileLoadError: function (d, l, c, b) {
      this.numPendingFiles--;
      this.hasFileLoadError = !0;
    },
    addOptionalRequires: function (b) {
      var m = this.optionalRequires,
        c,
        l,
        d;
      b = e(b);
      for (c = 0, l = b.length; c < l; c++) {
        d = b[c];
        i(m, d);
      }
      return this;
    },
    triggerReady: function (l) {
      var d = this.readyListeners,
        b = this.optionalRequires,
        c;
      if (this.isLoading || l) {
        this.isLoading = !1;
        if (b.length !== 0) {
          b = b.slice();
          this.optionalRequires.length = 0;
          this.require(b, g(this.triggerReady, [!0], this), this);
          return this;
        }
        while (d.length) {
          c = d.shift();
          c.fn.call(c.scope);
          if (this.isLoading) {
            return this;
          }
        }
      }
      return this;
    },
    onReady: function (b, c, l, m) {
      var d;
      if (l !== !1 && Ext.onDocumentReady) {
        d = b;
        b = function () {
          Ext.onDocumentReady(d, c, m);
        };
      }
      if (!this.isLoading) {
        b.call(c);
      } else {
        this.readyListeners.push({ fn: b, scope: c });
      }
    },
    historyPush: function (b) {
      var c = this.isInHistory;
      if (b && this.isClassFileLoaded.hasOwnProperty(b) && !c[b]) {
        c[b] = !0;
        this.history.push(b);
      }
      return this;
    },
  });
  Ext.require = f(b, "require");
  Ext.syncRequire = f(b, "syncRequire");
  Ext.exclude = f(b, "exclude");
  Ext.onReady = function (l, d, c) {
    b.onReady(l, d, !0, c);
  };
  k.registerPreprocessor(
    "loader",
    function (t, o, v, u) {
      var w = this,
        q = [],
        x = a.getName(t),
        p,
        m,
        s,
        r,
        l,
        n,
        d;
      for (p = 0, s = c.length; p < s; p++) {
        n = c[p];
        if (o.hasOwnProperty(n)) {
          d = o[n];
          if (typeof d == "string") {
            q.push(d);
          } else {
            if (d instanceof Array) {
              for (m = 0, r = d.length; m < r; m++) {
                l = d[m];
                if (typeof l == "string") {
                  q.push(l);
                }
              }
            } else {
              if (typeof d != "function") {
                for (m in d) {
                  if (d.hasOwnProperty(m)) {
                    l = d[m];
                    if (typeof l == "string") {
                      q.push(l);
                    }
                  }
                }
              }
            }
          }
        }
      }
      if (q.length === 0) {
        return;
      }
      b.require(q, function () {
        for (p = 0, s = c.length; p < s; p++) {
          n = c[p];
          if (o.hasOwnProperty(n)) {
            d = o[n];
            if (typeof d == "string") {
              o[n] = a.get(d);
            } else {
              if (d instanceof Array) {
                for (m = 0, r = d.length; m < r; m++) {
                  l = d[m];
                  if (typeof l == "string") {
                    o[n][m] = a.get(l);
                  }
                }
              } else {
                if (typeof d != "function") {
                  for (var b in d) {
                    if (d.hasOwnProperty(b)) {
                      l = d[b];
                      if (typeof l == "string") {
                        o[n][b] = a.get(l);
                      }
                    }
                  }
                }
              }
            }
          }
        }
        u.call(w, t, o, v);
      });
      return !1;
    },
    !0,
    "after",
    "className"
  );
  a.registerPostprocessor("uses", function (p, q, o) {
    var m = e(o.uses),
      l = [],
      c,
      n,
      d;
    for (c = 0, n = m.length; c < n; c++) {
      d = m[c];
      if (typeof d == "string") {
        l.push(d);
      }
    }
    b.addOptionalRequires(l);
  });
  a.onCreated(function (b) {
    this.historyPush(b);
  }, b);
})(
  Ext.ClassManager,
  Ext.Class,
  Ext.Function.flexSetter,
  Ext.Function.alias,
  Ext.Function.pass,
  Ext.Array.from,
  Ext.Array.erase,
  Ext.Array.include
);
(function () {
  var a = document.getElementsByTagName("script"),
    c = a[a.length - 1],
    b = c.src,
    e = b.substring(0, b.lastIndexOf("/") + 1),
    d = Ext.Loader;
  d.setConfig({
    enabled: !0,
    disableCaching: !/[?&](cache|breakpoint)/i.test(location.search),
    paths: { Ext: e + "src" },
  });
})();
Ext.setVersion("touch", "2.3.1.410");
Ext.apply(Ext, {
  version: Ext.getVersion("touch"),
  idSeed: 0,
  repaint: function () {
    var a = Ext.getBody().createChild({
      cls: Ext.baseCSSPrefix + "mask " + Ext.baseCSSPrefix + "mask-transparent",
    });
    setTimeout(function () {
      a.destroy();
    }, 0);
  },
  id: function (a, b) {
    if (a && a.id) {
      return a.id;
    }
    a = Ext.getDom(a) || {};
    if (a === document || a === document.documentElement) {
      a.id = "ext-app";
    } else {
      if (a === document.body) {
        a.id = "ext-body";
      } else {
        if (a === window) {
          a.id = "ext-window";
        }
      }
    }
    a.id = a.id || (b || "ext-") + ++Ext.idSeed;
    return a.id;
  },
  getBody: function () {
    if (!Ext.documentBodyElement) {
      if (!document.body) {
        throw new Error(
          "[Ext.getBody] document.body does not exist at this point"
        );
      }
      Ext.documentBodyElement = Ext.get(document.body);
    }
    return Ext.documentBodyElement;
  },
  getHead: function () {
    if (!Ext.documentHeadElement) {
      Ext.documentHeadElement = Ext.get(
        document.head || document.getElementsByTagName("head")[0]
      );
    }
    return Ext.documentHeadElement;
  },
  getDoc: function () {
    if (!Ext.documentElement) {
      Ext.documentElement = Ext.get(document);
    }
    return Ext.documentElement;
  },
  getCmp: function (a) {
    return Ext.ComponentMgr.get(a);
  },
  copyTo: function (c, b, a, d) {
    if (typeof a == "string") {
      a = a.split(/[,;\s]/);
    }
    Ext.each(
      a,
      function (e) {
        if (d || b.hasOwnProperty(e)) {
          c[e] = b[e];
        }
      },
      this
    );
    return c;
  },
  destroy: function () {
    var c = arguments,
      d = c.length,
      b,
      a;
    for (b = 0; b < d; b++) {
      a = c[b];
      if (a) {
        if (Ext.isArray(a)) {
          this.destroy.apply(this, a);
        } else {
          if (Ext.isFunction(a.destroy)) {
            a.destroy();
          }
        }
      }
    }
  },
  getDom: function (a) {
    if (!a || !document) {
      return null;
    }
    return a.dom
      ? a.dom
      : typeof a == "string"
      ? document.getElementById(a)
      : a;
  },
  removeNode: function (a) {
    if (a && a.parentNode && a.tagName != "BODY") {
      Ext.get(a).clearListeners();
      a.parentNode.removeChild(a);
      delete Ext.cache[a.id];
    }
  },
  defaultSetupConfig: {
    eventPublishers: {
      dom: { xclass: "Ext.event.publisher.Dom" },
      touchGesture: {
        xclass: "Ext.event.publisher.TouchGesture",
        recognizers: {
          drag: { xclass: "Ext.event.recognizer.Drag" },
          tap: { xclass: "Ext.event.recognizer.Tap" },
          doubleTap: { xclass: "Ext.event.recognizer.DoubleTap" },
          longPress: { xclass: "Ext.event.recognizer.LongPress" },
          swipe: { xclass: "Ext.event.recognizer.Swipe" },
          pinch: { xclass: "Ext.event.recognizer.Pinch" },
          rotate: { xclass: "Ext.event.recognizer.Rotate" },
          edgeSwipe: { xclass: "Ext.event.recognizer.EdgeSwipe" },
        },
      },
      componentDelegation: {
        xclass: "Ext.event.publisher.ComponentDelegation",
      },
      componentPaint: { xclass: "Ext.event.publisher.ComponentPaint" },
      elementPaint: { xclass: "Ext.event.publisher.ElementPaint" },
      elementSize: { xclass: "Ext.event.publisher.ElementSize" },
    },
    animator: { xclass: "Ext.fx.Runner" },
    viewport: { xclass: "Ext.viewport.Viewport" },
  },
  isSetup: !1,
  frameStartTime: +new Date(),
  setupListeners: [],
  onSetup: function (b, a) {
    if (Ext.isSetup) {
      b.call(a);
    } else {
      Ext.setupListeners.push({ fn: b, scope: a });
    }
  },
  setup: function (b) {
    var n = Ext.defaultSetupConfig,
      m = Ext.emptyFn,
      g = b.onReady || m,
      p = b.onUpdated || m,
      h = b.scope,
      k = Ext.Array.from(b.requires),
      o = Ext.onReady,
      e = Ext.getHead(),
      f,
      l,
      q;
    Ext.setup = function () {
      throw new Error("Ext.setup has already been called before");
    };
    delete b.requires;
    delete b.onReady;
    delete b.onUpdated;
    delete b.scope;
    f = function () {
      var d = Ext.setupListeners,
        e = d.length,
        a,
        c;
      delete Ext.setupListeners;
      Ext.isSetup = !0;
      for (a = 0; a < e; a++) {
        c = d[a];
        c.fn.call(c.scope);
      }
      Ext.onReady = o;
      Ext.onReady(g, h);
    };
    Ext.onUpdated = p;
    Ext.onReady = function (d, c) {
      var a = g;
      g = function () {
        a();
        Ext.onReady(d, c);
      };
    };
    b = Ext.merge({}, n, b);
    Ext.onDocumentReady(function () {
      Ext.factoryConfig(b, function (a) {
        Ext.event.Dispatcher.getInstance().setPublishers(a.eventPublishers);
        if (a.logger) {
          Ext.Logger = a.logger;
        }
        if (a.animator) {
          Ext.Animator = a.animator;
        }
        if (a.viewport) {
          Ext.Viewport = l = a.viewport;
          if (!h) {
            h = l;
          }
          Ext.require(k, function () {
            Ext.Viewport.on("ready", f, null, { single: !0 });
          });
        } else {
          Ext.require(k, f);
        }
      });
      if (!Ext.microloaded && navigator.userAgent.match(/IEMobile\/10\.0/)) {
        var a = document.createElement("style");
        a.appendChild(
          document.createTextNode(
            "@media screen and (orientation: portrait) {" +
              "@-ms-viewport {width: 320px !important;}" +
              "}" +
              "@media screen and (orientation: landscape) {" +
              "@-ms-viewport {width: 560px !important;}" +
              "}"
          )
        );
        e.appendChild(a);
      }
    });
    function addMeta(d, c) {
      var a = document.createElement("meta");
      a.setAttribute("name", d);
      a.setAttribute("content", c);
      e.append(a);
    }
    function addIcon(f, c, d) {
      var a = document.createElement("link");
      a.setAttribute("rel", "apple-touch-icon" + (d ? "-precomposed" : ""));
      a.setAttribute("href", f);
      if (c) {
        a.setAttribute("sizes", c);
      }
      e.append(a);
    }
    function addStartupImage(d, c) {
      var a = document.createElement("link");
      a.setAttribute("rel", "apple-touch-startup-image");
      a.setAttribute("href", d);
      if (c) {
        a.setAttribute("media", c);
      }
      e.append(a);
    }
    var a = b.icon,
      d = Boolean(b.isIconPrecomposed),
      c = b.startupImage || {},
      j = b.statusBarStyle || "black",
      i = window.devicePixelRatio || 1;
    if (navigator.standalone) {
      addMeta(
        "viewport",
        "width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
      );
    } else {
      addMeta(
        "viewport",
        "initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
      );
    }
    addMeta("apple-mobile-web-app-capable", "yes");
    addMeta("apple-touch-fullscreen", "yes");
    if (Ext.browser.is.ie) {
      addMeta("msapplication-tap-highlight", "no");
    }
    if (j) {
      addMeta("apple-mobile-web-app-status-bar-style", j);
    }
    if (Ext.isString(a)) {
      a = { 57: a, 72: a, 114: a, 144: a };
    } else {
      if (!a) {
        a = {};
      }
    }
    if (Ext.os.is.iPad) {
      if (i >= 2) {
        if ("1496x2048" in c) {
          addStartupImage(c["1496x2048"], "(orientation: landscape)");
        }
        if ("1536x2008" in c) {
          addStartupImage(c["1536x2008"], "(orientation: portrait)");
        }
        if ("144" in a) {
          addIcon(a["144"], "144x144", d);
        }
      } else {
        if ("748x1024" in c) {
          addStartupImage(c["748x1024"], "(orientation: landscape)");
        }
        if ("768x1004" in c) {
          addStartupImage(c["768x1004"], "(orientation: portrait)");
        }
        if ("72" in a) {
          addIcon(a["72"], "72x72", d);
        }
      }
    } else {
      if (i >= 2 && Ext.os.version.gtEq("4.3")) {
        if (Ext.os.is.iPhone5) {
          addStartupImage(c["640x1096"]);
        } else {
          addStartupImage(c["640x920"]);
        }
        if ("114" in a) {
          addIcon(a["114"], "114x114", d);
        }
      } else {
        addStartupImage(c["320x460"]);
        if ("57" in a) {
          addIcon(a["57"], null, d);
        }
      }
    }
  },
  application: function (a) {
    var d = a.name,
      b,
      e,
      c;
    if (!a) {
      a = {};
    }
    if (!Ext.Loader.config.paths[d]) {
      Ext.Loader.setPath(d, a.appFolder || "app");
    }
    c = Ext.Array.from(a.requires);
    a.requires = ["Ext.app.Application"];
    b = a.onReady;
    e = a.scope;
    a.onReady = function () {
      a.requires = c;
      new Ext.app.Application(a);
      if (b) {
        b.call(e);
      }
    };
    Ext.setup(a);
  },
  factoryConfig: function (a, f) {
    var h = Ext.isSimpleObject(a);
    if (h && a.xclass) {
      var i = a.xclass;
      delete a.xclass;
      Ext.require(i, function () {
        Ext.factoryConfig(a, function (b) {
          f(Ext.create(i, b));
        });
      });
      return;
    }
    var k = Ext.isArray(a),
      g = [],
      d,
      c,
      b,
      e;
    if (h || k) {
      var j = function () {
        if (b >= e) {
          f(a);
          return;
        }
        d = g[b];
        c = a[d];
        Ext.factoryConfig(c, l);
      };
      var l = function (c) {
        a[d] = c;
        b++;
        j();
      };
      if (h) {
        for (d in a) {
          if (a.hasOwnProperty(d)) {
            c = a[d];
            if (Ext.isSimpleObject(c) || Ext.isArray(c)) {
              g.push(d);
            }
          }
        }
      } else {
        for (b = 0, e = a.length; b < e; b++) {
          c = a[b];
          if (Ext.isSimpleObject(c) || Ext.isArray(c)) {
            g.push(b);
          }
        }
      }
      b = 0;
      e = g.length;
      if (e === 0) {
        f(a);
        return;
      }
      j();
      return;
    }
    f(a);
  },
  factory: function (a, f, b, e) {
    var c = Ext.ClassManager,
      d;
    if (!a || a.isInstance) {
      if (b && b !== a) {
        b.destroy();
      }
      return a;
    }
    if (e) {
      if (typeof a == "string") {
        return c.instantiateByAlias(e + "." + a);
      } else {
        if (Ext.isObject(a) && "type" in a) {
          return c.instantiateByAlias(e + "." + a.type, a);
        }
      }
    }
    if (a === !0) {
      return b || c.instantiate(f);
    }
    if ("xtype" in a) {
      d = c.instantiateByAlias("widget." + a.xtype, a);
    } else {
      if ("xclass" in a) {
        d = c.instantiate(a.xclass, a);
      }
    }
    if (d) {
      if (b) {
        b.destroy();
      }
      return d;
    }
    if (b) {
      return b.setConfig(a);
    }
    return c.instantiate(f, a);
  },
  deprecateClassMember: function (d, c, b, a) {
    return this.deprecateProperty(d.prototype, c, b, a);
  },
  deprecateClassMembers: function (e, b) {
    var d = e.prototype,
      a,
      c;
    for (a in b) {
      if (b.hasOwnProperty(a)) {
        c = b[a];
        this.deprecateProperty(d, a, c);
      }
    }
  },
  deprecateProperty: function (d, c, a, b) {
    if (!b) {
      b = "'" + c + "' is deprecated";
    }
    if (a) {
      b += ", please use '" + a + "' instead";
    }
    if (a) {
      Ext.Object.defineProperty(d, c, {
        get: function () {
          return this[a];
        },
        set: function (e) {
          this[a] = e;
        },
        configurable: !0,
      });
    }
  },
  deprecatePropertyValue: function (a, c, b, d) {
    Ext.Object.defineProperty(a, c, {
      get: function () {
        return b;
      },
      configurable: !0,
    });
  },
  deprecateMethod: function (b, c, a, d) {
    b[c] = function () {
      if (a) {
        return a.apply(this, arguments);
      }
    };
  },
  deprecateClassMethod: function (d, a, b, g) {
    if (typeof a != "string") {
      var c, h;
      for (c in a) {
        if (a.hasOwnProperty(c)) {
          h = a[c];
          Ext.deprecateClassMethod(d, c, h);
        }
      }
      return;
    }
    var f = typeof b == "string",
      e;
    if (!g) {
      g =
        "'" +
        a +
        "()' is deprecated, please use '" +
        (f ? b : b.name) +
        "()' instead";
    }
    if (f) {
      e = function () {
        return this[b].apply(this, arguments);
      };
    } else {
      e = function () {
        return b.apply(this, arguments);
      };
    }
    if (a in d.prototype) {
      Ext.Object.defineProperty(d.prototype, a, {
        value: null,
        writable: !0,
        configurable: !0,
      });
    }
    d.addMember(a, e);
  },
  isReady: !1,
  readyListeners: [],
  triggerReady: function () {
    var c = Ext.readyListeners,
      a,
      d,
      b;
    if (!Ext.isReady) {
      Ext.isReady = !0;
      for (a = 0, d = c.length; a < d; a++) {
        b = c[a];
        b.fn.call(b.scope);
      }
      delete Ext.readyListeners;
    }
  },
  onDocumentReady: function (c, b) {
    if (Ext.isReady) {
      c.call(b);
    } else {
      var a = Ext.triggerReady;
      Ext.readyListeners.push({ fn: c, scope: b });
      if (
        (Ext.browser.is.WebWorks || Ext.browser.is.PhoneGap) &&
        !Ext.os.is.Desktop
      ) {
        if (!Ext.readyListenerAttached) {
          Ext.readyListenerAttached = !0;
          document.addEventListener(
            Ext.browser.is.PhoneGap ? "deviceready" : "webworksready",
            a,
            !1
          );
        }
      } else {
        var d = /MSIE 10/.test(navigator.userAgent)
          ? /complete|loaded/
          : /interactive|complete|loaded/;
        if (document.readyState.match(d) !== null) {
          a();
        } else {
          if (!Ext.readyListenerAttached) {
            Ext.readyListenerAttached = !0;
            window.addEventListener(
              "DOMContentLoaded",
              function () {
                if (navigator.standalone) {
                  setTimeout(function () {
                    setTimeout(function () {
                      a();
                    }, 1);
                  }, 1);
                } else {
                  setTimeout(function () {
                    a();
                  }, 1);
                }
              },
              !1
            );
          }
        }
      }
    }
  },
  callback: function (c, a, b, d) {
    if (Ext.isFunction(c)) {
      b = b || [];
      a = a || window;
      if (d) {
        Ext.defer(c, d, a, b);
      } else {
        c.apply(a, b);
      }
    }
  },
});
Ext.define(
  "Ext.env.Browser",
  {
    statics: {
      browserNames: {
        ie: "IE",
        firefox: "Firefox",
        safari: "Safari",
        chrome: "Chrome",
        opera: "Opera",
        dolfin: "Dolfin",
        webosbrowser: "webOSBrowser",
        chromeMobile: "ChromeMobile",
        chromeiOS: "ChromeiOS",
        silk: "Silk",
        other: "Other",
      },
      engineNames: {
        webkit: "WebKit",
        gecko: "Gecko",
        presto: "Presto",
        trident: "Trident",
        other: "Other",
      },
      enginePrefixes: {
        webkit: "AppleWebKit/",
        gecko: "Gecko/",
        presto: "Presto/",
        trident: "Trident/",
      },
      browserPrefixes: {
        ie: "MSIE ",
        firefox: "Firefox/",
        chrome: "Chrome/",
        safari: "Version/",
        opera: "OPR/",
        dolfin: "Dolfin/",
        webosbrowser: "wOSBrowser/",
        chromeMobile: "CrMo/",
        chromeiOS: "CriOS/",
        silk: "Silk/",
      },
    },
    styleDashPrefixes: {
      WebKit: "-webkit-",
      Gecko: "-moz-",
      Trident: "-ms-",
      Presto: "-o-",
      Other: "",
    },
    stylePrefixes: {
      WebKit: "Webkit",
      Gecko: "Moz",
      Trident: "ms",
      Presto: "O",
      Other: "",
    },
    propertyPrefixes: {
      WebKit: "webkit",
      Gecko: "moz",
      Trident: "ms",
      Presto: "o",
      Other: "",
    },
    is: Ext.emptyFn,
    name: null,
    version: null,
    engineName: null,
    engineVersion: null,
    setFlag: function (b, a) {
      if (typeof a == "undefined") {
        a = !0;
      }
      this.is[b] = a;
      this.is[b.toLowerCase()] = a;
      return this;
    },
    constructor: function (b) {
      this.userAgent = b;
      var h = this.statics(),
        k = b.match(
          new RegExp(
            "((?:" +
              Ext.Object.getValues(h.browserPrefixes).join(")|(?:") +
              "))([\\w\\._]+)"
          )
        ),
        n = b.match(
          new RegExp(
            "((?:" +
              Ext.Object.getValues(h.enginePrefixes).join(")|(?:") +
              "))([\\w\\._]+)"
          )
        ),
        f = h.browserNames,
        a = f.other,
        g = h.engineNames,
        d = g.other,
        c = "",
        j = "",
        m = !1,
        o,
        i,
        e;
      o = this.is = function (a) {
        return o[a] === !0;
      };
      if (k) {
        a = f[Ext.Object.getKey(h.browserPrefixes, k[1])];
        c = new Ext.Version(k[2]);
      }
      if (n) {
        d = g[Ext.Object.getKey(h.enginePrefixes, n[1])];
        j = new Ext.Version(n[2]);
      }
      if (d == "Trident" && a != "IE") {
        a = "IE";
        var l = b.match(/.*rv:(\d+.\d+)/);
        if (l && l.length) {
          l = l[1];
          c = new Ext.Version(l);
        }
      }
      if (b.match(/FB/) && a == "Other") {
        a = f.safari;
        d = g.webkit;
      }
      if (b.match(/Android.*Chrome/g)) {
        a = "ChromeMobile";
      }
      if (b.match(/OPR\//)) {
        a = "Opera";
        k = b.match(/OPR\/(\d+.\d+)/);
        c = new Ext.Version(k[1]);
      }
      Ext.apply(this, { engineName: d, engineVersion: j, name: a, version: c });
      this.setFlag(a);
      if (c) {
        this.setFlag(a + (c.getMajor() || ""));
        this.setFlag(a + c.getShortVersion());
      }
      for (i in f) {
        if (f.hasOwnProperty(i)) {
          e = f[i];
          this.setFlag(e, a === e);
        }
      }
      this.setFlag(e);
      if (j) {
        this.setFlag(d + (j.getMajor() || ""));
        this.setFlag(d + j.getShortVersion());
      }
      for (i in g) {
        if (g.hasOwnProperty(i)) {
          e = g[i];
          this.setFlag(e, d === e);
        }
      }
      this.setFlag("Standalone", !!navigator.standalone);
      this.setFlag(
        "Ripple",
        !!document.getElementById("tinyhippos-injected") &&
          !Ext.isEmpty(window.top.ripple)
      );
      this.setFlag("WebWorks", !!window.blackberry);
      if (
        typeof window.PhoneGap != "undefined" ||
        typeof window.Cordova != "undefined" ||
        typeof window.cordova != "undefined"
      ) {
        m = !0;
        this.setFlag("PhoneGap");
        this.setFlag("Cordova");
      } else {
        if (!!window.isNK) {
          m = !0;
          this.setFlag("Sencha");
        }
      }
      if (/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(b)) {
        m = !0;
      }
      this.setFlag("WebView", m);
      this.isStrict = document.compatMode == "CSS1Compat";
      this.isSecure = /^https/i.test(window.location.protocol);
      return this;
    },
    getStyleDashPrefix: function () {
      return this.styleDashPrefixes[this.engineName];
    },
    getStylePrefix: function () {
      return this.stylePrefixes[this.engineName];
    },
    getVendorProperyName: function (b) {
      var a = this.propertyPrefixes[this.engineName];
      if (a.length > 0) {
        return a + Ext.String.capitalize(b);
      }
      return b;
    },
    getPreferredTranslationMethod: function (a) {
      if (
        typeof a == "object" &&
        "translationMethod" in a &&
        a.translationMethod !== "auto"
      ) {
        return a.translationMethod;
      } else {
        if (this.is.AndroidStock2 || this.is.IE) {
          return "scrollposition";
        } else {
          return "csstransform";
        }
      }
    },
  },
  function () {
    var a = (Ext.browser = new this(Ext.global.navigator.userAgent));
  }
);
Ext.define(
  "Ext.env.OS",
  {
    statics: {
      names: {
        ios: "iOS",
        android: "Android",
        windowsPhone: "WindowsPhone",
        webos: "webOS",
        blackberry: "BlackBerry",
        rimTablet: "RIMTablet",
        mac: "MacOS",
        win: "Windows",
        tizen: "Tizen",
        linux: "Linux",
        bada: "Bada",
        chrome: "ChromeOS",
        other: "Other",
      },
      prefixes: {
        tizen: "(Tizen )",
        ios: "i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",
        android: "(Android |HTC_|Silk/)",
        windowsPhone: "Windows Phone ",
        blackberry: "(?:BlackBerry|BB)(?:.*)Version/",
        rimTablet: "RIM Tablet OS ",
        webos: "(?:webOS|hpwOS)/",
        bada: "Bada/",
        chrome: "CrOS ",
      },
    },
    is: Ext.emptyFn,
    name: null,
    version: null,
    setFlag: function (b, a) {
      if (typeof a == "undefined") {
        a = !0;
      }
      this.is[b] = a;
      this.is[b.toLowerCase()] = a;
      return this;
    },
    constructor: function (j, k, a) {
      var l = this.statics(),
        g = l.names,
        h = l.prefixes,
        b,
        c = "",
        d,
        m,
        f,
        i,
        n,
        e;
      a = a || Ext.browser;
      n = this.is = function (b) {
        return this.is[b] === !0;
      };
      for (d in h) {
        if (h.hasOwnProperty(d)) {
          m = h[d];
          f = j.match(new RegExp("(?:" + m + ")([^\\s;]+)"));
          if (f) {
            b = g[d];
            e = f[1];
            if (e && e == "HTC_") {
              c = new Ext.Version("2.3");
            } else {
              if (e && e == "Silk/") {
                c = new Ext.Version("2.3");
              } else {
                c = new Ext.Version(f[f.length - 1]);
              }
            }
            break;
          }
        }
      }
      if (!b) {
        b = g[(j.toLowerCase().match(/mac|win|linux/) || ["other"])[0]];
        c = new Ext.Version("");
      }
      this.name = b;
      this.version = c;
      if (k) {
        this.setFlag(k.replace(/ simulator$/i, ""));
      }
      this.setFlag(b);
      if (c) {
        this.setFlag(b + (c.getMajor() || ""));
        this.setFlag(b + c.getShortVersion());
      }
      for (d in g) {
        if (g.hasOwnProperty(d)) {
          i = g[d];
          if (!n.hasOwnProperty(b)) {
            this.setFlag(i, b === i);
          }
        }
      }
      if (this.name == "iOS" && window.screen.height == 568) {
        this.setFlag("iPhone5");
      }
      if (a.is.Safari || a.is.Silk) {
        if (
          this.is.Android2 ||
          this.is.Android3 ||
          a.version.shortVersion == 501
        ) {
          a.setFlag("AndroidStock");
          a.setFlag("AndroidStock2");
        }
        if (this.is.Android4) {
          a.setFlag("AndroidStock");
          a.setFlag("AndroidStock4");
        }
      }
      return this;
    },
  },
  function () {
    var e = Ext.global.navigator,
      f = e.userAgent,
      a,
      g,
      b;
    Ext.os = a = new this(f, e.platform);
    g = a.name;
    var c = window.location.search.match(/deviceType=(Tablet|Phone)/),
      d = window.deviceType;
    if (c && c[1]) {
      b = c[1];
    } else {
      if (d === "iPhone") {
        b = "Phone";
      } else {
        if (d === "iPad") {
          b = "Tablet";
        } else {
          if (
            !a.is.Android &&
            !a.is.iOS &&
            !a.is.WindowsPhone &&
            /Windows|Linux|MacOS/.test(g)
          ) {
            b = "Desktop";
            Ext.browser.is.WebView = Ext.browser.is.Ripple ? !0 : !1;
          } else {
            if (
              a.is.iPad ||
              a.is.RIMTablet ||
              a.is.Android3 ||
              Ext.browser.is.Silk ||
              (a.is.Android4 && f.search(/mobile/i) == -1)
            ) {
              b = "Tablet";
            } else {
              b = "Phone";
            }
          }
        }
      }
    }
    a.setFlag(b, !0);
    a.deviceType = b;
  }
);
Ext.define(
  "Ext.env.Feature",
  {
    constructor: function () {
      this.testElements = {};
      this.has = function (a) {
        return !!this.has[a];
      };
      if (!Ext.theme) {
        Ext.theme = { name: "Default" };
      }
      Ext.theme.is = {};
      Ext.theme.is[Ext.theme.name] = !0;
      Ext.onDocumentReady(function () {
        this.registerTest({
          ProperHBoxStretching: function () {
            var a = document.createElement("div"),
              b = a.appendChild(document.createElement("div")),
              d = b.appendChild(document.createElement("div")),
              c;
            a.setAttribute(
              "style",
              "width: 100px; height: 100px; position: relative;"
            );
            b.setAttribute(
              "style",
              "position: absolute; display: -ms-flexbox; display: -webkit-flex; display: -moz-flexbox; display: flex; -ms-flex-direction: row; -webkit-flex-direction: row; -moz-flex-direction: row; flex-direction: row; min-width: 100%;"
            );
            d.setAttribute("style", "width: 200px; height: 50px;");
            document.body.appendChild(a);
            c = b.offsetWidth;
            document.body.removeChild(a);
            return c > 100;
          },
        });
      }, this);
    },
    getTestElement: function (a, b) {
      if (a === undefined) {
        a = "div";
      } else {
        if (typeof a !== "string") {
          return a;
        }
      }
      if (b) {
        return document.createElement(a);
      }
      if (!this.testElements[a]) {
        this.testElements[a] = document.createElement(a);
      }
      return this.testElements[a];
    },
    isStyleSupported: function (a, d) {
      var b = this.getTestElement(d).style,
        c = Ext.String.capitalize(a);
      if (
        typeof b[a] !== "undefined" ||
        typeof b[Ext.browser.getStylePrefix(a) + c] !== "undefined"
      ) {
        return !0;
      }
      return !1;
    },
    isStyleSupportedWithoutPrefix: function (b, c) {
      var a = this.getTestElement(c).style;
      if (typeof a[b] !== "undefined") {
        return !0;
      }
      return !1;
    },
    isEventSupported: function (e, d) {
      if (d === undefined) {
        d = window;
      }
      var a = this.getTestElement(d),
        b = "on" + e.toLowerCase(),
        c = b in a;
      if (!c) {
        if (a.setAttribute && a.removeAttribute) {
          a.setAttribute(b, "");
          c = typeof a[b] === "function";
          if (typeof a[b] !== "undefined") {
            a[b] = undefined;
          }
          a.removeAttribute(b);
        }
      }
      return c;
    },
    getSupportedPropertyName: function (c, a) {
      var b = Ext.browser.getVendorProperyName(a);
      if (b in c) {
        return b;
      } else {
        if (a in c) {
          return a;
        }
      }
      return null;
    },
    registerTest: Ext.Function.flexSetter(function (a, b) {
      this.has[a] = b.call(this);
      return this;
    }),
  },
  function () {
    Ext.feature = new this();
    var a = Ext.feature.has;
    Ext.feature.registerTest({
      Canvas: function () {
        var a = this.getTestElement("canvas");
        return !!(a && a.getContext && a.getContext("2d"));
      },
      Svg: function () {
        var a = document;
        return !!(
          a.createElementNS &&
          !!a.createElementNS("http:/" + "/www.w3.org/2000/svg", "svg")
            .createSVGRect
        );
      },
      Vml: function () {
        var a = this.getTestElement(),
          b = !1;
        a.innerHTML = "<!--[if vml]><br><![endif]-->";
        b = a.childNodes.length === 1;
        a.innerHTML = "";
        return b;
      },
      Touch: function () {
        return (
          Ext.browser.is.Ripple ||
          (this.isEventSupported("touchstart") &&
            !(
              Ext.os &&
              Ext.os.name.match(/Windows|MacOS|Linux/) &&
              !Ext.os.is.BlackBerry6
            ))
        );
      },
      Pointer: function () {
        return !!window.navigator.msPointerEnabled;
      },
      Orientation: function () {
        return (
          "orientation" in window && this.isEventSupported("orientationchange")
        );
      },
      OrientationChange: function () {
        return this.isEventSupported("orientationchange");
      },
      DeviceMotion: function () {
        return this.isEventSupported("devicemotion");
      },
      Geolocation: function () {
        return "geolocation" in window.navigator;
      },
      SqlDatabase: function () {
        return "openDatabase" in window;
      },
      WebSockets: function () {
        return "WebSocket" in window;
      },
      Range: function () {
        return !!document.createRange;
      },
      CreateContextualFragment: function () {
        var a = !!document.createRange ? document.createRange() : !1;
        return a && !!a.createContextualFragment;
      },
      History: function () {
        return "history" in window && "pushState" in window.history;
      },
      CssTransforms: function () {
        return this.isStyleSupported("transform");
      },
      CssTransformNoPrefix: function () {
        return this.isStyleSupportedWithoutPrefix("transform");
      },
      Css3dTransforms: function () {
        return (
          this.has("CssTransforms") &&
          this.isStyleSupported("perspective") &&
          !Ext.browser.is.AndroidStock2
        );
      },
      CssAnimations: function () {
        return this.isStyleSupported("animationName");
      },
      CssTransitions: function () {
        return this.isStyleSupported("transitionProperty");
      },
      Audio: function () {
        return !!this.getTestElement("audio").canPlayType;
      },
      Video: function () {
        return !!this.getTestElement("video").canPlayType;
      },
      ClassList: function () {
        return "classList" in this.getTestElement();
      },
      LocalStorage: function () {
        var a = !1;
        try {
          if ("localStorage" in window && window["localStorage"] !== null) {
            localStorage.setItem("sencha-localstorage-test", "test success");
            localStorage.removeItem("sencha-localstorage-test");
            a = !0;
          }
        } catch (b) {}
        return a;
      },
      XHR2: function () {
        return (
          window.ProgressEvent &&
          window.FormData &&
          window.XMLHttpRequest &&
          "withCredentials" in new XMLHttpRequest()
        );
      },
      XHRUploadProgress: function () {
        if (window.XMLHttpRequest && !Ext.browser.is.AndroidStock) {
          var a = new XMLHttpRequest();
          return a && "upload" in a && "onprogress" in a.upload;
        }
        return !1;
      },
      NumericInputPlaceHolder: function () {
        return !(Ext.browser.is.AndroidStock4 && Ext.os.version.getMinor() < 2);
      },
    });
  }
);
Ext.define(
  "Ext.dom.Query",
  {
    select: function (c, a) {
      var f = [],
        d,
        b,
        e,
        h,
        g;
      a = a || document;
      if (typeof a == "string") {
        a = document.getElementById(a);
      }
      c = c.split(",");
      for (b = 0, h = c.length; b < h; b++) {
        if (typeof c[b] == "string") {
          if (c[b][0] == "@") {
            d = a.getAttributeNode(c[b].substring(1));
            f.push(d);
          } else {
            d = a.querySelectorAll(c[b]);
            for (e = 0, g = d.length; e < g; e++) {
              f.push(d[e]);
            }
          }
        }
      }
      return f;
    },
    selectNode: function (b, a) {
      return this.select(b, a)[0];
    },
    is: function (a, e) {
      var b, c, d, f;
      if (typeof a == "string") {
        a = document.getElementById(a);
      }
      if (Ext.isArray(a)) {
        c = !0;
        f = a.length;
        for (d = 0; d < f; d++) {
          if (!this.is(a[d], e)) {
            c = !1;
            break;
          }
        }
      } else {
        b = a.parentNode;
        if (!b) {
          b = document.createDocumentFragment();
          b.appendChild(a);
          c = this.select(e, b).indexOf(a) !== -1;
          b.removeChild(a);
          b = null;
        } else {
          c = this.select(e, b).indexOf(a) !== -1;
        }
      }
      return c;
    },
    isXml: function (a) {
      var b = (a ? a.ownerDocument || a : 0).documentElement;
      return b ? b.nodeName !== "HTML" : !1;
    },
  },
  function () {
    Ext.ns("Ext.core");
    Ext.core.DomQuery = Ext.DomQuery = new this();
    Ext.query = Ext.Function.alias(Ext.DomQuery, "select");
  }
);
Ext.define(
  "Ext.dom.Helper",
  {
    emptyTags:
      /^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,
    confRe: /tag|children|cn|html|tpl|tplData$/i,
    endRe: /end/i,
    attribXlat: { cls: "class", htmlFor: "for" },
    closeTags: {},
    decamelizeName: (function () {
      var b = /([a-z])([A-Z])/g,
        a = {};
      function decamel(c, a, b) {
        return a + "-" + b.toLowerCase();
      }
      return function (c) {
        return a[c] || (a[c] = c.replace(b, decamel));
      };
    })(),
    generateMarkup: function (a, b) {
      var e = this,
        d,
        c,
        f,
        g,
        h;
      if (typeof a == "string") {
        b.push(a);
      } else {
        if (Ext.isArray(a)) {
          for (g = 0; g < a.length; g++) {
            if (a[g]) {
              e.generateMarkup(a[g], b);
            }
          }
        } else {
          f = a.tag || "div";
          b.push("<", f);
          for (d in a) {
            if (a.hasOwnProperty(d)) {
              c = a[d];
              if (!e.confRe.test(d)) {
                if (typeof c == "object") {
                  b.push(" ", d, '="');
                  e.generateStyles(c, b).push('"');
                } else {
                  b.push(" ", e.attribXlat[d] || d, '="', c, '"');
                }
              }
            }
          }
          if (e.emptyTags.test(f)) {
            b.push("/>");
          } else {
            b.push(">");
            if ((c = a.tpl)) {
              c.applyOut(a.tplData, b);
            }
            if ((c = a.html)) {
              b.push(c);
            }
            if ((c = a.cn || a.children)) {
              e.generateMarkup(c, b);
            }
            h = e.closeTags;
            b.push(h[f] || (h[f] = "</" + f + ">"));
          }
        }
      }
      return b;
    },
    generateStyles: function (b, c) {
      var d = c || [],
        a;
      for (a in b) {
        if (b.hasOwnProperty(a)) {
          d.push(this.decamelizeName(a), ":", b[a], ";");
        }
      }
      return c || d.join("");
    },
    markup: function (a) {
      if (typeof a == "string") {
        return a;
      }
      var b = this.generateMarkup(a, []);
      return b.join("");
    },
    applyStyles: function (b, a) {
      Ext.fly(b).applyStyles(a);
    },
    createContextualFragment: function (f) {
      var e = document.createElement("div"),
        c = document.createDocumentFragment(),
        b = 0,
        d,
        a;
      e.innerHTML = f;
      a = e.childNodes;
      d = a.length;
      for (; b < d; b++) {
        c.appendChild(a[b].cloneNode(!0));
      }
      return c;
    },
    insertHtml: function (b, a, e) {
      var h, d, c, i, f, g;
      b = b.toLowerCase();
      if (Ext.isTextNode(a)) {
        if (b == "afterbegin") {
          b = "beforebegin";
        } else {
          if (b == "beforeend") {
            b = "afterend";
          }
        }
      }
      f = b == "beforebegin";
      g = b == "afterbegin";
      d = Ext.feature.has.CreateContextualFragment
        ? a.ownerDocument.createRange()
        : undefined;
      h = "setStart" + (this.endRe.test(b) ? "After" : "Before");
      if (f || b == "afterend") {
        if (d) {
          d[h](a);
          c = d.createContextualFragment(e);
        } else {
          c = this.createContextualFragment(e);
        }
        a.parentNode.insertBefore(c, f ? a : a.nextSibling);
        return a[(f ? "previous" : "next") + "Sibling"];
      } else {
        i = (g ? "first" : "last") + "Child";
        if (a.firstChild) {
          if (d) {
            try {
              d[h](a[i]);
              c = d.createContextualFragment(e);
            } catch (j) {
              c = this.createContextualFragment(e);
            }
          } else {
            c = this.createContextualFragment(e);
          }
          if (g) {
            a.insertBefore(c, a.firstChild);
          } else {
            a.appendChild(c);
          }
        } else {
          a.innerHTML = e;
        }
        return a[i];
      }
    },
    insertBefore: function (b, c, a) {
      return this.doInsert(b, c, a, "beforebegin");
    },
    insertAfter: function (b, c, a) {
      return this.doInsert(b, c, a, "afterend");
    },
    insertFirst: function (b, c, a) {
      return this.doInsert(b, c, a, "afterbegin");
    },
    append: function (b, c, a) {
      return this.doInsert(b, c, a, "beforeend");
    },
    overwrite: function (a, c, b) {
      a = Ext.getDom(a);
      a.innerHTML = this.markup(c);
      return b ? Ext.get(a.firstChild) : a.firstChild;
    },
    doInsert: function (d, e, b, c) {
      var a = this.insertHtml(c, Ext.getDom(d), this.markup(e));
      return b ? Ext.get(a, !0) : a;
    },
    createTemplate: function (b) {
      var a = this.markup(b);
      return new Ext.Template(a);
    },
  },
  function () {
    Ext.ns("Ext.core");
    Ext.core.DomHelper = Ext.DomHelper = new this();
  }
);
Ext.define("Ext.mixin.Identifiable", {
  statics: { uniqueIds: {} },
  isIdentifiable: !0,
  mixinId: "identifiable",
  idCleanRegex: /\.|[^\w\-]/g,
  defaultIdPrefix: "ext-",
  defaultIdSeparator: "-",
  getOptimizedId: function () {
    return this.id;
  },
  getUniqueId: function () {
    var f = this.id,
      b,
      c,
      e,
      d,
      a;
    if (!f) {
      b = this.self.prototype;
      c = this.defaultIdSeparator;
      d = Ext.mixin.Identifiable.uniqueIds;
      if (!b.hasOwnProperty("identifiablePrefix")) {
        e = this.xtype;
        if (e) {
          a = this.defaultIdPrefix + e + c;
        } else {
          a = b.$className.replace(this.idCleanRegex, c).toLowerCase() + c;
        }
        b.identifiablePrefix = a;
      }
      a = this.identifiablePrefix;
      if (!d.hasOwnProperty(a)) {
        d[a] = 0;
      }
      f = this.id = a + ++d[a];
    }
    this.getUniqueId = this.getOptimizedId;
    return f;
  },
  setId: function (a) {
    this.id = a;
  },
  getId: function () {
    var a = this.id;
    if (!a) {
      a = this.getUniqueId();
    }
    this.getId = this.getOptimizedId;
    return a;
  },
});
Ext.define(
  "Ext.dom.Element",
  {
    alternateClassName: "Ext.Element",
    mixins: [Ext.mixin.Identifiable],
    observableType: "element",
    xtype: "element",
    statics: {
      CREATE_ATTRIBUTES: {
        style: "style",
        className: "className",
        cls: "cls",
        classList: "classList",
        text: "text",
        hidden: "hidden",
        html: "html",
        children: "children",
      },
      create: function (b, j) {
        var d = this.CREATE_ATTRIBUTES,
          c,
          h,
          g,
          a,
          f,
          e,
          i;
        if (!b) {
          b = {};
        }
        if (b.isElement) {
          return b.dom;
        } else {
          if ("nodeType" in b) {
            return b;
          }
        }
        if (typeof b == "string") {
          return document.createTextNode(b);
        }
        g = b.tag;
        if (!g) {
          g = "div";
        }
        if (b.namespace) {
          c = document.createElementNS(b.namespace, g);
        } else {
          c = document.createElement(g);
        }
        h = c.style;
        for (f in b) {
          if (f != "tag") {
            a = b[f];
            switch (f) {
              case d.style:
                if (typeof a == "string") {
                  c.setAttribute(f, a);
                } else {
                  for (e in a) {
                    if (a.hasOwnProperty(e)) {
                      h[e] = a[e];
                    }
                  }
                }
                break;
              case d.className:
              case d.cls:
                c.className = a;
                break;
              case d.classList:
                c.className = a.join(" ");
                break;
              case d.text:
                c.textContent = a;
                break;
              case d.hidden:
                if (a) {
                  c.style.display = "none";
                }
                break;
              case d.html:
                c.innerHTML = a;
                break;
              case d.children:
                for (e = 0, i = a.length; e < i; e++) {
                  c.appendChild(this.create(a[e], !0));
                }
                break;
              default:
                c.setAttribute(f, a);
            }
          }
        }
        if (j) {
          return c;
        } else {
          return this.get(c);
        }
      },
      documentElement: null,
      cache: {},
      get: function (a) {
        var c = this.cache,
          b,
          d,
          e;
        if (!a) {
          return null;
        }
        if (typeof a == "string") {
          d = document.getElementById(a);
          if (c.hasOwnProperty(a)) {
            b = c[a];
          }
          if (d) {
            if (b) {
              b.dom = d;
            } else {
              b = c[a] = new this(d);
            }
          } else {
            if (!b) {
              b = null;
            }
          }
          return b;
        }
        if ("tagName" in a) {
          e = a.id;
          if (c.hasOwnProperty(e)) {
            b = c[e];
            b.dom = a;
            return b;
          } else {
            b = new this(a);
            c[b.getId()] = b;
          }
          return b;
        }
        if (a.isElement) {
          return a;
        }
        if (a.isComposite) {
          return a;
        }
        if (Ext.isArray(a)) {
          return this.select(a);
        }
        if (a === document) {
          if (!this.documentElement) {
            this.documentElement = new this(document.documentElement);
            this.documentElement.setId("ext-application");
          }
          return this.documentElement;
        }
        return null;
      },
      data: function (b, e, f) {
        var d = Ext.cache,
          c,
          a;
        b = this.get(b);
        if (!b) {
          return null;
        }
        c = b.id;
        a = d[c].data;
        if (!a) {
          d[c].data = a = {};
        }
        if (arguments.length == 2) {
          return a[e];
        } else {
          return (a[e] = f);
        }
      },
      serializeForm: function (j) {
        var k = j.elements || (document.forms[j] || Ext.getDom(j)).elements,
          l = !1,
          d = encodeURIComponent,
          e = "",
          o = k.length,
          a,
          f,
          c,
          i,
          m,
          g,
          h,
          n,
          b;
        for (g = 0; g < o; g++) {
          a = k[g];
          f = a.name;
          c = a.type;
          i = a.options;
          if (!a.disabled && f) {
            if (/select-(one|multiple)/i.test(c)) {
              n = i.length;
              for (h = 0; h < n; h++) {
                b = i[h];
                if (b.selected) {
                  m = b.hasAttribute
                    ? b.hasAttribute("value")
                    : b.getAttributeNode("value").specified;
                  e += Ext.String.format(
                    "{0}={1}&",
                    d(f),
                    d(m ? b.value : b.text)
                  );
                }
              }
            } else {
              if (!/file|undefined|reset|button/i.test(c)) {
                if (
                  !(/radio|checkbox/i.test(c) && !a.checked) &&
                  !(c == "submit" && l)
                ) {
                  e += d(f) + "=" + d(a.value) + "&";
                  l = /submit/i.test(c);
                }
              }
            }
          }
        }
        return e.substr(0, e.length - 1);
      },
      serializeNode: function (a) {
        var c = "",
          b,
          d,
          e,
          f;
        if (a.nodeType === document.TEXT_NODE) {
          return a.nodeValue;
        }
        c += "<" + a.nodeName;
        if (a.attributes.length) {
          for (b = 0, d = a.attributes.length; b < d; b++) {
            e = a.attributes[b];
            c += " " + e.name + '="' + e.value + '"';
          }
        }
        c += ">";
        if (a.childNodes && a.childNodes.length) {
          for (b = 0, d = a.childNodes.length; b < d; b++) {
            f = a.childNodes[b];
            c += this.serializeNode(f);
          }
        }
        c += "</" + a.nodeName + ">";
        return c;
      },
    },
    isElement: !0,
    constructor: function (a) {
      if (typeof a == "string") {
        a = document.getElementById(a);
      }
      if (!a) {
        throw new Error(
          "Invalid domNode reference or an id of an existing domNode: " + a
        );
      }
      this.dom = a;
      this.getUniqueId();
    },
    attach: function (a) {
      this.dom = a;
      this.id = a.id;
      return this;
    },
    getUniqueId: function () {
      var a = this.id,
        b;
      if (!a) {
        b = this.dom;
        if (b.id.length > 0) {
          this.id = a = b.id;
        } else {
          b.id = a = this.mixins.identifiable.getUniqueId.call(this);
        }
        Ext.Element.cache[a] = this;
      }
      return a;
    },
    setId: function (a) {
      var b = this.id,
        c = Ext.Element.cache;
      if (b) {
        delete c[b];
      }
      this.dom.id = a;
      this.id = a;
      c[a] = this;
      return this;
    },
    setHtml: function (a) {
      this.dom.innerHTML = a;
    },
    getHtml: function () {
      return this.dom.innerHTML;
    },
    setText: function (a) {
      this.dom.textContent = a;
    },
    redraw: function () {
      var b = this.dom,
        a = b.style;
      a.display = "none";
      b.offsetHeight;
      a.display = "";
    },
    isPainted: (function () {
      return !Ext.browser.is.IE
        ? function () {
            var a = this.dom;
            return Boolean(a && a.offsetParent);
          }
        : function () {
            var a = this.dom;
            return Boolean(a && a.offsetHeight !== 0 && a.offsetWidth !== 0);
          };
    })(),
    set: function (d, e) {
      var c = this.dom,
        a,
        b;
      for (a in d) {
        if (d.hasOwnProperty(a)) {
          b = d[a];
          if (a == "style") {
            this.applyStyles(b);
          } else {
            if (a == "cls") {
              c.className = b;
            } else {
              if (e !== !1) {
                if (b === undefined) {
                  c.removeAttribute(a);
                } else {
                  c.setAttribute(a, b);
                }
              } else {
                c[a] = b;
              }
            }
          }
        }
      }
      return this;
    },
    is: function (a) {
      return Ext.DomQuery.is(this.dom, a);
    },
    getValue: function (b) {
      var a = this.dom.value;
      return b ? parseInt(a, 10) : a;
    },
    getAttribute: function (a, c) {
      var b = this.dom;
      return (
        b.getAttributeNS(c, a) ||
        b.getAttribute(c + ":" + a) ||
        b.getAttribute(a) ||
        b[a]
      );
    },
    setSizeState: function (e) {
      var a = ["x-sized", "x-unsized", "x-stretched"],
        d = [!0, !1, null],
        b = d.indexOf(e),
        c;
      if (b !== -1) {
        c = a[b];
        a.splice(b, 1);
        this.addCls(c);
      }
      this.removeCls(a);
      return this;
    },
    destroy: function () {
      this.isDestroyed = !0;
      var b = Ext.Element.cache,
        a = this.dom;
      if (a && a.parentNode && a.tagName != "BODY") {
        a.parentNode.removeChild(a);
      }
      delete b[this.id];
      delete this.dom;
    },
  },
  function (a) {
    Ext.elements = Ext.cache = a.cache;
    this.addStatics({
      Fly: new Ext.Class({
        extend: a,
        constructor: function (b) {
          this.dom = b;
        },
      }),
      _flyweights: {},
      fly: function (b, d) {
        var e = null,
          f = a._flyweights,
          c;
        d = d || "_global";
        b = Ext.getDom(b);
        if (b) {
          e = f[d] || (f[d] = new a.Fly());
          e.dom = b;
          e.isSynchronized = !1;
          c = Ext.cache[b.id];
          if (c && c.isElement) {
            c.isSynchronized = !1;
          }
        }
        return e;
      },
    });
    Ext.get = function (b) {
      return a.get(b);
    };
    Ext.fly = function () {
      return a.fly.apply(a, arguments);
    };
    Ext.ClassManager.onCreated(
      function () {
        a.mixin("observable", Ext.mixin.Observable);
      },
      null,
      "Ext.mixin.Observable"
    );
  }
);
Ext.dom.Element.addStatics({
  numberRe: /\d+$/,
  unitRe: /\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,
  camelRe: /(-[a-z])/gi,
  cssRe: /([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,
  opacityRe: /alpha\(opacity=(.*)\)/i,
  propertyCache: {},
  defaultUnit: "px",
  borders: {
    l: "border-left-width",
    r: "border-right-width",
    t: "border-top-width",
    b: "border-bottom-width",
  },
  paddings: {
    l: "padding-left",
    r: "padding-right",
    t: "padding-top",
    b: "padding-bottom",
  },
  margins: {
    l: "margin-left",
    r: "margin-right",
    t: "margin-top",
    b: "margin-bottom",
  },
  addUnits: function (a, b) {
    if (a === "" || a == "auto" || a === undefined || a === null) {
      return a || "";
    }
    if (Ext.isNumber(a) || this.numberRe.test(a)) {
      return a + (b || this.defaultUnit || "px");
    } else {
      if (!this.unitRe.test(a)) {
        return a || "";
      }
    }
    return a;
  },
  isAncestor: function (b, a) {
    var c = !1;
    b = Ext.getDom(b);
    a = Ext.getDom(a);
    if (b && a) {
      if (b.contains) {
        return b.contains(a);
      } else {
        if (b.compareDocumentPosition) {
          return !!(b.compareDocumentPosition(a) & 16);
        } else {
          while ((a = a.parentNode)) {
            c = a == b || c;
          }
        }
      }
    }
    return c;
  },
  parseBox: function (b) {
    if (typeof b != "string") {
      b = b.toString();
    }
    var a = b.split(" "),
      c = a.length;
    if (c == 1) {
      a[1] = a[2] = a[3] = a[0];
    } else {
      if (c == 2) {
        a[2] = a[0];
        a[3] = a[1];
      } else {
        if (c == 3) {
          a[3] = a[1];
        }
      }
    }
    return {
      top: a[0] || 0,
      right: a[1] || 0,
      bottom: a[2] || 0,
      left: a[3] || 0,
    };
  },
  unitizeBox: function (a, c) {
    var b = this;
    a = b.parseBox(a);
    return (
      b.addUnits(a.top, c) +
      " " +
      b.addUnits(a.right, c) +
      " " +
      b.addUnits(a.bottom, c) +
      " " +
      b.addUnits(a.left, c)
    );
  },
  camelReplaceFn: function (b, a) {
    return a.charAt(1).toUpperCase();
  },
  normalize: function (a) {
    return (
      this.propertyCache[a] ||
      (this.propertyCache[a] = a.replace(this.camelRe, this.camelReplaceFn))
    );
  },
  fromPoint: function (a, b) {
    return Ext.get(document.elementFromPoint(a, b));
  },
  parseStyles: function (b) {
    var d = {},
      c = this.cssRe,
      a;
    if (b) {
      c.lastIndex = 0;
      while ((a = c.exec(b))) {
        d[a[1]] = a[2];
      }
    }
    return d;
  },
});
Ext.dom.Element.addMembers({
  appendChild: function (a) {
    this.dom.appendChild(Ext.getDom(a));
    return this;
  },
  removeChild: function (a) {
    this.dom.removeChild(Ext.getDom(a));
    return this;
  },
  append: function () {
    this.appendChild.apply(this, arguments);
  },
  appendTo: function (a) {
    Ext.getDom(a).appendChild(this.dom);
    return this;
  },
  insertBefore: function (a) {
    a = Ext.getDom(a);
    a.parentNode.insertBefore(this.dom, a);
    return this;
  },
  insertAfter: function (a) {
    a = Ext.getDom(a);
    a.parentNode.insertBefore(this.dom, a.nextSibling);
    return this;
  },
  insertFirst: function (d) {
    var b = Ext.getDom(d),
      a = this.dom,
      c = a.firstChild;
    if (!c) {
      a.appendChild(b);
    } else {
      a.insertBefore(b, c);
    }
    return this;
  },
  insertSibling: function (a, g, d) {
    var c = this,
      b,
      e = (g || "before").toLowerCase() == "after",
      f;
    if (Ext.isArray(a)) {
      f = c;
      Ext.each(a, function (c) {
        b = Ext.fly(f, "_internal").insertSibling(c, g, d);
        if (e) {
          f = b;
        }
      });
      return b;
    }
    a = a || {};
    if (a.nodeType || a.dom) {
      b = c.dom.parentNode.insertBefore(
        Ext.getDom(a),
        e ? c.dom.nextSibling : c.dom
      );
      if (!d) {
        b = Ext.get(b);
      }
    } else {
      if (e && !c.dom.nextSibling) {
        b = Ext.core.DomHelper.append(c.dom.parentNode, a, !d);
      } else {
        b = Ext.core.DomHelper[e ? "insertAfter" : "insertBefore"](
          c.dom,
          a,
          !d
        );
      }
    }
    return b;
  },
  replace: function (a) {
    a = Ext.getDom(a);
    a.parentNode.replaceChild(this.dom, a);
    return this;
  },
  replaceWith: function (a) {
    var b = this;
    if (a.nodeType || a.dom || typeof a == "string") {
      a = Ext.get(a);
      b.dom.parentNode.insertBefore(a.dom, b.dom);
    } else {
      a = Ext.core.DomHelper.insertBefore(b.dom, a);
    }
    delete Ext.cache[b.id];
    Ext.removeNode(b.dom);
    b.id = Ext.id((b.dom = a));
    return b;
  },
  doReplaceWith: function (b) {
    var a = this.dom;
    a.parentNode.replaceChild(Ext.getDom(b), a);
  },
  createChild: function (a, b, c) {
    a = a || { tag: "div" };
    if (b) {
      return Ext.core.DomHelper.insertBefore(b, a, c !== !0);
    } else {
      return Ext.core.DomHelper[
        !this.dom.firstChild ? "insertFirst" : "append"
      ](this.dom, a, c !== !0);
    }
  },
  wrap: function (f, e) {
    var b = this.dom,
      a = this.self.create(f, e),
      d = e ? a : a.dom,
      c = b.parentNode;
    if (c) {
      c.insertBefore(d, b);
    }
    d.appendChild(b);
    return a;
  },
  wrapAllChildren: function (e) {
    var a = this.dom,
      d = a.childNodes,
      c = this.self.create(e),
      b = c.dom;
    while (d.length > 0) {
      b.appendChild(a.firstChild);
    }
    a.appendChild(b);
    return c;
  },
  unwrapAllChildren: function () {
    var a = this.dom,
      c = a.childNodes,
      b = a.parentNode;
    if (b) {
      while (c.length > 0) {
        b.insertBefore(a, a.firstChild);
      }
      this.destroy();
    }
  },
  unwrap: function () {
    var c = this.dom,
      b = c.parentNode,
      a;
    if (b) {
      a = b.parentNode;
      a.insertBefore(c, b);
      a.removeChild(b);
    } else {
      a = document.createDocumentFragment();
      a.appendChild(c);
    }
    return this;
  },
  detach: function () {
    var a = this.dom;
    if (a && a.parentNode && a.tagName !== "BODY") {
      a.parentNode.removeChild(a);
    }
    return this;
  },
  insertHtml: function (c, d, b) {
    var a = Ext.core.DomHelper.insertHtml(c, this.dom, d);
    return b ? Ext.get(a) : a;
  },
});
Ext.dom.Element.override({
  getX: function () {
    return this.getXY()[0];
  },
  getY: function () {
    return this.getXY()[1];
  },
  getXY: function () {
    var b = this.dom.getBoundingClientRect(),
      a = Math.round;
    return [a(b.left + window.pageXOffset), a(b.top + window.pageYOffset)];
  },
  getOffsetsTo: function (c) {
    var b = this.getXY(),
      a = Ext.fly(c, "_internal").getXY();
    return [b[0] - a[0], b[1] - a[1]];
  },
  setX: function (a) {
    return this.setXY([a, this.getY()]);
  },
  setY: function (a) {
    return this.setXY([this.getX(), a]);
  },
  setXY: function (a) {
    var c = this;
    if (arguments.length > 1) {
      a = [a, arguments[1]];
    }
    var b = c.translatePoints(a),
      d = c.dom.style;
    for (a in b) {
      if (!b.hasOwnProperty(a)) {
        continue;
      }
      if (!isNaN(b[a])) {
        d[a] = b[a] + "px";
      }
    }
    return c;
  },
  getLeft: function () {
    return parseInt(this.getStyle("left"), 10) || 0;
  },
  getRight: function () {
    return parseInt(this.getStyle("right"), 10) || 0;
  },
  getTop: function () {
    return parseInt(this.getStyle("top"), 10) || 0;
  },
  getBottom: function () {
    return parseInt(this.getStyle("bottom"), 10) || 0;
  },
  translatePoints: function (a, e) {
    e = isNaN(a[1]) ? e : a[1];
    a = isNaN(a[0]) ? a : a[0];
    var b = this,
      f = b.isStyle("position", "relative"),
      g = b.getXY(),
      c = parseInt(b.getStyle("left"), 10),
      d = parseInt(b.getStyle("top"), 10);
    c = !isNaN(c) ? c : f ? 0 : b.dom.offsetLeft;
    d = !isNaN(d) ? d : f ? 0 : b.dom.offsetTop;
    return { left: a - g[0] + c, top: e - g[1] + d };
  },
  setBox: function (a) {
    var b = this,
      d = a.width,
      c = a.height,
      f = a.top,
      e = a.left;
    if (e !== undefined) {
      b.setLeft(e);
    }
    if (f !== undefined) {
      b.setTop(f);
    }
    if (d !== undefined) {
      b.setWidth(d);
    }
    if (c !== undefined) {
      b.setHeight(c);
    }
    return this;
  },
  getBox: function (f, l) {
    var a = this,
      i = a.dom,
      h = i.offsetWidth,
      g = i.offsetHeight,
      c,
      b,
      d,
      k,
      e,
      j;
    if (!l) {
      c = a.getXY();
    } else {
      if (f) {
        c = [0, 0];
      } else {
        c = [
          parseInt(a.getStyle("left"), 10) || 0,
          parseInt(a.getStyle("top"), 10) || 0,
        ];
      }
    }
    if (!f) {
      b = { x: c[0], y: c[1], 0: c[0], 1: c[1], width: h, height: g };
    } else {
      d = a.getBorderWidth.call(a, "l") + a.getPadding.call(a, "l");
      k = a.getBorderWidth.call(a, "r") + a.getPadding.call(a, "r");
      e = a.getBorderWidth.call(a, "t") + a.getPadding.call(a, "t");
      j = a.getBorderWidth.call(a, "b") + a.getPadding.call(a, "b");
      b = {
        x: c[0] + d,
        y: c[1] + e,
        0: c[0] + d,
        1: c[1] + e,
        width: h - (d + k),
        height: g - (e + j),
      };
    }
    b.left = b.x;
    b.top = b.y;
    b.right = b.x + b.width;
    b.bottom = b.y + b.height;
    return b;
  },
  getPageBox: function (j) {
    var c = this,
      b = c.dom;
    if (!b) {
      return new Ext.util.Region();
    }
    var i = b.offsetWidth,
      e = b.offsetHeight,
      a = c.getXY(),
      h = a[1],
      g = a[0] + i,
      d = a[1] + e,
      f = a[0];
    if (j) {
      return new Ext.util.Region(h, g, d, f);
    } else {
      return { left: f, top: h, width: i, height: e, right: g, bottom: d };
    }
  },
});
Ext.dom.Element.addMembers({
  WIDTH: "width",
  HEIGHT: "height",
  MIN_WIDTH: "min-width",
  MIN_HEIGHT: "min-height",
  MAX_WIDTH: "max-width",
  MAX_HEIGHT: "max-height",
  TOP: "top",
  RIGHT: "right",
  BOTTOM: "bottom",
  LEFT: "left",
  VISIBILITY: 1,
  DISPLAY: 2,
  OFFSETS: 3,
  SEPARATOR: "-",
  trimRe: /^\s+|\s+$/g,
  wordsRe: /\w/g,
  spacesRe: /\s+/,
  styleSplitRe: /\s*(?::|;)\s*/,
  transparentRe: /^(?:transparent|(?:rgba[(](?:\s*\d+\s*[,]){3}\s*0\s*[)]))$/i,
  classNameSplitRegex: /[\s]+/,
  borders: {
    t: "border-top-width",
    r: "border-right-width",
    b: "border-bottom-width",
    l: "border-left-width",
  },
  paddings: {
    t: "padding-top",
    r: "padding-right",
    b: "padding-bottom",
    l: "padding-left",
  },
  margins: {
    t: "margin-top",
    r: "margin-right",
    b: "margin-bottom",
    l: "margin-left",
  },
  defaultUnit: "px",
  isSynchronized: !1,
  synchronize: function () {
    var e = this.dom,
      c = {},
      g = e.className,
      a,
      b,
      f,
      d;
    if (g.length > 0) {
      a = e.className.split(this.classNameSplitRegex);
      for (b = 0, f = a.length; b < f; b++) {
        d = a[b];
        c[d] = !0;
      }
    } else {
      a = [];
    }
    this.classList = a;
    this.hasClassMap = c;
    this.isSynchronized = !0;
    return this;
  },
  addCls: function (a, b, c) {
    if (!a) {
      return this;
    }
    if (!this.isSynchronized) {
      this.synchronize();
    }
    var j = this.dom,
      h = this.hasClassMap,
      g = this.classList,
      f = this.SEPARATOR,
      e,
      i,
      d;
    b = b ? b + f : "";
    c = c ? f + c : "";
    if (typeof a == "string") {
      a = a.split(this.spacesRe);
    }
    for (e = 0, i = a.length; e < i; e++) {
      d = b + a[e] + c;
      if (!h[d]) {
        h[d] = !0;
        g.push(d);
      }
    }
    j.className = g.join(" ");
    return this;
  },
  removeCls: function (b, c, a) {
    if (!b) {
      return this;
    }
    if (!this.isSynchronized) {
      this.synchronize();
    }
    if (!a) {
      a = "";
    }
    var j = this.dom,
      h = this.hasClassMap,
      g = this.classList,
      f = this.SEPARATOR,
      e,
      i,
      d;
    c = c ? c + f : "";
    a = a ? f + a : "";
    if (typeof b == "string") {
      b = b.split(this.spacesRe);
    }
    for (e = 0, i = b.length; e < i; e++) {
      d = c + b[e] + a;
      if (h[d]) {
        delete h[d];
        Ext.Array.remove(g, d);
      }
    }
    j.className = g.join(" ");
    return this;
  },
  replaceCls: function (b, a, f, e) {
    if (!b && !a) {
      return this;
    }
    b = b || [];
    a = a || [];
    if (!this.isSynchronized) {
      this.synchronize();
    }
    if (!e) {
      e = "";
    }
    var k = this.dom,
      g = this.hasClassMap,
      i = this.classList,
      j = this.SEPARATOR,
      d,
      h,
      c;
    f = f ? f + j : "";
    e = e ? j + e : "";
    if (typeof b == "string") {
      b = b.split(this.spacesRe);
    }
    if (typeof a == "string") {
      a = a.split(this.spacesRe);
    }
    for (d = 0, h = b.length; d < h; d++) {
      c = f + b[d] + e;
      if (g[c]) {
        delete g[c];
        Ext.Array.remove(i, c);
      }
    }
    for (d = 0, h = a.length; d < h; d++) {
      c = f + a[d] + e;
      if (!g[c]) {
        g[c] = !0;
        i.push(c);
      }
    }
    k.className = i.join(" ");
    return this;
  },
  hasCls: function (a) {
    if (!this.isSynchronized) {
      this.synchronize();
    }
    return this.hasClassMap.hasOwnProperty(a);
  },
  setCls: function (a) {
    var d = this.hasClassMap,
      b,
      e,
      c;
    if (typeof a == "string") {
      a = a.split(this.spacesRe);
    }
    for (b = 0, e = a.length; b < e; b++) {
      c = a[b];
      if (!d[c]) {
        d[c] = !0;
      }
    }
    this.classList = a.slice();
    this.dom.className = a.join(" ");
  },
  toggleCls: function (a, b) {
    if (typeof b !== "boolean") {
      b = !this.hasCls(a);
    }
    return b ? this.addCls(a) : this.removeCls(a);
  },
  swapCls: function (f, e, b, a) {
    if (b === undefined) {
      b = !0;
    }
    var d = b ? f : e,
      c = b ? e : f;
    if (c) {
      this.removeCls(a ? a + "-" + c : c);
    }
    if (d) {
      this.addCls(a ? a + "-" + d : d);
    }
    return this;
  },
  setWidth: function (a) {
    return this.setLengthValue(this.WIDTH, a);
  },
  setHeight: function (a) {
    return this.setLengthValue(this.HEIGHT, a);
  },
  setSize: function (a, b) {
    if (Ext.isObject(a)) {
      b = a.height;
      a = a.width;
    }
    this.setWidth(a);
    this.setHeight(b);
    return this;
  },
  setMinWidth: function (a) {
    return this.setLengthValue(this.MIN_WIDTH, a);
  },
  setMinHeight: function (a) {
    return this.setLengthValue(this.MIN_HEIGHT, a);
  },
  setMaxWidth: function (a) {
    return this.setLengthValue(this.MAX_WIDTH, a);
  },
  setMaxHeight: function (a) {
    return this.setLengthValue(this.MAX_HEIGHT, a);
  },
  setTop: function (a) {
    return this.setLengthValue(this.TOP, a);
  },
  setRight: function (a) {
    return this.setLengthValue(this.RIGHT, a);
  },
  setBottom: function (a) {
    return this.setLengthValue(this.BOTTOM, a);
  },
  setLeft: function (a) {
    return this.setLengthValue(this.LEFT, a);
  },
  setMargin: function (a) {
    var b = this.dom.style;
    if (a || a === 0) {
      a = this.self.unitizeBox(a === !0 ? 5 : a);
      b.setProperty("margin", a, "important");
    } else {
      b.removeProperty("margin-top");
      b.removeProperty("margin-right");
      b.removeProperty("margin-bottom");
      b.removeProperty("margin-left");
    }
  },
  setPadding: function (a) {
    var b = this.dom.style;
    if (a || a === 0) {
      a = this.self.unitizeBox(a === !0 ? 5 : a);
      b.setProperty("padding", a, "important");
    } else {
      b.removeProperty("padding-top");
      b.removeProperty("padding-right");
      b.removeProperty("padding-bottom");
      b.removeProperty("padding-left");
    }
  },
  setBorder: function (a) {
    var b = this.dom.style;
    if (a || a === 0) {
      a = this.self.unitizeBox(a === !0 ? 1 : a);
      b.setProperty("border-width", a, "important");
    } else {
      b.removeProperty("border-top-width");
      b.removeProperty("border-right-width");
      b.removeProperty("border-bottom-width");
      b.removeProperty("border-left-width");
    }
  },
  setLengthValue: function (c, a) {
    var b = this.dom.style;
    if (a === null) {
      b.removeProperty(c);
      return this;
    }
    if (typeof a == "number") {
      a = a + "px";
    }
    b.setProperty(c, a, "important");
    return this;
  },
  setVisible: function (b) {
    var c = this.getVisibilityMode(),
      a = b ? "removeCls" : "addCls";
    switch (c) {
      case this.VISIBILITY:
        this.removeCls(["x-hidden-display", "x-hidden-offsets"]);
        this[a]("x-hidden-visibility");
        break;
      case this.DISPLAY:
        this.removeCls(["x-hidden-visibility", "x-hidden-offsets"]);
        this[a]("x-hidden-display");
        break;
      case this.OFFSETS:
        this.removeCls(["x-hidden-visibility", "x-hidden-display"]);
        this[a]("x-hidden-offsets");
        break;
    }
    return this;
  },
  getVisibilityMode: function () {
    var b = this.dom,
      a = Ext.dom.Element.data(b, "visibilityMode");
    if (a === undefined) {
      Ext.dom.Element.data(b, "visibilityMode", (a = this.DISPLAY));
    }
    return a;
  },
  setVisibilityMode: function (a) {
    this.self.data(this.dom, "visibilityMode", a);
    return this;
  },
  show: function () {
    var a = this.dom;
    if (a) {
      a.style.removeProperty("display");
    }
  },
  hide: function () {
    this.dom.style.setProperty("display", "none", "important");
  },
  setVisibility: function (b) {
    var a = this.dom.style;
    if (b) {
      a.removeProperty("visibility");
    } else {
      a.setProperty("visibility", "hidden", "important");
    }
  },
  styleHooks: {},
  addStyles: function (g, f) {
    var d = 0,
      e = g.match(this.wordsRe),
      c = 0,
      h = e.length,
      a,
      b;
    for (; c < h; c++) {
      a = e[c];
      b = a && parseInt(this.getStyle(f[a]), 10);
      if (b) {
        d += Math.abs(b);
      }
    }
    return d;
  },
  isStyle: function (a, b) {
    return this.getStyle(a) == b;
  },
  getStyleValue: function (a) {
    return this.dom.style.getPropertyValue(a);
  },
  getStyle: function (c) {
    var b = this,
      d = b.dom,
      a = b.styleHooks[c],
      e,
      f;
    if (d == document) {
      return null;
    }
    if (!a) {
      b.styleHooks[c] = a = { name: Ext.dom.Element.normalize(c) };
    }
    if (a.get) {
      return a.get(d, b);
    }
    e = window.getComputedStyle(d, "");
    f = e && e[a.name];
    return f;
  },
  setStyle: function (c, b) {
    var e = this,
      g = e.dom,
      f = e.styleHooks,
      i = g.style,
      h = Ext.valueFrom,
      d,
      a;
    if (typeof c == "string") {
      a = f[c];
      if (!a) {
        f[c] = a = { name: Ext.dom.Element.normalize(c) };
      }
      b = h(b, "");
      if (a.set) {
        a.set(g, b, e);
      } else {
        i[a.name] = b;
      }
    } else {
      for (d in c) {
        if (c.hasOwnProperty(d)) {
          a = f[d];
          if (!a) {
            f[d] = a = { name: Ext.dom.Element.normalize(d) };
          }
          b = h(c[d], "");
          if (a.set) {
            a.set(g, b, e);
          } else {
            i[a.name] = b;
          }
        }
      }
    }
    return e;
  },
  getHeight: function (c) {
    var b = this.dom,
      a = c ? b.clientHeight - this.getPadding("tb") : b.offsetHeight;
    return a > 0 ? a : 0;
  },
  getWidth: function (c) {
    var b = this.dom,
      a = c ? b.clientWidth - this.getPadding("lr") : b.offsetWidth;
    return a > 0 ? a : 0;
  },
  getBorderWidth: function (a) {
    return this.addStyles(a, this.borders);
  },
  getPadding: function (a) {
    return this.addStyles(a, this.paddings);
  },
  applyStyles: function (a) {
    if (a) {
      var e = this.dom,
        c,
        b,
        d;
      if (typeof a == "function") {
        a = a.call();
      }
      c = typeof a;
      if (c == "string") {
        a = Ext.util.Format.trim(a).split(this.styleSplitRe);
        for (b = 0, d = a.length; b < d; ) {
          e.style[Ext.dom.Element.normalize(a[b++])] = a[b++];
        }
      } else {
        if (c == "object") {
          this.setStyle(a);
        }
      }
    }
    return this;
  },
  getSize: function (b) {
    var a = this.dom;
    return {
      width: Math.max(
        0,
        b ? a.clientWidth - this.getPadding("lr") : a.offsetWidth
      ),
      height: Math.max(
        0,
        b ? a.clientHeight - this.getPadding("tb") : a.offsetHeight
      ),
    };
  },
  repaint: function () {
    var a = this.dom;
    this.addCls(Ext.baseCSSPrefix + "repaint");
    setTimeout(function () {
      Ext.fly(a).removeCls(Ext.baseCSSPrefix + "repaint");
    }, 1);
    return this;
  },
  getMargin: function (c) {
    var a = this,
      e = { t: "top", l: "left", r: "right", b: "bottom" },
      d = {},
      b;
    if (!c) {
      for (b in a.margins) {
        d[e[b]] = parseFloat(a.getStyle(a.margins[b])) || 0;
      }
      return d;
    } else {
      return a.addStyles.call(a, c, a.margins);
    }
  },
  translate: (function () {
    var a =
      "webkitTransform" in document.createElement("div").style
        ? "webkitTransform"
        : "transform";
    return function (b, c, d) {
      this.dom.style[a] =
        "translate3d(" +
        (b || 0) +
        "px, " +
        (c || 0) +
        "px, " +
        (d || 0) +
        "px)";
    };
  })(),
});
Ext.dom.Element.addMembers({
  getParent: function () {
    return Ext.get(this.dom.parentNode);
  },
  getFirstChild: function () {
    return Ext.get(this.dom.firstElementChild);
  },
  contains: function (a) {
    if (!a) {
      return !1;
    }
    var b = Ext.getDom(a);
    return b === this.dom || this.self.isAncestor(this.dom, b);
  },
  findParent: function (e, b, f) {
    var a = this.dom,
      g = document.body,
      d = 0,
      c;
    b = b || 50;
    if (isNaN(b)) {
      c = Ext.getDom(b);
      b = Number.MAX_VALUE;
    }
    while (a && a.nodeType == 1 && d < b && a != g && a != c) {
      if (Ext.DomQuery.is(a, e)) {
        return f ? Ext.get(a) : a;
      }
      d++;
      a = a.parentNode;
    }
    return null;
  },
  findParentNode: function (b, c, d) {
    var a = Ext.fly(this.dom.parentNode, "_internal");
    return a ? a.findParent(b, c, d) : null;
  },
  up: function (a, b) {
    return this.findParentNode(a, b, !0);
  },
  select: function (b, a) {
    return Ext.dom.Element.select(b, a, this.dom);
  },
  query: function (a) {
    return Ext.DomQuery.select(a, this.dom);
  },
  down: function (c, b) {
    var a = Ext.DomQuery.selectNode(c, this.dom);
    return b ? a : Ext.get(a);
  },
  child: function (e, d) {
    var b,
      c = this,
      a;
    a = Ext.get(c).id;
    a = a.replace(/[\.:]/g, "\\$0");
    b = Ext.DomQuery.selectNode("#" + a + " > " + e, c.dom);
    return d ? b : Ext.get(b);
  },
  parent: function (b, a) {
    return this.matchNode("parentNode", "parentNode", b, a);
  },
  next: function (b, a) {
    return this.matchNode("nextSibling", "nextSibling", b, a);
  },
  prev: function (b, a) {
    return this.matchNode("previousSibling", "previousSibling", b, a);
  },
  first: function (b, a) {
    return this.matchNode("nextSibling", "firstChild", b, a);
  },
  last: function (b, a) {
    return this.matchNode("previousSibling", "lastChild", b, a);
  },
  matchNode: function (e, d, b, c) {
    if (!this.dom) {
      return null;
    }
    var a = this.dom[d];
    while (a) {
      if (a.nodeType == 1 && (!b || Ext.DomQuery.is(a, b))) {
        return !c ? Ext.get(a) : a;
      }
      a = a[e];
    }
    return null;
  },
  isAncestor: function (a) {
    return this.self.isAncestor.call(this.self, this.dom, a);
  },
});
Ext.define(
  "Ext.dom.CompositeElementLite",
  {
    alternateClassName: ["Ext.CompositeElementLite", "Ext.CompositeElement"],
    statics: { importElementMethods: function () {} },
    constructor: function (a, b) {
      this.elements = [];
      this.add(a, b);
      this.el = new Ext.dom.Element.Fly();
    },
    isComposite: !0,
    getElement: function (a) {
      return this.el.attach(a).synchronize();
    },
    transformElement: function (a) {
      return Ext.getDom(a);
    },
    getCount: function () {
      return this.elements.length;
    },
    add: function (a, e) {
      var d = this.elements,
        b,
        c;
      if (!a) {
        return this;
      }
      if (typeof a == "string") {
        a = Ext.dom.Element.selectorFunction(a, e);
      } else {
        if (a.isComposite) {
          a = a.elements;
        } else {
          if (!Ext.isIterable(a)) {
            a = [a];
          }
        }
      }
      for (b = 0, c = a.length; b < c; ++b) {
        d.push(this.transformElement(a[b]));
      }
      return this;
    },
    invoke: function (e, d) {
      var c = this.elements,
        f = c.length,
        b,
        a;
      for (a = 0; a < f; a++) {
        b = c[a];
        if (b) {
          Ext.dom.Element.prototype[e].apply(this.getElement(b), d);
        }
      }
      return this;
    },
    item: function (c) {
      var b = this.elements[c],
        a = null;
      if (b) {
        a = this.getElement(b);
      }
      return a;
    },
    addListener: function (d, e, f, h) {
      var c = this.elements,
        g = c.length,
        b,
        a;
      for (b = 0; b < g; b++) {
        a = c[b];
        if (a) {
          a.on(d, e, f || a, h);
        }
      }
      return this;
    },
    each: function (g, e) {
      var c = this,
        d = c.elements,
        f = d.length,
        b,
        a;
      for (b = 0; b < f; b++) {
        a = d[b];
        if (a) {
          a = this.getElement(a);
          if (g.call(e || a, a, c, b) === !1) {
            break;
          }
        }
      }
      return c;
    },
    fill: function (b) {
      var a = this;
      a.elements = [];
      a.add(b);
      return a;
    },
    filter: function (b) {
      var c = [],
        a = this,
        d = Ext.isFunction(b)
          ? b
          : function (a) {
              return a.is(b);
            };
      a.each(function (e, g, f) {
        if (d(e, f) !== !1) {
          c[c.length] = a.transformElement(e);
        }
      });
      a.elements = c;
      return a;
    },
    indexOf: function (a) {
      return Ext.Array.indexOf(this.elements, this.transformElement(a));
    },
    replaceElement: function (d, a, e) {
      var c = !isNaN(d) ? d : this.indexOf(d),
        b;
      if (c > -1) {
        a = Ext.getDom(a);
        if (e) {
          b = this.elements[c];
          b.parentNode.insertBefore(a, b);
          Ext.removeNode(b);
        }
        Ext.Array.splice(this.elements, c, 1, a);
      }
      return this;
    },
    clear: function () {
      this.elements = [];
    },
    addElements: function (a, b) {
      if (!a) {
        return this;
      }
      if (typeof a == "string") {
        a = Ext.dom.Element.selectorFunction(a, b);
      }
      var c = this.elements;
      Ext.each(a, function (d) {
        c.push(Ext.get(d));
      });
      return this;
    },
    first: function () {
      return this.item(0);
    },
    last: function () {
      return this.item(this.getCount() - 1);
    },
    contains: function (a) {
      return this.indexOf(a) != -1;
    },
    removeElement: function (d, c) {
      var e = this,
        b = this.elements,
        a;
      Ext.each(d, function (f) {
        if ((a = b[f] || b[(f = e.indexOf(f))])) {
          if (c) {
            if (a.dom) {
              a.remove();
            } else {
              Ext.removeNode(a);
            }
          }
          Ext.Array.erase(b, f, 1);
        }
      });
      return this;
    },
  },
  function () {
    var b = Ext.dom.Element,
      d = b.prototype,
      a = this.prototype,
      c;
    for (c in d) {
      if (typeof d[c] == "function") {
        (function (b) {
          if (b === "destroy") {
            a[b] = function () {
              return this.invoke(b, arguments);
            };
          } else {
            a[b] =
              a[b] ||
              function () {
                return this.invoke(b, arguments);
              };
          }
        }.call(a, c));
      }
    }
    a.on = a.addListener;
    b.selectorFunction = Ext.DomQuery.select;
    Ext.dom.Element.select = function (b, c, d) {
      var a;
      if (typeof b == "string") {
        a = Ext.dom.Element.selectorFunction(b, d);
      } else {
        if (b.length !== undefined) {
          a = b;
        } else {
        }
      }
      return c === !0
        ? new Ext.dom.CompositeElement(a)
        : new Ext.dom.CompositeElementLite(a);
    };
    Ext.select = function () {
      return b.select.apply(b, arguments);
    };
  }
);
Ext.define("Ext.event.ListenerStack", {
  currentOrder: "current",
  length: 0,
  constructor: function () {
    this.listeners = { before: [], current: [], after: [] };
    this.lateBindingMap = {};
    return this;
  },
  add: function (c, f, d, j) {
    var i = this.lateBindingMap,
      e = this.getAll(j),
      h = e.length,
      b,
      a,
      g;
    if (typeof c == "string" && f.isIdentifiable) {
      g = f.getId();
      b = i[g];
      if (b) {
        if (b[c]) {
          return !1;
        } else {
          b[c] = !0;
        }
      } else {
        i[g] = b = {};
        b[c] = !0;
      }
    } else {
      if (h > 0) {
        while (h--) {
          a = e[h];
          if (a.fn === c && a.scope === f) {
            a.options = d;
            return !1;
          }
        }
      }
    }
    a = this.create(c, f, d, j);
    if (d && d.prepend) {
      delete d.prepend;
      e.unshift(a);
    } else {
      e.push(a);
    }
    this.length++;
    return !0;
  },
  getAt: function (a, b) {
    return this.getAll(b)[a];
  },
  getAll: function (a) {
    if (!a) {
      a = this.currentOrder;
    }
    return this.listeners[a];
  },
  count: function (a) {
    return this.getAll(a).length;
  },
  create: function (a, d, b, c) {
    return {
      stack: this,
      fn: a,
      firingFn: !1,
      boundFn: !1,
      isLateBinding: typeof a == "string",
      scope: d,
      options: b || {},
      order: c,
    };
  },
  remove: function (a, g, i) {
    var e = this.getAll(i),
      c = e.length,
      h = !1,
      d = this.lateBindingMap,
      f,
      b;
    if (c > 0) {
      while (c--) {
        f = e[c];
        if (f.fn === a && f.scope === g) {
          e.splice(c, 1);
          h = !0;
          this.length--;
          if (typeof a == "string" && g.isIdentifiable) {
            b = g.getId();
            if (d[b] && d[b][a]) {
              delete d[b][a];
            }
          }
          break;
        }
      }
    }
    return h;
  },
});
Ext.define("Ext.event.Controller", {
  isFiring: !1,
  listenerStack: null,
  constructor: function (a) {
    this.firingListeners = [];
    this.firingArguments = [];
    this.setInfo(a);
    return this;
  },
  setInfo: function (a) {
    this.info = a;
  },
  getInfo: function () {
    return this.info;
  },
  setListenerStacks: function (a) {
    this.listenerStacks = a;
  },
  fire: function (n, g) {
    var h = this.listenerStacks,
      a = this.firingListeners,
      i = this.firingArguments,
      c = a.push,
      k = h.length,
      j,
      e,
      d,
      f,
      l = !1,
      m = !1,
      b;
    a.length = 0;
    if (g) {
      if (g.order !== "after") {
        l = !0;
      } else {
        m = !0;
      }
    }
    if (k === 1) {
      j = h[0].listeners;
      e = j.before;
      d = j.current;
      f = j.after;
      if (e.length > 0) {
        c.apply(a, e);
      }
      if (l) {
        c.call(a, g);
      }
      if (d.length > 0) {
        c.apply(a, d);
      }
      if (m) {
        c.call(a, g);
      }
      if (f.length > 0) {
        c.apply(a, f);
      }
    } else {
      for (b = 0; b < k; b++) {
        e = h[b].listeners.before;
        if (e.length > 0) {
          c.apply(a, e);
        }
      }
      if (l) {
        c.call(a, g);
      }
      for (b = 0; b < k; b++) {
        d = h[b].listeners.current;
        if (d.length > 0) {
          c.apply(a, d);
        }
      }
      if (m) {
        c.call(a, g);
      }
      for (b = 0; b < k; b++) {
        f = h[b].listeners.after;
        if (f.length > 0) {
          c.apply(a, f);
        }
      }
    }
    if (a.length === 0) {
      return this;
    }
    if (!n) {
      n = [];
    }
    i.length = 0;
    i.push.apply(i, n);
    i.push(null, this);
    this.doFire();
    return this;
  },
  doFire: function () {
    var i = this.firingListeners,
      h = this.firingArguments,
      n = h.length - 2,
      g,
      m,
      a,
      d,
      f,
      b,
      c,
      k,
      e,
      j,
      l;
    this.isPausing = !1;
    this.isPaused = !1;
    this.isStopped = !1;
    this.isFiring = !0;
    for (g = 0, m = i.length; g < m; g++) {
      a = i[g];
      d = a.options;
      f = a.fn;
      b = a.firingFn;
      c = a.boundFn;
      k = a.isLateBinding;
      e = a.scope;
      if (k && c && c !== e[f]) {
        c = !1;
        b = !1;
      }
      if (!c) {
        if (k) {
          c = e[f];
          if (!c) {
            continue;
          }
        } else {
          c = f;
        }
        a.boundFn = c;
      }
      if (!b) {
        b = c;
        if (d.buffer) {
          b = Ext.Function.createBuffered(b, d.buffer, e);
        }
        if (d.delay) {
          b = Ext.Function.createDelayed(b, d.delay, e);
        }
        a.firingFn = b;
      }
      h[n] = d;
      j = h;
      if (d.args) {
        j = d.args.concat(j);
      }
      if (d.single === !0) {
        a.stack.remove(f, e, a.order);
      }
      l = b.apply(e, j);
      if (l === !1) {
        this.stop();
      }
      if (this.isStopped) {
        break;
      }
      if (this.isPausing) {
        this.isPaused = !0;
        i.splice(0, g + 1);
        return;
      }
    }
    this.isFiring = !1;
    this.listenerStacks = null;
    i.length = 0;
    h.length = 0;
    this.connectingController = null;
  },
  connect: function (a) {
    this.connectingController = a;
  },
  resume: function () {
    var a = this.connectingController;
    this.isPausing = !1;
    if (this.isPaused && this.firingListeners.length > 0) {
      this.isPaused = !1;
      this.doFire();
    }
    if (a) {
      a.resume();
    }
    return this;
  },
  isInterrupted: function () {
    return this.isStopped || this.isPaused;
  },
  stop: function () {
    var a = this.connectingController;
    this.isStopped = !0;
    if (a) {
      this.connectingController = null;
      a.stop();
    }
    this.isFiring = !1;
    this.listenerStacks = null;
    return this;
  },
  pause: function () {
    var a = this.connectingController;
    this.isPausing = !0;
    if (a) {
      a.pause();
    }
    return this;
  },
});
Ext.define("Ext.event.Dispatcher", {
  statics: {
    getInstance: function () {
      if (!this.instance) {
        this.instance = new this();
      }
      return this.instance;
    },
    setInstance: function (a) {
      this.instance = a;
      return this;
    },
  },
  config: { publishers: {} },
  wildcard: "*",
  constructor: function (a) {
    this.listenerStacks = {};
    this.activePublishers = {};
    this.publishersCache = {};
    this.noActivePublishers = [];
    this.controller = null;
    this.initConfig(a);
    return this;
  },
  getListenerStack: function (e, g, f, b) {
    var d = this.listenerStacks,
      a = d[e],
      c;
    b = Boolean(b);
    if (!a) {
      if (b) {
        d[e] = a = {};
      } else {
        return null;
      }
    }
    a = a[g];
    if (!a) {
      if (b) {
        d[e][g] = a = {};
      } else {
        return null;
      }
    }
    c = a[f];
    if (!c) {
      if (b) {
        a[f] = c = new Ext.event.ListenerStack();
      } else {
        return null;
      }
    }
    return c;
  },
  getController: function (c, e, d, b) {
    var a = this.controller,
      f = { targetType: c, target: e, eventName: d };
    if (!a) {
      this.controller = a = new Ext.event.Controller();
    }
    if (a.isFiring) {
      a = new Ext.event.Controller();
    }
    a.setInfo(f);
    if (b && a !== b) {
      a.connect(b);
    }
    return a;
  },
  applyPublishers: function (a) {
    var b, c;
    this.publishersCache = {};
    for (b in a) {
      if (a.hasOwnProperty(b)) {
        c = a[b];
        this.registerPublisher(c);
      }
    }
    return a;
  },
  registerPublisher: function (b) {
    var c = this.activePublishers,
      d = b.getTargetType(),
      a = c[d];
    if (!a) {
      c[d] = a = [];
    }
    a.push(b);
    b.setDispatcher(this);
    return this;
  },
  getCachedActivePublishers: function (b, c) {
    var d = this.publishersCache,
      a;
    if ((a = d[b]) && (a = a[c])) {
      return a;
    }
    return null;
  },
  cacheActivePublishers: function (a, d, c) {
    var b = this.publishersCache;
    if (!b[a]) {
      b[a] = {};
    }
    b[a][d] = c;
    return c;
  },
  getActivePublishers: function (d, e) {
    var a, b, c, g, f;
    if ((a = this.getCachedActivePublishers(d, e))) {
      return a;
    }
    b = this.activePublishers[d];
    if (b) {
      a = [];
      for (c = 0, g = b.length; c < g; c++) {
        f = b[c];
        if (f.handles(e)) {
          a.push(f);
        }
      }
    } else {
      a = this.noActivePublishers;
    }
    return this.cacheActivePublishers(d, e, a);
  },
  hasListener: function (b, d, c) {
    var a = this.getListenerStack(b, d, c);
    if (a) {
      return a.count() > 0;
    }
    return !1;
  },
  addListener: function (f, g, d) {
    var c = this.getActivePublishers(f, d),
      e = c.length,
      a,
      b;
    b = this.doAddListener.apply(this, arguments);
    if (b && e > 0) {
      for (a = 0; a < e; a++) {
        c[a].subscribe(g, d);
      }
    }
    return b;
  },
  doAddListener: function (b, e, c, h, g, d, f) {
    var a = this.getListenerStack(b, e, c, !0);
    return a.add(h, g, d, f);
  },
  removeListener: function (f, g, d) {
    var c = this.getActivePublishers(f, d),
      e = c.length,
      a,
      b;
    b = this.doRemoveListener.apply(this, arguments);
    if (b && e > 0) {
      for (a = 0; a < e; a++) {
        c[a].unsubscribe(g, d);
      }
    }
    return b;
  },
  doRemoveListener: function (b, d, c, g, f, e) {
    var a = this.getListenerStack(b, d, c);
    if (a === null) {
      return !1;
    }
    return a.remove(g, f, e);
  },
  clearListeners: function (a, g, f) {
    var e = this.listenerStacks,
      d = arguments.length,
      h,
      c,
      b,
      i;
    if (d === 3) {
      if (e[a] && e[a][g]) {
        this.removeListener(a, g, f);
        delete e[a][g][f];
      }
    } else {
      if (d === 2) {
        if (e[a]) {
          h = e[a][g];
          if (h) {
            for (f in h) {
              if (h.hasOwnProperty(f)) {
                c = this.getActivePublishers(a, f);
                for (b = 0, d = c.length; b < d; b++) {
                  c[b].unsubscribe(g, f, !0);
                }
              }
            }
            delete e[a][g];
          }
        }
      } else {
        if (d === 1) {
          c = this.activePublishers[a];
          for (b = 0, d = c.length; b < d; b++) {
            c[b].unsubscribeAll();
          }
          delete e[a];
        } else {
          c = this.activePublishers;
          for (a in c) {
            if (c.hasOwnProperty(a)) {
              i = c[a];
              for (b = 0, d = i.length; b < d; b++) {
                i[b].unsubscribeAll();
              }
            }
          }
          delete this.listenerStacks;
          this.listenerStacks = {};
        }
      }
    }
    return this;
  },
  dispatchEvent: function (e, f, c) {
    var b = this.getActivePublishers(e, c),
      d = b.length,
      a;
    if (d > 0) {
      for (a = 0; a < d; a++) {
        b[a].notify(f, c);
      }
    }
    return this.doDispatchEvent.apply(this, arguments);
  },
  doDispatchEvent: function (d, f, e, i, g, h) {
    var c = this.getListenerStack(d, f, e),
      b = this.getWildcardListenerStacks(d, f, e),
      a;
    if (c === null || c.length == 0) {
      if (b.length == 0 && !g) {
        return;
      }
    } else {
      b.push(c);
    }
    a = this.getController(d, f, e, h);
    a.setListenerStacks(b);
    a.fire(i, g);
    return !a.isInterrupted();
  },
  getWildcardListenerStacks: function (d, f, e) {
    var c = [],
      a = this.wildcard,
      g = e !== a,
      h = f !== a,
      b;
    if (g && (b = this.getListenerStack(d, f, a))) {
      c.push(b);
    }
    if (h && (b = this.getListenerStack(d, a, e))) {
      c.push(b);
    }
    return c;
  },
  getPublisher: function (a) {
    return this.getPublishers()[a];
  },
});
Ext.define("Ext.mixin.Mixin", {
  onClassExtended: function (f, d) {
    var a = d.mixinConfig,
      e,
      b,
      c;
    if (a) {
      e = f.superclass.mixinConfig;
      if (e) {
        a = d.mixinConfig = Ext.merge({}, e, a);
      }
      d.mixinId = a.id;
      b = a.beforeHooks;
      c = a.hooks || a.afterHooks;
      if (b || c) {
        Ext.Function.interceptBefore(d, "onClassMixedIn", function (a) {
          var e = this.prototype;
          if (b) {
            Ext.Object.each(b, function (b, c) {
              a.override(c, function () {
                if (e[b].apply(this, arguments) !== !1) {
                  return this.callOverridden(arguments);
                }
              });
            });
          }
          if (c) {
            Ext.Object.each(c, function (b, c) {
              a.override(c, function () {
                var g = this.callOverridden(arguments);
                e[b].apply(this, arguments);
                return g;
              });
            });
          }
        });
      }
    }
  },
});
Ext.define(
  "Ext.mixin.Observable",
  {
    extend: Ext.mixin.Mixin,
    mixins: [Ext.mixin.Identifiable],
    mixinConfig: { id: "observable", hooks: { destroy: "destroy" } },
    alternateClassName: "Ext.util.Observable",
    isObservable: !0,
    observableType: "observable",
    validIdRegex: /^([\w\-]+)$/,
    observableIdPrefix: "#",
    listenerOptionsRegex: /^(?:delegate|single|delay|buffer|args|prepend)$/,
    eventFiringSuspended: !1,
    config: { listeners: null, bubbleEvents: null },
    constructor: function (a) {
      this.initConfig(a);
    },
    applyListeners: function (a) {
      if (a) {
        this.addListener(a);
      }
    },
    applyBubbleEvents: function (a) {
      if (a) {
        this.enableBubble(a);
      }
    },
    getOptimizedObservableId: function () {
      return this.observableId;
    },
    getObservableId: function () {
      if (!this.observableId) {
        var a = this.getUniqueId();
        this.observableId = this.observableIdPrefix + a;
        this.getObservableId = this.getOptimizedObservableId;
      }
      return this.observableId;
    },
    getOptimizedEventDispatcher: function () {
      return this.eventDispatcher;
    },
    getEventDispatcher: function () {
      if (!this.eventDispatcher) {
        this.eventDispatcher = Ext.event.Dispatcher.getInstance();
        this.getEventDispatcher = this.getOptimizedEventDispatcher;
        this.getListeners();
        this.getBubbleEvents();
      }
      return this.eventDispatcher;
    },
    getManagedListeners: function (d, c) {
      var b = d.getUniqueId(),
        a = this.managedListeners;
      if (!a) {
        this.managedListeners = a = {};
      }
      if (!a[b]) {
        a[b] = {};
        d.doAddListener("destroy", "clearManagedListeners", this, {
          single: !0,
          args: [d],
        });
      }
      if (!a[b][c]) {
        a[b][c] = [];
      }
      return a[b][c];
    },
    getUsedSelectors: function () {
      var a = this.usedSelectors;
      if (!a) {
        a = this.usedSelectors = [];
        a.$map = {};
      }
      return a;
    },
    fireEvent: function (a) {
      var b = Array.prototype.slice.call(arguments, 1);
      return this.doFireEvent(a, b);
    },
    fireAction: function (e, a, d, h, f, g) {
      var c = typeof d,
        b;
      if (a === undefined) {
        a = [];
      }
      if (c != "undefined") {
        b = {
          fn: d,
          isLateBinding: c == "string",
          scope: h || this,
          options: f || {},
          order: g,
        };
      }
      return this.doFireEvent(e, a, b);
    },
    doFireEvent: function (d, f, e, c) {
      var a = this,
        g = !0,
        b;
      if (a.eventFiringSuspended) {
        b = a.eventQueue;
        if (!b) {
          a.eventQueue = b = [];
        }
        b.push([d, f, e, c]);
      } else {
        g = a
          .getEventDispatcher()
          .dispatchEvent(a.observableType, a.getObservableId(), d, f, e, c);
      }
      return g;
    },
    doAddListener: function (j, k, a, c, i) {
      var l = a && a !== this && a.isIdentifiable,
        h = this.getUsedSelectors(),
        g = h.$map,
        b = this.getObservableId(),
        e,
        f,
        d;
      if (!c) {
        c = {};
      }
      if (!a) {
        a = this;
      }
      if (c.delegate) {
        d = c.delegate;
        b += " " + d;
      }
      if (!(b in g)) {
        g[b] = !0;
        h.push(b);
      }
      e = this.addDispatcherListener(b, j, k, a, c, i);
      if (e && l) {
        f = this.getManagedListeners(a, j);
        f.push({ delegate: d, scope: a, fn: k, order: i });
      }
      return e;
    },
    addDispatcherListener: function (a, e, f, d, b, c) {
      return this.getEventDispatcher().addListener(
        this.observableType,
        a,
        e,
        f,
        d,
        b,
        c
      );
    },
    doRemoveListener: function (j, k, a, g, i) {
      var m = a && a !== this && a.isIdentifiable,
        h = this.getObservableId(),
        e,
        d,
        c,
        l,
        b,
        f;
      if (g && g.delegate) {
        f = g.delegate;
        h += " " + f;
      }
      if (!a) {
        a = this;
      }
      e = this.removeDispatcherListener(h, j, k, a, i);
      if (e && m) {
        d = this.getManagedListeners(a, j);
        for (c = 0, l = d.length; c < l; c++) {
          b = d[c];
          if (
            b.fn === k &&
            b.scope === a &&
            b.delegate === f &&
            b.order === i
          ) {
            d.splice(c, 1);
            break;
          }
        }
      }
      return e;
    },
    removeDispatcherListener: function (a, d, e, c, b) {
      return this.getEventDispatcher().removeListener(
        this.observableType,
        a,
        d,
        e,
        c,
        b
      );
    },
    clearManagedListeners: function (g) {
      var c = this.managedListeners,
        a,
        e,
        h,
        f,
        d,
        j,
        b,
        i;
      if (!c) {
        return this;
      }
      if (g) {
        if (typeof g != "string") {
          a = g.getUniqueId();
        } else {
          a = g;
        }
        e = c[a];
        for (f in e) {
          if (e.hasOwnProperty(f)) {
            h = e[f];
            for (d = 0, j = h.length; d < j; d++) {
              b = h[d];
              i = {};
              if (b.delegate) {
                i.delegate = b.delegate;
              }
              if (this.doRemoveListener(f, b.fn, b.scope, i, b.order)) {
                d--;
                j--;
              }
            }
          }
        }
        delete c[a];
        return this;
      }
      for (a in c) {
        if (c.hasOwnProperty(a)) {
          this.clearManagedListeners(a);
        }
      }
    },
    changeListener: function (h, d, o, k, i, j) {
      var l, e, p, m, c, b, a, g, f, n;
      if (typeof o != "undefined") {
        if (typeof d != "string") {
          for (a = 0, g = d.length; a < g; a++) {
            c = d[a];
            h.call(this, c, o, k, i, j);
          }
          return this;
        }
        h.call(this, d, o, k, i, j);
      } else {
        if (Ext.isArray(d)) {
          e = d;
          for (a = 0, g = e.length; a < g; a++) {
            f = e[a];
            h.call(this, f.event, f.fn, f.scope, f, f.order);
          }
        } else {
          p = this.listenerOptionsRegex;
          i = d;
          l = [];
          e = [];
          m = {};
          for (c in i) {
            b = i[c];
            if (c === "scope") {
              k = b;
              continue;
            } else {
              if (c === "order") {
                j = b;
                continue;
              }
            }
            if (!p.test(c)) {
              n = typeof b;
              if (n != "string" && n != "function") {
                h.call(this, c, b.fn, b.scope || k, b, b.order || j);
                continue;
              }
              l.push(c);
              e.push(b);
            } else {
              m[c] = b;
            }
          }
          for (a = 0, g = l.length; a < g; a++) {
            h.call(this, l[a], e[a], k, m, j);
          }
        }
      }
      return this;
    },
    addListener: function (a, e, d, b, c) {
      return this.changeListener(this.doAddListener, a, e, d, b, c);
    },
    toggleListener: function (c, a, f, e, b, d) {
      return this.changeListener(
        c ? this.doAddListener : this.doRemoveListener,
        a,
        f,
        e,
        b,
        d
      );
    },
    addBeforeListener: function (a, d, c, b) {
      return this.addListener(a, d, c, b, "before");
    },
    addAfterListener: function (a, d, c, b) {
      return this.addListener(a, d, c, b, "after");
    },
    removeListener: function (a, e, d, b, c) {
      return this.changeListener(this.doRemoveListener, a, e, d, b, c);
    },
    removeBeforeListener: function (a, d, c, b) {
      return this.removeListener(a, d, c, b, "before");
    },
    removeAfterListener: function (a, d, c, b) {
      return this.removeListener(a, d, c, b, "after");
    },
    clearListeners: function () {
      var b = this.getUsedSelectors(),
        e = this.getEventDispatcher(),
        a,
        d,
        c;
      for (a = 0, d = b.length; a < d; a++) {
        c = b[a];
        e.clearListeners(this.observableType, c);
      }
    },
    hasListener: function (a) {
      return this.getEventDispatcher().hasListener(
        this.observableType,
        this.getObservableId(),
        a
      );
    },
    suspendEvents: function () {
      this.eventFiringSuspended = !0;
    },
    resumeEvents: function (e) {
      var a = this,
        c = a.eventQueue || [],
        b,
        d;
      a.eventFiringSuspended = !1;
      if (!e) {
        for (b = 0, d = c.length; b < d; b++) {
          a.doFireEvent.apply(a, c[b]);
        }
      }
      a.eventQueue = [];
    },
    relayEvents: function (f, a, d) {
      var e, g, b, c;
      if (typeof d == "undefined") {
        d = "";
      }
      if (typeof a == "string") {
        a = [a];
      }
      if (Ext.isArray(a)) {
        for (e = 0, g = a.length; e < g; e++) {
          b = a[e];
          c = d + b;
          f.addListener(b, this.createEventRelayer(c), this);
        }
      } else {
        for (b in a) {
          if (a.hasOwnProperty(b)) {
            c = d + a[b];
            f.addListener(b, this.createEventRelayer(c), this);
          }
        }
      }
      return this;
    },
    relayEvent: function (a, e, i, g, h) {
      var d = typeof e,
        b = a[a.length - 1],
        f = b.getInfo().eventName,
        c;
      a = Array.prototype.slice.call(a, 0, -2);
      a[0] = this;
      if (d != "undefined") {
        c = {
          fn: e,
          scope: i || this,
          options: g || {},
          order: h,
          isLateBinding: d == "string",
        };
      }
      return this.doFireEvent(f, a, c, b);
    },
    createEventRelayer: function (a) {
      return function () {
        return this.doFireEvent(
          a,
          Array.prototype.slice.call(arguments, 0, -2)
        );
      };
    },
    enableBubble: function (c) {
      var b = this.isBubblingEnabled,
        d,
        e,
        a;
      if (!b) {
        b = this.isBubblingEnabled = {};
      }
      if (typeof c == "string") {
        c = Ext.Array.clone(arguments);
      }
      for (d = 0, e = c.length; d < e; d++) {
        a = c[d];
        if (!b[a]) {
          b[a] = !0;
          this.addListener(a, this.createEventBubbler(a), this);
        }
      }
    },
    createEventBubbler: function (a) {
      return function doBubbleEvent() {
        var b = "getBubbleTarget" in this ? this.getBubbleTarget() : null;
        if (b && b !== this && b.isObservable) {
          b.fireAction(
            a,
            Array.prototype.slice.call(arguments, 0, -2),
            doBubbleEvent,
            b,
            null,
            "after"
          );
        }
      };
    },
    getBubbleTarget: function () {
      return !1;
    },
    destroy: function () {
      if (this.observableId) {
        this.fireEvent("destroy", this);
        this.clearListeners();
        this.clearManagedListeners();
      }
    },
    addEvents: Ext.emptyFn,
  },
  function () {
    this.createAlias({
      on: "addListener",
      un: "removeListener",
      onBefore: "addBeforeListener",
      onAfter: "addAfterListener",
      unBefore: "removeBeforeListener",
      unAfter: "removeAfterListener",
    });
  }
);
Ext.define("Ext.Evented", {
  alternateClassName: "Ext.EventedBase",
  mixins: [Ext.mixin.Observable],
  statics: {
    generateSetter: function (a) {
      var b = a.internal,
        e = a.apply,
        d = a.changeEvent,
        c = a.doSet;
      return function (f) {
        var i = this.initialized,
          g = this[b],
          h = this[e];
        if (h) {
          f = h.call(this, f, g);
          if (typeof f == "undefined") {
            return this;
          }
        }
        g = this[b];
        if (f !== g) {
          if (i) {
            this.fireAction(d, [this, f, g], this.doSet, this, { nameMap: a });
          } else {
            this[b] = f;
            if (this[c]) {
              this[c].call(this, f, g);
            }
          }
        }
        return this;
      };
    },
  },
  initialized: !1,
  constructor: function (a) {
    this.initialConfig = a;
    this.initialize();
  },
  initialize: function () {
    this.initConfig(this.initialConfig);
    this.initialized = !0;
  },
  doSet: function (b, c, d, e) {
    var a = e.nameMap;
    b[a.internal] = c;
    if (b[a.doSet]) {
      b[a.doSet].call(this, c, d);
    }
  },
  onClassExtended: function (g, a) {
    if (!a.hasOwnProperty("eventedConfig")) {
      return;
    }
    var f = Ext.Class,
      e = a.config,
      b = a.eventedConfig,
      d,
      c;
    a.config = e ? Ext.applyIf(e, b) : b;
    for (d in b) {
      if (b.hasOwnProperty(d)) {
        c = f.getConfigNameMap(d);
        a[c.set] = this.generateSetter(c);
      }
    }
  },
});
Ext.define("Ext.AbstractComponent", {
  extend: Ext.Evented,
  onClassExtended: function (i, c) {
    if (!c.hasOwnProperty("cachedConfig")) {
      return;
    }
    var e = i.prototype,
      g = c.config,
      f = c.cachedConfig,
      d = e.cachedConfigList,
      b = e.hasCachedConfig,
      a,
      h;
    delete c.cachedConfig;
    e.cachedConfigList = d = d ? d.slice() : [];
    e.hasCachedConfig = b = b ? Ext.Object.chain(b) : {};
    if (!g) {
      c.config = g = {};
    }
    for (a in f) {
      if (f.hasOwnProperty(a)) {
        h = f[a];
        if (!b[a]) {
          b[a] = !0;
          d.push(a);
        }
        g[a] = h;
      }
    }
  },
  getElementConfig: Ext.emptyFn,
  referenceAttributeName: "reference",
  referenceSelector: "[reference]",
  addReferenceNode: function (a, b) {
    Ext.Object.defineProperty(this, a, {
      get: function () {
        var c;
        delete this[a];
        this[a] = c = new Ext.Element(b);
        return c;
      },
      configurable: !0,
    });
  },
  initElement: function () {
    var r = this.self.prototype,
      x = this.getId(),
      j = [],
      v = !0,
      t = this.referenceAttributeName,
      u = !1,
      d,
      e,
      i,
      o,
      a,
      c,
      g,
      h,
      n,
      p,
      m,
      w,
      q,
      l,
      s,
      b,
      f,
      k;
    if (r.hasOwnProperty("renderTemplate")) {
      d = this.renderTemplate.cloneNode(!0);
      e = d.firstChild;
    } else {
      v = !1;
      u = !0;
      d = document.createDocumentFragment();
      e = Ext.Element.create(this.getElementConfig(), !0);
      d.appendChild(e);
    }
    o = d.querySelectorAll(this.referenceSelector);
    for (a = 0, c = o.length; a < c; a++) {
      g = o[a];
      h = g.getAttribute(t);
      if (v) {
        g.removeAttribute(t);
      }
      if (h == "element") {
        g.id = x;
        this.element = i = new Ext.Element(g);
      } else {
        this.addReferenceNode(h, g);
      }
      j.push(h);
    }
    this.referenceList = j;
    if (!this.innerElement) {
      this.innerElement = i;
    }
    if (!this.bodyElement) {
      this.bodyElement = this.innerElement;
    }
    if (e === i.dom) {
      this.renderElement = i;
    } else {
      this.addReferenceNode("renderElement", e);
    }
    if (u) {
      n = Ext.Class.configNameCache;
      p = this.config;
      m = this.cachedConfigList;
      w = this.initConfigList;
      q = this.initConfigMap;
      l = [];
      for (a = 0, c = m.length; a < c; a++) {
        b = m[a];
        f = n[b];
        if (q[b]) {
          q[b] = !1;
          Ext.Array.remove(w, b);
        }
        if (p[b] !== null) {
          l.push(b);
          this[f.get] = this[f.initGet];
        }
      }
      for (a = 0, c = l.length; a < c; a++) {
        b = l[a];
        f = n[b];
        k = f.internal;
        this[k] = null;
        this[f.set].call(this, p[b]);
        delete this[f.get];
        r[k] = this[k];
      }
      e = this.renderElement.dom;
      r.renderTemplate = d = document.createDocumentFragment();
      d.appendChild(e.cloneNode(!0));
      s = d.querySelectorAll("[id]");
      for (a = 0, c = s.length; a < c; a++) {
        i = s[a];
        i.removeAttribute("id");
      }
      for (a = 0, c = j.length; a < c; a++) {
        h = j[a];
        this[h].dom.removeAttribute("reference");
      }
    }
    return this;
  },
});
Ext.define("Ext.util.HashMap", {
  mixins: { observable: Ext.mixin.Observable },
  constructor: function (a) {
    this.callParent();
    this.mixins.observable.constructor.call(this);
    this.clear(!0);
  },
  getCount: function () {
    return this.length;
  },
  getData: function (b, a) {
    if (a === undefined) {
      a = b;
      b = this.getKey(a);
    }
    return [b, a];
  },
  getKey: function (a) {
    return a.id;
  },
  add: function (b, a) {
    var c = this,
      d;
    if (c.containsKey(b)) {
      throw new Error("This key already exists in the HashMap");
    }
    d = this.getData(b, a);
    b = d[0];
    a = d[1];
    c.map[b] = a;
    ++c.length;
    c.fireEvent("add", c, b, a);
    return a;
  },
  replace: function (a, c) {
    var b = this,
      d = b.map,
      e;
    if (!b.containsKey(a)) {
      b.add(a, c);
    }
    e = d[a];
    d[a] = c;
    b.fireEvent("replace", b, a, c, e);
    return c;
  },
  remove: function (b) {
    var a = this.findKey(b);
    if (a !== undefined) {
      return this.removeByKey(a);
    }
    return !1;
  },
  removeByKey: function (b) {
    var a = this,
      c;
    if (a.containsKey(b)) {
      c = a.map[b];
      delete a.map[b];
      --a.length;
      a.fireEvent("remove", a, b, c);
      return !0;
    }
    return !1;
  },
  get: function (a) {
    return this.map[a];
  },
  clear: function (b) {
    var a = this;
    a.map = {};
    a.length = 0;
    if (b !== !0) {
      a.fireEvent("clear", a);
    }
    return a;
  },
  containsKey: function (a) {
    return this.map[a] !== undefined;
  },
  contains: function (a) {
    return this.containsKey(this.findKey(a));
  },
  getKeys: function () {
    return this.getArray(!0);
  },
  getValues: function () {
    return this.getArray(!1);
  },
  getArray: function (d) {
    var c = [],
      a,
      b = this.map;
    for (a in b) {
      if (b.hasOwnProperty(a)) {
        c.push(d ? a : b[a]);
      }
    }
    return c;
  },
  each: function (e, c) {
    var b = Ext.apply({}, this.map),
      a,
      d = this.length;
    c = c || this;
    for (a in b) {
      if (b.hasOwnProperty(a)) {
        if (e.call(c, a, b[a], d) === !1) {
          break;
        }
      }
    }
    return this;
  },
  clone: function () {
    var a = new Ext.util.HashMap(),
      c = this.map,
      b;
    a.suspendEvents();
    for (b in c) {
      if (c.hasOwnProperty(b)) {
        a.add(b, c[b]);
      }
    }
    a.resumeEvents();
    return a;
  },
  findKey: function (c) {
    var a,
      b = this.map;
    for (a in b) {
      if (b.hasOwnProperty(a) && b[a] === c) {
        return a;
      }
    }
    return undefined;
  },
});
Ext.define("Ext.AbstractManager", {
  typeName: "type",
  constructor: function (a) {
    Ext.apply(this, a || {});
    this.all = Ext.create("Ext.util.HashMap");
    this.types = {};
  },
  get: function (a) {
    return this.all.get(a);
  },
  register: function (a) {
    this.all.add(a);
  },
  unregister: function (a) {
    this.all.remove(a);
  },
  registerType: function (a, b) {
    this.types[a] = b;
    b[this.typeName] = a;
  },
  isRegistered: function (a) {
    return this.types[a] !== undefined;
  },
  create: function (a, c) {
    var d = a[this.typeName] || a.type || c,
      b = this.types[d];
    return new b(a);
  },
  onAvailable: function (e, d, b) {
    var a = this.all,
      c;
    if (a.containsKey(e)) {
      c = a.get(e);
      d.call(b || c, c);
    } else {
      a.on("add", function (g, f, c) {
        if (f == e) {
          d.call(b || c, c);
          a.un("add", d, b);
        }
      });
    }
  },
  each: function (b, a) {
    this.all.each(b, a || this);
  },
  getCount: function () {
    return this.all.getCount();
  },
});
Ext.define("Ext.mixin.Traversable", {
  extend: Ext.mixin.Mixin,
  mixinConfig: { id: "traversable" },
  setParent: function (a) {
    this.parent = a;
    return this;
  },
  hasParent: function () {
    return Boolean(this.parent);
  },
  getParent: function () {
    return this.parent;
  },
  getAncestors: function () {
    var b = [],
      a = this.getParent();
    while (a) {
      b.push(a);
      a = a.getParent();
    }
    return b;
  },
  getAncestorIds: function () {
    var b = [],
      a = this.getParent();
    while (a) {
      b.push(a.getId());
      a = a.getParent();
    }
    return b;
  },
});
Ext.define("Ext.ComponentManager", {
  alternateClassName: "Ext.ComponentMgr",
  singleton: !0,
  constructor: function () {
    var a = {};
    this.all = {
      map: a,
      getArray: function () {
        var c = [],
          b;
        for (b in a) {
          if (a.hasOwnProperty(b)) {
            c.push(a[b]);
          }
        }
        return c;
      },
    };
    this.map = a;
  },
  register: function (a) {
    var b = a.getId();
    this.map[a.getId()] = a;
  },
  unregister: function (a) {
    delete this.map[a.getId()];
  },
  isRegistered: function (a) {
    return this.map[a] !== undefined;
  },
  get: function (a) {
    return this.map[a];
  },
  create: function (a, b) {
    if (a.isComponent) {
      return a;
    } else {
      if (Ext.isString(a)) {
        return Ext.createByAlias("widget." + a);
      } else {
        var c = a.xtype || b;
        return Ext.createByAlias("widget." + c, a);
      }
    }
  },
  registerType: Ext.emptyFn,
});
(function () {
  function xf(a) {
    var b = Array.prototype.slice.call(arguments, 1);
    return a.replace(/\{(\d+)\}/g, function (d, c) {
      return b[c];
    });
  }
  Ext.DateExtras = {
    now:
      Date.now ||
      function () {
        return +new Date();
      },
    getElapsed: function (a, b) {
      return Math.abs(a - (b || new Date()));
    },
    useStrict: !1,
    formatCodeToRegex: function (c, d) {
      var b = a.parseCodes[c];
      if (b) {
        b = typeof b == "function" ? b() : b;
        a.parseCodes[c] = b;
      }
      return b
        ? Ext.applyIf({ c: b.c ? xf(b.c, d || "{0}") : b.c }, b)
        : { g: 0, c: null, s: Ext.String.escapeRegex(c) };
    },
    parseFunctions: {
      MS: function (b, d) {
        var c = new RegExp(
          "\\\\?/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\\\?/"
        );
        var a = (b || "").match(c);
        return a ? new Date(((a[1] || "") + a[2]) * 1) : null;
      },
    },
    parseRegexes: [],
    formatFunctions: {
      MS: function () {
        return "\\/Date(" + this.getTime() + ")\\/";
      },
    },
    y2kYear: 50,
    MILLI: "ms",
    SECOND: "s",
    MINUTE: "mi",
    HOUR: "h",
    DAY: "d",
    MONTH: "mo",
    YEAR: "y",
    defaults: {},
    dayNames: [
      "Sunday",
      "Monday",
      "Tuesday",
      "Wednesday",
      "Thursday",
      "Friday",
      "Saturday",
    ],
    monthNames: [
      "January",
      "February",
      "March",
      "April",
      "May",
      "June",
      "July",
      "August",
      "September",
      "October",
      "November",
      "December",
    ],
    monthNumbers: {
      Jan: 0,
      Feb: 1,
      Mar: 2,
      Apr: 3,
      May: 4,
      Jun: 5,
      Jul: 6,
      Aug: 7,
      Sep: 8,
      Oct: 9,
      Nov: 10,
      Dec: 11,
    },
    defaultFormat: "m/d/Y",
    getShortMonthName: function (b) {
      return a.monthNames[b].substring(0, 3);
    },
    getShortDayName: function (b) {
      return a.dayNames[b].substring(0, 3);
    },
    getMonthNumber: function (b) {
      return a.monthNumbers[
        b.substring(0, 1).toUpperCase() + b.substring(1, 3).toLowerCase()
      ];
    },
    formatCodes: {
      d: "Ext.String.leftPad(this.getDate(), 2, '0')",
      D: "Ext.Date.getShortDayName(this.getDay())",
      j: "this.getDate()",
      l: "Ext.Date.dayNames[this.getDay()]",
      N: "(this.getDay() ? this.getDay() : 7)",
      S: "Ext.Date.getSuffix(this)",
      w: "this.getDay()",
      z: "Ext.Date.getDayOfYear(this)",
      W: "Ext.String.leftPad(Ext.Date.getWeekOfYear(this), 2, '0')",
      F: "Ext.Date.monthNames[this.getMonth()]",
      m: "Ext.String.leftPad(this.getMonth() + 1, 2, '0')",
      M: "Ext.Date.getShortMonthName(this.getMonth())",
      n: "(this.getMonth() + 1)",
      t: "Ext.Date.getDaysInMonth(this)",
      L: "(Ext.Date.isLeapYear(this) ? 1 : 0)",
      o: "(this.getFullYear() + (Ext.Date.getWeekOfYear(this) == 1 && this.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(this) >= 52 && this.getMonth() < 11 ? -1 : 0)))",
      Y: "Ext.String.leftPad(this.getFullYear(), 4, '0')",
      y: "('' + this.getFullYear()).substring(2, 4)",
      a: "(this.getHours() < 12 ? 'am' : 'pm')",
      A: "(this.getHours() < 12 ? 'AM' : 'PM')",
      g: "((this.getHours() % 12) ? this.getHours() % 12 : 12)",
      G: "this.getHours()",
      h: "Ext.String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",
      H: "Ext.String.leftPad(this.getHours(), 2, '0')",
      i: "Ext.String.leftPad(this.getMinutes(), 2, '0')",
      s: "Ext.String.leftPad(this.getSeconds(), 2, '0')",
      u: "Ext.String.leftPad(this.getMilliseconds(), 3, '0')",
      O: "Ext.Date.getGMTOffset(this)",
      P: "Ext.Date.getGMTOffset(this, true)",
      T: "Ext.Date.getTimezone(this)",
      Z: "(this.getTimezoneOffset() * -60)",
      c: function () {
        for (var d = "Y-m-dTH:i:sP", c = [], b = 0, f = d.length; b < f; ++b) {
          var e = d.charAt(b);
          c.push(e == "T" ? "'T'" : a.getFormatCode(e));
        }
        return c.join(" + ");
      },
      U: "Math.round(this.getTime() / 1000)",
    },
    isValid: function (c, i, h, e, f, g, d) {
      e = e || 0;
      f = f || 0;
      g = g || 0;
      d = d || 0;
      var b = a.add(
        new Date(c < 100 ? 100 : c, i - 1, h, e, f, g, d),
        a.YEAR,
        c < 100 ? c - 100 : 0
      );
      return (
        c == b.getFullYear() &&
        i == b.getMonth() + 1 &&
        h == b.getDate() &&
        e == b.getHours() &&
        f == b.getMinutes() &&
        g == b.getSeconds() &&
        d == b.getMilliseconds()
      );
    },
    parse: function (e, b, c) {
      var d = a.parseFunctions;
      if (d[b] == null) {
        a.createParser(b);
      }
      return d[b](e, Ext.isDefined(c) ? c : a.useStrict);
    },
    parseDate: function (d, b, c) {
      return a.parse(d, b, c);
    },
    getFormatCode: function (c) {
      var b = a.formatCodes[c];
      if (b) {
        b = typeof b == "function" ? b() : b;
        a.formatCodes[c] = b;
      }
      return b || "'" + Ext.String.escape(c) + "'";
    },
    createFormat: function (e) {
      var d = [],
        c = !1,
        b = "";
      for (var f = 0; f < e.length; ++f) {
        b = e.charAt(f);
        if (!c && b == "\\") {
          c = !0;
        } else {
          if (c) {
            c = !1;
            d.push("'" + Ext.String.escape(b) + "'");
          } else {
            if (b == "\n") {
              d.push(Ext.JSON.encode(b));
            } else {
              d.push(a.getFormatCode(b));
            }
          }
        }
      }
      a.formatFunctions[e] = Ext.functionFactory("return " + d.join("+"));
    },
    createParser: (function () {
      var b = [
        "var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,",
        "def = Ext.Date.defaults,",
        "results = String(input).match(Ext.Date.parseRegexes[{0}]);",
        "if(results){",
        "{1}",
        "if(u != null){",
        "v = new Date(u * 1000);",
        "}else{",
        "dt = Ext.Date.clearTime(new Date);",
        "y = Ext.Number.from(y, Ext.Number.from(def.y, dt.getFullYear()));",
        "m = Ext.Number.from(m, Ext.Number.from(def.m - 1, dt.getMonth()));",
        "d = Ext.Number.from(d, Ext.Number.from(def.d, dt.getDate()));",
        "h  = Ext.Number.from(h, Ext.Number.from(def.h, dt.getHours()));",
        "i  = Ext.Number.from(i, Ext.Number.from(def.i, dt.getMinutes()));",
        "s  = Ext.Number.from(s, Ext.Number.from(def.s, dt.getSeconds()));",
        "ms = Ext.Number.from(ms, Ext.Number.from(def.ms, dt.getMilliseconds()));",
        "if(z >= 0 && y >= 0){",
        "v = Ext.Date.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);",
        "v = !strict? v : (strict === true && (z <= 364 || (Ext.Date.isLeapYear(v) && z <= 365))? Ext.Date.add(v, Ext.Date.DAY, z) : null);",
        "}else if(strict === true && !Ext.Date.isValid(y, m + 1, d, h, i, s, ms)){",
        "v = null;",
        "}else{",
        "v = Ext.Date.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), Ext.Date.YEAR, y < 100 ? y - 100 : 0);",
        "}",
        "}",
        "}",
        "if(v){",
        "if(zz != null){",
        "v = Ext.Date.add(v, Ext.Date.SECOND, -v.getTimezoneOffset() * 60 - zz);",
        "}else if(o){",
        "v = Ext.Date.add(v, Ext.Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));",
        "}",
        "}",
        "return v;",
      ].join("\n");
      return function (f) {
        var j = a.parseRegexes.length,
          i = 1,
          k = [],
          g = [],
          d = !1,
          e = "";
        for (var h = 0; h < f.length; ++h) {
          e = f.charAt(h);
          if (!d && e == "\\") {
            d = !0;
          } else {
            if (d) {
              d = !1;
              g.push(Ext.String.escape(e));
            } else {
              var c = a.formatCodeToRegex(e, i);
              i += c.g;
              g.push(c.s);
              if (c.g && c.c) {
                k.push(c.c);
              }
            }
          }
        }
        a.parseRegexes[j] = new RegExp("^" + g.join("") + "$", "i");
        a.parseFunctions[f] = Ext.functionFactory(
          "input",
          "strict",
          xf(b, j, k.join(""))
        );
      };
    })(),
    parseCodes: {
      d: { g: 1, c: "d = parseInt(results[{0}], 10);\n", s: "(\\d{2})" },
      j: { g: 1, c: "d = parseInt(results[{0}], 10);\n", s: "(\\d{1,2})" },
      D: function () {
        for (var c = [], b = 0; b < 7; c.push(a.getShortDayName(b)), ++b) {}
        return { g: 0, c: null, s: "(?:" + c.join("|") + ")" };
      },
      l: function () {
        return { g: 0, c: null, s: "(?:" + a.dayNames.join("|") + ")" };
      },
      N: { g: 0, c: null, s: "[1-7]" },
      S: { g: 0, c: null, s: "(?:st|nd|rd|th)" },
      w: { g: 0, c: null, s: "[0-6]" },
      z: { g: 1, c: "z = parseInt(results[{0}], 10);\n", s: "(\\d{1,3})" },
      W: { g: 0, c: null, s: "(?:\\d{2})" },
      F: function () {
        return {
          g: 1,
          c: "m = parseInt(Ext.Date.getMonthNumber(results[{0}]), 10);\n",
          s: "(" + a.monthNames.join("|") + ")",
        };
      },
      M: function () {
        for (var c = [], b = 0; b < 12; c.push(a.getShortMonthName(b)), ++b) {}
        return Ext.applyIf(
          { s: "(" + c.join("|") + ")" },
          a.formatCodeToRegex("F")
        );
      },
      m: { g: 1, c: "m = parseInt(results[{0}], 10) - 1;\n", s: "(\\d{2})" },
      n: { g: 1, c: "m = parseInt(results[{0}], 10) - 1;\n", s: "(\\d{1,2})" },
      t: { g: 0, c: null, s: "(?:\\d{2})" },
      L: { g: 0, c: null, s: "(?:1|0)" },
      o: function () {
        return a.formatCodeToRegex("Y");
      },
      Y: { g: 1, c: "y = parseInt(results[{0}], 10);\n", s: "(\\d{4})" },
      y: {
        g: 1,
        c:
          "var ty = parseInt(results[{0}], 10);\n" +
          "y = ty > Ext.Date.y2kYear ? 1900 + ty : 2000 + ty;\n",
        s: "(\\d{1,2})",
      },
      a: {
        g: 1,
        c:
          "if (/(am)/i.test(results[{0}])) {\n" +
          "if (!h || h == 12) { h = 0; }\n" +
          "} else { if (!h || h < 12) { h = (h || 0) + 12; }}",
        s: "(am|pm|AM|PM)",
      },
      A: {
        g: 1,
        c:
          "if (/(am)/i.test(results[{0}])) {\n" +
          "if (!h || h == 12) { h = 0; }\n" +
          "} else { if (!h || h < 12) { h = (h || 0) + 12; }}",
        s: "(AM|PM|am|pm)",
      },
      g: function () {
        return a.formatCodeToRegex("G");
      },
      G: { g: 1, c: "h = parseInt(results[{0}], 10);\n", s: "(\\d{1,2})" },
      h: function () {
        return a.formatCodeToRegex("H");
      },
      H: { g: 1, c: "h = parseInt(results[{0}], 10);\n", s: "(\\d{2})" },
      i: { g: 1, c: "i = parseInt(results[{0}], 10);\n", s: "(\\d{2})" },
      s: { g: 1, c: "s = parseInt(results[{0}], 10);\n", s: "(\\d{2})" },
      u: {
        g: 1,
        c: "ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",
        s: "(\\d+)",
      },
      O: {
        g: 1,
        c: [
          "o = results[{0}];",
          "var sn = o.substring(0,1),",
          "hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),",
          "mn = o.substring(3,5) % 60;",
          "o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n",
        ].join("\n"),
        s: "([+-]\\d{4})",
      },
      P: {
        g: 1,
        c: [
          "o = results[{0}];",
          "var sn = o.substring(0,1),",
          "hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),",
          "mn = o.substring(4,6) % 60;",
          "o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\n",
        ].join("\n"),
        s: "([+-]\\d{2}:\\d{2})",
      },
      T: { g: 0, c: null, s: "[A-Z]{1,4}" },
      Z: {
        g: 1,
        c:
          "zz = results[{0}] * 1;\n" +
          "zz = (-43200 <= zz && zz <= 50400)? zz : null;\n",
        s: "([+-]?\\d{1,5})",
      },
      c: function () {
        var d = [],
          b = [
            a.formatCodeToRegex("Y", 1),
            a.formatCodeToRegex("m", 2),
            a.formatCodeToRegex("d", 3),
            a.formatCodeToRegex("h", 4),
            a.formatCodeToRegex("i", 5),
            a.formatCodeToRegex("s", 6),
            {
              c: "ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",
            },
            {
              c: [
                "if(results[8]) {",
                "if(results[8] == 'Z'){",
                "zz = 0;",
                "}else if (results[8].indexOf(':') > -1){",
                a.formatCodeToRegex("P", 8).c,
                "}else{",
                a.formatCodeToRegex("O", 8).c,
                "}",
                "}",
              ].join("\n"),
            },
          ];
        for (var c = 0, e = b.length; c < e; ++c) {
          d.push(b[c].c);
        }
        return {
          g: 1,
          c: d.join(""),
          s: [
            b[0].s,
            "(?:",
            "-",
            b[1].s,
            "(?:",
            "-",
            b[2].s,
            "(?:",
            "(?:T| )?",
            b[3].s,
            ":",
            b[4].s,
            "(?::",
            b[5].s,
            ")?",
            "(?:(?:\\.|,)(\\d+))?",
            "(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",
            ")?",
            ")?",
            ")?",
          ].join(""),
        };
      },
      U: { g: 1, c: "u = parseInt(results[{0}], 10);\n", s: "(-?\\d+)" },
    },
    dateFormat: function (c, b) {
      return a.format(c, b);
    },
    format: function (d, b) {
      if (a.formatFunctions[b] == null) {
        a.createFormat(b);
      }
      var c = a.formatFunctions[b].call(d);
      return c + "";
    },
    getTimezone: function (a) {
      return a
        .toString()
        .replace(
          /^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,
          "$1$2"
        )
        .replace(/[^A-Z]/g, "");
    },
    getGMTOffset: function (c, b) {
      var a = c.getTimezoneOffset();
      return (
        (a > 0 ? "-" : "+") +
        Ext.String.leftPad(Math.floor(Math.abs(a) / 60), 2, "0") +
        (b ? ":" : "") +
        Ext.String.leftPad(Math.abs(a % 60), 2, "0")
      );
    },
    getDayOfYear: function (c) {
      var e = 0,
        b = Ext.Date.clone(c),
        f = c.getMonth(),
        d;
      for (d = 0, b.setDate(1), b.setMonth(0); d < f; b.setMonth(++d)) {
        e += a.getDaysInMonth(b);
      }
      return e + c.getDate() - 1;
    },
    getWeekOfYear: (function () {
      var a = 86400000,
        b = 7 * a;
      return function (c) {
        var e = Date.UTC(c.getFullYear(), c.getMonth(), c.getDate() + 3) / a,
          d = Math.floor(e / 7),
          f = new Date(d * b).getUTCFullYear();
        return d - Math.floor(Date.UTC(f, 0, 7) / b) + 1;
      };
    })(),
    isLeapYear: function (b) {
      var a = b.getFullYear();
      return !!((a & 3) == 0 && (a % 100 || (a % 400 == 0 && a)));
    },
    getFirstDayOfMonth: function (b) {
      var a = (b.getDay() - (b.getDate() - 1)) % 7;
      return a < 0 ? a + 7 : a;
    },
    getLastDayOfMonth: function (b) {
      return a.getLastDateOfMonth(b).getDay();
    },
    getFirstDateOfMonth: function (a) {
      return new Date(a.getFullYear(), a.getMonth(), 1);
    },
    getLastDateOfMonth: function (b) {
      return new Date(b.getFullYear(), b.getMonth(), a.getDaysInMonth(b));
    },
    getDaysInMonth: (function () {
      var b = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
      return function (c) {
        var d = c.getMonth();
        return d == 1 && a.isLeapYear(c) ? 29 : b[d];
      };
    })(),
    getSuffix: function (a) {
      switch (a.getDate()) {
        case 1:
        case 21:
        case 31:
          return "st";
        case 2:
        case 22:
          return "nd";
        case 3:
        case 23:
          return "rd";
        default:
          return "th";
      }
    },
    clone: function (a) {
      return new Date(a.getTime());
    },
    isDST: function (a) {
      return (
        new Date(a.getFullYear(), 0, 1).getTimezoneOffset() !=
        a.getTimezoneOffset()
      );
    },
    clearTime: function (b, f) {
      if (f) {
        return Ext.Date.clearTime(Ext.Date.clone(b));
      }
      var e = b.getDate();
      b.setHours(0);
      b.setMinutes(0);
      b.setSeconds(0);
      b.setMilliseconds(0);
      if (b.getDate() != e) {
        for (
          var c = 1, d = a.add(b, Ext.Date.HOUR, c);
          d.getDate() != e;
          c++, d = a.add(b, Ext.Date.HOUR, c)
        ) {}
        b.setDate(e);
        b.setHours(d.getHours());
      }
      return b;
    },
    add: function (c, e, b) {
      var a = Ext.Date.clone(c);
      if (!e || b === 0) {
        return a;
      }
      switch (e.toLowerCase()) {
        case Ext.Date.MILLI:
          a = new Date(a.valueOf() + b);
          break;
        case Ext.Date.SECOND:
          a = new Date(a.valueOf() + b * 1000);
          break;
        case Ext.Date.MINUTE:
          a = new Date(a.valueOf() + b * 60000);
          break;
        case Ext.Date.HOUR:
          a = new Date(a.valueOf() + b * 3600000);
          break;
        case Ext.Date.DAY:
          a = new Date(a.valueOf() + b * 86400000);
          break;
        case Ext.Date.MONTH:
          var d = c.getDate();
          if (d > 28) {
            d = Math.min(
              d,
              Ext.Date.getLastDateOfMonth(
                Ext.Date.add(Ext.Date.getFirstDateOfMonth(c), "mo", b)
              ).getDate()
            );
          }
          a.setDate(d);
          a.setMonth(c.getMonth() + b);
          break;
        case Ext.Date.YEAR:
          a.setFullYear(c.getFullYear() + b);
          break;
      }
      return a;
    },
    between: function (c, b, d) {
      var a = c.getTime();
      return b.getTime() <= a && a <= d.getTime();
    },
    diff: function (e, d, f) {
      var b = Ext.Date,
        a,
        c = +d - e;
      switch (f) {
        case b.MILLI:
          return c;
        case b.SECOND:
          return Math.floor(c / 1000);
        case b.MINUTE:
          return Math.floor(c / 60000);
        case b.HOUR:
          return Math.floor(c / 3600000);
        case b.DAY:
          return Math.floor(c / 86400000);
        case "w":
          return Math.floor(c / 604800000);
        case b.MONTH:
          a =
            d.getFullYear() * 12 +
            d.getMonth() -
            (e.getFullYear() * 12 + e.getMonth());
          if (Ext.Date.add(e, f, a) > d) {
            return a - 1;
          } else {
            return a;
          }
        case b.YEAR:
          a = d.getFullYear() - e.getFullYear();
          if (Ext.Date.add(e, f, a) > d) {
            return a - 1;
          } else {
            return a;
          }
      }
    },
    align: function (c, d, b) {
      var a = new Date(+c);
      switch (d.toLowerCase()) {
        case Ext.Date.MILLI:
          return a;
          break;
        case Ext.Date.SECOND:
          a.setUTCSeconds(a.getUTCSeconds() - (a.getUTCSeconds() % b));
          a.setUTCMilliseconds(0);
          return a;
          break;
        case Ext.Date.MINUTE:
          a.setUTCMinutes(a.getUTCMinutes() - (a.getUTCMinutes() % b));
          a.setUTCSeconds(0);
          a.setUTCMilliseconds(0);
          return a;
          break;
        case Ext.Date.HOUR:
          a.setUTCHours(a.getUTCHours() - (a.getUTCHours() % b));
          a.setUTCMinutes(0);
          a.setUTCSeconds(0);
          a.setUTCMilliseconds(0);
          return a;
          break;
        case Ext.Date.DAY:
          if (b == 7 || b == 14) {
            a.setUTCDate(a.getUTCDate() - a.getUTCDay() + 1);
          }
          a.setUTCHours(0);
          a.setUTCMinutes(0);
          a.setUTCSeconds(0);
          a.setUTCMilliseconds(0);
          return a;
          break;
        case Ext.Date.MONTH:
          a.setUTCMonth(a.getUTCMonth() - ((a.getUTCMonth() - 1) % b), 1);
          a.setUTCHours(0);
          a.setUTCMinutes(0);
          a.setUTCSeconds(0);
          a.setUTCMilliseconds(0);
          return a;
          break;
        case Ext.Date.YEAR:
          a.setUTCFullYear(a.getUTCFullYear() - (a.getUTCFullYear() % b), 1, 1);
          a.setUTCHours(0);
          a.setUTCMinutes(0);
          a.setUTCSeconds(0);
          a.setUTCMilliseconds(0);
          return c;
          break;
      }
    },
  };
  var a = Ext.DateExtras;
  Ext.apply(Ext.Date, a);
})();
Ext.define("Ext.util.Format", {
  singleton: !0,
  defaultDateFormat: "m/d/Y",
  escapeRe: /('|\\)/g,
  trimRe:
    /^[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+|[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u2028\u2029\u202f\u205f\u3000]+$/g,
  formatRe: /\{(\d+)\}/g,
  escapeRegexRe: /([-.*+?^${}()|[\]\/\\])/g,
  dashesRe: /-/g,
  iso8601TestRe: /\d\dT\d\d/,
  iso8601SplitRe: /[- :T\.Z\+]/,
  ellipsis: function (a, c, e) {
    if (a && a.length > c) {
      if (e) {
        var b = a.substr(0, c - 2),
          d = Math.max(
            b.lastIndexOf(" "),
            b.lastIndexOf("."),
            b.lastIndexOf("!"),
            b.lastIndexOf("?")
          );
        if (d != -1 && d >= c - 15) {
          return b.substr(0, d) + "...";
        }
      }
      return a.substr(0, c - 3) + "...";
    }
    return a;
  },
  escapeRegex: function (a) {
    return a.replace(Ext.util.Format.escapeRegexRe, "\\$1");
  },
  escape: function (a) {
    return a.replace(Ext.util.Format.escapeRe, "\\$1");
  },
  toggle: function (b, a, c) {
    return b == a ? c : a;
  },
  trim: function (a) {
    return a.replace(Ext.util.Format.trimRe, "");
  },
  leftPad: function (d, c, b) {
    var a = String(d);
    b = b || " ";
    while (a.length < c) {
      a = b + a;
    }
    return a;
  },
  format: function (a) {
    var b = Ext.toArray(arguments, 1);
    return a.replace(Ext.util.Format.formatRe, function (d, c) {
      return b[c];
    });
  },
  htmlEncode: function (a) {
    return !a
      ? a
      : String(a)
          .replace(/&/g, "&amp;")
          .replace(/>/g, "&gt;")
          .replace(/</g, "&lt;")
          .replace(/"/g, "&quot;");
  },
  htmlDecode: function (a) {
    return !a
      ? a
      : String(a)
          .replace(/&gt;/g, ">")
          .replace(/&lt;/g, "<")
          .replace(/&quot;/g, '"')
          .replace(/&amp;/g, "&");
  },
  date: function (c, h) {
    var b = c;
    if (!c) {
      return "";
    }
    if (!Ext.isDate(c)) {
      b = new Date(Date.parse(c));
      if (isNaN(b)) {
        if (this.iso8601TestRe.test(c)) {
          if (Ext.os.is.Android && Ext.os.version.isLessThan("3.0")) {
            var g = [1, 4, 5, 6, 7, 10, 11];
            var a,
              d = 0;
            if (
              (a =
                /^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(
                  c
                ))
            ) {
              for (var f = 0, e; (e = g[f]); ++f) {
                a[e] = +a[e] || 0;
              }
              a[2] = (+a[2] || 1) - 1;
              a[3] = +a[3] || 1;
              if (a[8] !== "Z" && a[9] !== undefined) {
                d = a[10] * 60 + a[11];
                if (a[9] === "+") {
                  d = 0 - d;
                }
              }
              b = new Date(
                Date.UTC(a[1], a[2], a[3], a[4], a[5] + d, a[6], a[7])
              );
            }
          } else {
            b = c.split(this.iso8601SplitRe);
            b = new Date(b[0], b[1] - 1, b[2], b[3], b[4], b[5]);
          }
        }
      }
      if (isNaN(b)) {
        b = new Date(Date.parse(c.replace(this.dashesRe, "/")));
      }
      c = b;
    }
    return Ext.Date.format(c, h || Ext.util.Format.defaultDateFormat);
  },
});
Ext.define("Ext.Template", {
  inheritableStatics: {
    from: function (a, b) {
      a = Ext.getDom(a);
      return new this(a.value || a.innerHTML, b || "");
    },
  },
  constructor: function (f) {
    var a = this,
      d = arguments,
      e = [],
      g = 0,
      c = d.length,
      b;
    a.initialConfig = {};
    if (c === 1 && Ext.isArray(f)) {
      d = f;
      c = d.length;
    }
    if (c > 1) {
      for (; g < c; g++) {
        b = d[g];
        if (typeof b == "object") {
          Ext.apply(a.initialConfig, b);
          Ext.apply(a, b);
        } else {
          e.push(b);
        }
      }
    } else {
      e.push(f);
    }
    a.html = e.join("");
    if (a.compiled) {
      a.compile();
    }
  },
  isTemplate: !0,
  disableFormats: !1,
  re: /\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,
  apply: function (b) {
    var a = this,
      f = a.disableFormats !== !0,
      e = Ext.util.Format,
      d = a,
      c;
    if (a.compiled) {
      return a.compiled(b).join("");
    }
    function fn(h, g, c, a) {
      if (c && f) {
        if (a) {
          a = [b[g]].concat(Ext.functionFactory("return [" + a + "];")());
        } else {
          a = [b[g]];
        }
        if (c.substr(0, 5) == "this.") {
          return d[c.substr(5)].apply(d, a);
        } else {
          return e[c].apply(e, a);
        }
      } else {
        return b[g] !== undefined ? b[g] : "";
      }
    }
    c = a.html.replace(a.re, fn);
    return c;
  },
  applyOut: function (c, a) {
    var b = this;
    if (b.compiled) {
      a.push.apply(a, b.compiled(c));
    } else {
      a.push(b.apply(c));
    }
    return a;
  },
  applyTemplate: function () {
    return this.apply.apply(this, arguments);
  },
  set: function (c, b) {
    var a = this;
    a.html = c;
    a.compiled = null;
    return b ? a.compile() : a;
  },
  compileARe: /\\/g,
  compileBRe: /(\r\n|\n)/g,
  compileCRe: /'/g,
  compile: function () {
    var me = this,
      fm = Ext.util.Format,
      useFormat = me.disableFormats !== !0,
      body,
      bodyReturn;
    function fn(d, c, a, b) {
      if (a && useFormat) {
        b = b ? "," + b : "";
        if (a.substr(0, 5) != "this.") {
          a = "fm." + a + "(";
        } else {
          a = "this." + a.substr(5) + "(";
        }
      } else {
        b = "";
        a = "(values['" + c + "'] == undefined ? '' : ";
      }
      return "'," + a + "values['" + c + "']" + b + ") ,'";
    }
    bodyReturn = me.html
      .replace(me.compileARe, "\\\\")
      .replace(me.compileBRe, "\\n")
      .replace(me.compileCRe, "\\'")
      .replace(me.re, fn);
    body = "this.compiled = function(values){ return ['" + bodyReturn + "'];};";
    eval(body);
    return me;
  },
  insertFirst: function (c, b, a) {
    return this.doInsert("afterBegin", c, b, a);
  },
  insertBefore: function (c, b, a) {
    return this.doInsert("beforeBegin", c, b, a);
  },
  insertAfter: function (c, b, a) {
    return this.doInsert("afterEnd", c, b, a);
  },
  append: function (c, b, a) {
    return this.doInsert("beforeEnd", c, b, a);
  },
  doInsert: function (d, e, c, b) {
    var a = Ext.DomHelper.insertHtml(d, Ext.getDom(e), this.apply(c));
    return b ? Ext.get(a) : a;
  },
  overwrite: function (d, c, b) {
    var a = Ext.DomHelper.overwrite(Ext.getDom(d), this.apply(c));
    return b ? Ext.get(a) : a;
  },
});
Ext.define("Ext.XTemplateParser", {
  constructor: function (a) {
    Ext.apply(this, a);
  },
  doTpl: Ext.emptyFn,
  parse: function (f) {
    var b = this,
      p = f.length,
      r = { elseif: "elif" },
      n = b.topRe,
      q = b.actionsRe,
      i,
      d,
      j,
      c,
      g,
      m,
      l,
      k,
      h,
      e,
      a,
      o;
    b.level = 0;
    b.stack = d = [];
    for (i = 0; i < p; i = e) {
      n.lastIndex = i;
      c = n.exec(f);
      if (!c) {
        b.doText(f.substring(i, p));
        break;
      }
      h = c.index;
      e = n.lastIndex;
      if (i < h) {
        b.doText(f.substring(i, h));
      }
      if (c[1]) {
        e = f.indexOf("%}", h + 2);
        b.doEval(f.substring(h + 2, e));
        e += 2;
      } else {
        if (c[2]) {
          e = f.indexOf("]}", h + 2);
          b.doExpr(f.substring(h + 2, e));
          e += 2;
        } else {
          if (c[3]) {
            b.doTag(c[3]);
          } else {
            if (c[4]) {
              a = null;
              while ((k = q.exec(c[4])) !== null) {
                j = k[2] || k[3];
                if (j) {
                  j = Ext.String.htmlDecode(j);
                  g = k[1];
                  g = r[g] || g;
                  a = a || {};
                  m = a[g];
                  if (typeof m == "string") {
                    a[g] = [m, j];
                  } else {
                    if (m) {
                      a[g].push(j);
                    } else {
                      a[g] = j;
                    }
                  }
                }
              }
              if (!a) {
                if (b.elseRe.test(c[4])) {
                  b.doElse();
                } else {
                  if (b.defaultRe.test(c[4])) {
                    b.doDefault();
                  } else {
                    b.doTpl();
                    d.push({ type: "tpl" });
                  }
                }
              } else {
                if (a["if"]) {
                  b.doIf(a["if"], a);
                  d.push({ type: "if" });
                } else {
                  if (a["switch"]) {
                    b.doSwitch(a["switch"], a);
                    d.push({ type: "switch" });
                  } else {
                    if (a["case"]) {
                      b.doCase(a["case"], a);
                    } else {
                      if (a["elif"]) {
                        b.doElseIf(a["elif"], a);
                      } else {
                        if (a["for"]) {
                          ++b.level;
                          if ((o = b.propRe.exec(c[4]))) {
                            a.propName = o[1] || o[2];
                          }
                          b.doFor(a["for"], a);
                          d.push({ type: "for", actions: a });
                        } else {
                          if (a.exec) {
                            b.doExec(a.exec, a);
                            d.push({ type: "exec", actions: a });
                          }
                        }
                      }
                    }
                  }
                }
              }
            } else {
              if (c[0].length === 5) {
                d.push({ type: "tpl" });
              } else {
                l = d.pop();
                b.doEnd(l.type, l.actions);
                if (l.type == "for") {
                  --b.level;
                }
              }
            }
          }
        }
      }
    }
  },
  topRe: /(?:(\{\%)|(\{\[)|\{([^{}]*)\})|(?:<tpl([^>]*)\>)|(?:<\/tpl>)/g,
  actionsRe:
    /\s*(elif|elseif|if|for|exec|switch|case|eval)\s*\=\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\s*/g,
  propRe: /prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,
  defaultRe: /^\s*default\s*$/,
  elseRe: /^\s*else\s*$/,
});
Ext.define(
  "Ext.XTemplateCompiler",
  {
    extend: Ext.XTemplateParser,
    useEval: Ext.isGecko,
    useIndex: Ext.isIE6 || Ext.isIE7,
    useFormat: !0,
    propNameRe: /^[\w\d\$]*$/,
    compile: function (c) {
      var a = this,
        b = a.generate(c);
      return a.useEval ? a.evalTpl(b) : new Function("Ext", b)(Ext);
    },
    generate: function (d) {
      var a = this,
        b = "var fm=Ext.util.Format,ts=Object.prototype.toString;",
        c;
      a.maxLevel = 0;
      a.body = [
        "var c0=values, a0=" +
          a.createArrayTest(0) +
          ", p0=parent, n0=xcount, i0=xindex, v;\n",
      ];
      if (a.definitions) {
        if (typeof a.definitions === "string") {
          a.definitions = [a.definitions, b];
        } else {
          a.definitions.push(b);
        }
      } else {
        a.definitions = [b];
      }
      a.switches = [];
      a.parse(d);
      a.definitions.push(
        (a.useEval ? "$=" : "return") + " function (" + a.fnArgs + ") {",
        a.body.join(""),
        "}"
      );
      c = a.definitions.join("\n");
      a.definitions.length = a.body.length = a.switches.length = 0;
      delete a.definitions;
      delete a.body;
      delete a.switches;
      return c;
    },
    doText: function (a) {
      var b = this,
        c = b.body;
      a = a.replace(b.aposRe, "\\'").replace(b.newLineRe, "\\n");
      if (b.useIndex) {
        c.push("out[out.length]='", a, "'\n");
      } else {
        c.push("out.push('", a, "')\n");
      }
    },
    doExpr: function (b) {
      var a = this.body;
      a.push("v=" + b + "; if (v !== undefined && v !== null) out");
      if (this.useIndex) {
        a.push("[out.length]=v+''\n");
      } else {
        a.push(".push(v+'')\n");
      }
    },
    doTag: function (a) {
      this.doExpr(this.parseTag(a));
    },
    doElse: function () {
      this.body.push("} else {\n");
    },
    doEval: function (a) {
      this.body.push(a, "\n");
    },
    doIf: function (b, c) {
      var a = this;
      if (b === ".") {
        a.body.push("if (values) {\n");
      } else {
        if (a.propNameRe.test(b)) {
          a.body.push("if (", a.parseTag(b), ") {\n");
        } else {
          a.body.push("if (", a.addFn(b), a.callFn, ") {\n");
        }
      }
      if (c.exec) {
        a.doExec(c.exec);
      }
    },
    doElseIf: function (b, c) {
      var a = this;
      if (b === ".") {
        a.body.push("else if (values) {\n");
      } else {
        if (a.propNameRe.test(b)) {
          a.body.push("} else if (", a.parseTag(b), ") {\n");
        } else {
          a.body.push("} else if (", a.addFn(b), a.callFn, ") {\n");
        }
      }
      if (c.exec) {
        a.doExec(c.exec);
      }
    },
    doSwitch: function (b) {
      var a = this;
      if (b === ".") {
        a.body.push("switch (values) {\n");
      } else {
        if (a.propNameRe.test(b)) {
          a.body.push("switch (", a.parseTag(b), ") {\n");
        } else {
          a.body.push("switch (", a.addFn(b), a.callFn, ") {\n");
        }
      }
      a.switches.push(0);
    },
    doCase: function (e) {
      var a = this,
        c = Ext.isArray(e) ? e : [e],
        d = a.switches.length - 1,
        f,
        b;
      if (a.switches[d]) {
        a.body.push("break;\n");
      } else {
        a.switches[d]++;
      }
      for (b = 0, d = c.length; b < d; ++b) {
        f = a.intRe.exec(c[b]);
        c[b] = f ? f[1] : "'" + c[b].replace(a.aposRe, "\\'") + "'";
      }
      a.body.push("case ", c.join(": case "), ":\n");
    },
    doDefault: function () {
      var a = this,
        b = a.switches.length - 1;
      if (a.switches[b]) {
        a.body.push("break;\n");
      } else {
        a.switches[b]++;
      }
      a.body.push("default:\n");
    },
    doEnd: function (c, d) {
      var a = this,
        b = a.level - 1;
      if (c == "for") {
        if (d.exec) {
          a.doExec(d.exec);
        }
        a.body.push("}\n");
        a.body.push(
          "parent=p",
          b,
          ";values=r",
          b + 1,
          ";xcount=n",
          b,
          ";xindex=i",
          b,
          "\n"
        );
      } else {
        if (c == "if" || c == "switch") {
          a.body.push("}\n");
        }
      }
    },
    doFor: function (c, g) {
      var b = this,
        e,
        a = b.level,
        d = a - 1,
        h = "p" + a,
        f;
      if (c === ".") {
        e = "values";
      } else {
        if (b.propNameRe.test(c)) {
          e = b.parseTag(c);
        } else {
          e = b.addFn(c) + b.callFn;
        }
      }
      if (b.maxLevel < a) {
        b.maxLevel = a;
        b.body.push("var ");
      }
      if (c == ".") {
        f = "c" + a;
      } else {
        f = "a" + d + "?c" + d + "[i" + d + "]:p" + a;
      }
      b.body.push(
        "i",
        a,
        "=0,n",
        a,
        "=0,c",
        a,
        "=",
        e,
        ",a",
        a,
        "=",
        b.createArrayTest(a),
        ",p",
        a,
        "=c",
        d,
        ",r",
        a,
        "=values;\n",
        "parent=",
        f,
        "\n",
        "if (c",
        a,
        "){if(a",
        a,
        "){n",
        a,
        "=c",
        a,
        ".length;}else if (c",
        a,
        ".isMixedCollection){c",
        a,
        "=c",
        a,
        ".items;n",
        a,
        "=c",
        a,
        ".length;}else if(c",
        a,
        ".isStore){c",
        a,
        "=c",
        a,
        ".data.items;n",
        a,
        "=c",
        a,
        ".length;}else{c",
        a,
        "=[c",
        a,
        "];n",
        a,
        "=1;}}\n",
        "for (xcount=n",
        a,
        ";i",
        a,
        "<n" + a + ";++i",
        a,
        "){\n",
        "values=c",
        a,
        "[i",
        a,
        "]"
      );
      if (g.propName) {
        b.body.push(".", g.propName);
      }
      b.body.push("\n", "xindex=i", a, "+1\n");
    },
    createArrayTest:
      "isArray" in Array
        ? function (a) {
            return "Array.isArray(c" + a + ")";
          }
        : function (a) {
            return "ts.call(c" + a + ')==="[object Array]"';
          },
    doExec: function (c, d) {
      var a = this,
        b = "f" + a.definitions.length;
      a.definitions.push(
        "function " + b + "(" + a.fnArgs + ") {",
        " try { with(values) {",
        "  " + c,
        " }} catch(e) {",
        "}",
        "}"
      );
      a.body.push(b + a.callFn + "\n");
    },
    addFn: function (c) {
      var a = this,
        b = "f" + a.definitions.length;
      if (c === ".") {
        a.definitions.push(
          "function " + b + "(" + a.fnArgs + ") {",
          " return values",
          "}"
        );
      } else {
        if (c === "..") {
          a.definitions.push(
            "function " + b + "(" + a.fnArgs + ") {",
            " return parent",
            "}"
          );
        } else {
          a.definitions.push(
            "function " + b + "(" + a.fnArgs + ") {",
            " try { with(values) {",
            "  return(" + c + ")",
            " }} catch(e) {",
            "}",
            "}"
          );
        }
      }
      return b;
    },
    parseTag: function (h) {
      var d = this,
        f = d.tagRe.exec(h),
        a = f[1],
        c = f[2],
        e = f[3],
        g = f[4],
        b;
      if (a == ".") {
        if (!d.validTypes) {
          d.definitions.push("var validTypes={string:1,number:1,boolean:1};");
          d.validTypes = !0;
        }
        b =
          'validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""';
      } else {
        if (a == "#") {
          b = "xindex";
        } else {
          if (a.substr(0, 7) == "parent.") {
            b = a;
          } else {
            if (isNaN(a) && a.indexOf("-") == -1 && a.indexOf(".") != -1) {
              b = "values." + a;
            } else {
              b = "values['" + a + "']";
            }
          }
        }
      }
      if (g) {
        b = "(" + b + g + ")";
      }
      if (c && d.useFormat) {
        e = e ? "," + e : "";
        if (c.substr(0, 5) != "this.") {
          c = "fm." + c + "(";
        } else {
          c += "(";
        }
      } else {
        return b;
      }
      return c + b + e + ")";
    },
    evalTpl: function ($) {
      eval($);
      return $;
    },
    newLineRe: /\r\n|\r|\n/g,
    aposRe: /[']/g,
    intRe: /^\s*(\d+)\s*$/,
    tagRe:
      /([\w-\.\#\$]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\/]\s?[\d\.\+\-\*\/\(\)]+)?/,
  },
  function () {
    var a = this.prototype;
    a.fnArgs = "out,values,parent,xindex,xcount";
    a.callFn = ".call(this," + a.fnArgs + ")";
  }
);
Ext.define("Ext.XTemplate", {
  extend: Ext.Template,
  emptyObj: {},
  apply: function (a) {
    return this.applyOut(a, []).join("");
  },
  applyOut: function (d, f, g) {
    var a = this,
      c = d.xindex,
      b = d.xcount,
      e;
    if (!a.fn) {
      e = new Ext.XTemplateCompiler({
        useFormat: a.disableFormats !== !0,
        definitions: a.definitions,
      });
      a.fn = e.compile(a.html);
    }
    try {
      c = typeof c === "number" ? c : 1;
      b = typeof b === "number" ? b : 1;
      a.fn.call(a, f, d, g || a.emptyObj, c, b);
    } catch (h) {}
    return f;
  },
  compile: function () {
    return this;
  },
  statics: {
    getTpl: function (d, c) {
      var a = d[c],
        b;
      if (a && !a.isTemplate) {
        a = Ext.ClassManager.dynInstantiate("Ext.XTemplate", a);
        if (d.hasOwnProperty(c)) {
          d[c] = a;
        } else {
          for (b = d.self.prototype; b; b = b.superclass) {
            if (b.hasOwnProperty(c)) {
              b[c] = a;
              break;
            }
          }
        }
      }
      return a || null;
    },
  },
});
Ext.define("Ext.behavior.Behavior", {
  constructor: function (a) {
    this.component = a;
    a.on("destroy", "onComponentDestroy", this);
  },
  onComponentDestroy: Ext.emptyFn,
});
Ext.define("Ext.fx.easing.Abstract", {
  config: { startTime: 0, startValue: 0 },
  isEasing: !0,
  isEnded: !1,
  constructor: function (a) {
    this.initConfig(a);
    return this;
  },
  applyStartTime: function (a) {
    if (!a) {
      a = Ext.Date.now();
    }
    return a;
  },
  updateStartTime: function (a) {
    this.reset();
  },
  reset: function () {
    this.isEnded = !1;
  },
  getValue: Ext.emptyFn,
});
Ext.define("Ext.fx.easing.Linear", {
  extend: Ext.fx.easing.Abstract,
  alias: "easing.linear",
  config: { duration: 0, endValue: 0 },
  updateStartValue: function (a) {
    this.distance = this.getEndValue() - a;
  },
  updateEndValue: function (a) {
    this.distance = a - this.getStartValue();
  },
  getValue: function () {
    var a = Ext.Date.now() - this.getStartTime(),
      b = this.getDuration();
    if (a > b) {
      this.isEnded = !0;
      return this.getEndValue();
    } else {
      return this.getStartValue() + (a / b) * this.distance;
    }
  },
});
Ext.define("Ext.util.translatable.Abstract", {
  extend: Ext.Evented,
  config: { useWrapper: null, easing: null, easingX: null, easingY: null },
  x: 0,
  y: 0,
  activeEasingX: null,
  activeEasingY: null,
  isAnimating: !1,
  isTranslatable: !0,
  constructor: function (a) {
    this.initConfig(a);
  },
  factoryEasing: function (a) {
    return Ext.factory(a, Ext.fx.easing.Linear, null, "easing");
  },
  applyEasing: function (a) {
    if (!this.getEasingX()) {
      this.setEasingX(this.factoryEasing(a));
    }
    if (!this.getEasingY()) {
      this.setEasingY(this.factoryEasing(a));
    }
  },
  applyEasingX: function (a) {
    return this.factoryEasing(a);
  },
  applyEasingY: function (a) {
    return this.factoryEasing(a);
  },
  doTranslate: Ext.emptyFn,
  translate: function (a, b, c) {
    if (c) {
      return this.translateAnimated(a, b, c);
    }
    if (this.isAnimating) {
      this.stopAnimation();
    }
    if (!isNaN(a) && typeof a == "number") {
      this.x = a;
    }
    if (!isNaN(b) && typeof b == "number") {
      this.y = b;
    }
    this.doTranslate(a, b);
  },
  translateAxis: function (e, a, d) {
    var b, c;
    if (e == "x") {
      b = a;
    } else {
      c = a;
    }
    return this.translate(b, c, d);
  },
  animate: function (a, b) {
    this.activeEasingX = a;
    this.activeEasingY = b;
    this.isAnimating = !0;
    this.lastX = null;
    this.lastY = null;
    Ext.AnimationQueue.start(this.doAnimationFrame, this);
    this.fireEvent("animationstart", this, this.x, this.y);
    return this;
  },
  translateAnimated: function (f, g, a) {
    if (!Ext.isObject(a)) {
      a = {};
    }
    if (this.isAnimating) {
      this.stopAnimation();
    }
    var e = Ext.Date.now(),
      d = a.easing,
      b =
        typeof f == "number" ? a.easingX || d || this.getEasingX() || !0 : null,
      c =
        typeof g == "number" ? a.easingY || d || this.getEasingY() || !0 : null;
    if (b) {
      b = this.factoryEasing(b);
      b.setStartTime(e);
      b.setStartValue(this.x);
      b.setEndValue(f);
      if ("duration" in a) {
        b.setDuration(a.duration);
      }
    }
    if (c) {
      c = this.factoryEasing(c);
      c.setStartTime(e);
      c.setStartValue(this.y);
      c.setEndValue(g);
      if ("duration" in a) {
        c.setDuration(a.duration);
      }
    }
    return this.animate(b, c);
  },
  doAnimationFrame: function () {
    var a = this,
      d = a.activeEasingX,
      e = a.activeEasingY,
      f = Date.now(),
      b,
      c;
    if (!a.isAnimating) {
      return;
    }
    a.lastRun = f;
    if (d === null && e === null) {
      a.stopAnimation();
      return;
    }
    if (d !== null) {
      a.x = b = Math.round(d.getValue());
      if (d.isEnded) {
        a.activeEasingX = null;
        a.fireEvent("axisanimationend", a, "x", b);
      }
    } else {
      b = a.x;
    }
    if (e !== null) {
      a.y = c = Math.round(e.getValue());
      if (e.isEnded) {
        a.activeEasingY = null;
        a.fireEvent("axisanimationend", a, "y", c);
      }
    } else {
      c = a.y;
    }
    if (a.lastX !== b || a.lastY !== c) {
      a.doTranslate(b, c);
      a.lastX = b;
      a.lastY = c;
    }
    a.fireEvent("animationframe", a, b, c);
  },
  stopAnimation: function () {
    if (!this.isAnimating) {
      return;
    }
    this.activeEasingX = null;
    this.activeEasingY = null;
    this.isAnimating = !1;
    Ext.AnimationQueue.stop(this.doAnimationFrame, this);
    this.fireEvent("animationend", this, this.x, this.y);
  },
  refresh: function () {
    this.translate(this.x, this.y);
  },
  destroy: function () {
    if (this.isAnimating) {
      this.stopAnimation();
    }
    this.callParent(arguments);
  },
});
Ext.define("Ext.util.translatable.Dom", {
  extend: Ext.util.translatable.Abstract,
  config: { element: null },
  applyElement: function (a) {
    if (!a) {
      return;
    }
    return Ext.get(a);
  },
  updateElement: function () {
    this.refresh();
  },
});
Ext.define("Ext.util.translatable.CssTransform", {
  extend: Ext.util.translatable.Dom,
  doTranslate: function (b, c) {
    var a = this.getElement();
    if (!this.isDestroyed && !a.isDestroyed) {
      a.translate(b, c);
    }
  },
  destroy: function () {
    var a = this.getElement();
    if (a && !a.isDestroyed) {
      a.dom.style.webkitTransform = null;
    }
    this.callSuper();
  },
});
Ext.define("Ext.util.translatable.ScrollPosition", {
  extend: Ext.util.translatable.Dom,
  type: "scrollposition",
  config: { useWrapper: !0 },
  getWrapper: function () {
    var a = this.wrapper,
      c = this.getElement(),
      b;
    if (!a) {
      b = c.getParent();
      if (!b) {
        return null;
      }
      if (b.hasCls(Ext.baseCSSPrefix + "translatable-hboxfix")) {
        b = b.getParent();
      }
      if (this.getUseWrapper()) {
        a = c.wrap();
      } else {
        a = b;
      }
      c.addCls("x-translatable");
      a.addCls("x-translatable-container");
      this.wrapper = a;
      a.on(
        "painted",
        function () {
          if (!this.isAnimating) {
            this.refresh();
          }
        },
        this
      );
      this.refresh();
    }
    return a;
  },
  doTranslate: function (c, d) {
    var b = this.getWrapper(),
      a;
    if (b) {
      a = b.dom;
      if (typeof c == "number") {
        a.scrollLeft = 500000 - c;
      }
      if (typeof d == "number") {
        a.scrollTop = 500000 - d;
      }
    }
  },
  destroy: function () {
    var b = this.getElement(),
      a = this.wrapper;
    if (a) {
      if (!b.isDestroyed) {
        if (this.getUseWrapper()) {
          a.doReplaceWith(b);
        }
        b.removeCls("x-translatable");
      }
      if (!a.isDestroyed) {
        a.removeCls("x-translatable-container");
        a.un("painted", "refresh", this);
      }
      delete this.wrapper;
      delete this._element;
    }
    this.callSuper();
  },
});
Ext.define("Ext.util.translatable.CssPosition", {
  extend: Ext.util.translatable.Dom,
  doTranslate: function (b, c) {
    var a = this.getElement().dom.style;
    if (typeof b == "number") {
      a.left = b + "px";
    }
    if (typeof c == "number") {
      a.top = c + "px";
    }
  },
  destroy: function () {
    var a = this.getElement().dom.style;
    a.left = null;
    a.top = null;
    this.callParent(arguments);
  },
});
Ext.define("Ext.util.Translatable", {
  constructor: function (a) {
    var b = Ext.util.translatable;
    switch (Ext.browser.getPreferredTranslationMethod(a)) {
      case "scrollposition":
        return new b.ScrollPosition(a);
      case "csstransform":
        return new b.CssTransform(a);
      case "cssposition":
        return new b.CssPosition(a);
    }
  },
});
Ext.define("Ext.behavior.Translatable", {
  extend: Ext.behavior.Behavior,
  setConfig: function (b) {
    var a = this.translatable,
      c = this.component;
    if (b) {
      if (!a) {
        this.translatable = a = new Ext.util.Translatable(b);
        a.setElement(c.renderElement);
        a.on("destroy", "onTranslatableDestroy", this);
      } else {
        if (Ext.isObject(b)) {
          a.setConfig(b);
        }
      }
    } else {
      if (a) {
        a.destroy();
      }
    }
    return this;
  },
  getTranslatable: function () {
    return this.translatable;
  },
  onTranslatableDestroy: function () {
    delete this.translatable;
  },
  onComponentDestroy: function () {
    var a = this.translatable;
    if (a) {
      a.destroy();
    }
  },
});
Ext.define(
  "Ext.util.Draggable",
  {
    isDraggable: !0,
    mixins: [Ext.mixin.Observable],
    config: {
      cls: Ext.baseCSSPrefix + "draggable",
      draggingCls: Ext.baseCSSPrefix + "dragging",
      element: null,
      constraint: "container",
      disabled: null,
      direction: "both",
      initialOffset: { x: 0, y: 0 },
      translatable: {},
    },
    DIRECTION_BOTH: "both",
    DIRECTION_VERTICAL: "vertical",
    DIRECTION_HORIZONTAL: "horizontal",
    defaultConstraint: {
      min: { x: -Infinity, y: -Infinity },
      max: { x: Infinity, y: Infinity },
    },
    containerWidth: 0,
    containerHeight: 0,
    width: 0,
    height: 0,
    constructor: function (a) {
      var b;
      this.extraConstraint = {};
      this.initialConfig = a;
      this.offset = { x: 0, y: 0 };
      this.listeners = {
        dragstart: "onDragStart",
        drag: "onDrag",
        dragend: "onDragEnd",
        resize: "onElementResize",
        scope: this,
      };
      if (a && a.element) {
        b = a.element;
        delete a.element;
        this.setElement(b);
      }
      return this;
    },
    applyElement: function (a) {
      if (!a) {
        return;
      }
      return Ext.get(a);
    },
    updateElement: function (a) {
      a.on(this.listeners);
      this.initConfig(this.initialConfig);
    },
    updateInitialOffset: function (a) {
      if (typeof a == "number") {
        a = { x: a, y: a };
      }
      var b = this.offset,
        c,
        d;
      b.x = c = a.x;
      b.y = d = a.y;
      this.getTranslatable().translate(c, d);
    },
    updateCls: function (a) {
      this.getElement().addCls(a);
    },
    applyTranslatable: function (a, b) {
      a = Ext.factory(a, Ext.util.Translatable, b);
      if (a) {
        a.setElement(this.getElement());
      }
      return a;
    },
    setExtraConstraint: function (a) {
      this.extraConstraint = a || {};
      this.refreshConstraint();
      return this;
    },
    addExtraConstraint: function (a) {
      Ext.merge(this.extraConstraint, a);
      this.refreshConstraint();
      return this;
    },
    applyConstraint: function (a) {
      this.currentConstraint = a;
      if (!a) {
        a = this.defaultConstraint;
      }
      if (a === "container") {
        return Ext.merge(this.getContainerConstraint(), this.extraConstraint);
      }
      return Ext.merge({}, this.extraConstraint, a);
    },
    updateConstraint: function () {
      this.refreshOffset();
    },
    getContainerConstraint: function () {
      var a = this.getContainer(),
        b = this.getElement();
      if (!a || !b.dom) {
        return this.defaultConstraint;
      }
      return {
        min: { x: 0, y: 0 },
        max: {
          x: this.containerWidth - this.width,
          y: this.containerHeight - this.height,
        },
      };
    },
    getContainer: function () {
      var a = this.container;
      if (!a) {
        a = this.getElement().getParent();
        if (a) {
          this.container = a;
          a.on({
            resize: "onContainerResize",
            destroy: "onContainerDestroy",
            scope: this,
          });
        }
      }
      return a;
    },
    onElementResize: function (b, a) {
      this.width = a.width;
      this.height = a.height;
      this.refresh();
    },
    onContainerResize: function (b, a) {
      this.containerWidth = a.width;
      this.containerHeight = a.height;
      this.refresh();
    },
    onContainerDestroy: function () {
      delete this.container;
      delete this.containerSizeMonitor;
    },
    detachListeners: function () {
      this.getElement().un(this.listeners);
    },
    isAxisEnabled: function (b) {
      var a = this.getDirection();
      if (b === "x") {
        return a === this.DIRECTION_BOTH || a === this.DIRECTION_HORIZONTAL;
      }
      return a === this.DIRECTION_BOTH || a === this.DIRECTION_VERTICAL;
    },
    onDragStart: function (b) {
      if (this.getDisabled()) {
        return !1;
      }
      var a = this.offset;
      this.fireAction("dragstart", [this, b, a.x, a.y], this.initDragStart);
    },
    initDragStart: function (c, d, a, b) {
      this.dragStartOffset = { x: a, y: b };
      this.isDragging = !0;
      this.getElement().addCls(this.getDraggingCls());
    },
    onDrag: function (a) {
      if (!this.isDragging) {
        return;
      }
      var b = this.dragStartOffset;
      this.fireAction(
        "drag",
        [this, a, b.x + a.deltaX, b.y + a.deltaY],
        this.doDrag
      );
    },
    doDrag: function (c, d, a, b) {
      c.setOffset(a, b);
    },
    onDragEnd: function (a) {
      if (!this.isDragging) {
        return;
      }
      this.onDrag(a);
      this.isDragging = !1;
      this.getElement().removeCls(this.getDraggingCls());
      this.fireEvent("dragend", this, a, this.offset.x, this.offset.y);
    },
    setOffset: function (a, b, i) {
      var c = this.offset,
        d = this.getConstraint(),
        f = d.min,
        e = d.max,
        h = Math.min,
        g = Math.max;
      if (this.isAxisEnabled("x") && typeof a == "number") {
        a = h(g(a, f.x), e.x);
      } else {
        a = c.x;
      }
      if (this.isAxisEnabled("y") && typeof b == "number") {
        b = h(g(b, f.y), e.y);
      } else {
        b = c.y;
      }
      c.x = a;
      c.y = b;
      this.getTranslatable().translate(a, b, i);
    },
    getOffset: function () {
      return this.offset;
    },
    refreshConstraint: function () {
      this.setConstraint(this.currentConstraint);
    },
    refreshOffset: function () {
      var a = this.offset;
      this.setOffset(a.x, a.y);
    },
    refresh: function () {
      this.refreshConstraint();
      this.getTranslatable().refresh();
      this.refreshOffset();
    },
    enable: function () {
      return this.setDisabled(!1);
    },
    disable: function () {
      return this.setDisabled(!0);
    },
    destroy: function () {
      var b = this.getTranslatable();
      var a = this.getElement();
      if (a && !a.isDestroyed) {
        a.removeCls(this.getCls());
      }
      this.detachListeners();
      if (b) {
        b.destroy();
      }
    },
  },
  function () {}
);
Ext.define("Ext.behavior.Draggable", {
  extend: Ext.behavior.Behavior,
  setConfig: function (b) {
    var a = this.draggable,
      c = this.component;
    if (b) {
      if (!a) {
        c.setTranslatable(b.translatable);
        this.draggable = a = new Ext.util.Draggable(b);
        a.setTranslatable(c.getTranslatable());
        a.setElement(c.renderElement);
        a.on("destroy", "onDraggableDestroy", this);
        c.on(this.listeners);
      } else {
        if (Ext.isObject(b)) {
          a.setConfig(b);
        }
      }
    } else {
      if (a) {
        a.destroy();
      }
    }
    return this;
  },
  getDraggable: function () {
    return this.draggable;
  },
  onDraggableDestroy: function () {
    delete this.draggable;
  },
  onComponentDestroy: function () {
    var a = this.draggable;
    if (a) {
      a.destroy();
    }
  },
});
(function (a) {
  Ext.define(
    "Ext.Component",
    {
      extend: Ext.AbstractComponent,
      alternateClassName: "Ext.lib.Component",
      mixins: [Ext.mixin.Traversable],
      xtype: "component",
      observableType: "component",
      cachedConfig: {
        baseCls: null,
        cls: null,
        floatingCls: a + "floating",
        hiddenCls: a + "item-hidden",
        ui: null,
        margin: null,
        padding: null,
        border: null,
        styleHtmlCls: a + "html",
        styleHtmlContent: null,
      },
      eventedConfig: {
        flex: null,
        left: null,
        top: null,
        right: null,
        bottom: null,
        width: null,
        height: null,
        minWidth: null,
        minHeight: null,
        maxWidth: null,
        maxHeight: null,
        docked: null,
        centered: null,
        hidden: null,
        disabled: null,
      },
      config: {
        style: null,
        html: null,
        draggable: null,
        translatable: null,
        renderTo: null,
        zIndex: null,
        tpl: null,
        enterAnimation: null,
        exitAnimation: null,
        showAnimation: null,
        hideAnimation: null,
        tplWriteMode: "overwrite",
        data: null,
        disabledCls: a + "item-disabled",
        contentEl: null,
        itemId: undefined,
        record: null,
        plugins: null,
      },
      listenerOptionsRegex:
        /^(?:delegate|single|delay|buffer|args|prepend|element)$/,
      alignmentRegex: /^([a-z]+)-([a-z]+)(\?)?$/,
      isComponent: !0,
      floating: !1,
      rendered: !1,
      isInner: !0,
      activeAnimation: null,
      dockPositions: { top: !0, right: !0, bottom: !0, left: !0 },
      innerElement: null,
      element: null,
      template: [],
      widthLayoutSized: !1,
      heightLayoutSized: !1,
      layoutStretched: !1,
      sizeState: !1,
      sizeFlags: 0,
      LAYOUT_WIDTH: 1,
      LAYOUT_HEIGHT: 2,
      LAYOUT_BOTH: 3,
      LAYOUT_STRETCHED: 4,
      constructor: function (d) {
        var b = this,
          e = b.config,
          c;
        b.onInitializedListeners = [];
        b.initialConfig = d;
        if (d !== undefined && "id" in d) {
          c = d.id;
        } else {
          if ("id" in e) {
            c = e.id;
          } else {
            c = b.getId();
          }
        }
        b.id = c;
        b.setId(c);
        Ext.ComponentManager.register(b);
        b.initElement();
        b.initConfig(b.initialConfig);
        b.refreshSizeState = b.doRefreshSizeState;
        b.refreshFloating = b.doRefreshFloating;
        if (b.refreshSizeStateOnInitialized) {
          b.refreshSizeState();
        }
        if (b.refreshFloatingOnInitialized) {
          b.refreshFloating();
        }
        b.initialize();
        b.triggerInitialized();
        if (b.config.fullscreen) {
          b.fireEvent("fullscreen", b);
        }
        b.fireEvent("initialize", b);
      },
      beforeInitConfig: function (b) {
        this.beforeInitialize.apply(this, arguments);
      },
      beforeInitialize: Ext.emptyFn,
      initialize: Ext.emptyFn,
      getTemplate: function () {
        return this.template;
      },
      getElementConfig: function () {
        return {
          reference: "element",
          classList: ["x-unsized"],
          children: this.getTemplate(),
        };
      },
      triggerInitialized: function () {
        var f = this.onInitializedListeners,
          h = f.length,
          b,
          d,
          c,
          g,
          e;
        if (!this.initialized) {
          this.initialized = !0;
          if (h > 0) {
            for (e = 0; e < h; e++) {
              b = f[e];
              d = b.fn;
              c = b.scope;
              g = b.args;
              if (typeof d == "string") {
                c[d].apply(c, g);
              } else {
                d.apply(c, g);
              }
            }
            f.length = 0;
          }
        }
      },
      onInitialized: function (c, b, d) {
        var e = this.onInitializedListeners;
        if (!b) {
          b = this;
        }
        if (this.initialized) {
          if (typeof c == "string") {
            b[c].apply(b, d);
          } else {
            c.apply(b, d);
          }
        } else {
          e.push({ fn: c, scope: b, args: d });
        }
      },
      renderTo: function (f, e) {
        var c = this.renderElement.dom,
          b = Ext.getDom(f),
          d = Ext.getDom(e);
        if (b) {
          if (d) {
            b.insertBefore(c, d);
          } else {
            b.appendChild(c);
          }
          this.setRendered(Boolean(c.offsetParent));
        }
      },
      setParent: function (c) {
        var b = this.parent;
        if (c && b && b !== c) {
          b.remove(this, !1);
        }
        this.parent = c;
        return this;
      },
      applyPlugins: function (b) {
        var e, c, d;
        if (!b) {
          return b;
        }
        b = [].concat(b);
        for (c = 0, e = b.length; c < e; c++) {
          d = b[c];
          b[c] = Ext.factory(d, "Ext.plugin.Plugin", null, "plugin");
        }
        return b;
      },
      updatePlugins: function (d, e) {
        var c, b;
        if (d) {
          for (b = 0, c = d.length; b < c; b++) {
            d[b].init(this);
          }
        }
        if (e) {
          for (b = 0, c = e.length; b < c; b++) {
            Ext.destroy(e[b]);
          }
        }
      },
      updateRenderTo: function (b) {
        this.renderTo(b);
      },
      updateStyle: function (b) {
        this.element.applyStyles(b);
      },
      updateBorder: function (b) {
        this.element.setBorder(b);
      },
      updatePadding: function (b) {
        this.innerElement.setPadding(b);
      },
      updateMargin: function (b) {
        this.element.setMargin(b);
      },
      updateUi: function (d, f) {
        var b = this.getBaseCls(),
          c = this.element,
          e = this.currentUi;
        if (b) {
          if (f) {
            if (e) {
              c.removeCls(e);
            } else {
              c.removeCls(b + "-" + f);
            }
          }
          if (d) {
            c.addCls(d, b);
            this.currentUi = b + "-" + d;
            if (!this.self.prototype.currentUi) {
              this.self.prototype.currentUi = this.currentUi;
            }
          }
        }
      },
      applyBaseCls: function (b) {
        return b || a + this.xtype;
      },
      updateBaseCls: function (b, d) {
        var e = this,
          c = e.getUi();
        if (d) {
          this.element.removeCls(d);
          if (c) {
            this.element.removeCls(this.currentUi);
          }
        }
        if (b) {
          this.element.addCls(b);
          if (c) {
            this.element.addCls(b, null, c);
            this.currentUi = b + "-" + c;
          }
        }
      },
      addCls: function (b, d, e) {
        var h = this.getCls(),
          c = h ? h.slice() : [],
          i,
          f,
          g;
        d = d || "";
        e = e || "";
        if (typeof b == "string") {
          b = [b];
        }
        i = b.length;
        if (!c.length && d === "" && e === "") {
          c = b;
        } else {
          for (f = 0; f < i; f++) {
            g = d + b[f] + e;
            if (c.indexOf(g) == -1) {
              c.push(g);
            }
          }
        }
        this.setCls(c);
      },
      removeCls: function (e, c, d) {
        var g = this.getCls(),
          b = g ? g.slice() : [],
          h,
          f;
        c = c || "";
        d = d || "";
        if (typeof e == "string") {
          b = Ext.Array.remove(b, c + e + d);
        } else {
          h = e.length;
          for (f = 0; f < h; f++) {
            b = Ext.Array.remove(b, c + e[f] + d);
          }
        }
        this.setCls(b);
      },
      replaceCls: function (g, f, d, e) {
        var j = this.getCls(),
          b = j ? j.slice() : [],
          h,
          c,
          i;
        d = d || "";
        e = e || "";
        if (typeof g == "string") {
          b = Ext.Array.remove(b, d + g + e);
        } else {
          if (g) {
            h = g.length;
            for (c = 0; c < h; c++) {
              b = Ext.Array.remove(b, d + g[c] + e);
            }
          }
        }
        if (typeof f == "string") {
          b.push(d + f + e);
        } else {
          if (f) {
            h = f.length;
            if (!b.length && d === "" && e === "") {
              b = f;
            } else {
              for (c = 0; c < h; c++) {
                i = d + f[c] + e;
                if (b.indexOf(i) == -1) {
                  b.push(i);
                }
              }
            }
          }
        }
        this.setCls(b);
      },
      toggleCls: function (b, c) {
        this.element.toggleCls(b, c);
        return this;
      },
      applyCls: function (b) {
        if (typeof b == "string") {
          b = [b];
        }
        if (!b || !b.length) {
          b = null;
        }
        return b;
      },
      updateCls: function (b, c) {
        if (
          this.element &&
          ((b && !c) ||
            (!b && c) ||
            b.length != c.length ||
            Ext.Array.difference(b, c).length > 0)
        ) {
          this.element.replaceCls(c, b);
        }
      },
      updateStyleHtmlCls: function (d, b) {
        var c = this.innerHtmlElement,
          e = this.innerElement;
        if (this.getStyleHtmlContent() && b) {
          if (c) {
            c.replaceCls(b, d);
          } else {
            e.replaceCls(b, d);
          }
        }
      },
      applyStyleHtmlContent: function (b) {
        return Boolean(b);
      },
      updateStyleHtmlContent: function (e) {
        var c = this.getStyleHtmlCls(),
          d = this.innerElement,
          b = this.innerHtmlElement;
        if (e) {
          if (b) {
            b.addCls(c);
          } else {
            d.addCls(c);
          }
        } else {
          if (b) {
            b.removeCls(c);
          } else {
            d.addCls(c);
          }
        }
      },
      applyContentEl: function (b) {
        if (b) {
          return Ext.get(b);
        }
      },
      updateContentEl: function (b, c) {
        if (c) {
          c.hide();
          Ext.getBody().append(c);
        }
        if (b) {
          this.setHtml(b.dom);
          b.show();
        }
      },
      getSize: function () {
        return { width: this.getWidth(), height: this.getHeight() };
      },
      isCentered: function () {
        return Boolean(this.getCentered());
      },
      isFloating: function () {
        return this.floating;
      },
      isDocked: function () {
        return Boolean(this.getDocked());
      },
      isInnerItem: function () {
        return this.isInner;
      },
      setIsInner: function (b) {
        if (b !== this.isInner) {
          this.isInner = b;
          if (this.initialized) {
            this.fireEvent("innerstatechange", this, b);
          }
        }
      },
      filterLengthValue: function (b) {
        if (b === "auto" || (!b && b !== 0)) {
          return null;
        }
        return b;
      },
      applyTop: function (b) {
        return this.filterLengthValue(b);
      },
      applyRight: function (b) {
        return this.filterLengthValue(b);
      },
      applyBottom: function (b) {
        return this.filterLengthValue(b);
      },
      applyLeft: function (b) {
        return this.filterLengthValue(b);
      },
      applyWidth: function (b) {
        return this.filterLengthValue(b);
      },
      applyHeight: function (b) {
        return this.filterLengthValue(b);
      },
      applyMinWidth: function (b) {
        return this.filterLengthValue(b);
      },
      applyMinHeight: function (b) {
        return this.filterLengthValue(b);
      },
      applyMaxWidth: function (b) {
        return this.filterLengthValue(b);
      },
      applyMaxHeight: function (b) {
        return this.filterLengthValue(b);
      },
      doSetTop: function (b) {
        this.element.setTop(b);
        this.refreshFloating();
      },
      doSetRight: function (b) {
        this.element.setRight(b);
        this.refreshFloating();
      },
      doSetBottom: function (b) {
        this.element.setBottom(b);
        this.refreshFloating();
      },
      doSetLeft: function (b) {
        this.element.setLeft(b);
        this.refreshFloating();
      },
      doSetWidth: function (b) {
        this.element.setWidth(b);
        this.refreshSizeState();
      },
      doSetHeight: function (b) {
        this.element.setHeight(b);
        this.refreshSizeState();
      },
      applyFlex: function (b) {
        if (b) {
          b = Number(b);
          if (isNaN(b)) {
            b = null;
          }
        } else {
          b = null;
        }
        return b;
      },
      doSetFlex: Ext.emptyFn,
      refreshSizeState: function () {
        this.refreshSizeStateOnInitialized = !0;
      },
      doRefreshSizeState: function () {
        var e =
            this.getWidth() !== null ||
            this.widthLayoutSized ||
            (this.getLeft() !== null && this.getRight() !== null),
          b =
            this.getHeight() !== null ||
            this.heightLayoutSized ||
            (this.getTop() !== null && this.getBottom() !== null),
          d =
            this.layoutStretched ||
            this.hasCSSMinHeight ||
            (!b && this.getMinHeight() !== null),
          c = e && b,
          f =
            (e && this.LAYOUT_WIDTH) |
            (b && this.LAYOUT_HEIGHT) |
            (d && this.LAYOUT_STRETCHED);
        if (!c && d) {
          c = null;
        }
        this.setSizeState(c);
        this.setSizeFlags(f);
      },
      setLayoutSizeFlags: function (b) {
        this.layoutStretched = !!(b & this.LAYOUT_STRETCHED);
        this.widthLayoutSized = !!(b & this.LAYOUT_WIDTH);
        this.heightLayoutSized = !!(b & this.LAYOUT_HEIGHT);
        this.refreshSizeState();
      },
      setSizeFlags: function (b) {
        if (b !== this.sizeFlags) {
          this.sizeFlags = b;
          var e = !!(b & this.LAYOUT_WIDTH),
            c = !!(b & this.LAYOUT_HEIGHT),
            d = !!(b & this.LAYOUT_STRETCHED);
          if (e && !d && !c) {
            this.element.addCls("x-has-width");
          } else {
            this.element.removeCls("x-has-width");
          }
          if (c && !d && !e) {
            this.element.addCls("x-has-height");
          } else {
            this.element.removeCls("x-has-height");
          }
          if (this.initialized) {
            this.fireEvent("sizeflagschange", this, b);
          }
        }
      },
      getSizeFlags: function () {
        if (!this.initialized) {
          this.doRefreshSizeState();
        }
        return this.sizeFlags;
      },
      setSizeState: function (b) {
        if (b !== this.sizeState) {
          this.sizeState = b;
          this.element.setSizeState(b);
          if (this.initialized) {
            this.fireEvent("sizestatechange", this, b);
          }
        }
      },
      getSizeState: function () {
        if (!this.initialized) {
          this.doRefreshSizeState();
        }
        return this.sizeState;
      },
      doSetMinWidth: function (b) {
        this.element.setMinWidth(b);
      },
      doSetMinHeight: function (b) {
        this.element.setMinHeight(b);
        this.refreshSizeState();
      },
      doSetMaxWidth: function (b) {
        this.element.setMaxWidth(b);
      },
      doSetMaxHeight: function (b) {
        this.element.setMaxHeight(b);
      },
      applyCentered: function (b) {
        b = Boolean(b);
        if (b) {
          this.refreshInnerState = Ext.emptyFn;
          if (this.isFloating()) {
            this.resetFloating();
          }
          if (this.isDocked()) {
            this.setDocked(!1);
          }
          this.setIsInner(!1);
          delete this.refreshInnerState;
        }
        return b;
      },
      doSetCentered: function (b) {
        this.toggleCls(this.getFloatingCls(), b);
        if (!b) {
          this.refreshInnerState();
        }
      },
      applyDocked: function (b) {
        if (!b) {
          return null;
        }
        this.refreshInnerState = Ext.emptyFn;
        if (this.isFloating()) {
          this.resetFloating();
        }
        if (this.isCentered()) {
          this.setCentered(!1);
        }
        this.setIsInner(!1);
        delete this.refreshInnerState;
        return b;
      },
      doSetDocked: function (b, c) {
        this.fireEvent("afterdockedchange", this, b, c);
        if (!b) {
          this.refreshInnerState();
        }
      },
      resetFloating: function () {
        this.setTop(null);
        this.setRight(null);
        this.setBottom(null);
        this.setLeft(null);
      },
      refreshInnerState: function () {
        this.setIsInner(
          !this.isCentered() && !this.isFloating() && !this.isDocked()
        );
      },
      refreshFloating: function () {
        this.refreshFloatingOnInitialized = !0;
      },
      doRefreshFloating: function () {
        var b = !0,
          c = this.getFloatingCls();
        if (
          this.getTop() === null &&
          this.getBottom() === null &&
          this.getRight() === null &&
          this.getLeft() === null
        ) {
          b = !1;
        } else {
          this.refreshSizeState();
        }
        if (b !== this.floating) {
          this.floating = b;
          if (b) {
            this.refreshInnerState = Ext.emptyFn;
            if (this.isCentered()) {
              this.setCentered(!1);
            }
            if (this.isDocked()) {
              this.setDocked(!1);
            }
            this.setIsInner(!1);
            delete this.refreshInnerState;
          }
          this.element.toggleCls(c, b);
          if (this.initialized) {
            this.fireEvent("floatingchange", this, b);
          }
          if (!b) {
            this.refreshInnerState();
          }
        }
      },
      updateFloatingCls: function (b, c) {
        if (this.isFloating()) {
          this.replaceCls(c, b);
        }
      },
      applyDisabled: function (b) {
        return Boolean(b);
      },
      doSetDisabled: function (b) {
        if (this.element) {
          this.element[b ? "addCls" : "removeCls"](this.getDisabledCls());
        } else {
          console.warn(
            "Not possible to alter class. Element has already been removed from DOM."
          );
        }
      },
      updateDisabledCls: function (b, c) {
        if (this.isDisabled()) {
          this.element.replaceCls(c, b);
        }
      },
      disable: function () {
        this.setDisabled(!0);
      },
      enable: function () {
        this.setDisabled(!1);
      },
      isDisabled: function () {
        return this.getDisabled();
      },
      applyZIndex: function (b) {
        if (!b && b !== 0) {
          b = null;
        }
        if (b !== null) {
          b = Number(b);
          if (isNaN(b)) {
            b = null;
          }
        }
        return b;
      },
      updateZIndex: function (d) {
        var c = this.element,
          b;
        if (c && !c.isDestroyed) {
          b = c.dom.style;
          if (d !== null) {
            b.setProperty("z-index", d, "important");
          } else {
            b.removeProperty("z-index");
          }
        }
      },
      getInnerHtmlElement: function () {
        var b = this.innerHtmlElement,
          c;
        if (!b || !b.dom || !b.dom.parentNode) {
          this.innerHtmlElement = b = Ext.Element.create({
            cls: "x-innerhtml",
          });
          if (this.getStyleHtmlContent()) {
            c = this.getStyleHtmlCls();
            this.innerHtmlElement.addCls(c);
            this.innerElement.removeCls(c);
          }
          this.innerElement.appendChild(b);
        }
        return b;
      },
      updateHtml: function (c) {
        if (!this.isDestroyed) {
          var b = this.getInnerHtmlElement();
          if (Ext.isElement(c)) {
            b.setHtml("");
            b.append(c);
          } else {
            b.setHtml(c);
          }
        }
      },
      applyHidden: function (b) {
        return Boolean(b);
      },
      doSetHidden: function (c) {
        var b = this.renderElement;
        if (b.isDestroyed) {
          return;
        }
        if (c) {
          b.hide();
        } else {
          b.show();
        }
        if (this.element) {
          this.element[c ? "addCls" : "removeCls"](this.getHiddenCls());
        }
        this.fireEvent(c ? "hide" : "show", this);
      },
      updateHiddenCls: function (b, c) {
        if (this.isHidden()) {
          this.element.replaceCls(c, b);
        }
      },
      isHidden: function () {
        return this.getHidden();
      },
      hide: function (b) {
        this.setCurrentAlignmentInfo(null);
        if (this.activeAnimation) {
          this.activeAnimation.on({
            animationend: function () {
              this.hide(b);
            },
            scope: this,
            single: !0,
          });
          return this;
        }
        if (!this.getHidden()) {
          if (b === undefined || (b && b.isComponent)) {
            b = this.getHideAnimation();
          }
          if (b) {
            if (b === !0) {
              b = "fadeOut";
            }
            this.onBefore({
              hiddenchange: "animateFn",
              scope: this,
              single: !0,
              args: [b],
            });
          }
          this.setHidden(!0);
        }
        return this;
      },
      show: function (b) {
        if (this.activeAnimation) {
          this.activeAnimation.on({
            animationend: function () {
              this.show(b);
            },
            scope: this,
            single: !0,
          });
          return this;
        }
        var c = this.getHidden();
        if (c || c === null) {
          if (b === !0) {
            b = "fadeIn";
          } else {
            if (b === undefined || (b && b.isComponent)) {
              b = this.getShowAnimation();
            }
          }
          if (b) {
            this.beforeShowAnimation();
            this.onBefore({
              hiddenchange: "animateFn",
              scope: this,
              single: !0,
              args: [b],
            });
          }
          this.setHidden(!1);
        }
        return this;
      },
      beforeShowAnimation: function () {
        if (this.element) {
          this.renderElement.show();
          this.element.removeCls(this.getHiddenCls());
        }
      },
      animateFn: function (d, f, b, g, h, c) {
        var e = this;
        if (d && (!b || (b && this.isPainted()))) {
          this.activeAnimation = new Ext.fx.Animation(d);
          this.activeAnimation.setElement(f.element);
          if (!Ext.isEmpty(b)) {
            this.activeAnimation.setOnEnd(function () {
              e.activeAnimation = null;
              c.resume();
            });
            c.pause();
          }
          Ext.Animator.run(e.activeAnimation);
        }
      },
      setVisibility: function (b) {
        this.renderElement.setVisibility(b);
      },
      isRendered: function () {
        return this.rendered;
      },
      isPainted: function () {
        return this.renderElement.isPainted();
      },
      applyTpl: function (b) {
        return Ext.isObject(b) && b.isTemplate ? b : new Ext.XTemplate(b);
      },
      applyData: function (b) {
        if (Ext.isObject(b)) {
          return Ext.apply({}, b);
        } else {
          if (!b) {
            b = {};
          }
        }
        return b;
      },
      updateData: function (c) {
        var b = this;
        if (c) {
          var d = b.getTpl(),
            e = b.getTplWriteMode();
          if (d) {
            d[e](b.getInnerHtmlElement(), c);
          }
          this.fireEvent("updatedata", b, c);
        }
      },
      applyRecord: function (b) {
        if (b && Ext.isObject(b) && b.isModel) {
          return b;
        }
        return null;
      },
      updateRecord: function (c, d) {
        var b = this;
        if (d) {
          d.unjoin(b);
        }
        if (!c) {
          b.updateData("");
        } else {
          c.join(b);
          b.updateData(c.getData(!0));
        }
      },
      afterEdit: function () {
        this.updateRecord(this.getRecord());
      },
      afterErase: function () {
        this.setRecord(null);
      },
      applyItemId: function (b) {
        return b || this.getId();
      },
      isXType: function (b, c) {
        if (c) {
          return this.xtypes.indexOf(b) != -1;
        }
        return Boolean(this.xtypesMap[b]);
      },
      getXTypes: function () {
        return this.xtypesChain.join("/");
      },
      getDraggableBehavior: function () {
        var b = this.draggableBehavior;
        if (!b) {
          b = this.draggableBehavior = new Ext.behavior.Draggable(this);
        }
        return b;
      },
      applyDraggable: function (b) {
        this.getDraggableBehavior().setConfig(b);
      },
      getDraggable: function () {
        return this.getDraggableBehavior().getDraggable();
      },
      getTranslatableBehavior: function () {
        var b = this.translatableBehavior;
        if (!b) {
          b = this.translatableBehavior = new Ext.behavior.Translatable(this);
        }
        return b;
      },
      applyTranslatable: function (b) {
        this.getTranslatableBehavior().setConfig(b);
      },
      getTranslatable: function () {
        return this.getTranslatableBehavior().getTranslatable();
      },
      translateAxis: function (f, b, e) {
        var c, d;
        if (f === "x") {
          c = b;
        } else {
          d = b;
        }
        return this.translate(c, d, e);
      },
      translate: function () {
        var b = this.getTranslatable();
        if (!b) {
          this.setTranslatable(!0);
          b = this.getTranslatable();
        }
        b.translate.apply(b, arguments);
      },
      setRendered: function (b) {
        var c = this.rendered;
        if (b !== c) {
          this.rendered = b;
          return !0;
        }
        return !1;
      },
      setSize: function (c, b) {
        if (c != undefined) {
          this.setWidth(c);
        }
        if (b != undefined) {
          this.setHeight(b);
        }
      },
      doAddListener: function (c, f, e, b, d) {
        if (b && "element" in b) {
          return this[b.element].doAddListener(c, f, e || this, b, d);
        }
        if (c == "painted" || c == "resize") {
          return this.element.doAddListener(c, f, e || this, b, d);
        }
        return this.callParent(arguments);
      },
      doRemoveListener: function (e, f, d, b, c) {
        if (b && "element" in b) {
          this[b.element].doRemoveListener(e, f, d || this, b, c);
        }
        return this.callParent(arguments);
      },
      showBy: function (e, d) {
        var b = this,
          c = Ext.Viewport,
          f = b.getParent();
        b.setVisibility(!1);
        if (f !== c) {
          c.add(b);
        }
        b.show();
        b.on({
          hide: "onShowByErased",
          destroy: "onShowByErased",
          single: !0,
          scope: b,
        });
        c.on("resize", "alignTo", b, { args: [e, d] });
        b.alignTo(e, d);
        b.setVisibility(!0);
      },
      onShowByErased: function () {
        Ext.Viewport.un("resize", "alignTo", this);
      },
      getAlignmentInfo: function (c, i) {
        var h = c.isComponent ? c.renderElement : c,
          b = h.getPageBox(),
          j = this.renderElement,
          g = j.getPageBox(),
          f = {
            alignToBox: b,
            alignment: i,
            top: b.top,
            left: b.left,
            alignToWidth: b.width,
            alignToHeight: b.height,
            width: g.width,
            height: g.height,
          },
          e = this.getCurrentAlignmentInfo(),
          d = !0;
        if (!Ext.isEmpty(e)) {
          Ext.Object.each(f, function (f, b) {
            if (!Ext.isObject(b) && e[f] != b) {
              d = !1;
              return !1;
            }
            return !0;
          });
        } else {
          d = !1;
        }
        return { isAligned: d, stats: f };
      },
      getCurrentAlignmentInfo: function () {
        return this.$currentAlignmentInfo;
      },
      setCurrentAlignmentInfo: function (b) {
        this.$currentAlignmentInfo = Ext.isEmpty(b)
          ? null
          : Ext.merge({}, b.stats ? b.stats : b);
      },
      alignTo: function (z, e) {
        var f = this.getAlignmentInfo(z, e);
        if (f.isAligned) {
          return;
        }
        var i = f.stats.alignToBox,
          b = this.getParent().element.getPageBox(),
          k = f.stats.alignToHeight,
          l = f.stats.alignToWidth,
          g = f.stats.height,
          h = f.stats.width;
        b.bottom -= 5;
        b.height -= 10;
        b.left += 5;
        b.right -= 5;
        b.top += 5;
        b.width -= 10;
        if (!e || e === "auto") {
          if (b.bottom - i.bottom < g) {
            if (i.top - b.top < g) {
              if (i.left - b.left < h) {
                e = "cl-cr?";
              } else {
                e = "cr-cl?";
              }
            } else {
              e = "bc-tc?";
            }
          } else {
            e = "tc-bc?";
          }
        }
        var q = e.match(this.alignmentRegex);
        var u = q[1].split(""),
          v = q[2].split(""),
          y = q[3] === "?",
          r = u[0],
          w = u[1] || r,
          m = v[0],
          o = v[1] || m,
          d = i.top,
          c = i.left,
          j = k / 2,
          x = l / 2,
          n = h / 2,
          p = g / 2,
          s,
          t;
        switch (r) {
          case "t":
            switch (m) {
              case "c":
                d += j;
                break;
              case "b":
                d += k;
            }
            break;
          case "b":
            switch (m) {
              case "c":
                d -= g - j;
                break;
              case "t":
                d -= g;
                break;
              case "b":
                d -= g - k;
            }
            break;
          case "c":
            switch (m) {
              case "t":
                d -= p;
                break;
              case "c":
                d -= p - j;
                break;
              case "b":
                d -= p - k;
            }
            break;
        }
        switch (w) {
          case "l":
            switch (o) {
              case "c":
                c += j;
                break;
              case "r":
                c += l;
            }
            break;
          case "r":
            switch (o) {
              case "r":
                c -= h - l;
                break;
              case "c":
                c -= h - n;
                break;
              case "l":
                c -= h;
            }
            break;
          case "c":
            switch (o) {
              case "l":
                c -= n;
                break;
              case "c":
                c -= n - x;
                break;
              case "r":
                c -= n - l;
            }
            break;
        }
        if (y) {
          s = b.left + b.width - h;
          t = b.top + b.height - g;
          c = Math.max(b.left, Math.min(s, c));
          d = Math.max(b.top, Math.min(t, d));
        }
        this.setLeft(c);
        this.setTop(d);
        this.setCurrentAlignmentInfo(f);
      },
      up: function (c) {
        var b = this.parent;
        if (c) {
          for (; b; b = b.parent) {
            if (Ext.ComponentQuery.is(b, c)) {
              return b;
            }
          }
        }
        return b;
      },
      getBubbleTarget: function () {
        return this.getParent();
      },
      destroy: function () {
        this.destroy = Ext.emptyFn;
        var e = this.getParent(),
          d = this.referenceList,
          b,
          f,
          c;
        this.isDestroying = !0;
        Ext.destroy(this.getTranslatable(), this.getPlugins());
        if (e) {
          e.remove(this, !1);
        }
        for (b = 0, f = d.length; b < f; b++) {
          c = d[b];
          this[c].destroy();
          delete this[c];
        }
        Ext.destroy(this.innerHtmlElement);
        this.setRecord(null);
        this.callSuper();
        Ext.ComponentManager.unregister(this);
      },
    },
    function () {}
  );
})(Ext.baseCSSPrefix);
Ext.define("Ext.layout.Abstract", {
  mixins: [Ext.mixin.Observable],
  isLayout: !0,
  constructor: function (a) {
    this.initialConfig = a;
  },
  setContainer: function (a) {
    this.container = a;
    this.initConfig(this.initialConfig);
    return this;
  },
  onItemAdd: function () {},
  onItemRemove: function () {},
  onItemMove: function () {},
  onItemCenteredChange: function () {},
  onItemFloatingChange: function () {},
  onItemDockedChange: function () {},
  onItemInnerStateChange: function () {},
});
Ext.define("Ext.mixin.Bindable", {
  extend: Ext.mixin.Mixin,
  mixinConfig: { id: "bindable" },
  bind: function (g, c, a, h, f) {
    if (!a) {
      a = c;
    }
    var b = g[c],
      e,
      d;
    if (b && b.hasOwnProperty("$binding")) {
      d = b.$binding;
      if (d.bindingMethod === a && d.bindingScope === this) {
        return this;
      }
    }
    g[c] = e = function () {
      var b = e.$binding,
        i = b.bindingScope,
        d = Array.prototype.slice.call(arguments);
      d.push(arguments);
      if (f) {
        d.push.apply(d, f);
      }
      if (!b.preventDefault && i[b.bindingMethod].apply(i, d) !== !1) {
        return b.boundFn.apply(this, arguments);
      }
    };
    e.$binding = {
      preventDefault: !!h,
      boundFn: b,
      bindingMethod: a,
      bindingScope: this,
    };
    return this;
  },
  unbind: function (f, e, d) {
    if (!d) {
      d = e;
    }
    var g = f[e],
      a = g.$binding,
      b,
      c;
    while (a) {
      b = a.boundFn;
      if (a.bindingMethod === d && a.bindingScope === this) {
        if (c) {
          c.boundFn = b;
        } else {
          f[e] = b;
        }
        return this;
      }
      c = a;
      a = b.$binding;
    }
    return this;
  },
});
Ext.define("Ext.util.Wrapper", {
  mixins: [Ext.mixin.Bindable],
  constructor: function (b, a) {
    var c = this.link("element", Ext.Element.create(b));
    if (a) {
      c.insertBefore(a);
      this.wrap(a);
    }
  },
  bindSize: function (c) {
    var a = this.wrappedElement,
      b;
    this.boundSizeName = c;
    this.boundMethodName = b = c === "width" ? "setWidth" : "setHeight";
    this.bind(a, b, "onBoundSizeChange");
    a[b].call(a, a.getStyleValue(c));
  },
  onBoundSizeChange: function (a, c) {
    var b = this.element;
    if (typeof a === "string" && a.substr(-1) === "%") {
      c[0] = "100%";
    } else {
      a = "";
    }
    b[this.boundMethodName].call(b, a);
  },
  wrap: function (b) {
    var c = this.element,
      a;
    this.wrappedElement = b;
    a = c.dom;
    while (a.firstElementChild !== null) {
      a = a.firstElementChild;
    }
    a.appendChild(b.dom);
  },
  destroy: function () {
    var f = this.element,
      d = f.dom,
      a = this.wrappedElement,
      b = this.boundMethodName,
      e = d.parentNode,
      c;
    if (b) {
      this.unbind(a, b, "onBoundSizeChange");
      c = f.getStyle(this.boundSizeName);
      if (c) {
        a[b].call(a, c);
      }
    }
    if (e) {
      if (!a.isDestroyed) {
        e.replaceChild(d.firstElementChild, d);
      }
      delete this.wrappedElement;
    }
    this.callSuper();
  },
});
Ext.define("Ext.layout.wrapper.BoxDock", {
  config: {
    direction: "horizontal",
    element: { className: "x-dock" },
    bodyElement: { className: "x-dock-body" },
    innerWrapper: null,
    sizeState: !1,
    container: null,
  },
  positionMap: { top: "start", left: "start", bottom: "end", right: "end" },
  constructor: function (a) {
    this.items = { start: [], end: [] };
    this.itemsCount = 0;
    this.initConfig(a);
  },
  addItems: function (b) {
    var a, d, c;
    for (a = 0, d = b.length; a < d; a++) {
      c = b[a];
      this.addItem(c);
    }
  },
  addItem: function (a) {
    var k = a.getDocked(),
      h = this.positionMap[k],
      j = a.$dockWrapper,
      g = this.getContainer(),
      m = g.indexOf(a),
      i = a.element,
      n = this.items,
      d = n[h],
      c,
      l,
      e,
      b,
      f;
    if (j) {
      j.removeItem(a);
    }
    a.$dockWrapper = this;
    a.addCls("x-dock-item");
    a.addCls("x-docked-" + k);
    for (c = 0, l = d.length; c < l; c++) {
      e = d[c];
      f = g.indexOf(e);
      if (f > m) {
        b = e.element;
        d.splice(c, 0, a);
        break;
      }
    }
    if (!b) {
      d.push(a);
      b = this.getBodyElement();
    }
    this.itemsCount++;
    if (h === "start") {
      i.insertBefore(b);
    } else {
      i.insertAfter(b);
    }
  },
  removeItem: function (a) {
    var b = a.getDocked(),
      c = this.items[this.positionMap[b]];
    Ext.Array.remove(c, a);
    a.element.detach();
    delete a.$dockWrapper;
    a.removeCls("x-dock-item");
    a.removeCls("x-docked-" + b);
    if (--this.itemsCount === 0) {
      this.destroy();
    }
  },
  getItemsSlice: function (g) {
    var f = this.getContainer(),
      h = this.items,
      e = [],
      b,
      a,
      d,
      c;
    for (b = h.start, a = 0, d = b.length; a < d; a++) {
      c = b[a];
      if (f.indexOf(c) > g) {
        e.push(c);
      }
    }
    for (b = h.end, a = 0, d = b.length; a < d; a++) {
      c = b[a];
      if (f.indexOf(c) > g) {
        e.push(c);
      }
    }
    return e;
  },
  applyElement: function (a) {
    return Ext.Element.create(a);
  },
  updateElement: function (a) {
    a.addCls("x-dock-" + this.getDirection());
  },
  applyBodyElement: function (a) {
    return Ext.Element.create(a);
  },
  updateBodyElement: function (a) {
    this.getElement().append(a);
  },
  updateInnerWrapper: function (b, a) {
    var c = this.getBodyElement();
    if (a && a.$outerWrapper === this) {
      a.getElement().detach();
      delete a.$outerWrapper;
    }
    if (b) {
      b.setSizeState(this.getSizeState());
      b.$outerWrapper = this;
      c.append(b.getElement());
    }
  },
  updateSizeState: function (b) {
    var a = this.getInnerWrapper();
    this.getElement().setSizeState(b);
    if (a) {
      a.setSizeState(b);
    }
  },
  destroy: function () {
    var a = this.getInnerWrapper(),
      c = this.$outerWrapper,
      b;
    if (a) {
      if (c) {
        c.setInnerWrapper(a);
      } else {
        b = a.getElement();
        if (!b.isDestroyed) {
          b.replace(this.getElement());
        }
        delete a.$outerWrapper;
      }
    }
    delete this.$outerWrapper;
    this.setInnerWrapper(null);
    this.unlink("_bodyElement", "_element");
    this.callSuper();
  },
});
Ext.define("Ext.layout.wrapper.Inner", {
  config: { sizeState: null, container: null },
  constructor: function (a) {
    this.initConfig(a);
  },
  getElement: function () {
    return this.getContainer().bodyElement;
  },
  setInnerWrapper: Ext.emptyFn,
  getInnerWrapper: Ext.emptyFn,
});
Ext.define("Ext.layout.Default", {
  extend: Ext.layout.Abstract,
  isAuto: !0,
  alias: ["layout.default", "layout.auto"],
  config: { animation: null },
  centerWrapperClass: "x-center",
  dockWrapperClass: "x-dock",
  positionMap: {
    top: "start",
    left: "start",
    middle: "center",
    bottom: "end",
    right: "end",
  },
  positionDirectionMap: {
    top: "vertical",
    bottom: "vertical",
    left: "horizontal",
    right: "horizontal",
  },
  setContainer: function (b) {
    var a = { delegate: "> component" };
    this.dockedItems = [];
    this.callSuper(arguments);
    b.on("centeredchange", "onItemCenteredChange", this, a, "before")
      .on("floatingchange", "onItemFloatingChange", this, a, "before")
      .on("dockedchange", "onBeforeItemDockedChange", this, a, "before")
      .on("afterdockedchange", "onAfterItemDockedChange", this, a);
  },
  monitorSizeStateChange: function () {
    this.monitorSizeStateChange = Ext.emptyFn;
    this.container.on("sizestatechange", "onContainerSizeStateChange", this);
  },
  monitorSizeFlagsChange: function () {
    this.monitorSizeFlagsChange = Ext.emptyFn;
    this.container.on("sizeflagschange", "onContainerSizeFlagsChange", this);
  },
  onItemAdd: function (a) {
    var b = a.getDocked();
    if (b !== null) {
      this.dockItem(a);
    } else {
      if (a.isCentered()) {
        this.onItemCenteredChange(a, !0);
      } else {
        if (a.isFloating()) {
          this.onItemFloatingChange(a, !0);
        } else {
          this.onItemInnerStateChange(a, !0);
        }
      }
    }
  },
  onItemInnerStateChange: function (a, b, c) {
    if (b) {
      this.insertInnerItem(a, this.container.innerIndexOf(a));
    } else {
      this.removeInnerItem(a);
    }
  },
  insertInnerItem: function (h, e) {
    var d = this.container,
      f = d.innerElement.dom,
      g = h.element.dom,
      b = e !== -1 ? d.getInnerAt(e + 1) : null,
      c = null,
      a;
    if (b) {
      a = b.getTranslatable();
      if (a && a.getUseWrapper()) {
        c = a.getWrapper().dom;
      } else {
        c = b ? b.element.dom : null;
      }
    }
    f.insertBefore(g, c);
    return this;
  },
  insertBodyItem: function (a) {
    var b = this.container.setUseBodyElement(!0),
      c = b.bodyElement.dom;
    if (a.getZIndex() === null) {
      a.setZIndex((b.indexOf(a) + 1) * 2);
    }
    c.insertBefore(a.element.dom, c.firstChild);
    return this;
  },
  removeInnerItem: function (a) {
    a.element.detach();
  },
  removeBodyItem: function (a) {
    a.setZIndex(null);
    a.element.detach();
  },
  onItemRemove: function (a, d, b) {
    var c = a.getDocked();
    if (c) {
      this.undockItem(a);
    } else {
      if (a.isCentered()) {
        this.onItemCenteredChange(a, !1);
      } else {
        if (a.isFloating()) {
          this.onItemFloatingChange(a, !1);
        } else {
          this.onItemInnerStateChange(a, !1, b);
        }
      }
    }
  },
  onItemMove: function (a, b, c) {
    if (a.isCentered() || a.isFloating()) {
      a.setZIndex((b + 1) * 2);
    } else {
      if (a.isInnerItem()) {
        this.insertInnerItem(a, this.container.innerIndexOf(a));
      } else {
        this.undockItem(a);
        this.dockItem(a);
      }
    }
  },
  onItemCenteredChange: function (a, c) {
    var b = "$centerWrapper";
    if (c) {
      this.insertBodyItem(a);
      a.link(
        b,
        new Ext.util.Wrapper({ className: this.centerWrapperClass }, a.element)
      );
    } else {
      a.unlink(b);
      this.removeBodyItem(a);
    }
  },
  onItemFloatingChange: function (a, b) {
    if (b) {
      this.insertBodyItem(a);
    } else {
      this.removeBodyItem(a);
    }
  },
  onBeforeItemDockedChange: function (b, c, a) {
    if (a) {
      this.undockItem(b);
    }
  },
  onAfterItemDockedChange: function (b, a, c) {
    if (a) {
      this.dockItem(b);
    }
  },
  onContainerSizeStateChange: function () {
    var a = this.getDockWrapper();
    if (a) {
      a.setSizeState(this.container.getSizeState());
    }
  },
  onContainerSizeFlagsChange: function () {
    var b = this.dockedItems,
      a,
      d,
      c;
    for (a = 0, d = b.length; a < d; a++) {
      c = b[a];
      this.refreshDockedItemLayoutSizeFlags(c);
    }
  },
  refreshDockedItemLayoutSizeFlags: function (b) {
    var a = this.container,
      c = this.positionDirectionMap[b.getDocked()],
      d = c === "horizontal" ? a.LAYOUT_HEIGHT : a.LAYOUT_WIDTH,
      e = a.getSizeFlags() & d;
    b.setLayoutSizeFlags(e);
  },
  dockItem: function (c) {
    var m = Ext.layout.wrapper.BoxDock,
      e = this.dockedItems,
      o = e.length,
      i = this.container,
      t = i.indexOf(c),
      p = this.positionDirectionMap,
      n = p[c.getDocked()],
      h = this.dockInnerWrapper,
      k,
      g,
      l,
      u,
      s,
      j,
      f,
      r,
      b,
      a,
      d,
      q;
    this.monitorSizeStateChange();
    this.monitorSizeFlagsChange();
    if (!h) {
      h = this.link(
        "dockInnerWrapper",
        new Ext.layout.wrapper.Inner({ container: this.container })
      );
    }
    if (o === 0) {
      e.push(c);
      a = new m({ container: this.container, direction: n });
      a.addItem(c);
      a.getElement().replace(h.getElement());
      a.setInnerWrapper(h);
      i.onInitialized("onContainerSizeStateChange", this);
    } else {
      for (g = 0; g < o; g++) {
        l = e[g];
        u = i.indexOf(l);
        if (u > t) {
          f = s || e[0];
          e.splice(g, 0, c);
          break;
        }
        s = l;
      }
      if (!f) {
        f = e[o - 1];
        e.push(c);
      }
      r = f.getDocked();
      b = f.$dockWrapper;
      k = p[r];
      if (n === k) {
        b.addItem(c);
      } else {
        j = b.getItemsSlice(t);
        a = new m({ container: this.container, direction: n });
        if (j.length > 0) {
          if (j.length === b.itemsCount) {
            d = b;
            a.setSizeState(d.getSizeState());
            a.getElement().replace(d.getElement());
          } else {
            d = new m({ container: this.container, direction: k });
            d.setInnerWrapper(b.getInnerWrapper());
            d.addItems(j);
            b.setInnerWrapper(a);
          }
          a.setInnerWrapper(d);
        } else {
          q = b.getInnerWrapper();
          b.setInnerWrapper(null);
          a.setInnerWrapper(q);
          b.setInnerWrapper(a);
        }
        a.addItem(c);
      }
    }
    i.onInitialized("refreshDockedItemLayoutSizeFlags", this, [c]);
  },
  getDockWrapper: function () {
    var a = this.dockedItems;
    if (a.length > 0) {
      return a[0].$dockWrapper;
    }
    return null;
  },
  undockItem: function (a) {
    var b = this.dockedItems;
    if (a.$dockWrapper) {
      a.$dockWrapper.removeItem(a);
    }
    Ext.Array.remove(b, a);
    a.setLayoutSizeFlags(0);
  },
  destroy: function () {
    this.dockedItems.length = 0;
    delete this.dockedItems;
    this.callSuper();
  },
});
Ext.define("Ext.layout.Box", {
  extend: Ext.layout.Default,
  config: { orient: "horizontal", align: "start", pack: "start" },
  alias: "layout.tablebox",
  layoutBaseClass: "x-layout-tablebox",
  itemClass: "x-layout-tablebox-item",
  setContainer: function (a) {
    this.callSuper(arguments);
    a.innerElement.addCls(this.layoutBaseClass);
    a.on("flexchange", "onItemFlexChange", this, { delegate: "> component" });
  },
  onItemInnerStateChange: function (b, a) {
    this.callSuper(arguments);
    b.toggleCls(this.itemClass, a);
  },
  onItemFlexChange: function () {},
});
Ext.define("Ext.fx.layout.card.Abstract", {
  extend: Ext.Evented,
  isAnimation: !0,
  config: { direction: "left", duration: null, reverse: null, layout: null },
  updateLayout: function () {
    this.enable();
  },
  enable: function () {
    var a = this.getLayout();
    if (a) {
      a.onBefore("activeitemchange", "onActiveItemChange", this);
    }
  },
  disable: function () {
    var a = this.getLayout();
    if (this.isAnimating) {
      this.stopAnimation();
    }
    if (a) {
      a.unBefore("activeitemchange", "onActiveItemChange", this);
    }
  },
  onActiveItemChange: Ext.emptyFn,
  destroy: function () {
    var a = this.getLayout();
    if (this.isAnimating) {
      this.stopAnimation();
    }
    if (a) {
      a.unBefore("activeitemchange", "onActiveItemChange", this);
    }
    this.setLayout(null);
    if (this.observableId) {
      this.fireEvent("destroy", this);
      this.clearListeners();
      this.clearManagedListeners();
    }
  },
});
Ext.define("Ext.fx.State", {
  isAnimatable: {
    "background-color": !0,
    "background-image": !0,
    "background-position": !0,
    "border-bottom-color": !0,
    "border-bottom-width": !0,
    "border-color": !0,
    "border-left-color": !0,
    "border-left-width": !0,
    "border-right-color": !0,
    "border-right-width": !0,
    "border-spacing": !0,
    "border-top-color": !0,
    "border-top-width": !0,
    "border-width": !0,
    bottom: !0,
    color: !0,
    crop: !0,
    "font-size": !0,
    "font-weight": !0,
    height: !0,
    left: !0,
    "letter-spacing": !0,
    "line-height": !0,
    "margin-bottom": !0,
    "margin-left": !0,
    "margin-right": !0,
    "margin-top": !0,
    "max-height": !0,
    "max-width": !0,
    "min-height": !0,
    "min-width": !0,
    opacity: !0,
    "outline-color": !0,
    "outline-offset": !0,
    "outline-width": !0,
    "padding-bottom": !0,
    "padding-left": !0,
    "padding-right": !0,
    "padding-top": !0,
    right: !0,
    "text-indent": !0,
    "text-shadow": !0,
    top: !0,
    "vertical-align": !0,
    visibility: !0,
    width: !0,
    "word-spacing": !0,
    "z-index": !0,
    zoom: !0,
    transform: !0,
  },
  constructor: function (a) {
    this.data = {};
    this.set(a);
  },
  setConfig: function (a) {
    this.set(a);
    return this;
  },
  setRaw: function (a) {
    this.data = a;
    return this;
  },
  clear: function () {
    return this.setRaw({});
  },
  setTransform: function (d, a) {
    var g = this.data,
      e = Ext.isArray(a),
      b = g.transform,
      c,
      f;
    if (!b) {
      b = g.transform = {
        translateX: 0,
        translateY: 0,
        translateZ: 0,
        scaleX: 1,
        scaleY: 1,
        scaleZ: 1,
        rotate: 0,
        rotateX: 0,
        rotateY: 0,
        rotateZ: 0,
        skewX: 0,
        skewY: 0,
      };
    }
    if (typeof d == "string") {
      switch (d) {
        case "translate":
          if (e) {
            c = a.length;
            if (c == 0) {
              break;
            }
            b.translateX = a[0];
            if (c == 1) {
              break;
            }
            b.translateY = a[1];
            if (c == 2) {
              break;
            }
            b.translateZ = a[2];
          } else {
            b.translateX = a;
          }
          break;
        case "rotate":
          if (e) {
            c = a.length;
            if (c == 0) {
              break;
            }
            b.rotateX = a[0];
            if (c == 1) {
              break;
            }
            b.rotateY = a[1];
            if (c == 2) {
              break;
            }
            b.rotateZ = a[2];
          } else {
            b.rotate = a;
          }
          break;
        case "scale":
          if (e) {
            c = a.length;
            if (c == 0) {
              break;
            }
            b.scaleX = a[0];
            if (c == 1) {
              break;
            }
            b.scaleY = a[1];
            if (c == 2) {
              break;
            }
            b.scaleZ = a[2];
          } else {
            b.scaleX = a;
            b.scaleY = a;
          }
          break;
        case "skew":
          if (e) {
            c = a.length;
            if (c == 0) {
              break;
            }
            b.skewX = a[0];
            if (c == 1) {
              break;
            }
            b.skewY = a[1];
          } else {
            b.skewX = a;
          }
          break;
        default:
          b[d] = a;
      }
    } else {
      for (f in d) {
        if (d.hasOwnProperty(f)) {
          a = d[f];
          this.setTransform(f, a);
        }
      }
    }
  },
  set: function (b, a) {
    var d = this.data,
      c;
    if (typeof b != "string") {
      for (c in b) {
        a = b[c];
        if (c === "transform") {
          this.setTransform(a);
        } else {
          d[c] = a;
        }
      }
    } else {
      if (b === "transform") {
        this.setTransform(a);
      } else {
        d[b] = a;
      }
    }
    return this;
  },
  unset: function (b) {
    var a = this.data;
    if (a.hasOwnProperty(b)) {
      delete a[b];
    }
    return this;
  },
  getData: function () {
    return this.data;
  },
});
Ext.define("Ext.fx.animation.Abstract", {
  extend: Ext.Evented,
  isAnimation: !0,
  config: {
    name: "",
    element: null,
    before: null,
    from: {},
    to: {},
    after: null,
    states: {},
    duration: 300,
    easing: "linear",
    iteration: 1,
    direction: "normal",
    delay: 0,
    onBeforeStart: null,
    onEnd: null,
    onBeforeEnd: null,
    scope: null,
    reverse: null,
    preserveEndState: !1,
    replacePrevious: !0,
  },
  STATE_FROM: "0%",
  STATE_TO: "100%",
  DIRECTION_UP: "up",
  DIRECTION_DOWN: "down",
  DIRECTION_LEFT: "left",
  DIRECTION_RIGHT: "right",
  stateNameRegex: /^(?:[\d\.]+)%$/,
  constructor: function () {
    this.states = {};
    this.callParent(arguments);
    return this;
  },
  applyElement: function (a) {
    return Ext.get(a);
  },
  applyBefore: function (a, b) {
    if (a) {
      return Ext.factory(a, Ext.fx.State, b);
    }
  },
  applyAfter: function (a, b) {
    if (a) {
      return Ext.factory(a, Ext.fx.State, b);
    }
  },
  setFrom: function (a) {
    return this.setState(this.STATE_FROM, a);
  },
  setTo: function (a) {
    return this.setState(this.STATE_TO, a);
  },
  getFrom: function () {
    return this.getState(this.STATE_FROM);
  },
  getTo: function () {
    return this.getState(this.STATE_TO);
  },
  setStates: function (b) {
    var c = this.stateNameRegex,
      a;
    for (a in b) {
      if (c.test(a)) {
        this.setState(a, b[a]);
      }
    }
    return this;
  },
  getStates: function () {
    return this.states;
  },
  stop: function () {
    this.fireEvent("stop", this);
  },
  destroy: function () {
    this.stop();
    this.callParent();
  },
  setState: function (c, d) {
    var b = this.getStates(),
      a;
    a = Ext.factory(d, Ext.fx.State, b[c]);
    if (a) {
      b[c] = a;
    }
    return this;
  },
  getState: function (a) {
    return this.getStates()[a];
  },
  getData: function () {
    var a = this.getStates(),
      c = {},
      e = this.getBefore(),
      f = this.getAfter(),
      j = a[this.STATE_FROM],
      k = a[this.STATE_TO],
      d = j.getData(),
      i = k.getData(),
      h,
      b,
      g;
    for (b in a) {
      if (a.hasOwnProperty(b)) {
        g = a[b];
        h = g.getData();
        c[b] = h;
      }
    }
    if (Ext.browser.is.AndroidStock2) {
      c["0.0001%"] = d;
    }
    return {
      before: e ? e.getData() : {},
      after: f ? f.getData() : {},
      states: c,
      from: d,
      to: i,
      duration: this.getDuration(),
      iteration: this.getIteration(),
      direction: this.getDirection(),
      easing: this.getEasing(),
      delay: this.getDelay(),
      onEnd: this.getOnEnd(),
      onBeforeEnd: this.getOnBeforeEnd(),
      onBeforeStart: this.getOnBeforeStart(),
      scope: this.getScope(),
      preserveEndState: this.getPreserveEndState(),
      replacePrevious: this.getReplacePrevious(),
    };
  },
});
Ext.define("Ext.fx.animation.Slide", {
  extend: Ext.fx.animation.Abstract,
  alternateClassName: "Ext.fx.animation.SlideIn",
  alias: ["animation.slide", "animation.slideIn"],
  config: {
    direction: "left",
    out: !1,
    offset: 0,
    easing: "auto",
    containerBox: "auto",
    elementBox: "auto",
    isElementBoxFit: !0,
    useCssTransform: !0,
  },
  reverseDirectionMap: { up: "down", down: "up", left: "right", right: "left" },
  applyEasing: function (a) {
    if (a === "auto") {
      return "ease-" + (this.getOut() ? "in" : "out");
    }
    return a;
  },
  getContainerBox: function () {
    var a = this._containerBox;
    if (a === "auto") {
      a = this.getElement().getParent().getPageBox();
    }
    return a;
  },
  getElementBox: function () {
    var a = this._elementBox;
    if (this.getIsElementBoxFit()) {
      return this.getContainerBox();
    }
    if (a === "auto") {
      a = this.getElement().getPageBox();
    }
    return a;
  },
  getData: function () {
    var o = this.getElementBox(),
      b = this.getContainerBox(),
      a = o ? o : b,
      j = this.getFrom(),
      m = this.getTo(),
      d = this.getOut(),
      c = this.getOffset(),
      g = this.getDirection(),
      n = this.getUseCssTransform(),
      p = this.getReverse(),
      e = 0,
      f = 0,
      h,
      i,
      k,
      l;
    if (p) {
      g = this.reverseDirectionMap[g];
    }
    switch (g) {
      case this.DIRECTION_UP:
        if (d) {
          f = b.top - a.top - a.height - c;
        } else {
          f = b.bottom - a.bottom + a.height + c;
        }
        break;
      case this.DIRECTION_DOWN:
        if (d) {
          f = b.bottom - a.bottom + a.height + c;
        } else {
          f = b.top - a.height - a.top - c;
        }
        break;
      case this.DIRECTION_RIGHT:
        if (d) {
          e = b.right - a.right + a.width + c;
        } else {
          e = b.left - a.left - a.width - c;
        }
        break;
      case this.DIRECTION_LEFT:
        if (d) {
          e = b.left - a.left - a.width - c;
        } else {
          e = b.right - a.right + a.width + c;
        }
        break;
    }
    h = d ? 0 : e;
    i = d ? 0 : f;
    if (n) {
      j.setTransform({ translateX: h, translateY: i });
    } else {
      j.set("left", h);
      j.set("top", i);
    }
    k = d ? e : 0;
    l = d ? f : 0;
    if (n) {
      m.setTransform({ translateX: k, translateY: l });
    } else {
      m.set("left", k);
      m.set("top", l);
    }
    return this.callParent(arguments);
  },
});
Ext.define("Ext.fx.animation.SlideOut", {
  extend: Ext.fx.animation.Slide,
  alias: ["animation.slideOut"],
  config: { out: !0 },
});
Ext.define("Ext.fx.animation.Fade", {
  extend: Ext.fx.animation.Abstract,
  alternateClassName: "Ext.fx.animation.FadeIn",
  alias: ["animation.fade", "animation.fadeIn"],
  config: {
    out: !1,
    before: { display: null, opacity: 0 },
    after: { opacity: null },
    reverse: null,
  },
  updateOut: function (c) {
    var b = this.getTo(),
      a = this.getFrom();
    if (c) {
      a.set("opacity", 1);
      b.set("opacity", 0);
    } else {
      a.set("opacity", 0);
      b.set("opacity", 1);
    }
  },
});
Ext.define("Ext.fx.animation.FadeOut", {
  extend: Ext.fx.animation.Fade,
  alias: "animation.fadeOut",
  config: { out: !0, before: {} },
});
Ext.define("Ext.fx.animation.Flip", {
  extend: Ext.fx.animation.Abstract,
  alias: "animation.flip",
  config: { easing: "ease-in", direction: "right", half: !1, out: null },
  getData: function () {
    var j = this.getFrom(),
      l = this.getTo(),
      i = this.getDirection(),
      b = this.getOut(),
      k = this.getHalf(),
      a = k ? 90 : 180,
      g = 1,
      h = 1,
      c = 0,
      d = 0,
      e = 0,
      f = 0;
    if (b) {
      h = 0.8;
    } else {
      g = 0.8;
    }
    switch (i) {
      case this.DIRECTION_UP:
        if (b) {
          e = a;
        } else {
          c = -a;
        }
        break;
      case this.DIRECTION_DOWN:
        if (b) {
          e = -a;
        } else {
          c = a;
        }
        break;
      case this.DIRECTION_RIGHT:
        if (b) {
          f = a;
        } else {
          d = -a;
        }
        break;
      case this.DIRECTION_LEFT:
        if (b) {
          f = -a;
        } else {
          d = a;
        }
        break;
    }
    j.setTransform({ rotateX: c, rotateY: d, scale: g });
    l.setTransform({ rotateX: e, rotateY: f, scale: h });
    return this.callParent(arguments);
  },
});
Ext.define("Ext.fx.animation.Pop", {
  extend: Ext.fx.animation.Abstract,
  alias: ["animation.pop", "animation.popIn"],
  alternateClassName: "Ext.fx.animation.PopIn",
  config: {
    out: !1,
    before: { display: null, opacity: 0 },
    after: { opacity: null },
  },
  getData: function () {
    var b = this.getTo(),
      a = this.getFrom(),
      c = this.getOut();
    if (c) {
      a.set("opacity", 1);
      a.setTransform({ scale: 1 });
      b.set("opacity", 0);
      b.setTransform({ scale: 0 });
    } else {
      a.set("opacity", 0);
      a.setTransform({ scale: 0 });
      b.set("opacity", 1);
      b.setTransform({ scale: 1 });
    }
    return this.callParent(arguments);
  },
});
Ext.define("Ext.fx.animation.PopOut", {
  extend: Ext.fx.animation.Pop,
  alias: "animation.popOut",
  config: { out: !0, before: {} },
});
Ext.define("Ext.fx.Animation", {
  constructor: function (b) {
    var c = Ext.fx.animation.Abstract,
      a;
    if (typeof b == "string") {
      a = b;
      b = {};
    } else {
      if (b && b.type) {
        a = b.type;
      }
    }
    if (a) {
      if (Ext.browser.is.AndroidStock2) {
        if (a == "pop") {
          a = "fade";
        }
        if (a == "popIn") {
          a = "fadeIn";
        }
        if (a == "popOut") {
          a = "fadeOut";
        }
      }
      c = Ext.ClassManager.getByAlias("animation." + a);
    }
    return Ext.factory(b, c);
  },
});
Ext.define("Ext.fx.layout.card.Style", {
  extend: Ext.fx.layout.card.Abstract,
  config: {
    inAnimation: {
      before: { visibility: null },
      preserveEndState: !1,
      replacePrevious: !0,
    },
    outAnimation: { preserveEndState: !1, replacePrevious: !0 },
  },
  constructor: function (c) {
    var b, a;
    this.initConfig(c);
    this.endAnimationCounter = 0;
    b = this.getInAnimation();
    a = this.getOutAnimation();
    b.on("animationend", "incrementEnd", this);
    a.on("animationend", "incrementEnd", this);
  },
  updateDirection: function (a) {
    this.getInAnimation().setDirection(a);
    this.getOutAnimation().setDirection(a);
  },
  updateDuration: function (a) {
    this.getInAnimation().setDuration(a);
    this.getOutAnimation().setDuration(a);
  },
  updateReverse: function (a) {
    this.getInAnimation().setReverse(a);
    this.getOutAnimation().setReverse(a);
  },
  incrementEnd: function () {
    this.endAnimationCounter++;
    if (this.endAnimationCounter > 1) {
      this.endAnimationCounter = 0;
      this.fireEvent("animationend", this);
    }
  },
  applyInAnimation: function (b, a) {
    return Ext.factory(b, Ext.fx.Animation, a);
  },
  applyOutAnimation: function (b, a) {
    return Ext.factory(b, Ext.fx.Animation, a);
  },
  updateInAnimation: function (a) {
    a.setScope(this);
  },
  updateOutAnimation: function (a) {
    a.setScope(this);
  },
  onActiveItemChange: function (h, d, e, i, b) {
    var f = this.getInAnimation(),
      a = this.getOutAnimation(),
      c,
      g;
    if (d && e && e.isPainted()) {
      c = d.renderElement;
      g = e.renderElement;
      f.setElement(c);
      a.setElement(g);
      a.setOnBeforeEnd(function (c, a) {
        if (a || Ext.Animator.hasRunningAnimations(c)) {
          b.firingArguments[1] = null;
          b.firingArguments[2] = null;
        }
      });
      a.setOnEnd(function () {
        b.resume();
      });
      c.dom.style.setProperty("visibility", "hidden", "important");
      d.show();
      Ext.Animator.run([a, f]);
      b.pause();
    }
  },
  destroy: function () {
    Ext.destroy(this.getInAnimation(), this.getOutAnimation());
    this.callParent(arguments);
  },
});
Ext.define("Ext.fx.layout.card.Slide", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.slide",
  config: {
    inAnimation: { type: "slide", easing: "ease-out" },
    outAnimation: { type: "slide", easing: "ease-out", out: !0 },
  },
  updateReverse: function (a) {
    this.getInAnimation().setReverse(a);
    this.getOutAnimation().setReverse(a);
  },
});
Ext.define("Ext.fx.layout.card.Cover", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.cover",
  config: {
    reverse: null,
    inAnimation: {
      before: { "z-index": 100 },
      after: { "z-index": 0 },
      type: "slide",
      easing: "ease-out",
    },
    outAnimation: {
      easing: "ease-out",
      from: { opacity: 0.99 },
      to: { opacity: 1 },
      out: !0,
    },
  },
  updateReverse: function (a) {
    this.getInAnimation().setReverse(a);
    this.getOutAnimation().setReverse(a);
  },
});
Ext.define("Ext.fx.layout.card.Reveal", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.reveal",
  config: {
    inAnimation: {
      easing: "ease-out",
      from: { opacity: 0.99 },
      to: { opacity: 1 },
    },
    outAnimation: {
      before: { "z-index": 100 },
      after: { "z-index": 0 },
      type: "slide",
      easing: "ease-out",
      out: !0,
    },
  },
  updateReverse: function (a) {
    this.getInAnimation().setReverse(a);
    this.getOutAnimation().setReverse(a);
  },
});
Ext.define("Ext.fx.layout.card.Fade", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.fade",
  config: {
    reverse: null,
    inAnimation: { type: "fade", easing: "ease-out" },
    outAnimation: { type: "fade", easing: "ease-out", out: !0 },
  },
});
Ext.define("Ext.fx.layout.card.Flip", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.flip",
  config: {
    duration: 500,
    inAnimation: {
      type: "flip",
      half: !0,
      easing: "ease-out",
      before: { "backface-visibility": "hidden" },
      after: { "backface-visibility": null },
    },
    outAnimation: {
      type: "flip",
      half: !0,
      easing: "ease-in",
      before: { "backface-visibility": "hidden" },
      after: { "backface-visibility": null },
      out: !0,
    },
  },
  onActiveItemChange: function (c, b, e, f, d) {
    var a = b.element.getParent();
    a.addCls("x-layout-card-perspective");
    this.on(
      "animationend",
      function () {
        a.removeCls("x-layout-card-perspective");
      },
      this,
      { single: !0 }
    );
    this.callParent(arguments);
  },
  updateDuration: function (d) {
    var a = d / 2,
      b = this.getInAnimation(),
      c = this.getOutAnimation();
    b.setDelay(a);
    b.setDuration(a);
    c.setDuration(a);
  },
});
Ext.define("Ext.fx.layout.card.Pop", {
  extend: Ext.fx.layout.card.Style,
  alias: "fx.layout.card.pop",
  config: {
    duration: 500,
    inAnimation: { type: "pop", easing: "ease-out" },
    outAnimation: { type: "pop", easing: "ease-in", out: !0 },
  },
  updateDuration: function (d) {
    var a = d / 2,
      b = this.getInAnimation(),
      c = this.getOutAnimation();
    b.setDelay(a);
    b.setDuration(a);
    c.setDuration(a);
  },
});
Ext.define("Ext.fx.layout.card.Scroll", {
  extend: Ext.fx.layout.card.Abstract,
  alias: "fx.layout.card.scroll",
  config: { duration: 150 },
  constructor: function (a) {
    this.initConfig(a);
  },
  getEasing: function () {
    var a = this.easing;
    if (!a) {
      this.easing = a = new Ext.fx.easing.Linear();
    }
    return a;
  },
  updateDuration: function (a) {
    this.getEasing().setDuration(a);
  },
  onActiveItemChange: function (l, e, j, m, k) {
    var f = this.getDirection(),
      g = this.getEasing(),
      b,
      i,
      h,
      d,
      c,
      a;
    if (e && j) {
      if (this.isAnimating) {
        this.stopAnimation();
      }
      e.setWidth("100%");
      e.setHeight("100%");
      b = this.getLayout().container.innerElement;
      d = b.getWidth();
      c = b.getHeight();
      i = e.renderElement;
      h = j.renderElement;
      this.oldItem = j;
      this.newItem = e;
      this.currentEventController = k;
      this.containerElement = b;
      this.isReverse = a = this.getReverse();
      e.show();
      if (f == "right") {
        f = "left";
        this.isReverse = a = !a;
      } else {
        if (f == "down") {
          f = "up";
          this.isReverse = a = !a;
        }
      }
      if (f == "left") {
        if (a) {
          g.setConfig({ startValue: d, endValue: 0 });
          b.dom.scrollLeft = d;
          h.setLeft(d);
        } else {
          g.setConfig({ startValue: 0, endValue: d });
          i.setLeft(d);
        }
      } else {
        if (a) {
          g.setConfig({ startValue: c, endValue: 0 });
          b.dom.scrollTop = c;
          h.setTop(c);
        } else {
          g.setConfig({ startValue: 0, endValue: c });
          i.setTop(c);
        }
      }
      this.startAnimation();
      k.pause();
    }
  },
  startAnimation: function () {
    this.isAnimating = !0;
    this.getEasing().setStartTime(Date.now());
    Ext.AnimationQueue.start(this.doAnimationFrame, this);
  },
  doAnimationFrame: function () {
    var b = this.getEasing(),
      a = this.getDirection(),
      c = "scrollTop",
      d;
    if (a == "left" || a == "right") {
      c = "scrollLeft";
    }
    if (b.isEnded) {
      this.stopAnimation();
    } else {
      d = b.getValue();
      this.containerElement.dom[c] = d;
    }
  },
  stopAnimation: function () {
    var a = this,
      e = a.getDirection(),
      d = "setTop",
      c = a.oldItem,
      b = a.newItem;
    if (e == "left" || e == "right") {
      d = "setLeft";
    }
    a.currentEventController.resume();
    if (a.isReverse && c && c.renderElement && c.renderElement.dom) {
      c.renderElement[d](null);
    } else {
      if (b && b.renderElement && b.renderElement.dom) {
        b.renderElement[d](null);
      }
    }
    Ext.AnimationQueue.stop(this.doAnimationFrame, this);
    a.isAnimating = !1;
    a.fireEvent("animationend", a);
  },
});
Ext.define("Ext.fx.layout.Card", {
  constructor: function (a) {
    var c = Ext.fx.layout.card.Abstract,
      b;
    if (!a) {
      return null;
    }
    if (typeof a == "string") {
      b = a;
      a = {};
    } else {
      if (a.type) {
        b = a.type;
      }
    }
    a.elementBox = !1;
    if (b) {
      if (Ext.browser.is.AndroidStock2) {
        if (b != "fade") {
          b = "scroll";
        }
      }
      c = Ext.ClassManager.getByAlias("fx.layout.card." + b);
    }
    return Ext.factory(a, c);
  },
});
Ext.define("Ext.layout.Card", {
  extend: Ext.layout.Default,
  alias: "layout.card",
  isCard: !0,
  layoutClass: "x-layout-card",
  itemClass: "x-layout-card-item",
  applyAnimation: function (a) {
    return new Ext.fx.layout.Card(a);
  },
  updateAnimation: function (a, b) {
    if (a && a.isAnimation) {
      a.setLayout(this);
    }
    if (b) {
      b.destroy();
    }
  },
  setContainer: function (a) {
    this.callSuper(arguments);
    a.innerElement.addCls(this.layoutClass);
    a.onInitialized("onContainerInitialized", this);
  },
  onContainerInitialized: function () {
    var b = this.container,
      c = b.getInnerAt(0),
      a = b.getActiveItem();
    if (a) {
      a.show();
      if (c && c !== a) {
        c.hide();
      }
    }
    b.on("activeitemchange", "onContainerActiveItemChange", this);
  },
  onContainerActiveItemChange: function (a) {
    this.relayEvent(arguments, "doActiveItemChange");
  },
  onItemInnerStateChange: function (a, c, e) {
    this.callSuper(arguments);
    var b = this.container,
      d = b.getActiveItem();
    a.toggleCls(this.itemClass, c);
    a.setLayoutSizeFlags(c ? b.LAYOUT_BOTH : 0);
    if (c) {
      if (d !== b.innerIndexOf(a) && d !== a && a !== b.pendingActiveItem) {
        a.hide();
      }
    } else {
      if (!e && !a.isDestroyed && a.isDestroying !== !0) {
        a.show();
      }
    }
  },
  doActiveItemChange: function (c, a, b) {
    if (b) {
      b.hide();
    }
    if (a) {
      a.show();
    }
  },
  destroy: function () {
    this.callParent(arguments);
    Ext.destroy(this.getAnimation());
  },
});
Ext.define("Ext.layout.Fit", {
  extend: Ext.layout.Default,
  isFit: !0,
  alias: "layout.fit",
  layoutClass: "x-layout-fit",
  itemClass: "x-layout-fit-item",
  setContainer: function (a) {
    this.callSuper(arguments);
    a.innerElement.addCls(this.layoutClass);
    this.onContainerSizeFlagsChange();
    this.monitorSizeFlagsChange();
  },
  onContainerSizeFlagsChange: function () {
    var a = this.container,
      d = a.getSizeFlags(),
      g = Boolean(d & a.LAYOUT_STRETCHED),
      c = a.innerItems,
      b,
      f,
      e;
    this.callSuper();
    for (b = 0, f = c.length; b < f; b++) {
      e = c[b];
      e.setLayoutSizeFlags(d);
    }
    a.innerElement.toggleCls("x-stretched", g);
  },
  onItemInnerStateChange: function (b, a) {
    this.callSuper(arguments);
    b.toggleCls(this.itemClass, a);
    b.setLayoutSizeFlags(a ? this.container.getSizeFlags() : 0);
  },
});
Ext.define("Ext.layout.FlexBox", {
  extend: Ext.layout.Box,
  alias: "layout.box",
  config: { align: "stretch" },
  layoutBaseClass: "x-layout-box",
  itemClass: "x-layout-box-item",
  setContainer: function (a) {
    this.callSuper(arguments);
    this.monitorSizeFlagsChange();
  },
  applyOrient: function (a) {
    return a;
  },
  updateOrient: function (c, b) {
    var a = this.container,
      d = { delegate: "> component" };
    if (c === "horizontal") {
      this.sizePropertyName = "width";
    } else {
      this.sizePropertyName = "height";
    }
    a.innerElement.swapCls("x-" + c, "x-" + b);
    if (b) {
      a.un(
        b === "horizontal" ? "widthchange" : "heightchange",
        "onItemSizeChange",
        this,
        d
      );
      this.redrawContainer();
    }
    a.on(
      c === "horizontal" ? "widthchange" : "heightchange",
      "onItemSizeChange",
      this,
      d
    );
  },
  onItemInnerStateChange: function (a, d) {
    this.callSuper(arguments);
    var b, c;
    a.toggleCls(this.itemClass, d);
    if (d) {
      b = a.getFlex();
      c = a.get(this.sizePropertyName);
      if (b) {
        this.doItemFlexChange(a, b);
      } else {
        if (c) {
          this.doItemSizeChange(a, c);
        }
      }
    }
    this.refreshItemSizeState(a);
  },
  refreshItemSizeState: function (c) {
    var h = c.isInnerItem(),
      b = this.container,
      e = b.LAYOUT_HEIGHT,
      f = b.LAYOUT_WIDTH,
      g = this.sizePropertyName,
      a = 0,
      d = b.getSizeFlags();
    if (h) {
      a |= b.LAYOUT_STRETCHED;
      if (this.getAlign() === "stretch") {
        a |= d & (g === "width" ? e : f);
      }
      if (c.getFlex()) {
        a |= d & (g === "width" ? f : e);
      }
    }
    c.setLayoutSizeFlags(a);
  },
  refreshAllItemSizedStates: function () {
    var b = this.container.innerItems,
      a,
      d,
      c;
    for (a = 0, d = b.length; a < d; a++) {
      c = b[a];
      this.refreshItemSizeState(c);
    }
  },
  onContainerSizeFlagsChange: function () {
    this.refreshAllItemSizedStates();
    this.callSuper(arguments);
  },
  onItemSizeChange: function (a, b) {
    if (a.isInnerItem()) {
      this.doItemSizeChange(a, b);
    }
  },
  doItemSizeChange: function (a, b) {
    if (b) {
      a.setFlex(null);
      this.redrawContainer();
    }
  },
  onItemFlexChange: function (a, b) {
    if (a.isInnerItem()) {
      this.doItemFlexChange(a, b);
      this.refreshItemSizeState(a);
    }
  },
  doItemFlexChange: function (b, a) {
    this.setItemFlex(b, a);
    if (a) {
      b.set(this.sizePropertyName, null);
    } else {
      this.redrawContainer();
    }
  },
  redrawContainer: function () {
    var b = this.container,
      a = b.element.dom.parentNode;
    if (a && a.nodeType !== 11) {
      b.innerElement.redraw();
    }
  },
  setItemFlex: function (c, a) {
    var b = c.element;
    b.toggleCls("x-flexed", !!a);
    if (!a) {
      a = "";
    } else {
      a = String(a);
    }
    if (Ext.browser.is.WebKit) {
      b.dom.style.setProperty("-webkit-box-flex", a, null);
    } else {
      if (Ext.browser.is.IE) {
        b.dom.style.setProperty("-ms-flex", a + " 0 0px", null);
      } else {
        b.dom.style.setProperty("flex", a + " 0 0px", null);
      }
    }
  },
  convertPosition: function (a) {
    var b = this.positionMap;
    if (b.hasOwnProperty(a)) {
      return b[a];
    }
    return a;
  },
  applyAlign: function (a) {
    return this.convertPosition(a);
  },
  updateAlign: function (c, a) {
    var b = this.container;
    b.innerElement.swapCls(c, a, !0, "x-align");
    if (a !== undefined) {
      this.refreshAllItemSizedStates();
    }
  },
  applyPack: function (a) {
    return this.convertPosition(a);
  },
  updatePack: function (b, a) {
    this.container.innerElement.swapCls(b, a, !0, "x-pack");
  },
});
Ext.define("Ext.layout.Float", {
  extend: Ext.layout.Default,
  alias: "layout.float",
  config: { direction: "left" },
  layoutClass: "layout-float",
  itemClass: "layout-float-item",
  setContainer: function (a) {
    this.callSuper(arguments);
    a.innerElement.addCls(this.layoutClass);
  },
  onItemInnerStateChange: function (b, a) {
    this.callSuper(arguments);
    b.toggleCls(this.itemClass, a);
  },
  updateDirection: function (c, b) {
    var a = "direction-";
    this.container.innerElement.swapCls(a + c, a + b);
  },
});
Ext.define("Ext.layout.HBox", {
  extend: Ext.layout.FlexBox,
  alias: "layout.hbox",
});
Ext.define("Ext.layout.VBox", {
  extend: Ext.layout.FlexBox,
  alias: "layout.vbox",
  config: { orient: "vertical" },
});
Ext.define("Ext.layout.wrapper.Dock", {
  config: {
    direction: "horizontal",
    element: { className: "x-dock" },
    bodyElement: { className: "x-dock-body" },
    innerWrapper: null,
    sizeState: !1,
    container: null,
  },
  positionMap: { top: "start", left: "start", bottom: "end", right: "end" },
  constructor: function (a) {
    this.items = { start: [], end: [] };
    this.itemsCount = 0;
    this.initConfig(a);
  },
  addItems: function (b) {
    var a, d, c;
    for (a = 0, d = b.length; a < d; a++) {
      c = b[a];
      this.addItem(c);
    }
  },
  addItem: function (a) {
    var l = a.getDocked(),
      j = this.positionMap[l],
      k = a.$dockWrapper,
      i = this.getContainer(),
      n = i.indexOf(a),
      o = this.items,
      e = o[j],
      d,
      f,
      c,
      m,
      g,
      b,
      h;
    if (k) {
      k.removeItem(a);
    }
    a.$dockWrapper = this;
    d = a.link(
      "$dockItemWrapper",
      new Ext.util.Wrapper({ className: "x-dock-item" })
    );
    a.addCls("x-docked-" + l);
    f = d.element;
    for (c = 0, m = e.length; c < m; c++) {
      g = e[c];
      h = i.indexOf(g);
      if (h > n) {
        b = g.element;
        e.splice(c, 0, a);
        break;
      }
    }
    if (!b) {
      e.push(a);
      b = this.getBodyElement();
    }
    this.itemsCount++;
    if (j === "start") {
      f.insertBefore(b);
    } else {
      f.insertAfter(b);
    }
    d.wrap(a.element);
    d.bindSize(this.getDirection() === "horizontal" ? "width" : "height");
  },
  removeItem: function (a) {
    var b = a.getDocked(),
      c = this.items[this.positionMap[b]];
    a.removeCls("x-docked-" + b);
    Ext.Array.remove(c, a);
    a.unlink("$dockItemWrapper");
    a.element.detach();
    delete a.$dockWrapper;
    if (--this.itemsCount === 0) {
      this.destroy();
    }
  },
  getItemsSlice: function (g) {
    var f = this.getContainer(),
      h = this.items,
      e = [],
      b,
      a,
      d,
      c;
    for (b = h.start, a = 0, d = b.length; a < d; a++) {
      c = b[a];
      if (f.indexOf(c) > g) {
        e.push(c);
      }
    }
    for (b = h.end, a = 0, d = b.length; a < d; a++) {
      c = b[a];
      if (f.indexOf(c) > g) {
        e.push(c);
      }
    }
    return e;
  },
  applyElement: function (a) {
    return Ext.Element.create(a);
  },
  updateElement: function (a) {
    a.addCls("x-dock-" + this.getDirection());
  },
  applyBodyElement: function (a) {
    return Ext.Element.create(a);
  },
  updateBodyElement: function (a) {
    this.getElement().append(a);
  },
  updateInnerWrapper: function (b, a) {
    var c = this.getBodyElement();
    if (a && a.$outerWrapper === this) {
      c.remove(a.getElement());
      delete a.$outerWrapper;
    }
    if (b) {
      b.setSizeState(this.getSizeState());
      b.$outerWrapper = this;
      c.append(b.getElement());
    }
  },
  updateSizeState: function (b) {
    var a = this.getInnerWrapper();
    this.getElement().setSizeState(b);
    if (a) {
      a.setSizeState(b);
    }
  },
  destroy: function () {
    var a = this.getInnerWrapper(),
      b = this.$outerWrapper;
    if (a) {
      if (b) {
        b.setInnerWrapper(a);
      } else {
        a.getElement().replace(this.getElement());
        delete a.$outerWrapper;
      }
    }
    delete this.$outerWrapper;
    this.setInnerWrapper(null);
    this.unlink("_bodyElement", "_element");
    this.callSuper();
  },
});
Ext.define("Ext.util.Filter", {
  isFilter: !0,
  config: {
    property: null,
    value: null,
    filterFn: Ext.emptyFn,
    anyMatch: !1,
    exactMatch: !1,
    caseSensitive: !1,
    root: null,
    id: undefined,
    scope: null,
  },
  applyId: function (a) {
    if (!a) {
      if (this.getProperty()) {
        a = this.getProperty() + "-" + String(this.getValue());
      }
      if (!a) {
        a = Ext.id(null, "ext-filter-");
      }
    }
    return a;
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  applyFilterFn: function (a) {
    if (a === Ext.emptyFn) {
      a = this.getInitialConfig("filter");
      if (a) {
        return a;
      }
      var b = this.getValue();
      if (!this.getProperty() && !b && b !== 0) {
        return Ext.emptyFn;
      } else {
        return this.createFilterFn();
      }
    }
    return a;
  },
  createFilterFn: function () {
    var a = this,
      b = a.createValueMatcher();
    return function (c) {
      var d = a.getRoot(),
        e = a.getProperty();
      if (d) {
        c = c[d];
      }
      return b.test(c[e]);
    };
  },
  createValueMatcher: function () {
    var b = this,
      a = b.getValue(),
      f = b.getAnyMatch(),
      e = b.getExactMatch(),
      d = b.getCaseSensitive(),
      c = Ext.String.escapeRegex;
    if (a === null || a === undefined || !a.exec) {
      a = String(a);
      if (f === !0) {
        a = c(a);
      } else {
        a = "^" + c(a);
        if (e === !0) {
          a += "$";
        }
      }
      a = new RegExp(a, d ? "" : "i");
    }
    return a;
  },
});
Ext.define("Ext.util.AbstractMixedCollection", {
  mixins: { observable: Ext.mixin.Observable },
  constructor: function (c, b) {
    var a = this;
    a.items = [];
    a.map = {};
    a.keys = [];
    a.length = 0;
    a.allowFunctions = c === !0;
    if (b) {
      a.getKey = b;
    }
    a.mixins.observable.constructor.call(a);
  },
  allowFunctions: !1,
  add: function (e, f) {
    var b = this,
      c = f,
      a = e,
      d;
    if (arguments.length == 1) {
      c = a;
      a = b.getKey(c);
    }
    if (typeof a != "undefined" && a !== null) {
      d = b.map[a];
      if (typeof d != "undefined") {
        return b.replace(a, c);
      }
      b.map[a] = c;
    }
    b.length++;
    b.items.push(c);
    b.keys.push(a);
    b.fireEvent("add", b.length - 1, c, a);
    return c;
  },
  getKey: function (a) {
    return a.id;
  },
  replace: function (a, c) {
    var b = this,
      d,
      e;
    if (arguments.length == 1) {
      c = arguments[0];
      a = b.getKey(c);
    }
    d = b.map[a];
    if (typeof a == "undefined" || a === null || typeof d == "undefined") {
      return b.add(a, c);
    }
    e = b.indexOfKey(a);
    b.items[e] = c;
    b.map[a] = c;
    b.fireEvent("replace", a, d, c);
    return c;
  },
  addAll: function (a) {
    var d = this,
      e = 0,
      c,
      f,
      b;
    if (arguments.length > 1 || Ext.isArray(a)) {
      c = arguments.length > 1 ? arguments : a;
      for (f = c.length; e < f; e++) {
        d.add(c[e]);
      }
    } else {
      for (b in a) {
        if (a.hasOwnProperty(b)) {
          if (d.allowFunctions || typeof a[b] != "function") {
            d.add(b, a[b]);
          }
        }
      }
    }
  },
  each: function (f, e) {
    var c = [].concat(this.items),
      a = 0,
      d = c.length,
      b;
    for (; a < d; a++) {
      b = c[a];
      if (f.call(e || b, b, a, d) === !1) {
        break;
      }
    }
  },
  eachKey: function (f, e) {
    var b = this.keys,
      d = this.items,
      a = 0,
      c = b.length;
    for (; a < c; a++) {
      f.call(e || window, b[a], d[a], a, c);
    }
  },
  findBy: function (f, c) {
    var d = this.keys,
      b = this.items,
      a = 0,
      e = b.length;
    for (; a < e; a++) {
      if (f.call(c || window, b[a], d[a])) {
        return b[a];
      }
    }
    return null;
  },
  insert: function (d, e, f) {
    var a = this,
      b = e,
      c = f;
    if (arguments.length == 2) {
      c = b;
      b = a.getKey(c);
    }
    if (a.containsKey(b)) {
      a.suspendEvents();
      a.removeAtKey(b);
      a.resumeEvents();
    }
    if (d >= a.length) {
      return a.add(b, c);
    }
    a.length++;
    Ext.Array.splice(a.items, d, 0, c);
    if (typeof b != "undefined" && b !== null) {
      a.map[b] = c;
    }
    Ext.Array.splice(a.keys, d, 0, b);
    a.fireEvent("add", d, c, b);
    return c;
  },
  remove: function (a) {
    return this.removeAt(this.indexOf(a));
  },
  removeAll: function (a) {
    Ext.each(
      a || [],
      function (b) {
        this.remove(b);
      },
      this
    );
    return this;
  },
  removeAt: function (b) {
    var a = this,
      d,
      c;
    if (b < a.length && b >= 0) {
      a.length--;
      d = a.items[b];
      Ext.Array.erase(a.items, b, 1);
      c = a.keys[b];
      if (typeof c != "undefined") {
        delete a.map[c];
      }
      Ext.Array.erase(a.keys, b, 1);
      a.fireEvent("remove", d, c);
      return d;
    }
    return !1;
  },
  removeAtKey: function (a) {
    return this.removeAt(this.indexOfKey(a));
  },
  getCount: function () {
    return this.length;
  },
  indexOf: function (a) {
    return Ext.Array.indexOf(this.items, a);
  },
  indexOfKey: function (a) {
    return Ext.Array.indexOf(this.keys, a);
  },
  get: function (a) {
    var b = this,
      d = b.map[a],
      c = d !== undefined ? d : typeof a == "number" ? b.items[a] : undefined;
    return typeof c != "function" || b.allowFunctions ? c : null;
  },
  getAt: function (a) {
    return this.items[a];
  },
  getByKey: function (a) {
    return this.map[a];
  },
  contains: function (a) {
    return Ext.Array.contains(this.items, a);
  },
  containsKey: function (a) {
    return typeof this.map[a] != "undefined";
  },
  clear: function () {
    var a = this;
    a.length = 0;
    a.items = [];
    a.keys = [];
    a.map = {};
    a.fireEvent("clear");
  },
  first: function () {
    return this.items[0];
  },
  last: function () {
    return this.items[this.length - 1];
  },
  sum: function (f, h, c, a) {
    var d = this.extractValues(f, h),
      g = d.length,
      e = 0,
      b;
    c = c || 0;
    a = a || a === 0 ? a : g - 1;
    for (b = c; b <= a; b++) {
      e += d[b];
    }
    return e;
  },
  collect: function (h, j, g) {
    var e = this.extractValues(h, j),
      i = e.length,
      f = {},
      d = [],
      a,
      c,
      b;
    for (b = 0; b < i; b++) {
      a = e[b];
      c = String(a);
      if ((g || !Ext.isEmpty(a)) && !f[c]) {
        f[c] = !0;
        d.push(a);
      }
    }
    return d;
  },
  extractValues: function (c, b) {
    var a = this.items;
    if (b) {
      a = Ext.Array.pluck(a, b);
    }
    return Ext.Array.pluck(a, c);
  },
  getRange: function (d, c) {
    var f = this,
      e = f.items,
      b = [],
      a;
    if (e.length < 1) {
      return b;
    }
    d = d || 0;
    c = Math.min(typeof c == "undefined" ? f.length - 1 : c, f.length - 1);
    if (d <= c) {
      for (a = d; a <= c; a++) {
        b[b.length] = e[a];
      }
    } else {
      for (a = d; a >= c; a--) {
        b[b.length] = e[a];
      }
    }
    return b;
  },
  filter: function (a, f, e, d) {
    var b = [],
      c;
    if (Ext.isString(a)) {
      b.push(
        Ext.create("Ext.util.Filter", {
          property: a,
          value: f,
          anyMatch: e,
          caseSensitive: d,
        })
      );
    } else {
      if (Ext.isArray(a) || a instanceof Ext.util.Filter) {
        b = b.concat(a);
      }
    }
    c = function (j) {
      var g = !0,
        i = b.length,
        c;
      for (c = 0; c < i; c++) {
        var h = b[c],
          l = h.getFilterFn(),
          k = h.getScope();
        g = g && l.call(k, j);
      }
      return g;
    };
    return this.filterBy(c);
  },
  filterBy: function (h, g) {
    var b = this,
      d = new this.self(),
      e = b.keys,
      c = b.items,
      f = c.length,
      a;
    d.getKey = b.getKey;
    for (a = 0; a < f; a++) {
      if (h.call(g || b, c[a], e[a])) {
        d.add(e[a], c[a]);
      }
    }
    return d;
  },
  findIndex: function (d, a, e, c, b) {
    if (Ext.isEmpty(a, !1)) {
      return -1;
    }
    a = this.createValueMatcher(a, c, b);
    return this.findIndexBy(
      function (f) {
        return f && a.test(f[d]);
      },
      null,
      e
    );
  },
  findIndexBy: function (h, d, e) {
    var b = this,
      f = b.keys,
      c = b.items,
      a = e || 0,
      g = c.length;
    for (; a < g; a++) {
      if (h.call(d || b, c[a], f[a])) {
        return a;
      }
    }
    return -1;
  },
  createValueMatcher: function (a, e, c, d) {
    if (!a.exec) {
      var b = Ext.String.escapeRegex;
      a = String(a);
      if (e === !0) {
        a = b(a);
      } else {
        a = "^" + b(a);
        if (d === !0) {
          a += "$";
        }
      }
      a = new RegExp(a, c ? "" : "i");
    }
    return a;
  },
  clone: function () {
    var c = this,
      b = new this.self(),
      e = c.keys,
      d = c.items,
      a = 0,
      f = d.length;
    for (; a < f; a++) {
      b.add(e[a], d[a]);
    }
    b.getKey = c.getKey;
    return b;
  },
});
Ext.define("Ext.util.Sorter", {
  isSorter: !0,
  config: {
    property: null,
    sorterFn: null,
    root: null,
    transform: null,
    direction: "ASC",
    id: undefined,
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  applyId: function (a) {
    if (!a) {
      a = this.getProperty();
      if (!a) {
        a = Ext.id(null, "ext-sorter-");
      }
    }
    return a;
  },
  createSortFunction: function (c) {
    var a = this,
      b = a.getDirection().toUpperCase() == "DESC" ? -1 : 1;
    return function (d, e) {
      return b * c.call(a, d, e);
    };
  },
  defaultSortFn: function (e, f) {
    var g = this,
      d = g._transform,
      c = g._root,
      a,
      b,
      h = g._property;
    if (c !== null && c !== undefined) {
      e = e[c];
      f = f[c];
    }
    a = e[h];
    b = f[h];
    if (d) {
      a = d(a);
      b = d(b);
    }
    return a > b ? 1 : a < b ? -1 : 0;
  },
  updateDirection: function () {
    this.updateSortFn();
  },
  updateSortFn: function () {
    this.sort = this.createSortFunction(
      this.getSorterFn() || this.defaultSortFn
    );
  },
  toggle: function () {
    this.setDirection(Ext.String.toggle(this.getDirection(), "ASC", "DESC"));
  },
});
Ext.define("Ext.util.Sortable", {
  extend: Ext.mixin.Mixin,
  isSortable: !0,
  mixinConfig: { hooks: { destroy: "destroy" } },
  defaultSortDirection: "ASC",
  initSortable: function () {
    var a = this,
      b = a.sorters;
    a.sorters = Ext.create(
      "Ext.util.AbstractMixedCollection",
      !1,
      function (a) {
        return a.id || a.property;
      }
    );
    if (b) {
      a.sorters.addAll(a.decodeSorters(b));
    }
  },
  sort: function (a, f, e, g) {
    var b = this,
      d,
      h,
      c;
    if (Ext.isArray(a)) {
      g = e;
      e = f;
      c = a;
    } else {
      if (Ext.isObject(a)) {
        g = e;
        e = f;
        c = [a];
      } else {
        if (Ext.isString(a)) {
          d = b.sorters.get(a);
          if (!d) {
            d = { property: a, direction: f };
            c = [d];
          } else {
            if (f === undefined) {
              d.toggle();
            } else {
              d.setDirection(f);
            }
          }
        }
      }
    }
    if (c && c.length) {
      c = b.decodeSorters(c);
      if (Ext.isString(e)) {
        if (e === "prepend") {
          a = b.sorters.clone().items;
          b.sorters.clear();
          b.sorters.addAll(c);
          b.sorters.addAll(a);
        } else {
          b.sorters.addAll(c);
        }
      } else {
        b.sorters.clear();
        b.sorters.addAll(c);
      }
      if (g !== !1) {
        b.onBeforeSort(c);
      }
    }
    if (g !== !1) {
      a = b.sorters.items;
      if (a.length) {
        h = function (d, h) {
          var c = a[0].sort(d, h),
            i = a.length,
            b;
          for (b = 1; b < i; b++) {
            c = c || a[b].sort.call(this, d, h);
          }
          return c;
        };
        b.doSort(h);
      }
    }
    return a;
  },
  onBeforeSort: Ext.emptyFn,
  decodeSorters: function (b) {
    if (!Ext.isArray(b)) {
      if (b === undefined) {
        b = [];
      } else {
        b = [b];
      }
    }
    var g = b.length,
      f = Ext.util.Sorter,
      e = this.model ? this.model.prototype.fields : null,
      d,
      a,
      c;
    for (c = 0; c < g; c++) {
      a = b[c];
      if (!(a instanceof f)) {
        if (Ext.isString(a)) {
          a = { property: a };
        }
        Ext.applyIf(a, { root: this.sortRoot, direction: "ASC" });
        if (a.fn) {
          a.sorterFn = a.fn;
        }
        if (typeof a == "function") {
          a = { sorterFn: a };
        }
        if (e && !a.transform) {
          d = e.get(a.property);
          a.transform = d ? d.sortType : undefined;
        }
        b[c] = Ext.create("Ext.util.Sorter", a);
      }
    }
    return b;
  },
  getSorters: function () {
    return this.sorters.items;
  },
  destroy: function () {
    this.callSuper();
    Ext.destroy(this.sorters);
  },
});
Ext.define("Ext.util.MixedCollection", {
  extend: Ext.util.AbstractMixedCollection,
  mixins: { sortable: Ext.util.Sortable },
  constructor: function () {
    var a = this;
    a.callParent(arguments);
    a.mixins.sortable.initSortable.call(a);
  },
  doSort: function (a) {
    this.sortBy(a);
  },
  _sort: function (g, i, f) {
    var d = this,
      a,
      c,
      j = String(i).toUpperCase() == "DESC" ? -1 : 1,
      b = [],
      h = d.keys,
      e = d.items;
    f =
      f ||
      function (a, b) {
        return a - b;
      };
    for (a = 0, c = e.length; a < c; a++) {
      b[b.length] = { key: h[a], value: e[a], index: a };
    }
    Ext.Array.sort(b, function (b, c) {
      var a = f(b[g], c[g]) * j;
      if (a === 0) {
        a = b.index < c.index ? -1 : 1;
      }
      return a;
    });
    for (a = 0, c = b.length; a < c; a++) {
      e[a] = b[a].value;
      h[a] = b[a].key;
    }
    d.fireEvent("sort", d);
  },
  sortBy: function (g) {
    var d = this,
      b = d.items,
      e = d.keys,
      f = b.length,
      c = [],
      a;
    for (a = 0; a < f; a++) {
      c[a] = { key: e[a], value: b[a], index: a };
    }
    Ext.Array.sort(c, function (b, c) {
      var a = g(b.value, c.value);
      if (a === 0) {
        a = b.index < c.index ? -1 : 1;
      }
      return a;
    });
    for (a = 0; a < f; a++) {
      b[a] = c[a].value;
      e[a] = c[a].key;
    }
    d.fireEvent("sort", d, b, e);
  },
  reorder: function (e) {
    var b = this,
      f = b.items,
      a = 0,
      h = f.length,
      c = [],
      g = [],
      d;
    b.suspendEvents();
    for (d in e) {
      c[e[d]] = f[d];
    }
    for (a = 0; a < h; a++) {
      if (e[a] == undefined) {
        g.push(f[a]);
      }
    }
    for (a = 0; a < h; a++) {
      if (c[a] == undefined) {
        c[a] = g.shift();
      }
    }
    b.clear();
    b.addAll(c);
    b.resumeEvents();
    b.fireEvent("sort", b);
  },
  sortByKey: function (a, b) {
    this._sort(
      "key",
      a,
      b ||
        function (e, f) {
          var c = String(e).toUpperCase(),
            d = String(f).toUpperCase();
          return c > d ? 1 : c < d ? -1 : 0;
        }
    );
  },
});
Ext.define("Ext.ItemCollection", {
  extend: Ext.util.MixedCollection,
  getKey: function (a) {
    return a.getItemId();
  },
  has: function (a) {
    return this.map.hasOwnProperty(a.getId());
  },
});
Ext.define("Ext.fx.easing.Momentum", {
  extend: Ext.fx.easing.Abstract,
  config: { acceleration: 30, friction: 0, startVelocity: 0 },
  alpha: 0,
  updateFriction: function (b) {
    var a = Math.log(1 - b / 10);
    this.theta = a;
    this.alpha = a / this.getAcceleration();
  },
  updateStartVelocity: function (a) {
    this.velocity = a * this.getAcceleration();
  },
  updateAcceleration: function (a) {
    this.velocity = this.getStartVelocity() * a;
    this.alpha = this.theta / a;
  },
  getValue: function () {
    return (
      this.getStartValue() -
      (this.velocity * (1 - this.getFrictionFactor())) / this.theta
    );
  },
  getFrictionFactor: function () {
    var a = Ext.Date.now() - this.getStartTime();
    return Math.exp(a * this.alpha);
  },
  getVelocity: function () {
    return this.getFrictionFactor() * this.velocity;
  },
});
Ext.define("Ext.fx.easing.Bounce", {
  extend: Ext.fx.easing.Abstract,
  config: { springTension: 0.3, acceleration: 30, startVelocity: 0 },
  getValue: function () {
    var b = Ext.Date.now() - this.getStartTime(),
      a = b / this.getAcceleration(),
      c = a * Math.pow(Math.E, -this.getSpringTension() * a);
    return this.getStartValue() + this.getStartVelocity() * c;
  },
});
Ext.define("Ext.fx.easing.BoundMomentum", {
  extend: Ext.fx.easing.Abstract,
  config: {
    momentum: null,
    bounce: null,
    minMomentumValue: 0,
    maxMomentumValue: 0,
    minVelocity: 0.01,
    startVelocity: 0,
  },
  applyMomentum: function (b, a) {
    return Ext.factory(b, Ext.fx.easing.Momentum, a);
  },
  applyBounce: function (b, a) {
    return Ext.factory(b, Ext.fx.easing.Bounce, a);
  },
  updateStartTime: function (a) {
    this.getMomentum().setStartTime(a);
    this.callParent(arguments);
  },
  updateStartVelocity: function (a) {
    this.getMomentum().setStartVelocity(a);
  },
  updateStartValue: function (a) {
    this.getMomentum().setStartValue(a);
  },
  reset: function () {
    this.lastValue = null;
    this.isBouncingBack = !1;
    this.isOutOfBound = !1;
    return this.callParent(arguments);
  },
  getValue: function () {
    var d = this.getMomentum(),
      j = this.getBounce(),
      f = d.getStartVelocity(),
      b = f > 0 ? 1 : -1,
      i = this.getMinMomentumValue(),
      h = this.getMaxMomentumValue(),
      g = b == 1 ? h : i,
      c = this.lastValue,
      a,
      e;
    if (f === 0) {
      return this.getStartValue();
    }
    if (!this.isOutOfBound) {
      a = d.getValue();
      e = d.getVelocity();
      if (Math.abs(e) < this.getMinVelocity()) {
        this.isEnded = !0;
      }
      if (a >= i && a <= h) {
        return a;
      }
      this.isOutOfBound = !0;
      j.setStartTime(Ext.Date.now()).setStartVelocity(e).setStartValue(g);
    }
    a = j.getValue();
    if (!this.isEnded) {
      if (!this.isBouncingBack) {
        if (c !== null) {
          if ((b == 1 && a < c) || (b == -1 && a > c)) {
            this.isBouncingBack = !0;
          }
        }
      } else {
        if (Math.round(a) == g) {
          this.isEnded = !0;
        }
      }
    }
    this.lastValue = a;
    return a;
  },
});
Ext.define("Ext.fx.easing.EaseOut", {
  extend: Ext.fx.easing.Linear,
  alias: "easing.ease-out",
  config: { exponent: 4, duration: 1500 },
  getValue: function () {
    var a = Ext.Date.now() - this.getStartTime(),
      b = this.getDuration(),
      d = this.getStartValue(),
      f = this.getEndValue(),
      e = this.distance,
      i = a / b,
      h = 1 - i,
      g = 1 - Math.pow(h, this.getExponent()),
      c = d + g * e;
    if (a >= b) {
      this.isEnded = !0;
      return f;
    }
    return c;
  },
});
Ext.define(
  "Ext.scroll.Scroller",
  {
    extend: Ext.Evented,
    config: {
      element: null,
      direction: "auto",
      fps: "auto",
      disabled: null,
      directionLock: !1,
      momentumEasing: {
        momentum: { acceleration: 30, friction: 0.5 },
        bounce: { acceleration: 30, springTension: 0.3 },
        minVelocity: 1,
      },
      bounceEasing: { duration: 400 },
      outOfBoundRestrictFactor: 0.5,
      startMomentumResetTime: 300,
      maxAbsoluteVelocity: 6,
      containerSize: "auto",
      size: "auto",
      autoRefresh: !0,
      initialOffset: { x: 0, y: 0 },
      slotSnapSize: { x: 0, y: 0 },
      slotSnapOffset: { x: 0, y: 0 },
      slotSnapEasing: { duration: 150 },
      translatable: { translationMethod: "auto", useWrapper: !1 },
    },
    cls: Ext.baseCSSPrefix + "scroll-scroller",
    containerCls: Ext.baseCSSPrefix + "scroll-container",
    dragStartTime: 0,
    dragEndTime: 0,
    isDragging: !1,
    isAnimating: !1,
    constructor: function (a) {
      var b = a && a.element;
      this.listeners = {
        scope: this,
        touchstart: "onTouchStart",
        touchend: "onTouchEnd",
        dragstart: "onDragStart",
        drag: "onDrag",
        dragend: "onDragEnd",
      };
      this.minPosition = { x: 0, y: 0 };
      this.startPosition = { x: 0, y: 0 };
      this.position = { x: 0, y: 0 };
      this.velocity = { x: 0, y: 0 };
      this.isAxisEnabledFlags = { x: !1, y: !1 };
      this.flickStartPosition = { x: 0, y: 0 };
      this.flickStartTime = { x: 0, y: 0 };
      this.lastDragPosition = { x: 0, y: 0 };
      this.dragDirection = { x: 0, y: 0 };
      this.initialConfig = a;
      if (b) {
        this.setElement(b);
      }
      return this;
    },
    applyElement: function (a) {
      if (!a) {
        return;
      }
      return Ext.get(a);
    },
    updateElement: function (a) {
      this.initialize();
      if (!this.FixedHBoxStretching) {
        a.addCls(this.cls);
      }
      if (!this.getDisabled()) {
        this.attachListeneners();
      }
      this.onConfigUpdate(["containerSize", "size"], "refreshMaxPosition");
      this.on("maxpositionchange", "snapToBoundary");
      this.on("minpositionchange", "snapToBoundary");
      return this;
    },
    applyTranslatable: function (b, a) {
      return Ext.factory(b, Ext.util.Translatable, a);
    },
    updateTranslatable: function (a) {
      a.setConfig({
        element: this.getElement(),
        listeners: {
          animationframe: "onAnimationFrame",
          animationend: "onAnimationEnd",
          scope: this,
        },
      });
    },
    updateFps: function (a) {
      if (a !== "auto") {
        this.getTranslatable().setFps(a);
      }
    },
    attachListeneners: function () {
      this.getContainer().on(this.listeners);
    },
    detachListeners: function () {
      this.getContainer().un(this.listeners);
    },
    updateDisabled: function (a) {
      if (a) {
        this.detachListeners();
      } else {
        this.attachListeneners();
      }
    },
    updateInitialOffset: function (a) {
      if (typeof a == "number") {
        a = { x: a, y: a };
      }
      var b = this.position,
        c,
        d;
      b.x = c = a.x;
      b.y = d = a.y;
      this.getTranslatable().translate(-c, -d);
    },
    applyDirection: function (a) {
      var d = this.getMinPosition(),
        c = this.getMaxPosition(),
        b,
        e;
      this.givenDirection = a;
      if (a === "auto") {
        b = c.x > d.x;
        e = c.y > d.y;
        if (b && e) {
          a = "both";
        } else {
          if (b) {
            a = "horizontal";
          } else {
            a = "vertical";
          }
        }
      }
      return a;
    },
    updateDirection: function (c, b) {
      var a = this.isAxisEnabledFlags,
        f = this.cls + "-vertical",
        e = this.cls + "-horizontal",
        d = this.getElement();
      if (b === "both" || b === "horizontal") {
        d.removeCls(e);
      }
      if (b === "both" || b === "vertical") {
        d.removeCls(f);
      }
      a.x = a.y = !1;
      if (c === "both" || c === "horizontal") {
        a.x = !0;
        d.addCls(e);
      }
      if (c === "both" || c === "vertical") {
        a.y = !0;
        d.addCls(f);
      }
    },
    isAxisEnabled: function (a) {
      this.getDirection();
      return this.isAxisEnabledFlags[a];
    },
    applyMomentumEasing: function (b) {
      var a = Ext.fx.easing.BoundMomentum;
      return { x: Ext.factory(b, a), y: Ext.factory(b, a) };
    },
    applyBounceEasing: function (b) {
      var a = Ext.fx.easing.EaseOut;
      return { x: Ext.factory(b, a), y: Ext.factory(b, a) };
    },
    updateBounceEasing: function (a) {
      this.getTranslatable().setEasingX(a.x).setEasingY(a.y);
    },
    applySlotSnapEasing: function (b) {
      var a = Ext.fx.easing.EaseOut;
      return { x: Ext.factory(b, a), y: Ext.factory(b, a) };
    },
    getMinPosition: function () {
      var a = this.minPosition;
      if (!a) {
        this.minPosition = a = { x: 0, y: 0 };
        this.fireEvent("minpositionchange", this, a);
      }
      return a;
    },
    getMaxPosition: function () {
      var a = this.maxPosition,
        c,
        b;
      if (!a) {
        c = this.getSize();
        b = this.getContainerSize();
        this.maxPosition = a = {
          x: Math.max(0, c.x - b.x),
          y: Math.max(0, c.y - b.y),
        };
        this.fireEvent("maxpositionchange", this, a);
      }
      return a;
    },
    refreshMaxPosition: function () {
      this.maxPosition = null;
      this.getMaxPosition();
    },
    applyContainerSize: function (a) {
      var b = this.getContainer().dom,
        c,
        d;
      if (!b) {
        return;
      }
      this.givenContainerSize = a;
      if (a === "auto") {
        c = b.offsetWidth;
        d = b.offsetHeight;
      } else {
        c = a.x;
        d = a.y;
      }
      return { x: c, y: d };
    },
    applySize: function (a) {
      var d = this.getElement().dom,
        b,
        c;
      if (!d) {
        return;
      }
      this.givenSize = a;
      if (a === "auto") {
        b = d.offsetWidth;
        c = d.offsetHeight;
      } else {
        if (typeof a == "number") {
          b = a;
          c = a;
        } else {
          b = a.x;
          c = a.y;
        }
      }
      return { x: b, y: c };
    },
    updateAutoRefresh: function (a) {
      this.getElement().toggleListener(a, "resize", "onElementResize", this);
      this.getContainer().toggleListener(
        a,
        "resize",
        "onContainerResize",
        this
      );
    },
    applySlotSnapSize: function (a) {
      if (typeof a == "number") {
        return { x: a, y: a };
      }
      return a;
    },
    applySlotSnapOffset: function (a) {
      if (typeof a == "number") {
        return { x: a, y: a };
      }
      return a;
    },
    getContainer: function () {
      var a = this.container,
        b;
      if (!a) {
        b = this.getElement().getParent();
        this.container = a = this.FixedHBoxStretching ? b.getParent() : b;
        a.addCls(this.containerCls);
      }
      return a;
    },
    refresh: function () {
      this.stopAnimation();
      this.getTranslatable().refresh();
      this.setSize(this.givenSize);
      this.setContainerSize(this.givenContainerSize);
      this.setDirection(this.givenDirection);
      this.fireEvent("refresh", this);
      return this;
    },
    onElementResize: function (b, a) {
      this.setSize({ x: a.width, y: a.height });
      this.refresh();
    },
    onContainerResize: function (b, a) {
      this.setContainerSize({ x: a.width, y: a.height });
      this.refresh();
    },
    scrollTo: function (b, c, g) {
      if (this.isDestroyed) {
        return this;
      }
      var h = this.getTranslatable(),
        a = this.position,
        d = !1,
        e,
        f;
      if (this.isAxisEnabled("x")) {
        if (isNaN(b) || typeof b != "number") {
          b = a.x;
        } else {
          if (a.x !== b) {
            a.x = b;
            d = !0;
          }
        }
        e = -b;
      }
      if (this.isAxisEnabled("y")) {
        if (isNaN(c) || typeof c != "number") {
          c = a.y;
        } else {
          if (a.y !== c) {
            a.y = c;
            d = !0;
          }
        }
        f = -c;
      }
      if (d) {
        if (g !== undefined && g !== !1) {
          h.translateAnimated(e, f, g);
        } else {
          this.fireEvent("scroll", this, a.x, a.y);
          h.translate(e, f);
        }
      }
      return this;
    },
    scrollToTop: function (b) {
      var a = this.getInitialOffset();
      return this.scrollTo(a.x, a.y, b);
    },
    scrollToEnd: function (c) {
      var b = this.getSize(),
        a = this.getContainerSize();
      return this.scrollTo(b.x - a.x, b.y - a.y, c);
    },
    scrollBy: function (a, b, d) {
      var c = this.position;
      a = typeof a == "number" ? a + c.x : null;
      b = typeof b == "number" ? b + c.y : null;
      return this.scrollTo(a, b, d);
    },
    onTouchStart: function () {
      this.isTouching = !0;
      this.stopAnimation();
    },
    onTouchEnd: function () {
      var a = this.position;
      this.isTouching = !1;
      if (!this.isDragging && this.snapToSlot()) {
        this.fireEvent("scrollstart", this, a.x, a.y);
      }
    },
    onDragStart: function (e) {
      var c = this.getDirection(),
        l = e.absDeltaX,
        m = e.absDeltaY,
        n = this.getDirectionLock(),
        k = this.startPosition,
        f = this.flickStartPosition,
        i = this.flickStartTime,
        g = this.lastDragPosition,
        h = this.position,
        j = this.dragDirection,
        a = h.x,
        b = h.y,
        d = Ext.Date.now();
      this.isDragging = !0;
      if (n && c !== "both") {
        if ((c === "horizontal" && l > m) || (c === "vertical" && m > l)) {
          e.stopPropagation();
        } else {
          this.isDragging = !1;
          return;
        }
      }
      g.x = a;
      g.y = b;
      f.x = a;
      f.y = b;
      k.x = a;
      k.y = b;
      i.x = d;
      i.y = d;
      j.x = 0;
      j.y = 0;
      this.dragStartTime = d;
      this.isDragging = !0;
      this.fireEvent("scrollstart", this, a, b);
    },
    onAxisDrag: function (a, n) {
      if (!this.isAxisEnabled(a)) {
        return;
      }
      var m = this.flickStartPosition,
        f = this.flickStartTime,
        e = this.lastDragPosition,
        c = this.dragDirection,
        q = this.position[a],
        p = this.getMinPosition()[a],
        d = this.getMaxPosition()[a],
        o = this.startPosition[a],
        j = e[a],
        b = o - n,
        h = c[a],
        g = this.getOutOfBoundRestrictFactor(),
        l = this.getStartMomentumResetTime(),
        k = Ext.Date.now(),
        i;
      if (b < p) {
        b *= g;
      } else {
        if (b > d) {
          i = b - d;
          b = d + i * g;
        }
      }
      if (b > j) {
        c[a] = 1;
      } else {
        if (b < j) {
          c[a] = -1;
        }
      }
      if ((h !== 0 && c[a] !== h) || k - f[a] > l) {
        m[a] = q;
        f[a] = k;
      }
      e[a] = b;
    },
    onDrag: function (b) {
      if (!this.isDragging) {
        return;
      }
      var a = this.lastDragPosition;
      this.onAxisDrag("x", b.deltaX);
      this.onAxisDrag("y", b.deltaY);
      this.scrollTo(a.x, a.y);
    },
    onDragEnd: function (c) {
      var a, b;
      if (!this.isDragging) {
        return;
      }
      this.dragEndTime = Ext.Date.now();
      this.onDrag(c);
      this.isDragging = !1;
      a = this.getAnimationEasing("x", c);
      b = this.getAnimationEasing("y", c);
      if (a || b) {
        this.getTranslatable().animate(a, b);
      } else {
        this.onScrollEnd();
      }
    },
    getAnimationEasing: function (b, j) {
      if (!this.isAxisEnabled(b)) {
        return null;
      }
      var d = this.position[b],
        i = this.getMinPosition()[b],
        g = this.getMaxPosition()[b],
        e = this.getMaxAbsoluteVelocity(),
        f = null,
        h = this.dragEndTime,
        a = j.flick.velocity[b],
        c;
      if (d < i) {
        f = i;
      } else {
        if (d > g) {
          f = g;
        }
      }
      if (f !== null) {
        c = this.getBounceEasing()[b];
        c.setConfig({ startTime: h, startValue: -d, endValue: -f });
        return c;
      }
      if (a === 0) {
        return null;
      }
      if (a < -e) {
        a = -e;
      } else {
        if (a > e) {
          a = e;
        }
      }
      if (Ext.browser.is.IE) {
        a *= 2;
      }
      c = this.getMomentumEasing()[b];
      c.setConfig({
        startTime: h,
        startValue: -d,
        startVelocity: a * 1.5,
        minMomentumValue: -g,
        maxMomentumValue: 0,
      });
      return c;
    },
    onAnimationFrame: function (d, b, c) {
      var a = this.position;
      a.x = -b;
      a.y = -c;
      this.fireEvent("scroll", this, a.x, a.y);
    },
    onAnimationEnd: function () {
      this.snapToBoundary();
      this.onScrollEnd();
    },
    stopAnimation: function () {
      this.getTranslatable().stopAnimation();
    },
    onScrollEnd: function () {
      var a = this.position;
      if (this.isTouching || !this.snapToSlot()) {
        this.fireEvent("scrollend", this, a.x, a.y);
      }
    },
    snapToSlot: function () {
      var b = this.getSnapPosition("x"),
        c = this.getSnapPosition("y"),
        a = this.getSlotSnapEasing();
      if (b !== null || c !== null) {
        this.scrollTo(b, c, { easingX: a.x, easingY: a.y });
        return !0;
      }
      return !1;
    },
    getSnapPosition: function (d) {
      var c = this.getSlotSnapSize()[d],
        e = null,
        b,
        g,
        f,
        a;
      if (c !== 0 && this.isAxisEnabled(d)) {
        b = this.position[d];
        g = this.getSlotSnapOffset()[d];
        f = this.getMaxPosition()[d];
        a = Math.floor((b - g) % c);
        if (a !== 0) {
          if (b !== f) {
            if (Math.abs(a) > c / 2) {
              e = Math.min(f, b + (a > 0 ? c - a : a - c));
            } else {
              e = b - a;
            }
          } else {
            e = b - a;
          }
        }
      }
      return e;
    },
    snapToBoundary: function () {
      var e = this.position,
        d = this.getMinPosition(),
        c = this.getMaxPosition(),
        h = d.x,
        i = d.y,
        f = c.x,
        g = c.y,
        a = Math.round(e.x),
        b = Math.round(e.y);
      if (a < h) {
        a = h;
      } else {
        if (a > f) {
          a = f;
        }
      }
      if (b < i) {
        b = i;
      } else {
        if (b > g) {
          b = g;
        }
      }
      this.scrollTo(a, b);
    },
    destroy: function () {
      var c = this.getElement(),
        b = this.sizeMonitors,
        a;
      if (b) {
        b.element.destroy();
        b.container.destroy();
      }
      if (c && !c.isDestroyed) {
        c.removeCls(this.cls);
        a = this.getContainer();
        if (a && !a.isDestroyed) {
          a.removeCls(this.containerCls);
        }
      }
      Ext.destroy(this.getTranslatable());
      this.callParent(arguments);
    },
  },
  function () {}
);
Ext.define("MEM.overrides.scroll.Scroller", {
  override: "Ext.scroll.Scroller",
  config: {
    momentumEasing: {
      momentum: { acceleration: 10, friction: 0.3 },
      bounce: { acceleration: 1.0e-4, springTension: 0.9999 },
    },
    outOfBoundRestrictFactor: 0,
  },
  onAnimationFrame: function (d, b, c) {
    var a = this.position;
    a.x = -b;
    a.y = -c;
    maxPosition = this.getMaxPosition()["y"];
    minPosition = this.getMinPosition()["y"];
    if (a.y >= maxPosition) {
      minPosition = maxPosition;
      this.onScrollEnd();
    } else {
      if (a.y <= minPosition) {
        a.y = minPosition;
        this.onScrollEnd();
      } else {
        this.fireEvent("scroll", this, a.x, a.y);
      }
    }
  },
  getSnapPosition: function (d) {
    var c = parseInt(this.getSlotSnapSize()[d]),
      e = null,
      b,
      g,
      f,
      a;
    if (c !== 0 && this.isAxisEnabled(d)) {
      b = this.position[d];
      g = this.getSlotSnapOffset()[d];
      f = this.getMaxPosition()[d];
      if (b >= f) {
        return null;
      }
      a = Math.floor((b - g) % c);
      if (a !== 0) {
        if (b !== f) {
          if (Math.abs(a) > c / 2) {
            e = Math.min(f, b + (a > 0 ? c - a : a - c));
          } else {
            e = b - a;
          }
        } else {
          e = b - a;
        }
      }
    }
    return e;
  },
});
(function () {
  var c = 0,
    d = ["ms", "moz", "webkit", "o"],
    e = d.length,
    b,
    a;
  for (b = 0; b < e && !window.requestAnimationFrame; ++b) {
    a = d[b];
    if (window[a + "RequestAnimationFrame"]) {
      window.requestAnimationFrame = window[a + "RequestAnimationFrame"];
      window.cancelAnimationFrame =
        window[a + "CancelAnimationFrame"] ||
        window[a + "CancelRequestAnimationFrame"];
    }
  }
  if (!window.Ext) {
    window.Ext = {};
  }
  Ext.performance = {};
  if (window.performance && window.performance.now) {
    Ext.performance.now = function () {
      return window.performance.now();
    };
  } else {
    Ext.performance.now = function () {
      return Date.now();
    };
  }
  if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = function (d) {
      var b = Ext.performance.now(),
        a = Math.max(0, 16 - (b - c)),
        e = window.setTimeout(function () {
          d(b + a);
        }, a);
      c = b + a;
      return e;
    };
  } else {
    Ext.trueRequestAnimationFrames = !0;
  }
  if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function (a) {
      clearTimeout(a);
    };
  }
})();
(function (a) {
  Ext.define(
    "Ext.AnimationQueue",
    {
      singleton: !0,
      constructor: function () {
        var b = Ext.Function.bind;
        this.queue = [];
        this.taskQueue = [];
        this.runningQueue = [];
        this.idleQueue = [];
        this.isRunning = !1;
        this.isIdle = !0;
        this.run = b(this.run, this);
        this.whenIdle = b(this.whenIdle, this);
        this.processIdleQueueItem = b(this.processIdleQueueItem, this);
        this.processTaskQueueItem = b(this.processTaskQueueItem, this);
        if (Ext.os.is.iOS) {
          setInterval(this.watch, 500);
        }
      },
      start: function (d, b, c) {
        this.queue.push(arguments);
        if (!this.isRunning) {
          if (this.hasOwnProperty("idleTimer")) {
            clearTimeout(this.idleTimer);
            delete this.idleTimer;
          }
          if (this.hasOwnProperty("idleQueueTimer")) {
            clearTimeout(this.idleQueueTimer);
            delete this.idleQueueTimer;
          }
          this.isIdle = !1;
          this.isRunning = !0;
          this.doStart();
        }
      },
      watch: function () {
        if (this.isRunning && Date.now() - this.lastRunTime >= 500) {
          this.run();
        }
      },
      run: function () {
        if (!this.isRunning) {
          return;
        }
        var b = this.runningQueue,
          c,
          d;
        this.lastRunTime = Date.now();
        this.frameStartTime = Ext.performance.now();
        b.push.apply(b, this.queue);
        for (c = 0, d = b.length; c < d; c++) {
          this.invoke(b[c]);
        }
        b.length = 0;
        this.doIterate();
      },
      doStart: function () {
        this.animationFrameId = requestAnimationFrame(this.run);
        this.lastRunTime = Date.now();
      },
      doIterate: function () {
        this.animationFrameId = requestAnimationFrame(this.run);
      },
      doStop: function () {
        cancelAnimationFrame(this.animationFrameId);
      },
      stop: function (h, f, g) {
        if (!this.isRunning) {
          return;
        }
        var d = this.queue,
          e = d.length,
          b,
          c;
        for (b = 0; b < e; b++) {
          c = d[b];
          if (c[0] === h && c[1] === f && c[2] === g) {
            d.splice(b, 1);
            b--;
            e--;
          }
        }
        if (e === 0) {
          this.doStop();
          this.isRunning = !1;
          this.idleTimer = setTimeout(this.whenIdle, 100);
        }
      },
      onIdle: function (h, f, g) {
        var d = this.idleQueue,
          c,
          e,
          b;
        for (c = 0, e = d.length; c < e; c++) {
          b = d[c];
          if (h === b[0] && f === b[1] && g === b[2]) {
            return;
          }
        }
        d.push(arguments);
        if (this.isIdle) {
          this.processIdleQueue();
        }
      },
      unIdle: function (h, f, g) {
        var d = this.idleQueue,
          b,
          e,
          c;
        for (b = 0, e = d.length; b < e; b++) {
          c = d[b];
          if (h === c[0] && f === c[1] && g === c[2]) {
            d.splice(b, 1);
            return !0;
          }
        }
        return !1;
      },
      queueTask: function (d, b, c) {
        this.taskQueue.push(arguments);
        this.processTaskQueue();
      },
      dequeueTask: function (h, f, g) {
        var d = this.taskQueue,
          b,
          e,
          c;
        for (b = 0, e = d.length; b < e; b++) {
          c = d[b];
          if (h === c[0] && f === c[1] && g === c[2]) {
            d.splice(b, 1);
            b--;
            e--;
          }
        }
      },
      invoke: function (c) {
        var b = c[0],
          d = c[1],
          e = c[2];
        b = typeof b == "string" ? d[b] : b;
        if (Ext.isArray(e)) {
          b.apply(d, e);
        } else {
          b.call(d, e);
        }
      },
      whenIdle: function () {
        this.isIdle = !0;
        this.processIdleQueue();
      },
      processIdleQueue: function () {
        if (!this.hasOwnProperty("idleQueueTimer")) {
          this.idleQueueTimer = setTimeout(this.processIdleQueueItem, 1);
        }
      },
      processIdleQueueItem: function () {
        delete this.idleQueueTimer;
        if (!this.isIdle) {
          return;
        }
        var b = this.idleQueue,
          c;
        if (b.length > 0) {
          c = b.shift();
          this.invoke(c);
          this.processIdleQueue();
        }
      },
      processTaskQueue: function () {
        if (!this.hasOwnProperty("taskQueueTimer")) {
          this.taskQueueTimer = setTimeout(this.processTaskQueueItem, 15);
        }
      },
      processTaskQueueItem: function () {
        delete this.taskQueueTimer;
        var b = this.taskQueue,
          c;
        if (b.length > 0) {
          c = b.shift();
          this.invoke(c);
          this.processTaskQueue();
        }
      },
      showFps: function () {
        if (!Ext.trueRequestAnimationFrames) {
          alert(
            "This browser does not support requestAnimationFrame. The FPS listed will not be accurate"
          );
        }
        Ext.onReady(function () {
          Ext.Viewport.add([
            {
              xtype: "component",
              bottom: 50,
              left: 0,
              width: 50,
              height: 20,
              html: "Average",
              style:
                "background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;",
            },
            {
              id: "__averageFps",
              xtype: "component",
              bottom: 0,
              left: 0,
              width: 50,
              height: 50,
              html: "0",
              style:
                "background-color: red; color: white; text-align: center; line-height: 50px;",
            },
            {
              xtype: "component",
              bottom: 50,
              left: 50,
              width: 50,
              height: 20,
              html: "Min (Last 1k)",
              style:
                "background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;",
            },
            {
              id: "__minFps",
              xtype: "component",
              bottom: 0,
              left: 50,
              width: 50,
              height: 50,
              html: "0",
              style:
                "background-color: orange; color: white; text-align: center; line-height: 50px;",
            },
            {
              xtype: "component",
              bottom: 50,
              left: 100,
              width: 50,
              height: 20,
              html: "Max (Last 1k)",
              style:
                "background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;",
            },
            {
              id: "__maxFps",
              xtype: "component",
              bottom: 0,
              left: 100,
              width: 50,
              height: 50,
              html: "0",
              style:
                "background-color: yellow; color: black; text-align: center; line-height: 50px;",
            },
            {
              xtype: "component",
              bottom: 50,
              left: 150,
              width: 50,
              height: 20,
              html: "Current",
              style:
                "background-color: black; color: white; text-align: center; line-height: 20px; font-size: 8px;",
            },
            {
              id: "__currentFps",
              xtype: "component",
              bottom: 0,
              left: 150,
              width: 50,
              height: 50,
              html: "0",
              style:
                "background-color: green; color: white; text-align: center; line-height: 50px;",
            },
          ]);
          Ext.AnimationQueue.resetFps();
        });
      },
      resetFps: function () {
        var g = Ext.getCmp("__currentFps"),
          f = Ext.getCmp("__averageFps"),
          i = Ext.getCmp("__minFps"),
          h = Ext.getCmp("__maxFps"),
          c = 1000,
          b = 0,
          d = 0,
          e = 0;
        Ext.AnimationQueue.onFpsChanged = function (j) {
          d++;
          if (!(d % 10)) {
            c = 1000;
            b = 0;
          }
          e += j;
          c = Math.min(c, j);
          b = Math.max(b, j);
          g.setHtml(Math.round(j));
          f.setHtml(Math.round(e / d));
          i.setHtml(Math.round(c));
          h.setHtml(Math.round(b));
        };
      },
    },
    function () {}
  );
})(this);
Ext.define("Ext.TaskQueue", {
  singleton: !0,
  pending: !1,
  mode: !0,
  constructor: function () {
    this.readQueue = [];
    this.writeQueue = [];
    this.run = Ext.Function.bind(this.run, this);
    this.watch = Ext.Function.bind(this.watch, this);
    if (Ext.os.is.iOS) {
      setInterval(this.watch, 500);
    }
  },
  requestRead: function (c, a, b) {
    this.request(!0);
    this.readQueue.push(arguments);
  },
  requestWrite: function (c, a, b) {
    this.request(!1);
    this.writeQueue.push(arguments);
  },
  request: function (a) {
    if (!this.pending) {
      this.pendingTime = Date.now();
      this.pending = !0;
      this.mode = a;
      if (a) {
        setTimeout(this.run, 1);
      } else {
        requestAnimationFrame(this.run);
      }
    }
  },
  watch: function () {
    if (this.pending && Date.now() - this.pendingTime >= 500) {
      this.run();
    }
  },
  run: function () {
    this.pending = !1;
    var i = this.readQueue,
      h = this.writeQueue,
      c = null,
      d;
    if (this.mode) {
      d = i;
      if (h.length > 0) {
        c = !1;
      }
    } else {
      d = h;
      if (i.length > 0) {
        c = !0;
      }
    }
    var g = d.slice(),
      f,
      j,
      b,
      a,
      e;
    d.length = 0;
    for (f = 0, j = g.length; f < j; f++) {
      b = g[f];
      a = b[0];
      e = b[1];
      if (typeof a == "string") {
        a = e[a];
      }
      if (b.length > 2) {
        a.apply(e, b[2]);
      } else {
        a.call(e);
      }
    }
    g.length = 0;
    if (c !== null) {
      this.request(c);
    }
  },
});
Ext.define("Ext.scroll.indicator.Abstract", {
  extend: Ext.Component,
  config: {
    baseCls: "x-scroll-indicator",
    axis: "x",
    value: null,
    length: null,
    minLength: 6,
    hidden: !0,
    ui: "dark",
    autoHide: !0,
  },
  cachedConfig: { ratio: 1, barCls: "x-scroll-bar", active: !0 },
  barElement: null,
  barLength: 0,
  gapLength: 0,
  getElementConfig: function () {
    return { reference: "barElement", children: [this.callParent()] };
  },
  applyRatio: function (a) {
    if (isNaN(a) || a > 1) {
      a = 1;
    }
    return a;
  },
  refresh: function () {
    var f = this.barElement,
      b = f.dom,
      d = this.getRatio(),
      e = this.getAxis(),
      a = e === "x" ? b.offsetWidth : b.offsetHeight,
      c = a * d;
    this.barLength = a;
    this.gapLength = a - c;
    this.setLength(c);
    this.updateValue(this.getValue());
  },
  updateBarCls: function (a) {
    this.barElement.addCls(a);
  },
  updateAxis: function (a) {
    this.element.addCls(this.getBaseCls(), null, a);
    this.barElement.addCls(this.getBarCls(), null, a);
  },
  updateValue: function (a) {
    var f = this.barLength,
      g = this.gapLength,
      e = this.getLength(),
      d,
      b,
      c;
    if (a <= 0) {
      b = 0;
      this.updateLength(this.applyLength(e + a * f));
    } else {
      if (a >= 1) {
        c = Math.round((a - 1) * f);
        d = this.applyLength(e - c);
        c = e - d;
        this.updateLength(d);
        b = g + c;
      } else {
        b = g * a;
      }
    }
    this.setOffset(b);
  },
  updateActive: function (a) {
    this.barElement[a ? "addCls" : "removeCls"]("active");
  },
  doSetHidden: function (b) {
    var a = this;
    if (b) {
      a.getAutoHide() && a.setOffset(-10000);
    } else {
      delete a.lastLength;
      delete a.lastOffset;
      a.updateValue(a.getValue());
    }
  },
  applyLength: function (a) {
    return Math.max(this.getMinLength(), a);
  },
  updateLength: function (a) {
    a = Math.round(a);
    if (this.lastLength === a) {
      return;
    }
    this.lastLength = a;
    Ext.TaskQueue.requestWrite("doUpdateLength", this, [a]);
  },
  doUpdateLength: function (b) {
    if (!this.isDestroyed) {
      var c = this.getAxis(),
        a = this.element;
      if (c === "x") {
        a.setWidth(b);
      } else {
        a.setHeight(b);
      }
    }
  },
  setOffset: function (a) {
    a = Math.round(a);
    if (this.lastOffset === a || this.lastOffset === -10000) {
      return;
    }
    this.lastOffset = a;
    Ext.TaskQueue.requestWrite("doSetOffset", this, [a]);
  },
  doSetOffset: function (b) {
    if (!this.isDestroyed) {
      var c = this.getAxis(),
        a = this.element;
      if (c === "x") {
        a.translate(b, 0);
      } else {
        a.translate(0, b);
      }
    }
  },
});
Ext.define("Ext.scroll.indicator.CssTransform", {
  extend: Ext.scroll.indicator.Abstract,
  config: { cls: "csstransform" },
});
Ext.define("Ext.scroll.indicator.ScrollPosition", {
  extend: Ext.scroll.indicator.Abstract,
  config: { cls: "scrollposition" },
  getElementConfig: function () {
    var a = this.callParent(arguments);
    a.children.unshift({ className: "x-scroll-bar-stretcher" });
    return a;
  },
  updateValue: function (a) {
    if (this.gapLength === 0) {
      if (a >= 1) {
        a--;
      }
      this.setOffset(this.barLength * a);
    } else {
      this.setOffset(this.gapLength * a);
    }
  },
  doUpdateLength: function () {
    if (!this.isDestroyed) {
      var a = this.barLength,
        b = this.element;
      this.callParent(arguments);
      if (this.getAxis() === "x") {
        b.setLeft(a);
      } else {
        b.setTop(a);
      }
    }
  },
  doSetOffset: function (a) {
    if (!this.isDestroyed) {
      var b = this.barLength,
        c = this.getMinLength(),
        d = this.barElement.dom;
      if (a !== -10000) {
        a = Math.min(b - c, Math.max(a, c - this.getLength()));
        a = b - a;
      }
      if (this.getAxis() === "x") {
        d.scrollLeft = a;
      } else {
        d.scrollTop = a;
      }
    }
  },
});
Ext.define("Ext.scroll.indicator.Rounded", {
  extend: Ext.scroll.indicator.Abstract,
  config: { cls: "rounded" },
  constructor: function () {
    this.callParent(arguments);
    this.transformPropertyName = Ext.browser.getVendorProperyName("transform");
  },
  getElementConfig: function () {
    var a = this.callParent();
    a.children[0].children = [
      { reference: "startElement" },
      { reference: "middleElement" },
      { reference: "endElement" },
    ];
    return a;
  },
  refresh: function () {
    var f = this.getAxis(),
      c = this.startElement.dom,
      d = this.endElement.dom,
      e = this.middleElement,
      a,
      b;
    if (f === "x") {
      a = c.offsetWidth;
      b = d.offsetWidth;
      e.setLeft(a);
    } else {
      a = c.offsetHeight;
      b = d.offsetHeight;
      e.setTop(a);
    }
    this.startElementLength = a;
    this.endElementLength = b;
    this.callParent();
  },
  doUpdateLength: function (g) {
    if (!this.isDestroyed) {
      var h = this.getAxis(),
        e = this.endElement,
        d = this.middleElement.dom.style,
        f = this.endElementLength,
        a = g - f,
        c = a - this.startElementLength,
        b = this.transformPropertyName;
      if (h === "x") {
        e.translate(a, 0);
        d[b] = "translate3d(0, 0, 0) scaleX(" + c + ")";
      } else {
        e.translate(0, a);
        d[b] = "translate3d(0, 0, 0) scaleY(" + c + ")";
      }
    }
  },
});
Ext.define("Ext.scroll.Indicator", {
  alternateClassName: "Ext.util.Indicator",
  constructor: function (a) {
    var b = Ext.scroll.indicator;
    switch (Ext.browser.getPreferredTranslationMethod(a)) {
      case "scrollposition":
        return new b.ScrollPosition(a);
      case "csstransform":
        if (Ext.browser.is.AndroidStock4) {
          return new b.CssTransform(a);
        } else {
          return new b.Rounded(a);
        }
    }
  },
});
Ext.define("Ext.scroll.View", {
  extend: Ext.Evented,
  alternateClassName: "Ext.util.ScrollView",
  config: {
    indicatorsUi: "dark",
    element: null,
    scroller: {},
    indicators: { x: { axis: "x" }, y: { axis: "y" } },
    indicatorsHidingDelay: 100,
    cls: Ext.baseCSSPrefix + "scroll-view",
  },
  processConfig: function (a) {
    if (!a) {
      return null;
    }
    if (typeof a == "string") {
      a = { direction: a };
    }
    a = Ext.merge({}, a);
    var c = a.scroller,
      b;
    if (!c) {
      a.scroller = c = {};
    }
    for (b in a) {
      if (a.hasOwnProperty(b)) {
        if (!this.hasConfig(b)) {
          c[b] = a[b];
          delete a[b];
        }
      }
    }
    return a;
  },
  constructor: function (a) {
    a = this.processConfig(a);
    this.useIndicators = { x: !0, y: !0 };
    this.doHideIndicators = Ext.Function.bind(this.doHideIndicators, this);
    this.initConfig(a);
  },
  setConfig: function (a) {
    return this.callParent([this.processConfig(a)]);
  },
  updateIndicatorsUi: function (b) {
    var a = this.getIndicators();
    a.x.setUi(b);
    a.y.setUi(b);
  },
  applyScroller: function (b, a) {
    return Ext.factory(b, Ext.scroll.Scroller, a);
  },
  applyIndicators: function (a, b) {
    var d = Ext.scroll.Indicator,
      c = this.useIndicators;
    if (!a) {
      a = {};
    }
    if (!a.x) {
      c.x = !1;
      a.x = {};
    }
    if (!a.y) {
      c.y = !1;
      a.y = {};
    }
    return {
      x: Ext.factory(a.x, d, b && b.x),
      y: Ext.factory(a.y, d, b && b.y),
    };
  },
  updateIndicators: function (a) {
    this.indicatorsGrid = Ext.Element.create({
      className: "x-scroll-bar-grid-wrapper",
      children: [
        {
          className: "x-scroll-bar-grid",
          children: [
            { children: [{}, { children: [a.y.barElement] }] },
            { children: [{ children: [a.x.barElement] }, {}] },
          ],
        },
      ],
    });
  },
  updateScroller: function (a) {
    a.on({
      scope: this,
      scrollstart: "onScrollStart",
      scroll: "onScroll",
      scrollend: "onScrollEnd",
      refresh: "refreshIndicators",
    });
  },
  isAxisEnabled: function (a) {
    return this.getScroller().isAxisEnabled(a) && this.useIndicators[a];
  },
  applyElement: function (a) {
    if (a) {
      return Ext.get(a);
    }
  },
  updateElement: function (b) {
    var c = this.getScroller(),
      a;
    a = b.getFirstChild().getFirstChild();
    if (this.FixedHBoxStretching) {
      a = a.getFirstChild();
    }
    b.addCls(this.getCls());
    b.insertFirst(this.indicatorsGrid);
    c.setElement(a);
    this.refreshIndicators();
    return this;
  },
  showIndicators: function () {
    var a = this.getIndicators();
    if (this.hasOwnProperty("indicatorsHidingTimer")) {
      clearTimeout(this.indicatorsHidingTimer);
      delete this.indicatorsHidingTimer;
    }
    if (this.isAxisEnabled("x")) {
      a.x.show();
    }
    if (this.isAxisEnabled("y")) {
      a.y.show();
    }
  },
  hideIndicators: function () {
    var a = this.getIndicatorsHidingDelay();
    if (a > 0) {
      this.indicatorsHidingTimer = setTimeout(this.doHideIndicators, a);
    } else {
      this.doHideIndicators();
    }
  },
  doHideIndicators: function () {
    var a = this.getIndicators();
    if (this.isAxisEnabled("x")) {
      a.x.hide();
    }
    if (this.isAxisEnabled("y")) {
      a.y.hide();
    }
  },
  onScrollStart: function () {
    this.onScroll.apply(this, arguments);
    this.showIndicators();
  },
  onScrollEnd: function () {
    this.hideIndicators();
  },
  onScroll: function (c, a, b) {
    this.setIndicatorValue("x", a);
    this.setIndicatorValue("y", b);
  },
  setIndicatorValue: function (d, a) {
    if (!this.isAxisEnabled(d)) {
      return this;
    }
    var f = this.getScroller(),
      c = f.getMaxPosition()[d],
      e = f.getContainerSize()[d],
      b;
    if (c === 0) {
      b = a / e;
      if (a >= 0) {
        b += 1;
      }
    } else {
      if (a > c) {
        b = 1 + (a - c) / e;
      } else {
        if (a < 0) {
          b = a / e;
        } else {
          b = a / c;
        }
      }
    }
    this.getIndicators()[d].setValue(b);
  },
  refreshIndicator: function (a) {
    if (!this.isAxisEnabled(a)) {
      return this;
    }
    var c = this.getScroller(),
      b = this.getIndicators()[a],
      d = c.getContainerSize()[a],
      e = c.getSize()[a],
      f = d / e;
    b.setRatio(f);
    b.refresh();
  },
  refresh: function () {
    return this.getScroller().refresh();
  },
  refreshIndicators: function () {
    var a = this.getIndicators();
    a.x.setActive(this.isAxisEnabled("x"));
    a.y.setActive(this.isAxisEnabled("y"));
    this.refreshIndicator("x");
    this.refreshIndicator("y");
  },
  destroy: function () {
    var a = this.getElement(),
      b = this.getIndicators();
    Ext.destroy(this.getScroller(), this.indicatorsGrid);
    if (this.hasOwnProperty("indicatorsHidingTimer")) {
      clearTimeout(this.indicatorsHidingTimer);
      delete this.indicatorsHidingTimer;
    }
    if (a && !a.isDestroyed) {
      a.removeCls(this.getCls());
    }
    b.x.destroy();
    b.y.destroy();
    delete this.indicatorsGrid;
    this.callParent(arguments);
  },
});
Ext.define("Ext.behavior.Scrollable", {
  extend: Ext.behavior.Behavior,
  constructor: function () {
    this.listeners = { painted: "onComponentPainted", scope: this };
    this.callParent(arguments);
  },
  onComponentPainted: function () {
    this.scrollView.refresh();
  },
  setConfig: function (b) {
    var a = this.scrollView,
      c = this.component,
      d,
      e,
      g,
      f;
    if (b) {
      if (!a) {
        this.scrollView = a = new Ext.scroll.View(b);
        a.on("destroy", "onScrollViewDestroy", this);
        c.setUseBodyElement(!0);
        this.scrollerElement = d = c.innerElement;
        if (!Ext.feature.has.ProperHBoxStretching) {
          g = a.getScroller();
          f = (Ext.isObject(b) ? b.direction : b) || "auto";
          if (f !== "vertical") {
            e = d.wrap();
            e.addCls(Ext.baseCSSPrefix + "translatable-hboxfix");
            if (f == "horizontal") {
              e.setStyle({ height: "100%" });
            }
            this.scrollContainer = e.wrap();
            a.FixedHBoxStretching = g.FixedHBoxStretching = !0;
          } else {
            this.scrollContainer = d.wrap();
          }
        } else {
          this.scrollContainer = d.wrap();
        }
        a.setElement(c.bodyElement);
        if (c.isPainted()) {
          this.onComponentPainted();
        }
        c.on(this.listeners);
      } else {
        if (Ext.isString(b) || Ext.isObject(b)) {
          a.setConfig(b);
        }
      }
    } else {
      if (a) {
        a.destroy();
      }
    }
    return this;
  },
  getScrollView: function () {
    return this.scrollView;
  },
  onScrollViewDestroy: function () {
    var a = this.component,
      b = this.scrollerElement;
    if (!b.isDestroyed) {
      this.scrollerElement.unwrap();
    }
    this.scrollContainer.destroy();
    if (!a.isDestroyed) {
      a.un(this.listeners);
    }
    delete this.scrollerElement;
    delete this.scrollView;
    delete this.scrollContainer;
  },
  onComponentDestroy: function () {
    var a = this.scrollView;
    if (a) {
      a.destroy();
    }
  },
});
Ext.define("Ext.util.InputBlocker", {
  singleton: !0,
  blockInputs: function () {
    if (Ext.browser.is.ie) {
      Ext.select(
        ".x-field-text .x-field-input:not(.x-item-disabled) .x-input-el, .x-field-textarea .x-field-input:not(.x-item-disabled) .x-input-el, .x-field-search .x-field-input:not(.x-item-disabled) .x-input-el"
      ).each(function (a) {
        if (a.dom.offsetWidth > 0) {
          a.dom.setAttribute("disabled", !0);
          a.dom.setAttribute("overlayfix", !0);
        }
      });
    }
  },
  unblockInputs: function () {
    if (Ext.browser.is.ie) {
      Ext.select("[overlayfix]").each(function (a) {
        a.dom.removeAttribute("disabled");
        a.dom.removeAttribute("overlayfix");
      });
    }
  },
});
Ext.define("Ext.Mask", {
  extend: Ext.Component,
  xtype: "mask",
  config: {
    baseCls: Ext.baseCSSPrefix + "mask",
    transparent: !1,
    top: 0,
    left: 0,
    right: 0,
    bottom: 0,
  },
  initialize: function () {
    this.callSuper();
    this.element.on("*", "onEvent", this);
    this.on({ hide: "onHide" });
  },
  onHide: function () {
    Ext.util.InputBlocker.unblockInputs();
    if (Ext.browser.is.AndroidStock4 && Ext.os.version.getMinor() === 0) {
      var a = this.element.getFirstChild();
      if (a) {
        a.redraw();
      }
    }
  },
  onEvent: function (a) {
    var b = arguments[arguments.length - 1];
    if (b.info.eventName === "tap") {
      this.fireEvent("tap", this, a);
      return !1;
    }
    if (a && a.stopEvent) {
      a.stopEvent();
    }
    return !1;
  },
  updateTransparent: function (a) {
    this[a ? "addCls" : "removeCls"](this.getBaseCls() + "-transparent");
  },
});
Ext.define(
  "Ext.Container",
  {
    extend: Ext.Component,
    alternateClassName: "Ext.lib.Container",
    xtype: "container",
    eventedConfig: { activeItem: 0, scrollable: null },
    config: {
      layout: null,
      control: {},
      defaults: null,
      items: null,
      autoDestroy: !0,
      defaultType: null,
      useBodyElement: null,
      masked: null,
      modal: null,
      hideOnMaskTap: null,
    },
    isContainer: !0,
    constructor: function (b) {
      var a = this;
      a._items = a.items = new Ext.ItemCollection();
      a.innerItems = [];
      a.onItemAdd = a.onFirstItemAdd;
      a.callParent(arguments);
    },
    getElementConfig: function () {
      return {
        reference: "element",
        classList: ["x-container", "x-unsized"],
        children: [{ reference: "innerElement", className: "x-inner" }],
      };
    },
    applyMasked: function (b) {
      var c = !0,
        a;
      if (b === !1) {
        b = !0;
        c = !1;
      }
      a = Ext.factory(b, Ext.Mask, this.getMasked());
      if (a) {
        this.add(a);
        a.setHidden(!c);
      }
      return a;
    },
    mask: function (a) {
      this.setMasked(a || !0);
    },
    unmask: function () {
      this.setMasked(!1);
    },
    setParent: function (b) {
      this.callSuper(arguments);
      if (b) {
        var a = this.getModal();
        if (a) {
          b.insertBefore(a, this);
          a.setZIndex(this.getZIndex() - 1);
        }
      }
    },
    applyModal: function (b, a) {
      var c = !0;
      if (b === !1) {
        b = !0;
        c = !1;
      }
      a = Ext.factory(b, Ext.Mask, a);
      if (a) {
        a.setVisibility(c);
      }
      return a;
    },
    updateModal: function (a) {
      var b = this.getParent();
      if (b) {
        if (a) {
          b.insertBefore(a, this);
          a.setZIndex(this.getZIndex() - 1);
        } else {
          b.remove(a);
        }
      }
    },
    updateHideOnMaskTap: function (b) {
      var a = this.getModal();
      if (a) {
        a[b ? "on" : "un"].call(a, "tap", "hide", this);
      }
    },
    updateZIndex: function (b) {
      var a = this.getModal();
      this.callParent(arguments);
      if (a) {
        a.setZIndex(b - 1);
      }
    },
    updateBaseCls: function (a, c) {
      var d = this,
        b = d.getUi();
      if (c) {
        this.element.removeCls(c);
        this.innerElement.removeCls(a, null, "inner");
        if (b) {
          this.element.removeCls(this.currentUi);
        }
      }
      if (a) {
        this.element.addCls(a);
        this.innerElement.addCls(a, null, "inner");
        if (b) {
          this.element.addCls(a, null, b);
          this.currentUi = a + "-" + b;
        }
      }
    },
    updateUseBodyElement: function (a) {
      if (a) {
        this.link("bodyElement", this.innerElement.wrap({ cls: "x-body" }));
      }
    },
    applyItems: function (b, d) {
      if (b) {
        var a = this;
        a.getDefaultType();
        a.getDefaults();
        if (a.initialized && d.length > 0) {
          a.removeAll();
        }
        a.add(b);
        if (a.initialized) {
          var c = a.initialConfig.activeItem || a.config.activeItem || 0;
          a.setActiveItem(c);
        }
      }
    },
    applyControl: function (c) {
      var b, e, d, a;
      for (b in c) {
        a = c[b];
        for (e in a) {
          d = a[e];
          if (Ext.isObject(d)) {
            d.delegate = b;
          }
        }
        a.delegate = b;
        this.addListener(a);
      }
      return c;
    },
    onFirstItemAdd: function () {
      delete this.onItemAdd;
      if (this.innerHtmlElement && !this.getHtml()) {
        this.innerHtmlElement.destroy();
        delete this.innerHtmlElement;
      }
      this.on("innerstatechange", "onItemInnerStateChange", this, {
        delegate: "> component",
      });
      return this.onItemAdd.apply(this, arguments);
    },
    getLayout: function () {
      var a = this.layout;
      if (!a) {
        a = this.link(
          "_layout",
          this.link(
            "layout",
            Ext.factory(
              this._layout || "default",
              Ext.layout.Default,
              null,
              "layout"
            )
          )
        );
        a.setContainer(this);
      }
      return a;
    },
    updateDefaultType: function (a) {
      this.defaultItemClass = Ext.ClassManager.getByAlias("widget." + a);
    },
    applyDefaults: function (a) {
      if (a) {
        this.factoryItem = this.factoryItemWithDefaults;
        return a;
      }
    },
    factoryItem: function (a) {
      return Ext.factory(a, this.defaultItemClass);
    },
    factoryItemWithDefaults: function (a) {
      var d = this,
        b = d.getDefaults(),
        c;
      if (!b) {
        return Ext.factory(a, d.defaultItemClass);
      }
      if (a.isComponent) {
        c = a;
        if (b && a.isInnerItem() && !d.has(c)) {
          c.setConfig(b, !0);
        }
      } else {
        if (b && !a.ignoreDefaults) {
          if (
            !(
              a.hasOwnProperty("left") &&
              a.hasOwnProperty("right") &&
              a.hasOwnProperty("top") &&
              a.hasOwnProperty("bottom") &&
              a.hasOwnProperty("docked") &&
              a.hasOwnProperty("centered")
            )
          ) {
            a = Ext.mergeIf({}, a, b);
          }
        }
        c = Ext.factory(a, d.defaultItemClass);
      }
      return c;
    },
    add: function (c) {
      var f = this,
        d,
        e,
        a,
        b;
      if (Ext.isArray(c)) {
        for (d = 0, e = c.length; d < e; d++) {
          a = f.factoryItem(c[d]);
          this.doAdd(a);
          if (
            !b &&
            !this.getActiveItem() &&
            this.innerItems.length > 0 &&
            a.isInnerItem()
          ) {
            b = a;
          }
        }
      } else {
        a = f.factoryItem(c);
        this.doAdd(a);
        if (
          !b &&
          !this.getActiveItem() &&
          this.innerItems.length > 0 &&
          a.isInnerItem()
        ) {
          b = a;
        }
      }
      if (b) {
        this.setActiveItem(b);
      }
      return a;
    },
    doAdd: function (a) {
      var b = this,
        c = b.getItems(),
        d;
      if (!c.has(a)) {
        d = c.length;
        c.add(a);
        if (a.isInnerItem()) {
          b.insertInner(a);
        }
        a.setParent(b);
        b.onItemAdd(a, d);
      }
    },
    remove: function (b, c) {
      var a = this,
        e = a.indexOf(b),
        d = a.getInnerItems();
      if (c === undefined) {
        c = a.getAutoDestroy();
      }
      if (e !== -1) {
        if (!a.removingAll && d.length > 1 && b === a.getActiveItem()) {
          a.on({
            activeitemchange: "doRemove",
            scope: a,
            single: !0,
            order: "after",
            args: [b, e, c],
          });
          a.doResetActiveItem(d.indexOf(b));
        } else {
          a.doRemove(b, e, c);
          if (d.length === 0) {
            a.setActiveItem(null);
          }
        }
      }
      return a;
    },
    doResetActiveItem: function (a) {
      if (a === 0) {
        this.setActiveItem(1);
      } else {
        this.setActiveItem(0);
      }
    },
    doRemove: function (a, d, c) {
      var b = this;
      b.items.remove(a);
      if (a.isInnerItem()) {
        b.removeInner(a);
      }
      b.onItemRemove(a, d, c);
      a.setParent(null);
      if (c) {
        a.destroy();
      }
    },
    removeAll: function (d, c) {
      var e = this.items,
        f = e.length,
        a = 0,
        b;
      if (typeof d != "boolean") {
        d = this.getAutoDestroy();
      }
      c = Boolean(c);
      this.removingAll = !0;
      for (; a < f; a++) {
        b = e.getAt(a);
        if (b && (c || b.isInnerItem())) {
          this.doRemove(b, a, d);
          a--;
          f--;
        }
      }
      this.setActiveItem(null);
      this.removingAll = !1;
      return this;
    },
    getAt: function (a) {
      return this.items.getAt(a);
    },
    getInnerAt: function (a) {
      return this.innerItems[a];
    },
    removeAt: function (b) {
      var a = this.getAt(b);
      if (a) {
        this.remove(a);
      }
      return this;
    },
    removeInnerAt: function (b) {
      var a = this.getInnerItems()[b];
      if (a) {
        this.remove(a);
      }
      return this;
    },
    has: function (a) {
      return this.getItems().indexOf(a) != -1;
    },
    hasInnerItem: function (a) {
      return this.innerItems.indexOf(a) != -1;
    },
    indexOf: function (a) {
      return this.getItems().indexOf(a);
    },
    innerIndexOf: function (a) {
      return this.innerItems.indexOf(a);
    },
    insertInner: function (e, f) {
      var g = this.getItems().items,
        a = this.innerItems,
        d = a.indexOf(e),
        b = -1,
        c;
      if (d !== -1) {
        a.splice(d, 1);
      }
      if (typeof f == "number") {
        do {
          c = g[++f];
        } while (c && !c.isInnerItem());
        if (c) {
          b = a.indexOf(c);
          a.splice(b, 0, e);
        }
      }
      if (b === -1) {
        a.push(e);
        b = a.length - 1;
      }
      if (d !== -1) {
        this.onInnerItemMove(e, b, d);
      }
      return this;
    },
    onInnerItemMove: Ext.emptyFn,
    removeInner: function (a) {
      Ext.Array.remove(this.innerItems, a);
      return this;
    },
    insert: function (c, a) {
      var d = this,
        b;
      if (Ext.isArray(a)) {
        for (b = a.length - 1; b >= 0; b--) {
          d.insert(c, a[b]);
        }
        return d;
      }
      a = this.factoryItem(a);
      this.doInsert(c, a);
      return a;
    },
    doInsert: function (a, b) {
      var d = this,
        e = d.items,
        g = e.length,
        c,
        f;
      f = b.isInnerItem();
      if (a > g) {
        a = g;
      }
      if (e[a - 1] === b) {
        return d;
      }
      c = d.indexOf(b);
      if (c !== -1) {
        if (c < a) {
          a -= 1;
        }
        e.removeAt(c);
      }
      e.insert(a, b);
      if (c === -1) {
        b.setParent(d);
      }
      if (f) {
        d.insertInner(b, a);
      }
      if (c !== -1) {
        d.onItemMove(b, a, c);
      } else {
        d.onItemAdd(b, a);
      }
    },
    insertFirst: function (a) {
      return this.insert(0, a);
    },
    insertLast: function (a) {
      return this.insert(this.getItems().length, a);
    },
    insertBefore: function (c, b) {
      var a = this.indexOf(b);
      if (a !== -1) {
        this.insert(a, c);
      }
      return this;
    },
    insertAfter: function (c, b) {
      var a = this.indexOf(b);
      if (a !== -1) {
        this.insert(a + 1, c);
      }
      return this;
    },
    onItemAdd: function (b, a) {
      this.doItemLayoutAdd(b, a);
      if (this.initialized) {
        this.fireEvent("add", this, b, a);
      }
    },
    doItemLayoutAdd: function (a, c) {
      var b = this.getLayout();
      if (this.isRendered() && a.setRendered(!0)) {
        a.fireAction("renderedchange", [this, a, !0], "onItemAdd", b, {
          args: [a, c],
        });
      } else {
        b.onItemAdd(a, c);
      }
    },
    onItemRemove: function (b, a, c) {
      this.doItemLayoutRemove(b, a, c);
      this.fireEvent("remove", this, b, a);
    },
    doItemLayoutRemove: function (a, d, b) {
      var c = this.getLayout();
      if (this.isRendered() && a.setRendered(!1)) {
        a.fireAction("renderedchange", [this, a, !1], "onItemRemove", c, {
          args: [a, d, b],
        });
      } else {
        c.onItemRemove(a, d, b);
      }
    },
    onItemMove: function (a, c, b) {
      if (a.isDocked()) {
        a.setDocked(null);
      }
      this.doItemLayoutMove(a, c, b);
      this.fireEvent("move", this, a, c, b);
    },
    doItemLayoutMove: function (c, b, a) {
      this.getLayout().onItemMove(c, b, a);
    },
    onItemInnerStateChange: function (a, c) {
      var b = this.getLayout();
      if (c) {
        this.insertInner(a, this.items.indexOf(a));
      } else {
        this.removeInner(a);
      }
      b.onItemInnerStateChange.apply(b, arguments);
    },
    getInnerItems: function () {
      return this.innerItems;
    },
    getDockedItems: function () {
      var d = this.getItems().items,
        c = [],
        e = d.length,
        b,
        a;
      for (a = 0; a < e; a++) {
        b = d[a];
        if (b.isDocked()) {
          c.push(b);
        }
      }
      return c;
    },
    applyActiveItem: function (a, d) {
      var c = this.getInnerItems();
      this.getItems();
      if (!a && c.length === 0) {
        return 0;
      } else {
        if (typeof a == "number") {
          a = Math.max(0, Math.min(a, c.length - 1));
          a = c[a];
          if (a) {
            return a;
          } else {
            if (d) {
              return null;
            }
          }
        } else {
          if (a) {
            var b;
            if (typeof a == "string") {
              b = this.child(a);
              a = { xtype: a };
            }
            if (!b || !b.isComponent) {
              b = this.factoryItem(a);
            }
            this.pendingActiveItem = b;
            if (!this.has(b)) {
              this.add(b);
            }
            return b;
          }
        }
      }
    },
    animateActiveItem: function (d, a) {
      var c = this.getLayout(),
        b;
      if (this.activeItemAnimation) {
        this.activeItemAnimation.destroy();
      }
      this.activeItemAnimation = a = new Ext.fx.layout.Card(a);
      if (a && c.isCard) {
        a.setLayout(c);
        b = c.getAnimation();
        if (b) {
          b.disable();
        }
        a.on(
          "animationend",
          function () {
            if (b) {
              b.enable();
            }
            a.destroy();
          },
          this
        );
      }
      return this.setActiveItem(d);
    },
    doSetActiveItem: function (a, b) {
      delete this.pendingActiveItem;
      if (b) {
        b.fireEvent("deactivate", b, this, a);
      }
      if (a) {
        a.fireEvent("activate", a, this, b);
      }
    },
    show: function () {
      this.callParent(arguments);
      var a = this.getModal();
      if (a) {
        a.setHidden(!1);
      }
      return this;
    },
    hide: function () {
      this.callParent(arguments);
      var a = this.getModal();
      if (a) {
        a.setHidden(!0);
      }
      return this;
    },
    doSetHidden: function (b) {
      var a = this.getModal();
      if (a && a.getHidden() !== b) {
        a.setHidden(b);
      }
      this.callSuper(arguments);
    },
    setRendered: function (d) {
      if (this.callParent(arguments)) {
        var b = this.items.items,
          a,
          c;
        for (a = 0, c = b.length; a < c; a++) {
          b[a].setRendered(d);
        }
        return !0;
      }
      return !1;
    },
    getScrollableBehavior: function () {
      var a = this.scrollableBehavior;
      if (!a) {
        a = this.scrollableBehavior = new Ext.behavior.Scrollable(this);
      }
      return a;
    },
    applyScrollable: function (a) {
      if (typeof a === "boolean") {
        this.getScrollableBehavior().setConfig({ disabled: !a });
      } else {
        if (a && !a.isObservable) {
          this.getScrollableBehavior().setConfig(a);
        }
      }
      return a;
    },
    doSetScrollable: function () {},
    getScrollable: function () {
      return this.getScrollableBehavior().getScrollView();
    },
    getRefItems: function (d) {
      var a = this.getItems().items.slice(),
        e = a.length,
        b,
        c;
      if (d) {
        for (b = 0; b < e; b++) {
          c = a[b];
          if (c.getRefItems) {
            a = a.concat(c.getRefItems(!0));
          }
        }
      }
      return a;
    },
    getComponent: function (a) {
      if (Ext.isObject(a)) {
        a = a.getItemId();
      }
      return this.getItems().get(a);
    },
    getDockedComponent: function (a) {
      if (Ext.isObject(a)) {
        a = a.getItemId();
      }
      var c = this.getDockedItems(),
        e = c.length,
        d,
        b;
      if (Ext.isNumber(a)) {
        return c[a];
      }
      for (b = 0; b < e; b++) {
        d = c[b];
        if (d.id == a) {
          return d;
        }
      }
      return !1;
    },
    query: function (a) {
      return Ext.ComponentQuery.query(a, this);
    },
    child: function (a) {
      return this.query("> " + a)[0] || null;
    },
    down: function (a) {
      return this.query(a)[0] || null;
    },
    destroy: function () {
      var a = this,
        b = a.getModal();
      if (b) {
        b.destroy();
      }
      a.removeAll(!0, !0);
      a.unlink("_scrollable");
      Ext.destroy(a.items);
      a.callSuper();
    },
  },
  function () {
    this.addMember("defaultItemClass", this);
  }
);
Ext.define("Ext.util.Point", {
  radianToDegreeConstant: 180 / Math.PI,
  statics: {
    fromEvent: function (b) {
      var a = b.changedTouches,
        c = a && a.length > 0 ? a[0] : b;
      return this.fromTouch(c);
    },
    fromTouch: function (a) {
      return new this(a.pageX, a.pageY);
    },
    from: function (a) {
      if (!a) {
        return new this(0, 0);
      }
      if (!(a instanceof this)) {
        return new this(a.x, a.y);
      }
      return a;
    },
  },
  constructor: function (a, b) {
    if (typeof a == "undefined") {
      a = 0;
    }
    if (typeof b == "undefined") {
      b = 0;
    }
    this.x = a;
    this.y = b;
    return this;
  },
  clone: function () {
    return new this.self(this.x, this.y);
  },
  copy: function () {
    return this.clone.apply(this, arguments);
  },
  copyFrom: function (a) {
    this.x = a.x;
    this.y = a.y;
    return this;
  },
  toString: function () {
    return "Point[" + this.x + "," + this.y + "]";
  },
  equals: function (a) {
    return this.x === a.x && this.y === a.y;
  },
  isCloseTo: function (d, a) {
    if (typeof a == "number") {
      a = { x: a };
      a.y = a.x;
    }
    var e = d.x,
      f = d.y,
      b = a.x,
      c = a.y;
    return (
      this.x <= e + b && this.x >= e - b && this.y <= f + c && this.y >= f - c
    );
  },
  isWithin: function () {
    return this.isCloseTo.apply(this, arguments);
  },
  translate: function (a, b) {
    this.x += a;
    this.y += b;
    return this;
  },
  roundedEquals: function (a) {
    if (typeof a != "object") {
      a = { x: 0, y: 0 };
    }
    return (
      Math.round(this.x) === Math.round(a.x) &&
      Math.round(this.y) === Math.round(a.y)
    );
  },
  getDistanceTo: function (a) {
    if (typeof a != "object") {
      a = { x: 0, y: 0 };
    }
    var b = this.x - a.x,
      c = this.y - a.y;
    return Math.sqrt(b * b + c * c);
  },
  getAngleTo: function (a) {
    if (typeof a != "object") {
      a = { x: 0, y: 0 };
    }
    var b = this.x - a.x,
      c = this.y - a.y;
    return Math.atan2(c, b) * this.radianToDegreeConstant;
  },
});
Ext.define("Ext.util.LineSegment", {
  constructor: function (b, c) {
    var a = Ext.util.Point;
    this.point1 = a.from(b);
    this.point2 = a.from(c);
  },
  intersects: function (l) {
    var m = this.point1,
      n = this.point2,
      o = l.point1,
      p = l.point2,
      a = m.x,
      b = n.x,
      c = o.x,
      d = p.x,
      f = m.y,
      g = n.y,
      h = o.y,
      i = p.y,
      k = (a - b) * (h - i) - (f - g) * (c - d),
      e,
      j;
    if (k == 0) {
      return null;
    }
    e = ((c - d) * (a * g - f * b) - (a - b) * (c * i - h * d)) / k;
    j = ((h - i) * (a * g - f * b) - (f - g) * (c * i - h * d)) / k;
    if (
      e < Math.min(a, b) ||
      e > Math.max(a, b) ||
      e < Math.min(c, d) ||
      e > Math.max(c, d) ||
      j < Math.min(f, g) ||
      j > Math.max(f, g) ||
      j < Math.min(h, i) ||
      j > Math.max(h, i)
    ) {
      return null;
    }
    return new Ext.util.Point(e, j);
  },
  getLength: function () {
    return Math.abs(this.point1.getDistanceTo(this.point2));
  },
  getAngleToX: function () {
    var a = this.point1,
      b = this.point2,
      d = b.y - a.y,
      c = b.x - a.x;
    return Math.atan2(d, c);
  },
  getInBetweenPoint: function (a) {
    var b = this.point1,
      c = this.getAngleToX(),
      d = b.x + Math.cos(c) * a,
      e = b.y + Math.sin(c) * a;
    return new Ext.util.Point(d, e);
  },
  toString: function () {
    return this.point1.toString() + " " + this.point2.toString();
  },
});
Ext.define("Ext.Panel", {
  extend: Ext.Container,
  alternateClassName: "Ext.lib.Panel",
  xtype: "panel",
  isPanel: !0,
  config: {
    baseCls: Ext.baseCSSPrefix + "panel",
    bodyPadding: null,
    bodyMargin: null,
    bodyBorder: null,
  },
  getElementConfig: function () {
    return {
      reference: "element",
      classList: ["x-container", "x-unsized"],
      children: [
        { reference: "innerElement", className: "x-inner" },
        { reference: "tipElement", className: "x-anchor", hidden: !0 },
      ],
    };
  },
  applyBodyPadding: function (a) {
    if (a === !0) {
      a = 5;
    }
    if (a) {
      a = Ext.dom.Element.unitizeBox(a);
    }
    return a;
  },
  updateBodyPadding: function (a) {
    this.element.setStyle("padding", a);
  },
  applyBodyMargin: function (a) {
    if (a === !0) {
      a = 5;
    }
    if (a) {
      a = Ext.dom.Element.unitizeBox(a);
    }
    return a;
  },
  updateBodyMargin: function (a) {
    this.element.setStyle("margin", a);
  },
  applyBodyBorder: function (a) {
    if (a === !0) {
      a = 1;
    }
    if (a) {
      a = Ext.dom.Element.unitizeBox(a);
    }
    return a;
  },
  updateBodyBorder: function (a) {
    this.element.setStyle("border-width", a);
  },
  alignTo: function (o, C) {
    var B = this.getAlignmentInfo(o, C);
    if (B.isAligned) {
      return;
    }
    var b = this.tipElement;
    b.hide();
    if (this.currentTipPosition) {
      b.removeCls("x-anchor-" + this.currentTipPosition);
    }
    this.callParent(arguments);
    var i = Ext.util.LineSegment,
      z = o.isComponent ? o.renderElement : o,
      F = this.renderElement,
      n = z.getPageBox(),
      h = F.getPageBox(),
      c = h.left,
      l = h.top,
      k = h.right,
      j = h.bottom,
      D = c + h.width / 2,
      E = l + h.height / 2,
      x = { x: c, y: l },
      w = { x: k, y: l },
      v = { x: c, y: j },
      u = { x: k, y: j },
      A = { x: D, y: E },
      p = n.left + n.width / 2,
      q = n.top + n.height / 2,
      y = { x: p, y: q },
      m = new i(A, y),
      r = 0,
      s = 0,
      t,
      a,
      e,
      d,
      f,
      g;
    b.setVisibility(!1);
    b.show();
    t = b.getSize();
    a = t.width;
    e = t.height;
    if (m.intersects(new i(x, w))) {
      f = Math.min(Math.max(p, c + a), k - a);
      g = l;
      s = e + 10;
      d = "top";
    } else {
      if (m.intersects(new i(x, v))) {
        f = c;
        g = Math.min(Math.max(q + a / 2, a * 1.6), j - a / 2.2);
        r = e + 10;
        d = "left";
      } else {
        if (m.intersects(new i(v, u))) {
          f = Math.min(Math.max(p, c + a), k - a);
          g = j;
          s = -e - 10;
          d = "bottom";
        } else {
          if (m.intersects(new i(w, u))) {
            f = k;
            g = Math.max(Math.min(q - e, j - a * 1.3), a / 2);
            r = -e - 10;
            d = "right";
          }
        }
      }
    }
    if (f || g) {
      this.currentTipPosition = d;
      b.addCls("x-anchor-" + d);
      b.setLeft(f - c);
      b.setTop(g - l);
      b.setVisibility(!0);
      this.setLeft(this.getLeft() + r);
      this.setTop(this.getTop() + s);
    }
  },
});
Ext.define(
  "Ext.Button",
  {
    extend: Ext.Component,
    xtype: "button",
    cachedConfig: {
      pressedCls: Ext.baseCSSPrefix + "button-pressing",
      badgeCls: Ext.baseCSSPrefix + "badge",
      hasBadgeCls: Ext.baseCSSPrefix + "hasbadge",
      labelCls: Ext.baseCSSPrefix + "button-label",
      iconCls: null,
    },
    config: {
      badgeText: null,
      text: null,
      icon: !1,
      iconAlign: "left",
      pressedDelay: 0,
      handler: null,
      scope: null,
      autoEvent: null,
      ui: "normal",
      baseCls: Ext.baseCSSPrefix + "button",
    },
    template: [
      { tag: "span", reference: "badgeElement", hidden: !0 },
      {
        tag: "span",
        className: Ext.baseCSSPrefix + "button-icon",
        reference: "iconElement",
      },
      { tag: "span", reference: "textElement", hidden: !0 },
    ],
    initialize: function () {
      this.callParent();
      this.element.on({
        scope: this,
        tap: "onTap",
        touchstart: "onPress",
        touchend: "onRelease",
      });
    },
    updateBadgeText: function (b) {
      var c = this.element,
        a = this.badgeElement;
      if (b) {
        a.show();
        a.setText(b);
      } else {
        a.hide();
      }
      c[b ? "addCls" : "removeCls"](this.getHasBadgeCls());
    },
    updateText: function (b) {
      var a = this.textElement;
      if (a) {
        if (b) {
          a.show();
          a.setHtml(b);
        } else {
          a.hide();
        }
        this.refreshIconAlign();
      }
    },
    updateHtml: function (b) {
      var a = this.textElement;
      if (b) {
        a.show();
        a.setHtml(b);
      } else {
        a.hide();
      }
    },
    updateBadgeCls: function (b, a) {
      this.badgeElement.replaceCls(a, b);
    },
    updateHasBadgeCls: function (c, a) {
      var b = this.element;
      if (b.hasCls(a)) {
        b.replaceCls(a, c);
      }
    },
    updateLabelCls: function (b, a) {
      this.textElement.replaceCls(a, b);
    },
    updatePressedCls: function (c, a) {
      var b = this.element;
      if (b.hasCls(a)) {
        b.replaceCls(a, c);
      }
    },
    updateIcon: function (c) {
      var a = this,
        b = a.iconElement;
      if (c) {
        a.showIconElement();
        b.setStyle("background-image", "url(" + c + ")");
        a.refreshIconAlign();
      } else {
        b.setStyle("background-image", "");
        a.hideIconElement();
      }
    },
    updateIconCls: function (d, b) {
      var a = this,
        c = a.iconElement;
      if (d) {
        a.showIconElement();
        c.replaceCls(b, d);
        a.refreshIconAlign();
      } else {
        c.removeCls(b);
        a.hideIconElement();
      }
    },
    updateIconAlign: function (c, d) {
      var b = this.element,
        a = Ext.baseCSSPrefix + "iconalign-";
      if (!this.getText()) {
        c = "center";
      }
      b.removeCls(a + "center");
      b.removeCls(a + d);
      if (this.getIcon() || this.getIconCls()) {
        b.addCls(a + c);
      }
    },
    refreshIconAlign: function () {
      this.updateIconAlign(this.getIconAlign());
    },
    applyAutoEvent: function (a) {
      var b = this;
      if (typeof a == "string") {
        a = { name: a, scope: b.scope || b };
      }
      return a;
    },
    updateAutoEvent: function (b) {
      var c = b.name,
        a = b.scope;
      this.setHandler(function () {
        a.fireEvent(c, a, this);
      });
      this.setScope(a);
    },
    hideIconElement: function () {
      this.iconElement.removeCls(Ext.baseCSSPrefix + "shown");
      this.iconElement.addCls(Ext.baseCSSPrefix + "hidden");
    },
    showIconElement: function () {
      this.iconElement.removeCls(Ext.baseCSSPrefix + "hidden");
      this.iconElement.addCls(Ext.baseCSSPrefix + "shown");
    },
    applyUi: function (a) {
      if (a && Ext.isString(a)) {
        var b = a.split("-");
        if (b && (b[1] == "back" || b[1] == "forward")) {
          return b;
        }
      }
      return a;
    },
    getUi: function () {
      var a = this._ui;
      if (Ext.isArray(a)) {
        return a.join("-");
      }
      return a;
    },
    applyPressedDelay: function (a) {
      if (Ext.isNumber(a)) {
        return a;
      }
      return a ? 100 : 0;
    },
    onPress: function () {
      var a = this,
        b = a.element,
        c = a.getPressedDelay(),
        d = a.getPressedCls();
      if (!a.getDisabled()) {
        if (c > 0) {
          a.pressedTimeout = setTimeout(function () {
            delete a.pressedTimeout;
            if (b) {
              b.addCls(d);
            }
          }, c);
        } else {
          b.addCls(d);
        }
      }
    },
    onRelease: function (a) {
      this.fireAction("release", [this, a], "doRelease");
    },
    doRelease: function (a, b) {
      if (!a.getDisabled()) {
        if (a.hasOwnProperty("pressedTimeout")) {
          clearTimeout(a.pressedTimeout);
          delete a.pressedTimeout;
        } else {
          a.element.removeCls(a.getPressedCls());
        }
      }
    },
    onTap: function (a) {
      if (this.getDisabled()) {
        return !1;
      }
      this.fireAction("tap", [this, a], "doTap");
    },
    doTap: function (b, c) {
      var a = b.getHandler(),
        d = b.getScope() || b;
      if (!a) {
        return;
      }
      if (typeof a == "string") {
        a = d[a];
      }
      if (c && c.preventDefault) {
        c.preventDefault();
      }
      a.apply(d, arguments);
    },
  },
  function () {}
);
Ext.define("MEM.overrides.Button", {
  override: "Ext.Button",
  onTap: function (a) {
    a.preventDefault();
    if (this.getDisabled()) {
      return !1;
    }
    this.fireAction("tap", [this, a], "doTap");
  },
});
Ext.define("Ext.Sheet", {
  extend: Ext.Panel,
  xtype: "sheet",
  config: {
    baseCls: Ext.baseCSSPrefix + "sheet",
    modal: !0,
    centered: !0,
    stretchX: null,
    stretchY: null,
    enter: "bottom",
    exit: "bottom",
    showAnimation: !Ext.browser.is.AndroidStock2
      ? { type: "slideIn", duration: 250, easing: "ease-out" }
      : null,
    hideAnimation: !Ext.browser.is.AndroidStock2
      ? { type: "slideOut", duration: 250, easing: "ease-in" }
      : null,
  },
  isInputRegex: /^(input|textarea|select|a)$/i,
  beforeInitialize: function () {
    var a = this;
    Ext.os.is.iOS &&
      this.element.dom.addEventListener(
        "touchstart",
        function (b) {
          if (!a.isInputRegex.test(b.target.tagName)) {
            b.preventDefault();
          }
        },
        !0
      );
  },
  platformConfig: [{ theme: ["Windows"], enter: "top", exit: "top" }],
  applyHideAnimation: function (a) {
    var b = this.getExit(),
      c = b;
    if (b === null) {
      return null;
    }
    if (a === !0) {
      a = { type: "slideOut" };
    }
    if (Ext.isString(a)) {
      a = { type: a };
    }
    var d = Ext.factory(a, Ext.fx.Animation);
    if (d) {
      if (b == "bottom") {
        c = "down";
      }
      if (b == "top") {
        c = "up";
      }
      d.setDirection(c);
    }
    return d;
  },
  applyShowAnimation: function (a) {
    var c = this.getEnter(),
      d = c;
    if (c === null) {
      return null;
    }
    if (a === !0) {
      a = { type: "slideIn" };
    }
    if (Ext.isString(a)) {
      a = { type: a };
    }
    var b = Ext.factory(a, Ext.fx.Animation);
    if (b) {
      if (c == "bottom") {
        d = "down";
      }
      if (c == "top") {
        d = "up";
      }
      b.setBefore({ display: null });
      b.setReverse(!0);
      b.setDirection(d);
    }
    return b;
  },
  updateStretchX: function (a) {
    this.getLeft();
    this.getRight();
    if (a) {
      this.setLeft(0);
      this.setRight(0);
    }
  },
  updateStretchY: function (a) {
    this.getTop();
    this.getBottom();
    if (a) {
      this.setTop(0);
      this.setBottom(0);
    }
  },
});
Ext.define("Ext.data.Connection", {
  mixins: { observable: Ext.mixin.Observable },
  statics: { requestId: 0 },
  config: {
    url: null,
    async: !0,
    method: null,
    username: "",
    password: "",
    disableCaching: !0,
    disableCachingParam: "_dc",
    timeout: 30000,
    extraParams: null,
    defaultHeaders: null,
    useDefaultHeader: !0,
    defaultPostHeader: "application/x-www-form-urlencoded; charset=UTF-8",
    useDefaultXhrHeader: !0,
    defaultXhrHeader: "XMLHttpRequest",
    autoAbort: !1,
  },
  textAreaRe: /textarea/i,
  multiPartRe: /multipart\/form-data/i,
  lineBreakRe: /\r\n/g,
  constructor: function (a) {
    this.initConfig(a);
    this.requests = {};
  },
  request: function (a) {
    a = a || {};
    var b = this,
      k = a.scope || window,
      g = a.username || b.getUsername(),
      h = a.password || b.getPassword() || "",
      j = a.xhr2 === !0 && Ext.feature.has.XHR2,
      f,
      e,
      c,
      i,
      d;
    if (
      !Ext.isEmpty(g) &&
      !Ext.isEmpty(h, !0) &&
      Ext.isEmpty(a.withCredentials)
    ) {
      a.withCredentials = !0;
    }
    if (b.fireEvent("beforerequest", b, a) !== !1) {
      e = b.setOptions(a, k);
      if (this.isFormUpload(a) === !0) {
        this.upload(a.form, e.url, e.data, a);
        return null;
      }
      if (a.autoAbort === !0 || b.getAutoAbort()) {
        b.abort();
      }
      d = this.getXhrInstance();
      f = a.async !== !1 ? a.async || b.getAsync() : !1;
      if (g) {
        d.open(e.method, e.url, f, g, h);
      } else {
        d.open(e.method, e.url, f);
      }
      i = b.setupHeaders(d, a, e.data, e.params);
      c = {
        id: ++Ext.data.Connection.requestId,
        xhr: d,
        headers: i,
        options: a,
        async: f,
        timeout: setTimeout(function () {
          c.timedout = !0;
          b.abort(c);
        }, a.timeout || b.getTimeout()),
      };
      b.requests[c.id] = c;
      if (f) {
        d[j ? "onload" : "onreadystatechange"] = Ext.Function.bind(
          b.onStateChange,
          b,
          [c]
        );
      }
      if (j) {
        d.onerror = Ext.Function.bind(b.onStateChange, b, [c]);
      }
      if (a.progress) {
        d.onprogress = function (b) {
          if (a.progress.isProgressable) {
            if (b.total === 0 && a.progress.getDynamic()) {
              Ext.Logger.warn(
                "Server is not configured to properly return Content-Length. Dynamic progress will be disabled"
              );
              a.progress.setState.call(a.progress, "download");
              a.progress.setDynamic(!1);
              d.onprogress = null;
              return;
            }
            Ext.callback(a.progress.updateProgress, a.progress, [
              b.loaded / b.total,
              "download",
            ]);
            if (
              b.total > 0 &&
              !a.progress.getDynamic() &&
              a.progress.getInitialConfig().dynamic
            ) {
              a.progress.setDynamic(!0);
            }
          } else {
            if (Ext.isFunction(a.progress)) {
              Ext.callback(a.progress, a.progressScope || c, [b, "download"]);
            }
          }
        };
        if (Ext.feature.has.XHRUploadProgress) {
          d.upload.onprogress = function (d) {
            b.fireEvent("requestuploadprogress", b, c, d);
            if (a.progress.isProgressable) {
              Ext.callback(a.progress.updateProgress, a.progress, [
                d.loaded / d.total,
                "upload",
              ]);
            } else {
              if (Ext.isFunction(a.progress)) {
                Ext.callback(a.progress, a.progressScope || c, [d, "upload"]);
              }
            }
          };
        }
        if (a.progress.isProgressable) {
          if (!Ext.feature.has.XHRUploadProgress) {
            a.progress.setDynamic(!1);
          }
          Ext.callback(a.progress.startProgress, a.progress);
        }
      }
      d.send(e.data);
      if (!f) {
        return this.onComplete(c);
      }
      return c;
    } else {
      Ext.callback(a.callback, a.scope, [a, undefined, undefined]);
      return null;
    }
  },
  upload: function (a, l, i, e) {
    a = Ext.getDom(a);
    e = e || {};
    var b = Ext.id(),
      k = this,
      c = document.createElement("iframe"),
      h = [],
      g = "multipart/form-data",
      j = {
        target: a.target,
        method: a.method,
        encoding: a.encoding,
        enctype: a.enctype,
        action: a.action,
      },
      f = function (c, b) {
        d = document.createElement("input");
        Ext.fly(d).set({ type: "hidden", value: b, name: c });
        a.appendChild(d);
        h.push(d);
      },
      d;
    Ext.fly(c).set({
      id: b,
      name: b,
      cls: Ext.baseCSSPrefix + "hide-display",
      src: Ext.SSL_SECURE_URL,
    });
    document.body.appendChild(c);
    if (document.frames) {
      document.frames[b].name = b;
    }
    Ext.fly(a).set({
      target: b,
      method: "POST",
      enctype: g,
      encoding: g,
      action: l || j.action,
    });
    if (i) {
      Ext.iterate(Ext.Object.fromQueryString(i), function (c, b) {
        if (Ext.isArray(b)) {
          Ext.each(b, function (d) {
            f(c, d);
          });
        } else {
          f(c, b);
        }
      });
    }
    c.addEventListener("load", function () {
      Ext.callback(k.onUploadComplete, k, [c, e, b]);
      c.removeEventListener("load", arguments.callee);
    });
    a.submit();
    Ext.fly(a).set(j);
    Ext.each(h, function (b) {
      Ext.removeNode(b);
    });
  },
  onUploadComplete: function (c, e, f) {
    var b = { responseText: "", responseXML: null },
      a,
      d;
    try {
      a =
        c.contentWindow ||
        c.contentWindow.document ||
        c.contentDocument ||
        window.frames[f].document;
      if (a) {
        if (a.hasOwnProperty("body") && a.body) {
          if (this.textAreaRe.test((d = a.body.firstChild || {}).tagName)) {
            b.responseText = d.value;
          } else {
            b.responseText = a.body.innerHTML;
          }
        }
        b.responseXML = a.XMLDocument || a;
      }
    } catch (g) {
      b.success = !1;
      b.message =
        "Cross-Domain access is not permitted between frames. XHR2 is recommended for this type of request.";
      b.error = g;
    }
    this.onAfterUploadComplete(b, c, e);
  },
  onAfterUploadComplete: function (b, d, a) {
    var c = this;
    c.fireEvent("requestcomplete", c, b, a);
    Ext.callback(a.success, a.scope, [b, a]);
    Ext.callback(a.callback, a.scope, [a, !0, b]);
    setTimeout(function () {
      Ext.removeNode(d);
    }, 100);
  },
  isFormUpload: function (a) {
    var b = this.getForm(a);
    if (b) {
      return a.isUpload || this.multiPartRe.test(b.getAttribute("enctype"));
    }
    return !1;
  },
  getForm: function (a) {
    return Ext.getDom(a.form) || null;
  },
  setOptions: function (a, k) {
    var g = this,
      b = a.params || {},
      f = g.getExtraParams(),
      e = a.urlParams,
      c = a.url || g.getUrl(),
      i = a.jsonData,
      h,
      j,
      d;
    if (Ext.isFunction(b)) {
      b = b.call(k, a);
    }
    if (Ext.isFunction(c)) {
      c = c.call(k, a);
    }
    c = this.setupUrl(a, c);
    d = a.data || a.rawData || a.binaryData || a.xmlData || i || null;
    if (i && !Ext.isPrimitive(i)) {
      d = Ext.encode(d);
    }
    if (a.binaryData) {
      if (d instanceof Array) {
        d = new Uint8Array(a.binaryData);
      }
      if (d instanceof Uint8Array) {
        d = d.buffer;
      }
    }
    if (Ext.isObject(b)) {
      b = Ext.Object.toQueryString(b);
    }
    if (Ext.isObject(f)) {
      f = Ext.Object.toQueryString(f);
    }
    b = b + (f ? (b ? "&" : "") + f : "");
    e = Ext.isObject(e) ? Ext.Object.toQueryString(e) : e;
    b = this.setupParams(a, b);
    h = (a.method || g.getMethod() || (b || d ? "POST" : "GET")).toUpperCase();
    this.setupMethod(a, h);
    j =
      a.disableCaching !== !1 ? a.disableCaching || g.getDisableCaching() : !1;
    if (j) {
      c = Ext.urlAppend(
        c,
        (a.disableCachingParam || g.getDisableCachingParam()) +
          "=" +
          new Date().getTime()
      );
    }
    if ((h == "GET" || d) && b) {
      c = Ext.urlAppend(c, b);
      b = null;
    }
    if (e) {
      c = Ext.urlAppend(c, e);
    }
    return { url: c, method: h, data: d || b || null };
  },
  setupUrl: function (c, a) {
    var b = this.getForm(c);
    if (b) {
      a = a || b.action;
    }
    return a;
  },
  setupParams: function (c, a) {
    var d = this.getForm(c),
      b;
    if (d && !this.isFormUpload(c)) {
      b = Ext.Element.serializeForm(d);
      a = a ? a + "&" + b : b;
    }
    return a;
  },
  setupMethod: function (a, b) {
    if (this.isFormUpload(a)) {
      return "POST";
    }
    return b;
  },
  setupHeaders: function (h, a, g, k) {
    var d = this,
      b = Ext.apply({}, a.headers || {}, d.getDefaultHeaders() || {}),
      e = d.getDefaultPostHeader(),
      i = a.jsonData,
      j = a.xmlData,
      c,
      f;
    if (!b["Content-Type"] && (g || k)) {
      if (g) {
        if (a.rawData) {
          e = "text/plain";
        } else {
          if (j && Ext.isDefined(j)) {
            e = "text/xml";
          } else {
            if (i && Ext.isDefined(i)) {
              e = "application/json";
            }
          }
        }
      }
      if (!(Ext.feature.has.XHR2 && g instanceof FormData)) {
        b["Content-Type"] = e;
      }
    }
    if (
      ((d.getUseDefaultXhrHeader() && a.useDefaultXhrHeader !== !1) ||
        a.useDefaultXhrHeader) &&
      !b["X-Requested-With"]
    ) {
      b["X-Requested-With"] = d.getDefaultXhrHeader();
    }
    if (!Ext.isEmpty(a.username) && !Ext.isEmpty(a.password)) {
      b["Authorization"] = "Basic " + btoa(a.username + ":" + a.password);
    }
    try {
      for (c in b) {
        if (b.hasOwnProperty(c)) {
          f = b[c];
          h.setRequestHeader(c, f);
        }
      }
    } catch (l) {
      d.fireEvent("exception", c, f);
    }
    if (a.responseType) {
      try {
        h.responseType =
          a.responseType === "blob" && Ext.browser.is.Safari
            ? "arraybuffer"
            : a.responseType;
      } catch (m) {}
    }
    if (a.withCredentials) {
      h.withCredentials = a.withCredentials;
    }
    return b;
  },
  getXhrInstance: (function () {
    var c = [
        function () {
          return new XMLHttpRequest();
        },
        function () {
          return new ActiveXObject("MSXML2.XMLHTTP.3.0");
        },
        function () {
          return new ActiveXObject("MSXML2.XMLHTTP");
        },
        function () {
          return new ActiveXObject("Microsoft.XMLHTTP");
        },
      ],
      b = 0,
      d = c.length,
      a;
    for (; b < d; ++b) {
      try {
        a = c[b];
        a();
        break;
      } catch (e) {}
    }
    return a;
  })(),
  isLoading: function (a) {
    if (!(a && a.xhr)) {
      return !1;
    }
    var b = a.xhr.readyState;
    return !(b === 0 || b == 4);
  },
  abort: function (a) {
    var b = this,
      c = b.requests,
      d;
    if (a && b.isLoading(a)) {
      a.xhr.onreadystatechange = null;
      a.xhr.abort();
      b.clearTimeout(a);
      if (!a.timedout) {
        a.aborted = !0;
      }
      b.onComplete(a);
      b.cleanup(a);
    } else {
      if (!a) {
        for (d in c) {
          if (c.hasOwnProperty(d)) {
            b.abort(c[d]);
          }
        }
      }
    }
  },
  abortAll: function () {
    this.abort();
  },
  onStateChange: function (a) {
    if (a.xhr.readyState == 4) {
      this.clearTimeout(a);
      this.onComplete(a);
      this.cleanup(a);
    }
  },
  clearTimeout: function (a) {
    clearTimeout(a.timeout);
    delete a.timeout;
  },
  cleanup: function (a) {
    a.xhr = null;
    delete a.xhr;
  },
  onComplete: function (b) {
    var d = this,
      a = b.options,
      e,
      f,
      c;
    try {
      e = d.parseStatus(b.xhr.status, b.xhr);
      if (b.timedout) {
        e.success = !1;
      }
    } catch (g) {
      e = { success: !1, isException: !1 };
    }
    f = e.success;
    if (f) {
      c = d.createResponse(b);
      d.fireEvent("requestcomplete", d, c, a);
      Ext.callback(a.success, a.scope, [c, a]);
    } else {
      if (e.isException || b.aborted || b.timedout) {
        c = d.createException(b);
      } else {
        c = d.createResponse(b);
      }
      d.fireEvent("requestexception", d, c, a);
      Ext.callback(a.failure, a.scope, [c, a]);
    }
    Ext.callback(a.callback, a.scope, [a, f, c]);
    if (a.progress && a.progress.isProgressable) {
      Ext.callback(a.progress.endProgress, a.progress, [e]);
    }
    delete d.requests[b.id];
    return c;
  },
  parseStatus: function (a, d) {
    a = a == 1223 ? 204 : a;
    var c =
        (a >= 200 && a < 300) ||
        a == 304 ||
        (a == 0 && d.responseText && d.responseText.length > 0),
      b = !1;
    if (!c) {
      switch (a) {
        case 12002:
        case 12029:
        case 12030:
        case 12031:
        case 12152:
        case 13030:
          b = !0;
          break;
      }
    }
    return { success: c, isException: b };
  },
  createResponse: function (b) {
    var a = b.xhr,
      h = {},
      f,
      i,
      d,
      c,
      j,
      e,
      g = a.responseType === "blob" || a.responseType === "arraybuffer",
      l = a.responseType === "text",
      k = a.responseType === "document";
    if (b.timedout || b.aborted) {
      b.success = !1;
      f = [];
    } else {
      f = a.getAllResponseHeaders().replace(this.lineBreakRe, "\n").split("\n");
    }
    i = f.length;
    while (i--) {
      d = f[i];
      c = d.indexOf(":");
      if (c >= 0) {
        j = d.substr(0, c).toLowerCase();
        if (d.charAt(c + 1) == " ") {
          ++c;
        }
        h[j] = d.substr(c + 1);
      }
    }
    b.xhr = null;
    delete b.xhr;
    e = {
      request: b,
      requestId: b.id,
      status: a.status,
      statusText: a.statusText,
      getResponseHeader: function (a) {
        return h[a.toLowerCase()];
      },
      getAllResponseHeaders: function () {
        return h;
      },
      responseText: g ? null : k ? null : a.responseText,
      responseXML: g ? null : l ? null : a.responseXML,
      responseBytes: g ? a.response : null,
    };
    if (b.options.responseType === "blob" && a.responseType === "arraybuffer") {
      e.responseBytes = new Blob([e.responseBytes], {
        type: a.getResponseHeader("Content-Type"),
      });
    }
    a = null;
    return e;
  },
  createException: function (a) {
    return {
      request: a,
      requestId: a.id,
      status: a.aborted ? -1 : 0,
      statusText: a.aborted ? "transaction aborted" : "communication failure",
      aborted: a.aborted,
      timedout: a.timedout,
    };
  },
});
Ext.define("MEM.overrides.data.Connection", {
  override: "Ext.data.Connection",
  onUploadComplete: function (c, e, f) {
    var b = { responseText: "", responseXML: null },
      a,
      d;
    try {
      a =
        (c.contentWindow && c.contentWindow.document) ||
        c.contentDocument ||
        window.frames[f].document;
      if (a) {
        if (a.hasOwnProperty("body") && a.body) {
          if (this.textAreaRe.test((d = a.body.firstChild || {}).tagName)) {
            b.responseText = d.value;
          } else {
            b.responseText = a.body.innerHTML;
          }
        }
        b.responseXML = a.XMLDocument || a;
      }
    } catch (g) {
      b.success = !1;
      b.message =
        "Cross-Domain access is not permitted between frames. XHR2 is recommended for this type of request.";
      b.error = g;
    }
    this.onAfterUploadComplete(b, c, e);
  },
});
Ext.define("Ext.Ajax", {
  extend: Ext.data.Connection,
  singleton: !0,
  autoAbort: !1,
});
Ext.define("Ext.util.Geolocation", {
  extend: Ext.Evented,
  alternateClassName: ["Ext.util.GeoLocation"],
  config: {
    autoUpdate: !0,
    frequency: 10000,
    latitude: null,
    longitude: null,
    accuracy: null,
    altitude: null,
    altitudeAccuracy: null,
    heading: null,
    speed: null,
    timestamp: null,
    allowHighAccuracy: !1,
    timeout: Infinity,
    maximumAge: 0,
    provider: undefined,
  },
  updateMaximumAge: function () {
    if (this.watchOperation) {
      this.updateWatchOperation();
    }
  },
  updateTimeout: function () {
    if (this.watchOperation) {
      this.updateWatchOperation();
    }
  },
  updateAllowHighAccuracy: function () {
    if (this.watchOperation) {
      this.updateWatchOperation();
    }
  },
  applyProvider: function (a) {
    if (Ext.feature.has.Geolocation) {
      if (!a) {
        if (navigator && navigator.geolocation) {
          a = navigator.geolocation;
        } else {
          if (window.google) {
            a = google.gears.factory.create("beta.geolocation");
          }
        }
      }
    } else {
      this.fireEvent(
        "locationerror",
        this,
        !1,
        !1,
        !0,
        "This device does not support Geolocation."
      );
    }
    return a;
  },
  updateAutoUpdate: function (c, d) {
    var a = this,
      b = a.getProvider();
    if (d && b) {
      clearInterval(a.watchOperationId);
      a.watchOperationId = null;
    }
    if (c) {
      if (!b) {
        a.fireEvent("locationerror", a, !1, !1, !0, null);
        return;
      }
      try {
        a.updateWatchOperation();
      } catch (e) {
        a.fireEvent("locationerror", a, !1, !1, !0, e.message);
      }
    }
  },
  updateWatchOperation: function () {
    var a = this,
      b = a.getProvider();
    if (a.watchOperationId) {
      clearInterval(a.watchOperationId);
    }
    function pollPosition() {
      b.getCurrentPosition(
        Ext.bind(a.fireUpdate, a),
        Ext.bind(a.fireError, a),
        a.parseOptions()
      );
    }
    pollPosition();
    a.watchOperationId = setInterval(pollPosition, this.getFrequency());
  },
  updateLocation: function (b, e, f) {
    var a = this,
      d = a.getProvider();
    var c = function (d, c) {
      if (c) {
        a.fireError(c);
      } else {
        a.fireEvent("locationerror", a, !1, !1, !0, d);
      }
      if (b) {
        b.call(e || a, null, a);
      }
    };
    if (!d) {
      c(null);
      return;
    }
    try {
      d.getCurrentPosition(
        function (c) {
          a.fireUpdate(c);
          if (b) {
            b.call(e || a, a, a);
          }
        },
        function (a) {
          c(null, a);
        },
        f || a.parseOptions()
      );
    } catch (g) {
      c(g.message);
    }
  },
  fireUpdate: function (b) {
    var c = this,
      a = b.coords;
    this.position = b;
    c.setConfig({
      timestamp: b.timestamp,
      latitude: a.latitude,
      longitude: a.longitude,
      accuracy: a.accuracy,
      altitude: a.altitude,
      altitudeAccuracy: a.altitudeAccuracy,
      heading: a.heading,
      speed: a.speed,
    });
    c.fireEvent("locationupdate", c);
  },
  fireError: function (a) {
    var b = a.code;
    this.fireEvent(
      "locationerror",
      this,
      b == a.TIMEOUT,
      b == a.PERMISSION_DENIED,
      b == a.POSITION_UNAVAILABLE,
      a.message == undefined ? null : a.message
    );
  },
  parseOptions: function () {
    var a = this.getTimeout(),
      b = {
        maximumAge: this.getMaximumAge(),
        enableHighAccuracy: this.getAllowHighAccuracy(),
      };
    if (a !== Infinity) {
      b.timeout = a;
    }
    return b;
  },
  destroy: function () {
    this.setAutoUpdate(!1);
  },
});
Ext.define(
  "Ext.Map",
  {
    extend: Ext.Container,
    xtype: "map",
    isMap: !0,
    config: {
      baseCls: Ext.baseCSSPrefix + "map",
      useCurrentLocation: !1,
      map: null,
      geo: null,
      mapOptions: {},
      mapListeners: null,
    },
    constructor: function () {
      this.callParent(arguments);
      if (!(window.google || {}).maps) {
        this.setHtml("Google Maps API is required");
      }
    },
    initialize: function () {
      this.callParent();
      this.initMap();
      this.on({ painted: "doResize", scope: this });
      this.innerElement.on("touchstart", "onTouchStart", this);
    },
    initMap: function () {
      var c = this.getMap();
      if (!c) {
        var d = (window.google || {}).maps;
        if (!d) {
          return null;
        }
        var f = this.mapContainer,
          a = this.getMapOptions(),
          e = d.event,
          b = this;
        if (f.dom.firstChild) {
          Ext.fly(f.dom.firstChild).destroy();
        }
        if (Ext.os.is.iPad) {
          Ext.merge(
            {
              navigationControlOptions: {
                style: d.NavigationControlStyle.ZOOM_PAN,
              },
            },
            a
          );
        }
        a.mapTypeId = a.mapTypeId || d.MapTypeId.ROADMAP;
        a.center = a.center || new d.LatLng(37.381592, -122.135672);
        if (a.center && a.center.latitude && !Ext.isFunction(a.center.lat)) {
          a.center = new d.LatLng(a.center.latitude, a.center.longitude);
        }
        a.zoom = a.zoom || 12;
        c = new d.Map(f.dom, a);
        this.setMap(c);
        e.addListener(c, "zoom_changed", Ext.bind(b.onZoomChange, b));
        e.addListener(c, "maptypeid_changed", Ext.bind(b.onTypeChange, b));
        e.addListener(c, "center_changed", Ext.bind(b.onCenterChange, b));
        e.addListenerOnce(c, "tilesloaded", Ext.bind(b.onTilesLoaded, b));
        this.addMapListeners();
      }
      return this.getMap();
    },
    renderMap: function () {
      this.initMap();
    },
    getElementConfig: function () {
      return {
        reference: "element",
        className: "x-container",
        children: [
          {
            reference: "innerElement",
            className: "x-inner",
            children: [
              {
                reference: "mapContainer",
                className: Ext.baseCSSPrefix + "map-container",
              },
            ],
          },
        ],
      };
    },
    onTouchStart: function (a) {
      a.makeUnpreventable();
    },
    applyMapOptions: function (a) {
      return Ext.merge({}, this.options, a);
    },
    updateMapOptions: function (b) {
      var c = (window.google || {}).maps,
        a = this.getMap();
      if (c && a) {
        a.setOptions(b);
      }
    },
    doMapCenter: function () {
      this.setMapCenter(this.getMapOptions().center);
    },
    getMapOptions: function () {
      return Ext.merge({}, this.options || this.getInitialConfig("mapOptions"));
    },
    updateUseCurrentLocation: function (a) {
      this.setGeo(a);
      if (!a) {
        this.setMapCenter();
      }
    },
    applyGeo: function (a) {
      return Ext.factory(a, Ext.util.Geolocation, this.getGeo());
    },
    updateGeo: function (a, c) {
      var b = {
        locationupdate: "onGeoUpdate",
        locationerror: "onGeoError",
        scope: this,
      };
      if (c) {
        c.un(b);
      }
      if (a) {
        a.on(b);
        a.updateLocation();
      }
    },
    doResize: function () {
      var b = (window.google || {}).maps,
        a = this.getMap();
      if (b && a) {
        b.event.trigger(a, "resize");
      }
    },
    onTilesLoaded: function () {
      this.fireEvent("maprender", this, this.getMap());
    },
    addMapListeners: function () {
      var i = (window.google || {}).maps,
        j = this.getMap(),
        d = this.getMapListeners();
      if (i) {
        var h = i.event,
          k = this,
          a,
          e,
          c,
          b,
          g;
        if (Ext.isSimpleObject(d)) {
          for (var f in d) {
            a = d[f];
            if (Ext.isSimpleObject(a)) {
              e = a.scope;
              c = a.fn;
            } else {
              if (Ext.isFunction(a)) {
                e = null;
                c = a;
              }
            }
            if (c) {
              b = function () {
                this.fn.apply(this.scope, [k]);
                if (this.handle) {
                  h.removeListener(this.handle);
                  delete this.handle;
                  delete this.fn;
                  delete this.scope;
                }
              };
              g = h.addListener(j, f, Ext.bind(b, b));
              b.fn = c;
              b.scope = e;
              if (a.single === !0) {
                b.handle = g;
              }
            }
          }
        }
      }
    },
    onGeoUpdate: function (a) {
      if (a) {
        this.setMapCenter(
          new google.maps.LatLng(a.getLatitude(), a.getLongitude())
        );
      }
    },
    onGeoError: Ext.emptyFn,
    setMapCenter: function (a) {
      var e = this,
        b = e.getMap(),
        d = e.getMapOptions(),
        c = (window.google || {}).maps;
      if (c) {
        if (!a) {
          if (b && b.getCenter) {
            a = b.getCenter();
          } else {
            if (d.hasOwnProperty("center")) {
              a = d.center;
            } else {
              a = new c.LatLng(37.381592, -122.135672);
            }
          }
        }
        if (a && !(a instanceof c.LatLng) && "longitude" in a) {
          a = new c.LatLng(a.latitude, a.longitude);
        }
        if (!b) {
          d.center = d.center || a;
          e.renderMap();
          b = e.getMap();
        }
        if (b && a instanceof c.LatLng) {
          b.panTo(a);
        } else {
          this.options = Ext.apply(this.getMapOptions(), { center: a });
        }
      }
    },
    onZoomChange: function () {
      var c = this.getMapOptions(),
        a = this.getMap(),
        b;
      b = a && a.getZoom ? a.getZoom() : c.zoom || 10;
      this.options = Ext.apply(c, { zoom: b });
      this.fireEvent("zoomchange", this, a, b);
    },
    onTypeChange: function () {
      var c = this.getMapOptions(),
        a = this.getMap(),
        b;
      b = a && a.getMapTypeId ? a.getMapTypeId() : c.mapTypeId;
      this.options = Ext.apply(c, { mapTypeId: b });
      this.fireEvent("typechange", this, a, b);
    },
    onCenterChange: function () {
      var c = this.getMapOptions(),
        a = this.getMap(),
        b;
      b = a && a.getCenter ? a.getCenter() : c.center;
      this.options = Ext.apply(c, { center: b });
      this.fireEvent("centerchange", this, a, b);
    },
    destroy: function () {
      Ext.destroy(this.getGeo());
      var a = this.getMap();
      if (a && (window.google || {}).maps) {
        google.maps.event.clearInstanceListeners(a);
      }
      this.callParent();
    },
  },
  function () {}
);
Ext.define("Ext.ComponentQuery", { singleton: !0 }, function () {
  var a = this,
    i = [
      "var r = [],",
      "i = 0,",
      "it = items,",
      "l = it.length,",
      "c;",
      "for (; i < l; i++) {",
      "c = it[i];",
      "if (c.{0}) {",
      "r.push(c);",
      "}",
      "}",
      "return r;",
    ].join(""),
    c = function (b, a) {
      return a.method.apply(this, [b].concat(a.args));
    },
    e = function (d, g) {
      var b = [],
        c = 0,
        e = d.length,
        a,
        f = g !== ">";
      for (; c < e; c++) {
        a = d[c];
        if (a.getRefItems) {
          b = b.concat(a.getRefItems(f));
        }
      }
      return b;
    },
    k = function (d) {
      var c = [],
        b = 0,
        e = d.length,
        a;
      for (; b < e; b++) {
        a = d[b];
        while (!!(a = a.ownerCt || a.floatParent)) {
          c.push(a);
        }
      }
      return c;
    },
    b = function (b, e, f) {
      if (e === "*") {
        return b.slice();
      } else {
        var d = [],
          c = 0,
          g = b.length,
          a;
        for (; c < g; c++) {
          a = b[c];
          if (a.isXType(e, f)) {
            d.push(a);
          }
        }
        return d;
      }
    },
    h = function (e, c) {
      var g = Ext.Array,
        d = [],
        b = 0,
        f = e.length,
        a;
      for (; b < f; b++) {
        a = e[b];
        if (a.el ? a.el.hasCls(c) : g.contains(a.initCls(), c)) {
          d.push(a);
        }
      }
      return d;
    },
    g = function (h, b, j, c) {
      var d = [],
        g = 0,
        i = h.length,
        a,
        f,
        e;
      for (; g < i; g++) {
        a = h[g];
        f = Ext.Class.getConfigNameMap(b).get;
        if (a[f]) {
          e = a[f]();
          if (!c ? !!e : String(e) === c) {
            d.push(a);
          }
        } else {
          if (a.config && a.config[b]) {
            if (!c ? !!a.config[b] : String(a.config[b]) === c) {
              d.push(a);
            }
          } else {
            if (!c ? !!a[b] : String(a[b]) === c) {
              d.push(a);
            }
          }
        }
      }
      return d;
    },
    d = function (d, e) {
      var c = [],
        b = 0,
        f = d.length,
        a;
      for (; b < f; b++) {
        a = d[b];
        if (a.getId() === e || a.getItemId() === e) {
          c.push(a);
        }
      }
      return c;
    },
    j = function (b, d, c) {
      return a.pseudos[d](b, c);
    },
    m = /^(\s?([>\^])\s?|\s|$)/,
    l = /^(#)?([\w\-]+|\*)(?:\((true|false)\))?/,
    f = [
      { re: /^\.([\w\-]+)(?:\((true|false)\))?/, method: b },
      {
        re: /^(?:[\[](?:@)?([\w\-]+)\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]])/,
        method: g,
      },
      { re: /^#([\w\-]+)/, method: d },
      {
        re: /^\:([\w\-]+)(?:\(((?:\{[^\}]+\})|(?:(?!\{)[^\s>\/]*?(?!\})))\))?/,
        method: j,
      },
      { re: /^(?:\{([^\}]+)\})/, method: i },
    ];
  a.Query = Ext.extend(Object, {
    constructor: function (a) {
      a = a || {};
      Ext.apply(this, a);
    },
    execute: function (b) {
      var g = this.operations,
        f = 0,
        h = g.length,
        d,
        a;
      if (!b) {
        a = Ext.ComponentManager.all.getArray();
      } else {
        if (Ext.isArray(b)) {
          a = b;
        }
      }
      for (; f < h; f++) {
        d = g[f];
        if (d.mode === "^") {
          a = k(a || [b]);
        } else {
          if (d.mode) {
            a = e(a || [b], d.mode);
          } else {
            a = c(a || e([b]), d);
          }
        }
        if (f === h - 1) {
          return a;
        }
      }
      return [];
    },
    is: function (e) {
      var d = this.operations,
        a = Ext.isArray(e) ? e : [e],
        g = a.length,
        h = d[d.length - 1],
        f,
        b;
      a = c(a, h);
      if (a.length === g) {
        if (d.length > 1) {
          for (b = 0, f = a.length; b < f; b++) {
            if (Ext.Array.indexOf(this.execute(), a[b]) === -1) {
              return !1;
            }
          }
        }
        return !0;
      }
      return !1;
    },
  });
  Ext.apply(this, {
    cache: {},
    pseudos: {
      not: function (c, e) {
        var h = Ext.ComponentQuery,
          b = 0,
          f = c.length,
          d = [],
          g = -1,
          a;
        for (; b < f; ++b) {
          a = c[b];
          if (!h.is(a, e)) {
            d[++g] = a;
          }
        }
        return d;
      },
    },
    query: function (d, k) {
      var h = d.split(","),
        i = h.length,
        a = 0,
        b = [],
        e = [],
        f = {},
        j,
        g,
        c;
      for (; a < i; a++) {
        d = Ext.String.trim(h[a]);
        j = this.parse(d);
        b = b.concat(j.execute(k));
      }
      if (i > 1) {
        g = b.length;
        for (a = 0; a < g; a++) {
          c = b[a];
          if (!f[c.id]) {
            e.push(c);
            f[c.id] = !0;
          }
        }
        b = e;
      }
      return b;
    },
    is: function (c, a) {
      if (!a) {
        return !0;
      }
      var b = this.cache[a];
      if (!b) {
        this.cache[a] = b = this.parse(a);
      }
      return b.is(c);
    },
    parse: function (c) {
      var g = [],
        r = f.length,
        p,
        e,
        o,
        j,
        i,
        n,
        k,
        q;
      while (c && p !== c) {
        p = c;
        e = c.match(l);
        if (e) {
          o = e[1];
          if (o === "#") {
            g.push({ method: d, args: [Ext.String.trim(e[2])] });
          } else {
            if (o === ".") {
              g.push({ method: h, args: [Ext.String.trim(e[2])] });
            } else {
              g.push({
                method: b,
                args: [Ext.String.trim(e[2]), Boolean(e[3])],
              });
            }
          }
          c = c.replace(e[0], "");
        }
        while (!(j = c.match(m))) {
          for (n = 0; c && n < r; n++) {
            k = f[n];
            i = c.match(k.re);
            q = k.method;
            if (i) {
              g.push({
                method: Ext.isString(k.method)
                  ? Ext.functionFactory(
                      "items",
                      Ext.String.format.apply(
                        Ext.String,
                        [q].concat(i.slice(1))
                      )
                    )
                  : k.method,
                args: i.slice(1),
              });
              c = c.replace(i[0], "");
              break;
            }
          }
        }
        if (j[1]) {
          g.push({ mode: j[2] || j[1] });
          c = c.replace(j[0], "");
        }
      }
      return new a.Query({ operations: g });
    },
  });
});
Ext.define("Ext.Decorator", {
  extend: Ext.Component,
  isDecorator: !0,
  config: { component: {} },
  statics: {
    generateProxySetter: function (a) {
      return function (c) {
        var b = this.getComponent();
        b[a].call(b, c);
        return this;
      };
    },
    generateProxyGetter: function (a) {
      return function () {
        var b = this.getComponent();
        return b[a].call(b);
      };
    },
  },
  onClassExtended: function (i, a) {
    if (!a.hasOwnProperty("proxyConfig")) {
      return;
    }
    var h = Ext.Class,
      b = a.proxyConfig,
      g = a.config;
    a.config = g ? Ext.applyIf(g, b) : b;
    var f, d, e, c;
    for (f in b) {
      if (b.hasOwnProperty(f)) {
        d = h.getConfigNameMap(f);
        e = d.set;
        c = d.get;
        a[e] = this.generateProxySetter(e);
        a[c] = this.generateProxyGetter(c);
      }
    }
  },
  applyComponent: function (a) {
    return Ext.factory(a, Ext.Component);
  },
  updateComponent: function (a, b) {
    if (b) {
      if (this.isRendered() && b.setRendered(!1)) {
        b.fireAction(
          "renderedchange",
          [this, b, !1],
          "doUnsetComponent",
          this,
          { args: [b] }
        );
      } else {
        this.doUnsetComponent(b);
      }
    }
    if (a) {
      if (this.isRendered() && a.setRendered(!0)) {
        a.fireAction("renderedchange", [this, a, !0], "doSetComponent", this, {
          args: [a],
        });
      } else {
        this.doSetComponent(a);
      }
    }
  },
  doUnsetComponent: function (a) {
    if (a.renderElement.dom) {
      a.setLayoutSizeFlags(0);
      this.innerElement.dom.removeChild(a.renderElement.dom);
    }
  },
  doSetComponent: function (a) {
    if (a.renderElement.dom) {
      a.setLayoutSizeFlags(this.getSizeFlags());
      this.innerElement.dom.appendChild(a.renderElement.dom);
    }
  },
  setRendered: function (b) {
    var a;
    if (this.callParent(arguments)) {
      a = this.getComponent();
      if (a) {
        a.setRendered(b);
      }
      return !0;
    }
    return !1;
  },
  setDisabled: function (a) {
    this.callParent(arguments);
    this.getComponent().setDisabled(a);
  },
  destroy: function () {
    Ext.destroy(this.getComponent());
    this.callParent();
  },
});
Ext.define("Ext.Img", {
  extend: Ext.Component,
  xtype: ["image", "img"],
  config: {
    src: null,
    baseCls: Ext.baseCSSPrefix + "img",
    imageCls: Ext.baseCSSPrefix + "img-image",
    backgroundCls: Ext.baseCSSPrefix + "img-background",
    mode: "background",
  },
  beforeInitialize: function () {
    var a = this;
    a.onLoad = Ext.Function.bind(a.onLoad, a);
    a.onError = Ext.Function.bind(a.onError, a);
  },
  initialize: function () {
    var a = this;
    a.callParent();
    a.relayEvents(a.renderElement, "*");
    a.element.on({ tap: "onTap", scope: a });
  },
  hide: function () {
    this.callParent(arguments);
    this.hiddenSrc = this.hiddenSrc || this.getSrc();
    this.setSrc(null);
  },
  show: function () {
    this.callParent(arguments);
    if (this.hiddenSrc) {
      this.setSrc(this.hiddenSrc);
      delete this.hiddenSrc;
    }
  },
  updateMode: function (d) {
    var a = this,
      c = a.getImageCls(),
      b = a.getBackgroundCls();
    if (d === "background") {
      if (a.imageElement) {
        a.imageElement.destroy();
        delete a.imageElement;
        a.updateSrc(a.getSrc());
      }
      a.replaceCls(c, b);
    } else {
      a.imageElement = a.element.createChild({ tag: "img" });
      a.replaceCls(b, c);
    }
  },
  updateImageCls: function (a, b) {
    this.replaceCls(b, a);
  },
  updateBackgroundCls: function (a, b) {
    this.replaceCls(b, a);
  },
  onTap: function (a) {
    this.fireEvent("tap", this, a);
  },
  onAfterRender: function () {
    this.updateSrc(this.getSrc());
  },
  updateSrc: function (c) {
    var b = this,
      a;
    if (b.getMode() === "background") {
      a = this.imageObject || new Image();
    } else {
      a = b.imageElement.dom;
    }
    this.imageObject = a;
    a.setAttribute("src", Ext.isString(c) ? c : "");
    a.addEventListener("load", b.onLoad, !1);
    a.addEventListener("error", b.onError, !1);
  },
  detachListeners: function () {
    var a = this.imageObject;
    if (a) {
      a.removeEventListener("load", this.onLoad, !1);
      a.removeEventListener("error", this.onError, !1);
    }
  },
  onLoad: function (a) {
    this.detachListeners();
    if (this.getMode() === "background") {
      this.element.dom.style.backgroundImage =
        'url("' + this.imageObject.src + '")';
    }
    this.fireEvent("load", this, a);
  },
  onError: function (a) {
    this.detachListeners();
    if (this.getMode() === "background") {
      this.element.dom.style.backgroundImage =
        'url("' + this.imageObject.src + '")';
    }
    this.fireEvent("error", this, a);
  },
  doSetWidth: function (b) {
    var a = this.getMode() === "background" ? this.element : this.imageElement;
    a.setWidth(b);
    this.callParent(arguments);
  },
  doSetHeight: function (b) {
    var a = this.getMode() === "background" ? this.element : this.imageElement;
    a.setHeight(b);
    this.callParent(arguments);
  },
  destroy: function () {
    this.detachListeners();
    Ext.destroy(this.imageObject, this.imageElement);
    delete this.imageObject;
    delete this.imageElement;
    this.callParent();
  },
});
Ext.define("Ext.Label", {
  extend: Ext.Component,
  xtype: "label",
  config: { baseCls: Ext.baseCSSPrefix + "label" },
});
Ext.define(
  "Ext.LoadMask",
  {
    extend: Ext.Mask,
    xtype: "loadmask",
    config: {
      message: "Loading...",
      cls: Ext.baseCSSPrefix + "loading-mask",
      messageCls: Ext.baseCSSPrefix + "mask-message",
      indicator: !0,
    },
    getTemplate: function () {
      var a = Ext.baseCSSPrefix;
      return [
        {
          reference: "innerElement",
          cls: a + "mask-inner",
          children: [
            {
              reference: "indicatorElement",
              cls: a + "loading-spinner-outer",
              children: [
                {
                  cls: a + "loading-spinner",
                  children: [
                    { tag: "span", cls: a + "loading-top" },
                    { tag: "span", cls: a + "loading-right" },
                    { tag: "span", cls: a + "loading-bottom" },
                    { tag: "span", cls: a + "loading-left" },
                  ],
                },
              ],
            },
            { reference: "messageElement" },
          ],
        },
      ];
    },
    updateMessage: function (a) {
      var b = Ext.baseCSSPrefix + "has-message";
      if (a) {
        this.addCls(b);
      } else {
        this.removeCls(b);
      }
      this.messageElement.setHtml(a);
    },
    updateMessageCls: function (a, b) {
      this.messageElement.replaceCls(b, a);
    },
    updateIndicator: function (a) {
      this[a ? "removeCls" : "addCls"](Ext.baseCSSPrefix + "indicator-hidden");
    },
  },
  function () {}
);
Ext.define("Ext.Title", {
  extend: Ext.Component,
  xtype: "title",
  config: { baseCls: "x-title", title: "" },
  updateTitle: function (a) {
    this.setHtml(a);
  },
});
Ext.define("Ext.Spacer", {
  extend: Ext.Component,
  alias: "widget.spacer",
  config: {},
  constructor: function (a) {
    a = a || {};
    if (!a.width) {
      a.flex = 1;
    }
    this.callParent([a]);
  },
});
Ext.define(
  "Ext.Toolbar",
  {
    extend: Ext.Container,
    xtype: "toolbar",
    isToolbar: !0,
    config: {
      baseCls: Ext.baseCSSPrefix + "toolbar",
      ui: "dark",
      title: null,
      defaultType: "button",
      minHeight: null,
      layout: { type: "hbox", align: "center" },
    },
    hasCSSMinHeight: !0,
    constructor: function (a) {
      a = a || {};
      if (a.docked == "left" || a.docked == "right") {
        a.layout = { type: "vbox", align: "stretch" };
      }
      this.callParent([a]);
    },
    applyTitle: function (a) {
      if (typeof a == "string") {
        a = { title: a, centered: Ext.theme.is.Tizen ? !1 : !0 };
      }
      return Ext.factory(a, Ext.Title, this.getTitle());
    },
    updateTitle: function (a, b) {
      if (a) {
        this.add(a);
      }
      if (b) {
        b.destroy();
      }
    },
    showTitle: function () {
      var a = this.getTitle();
      if (a) {
        a.show();
      }
    },
    hideTitle: function () {
      var a = this.getTitle();
      if (a) {
        a.hide();
      }
    },
  },
  function () {}
);
Ext.define("Ext.field.Input", {
  extend: Ext.Component,
  xtype: "input",
  tag: "input",
  cachedConfig: {
    cls: Ext.baseCSSPrefix + "form-field",
    focusCls: Ext.baseCSSPrefix + "field-focus",
    maskCls: Ext.baseCSSPrefix + "field-mask",
    useMask: "auto",
    type: "text",
    checked: !1,
  },
  config: {
    baseCls: Ext.baseCSSPrefix + "field-input",
    name: null,
    value: null,
    isFocused: !1,
    tabIndex: null,
    placeHolder: null,
    minValue: null,
    maxValue: null,
    stepValue: null,
    maxLength: null,
    autoComplete: null,
    autoCapitalize: null,
    autoCorrect: null,
    readOnly: null,
    maxRows: null,
    pattern: null,
    startValue: !1,
    fastFocus: !0,
  },
  getTemplate: function () {
    var a = [
      { reference: "input", tag: this.tag },
      { reference: "mask", classList: [this.config.maskCls] },
      { reference: "clearIcon", cls: "x-clear-icon" },
    ];
    return a;
  },
  initElement: function () {
    var a = this;
    a.callParent();
    a.input.on({
      scope: a,
      keyup: "onKeyUp",
      keydown: "onKeyDown",
      focus: "onFocus",
      blur: "onBlur",
      input: "onInput",
      paste: "onPaste",
      tap: "onInputTap",
    });
    a.mask.on({ scope: a, tap: "onMaskTap" });
    if (a.clearIcon) {
      a.clearIcon.on({
        tap: "onClearIconTap",
        touchstart: "onClearIconPress",
        touchend: "onClearIconRelease",
        scope: a,
      });
    }
    if (Ext.browser.is.ie && Ext.browser.version.major >= 10) {
      a.input.on({ scope: a, keypress: "onKeyPress" });
    }
  },
  updateFastFocus: function (a) {
    if (a) {
      if (this.getFastFocus() && Ext.os.is.iOS) {
        this.input.on({ scope: this, touchstart: "onTouchStart" });
      }
    } else {
      this.input.un({ scope: this, touchstart: "onTouchStart" });
    }
  },
  useManualMaxLength: function () {
    return Boolean(Ext.os.is.Android && !Ext.browser.is.Chrome);
  },
  applyUseMask: function (a) {
    if (a === "auto") {
      a = Ext.os.is.iOS && Ext.os.version.lt("5");
    }
    return Boolean(a);
  },
  updateUseMask: function (a) {
    this.mask[a ? "show" : "hide"]();
  },
  updatePattern: function (a) {
    this.updateFieldAttribute("pattern", a);
  },
  updateFieldAttribute: function (a, b) {
    var c = this.input;
    if (!Ext.isEmpty(b, !0)) {
      c.dom.setAttribute(a, b);
    } else {
      c.dom.removeAttribute(a);
    }
  },
  updateCls: function (a, b) {
    this.input.addCls(Ext.baseCSSPrefix + "input-el");
    this.input.replaceCls(b, a);
  },
  updateType: function (a, c) {
    var b = Ext.baseCSSPrefix + "input-";
    this.input.replaceCls(b + c, b + a);
    this.updateFieldAttribute("type", a);
  },
  updateName: function (a) {
    this.updateFieldAttribute("name", a);
  },
  getValue: function () {
    var a = this.input;
    if (a) {
      this._value = a.dom.value;
    }
    return this._value;
  },
  applyValue: function (a) {
    return Ext.isEmpty(a) ? "" : a;
  },
  updateValue: function (b) {
    var a = this.input;
    if (a) {
      a.dom.value = b;
    }
  },
  setValue: function (a) {
    var b = this._value;
    this.updateValue(this.applyValue(a));
    a = this.getValue();
    if (String(a) != String(b) && this.initialized) {
      this.onChange(this, a, b);
    }
    return this;
  },
  updateTabIndex: function (a) {
    this.updateFieldAttribute("tabIndex", a);
  },
  testAutoFn: function (a) {
    return [!0, "on"].indexOf(a) !== -1;
  },
  updateMaxLength: function (a) {
    if (!this.useManualMaxLength()) {
      this.updateFieldAttribute("maxlength", a);
    }
  },
  updatePlaceHolder: function (a) {
    this.updateFieldAttribute("placeholder", a);
  },
  applyAutoComplete: function (a) {
    return this.testAutoFn(a);
  },
  updateAutoComplete: function (a) {
    var b = a ? "on" : "off";
    this.updateFieldAttribute("autocomplete", b);
  },
  applyAutoCapitalize: function (a) {
    return this.testAutoFn(a);
  },
  updateAutoCapitalize: function (a) {
    var b = a ? "on" : "off";
    this.updateFieldAttribute("autocapitalize", b);
  },
  applyAutoCorrect: function (a) {
    return this.testAutoFn(a);
  },
  updateAutoCorrect: function (a) {
    var b = a ? "on" : "off";
    this.updateFieldAttribute("autocorrect", b);
  },
  updateMinValue: function (a) {
    this.updateFieldAttribute("min", a);
  },
  updateMaxValue: function (a) {
    this.updateFieldAttribute("max", a);
  },
  updateStepValue: function (a) {
    this.updateFieldAttribute("step", a);
  },
  checkedRe: /^(true|1|on)/i,
  getChecked: function () {
    var b = this.input,
      a;
    if (b) {
      a = b.dom.checked;
      this._checked = a;
    }
    return a;
  },
  applyChecked: function (a) {
    return !!this.checkedRe.test(String(a));
  },
  setChecked: function (a) {
    this.updateChecked(this.applyChecked(a));
    this._checked = a;
  },
  updateChecked: function (a) {
    this.input.dom.checked = a;
  },
  updateReadOnly: function (a) {
    this.updateFieldAttribute("readonly", a ? !0 : null);
  },
  updateMaxRows: function (a) {
    this.updateFieldAttribute("rows", a);
  },
  doSetDisabled: function (a) {
    this.callParent(arguments);
    if (Ext.browser.is.Safari && !Ext.os.is.BlackBerry) {
      this.input.dom.tabIndex = a ? -1 : 0;
    }
    this.input.dom.disabled =
      Ext.browser.is.Safari && !Ext.os.is.BlackBerry ? !1 : a;
    if (!a) {
      this.blur();
    }
  },
  isDirty: function () {
    if (this.getDisabled()) {
      return !1;
    }
    return String(this.getValue()) !== String(this.originalValue);
  },
  reset: function () {
    this.setValue(this.originalValue);
  },
  onInputTap: function (a) {
    this.fireAction("inputtap", [this, a], "doInputTap");
  },
  doInputTap: function (a, b) {
    if (a.getDisabled()) {
      return !1;
    }
    if (this.getFastFocus() && Ext.os.is.iOS) {
      a.focus();
    }
  },
  onMaskTap: function (a) {
    this.fireAction("masktap", [this, a], "doMaskTap");
  },
  doMaskTap: function (a, b) {
    if (a.getDisabled()) {
      return !1;
    }
    a.focus();
  },
  showMask: function () {
    if (this.getUseMask()) {
      this.mask.setStyle("display", "block");
    }
  },
  hideMask: function () {
    if (this.getUseMask()) {
      this.mask.setStyle("display", "none");
    }
  },
  focus: function () {
    var b = this,
      a = b.input;
    if (a && a.dom.focus) {
      a.dom.focus();
    }
    return b;
  },
  blur: function () {
    var b = this,
      a = this.input;
    if (a && a.dom.blur) {
      a.dom.blur();
    }
    return b;
  },
  select: function () {
    var b = this,
      a = b.input;
    if (a && a.dom.setSelectionRange) {
      a.dom.setSelectionRange(0, 9999);
    }
    return b;
  },
  onFocus: function (a) {
    this.fireAction("focus", [a], "doFocus");
  },
  doFocus: function (b) {
    var a = this;
    a.hideMask();
    if (!a.getIsFocused()) {
      a.setStartValue(a.getValue());
    }
    a.setIsFocused(!0);
  },
  onTouchStart: function (a) {
    if (document.activeElement != a.target) {
      a.preventDefault();
    }
  },
  onBlur: function (a) {
    this.fireAction("blur", [a], "doBlur");
  },
  doBlur: function (d) {
    var a = this,
      c = a.getValue(),
      b = a.getStartValue();
    a.showMask();
    a.setIsFocused(!1);
    if (String(c) != String(b)) {
      a.onChange(a, c, b);
    }
  },
  onClearIconTap: function (a) {
    this.fireEvent("clearicontap", this, a);
    if (Ext.os.is.Android) {
      this.focus();
    }
  },
  onClearIconPress: function () {
    this.clearIcon.addCls(Ext.baseCSSPrefix + "pressing");
  },
  onClearIconRelease: function () {
    this.clearIcon.removeCls(Ext.baseCSSPrefix + "pressing");
  },
  onClick: function (a) {
    this.fireEvent("click", a);
  },
  onChange: function (c, b, a) {
    if (this.useManualMaxLength()) {
      this.trimValueToMaxLength();
    }
    this.fireEvent("change", c, b, a);
  },
  onPaste: function (a) {
    if (this.useManualMaxLength()) {
      this.trimValueToMaxLength();
    }
    this.fireEvent("paste", a);
  },
  onKeyUp: function (a) {
    if (this.useManualMaxLength()) {
      this.trimValueToMaxLength();
    }
    this.fireEvent("keyup", a);
  },
  onKeyDown: function () {
    this.ignoreInput = !0;
  },
  onInput: function (b) {
    var a = this;
    if (a.ignoreInput) {
      a.ignoreInput = !1;
      return;
    }
    setTimeout(function () {
      if (!a.ignoreInput) {
        a.fireEvent("keyup", b);
        a.ignoreInput = !1;
      }
    }, 10);
  },
  onKeyPress: function (a) {
    if (a.browserEvent.keyCode == 13) {
      this.fireEvent("keyup", a);
    }
  },
  onMouseDown: function (a) {
    this.fireEvent("mousedown", a);
  },
  trimValueToMaxLength: function () {
    var a = this.getMaxLength();
    if (a) {
      var b = this.getValue();
      if (b.length > this.getMaxLength()) {
        this.setValue(b.slice(0, a));
      }
    }
  },
});
Ext.define("MEM.overrides.field.Input", {
  override: "Ext.field.Input",
  initialize: function () {
    var a = this;
    if (Ext.os.is.Android && Ext.browser.name == "ChromeMobile") {
      this.element.on({ scope: this, tap: "onTap" });
    }
    a.callParent();
  },
  onResize: function (b) {
    var a = b;
    if (a.element.getY() + a.element.getHeight() > window.innerHeight) {
      Ext.Function.defer(function () {
        a.element.dom.scrollIntoView(!1);
      }, 100);
    }
  },
  onTap: function (a) {
    me = this;
    window.addEventListener(
      "resize",
      function resizeWindow() {
        me.onResize(me);
        window.removeEventListener("resize", resizeWindow, !0);
      },
      !0
    );
  },
  onClearIconTap: function (a) {
    if (
      this.element.getParent() &&
      this.element.getParent().getParent() &&
      this.element.getParent().getParent().hasCls("x-field-select")
    ) {
      this.fireEvent("clearicontap", this, a);
      return;
    }
    this.callOverridden(arguments);
  },
});
Ext.define(
  "Ext.field.Field",
  {
    extend: Ext.Decorator,
    alternateClassName: "Ext.form.Field",
    xtype: "field",
    isField: !0,
    isFormField: !0,
    config: {
      baseCls: Ext.baseCSSPrefix + "field",
      label: null,
      labelAlign: "left",
      labelWidth: "30%",
      labelWrap: !1,
      clearIcon: null,
      required: !1,
      inputType: null,
      name: null,
      value: null,
      tabIndex: null,
    },
    platformConfig: [
      {
        theme: ["Windows", "MountainView", "Blackberry", "Tizen"],
        labelAlign: "top",
      },
    ],
    cachedConfig: {
      labelCls: null,
      requiredCls: Ext.baseCSSPrefix + "field-required",
      inputCls: null,
    },
    getElementConfig: function () {
      var a = Ext.baseCSSPrefix;
      return {
        reference: "element",
        className: "x-container",
        children: [
          {
            reference: "label",
            cls: a + "form-label",
            children: [{ reference: "labelspan", tag: "span" }],
          },
          { reference: "innerElement", cls: a + "component-outer" },
        ],
      };
    },
    updateLabel: function (b, d) {
      var a = this.renderElement,
        c = Ext.baseCSSPrefix;
      if (b) {
        this.labelspan.setHtml(b);
        a.addCls(c + "field-labeled");
      } else {
        a.removeCls(c + "field-labeled");
      }
    },
    updateLabelAlign: function (a, b) {
      var c = this.renderElement,
        d = Ext.baseCSSPrefix;
      if (a) {
        c.addCls(d + "label-align-" + a);
        if (a == "top" || a == "bottom") {
          this.label.setWidth("100%");
        } else {
          this.updateLabelWidth(this.getLabelWidth());
        }
      }
      if (b) {
        c.removeCls(d + "label-align-" + b);
      }
    },
    updateLabelCls: function (a, b) {
      if (a) {
        this.label.addCls(a);
      }
      if (b) {
        this.label.removeCls(b);
      }
    },
    updateLabelWidth: function (a) {
      var b = this.getLabelAlign();
      if (a) {
        if (b == "top" || b == "bottom") {
          this.label.setWidth("100%");
        } else {
          this.label.setWidth(a);
        }
      }
    },
    updateLabelWrap: function (b, c) {
      var a = Ext.baseCSSPrefix + "form-label-nowrap";
      if (!b) {
        this.addCls(a);
      } else {
        this.removeCls(a);
      }
    },
    updateRequired: function (a) {
      this.renderElement[a ? "addCls" : "removeCls"](this.getRequiredCls());
    },
    updateRequiredCls: function (a, b) {
      if (this.getRequired()) {
        this.renderElement.replaceCls(b, a);
      }
    },
    initialize: function () {
      var a = this;
      a.callParent();
      a.doInitValue();
    },
    doInitValue: function () {
      this.originalValue = this.getInitialConfig().value;
    },
    reset: function () {
      this.setValue(this.originalValue);
      return this;
    },
    resetOriginalValue: function () {
      this.originalValue = this.getValue();
    },
    isDirty: function () {
      return !1;
    },
  },
  function () {}
);
Ext.define("Ext.field.Text", {
  extend: Ext.field.Field,
  xtype: "textfield",
  alternateClassName: "Ext.form.Text",
  config: {
    ui: "text",
    clearIcon: !0,
    placeHolder: null,
    maxLength: null,
    autoComplete: null,
    autoCapitalize: null,
    autoCorrect: null,
    readOnly: null,
    component: { xtype: "input", type: "text", fastFocus: !0 },
    bubbleEvents: ["action"],
  },
  initialize: function () {
    var a = this;
    a.callParent();
    a.getComponent().on({
      scope: this,
      keyup: "onKeyUp",
      change: "onChange",
      focus: "onFocus",
      blur: "onBlur",
      paste: "onPaste",
      mousedown: "onMouseDown",
      clearicontap: "onClearIconTap",
    });
    a.originalValue = a.getValue() || "";
    a.getComponent().originalValue = a.originalValue;
    a.syncEmptyCls();
  },
  syncEmptyCls: function () {
    var b = this._value ? this._value.length : !1,
      a = Ext.baseCSSPrefix + "empty";
    if (b) {
      this.removeCls(a);
    } else {
      this.addCls(a);
    }
  },
  updateValue: function (a) {
    var b = this.getComponent(),
      c = a !== undefined && a !== null && a !== "";
    if (b) {
      b.setValue(a);
    }
    this[c && this.isDirty() ? "showClearIcon" : "hideClearIcon"]();
    this.syncEmptyCls();
  },
  getValue: function () {
    var a = this;
    a._value = a.getComponent().getValue();
    a.syncEmptyCls();
    return a._value;
  },
  updatePlaceHolder: function (a) {
    this.getComponent().setPlaceHolder(a);
  },
  updateMaxLength: function (a) {
    this.getComponent().setMaxLength(a);
  },
  updateAutoComplete: function (a) {
    this.getComponent().setAutoComplete(a);
  },
  updateAutoCapitalize: function (a) {
    this.getComponent().setAutoCapitalize(a);
  },
  updateAutoCorrect: function (a) {
    this.getComponent().setAutoCorrect(a);
  },
  updateReadOnly: function (a) {
    if (a) {
      this.hideClearIcon();
    } else {
      this.showClearIcon();
    }
    this.getComponent().setReadOnly(a);
  },
  updateInputType: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setType(b);
    }
  },
  updateName: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setName(b);
    }
  },
  updateTabIndex: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setTabIndex(b);
    }
  },
  updateInputCls: function (b, c) {
    var a = this.getComponent();
    if (a) {
      a.replaceCls(c, b);
    }
  },
  doSetDisabled: function (c) {
    var a = this;
    a.callParent(arguments);
    var b = a.getComponent();
    if (b) {
      b.setDisabled(c);
    }
    if (c) {
      a.hideClearIcon();
    } else {
      a.showClearIcon();
    }
  },
  showClearIcon: function () {
    var a = this,
      b = a.getValue(),
      c = b !== undefined && b !== null && b !== "";
    if (a.getClearIcon() && !a.getDisabled() && !a.getReadOnly() && c) {
      a.element.addCls(Ext.baseCSSPrefix + "field-clearable");
    }
    return a;
  },
  hideClearIcon: function () {
    if (this.getClearIcon()) {
      this.element.removeCls(Ext.baseCSSPrefix + "field-clearable");
    }
  },
  onKeyUp: function (a) {
    this.fireAction("keyup", [this, a], "doKeyUp");
  },
  doKeyUp: function (b, c) {
    var a = b.getValue(),
      d = a !== undefined && a !== null && a !== "";
    this[d ? "showClearIcon" : "hideClearIcon"]();
    if (c.browserEvent.keyCode === 13) {
      b.fireAction("action", [b, c], "doAction");
    }
  },
  doAction: function () {
    this.blur();
  },
  onClearIconTap: function (a) {
    this.fireAction("clearicontap", [this, a], "doClearIconTap");
  },
  doClearIconTap: function (a, b) {
    a.setValue("");
    a.getValue();
  },
  onChange: function (c, b, a) {
    c.fireEvent("change", this, b, a);
  },
  onFocus: function (a) {
    this.addCls(Ext.baseCSSPrefix + "field-focused");
    this.isFocused = !0;
    this.fireEvent("focus", this, a);
  },
  onBlur: function (b) {
    var a = this;
    this.removeCls(Ext.baseCSSPrefix + "field-focused");
    this.isFocused = !1;
    a.fireEvent("blur", a, b);
    setTimeout(function () {
      a.isFocused = !1;
    }, 50);
  },
  onPaste: function (a) {
    this.fireEvent("paste", this, a);
  },
  onMouseDown: function (a) {
    this.fireEvent("mousedown", this, a);
  },
  focus: function () {
    this.getComponent().focus();
    return this;
  },
  blur: function () {
    this.getComponent().blur();
    return this;
  },
  select: function () {
    this.getComponent().select();
    return this;
  },
  resetOriginalValue: function () {
    this.callParent();
    var a = this.getComponent();
    if (a && a.hasOwnProperty("originalValue")) {
      this.getComponent().originalValue = this.originalValue;
    }
    this.reset();
  },
  reset: function () {
    this.getComponent().reset();
    this.getValue();
    this[this.isDirty() ? "showClearIcon" : "hideClearIcon"]();
  },
  isDirty: function () {
    var a = this.getComponent();
    if (a) {
      return a.isDirty();
    }
    return !1;
  },
});
Ext.define("Ext.field.TextAreaInput", {
  extend: Ext.field.Input,
  xtype: "textareainput",
  tag: "textarea",
});
Ext.define("Ext.field.TextArea", {
  extend: Ext.field.Text,
  xtype: "textareafield",
  alternateClassName: "Ext.form.TextArea",
  config: {
    ui: "textarea",
    autoCapitalize: !1,
    component: { xtype: "textareainput" },
    maxRows: null,
  },
  updateMaxRows: function (a) {
    this.getComponent().setMaxRows(a);
  },
  doSetHeight: function (b) {
    this.callParent(arguments);
    var a = this.getComponent();
    a.input.setHeight(b);
  },
  doSetWidth: function (b) {
    this.callParent(arguments);
    var a = this.getComponent();
    a.input.setWidth(b);
  },
  doKeyUp: function (a) {
    var b = a.getValue();
    a[b ? "showClearIcon" : "hideClearIcon"]();
  },
});
Ext.define(
  "Ext.MessageBox",
  {
    extend: Ext.Sheet,
    config: {
      ui: "dark",
      baseCls: Ext.baseCSSPrefix + "msgbox",
      iconCls: null,
      showAnimation: { type: "popIn", duration: 250, easing: "ease-out" },
      hideAnimation: { type: "popOut", duration: 250, easing: "ease-out" },
      zIndex: 999,
      defaultTextHeight: 75,
      title: null,
      buttons: null,
      message: null,
      prompt: null,
      modal: !0,
      layout: { type: "vbox", pack: "center" },
    },
    platformConfig: [
      {
        theme: ["Windows"],
        ui: "light",
        showAnimation: { type: "fadeIn" },
        hideAnimation: { type: "fadeOut" },
      },
      { theme: ["Blackberry"], ui: "plain" },
      { theme: ["MoutainView"] },
    ],
    statics: {
      OK: { text: "OK", itemId: "ok", ui: "action" },
      YES: { text: "Yes", itemId: "yes", ui: "action" },
      NO: { text: "No", itemId: "no" },
      CANCEL: { text: "Cancel", itemId: "cancel" },
      INFO: Ext.baseCSSPrefix + "msgbox-info",
      WARNING: Ext.baseCSSPrefix + "msgbox-warning",
      QUESTION: Ext.baseCSSPrefix + "msgbox-question",
      ERROR: Ext.baseCSSPrefix + "msgbox-error",
      OKCANCEL: [
        { text: "Cancel", itemId: "cancel" },
        { text: "OK", itemId: "ok", ui: "action" },
      ],
      YESNOCANCEL: [
        { text: "Cancel", itemId: "cancel" },
        { text: "No", itemId: "no" },
        { text: "Yes", itemId: "yes", ui: "action" },
      ],
      YESNO: [
        { text: "No", itemId: "no" },
        { text: "Yes", itemId: "yes", ui: "action" },
      ],
    },
    constructor: function (a) {
      a = a || {};
      if (a.hasOwnProperty("promptConfig")) {
        Ext.applyIf(a, { prompt: a.promptConfig });
        delete a.promptConfig;
      }
      if (a.hasOwnProperty("multiline") || a.hasOwnProperty("multiLine")) {
        a.prompt = a.prompt || {};
        Ext.applyIf(a.prompt, { multiLine: a.multiline || a.multiLine });
        delete a.multiline;
        delete a.multiLine;
      }
      this.defaultAllowedConfig = {};
      var d = [
          "ui",
          "showAnimation",
          "hideAnimation",
          "title",
          "message",
          "prompt",
          "iconCls",
          "buttons",
          "defaultTextHeight",
        ],
        e = d.length,
        b,
        c;
      for (b = 0; b < e; b++) {
        c = d[b];
        this.defaultAllowedConfig[c] = this.defaultConfig[c];
      }
      this.callParent([a]);
    },
    applyTitle: function (a) {
      if (typeof a == "string") {
        a = { title: a };
      }
      var b = "1.3em";
      if (Ext.theme.is.Cupertino) {
        b = "1.5em";
      } else {
        if (Ext.filterPlatform("blackberry") || Ext.filterPlatform("ie10")) {
          b = "2.6em";
        }
      }
      Ext.applyIf(a, {
        docked: "top",
        minHeight: b,
        ui: Ext.filterPlatform("blackberry") ? "light" : "dark",
        cls: this.getBaseCls() + "-title",
      });
      if (Ext.theme.is.Tizen) {
        Ext.applyIf(a, { centered: !1 });
      }
      return Ext.factory(a, Ext.Toolbar, this.getTitle());
    },
    updateTitle: function (a) {
      if (a) {
        this.add(a);
      }
    },
    updateButtons: function (b) {
      var a = this;
      b = !b || b.length === 0 ? !1 : b;
      if (b) {
        if (a.buttonsToolbar) {
          a.buttonsToolbar.show();
          a.buttonsToolbar.removeAll();
          a.buttonsToolbar.setItems(b);
        } else {
          var d = { type: "hbox", pack: "center" };
          var c =
            Ext.theme.is.CupertinoClassic ||
            Ext.theme.is.MountainView ||
            Ext.theme.is.Blackberry;
          a.buttonsToolbar = Ext.create("Ext.Toolbar", {
            docked: "bottom",
            defaultType: "button",
            defaults: {
              flex: c ? 1 : undefined,
              ui: Ext.theme.is.Blackberry ? "action" : undefined,
            },
            layout: d,
            ui: a.getUi(),
            cls: a.getBaseCls() + "-buttons",
            items: b,
          });
          a.add(a.buttonsToolbar);
        }
      } else {
        if (a.buttonsToolbar) {
          a.buttonsToolbar.hide();
        }
      }
    },
    applyMessage: function (a) {
      a = { html: a, cls: this.getBaseCls() + "-text" };
      return Ext.factory(a, Ext.Component, this._message);
    },
    updateMessage: function (a) {
      if (a) {
        this.add(a);
      }
    },
    getMessage: function () {
      if (this._message) {
        return this._message.getHtml();
      }
      return null;
    },
    applyIconCls: function (a) {
      a = {
        xtype: "component",
        docked: "left",
        width: 40,
        height: 40,
        baseCls: Ext.baseCSSPrefix + "icon",
        hidden: a ? !1 : !0,
        cls: a,
      };
      return Ext.factory(a, Ext.Component, this._iconCls);
    },
    updateIconCls: function (a, b) {
      this.getTitle();
      this.getButtons();
      if (a) {
        this.add(a);
      } else {
        this.remove(b);
      }
    },
    getIconCls: function () {
      var b = this._iconCls,
        a;
      if (b) {
        a = b.getCls();
        return a ? a[0] : null;
      }
      return null;
    },
    applyPrompt: function (b) {
      if (b) {
        var a = { label: !1 };
        if (Ext.isObject(b)) {
          Ext.apply(a, b);
        }
        if (a.multiLine) {
          a.height = Ext.isNumber(a.multiLine)
            ? parseFloat(a.multiLine)
            : this.getDefaultTextHeight();
          return Ext.factory(a, Ext.field.TextArea, this.getPrompt());
        } else {
          return Ext.factory(a, Ext.field.Text, this.getPrompt());
        }
      }
      return b;
    },
    updatePrompt: function (a, b) {
      if (a) {
        this.add(a);
      }
      if (b) {
        this.remove(b);
      }
    },
    onClick: function (b) {
      if (b) {
        var a = b.config.userConfig || {},
          c = b.getInitialConfig(),
          d = this.getPrompt();
        if (typeof a.fn == "function") {
          b.disable();
          this.on({
            hiddenchange: function () {
              a.fn.call(
                a.scope || null,
                c.itemId || c.text,
                d ? d.getValue() : null,
                a
              );
              b.enable();
            },
            single: !0,
            scope: this,
          });
        }
        if (a.input) {
          a.input.dom.blur();
        }
      }
      this.hide();
    },
    show: function (b) {
      Ext.util.InputBlocker.blockInputs();
      if (!this.getParent() && Ext.Viewport) {
        Ext.Viewport.add(this);
      }
      if (!b) {
        return this.callParent();
      }
      var a = Ext.Object.merge({}, { value: "" }, b);
      var f = b.buttons || Ext.MessageBox.OK || [],
        c = [],
        e = b;
      Ext.each(
        f,
        function (a) {
          if (!a) {
            return;
          }
          c.push(
            Ext.apply({ userConfig: e, scope: this, handler: "onClick" }, a)
          );
        },
        this
      );
      a.buttons = c;
      if (a.promptConfig) {
      }
      a.prompt = a.promptConfig || a.prompt || null;
      if (a.multiLine) {
        a.prompt = a.prompt || {};
        a.prompt.multiLine = a.multiLine;
        delete a.multiLine;
      }
      a = Ext.merge({}, this.defaultAllowedConfig, a);
      this.setConfig(a);
      var d = this.getPrompt();
      if (d) {
        d.setValue(b.value || "");
      }
      this.callParent();
      return this;
    },
    alert: function (d, c, b, a) {
      return this.show({
        title: d || null,
        message: c || null,
        buttons: Ext.MessageBox.OK,
        promptConfig: !1,
        fn: function () {
          if (b) {
            b.apply(a, arguments);
          }
        },
        scope: a,
      });
    },
    confirm: function (d, c, b, a) {
      return this.show({
        title: d || null,
        message: c || null,
        buttons: Ext.MessageBox.YESNO,
        promptConfig: !1,
        scope: a,
        fn: function () {
          if (b) {
            b.apply(a, arguments);
          }
        },
      });
    },
    prompt: function (f, d, b, a, c, g, e) {
      return this.show({
        title: f || null,
        message: d || null,
        buttons: Ext.MessageBox.OKCANCEL,
        scope: a,
        prompt: e || !0,
        multiLine: c,
        value: g,
        fn: function () {
          if (b) {
            b.apply(a, arguments);
          }
        },
      });
    },
  },
  function (a) {
    Ext.onSetup(function () {
      Ext.Msg = new a();
    });
  }
);
Ext.define(
  "Ext.mixin.Selectable",
  {
    extend: Ext.mixin.Mixin,
    mixinConfig: { id: "selectable", hooks: { updateStore: "updateStore" } },
    config: {
      disableSelection: null,
      mode: "SINGLE",
      allowDeselect: !1,
      lastSelected: null,
      lastFocused: null,
      deselectOnContainerClick: !0,
    },
    modes: { SINGLE: !0, SIMPLE: !0, MULTI: !0 },
    selectableEventHooks: {
      addrecords: "onSelectionStoreAdd",
      removerecords: "onSelectionStoreRemove",
      updaterecord: "onSelectionStoreUpdate",
      load: "refreshSelection",
      refresh: "refreshSelection",
    },
    constructor: function () {
      this.selected = new Ext.util.MixedCollection();
      this.callParent(arguments);
    },
    applyMode: function (a) {
      a = a ? a.toUpperCase() : "SINGLE";
      return this.modes[a] ? a : "SINGLE";
    },
    updateStore: function (b, a) {
      var c = this,
        d = Ext.apply({}, c.selectableEventHooks, { scope: c });
      if (a && Ext.isObject(a) && a.isStore) {
        if (a.autoDestroy) {
          a.destroy();
        } else {
          a.un(d);
          if (b) {
            b.un("clear", "onSelectionStoreClear", this);
          }
        }
      }
      if (b) {
        b.on(d);
        b.onBefore("clear", "onSelectionStoreClear", this);
        c.refreshSelection();
      }
    },
    selectAll: function (c) {
      var a = this,
        b = a.getStore().getRange();
      a.select(b, !0, c);
    },
    deselectAll: function (c) {
      var a = this,
        b = a.getStore().getRange();
      a.deselect(b, c);
      a.selected.clear();
      a.setLastSelected(null);
      a.setLastFocused(null);
    },
    selectWithEvent: function (b) {
      var a = this,
        c = a.isSelected(b);
      switch (a.getMode()) {
        case "MULTI":
        case "SIMPLE":
          if (c) {
            a.deselect(b);
          } else {
            a.select(b, !0);
          }
          break;
        case "SINGLE":
          if (a.getAllowDeselect() && c) {
            a.deselect(b);
          } else {
            a.select(b, !1);
          }
          break;
      }
    },
    selectRange: function (a, b, g) {
      var f = this,
        h = f.getStore(),
        d = [],
        e,
        c;
      if (f.getDisableSelection()) {
        return;
      }
      if (a > b) {
        e = b;
        b = a;
        a = e;
      }
      for (c = a; c <= b; c++) {
        d.push(h.getAt(c));
      }
      this.doMultiSelect(d, g);
    },
    select: function (a, e, c) {
      var b = this,
        d;
      if (b.getDisableSelection()) {
        return;
      }
      if (typeof a === "number") {
        a = [b.getStore().getAt(a)];
      }
      if (!a) {
        return;
      }
      if (b.getMode() == "SINGLE" && a) {
        d = a.length ? a[0] : a;
        b.doSingleSelect(d, c);
      } else {
        b.doMultiSelect(a, e, c);
      }
    },
    doSingleSelect: function (b, c) {
      var a = this,
        d = a.selected;
      if (a.getDisableSelection()) {
        return;
      }
      if (a.isSelected(b)) {
        return;
      }
      if (d.getCount() > 0) {
        a.deselect(a.getLastSelected(), c);
      }
      d.add(b);
      a.setLastSelected(b);
      a.onItemSelect(b, c);
      a.setLastFocused(b);
      if (!c) {
        a.fireSelectionChange([b]);
      }
    },
    doMultiSelect: function (a, g, d) {
      if (a === null || this.getDisableSelection()) {
        return;
      }
      a = !Ext.isArray(a) ? [a] : a;
      var b = this,
        h = b.selected,
        i = a.length,
        e = !1,
        f = 0,
        c;
      if (!g && h.getCount() > 0) {
        e = !0;
        b.deselect(b.getSelection(), !0);
      }
      for (; f < i; f++) {
        c = a[f];
        if (g && b.isSelected(c)) {
          continue;
        }
        e = !0;
        b.setLastSelected(c);
        h.add(c);
        if (!d) {
          b.setLastFocused(c);
        }
        b.onItemSelect(c, d);
      }
      if (e && !d) {
        this.fireSelectionChange(a);
      }
    },
    deselect: function (b, e) {
      var c = this;
      if (c.getDisableSelection()) {
        return;
      }
      b = Ext.isArray(b) ? b : [b];
      var f = c.selected,
        g = !1,
        d = 0,
        h = c.getStore(),
        i = b.length,
        a;
      for (; d < i; d++) {
        a = b[d];
        if (typeof a === "number") {
          a = h.getAt(a);
        }
        if (f.remove(a)) {
          if (c.getLastSelected() == a) {
            c.setLastSelected(f.last());
          }
          g = !0;
        }
        if (a) {
          c.onItemDeselect(a, e);
        }
      }
      if (g && !e) {
        c.fireSelectionChange(b);
      }
    },
    updateLastFocused: function (a, b) {
      this.onLastFocusChanged(b, a);
    },
    fireSelectionChange: function (b) {
      var a = this;
      a.fireAction("selectionchange", [a, b], "getSelection");
    },
    getSelection: function () {
      return this.selected.getRange();
    },
    isSelected: function (a) {
      a = Ext.isNumber(a) ? this.getStore().getAt(a) : a;
      return this.selected.indexOf(a) !== -1;
    },
    hasSelection: function () {
      return this.selected.getCount() > 0;
    },
    refreshSelection: function () {
      var a = this,
        b = a.getSelection();
      a.deselectAll(!0);
      if (b.length) {
        a.select(b, !1, !0);
      }
    },
    onSelectionStoreRemove: function (g, d) {
      var a = this,
        e = a.selected,
        f = d.length,
        b,
        c;
      if (a.getDisableSelection()) {
        return;
      }
      for (c = 0; c < f; c++) {
        b = d[c];
        if (e.remove(b)) {
          if (a.getLastSelected() == b) {
            a.setLastSelected(null);
          }
          if (a.getLastFocused() == b) {
            a.setLastFocused(null);
          }
          a.fireSelectionChange([b]);
        }
      }
    },
    onSelectionStoreClear: function (a) {
      var b = a.getData().items;
      this.onSelectionStoreRemove(a, b);
    },
    getSelectionCount: function () {
      return this.selected.getCount();
    },
    onSelectionStoreAdd: Ext.emptyFn,
    onSelectionStoreUpdate: Ext.emptyFn,
    onItemSelect: Ext.emptyFn,
    onItemDeselect: Ext.emptyFn,
    onLastFocusChanged: Ext.emptyFn,
    onEditorKey: Ext.emptyFn,
  },
  function () {}
);
Ext.define("Ext.mixin.Sortable", {
  extend: Ext.mixin.Mixin,
  mixinConfig: { id: "sortable" },
  config: { sorters: null, defaultSortDirection: "ASC", sortRoot: null },
  dirtySortFn: !1,
  sortFn: null,
  sorted: !1,
  applySorters: function (b, a) {
    if (!a) {
      a = this.createSortersCollection();
    }
    a.clear();
    this.sorted = !1;
    if (b) {
      this.addSorters(b);
    }
    return a;
  },
  createSortersCollection: function () {
    this._sorters = Ext.create("Ext.util.Collection", function (a) {
      return a.getId();
    });
    return this._sorters;
  },
  addSorter: function (b, a) {
    this.addSorters([b], a);
  },
  addSorters: function (c, b) {
    var a = this.getSorters();
    return this.insertSorters(a ? a.length : 0, c, b);
  },
  insertSorter: function (c, b, a) {
    return this.insertSorters(c, [b], a);
  },
  insertSorters: function (l, e, h) {
    if (!Ext.isArray(e)) {
      e = [e];
    }
    var i = e.length,
      k = h || this.getDefaultSortDirection(),
      j = this.getSortRoot(),
      c = this.getSorters(),
      g = [],
      d,
      b,
      a,
      f;
    if (!c) {
      c = this.createSortersCollection();
    }
    for (b = 0; b < i; b++) {
      a = e[b];
      d = { direction: k, root: j };
      if (typeof a === "string") {
        f = c.get(a);
        if (!f) {
          d.property = a;
        } else {
          if (h) {
            f.setDirection(h);
          } else {
            f.toggle();
          }
          continue;
        }
      } else {
        if (Ext.isFunction(a)) {
          d.sorterFn = a;
        } else {
          if (Ext.isObject(a)) {
            if (!a.isSorter) {
              if (a.fn) {
                a.sorterFn = a.fn;
                delete a.fn;
              }
              d = Ext.apply(d, a);
            } else {
              g.push(a);
              if (!a.getRoot()) {
                a.setRoot(j);
              }
              continue;
            }
          }
        }
      }
      a = Ext.create("Ext.util.Sorter", d);
      g.push(a);
    }
    for (b = 0, i = g.length; b < i; b++) {
      c.insert(l + b, g[b]);
    }
    this.dirtySortFn = !0;
    if (c.length) {
      this.sorted = !0;
    }
    return c;
  },
  removeSorter: function (a) {
    return this.removeSorters([a]);
  },
  removeSorters: function (c) {
    if (!Ext.isArray(c)) {
      c = [c];
    }
    var e = c.length,
      b = this.getSorters(),
      d,
      a;
    for (d = 0; d < e; d++) {
      a = c[d];
      if (typeof a === "string") {
        b.removeAtKey(a);
      } else {
        if (typeof a === "function") {
          b.each(function (d) {
            if (d.getSorterFn() === a) {
              b.remove(d);
            }
          });
        } else {
          if (a.isSorter) {
            b.remove(a);
          }
        }
      }
    }
    if (!b.length) {
      this.sorted = !1;
    }
  },
  updateSortFn: function () {
    var a = this.getSorters().items;
    this.sortFn = function (e, f) {
      var d = a.length,
        c,
        b;
      for (b = 0; b < d; b++) {
        c = a[b].sort.call(this, e, f);
        if (c !== 0) {
          break;
        }
      }
      return c;
    };
    this.dirtySortFn = !1;
    return this.sortFn;
  },
  getSortFn: function () {
    if (this.dirtySortFn) {
      return this.updateSortFn();
    }
    return this.sortFn;
  },
  sort: function (a) {
    Ext.Array.sort(a, this.getSortFn());
    return a;
  },
  findInsertionIndex: function (e, h, g) {
    var b = 0,
      d = e.length - 1,
      f = g || this.getSortFn(),
      a,
      c;
    while (b <= d) {
      a = (b + d) >> 1;
      c = f(h, e[a]);
      if (c >= 0) {
        b = a + 1;
      } else {
        if (c < 0) {
          d = a - 1;
        }
      }
    }
    return b;
  },
});
Ext.define("Ext.mixin.Filterable", {
  extend: Ext.mixin.Mixin,
  mixinConfig: { id: "filterable" },
  config: { filters: null, filterRoot: null },
  dirtyFilterFn: !1,
  filterFn: null,
  filtered: !1,
  applyFilters: function (b, a) {
    if (!a) {
      a = this.createFiltersCollection();
    }
    a.clear();
    this.filtered = !1;
    this.dirtyFilterFn = !0;
    if (b) {
      this.addFilters(b);
    }
    return a;
  },
  createFiltersCollection: function () {
    this._filters = Ext.create("Ext.util.Collection", function (a) {
      return a.getId();
    });
    return this._filters;
  },
  addFilter: function (a) {
    this.addFilters([a]);
  },
  addFilters: function (b) {
    var a = this.getFilters();
    return this.insertFilters(a ? a.length : 0, b);
  },
  insertFilter: function (b, a) {
    return this.insertFilters(b, [a]);
  },
  insertFilters: function (i, e) {
    if (!Ext.isArray(e)) {
      e = [e];
    }
    var g = e.length,
      h = this.getFilterRoot(),
      c = this.getFilters(),
      f = [],
      d,
      b,
      a;
    if (!c) {
      c = this.createFiltersCollection();
    }
    for (b = 0; b < g; b++) {
      a = e[b];
      d = { root: h };
      if (Ext.isFunction(a)) {
        d.filterFn = a;
      } else {
        if (Ext.isObject(a)) {
          if (!a.isFilter) {
            if (a.fn) {
              a.filterFn = a.fn;
              delete a.fn;
            }
            d = Ext.apply(d, a);
          } else {
            f.push(a);
            if (!a.getRoot()) {
              a.setRoot(h);
            }
            continue;
          }
        }
      }
      a = Ext.create("Ext.util.Filter", d);
      f.push(a);
    }
    for (b = 0, g = f.length; b < g; b++) {
      c.insert(i + b, f[b]);
    }
    this.dirtyFilterFn = !0;
    if (c.length) {
      this.filtered = !0;
    }
    return c;
  },
  removeFilters: function (c) {
    if (!Ext.isArray(c)) {
      c = [c];
    }
    var e = c.length,
      b = this.getFilters(),
      d,
      a;
    for (d = 0; d < e; d++) {
      a = c[d];
      if (typeof a === "string") {
        b.each(function (d) {
          if (d.getProperty() === a) {
            b.remove(d);
          }
        });
      } else {
        if (typeof a === "function") {
          b.each(function (d) {
            if (d.getFilterFn() === a) {
              b.remove(d);
            }
          });
        } else {
          if (a.isFilter) {
            b.remove(a);
          } else {
            if (a.property !== undefined && a.value !== undefined) {
              b.each(function (d) {
                if (
                  d.getProperty() === a.property &&
                  d.getValue() === a.value
                ) {
                  b.remove(d);
                }
              });
            }
          }
        }
      }
    }
    if (!b.length) {
      this.filtered = !1;
    }
  },
  updateFilterFn: function () {
    var a = this.getFilters().items;
    this.filterFn = function (g) {
      var c = !0,
        e = a.length,
        b;
      for (b = 0; b < e; b++) {
        var d = a[b],
          h = d.getFilterFn(),
          f = d.getScope() || this;
        c = c && h.call(f, g);
      }
      return c;
    };
    this.dirtyFilterFn = !1;
    return this.filterFn;
  },
  filter: function (a) {
    return this.getFilters().length
      ? Ext.Array.filter(a, this.getFilterFn())
      : a;
  },
  isFiltered: function (a) {
    return this.getFilters().length ? !this.getFilterFn()(a) : !1;
  },
  getFilterFn: function () {
    if (this.dirtyFilterFn) {
      return this.updateFilterFn();
    }
    return this.filterFn;
  },
});
Ext.define("Ext.util.Collection", {
  config: { autoFilter: !0, autoSort: !0 },
  mixins: { sortable: Ext.mixin.Sortable, filterable: Ext.mixin.Filterable },
  constructor: function (b, c) {
    var a = this;
    a.all = [];
    a.items = [];
    a.keys = [];
    a.indices = {};
    a.map = {};
    a.length = 0;
    if (b) {
      a.getKey = b;
    }
    this.initConfig(c);
  },
  updateAutoSort: function (b, a) {
    if (a === !1 && b && this.items.length) {
      this.sort();
    }
  },
  updateAutoFilter: function (b, a) {
    if (a === !1 && b && this.all.length) {
      this.filter();
    }
  },
  insertSorters: function () {
    this.mixins.sortable.insertSorters.apply(this, arguments);
    if (this.getAutoSort() && this.items.length) {
      this.sort();
    }
    return this;
  },
  removeSorters: function (a) {
    this.mixins.sortable.removeSorters.call(this, a);
    if (this.sorted && this.getAutoSort() && this.items.length) {
      this.sort();
    }
    return this;
  },
  applyFilters: function (a) {
    var b = this.mixins.filterable.applyFilters.call(this, a);
    if (!a && this.all.length && this.getAutoFilter()) {
      this.filter();
    }
    return b;
  },
  addFilters: function (a) {
    this.mixins.filterable.addFilters.call(this, a);
    if (this.items.length && this.getAutoFilter()) {
      this.filter();
    }
    return this;
  },
  removeFilters: function (a) {
    this.mixins.filterable.removeFilters.call(this, a);
    if (this.filtered && this.all.length && this.getAutoFilter()) {
      this.filter();
    }
    return this;
  },
  filter: function (a, d, c, b) {
    if (a) {
      if (Ext.isString(a)) {
        this.addFilters({
          property: a,
          value: d,
          anyMatch: c,
          caseSensitive: b,
        });
        return this.items;
      } else {
        this.addFilters(a);
        return this.items;
      }
    }
    this.items = this.mixins.filterable.filter.call(this, this.all.slice());
    this.updateAfterFilter();
    if (this.sorted && this.getAutoSort()) {
      this.sort();
    }
  },
  updateAfterFilter: function () {
    var b = this.items,
      e = this.keys,
      f = (this.indices = {}),
      g = b.length,
      a,
      d,
      c;
    e.length = 0;
    for (a = 0; a < g; a++) {
      d = b[a];
      c = this.getKey(d);
      f[c] = a;
      e[a] = c;
    }
    this.length = b.length;
    this.dirtyIndices = !1;
  },
  sort: function (e, h) {
    var b = this.items,
      f = this.keys,
      i = this.indices,
      g = b.length,
      a,
      c,
      d;
    if (e) {
      this.addSorters(e, h);
      return this.items;
    }
    for (a = 0; a < g; a++) {
      b[a]._current_key = f[a];
    }
    this.handleSort(b);
    for (a = 0; a < g; a++) {
      c = b[a];
      d = c._current_key;
      f[a] = d;
      i[d] = a;
      delete c._current_key;
    }
    this.dirtyIndices = !0;
  },
  handleSort: function (a) {
    this.mixins.sortable.sort.call(this, a);
  },
  add: function (b, a) {
    var c = this,
      i = this.filtered,
      k = this.sorted,
      l = this.all,
      e = this.items,
      g = this.keys,
      j = this.indices,
      h = this.mixins.filterable,
      f = e.length,
      d = f;
    if (arguments.length == 1) {
      a = b;
      b = c.getKey(a);
    }
    if (typeof b != "undefined" && b !== null) {
      if (typeof c.map[b] != "undefined") {
        return c.replace(b, a);
      }
      c.map[b] = a;
    }
    l.push(a);
    if (i && this.getAutoFilter() && h.isFiltered.call(c, a)) {
      return null;
    }
    c.length++;
    if (k && this.getAutoSort()) {
      d = this.findInsertionIndex(e, a);
    }
    if (d !== f) {
      this.dirtyIndices = !0;
      Ext.Array.splice(g, d, 0, b);
      Ext.Array.splice(e, d, 0, a);
    } else {
      j[b] = f;
      g.push(b);
      e.push(a);
    }
    return a;
  },
  getKey: function (a) {
    return a.id;
  },
  replace: function (d, b) {
    var a = this,
      n = a.sorted,
      l = a.filtered,
      i = a.mixins.filterable,
      e = a.items,
      h = a.keys,
      m = a.all,
      o = a.map,
      k = null,
      j = e.length,
      f,
      g,
      c;
    if (arguments.length == 1) {
      b = d;
      d = c = a.getKey(b);
    } else {
      c = a.getKey(b);
    }
    f = o[d];
    if (typeof d == "undefined" || d === null || typeof f == "undefined") {
      return a.add(c, b);
    }
    a.map[c] = b;
    if (c !== d) {
      delete a.map[d];
    }
    if (n && a.getAutoSort()) {
      Ext.Array.remove(e, f);
      Ext.Array.remove(h, d);
      Ext.Array.remove(m, f);
      m.push(b);
      a.dirtyIndices = !0;
      if (l && a.getAutoFilter()) {
        if (i.isFiltered.call(a, b)) {
          if (j !== e.length) {
            a.length--;
          }
          return null;
        } else {
          if (j === e.length) {
            a.length++;
            k = b;
          }
        }
      }
      g = this.findInsertionIndex(e, b);
      Ext.Array.splice(h, g, 0, c);
      Ext.Array.splice(e, g, 0, b);
    } else {
      if (l) {
        if (a.getAutoFilter() && i.isFiltered.call(a, b)) {
          if (a.indexOf(f) !== -1) {
            Ext.Array.remove(e, f);
            Ext.Array.remove(h, d);
            a.length--;
            a.dirtyIndices = !0;
          }
          return null;
        } else {
          if (a.indexOf(f) === -1) {
            e.push(b);
            h.push(c);
            a.indices[c] = a.length;
            a.length++;
            return b;
          }
        }
      }
      g = a.indexOf(f);
      h[g] = c;
      e[g] = b;
      if (c !== d) {
        this.dirtyIndices = !0;
      }
    }
    return k;
  },
  addAll: function (e) {
    var a = this,
      o = a.filtered,
      p = a.sorted,
      r = a.all,
      j = a.items,
      q = a.keys,
      k = a.map,
      l = a.getAutoFilter(),
      n = a.getAutoSort(),
      h = [],
      g = [],
      m = a.mixins.filterable,
      f = [],
      i,
      b,
      c,
      d;
    if (Ext.isObject(e)) {
      for (b in e) {
        if (e.hasOwnProperty(b)) {
          g.push(j[b]);
          h.push(b);
        }
      }
    } else {
      g = e;
      i = e.length;
      for (c = 0; c < i; c++) {
        h.push(a.getKey(e[c]));
      }
    }
    for (c = 0; c < i; c++) {
      b = h[c];
      d = g[c];
      if (typeof b != "undefined" && b !== null) {
        if (typeof k[b] != "undefined") {
          a.replace(b, d);
          continue;
        }
        k[b] = d;
      }
      r.push(d);
      if (o && l && m.isFiltered.call(a, d)) {
        continue;
      }
      a.length++;
      q.push(b);
      j.push(d);
      f.push(d);
    }
    if (f.length) {
      a.dirtyIndices = !0;
      if (p && n) {
        a.sort();
      }
      return f;
    }
    return null;
  },
  each: function (f, e) {
    var c = this.items.slice(),
      a = 0,
      d = c.length,
      b;
    for (; a < d; a++) {
      b = c[a];
      if (f.call(e || b, b, a, d) === !1) {
        break;
      }
    }
  },
  eachKey: function (f, e) {
    var b = this.keys,
      d = this.items,
      c = b.length,
      a;
    for (a = 0; a < c; a++) {
      f.call(e || window, b[a], d[a], a, c);
    }
  },
  findBy: function (f, c) {
    var d = this.keys,
      b = this.items,
      a = 0,
      e = b.length;
    for (; a < e; a++) {
      if (f.call(c || window, b[a], d[a])) {
        return b[a];
      }
    }
    return null;
  },
  filterBy: function (h, f) {
    var b = this,
      d = new this.self(),
      g = b.keys,
      c = b.all,
      e = c.length,
      a;
    d.getKey = b.getKey;
    for (a = 0; a < e; a++) {
      if (h.call(f || b, c[a], b.getKey(c[a]))) {
        d.add(g[a], c[a]);
      }
    }
    return d;
  },
  insert: function (d, c, b) {
    var a = this,
      g = this.sorted,
      e = this.map,
      f = this.filtered;
    if (arguments.length == 2) {
      b = c;
      c = a.getKey(b);
    }
    if (d >= a.length || (g && a.getAutoSort())) {
      return a.add(c, b);
    }
    if (typeof c != "undefined" && c !== null) {
      if (typeof e[c] != "undefined") {
        a.replace(c, b);
        return !1;
      }
      e[c] = b;
    }
    this.all.push(b);
    if (
      f &&
      this.getAutoFilter() &&
      this.mixins.filterable.isFiltered.call(a, b)
    ) {
      return null;
    }
    a.length++;
    Ext.Array.splice(a.items, d, 0, b);
    Ext.Array.splice(a.keys, d, 0, c);
    a.dirtyIndices = !0;
    return b;
  },
  insertAll: function (h, c) {
    if (h >= this.items.length || (this.sorted && this.getAutoSort())) {
      return this.addAll(c);
    }
    var e = this,
      r = this.filtered,
      l = this.sorted,
      t = this.all,
      m = this.items,
      s = this.keys,
      n = this.map,
      o = this.getAutoFilter(),
      q = this.getAutoSort(),
      g = [],
      f = [],
      k = [],
      p = this.mixins.filterable,
      j = !1,
      i,
      a,
      b,
      d;
    if (l && this.getAutoSort()) {
    }
    if (Ext.isObject(c)) {
      for (a in c) {
        if (c.hasOwnProperty(a)) {
          f.push(m[a]);
          g.push(a);
        }
      }
    } else {
      f = c;
      i = c.length;
      for (b = 0; b < i; b++) {
        g.push(e.getKey(c[b]));
      }
    }
    for (b = 0; b < i; b++) {
      a = g[b];
      d = f[b];
      if (typeof a != "undefined" && a !== null) {
        if (typeof n[a] != "undefined") {
          e.replace(a, d);
          continue;
        }
        n[a] = d;
      }
      t.push(d);
      if (r && o && p.isFiltered.call(e, d)) {
        continue;
      }
      e.length++;
      Ext.Array.splice(m, h + b, 0, d);
      Ext.Array.splice(s, h + b, 0, a);
      j = !0;
      k.push(d);
    }
    if (j) {
      this.dirtyIndices = !0;
      if (l && q) {
        this.sort();
      }
      return k;
    }
    return null;
  },
  remove: function (a) {
    var c = this.items.indexOf(a);
    if (c === -1) {
      Ext.Array.remove(this.all, a);
      if (typeof this.getKey == "function") {
        var b = this.getKey(a);
        if (b !== undefined) {
          delete this.map[b];
        }
      }
      return a;
    }
    return this.removeAt(this.items.indexOf(a));
  },
  removeAll: function (b) {
    if (b) {
      var c = b.length,
        a;
      for (a = 0; a < c; a++) {
        this.remove(b[a]);
      }
    }
    return this;
  },
  removeAt: function (b) {
    var a = this,
      e = a.items,
      f = a.keys,
      g = a.all,
      d,
      c;
    if (b < a.length && b >= 0) {
      d = e[b];
      c = f[b];
      if (typeof c != "undefined") {
        delete a.map[c];
      }
      Ext.Array.erase(e, b, 1);
      Ext.Array.erase(f, b, 1);
      Ext.Array.remove(g, d);
      delete a.indices[c];
      a.length--;
      this.dirtyIndices = !0;
      return d;
    }
    return !1;
  },
  removeAtKey: function (a) {
    return this.removeAt(this.indexOfKey(a));
  },
  getCount: function () {
    return this.length;
  },
  indexOf: function (b) {
    if (this.dirtyIndices) {
      this.updateIndices();
    }
    var a = b ? this.indices[this.getKey(b)] : -1;
    return a === undefined ? -1 : a;
  },
  indexOfKey: function (b) {
    if (this.dirtyIndices) {
      this.updateIndices();
    }
    var a = this.indices[b];
    return a === undefined ? -1 : a;
  },
  updateIndices: function () {
    var b = this.items,
      f = b.length,
      e = (this.indices = {}),
      a,
      c,
      d;
    for (a = 0; a < f; a++) {
      c = b[a];
      d = this.getKey(c);
      e[d] = a;
    }
    this.dirtyIndices = !1;
  },
  get: function (b) {
    var c = this,
      d = c.map[b],
      a;
    if (d !== undefined) {
      a = d;
    } else {
      if (typeof b == "number") {
        a = c.items[b];
      }
    }
    return typeof a != "function" || c.getAllowFunctions() ? a : null;
  },
  getAt: function (a) {
    return this.items[a];
  },
  getByKey: function (a) {
    return this.map[a];
  },
  contains: function (a) {
    var b = this.getKey(a);
    if (b) {
      return this.containsKey(b);
    } else {
      return Ext.Array.contains(this.items, a);
    }
  },
  containsKey: function (a) {
    return typeof this.map[a] != "undefined";
  },
  clear: function () {
    var a = this;
    a.length = 0;
    a.items.length = 0;
    a.keys.length = 0;
    a.all.length = 0;
    a.dirtyIndices = !0;
    a.indices = {};
    a.map = {};
  },
  first: function () {
    return this.items[0];
  },
  last: function () {
    return this.items[this.length - 1];
  },
  getRange: function (d, c) {
    var f = this,
      e = f.items,
      b = [],
      a;
    if (e.length < 1) {
      return b;
    }
    d = d || 0;
    c = Math.min(typeof c == "undefined" ? f.length - 1 : c, f.length - 1);
    if (d <= c) {
      for (a = d; a <= c; a++) {
        b[b.length] = e[a];
      }
    } else {
      for (a = d; a >= c; a--) {
        b[b.length] = e[a];
      }
    }
    return b;
  },
  findIndexBy: function (g, d, e) {
    var b = this,
      f = b.keys,
      c = b.items,
      a = e || 0,
      h = c.length;
    for (; a < h; a++) {
      if (g.call(d || b, c[a], f[a])) {
        return a;
      }
    }
    return -1;
  },
  clone: function () {
    var c = this,
      b = new this.self(),
      e = c.keys,
      d = c.items,
      a = 0,
      f = d.length;
    for (; a < f; a++) {
      b.add(e[a], d[a]);
    }
    b.getKey = c.getKey;
    return b;
  },
  destroy: function () {
    this.callSuper();
    this.clear();
  },
});
Ext.define(
  "Ext.data.StoreManager",
  {
    extend: Ext.util.Collection,
    alternateClassName: [
      "Ext.StoreMgr",
      "Ext.data.StoreMgr",
      "Ext.StoreManager",
    ],
    singleton: !0,
    register: function () {
      for (var a = 0, b; (b = arguments[a]); a++) {
        this.add(b);
      }
    },
    unregister: function () {
      for (var a = 0, b; (b = arguments[a]); a++) {
        this.remove(this.lookup(b));
      }
    },
    lookup: function (a) {
      if (Ext.isArray(a)) {
        var f = ["field1"],
          e = !Ext.isArray(a[0]),
          d = a,
          b,
          c;
        if (e) {
          d = [];
          for (b = 0, c = a.length; b < c; ++b) {
            d.push([a[b]]);
          }
        } else {
          for (b = 2, c = a[0].length; b <= c; ++b) {
            f.push("field" + b);
          }
        }
        return Ext.create("Ext.data.ArrayStore", {
          data: d,
          fields: f,
          autoDestroy: !0,
          autoCreated: !0,
          expanded: e,
        });
      }
      if (Ext.isString(a)) {
        return this.get(a);
      } else {
        if (a instanceof Ext.data.Store) {
          return a;
        } else {
          return Ext.factory(a, Ext.data.Store, null, "store");
        }
      }
    },
    getKey: function (a) {
      return a.getStoreId();
    },
  },
  function () {
    Ext.regStore = function (b, a) {
      var c;
      if (Ext.isObject(b)) {
        a = b;
      } else {
        if (a instanceof Ext.data.Store) {
          a.setStoreId(b);
        } else {
          a.storeId = b;
        }
      }
      if (a instanceof Ext.data.Store) {
        c = a;
      } else {
        c = Ext.create("Ext.data.Store", a);
      }
      return Ext.data.StoreManager.register(c);
    };
    Ext.getStore = function (a) {
      return Ext.data.StoreManager.lookup(a);
    };
  }
);
Ext.define("Ext.dataview.component.DataItem", {
  extend: Ext.Container,
  xtype: "dataitem",
  config: {
    baseCls: Ext.baseCSSPrefix + "data-item",
    defaultType: "component",
    record: null,
    itemCls: null,
    dataMap: {},
    dataview: null,
    width: "100%",
    items: [{ xtype: "component" }],
  },
  updateBaseCls: function (b, c) {
    var a = this;
    a.callParent(arguments);
  },
  updateItemCls: function (a, b) {
    if (b) {
      this.removeCls(b);
    }
    if (a) {
      this.addCls(a);
    }
  },
  doMapData: function (f, c, g) {
    var e, d, b, a;
    for (e in f) {
      b = f[e];
      d = this[e]();
      if (d) {
        for (a in b) {
          if (c && d[a] && c[b[a]] !== undefined && c[b[a]] !== null) {
            d[a](c[b[a]]);
          }
        }
      }
    }
    if (g) {
      g.updateData(c);
    }
  },
  updateRecord: function (a) {
    if (!a) {
      return;
    }
    this._record = a;
    var b = this,
      c = b.dataview || this.getDataview(),
      e = c.prepareData(a.getData(!0), c.getStore().indexOf(a), a),
      g = b.getItems(),
      f = g.first(),
      d = b.getDataMap();
    if (!f) {
      return;
    }
    if (d) {
      this.doMapData(d, e, f);
    }
    b.fireEvent("updatedata", b, e);
  },
});
Ext.define("Ext.dataview.component.Container", {
  extend: Ext.Container,
  constructor: function () {
    this.itemCache = [];
    this.callParent(arguments);
  },
  doInitialize: function () {
    this.innerElement.on({
      touchstart: "onItemTouchStart",
      touchend: "onItemTouchEnd",
      tap: "onItemTap",
      taphold: "onItemTapHold",
      touchmove: "onItemTouchMove",
      singletap: "onItemSingleTap",
      doubletap: "onItemDoubleTap",
      swipe: "onItemSwipe",
      delegate: "> ." + Ext.baseCSSPrefix + "data-item",
      scope: this,
    });
  },
  initialize: function () {
    this.callParent();
    this.doInitialize();
  },
  onItemTouchStart: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    b.on({ touchmove: "onItemTouchMove", scope: a, single: !0 });
    a.fireEvent("itemtouchstart", a, b, a.indexOf(b), c);
  },
  onItemTouchMove: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemtouchmove", a, b, a.indexOf(b), c);
  },
  onItemTouchEnd: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    b.un({ touchmove: "onItemTouchMove", scope: a });
    a.fireEvent("itemtouchend", a, b, a.indexOf(b), c);
  },
  onItemTap: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemtap", a, b, a.indexOf(b), c);
  },
  onItemTapHold: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemtaphold", a, b, a.indexOf(b), c);
  },
  onItemSingleTap: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemsingletap", a, b, a.indexOf(b), c);
  },
  onItemDoubleTap: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemdoubletap", a, b, a.indexOf(b), c);
  },
  onItemSwipe: function (c) {
    var a = this,
      d = c.getTarget(),
      b = Ext.getCmp(d.id);
    a.fireEvent("itemswipe", a, b, a.indexOf(b), c);
  },
  moveItemsToCache: function (g, l) {
    var b = this,
      c = b.dataview,
      h = c.getMaxItemCache(),
      k = b.getViewItems(),
      e = b.itemCache,
      f = e.length,
      j = c.getPressedCls(),
      i = c.getSelectedCls(),
      d = l - g,
      a;
    for (; d >= 0; d--) {
      a = k[g + d];
      if (f !== h) {
        b.remove(a, !1);
        a.removeCls([j, i]);
        e.push(a);
        f++;
      } else {
        a.destroy();
      }
    }
    if (b.getViewItems().length == 0) {
      this.dataview.showEmptyText();
    }
  },
  moveItemsFromCache: function (b) {
    var g = this,
      e = g.dataview,
      l = e.getStore(),
      f = b.length,
      m = e.getDefaultType(),
      j = e.getItemConfig(),
      h = g.itemCache,
      i = h.length,
      k = [],
      a,
      d,
      c;
    if (f) {
      e.hideEmptyText();
    }
    for (a = 0; a < f; a++) {
      b[a]._tmpIndex = l.indexOf(b[a]);
    }
    Ext.Array.sort(b, function (a, c) {
      return a._tmpIndex > c._tmpIndex ? 1 : -1;
    });
    for (a = 0; a < f; a++) {
      c = b[a];
      if (i) {
        i--;
        d = h.pop();
        this.updateListItem(c, d);
      } else {
        d = g.getDataItemConfig(m, c, j);
      }
      d = this.insert(c._tmpIndex, d);
      delete c._tmpIndex;
    }
    return k;
  },
  getViewItems: function () {
    return this.getInnerItems();
  },
  updateListItem: function (b, a) {
    if (a.updateRecord) {
      if (a.getRecord() === b) {
        a.updateRecord(b);
      } else {
        a.setRecord(b);
      }
    }
  },
  getDataItemConfig: function (e, d, a) {
    var b = this.dataview,
      c = {
        xtype: e,
        record: d,
        itemCls: b.getItemCls(),
        defaults: a,
        dataview: b,
      };
    return Ext.merge(c, a);
  },
  doRemoveItemCls: function (c) {
    var b = this.getViewItems(),
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      b[a].removeCls(c);
    }
  },
  doAddItemCls: function (c) {
    var b = this.getViewItems(),
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      b[a].addCls(c);
    }
  },
  updateAtNewIndex: function (a, c, b) {
    this.moveItemsToCache(a, a);
    this.moveItemsFromCache([b]);
  },
  destroy: function () {
    var d = this,
      b = d.itemCache,
      c = b.length,
      a = 0;
    for (; a < c; a++) {
      b[a].destroy();
    }
    this.callParent();
  },
});
Ext.define("Ext.dataview.element.Container", {
  extend: Ext.Component,
  doInitialize: function () {
    this.element.on({
      touchstart: "onItemTouchStart",
      touchend: "onItemTouchEnd",
      tap: "onItemTap",
      taphold: "onItemTapHold",
      touchmove: "onItemTouchMove",
      singletap: "onItemSingleTap",
      doubletap: "onItemDoubleTap",
      swipe: "onItemSwipe",
      delegate: "> div",
      scope: this,
    });
  },
  initialize: function () {
    this.callParent();
    this.doInitialize();
  },
  updateBaseCls: function (a, b) {
    var c = this;
    c.callParent([a + "-container", b]);
  },
  onItemTouchStart: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    Ext.get(b).on({ touchmove: "onItemTouchMove", scope: a, single: !0 });
    a.fireEvent("itemtouchstart", a, Ext.get(b), d, c);
  },
  onItemTouchEnd: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    Ext.get(b).un({ touchmove: "onItemTouchMove", scope: a });
    a.fireEvent("itemtouchend", a, Ext.get(b), d, c);
  },
  onItemTouchMove: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemtouchmove", a, Ext.get(b), d, c);
  },
  onItemTap: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemtap", a, Ext.get(b), d, c);
  },
  onItemTapHold: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemtaphold", a, Ext.get(b), d, c);
  },
  onItemDoubleTap: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemdoubletap", a, Ext.get(b), d, c);
  },
  onItemSingleTap: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemsingletap", a, Ext.get(b), d, c);
  },
  onItemSwipe: function (c) {
    var a = this,
      b = c.getTarget(),
      d = a.getViewItems().indexOf(b);
    a.fireEvent("itemswipe", a, Ext.get(b), d, c);
  },
  updateListItem: function (c, f) {
    var g = this,
      b = g.dataview,
      e = b.getStore(),
      d = e.indexOf(c),
      a = b.prepareData(c.getData(!0), d, c);
    a.xcount = e.getCount();
    a.xindex = typeof a.xindex === "number" ? a.xindex : d;
    f.innerHTML = b.getItemTpl().apply(a);
  },
  addListItem: function (b, g) {
    var i = this,
      e = i.dataview,
      j = e.getStore(),
      a = e.prepareData(g.getData(!0), b, g),
      f = i.element,
      d = f.dom.childNodes,
      h = d.length,
      c;
    a.xcount = typeof a.xcount === "number" ? a.xcount : j.getCount();
    a.xindex = typeof a.xindex === "number" ? a.xindex : b;
    c = Ext.Element.create(this.getItemElementConfig(b, a));
    if (!h || b == h) {
      c.appendTo(f);
    } else {
      c.insertBefore(d[b]);
    }
  },
  getItemElementConfig: function (e, d) {
    var a = this.dataview,
      b = a.getItemCls(),
      c = a.getBaseCls() + "-item";
    if (b) {
      c += " " + b;
    }
    return { cls: c, html: a.getItemTpl().apply(d) };
  },
  doRemoveItemCls: function (c) {
    var b = this.getViewItems(),
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      Ext.fly(b[a]).removeCls(c);
    }
  },
  doAddItemCls: function (c) {
    var b = this.getViewItems(),
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      Ext.fly(b[a]).addCls(c);
    }
  },
  moveItemsToCache: function (b, f) {
    var d = this,
      e = d.getViewItems(),
      a = f - b,
      c;
    for (; a >= 0; a--) {
      c = e[b + a];
      Ext.get(c).destroy();
    }
    if (d.getViewItems().length == 0) {
      this.dataview.showEmptyText();
    }
  },
  moveItemsFromCache: function (b) {
    var f = this,
      e = f.dataview,
      g = e.getStore(),
      d = b.length,
      a,
      c;
    if (d) {
      e.hideEmptyText();
    }
    for (a = 0; a < d; a++) {
      b[a]._tmpIndex = g.indexOf(b[a]);
    }
    Ext.Array.sort(b, function (a, c) {
      return a._tmpIndex > c._tmpIndex ? 1 : -1;
    });
    for (a = 0; a < d; a++) {
      c = b[a];
      f.addListItem(c._tmpIndex, c);
      delete c._tmpIndex;
    }
  },
  getViewItems: function () {
    return Array.prototype.slice.call(this.element.dom.childNodes);
  },
  updateAtNewIndex: function (a, c, b) {
    this.moveItemsToCache(a, a);
    this.moveItemsFromCache([b]);
  },
  destroy: function () {
    var b = this.getViewItems(),
      c = b.length,
      a = 0;
    for (; a < c; a++) {
      Ext.get(b[a]).destroy();
    }
    this.callParent();
  },
});
Ext.define("Ext.dataview.DataView", {
  extend: Ext.Container,
  alternateClassName: "Ext.DataView",
  mixins: [Ext.mixin.Selectable],
  xtype: "dataview",
  config: {
    store: null,
    data: null,
    baseCls: Ext.baseCSSPrefix + "dataview",
    emptyText: null,
    deferEmptyText: !0,
    itemTpl: "<div>{text}</div>",
    pressedCls: "x-item-pressed",
    itemCls: null,
    selectedCls: "x-item-selected",
    triggerEvent: "itemtap",
    triggerCtEvent: "tap",
    deselectOnContainerClick: !0,
    scrollable: !0,
    inline: null,
    pressedDelay: 100,
    loadingText: "Loading...",
    useComponents: null,
    itemConfig: {},
    maxItemCache: 20,
    defaultType: "dataitem",
    scrollToTopOnRefresh: !0,
  },
  constructor: function (b) {
    var a = this,
      c;
    a.hasLoadedStore = !1;
    a.mixins.selectable.constructor.apply(a, arguments);
    a.indexOffset = 0;
    a.callParent(arguments);
  },
  updateItemCls: function (b, c) {
    var a = this.container;
    if (a) {
      if (c) {
        a.doRemoveItemCls(c);
      }
      if (b) {
        a.doAddItemCls(b);
      }
    }
  },
  storeEventHooks: {
    beforeload: "onBeforeLoad",
    load: "onLoad",
    refresh: "refresh",
    addrecords: "onStoreAdd",
    removerecords: "onStoreRemove",
    updaterecord: "onStoreUpdate",
  },
  initialize: function () {
    this.callParent();
    var a = this,
      b,
      c = a.getTriggerEvent();
    a.on(a.getTriggerCtEvent(), a.onContainerTrigger, a);
    b = a.container = this.add(
      new Ext.dataview[
        a.getUseComponents() ? "component" : "element"
      ].Container({ baseCls: this.getBaseCls() })
    );
    b.dataview = a;
    if (c) {
      a.on(c, a.onItemTrigger, a);
    }
    b.on({
      itemtouchstart: "onItemTouchStart",
      itemtouchend: "onItemTouchEnd",
      itemtap: "onItemTap",
      itemtaphold: "onItemTapHold",
      itemtouchmove: "onItemTouchMove",
      itemsingletap: "onItemSingleTap",
      itemdoubletap: "onItemDoubleTap",
      itemswipe: "onItemSwipe",
      scope: a,
    });
    if (a.getStore()) {
      if (a.isPainted()) {
        a.refresh();
      } else {
        a.on({ painted: "refresh", single: !0 });
      }
    }
  },
  applyInline: function (a) {
    if (Ext.isObject(a)) {
      a = Ext.apply({}, a);
    }
    return a;
  },
  updateInline: function (b, c) {
    var a = this.getBaseCls();
    if (c) {
      this.removeCls([a + "-inlineblock", a + "-nowrap"]);
    }
    if (b) {
      this.addCls(a + "-inlineblock");
      if (Ext.isObject(b) && b.wrap === !1) {
        this.addCls(a + "-nowrap");
      } else {
        this.removeCls(a + "-nowrap");
      }
    }
  },
  prepareData: function (a, c, b) {
    return a;
  },
  onContainerTrigger: function (b) {
    var a = this;
    if (b.target != a.element.dom) {
      return;
    }
    if (a.getDeselectOnContainerClick() && a.getStore()) {
      a.deselectAll();
    }
  },
  onItemTrigger: function (b, a) {
    if (!this.isDestroyed) {
      this.selectWithEvent(this.getStore().getAt(a));
    }
  },
  doAddPressedCls: function (c) {
    var b = this,
      a = b.getItemAt(b.getStore().indexOf(c));
    if (Ext.isElement(a)) {
      a = Ext.get(a);
    }
    if (a) {
      if (a.isComponent) {
        a.renderElement.addCls(b.getPressedCls());
      } else {
        a.addCls(b.getPressedCls());
      }
    }
  },
  onItemTouchStart: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireAction("itemtouchstart", [a, b, e, d, f], "doItemTouchStart");
  },
  doItemTouchStart: function (a, e, d, b) {
    var c = a.getPressedDelay();
    if (b) {
      if (c > 0) {
        a.pressedTimeout = Ext.defer(a.doAddPressedCls, c, a, [b]);
      } else {
        a.doAddPressedCls(b);
      }
    }
  },
  onItemTouchEnd: function (g, a, d, f) {
    var b = this,
      e = b.getStore(),
      c = e && e.getAt(d);
    if (this.hasOwnProperty("pressedTimeout")) {
      clearTimeout(this.pressedTimeout);
      delete this.pressedTimeout;
    }
    if (c && a) {
      if (a.isComponent) {
        a.renderElement.removeCls(b.getPressedCls());
      } else {
        a.removeCls(b.getPressedCls());
      }
    }
    b.fireEvent("itemtouchend", b, d, a, c, f);
  },
  onItemTouchMove: function (g, b, d, f) {
    var a = this,
      e = a.getStore(),
      c = e && e.getAt(d);
    if (a.hasOwnProperty("pressedTimeout")) {
      clearTimeout(a.pressedTimeout);
      delete a.pressedTimeout;
    }
    if (c && b) {
      if (b.isComponent) {
        b.renderElement.removeCls(a.getPressedCls());
      } else {
        b.removeCls(a.getPressedCls());
      }
    }
    a.fireEvent("itemtouchmove", a, d, b, c, f);
  },
  onItemTap: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireEvent("itemtap", a, b, e, d, f);
  },
  onItemTapHold: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireEvent("itemtaphold", a, b, e, d, f);
  },
  onItemSingleTap: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireEvent("itemsingletap", a, b, e, d, f);
  },
  onItemDoubleTap: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireEvent("itemdoubletap", a, b, e, d, f);
  },
  onItemSwipe: function (g, e, b, f) {
    var a = this,
      c = a.getStore(),
      d = c && c.getAt(b);
    a.fireEvent("itemswipe", a, b, e, d, f);
  },
  onItemSelect: function (b, c) {
    var a = this;
    if (c) {
      a.doItemSelect(a, b);
    } else {
      a.fireAction("select", [a, b], "doItemSelect");
    }
  },
  doItemSelect: function (b, c) {
    if (b.container && !b.isDestroyed) {
      var a = b.getItemAt(b.getStore().indexOf(c));
      if (Ext.isElement(a)) {
        a = Ext.get(a);
      }
      if (a) {
        if (a.isComponent) {
          a.renderElement.removeCls(b.getPressedCls());
          a.renderElement.addCls(b.getSelectedCls());
        } else {
          a.removeCls(b.getPressedCls());
          a.addCls(b.getSelectedCls());
        }
      }
    }
  },
  onItemDeselect: function (c, b) {
    var a = this;
    if (a.container && !a.isDestroyed) {
      if (b) {
        a.doItemDeselect(a, c);
      } else {
        a.fireAction("deselect", [a, c, b], "doItemDeselect");
      }
    }
  },
  doItemDeselect: function (b, c) {
    var a = b.getItemAt(b.getStore().indexOf(c));
    if (Ext.isElement(a)) {
      a = Ext.get(a);
    }
    if (a) {
      if (a.isComponent) {
        a.renderElement.removeCls([b.getPressedCls(), b.getSelectedCls()]);
      } else {
        a.removeCls([b.getPressedCls(), b.getSelectedCls()]);
      }
    }
  },
  updateData: function (b) {
    var a = this.getStore();
    if (!a) {
      this.setStore(Ext.create("Ext.data.Store", { data: b, autoDestroy: !0 }));
    } else {
      a.add(b);
    }
  },
  applyStore: function (a) {
    var d = this,
      e = Ext.apply({}, d.storeEventHooks, { scope: d }),
      c,
      b;
    if (a) {
      a = Ext.data.StoreManager.lookup(a);
      if (a && Ext.isObject(a) && a.isStore) {
        a.on(e);
        c = a.getProxy();
        if (c) {
          b = c.getReader();
          if (b) {
            b.on("exception", "handleException", this);
          }
        }
      }
    }
    return a;
  },
  handleException: function () {
    this.setMasked(!1);
  },
  updateStore: function (c, a) {
    var b = this,
      f = Ext.apply({}, b.storeEventHooks, { scope: b }),
      e,
      d;
    if (a && Ext.isObject(a) && a.isStore) {
      a.un(f);
      if (!b.isDestroyed) {
        b.onStoreClear();
      }
      if (a.getAutoDestroy()) {
        a.destroy();
      } else {
        e = a.getProxy();
        if (e) {
          d = e.getReader();
          if (d) {
            d.un("exception", "handleException", this);
          }
        }
      }
    }
    if (c) {
      if (c.isLoaded()) {
        this.hasLoadedStore = !0;
      }
      if (c.isLoading()) {
        b.onBeforeLoad();
      }
      if (b.container) {
        b.refresh();
      }
    }
  },
  onBeforeLoad: function () {
    var a = this.getLoadingText();
    if (a && this.isPainted()) {
      this.setMasked({ xtype: "loadmask", message: a });
    }
    this.hideEmptyText();
  },
  updateEmptyText: function (c, d) {
    var a = this,
      b;
    if (d && a.emptyTextCmp) {
      a.remove(a.emptyTextCmp, !0);
      delete a.emptyTextCmp;
    }
    if (c) {
      a.emptyTextCmp = a.add({
        xtype: "component",
        cls: a.getBaseCls() + "-emptytext",
        html: c,
        hidden: !0,
      });
      b = a.getStore();
      if (b && a.hasLoadedStore && !b.getCount()) {
        this.showEmptyText();
      }
    }
  },
  onLoad: function (a) {
    this.hasLoadedStore = !0;
    this.setMasked(!1);
    if (!a.getCount()) {
      this.showEmptyText();
    }
  },
  refresh: function () {
    var a = this,
      b = a.container;
    if (!a.getStore()) {
      if (!a.hasLoadedStore && !a.getDeferEmptyText()) {
        a.showEmptyText();
      }
      return;
    }
    if (b) {
      a.fireAction("refresh", [a], "doRefresh");
    }
  },
  applyItemTpl: function (a) {
    return Ext.isObject(a) && a.isTemplate ? a : new Ext.XTemplate(a);
  },
  onAfterRender: function () {
    var a = this;
    a.callParent(arguments);
    a.updateStore(a.getStore());
  },
  getItemAt: function (a) {
    return this.getViewItems()[a - this.indexOffset];
  },
  getItemIndex: function (b) {
    var a = this.getViewItems().indexOf(b);
    return a === -1 ? a : this.indexOffset + a;
  },
  getViewItems: function () {
    return this.container.getViewItems();
  },
  doRefresh: function (b) {
    var e = b.container,
      k = b.getStore(),
      i = k.getRange(),
      d = b.getViewItems(),
      h = i.length,
      c = d.length,
      f = h - c,
      g = b.getScrollable(),
      a,
      l;
    if (this.getScrollToTopOnRefresh() && g) {
      g.getScroller().scrollToTop();
    }
    if (h < 1) {
      b.onStoreClear();
      return;
    } else {
      b.hideEmptyText();
    }
    if (f < 0) {
      e.moveItemsToCache(c + f, c - 1);
      d = b.getViewItems();
      c = d.length;
    } else {
      if (f > 0) {
        e.moveItemsFromCache(k.getRange(c));
      }
    }
    for (a = 0; a < c; a++) {
      l = d[a];
      e.updateListItem(i[a], l);
    }
    if (this.hasSelection()) {
      var n = this.getSelection(),
        m = this.getSelectionCount(),
        j;
      for (a = 0; a < m; a++) {
        j = n[a];
        this.doItemSelect(this, j);
      }
    }
  },
  showEmptyText: function () {
    if (
      this.getEmptyText() &&
      (this.hasLoadedStore || !this.getDeferEmptyText())
    ) {
      this.emptyTextCmp.show();
    }
  },
  hideEmptyText: function () {
    if (this.getEmptyText()) {
      this.emptyTextCmp.hide();
    }
  },
  destroy: function () {
    var c = this.getStore(),
      b = c && c.getProxy(),
      a = b && b.getReader();
    if (a) {
      a.clearListeners();
    }
    this.callParent(arguments);
    this.setStore(null);
  },
  onStoreClear: function () {
    var a = this,
      b = a.container,
      c = a.getViewItems();
    b.moveItemsToCache(0, c.length - 1);
    this.showEmptyText();
  },
  onStoreAdd: function (b, a) {
    if (a) {
      this.hideEmptyText();
      this.container.moveItemsFromCache(a);
    }
  },
  onStoreRemove: function (f, d, b) {
    var c = this.container,
      e = d.length,
      a;
    for (a = 0; a < e; a++) {
      c.moveItemsToCache(b[a], b[a]);
    }
  },
  onStoreUpdate: function (g, d, c, a) {
    var b = this,
      f = b.container,
      e;
    a = typeof a === "undefined" ? c : a;
    if (a !== c) {
      f.updateAtNewIndex(a, c, d);
      if (b.isSelected(d)) {
        b.doItemSelect(b, d);
      }
    } else {
      e = b.getViewItems()[c];
      if (e) {
        f.updateListItem(d, e);
      }
    }
  },
});
Ext.define("Ext.data.Operation", {
  config: {
    synchronous: !0,
    action: null,
    filters: null,
    sorters: null,
    grouper: null,
    start: null,
    limit: null,
    batch: null,
    callback: null,
    scope: null,
    resultSet: null,
    records: null,
    request: null,
    response: null,
    withCredentials: null,
    params: null,
    url: null,
    page: null,
    node: null,
    model: undefined,
    addRecords: !1,
  },
  started: !1,
  running: !1,
  complete: !1,
  success: undefined,
  exception: !1,
  error: undefined,
  constructor: function (a) {
    this.initConfig(a);
  },
  applyModel: function (a) {
    if (typeof a == "string") {
      a = Ext.data.ModelManager.getModel(a);
      if (!a) {
        Ext.Logger.error("Model with name " + arguments[0] + " doesnt exist.");
      }
    }
    if (a && !a.prototype.isModel && Ext.isObject(a)) {
      a = Ext.data.ModelManager.registerType(a.storeId || a.id || Ext.id(), a);
    }
    return a;
  },
  getRecords: function () {
    var a = this.getResultSet();
    return this._records || (a ? a.getRecords() : []);
  },
  setStarted: function () {
    this.started = !0;
    this.running = !0;
  },
  setCompleted: function () {
    this.complete = !0;
    this.running = !1;
  },
  setSuccessful: function () {
    this.success = !0;
  },
  setException: function (a) {
    this.exception = !0;
    this.success = !1;
    this.running = !1;
    this.error = a;
  },
  hasException: function () {
    return this.exception === !0;
  },
  getError: function () {
    return this.error;
  },
  isStarted: function () {
    return this.started === !0;
  },
  isRunning: function () {
    return this.running === !0;
  },
  isComplete: function () {
    return this.complete === !0;
  },
  wasSuccessful: function () {
    return this.isComplete() && this.success === !0;
  },
  allowWrite: function () {
    return this.getAction() != "read";
  },
  process: function (d, a, c, b) {
    if (a.getSuccess() !== !1) {
      this.setResponse(b);
      this.setResultSet(a);
      this.setCompleted();
      this.setSuccessful();
    } else {
      this.setResponse(b);
      this.setResultSet(a);
      return !1;
    }
    return this["process" + Ext.String.capitalize(d)].call(this, a, c, b);
  },
  processRead: function (d) {
    var e = d.getRecords(),
      c = [],
      f = this.getModel(),
      g = e.length,
      b,
      a;
    for (b = 0; b < g; b++) {
      a = e[b];
      c.push(new f(a.data, a.id, a.node));
    }
    this.setRecords(c);
    d.setRecords(c);
    return !0;
  },
  processCreate: function (f) {
    var d = f.getRecords(),
      e = this.getRecords(),
      g = d.length,
      a,
      b,
      c;
    for (a = 0; a < g; a++) {
      c = d[a];
      if (c.clientId === null && e.length == 1 && d.length == 1) {
        b = e[a];
      } else {
        b = this.findCurrentRecord(c.clientId);
      }
      if (b) {
        this.updateRecord(b, c);
      }
    }
    return !0;
  },
  processUpdate: function (f) {
    var c = f.getRecords(),
      e = this.getRecords(),
      g = c.length,
      a,
      b,
      d;
    for (a = 0; a < g; a++) {
      d = c[a];
      b = e[a];
      if (b) {
        this.updateRecord(b, d);
      }
    }
    return !0;
  },
  processDestroy: function (e) {
    var c = e.getRecords(),
      f = c.length,
      b,
      a,
      d;
    for (b = 0; b < f; b++) {
      d = c[b];
      a = this.findCurrentRecord(d.id);
      if (a) {
        a.setIsErased(!0);
        a.notifyStores("afterErase", a);
      }
    }
  },
  findCurrentRecord: function (d) {
    var c = this.getRecords(),
      e = c.length,
      a,
      b;
    for (a = 0; a < e; a++) {
      b = c[a];
      if (b.getId() === d) {
        return b;
      }
    }
  },
  updateRecord: function (a, b) {
    var d = b.data,
      c = b.id;
    a.beginEdit();
    a.set(d);
    if (c !== null) {
      a.setId(c);
    }
    a.endEdit(!0);
    a.commit();
  },
});
Ext.define("Ext.data.ResultSet", {
  config: {
    loaded: !0,
    count: null,
    total: null,
    success: !1,
    records: null,
    message: null,
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  applyCount: function (a) {
    if (!a && a !== 0) {
      return this.getRecords().length;
    }
    return a;
  },
  updateRecords: function (a) {
    this.setCount(a.length);
  },
});
Ext.define(
  "Ext.data.reader.Reader",
  {
    alternateClassName: ["Ext.data.Reader", "Ext.data.DataReader"],
    mixins: [Ext.mixin.Observable],
    isReader: !0,
    config: {
      idProperty: undefined,
      clientIdProperty: "clientId",
      totalProperty: "total",
      successProperty: "success",
      messageProperty: null,
      rootProperty: "",
      implicitIncludes: !0,
      model: undefined,
    },
    constructor: function (a) {
      this.initConfig(a);
    },
    fieldCount: 0,
    applyModel: function (a) {
      if (typeof a == "string") {
        a = Ext.data.ModelManager.getModel(a);
        if (!a) {
          Ext.Logger.error(
            "Model with name " + arguments[0] + " doesnt exist."
          );
        }
      }
      if (a && !a.prototype.isModel && Ext.isObject(a)) {
        a = Ext.data.ModelManager.registerType(
          a.storeId || a.id || Ext.id(),
          a
        );
      }
      return a;
    },
    applyIdProperty: function (a) {
      if (!a && this.getModel()) {
        a = this.getModel().getIdProperty();
      }
      return a;
    },
    updateModel: function (a) {
      if (a) {
        if (!this.getIdProperty()) {
          this.setIdProperty(a.getIdProperty());
        }
        this.buildExtractors();
      }
    },
    createAccessor: Ext.emptyFn,
    createFieldAccessExpression: function () {
      return "undefined";
    },
    buildExtractors: function () {
      if (!this.getModel()) {
        return;
      }
      var a = this,
        d = a.getTotalProperty(),
        c = a.getSuccessProperty(),
        b = a.getMessageProperty();
      if (d) {
        a.getTotal = a.createAccessor(d);
      }
      if (c) {
        a.getSuccess = a.createAccessor(c);
      }
      if (b) {
        a.getMessage = a.createAccessor(b);
      }
      a.extractRecordData = a.buildRecordDataExtractor();
    },
    buildRecordDataExtractor: function () {
      var e = this,
        h = e.getModel(),
        d = h.getFields(),
        k = d.length,
        f = [],
        i = e.getModel().getClientIdProperty(),
        l = "__field",
        a = [
          "var me = this,\n",
          "    fields = me.getModel().getFields(),\n",
          "    idProperty = me.getIdProperty(),\n",
          '    idPropertyIsFn = (typeof idProperty == "function"),',
          "    value,\n",
          "    internalId",
        ],
        b,
        c,
        j,
        g;
      d = d.items;
      for (b = 0; b < k; b++) {
        c = d[b];
        g = c.getName();
        if (g === h.getIdProperty()) {
          f[b] = "idField";
        } else {
          f[b] = l + b;
        }
        a.push(",\n    ", f[b], ' = fields.get("', c.getName(), '")');
      }
      a.push(";\n\n    return function(source) {\n        var dest = {};\n");
      a.push("        if (idPropertyIsFn) {\n");
      a.push("            idField.setMapping(idProperty);\n");
      a.push("        }\n");
      for (b = 0; b < k; b++) {
        c = d[b];
        j = f[b];
        g = c.getName();
        if (
          g === h.getIdProperty() &&
          c.getMapping() === null &&
          h.getIdProperty() !== this.getIdProperty()
        ) {
          c.setMapping(this.getIdProperty());
        }
        a.push("        try {\n");
        a.push(
          "            value = ",
          e.createFieldAccessExpression(c, j, "source"),
          ";\n"
        );
        a.push("            if (value !== undefined) {\n");
        a.push('                dest["' + c.getName() + '"] = value;\n');
        a.push("            }\n");
        a.push("        } catch(e){}\n");
      }
      if (i) {
        a.push(
          "        internalId = " +
            e.createFieldAccessExpression(
              Ext.create("Ext.data.Field", { name: i }),
              null,
              "source"
            ) +
            ";\n"
        );
        a.push("        if (internalId !== undefined) {\n");
        a.push('            dest["_clientId"] = internalId;\n        }\n');
      }
      a.push("        return dest;\n");
      a.push("    };");
      return Ext.functionFactory(a.join("")).call(e);
    },
    getFields: function () {
      return this.getModel().getFields().items;
    },
    getData: function (a) {
      return a;
    },
    getResponseData: function (a) {
      return a;
    },
    getRoot: function (a) {
      return a;
    },
    read: function (e) {
      var f = e,
        h = this.getModel(),
        d,
        b,
        a,
        g,
        c;
      if (e) {
        f = this.getResponseData(e);
      }
      if (f) {
        d = this.readRecords(f);
        b = d.getRecords();
        for (a = 0, g = b.length; a < g; a++) {
          c = b[a];
          b[a] = new h(c.data, c.id, c.node);
        }
        return d;
      } else {
        return this.nullResultSet;
      }
    },
    process: function (a) {
      var b = a;
      if (a) {
        b = this.getResponseData(a);
      }
      if (b) {
        return this.readRecords(b);
      } else {
        return this.nullResultSet;
      }
    },
    readRecords: function (a) {
      var b = this;
      b.rawData = a;
      a = b.getData(a);
      if (a.metaData) {
        b.onMetaChange(a.metaData);
      }
      var f = Ext.isArray(a),
        j = f ? a : b.getRoot(a),
        h = !0,
        e = 0,
        i,
        c,
        d,
        g;
      if (f && Ext.isEmpty(a.length)) {
        return b.nullResultSet;
      }
      if (b.getTotal) {
        c = parseInt(b.getTotal(a), 10);
        if (!isNaN(c)) {
          i = c;
        }
      }
      if (b.getSuccess) {
        c = b.getSuccess(a);
        if (c === !1 || c === "false") {
          h = !1;
        }
      }
      if (b.getMessage) {
        g = b.getMessage(a);
      }
      if (j) {
        d = b.extractData(j);
        e = d.length;
      } else {
        e = 0;
        d = [];
      }
      return new Ext.data.ResultSet({
        total: i,
        count: e,
        records: d,
        success: h,
        message: g,
      });
    },
    extractData: function (c) {
      var d = this,
        j = [],
        k = c.length,
        l = d.getModel(),
        i = l.getIdProperty(),
        h = l.getFields(),
        b,
        e,
        a,
        g,
        f;
      if (h.isDirty) {
        d.buildExtractors(!0);
        delete h.isDirty;
      }
      if (!c.length && Ext.isObject(c)) {
        c = [c];
        k = 1;
      }
      for (e = 0; e < k; e++) {
        f = null;
        g = null;
        b = c[e];
        if (b.isModel) {
          a = b.data;
        } else {
          a = d.extractRecordData(b);
        }
        if (a._clientId !== undefined) {
          f = a._clientId;
          delete a._clientId;
        }
        if (a[i] !== undefined) {
          g = a[i];
        }
        if (d.getImplicitIncludes()) {
          d.readAssociated(a, b);
        }
        j.push({ clientId: f, id: g, data: a, node: b });
      }
      return j;
    },
    readAssociated: function (g, h) {
      var d = this.getModel().associations.items,
        f = d.length,
        c = 0,
        e,
        a,
        b;
      for (; c < f; c++) {
        e = d[c];
        b = e.getAssociationKey();
        a = this.getAssociatedDataRoot(h, b);
        if (a) {
          g[b] = a;
        }
      }
    },
    getAssociatedDataRoot: function (b, a) {
      var d = /[\[\.]/,
        c = String(a).search(d);
      if (c >= 0) {
        return Ext.functionFactory(
          "obj",
          "return obj" + (c > 0 ? "." : "") + a
        )(b);
      }
      return b[a];
    },
    onMetaChange: function (a) {
      var e = a.fields,
        b = this,
        f,
        d,
        c;
      b.metaData = a;
      if (a.rootProperty !== undefined) {
        b.setRootProperty(a.rootProperty);
      } else {
        if (a.root !== undefined) {
          b.setRootProperty(a.root);
        }
      }
      if (a.idProperty !== undefined) {
        b.setIdProperty(a.idProperty);
      }
      if (a.totalProperty !== undefined) {
        b.setTotalProperty(a.totalProperty);
      }
      if (a.successProperty !== undefined) {
        b.setSuccessProperty(a.successProperty);
      }
      if (a.messageProperty !== undefined) {
        b.setMessageProperty(a.messageProperty);
      }
      if (e) {
        if (b.getModel()) {
          b.getModel().setFields(e);
          b.buildExtractors();
        } else {
          c = b.getIdProperty();
          d = { fields: e };
          if (c) {
            d.idProperty = c;
          }
          f = Ext.define("Ext.data.reader.MetaModel" + Ext.id(), {
            extend: "Ext.data.Model",
            config: d,
          });
          b.setModel(f);
        }
      } else {
        b.buildExtractors();
      }
    },
  },
  function () {
    Ext.apply(this.prototype, {
      nullResultSet: new Ext.data.ResultSet({
        total: 0,
        count: 0,
        records: [],
        success: !1,
      }),
    });
  }
);
Ext.define("Ext.data.reader.Json", {
  extend: Ext.data.reader.Reader,
  alternateClassName: "Ext.data.JsonReader",
  alias: "reader.json",
  config: { record: null, useSimpleAccessors: !1 },
  objectRe: /[\[\.]/,
  getResponseData: function (a) {
    var b = a;
    if (a && a.responseText) {
      b = a.responseText;
    }
    if (typeof b !== "string") {
      return b;
    }
    var c;
    try {
      c = Ext.decode(b);
    } catch (d) {
      this.fireEvent(
        "exception",
        this,
        a,
        "Unable to parse the JSON returned by the server: " + d.toString()
      );
      Ext.Logger.warn(
        "Unable to parse the JSON returned by the server: " + d.toString()
      );
    }
    return c;
  },
  buildExtractors: function () {
    var a = this,
      b = a.getRootProperty();
    a.callParent(arguments);
    if (b) {
      a.rootAccessor = a.createAccessor(b);
    } else {
      delete a.rootAccessor;
    }
  },
  getRoot: function (b) {
    var a = this.getModel().getFields();
    if (a.isDirty) {
      this.buildExtractors(!0);
      delete a.isDirty;
    }
    if (this.rootAccessor) {
      return this.rootAccessor.call(this, b);
    } else {
      return b;
    }
  },
  extractData: function (a) {
    var e = this.getRecord(),
      d = [],
      c,
      b;
    if (e) {
      c = a.length;
      if (!c && Ext.isObject(a)) {
        c = 1;
        a = [a];
      }
      for (b = 0; b < c; b++) {
        d[b] = a[b][e];
      }
    } else {
      d = a;
    }
    return this.callParent([d]);
  },
  createAccessor: (function () {
    var a = /[\[\.]/;
    return function (b) {
      if (Ext.isEmpty(b)) {
        return Ext.emptyFn;
      }
      if (Ext.isFunction(b)) {
        return b;
      }
      if (this.getUseSimpleAccessors() !== !0) {
        var c = String(b).search(a);
        if (c >= 0) {
          return Ext.functionFactory(
            "obj",
            "var value; try {value = obj" +
              (c > 0 ? "." : "") +
              b +
              "} catch(e) {}; return value;"
          );
        }
      }
      return function (a) {
        return a[b];
      };
    };
  })(),
  createFieldAccessExpression: function (d, h, c) {
    var g = this,
      i = g.objectRe,
      f = d.getMapping() !== null,
      a = f ? d.getMapping() : d.getName(),
      b,
      e;
    if (typeof a === "function") {
      b = h + ".getMapping()(" + c + ", this)";
    } else {
      if (g.getUseSimpleAccessors() === !0 || (e = String(a).search(i)) < 0) {
        if (!f || isNaN(a)) {
          a = '"' + a + '"';
        }
        b = c + "[" + a + "]";
      } else {
        b = c + (e > 0 ? "." : "") + a;
      }
    }
    return b;
  },
});
Ext.define("Ext.data.writer.Writer", {
  alias: "writer.base",
  alternateClassName: ["Ext.data.DataWriter", "Ext.data.Writer"],
  config: { writeAllFields: !0, nameProperty: "name" },
  constructor: function (a) {
    this.initConfig(a);
  },
  write: function (c) {
    var e = c.getOperation(),
      b = e.getRecords() || [],
      f = b.length,
      a = 0,
      d = [];
    for (; a < f; a++) {
      d.push(this.getRecordData(b[a]));
    }
    return this.writeRecords(c, d);
  },
  writeDate: function (c, a) {
    if (!a) {
      return null;
    }
    var b = c.getDateFormat() || "timestamp";
    switch (b) {
      case "timestamp":
        return a.getTime() / 1000;
      case "time":
        return a.getTime();
      default:
        return Ext.Date.format(a, b);
    }
  },
  getRecordData: function (b) {
    var i = b.phantom === !0,
      k = this.getWriteAllFields() || i,
      h = this.getNameProperty(),
      j = b.getFields(),
      e = {},
      d,
      f,
      c,
      g,
      a;
    if (k) {
      j.each(function (c) {
        if (c.getPersist()) {
          f = c.config[h] || c.getName();
          a = b.get(c.getName());
          if (c.getType().type == "date") {
            a = this.writeDate(c, a);
          }
          e[f] = a;
        }
      }, this);
    } else {
      d = b.getChanges();
      for (g in d) {
        if (d.hasOwnProperty(g)) {
          c = j.get(g);
          if (c.getPersist()) {
            f = c.config[h] || c.getName();
            a = d[g];
            if (c.getType().type == "date") {
              a = this.writeDate(c, a);
            }
            e[f] = a;
          }
        }
      }
      if (!i) {
        e[b.getIdProperty()] = b.getId();
      }
    }
    return e;
  },
});
Ext.define("Ext.data.writer.Json", {
  extend: Ext.data.writer.Writer,
  alternateClassName: "Ext.data.JsonWriter",
  alias: "writer.json",
  config: {
    rootProperty: undefined,
    encode: !1,
    allowSingle: !0,
    encodeRequest: !1,
  },
  applyRootProperty: function (a) {
    if (!a && (this.getEncode() || this.getEncodeRequest())) {
      a = "data";
    }
    return a;
  },
  writeRecords: function (b, a) {
    var d = this.getRootProperty(),
      f = b.getParams(),
      e = this.getAllowSingle(),
      c;
    if (this.getAllowSingle() && a && a.length == 1) {
      a = a[0];
    }
    if (this.getEncodeRequest()) {
      c = b.getJsonData() || {};
      if (a && (a.length || (e && Ext.isObject(a)))) {
        c[d] = a;
      }
      b.setJsonData(Ext.apply(c, f || {}));
      b.setParams(null);
      b.setMethod("POST");
      return b;
    }
    if (!a || !(a.length || (e && Ext.isObject(a)))) {
      return b;
    }
    if (this.getEncode()) {
      if (d) {
        f[d] = Ext.encode(a);
      } else {
      }
    } else {
      c = b.getJsonData() || {};
      if (d) {
        c[d] = a;
      } else {
        c = a;
      }
      b.setJsonData(c);
    }
    return b;
  },
});
Ext.define("Ext.data.Batch", {
  mixins: { observable: Ext.mixin.Observable },
  config: { autoStart: !1, pauseOnException: !0, proxy: null },
  current: -1,
  total: 0,
  isRunning: !1,
  isComplete: !1,
  hasException: !1,
  constructor: function (b) {
    var a = this;
    a.initConfig(b);
    a.operations = [];
  },
  add: function (a) {
    this.total++;
    a.setBatch(this);
    this.operations.push(a);
  },
  start: function () {
    this.hasException = !1;
    this.isRunning = !0;
    this.runNextOperation();
  },
  runNextOperation: function () {
    this.runOperation(this.current + 1);
  },
  pause: function () {
    this.isRunning = !1;
  },
  runOperation: function (e) {
    var a = this,
      c = a.operations,
      b = c[e],
      d;
    if (b === undefined) {
      a.isRunning = !1;
      a.isComplete = !0;
      a.fireEvent("complete", a, c[c.length - 1]);
    } else {
      a.current = e;
      d = function (b) {
        var c = b.hasException();
        if (c) {
          a.hasException = !0;
          a.fireEvent("exception", a, b);
        } else {
          a.fireEvent("operationcomplete", a, b);
        }
        if (c && a.getPauseOnException()) {
          a.pause();
        } else {
          b.setCompleted();
          a.runNextOperation();
        }
      };
      b.setStarted();
      a.getProxy()[b.getAction()](b, d, a);
    }
  },
});
Ext.define(
  "Ext.data.proxy.Proxy",
  {
    extend: Ext.Evented,
    alias: "proxy.proxy",
    alternateClassName: ["Ext.data.DataProxy", "Ext.data.Proxy"],
    config: {
      batchOrder: "create,update,destroy",
      batchActions: !0,
      model: null,
      reader: { type: "json" },
      writer: { type: "json" },
    },
    isProxy: !0,
    applyModel: function (a) {
      if (typeof a == "string") {
        a = Ext.data.ModelManager.getModel(a);
        if (!a) {
          Ext.Logger.error(
            "Model with name " + arguments[0] + " doesnt exist."
          );
        }
      }
      if (a && !a.prototype.isModel && Ext.isObject(a)) {
        a = Ext.data.ModelManager.registerType(
          a.storeId || a.id || Ext.id(),
          a
        );
      }
      return a;
    },
    updateModel: function (b) {
      if (b) {
        var a = this.getReader();
        if (a && !a.getModel()) {
          a.setModel(b);
        }
      }
    },
    applyReader: function (b, a) {
      return Ext.factory(b, Ext.data.Reader, a, "reader");
    },
    updateReader: function (a) {
      if (a) {
        var b = this.getModel();
        if (!b) {
          b = a.getModel();
          if (b) {
            this.setModel(b);
          }
        } else {
          a.setModel(b);
        }
        if (a.onMetaChange) {
          a.onMetaChange = Ext.Function.createSequence(
            a.onMetaChange,
            this.onMetaChange,
            this
          );
        }
      }
    },
    onMetaChange: function (b) {
      var a = this.getReader().getModel();
      if (!this.getModel() && a) {
        this.setModel(a);
      }
      this.fireEvent("metachange", this, b);
    },
    applyWriter: function (b, a) {
      return Ext.factory(b, Ext.data.Writer, a, "writer");
    },
    create: Ext.emptyFn,
    read: Ext.emptyFn,
    update: Ext.emptyFn,
    destroy: Ext.emptyFn,
    onDestroy: function () {
      Ext.destroy(this.getReader(), this.getWriter());
      Ext.Evented.prototype.destroy.apply(this, arguments);
    },
    batch: function (a, f) {
      var c = this,
        g = c.getBatchActions(),
        e = c.getModel(),
        b,
        d;
      if (a.operations === undefined) {
        a = { operations: a, listeners: f };
      }
      if (a.batch && a.batch.isBatch) {
        b = a.batch;
      } else {
        b = new Ext.data.Batch(a.batch || {});
      }
      b.setProxy(c);
      b.on("complete", Ext.bind(c.onBatchComplete, c, [a], 0));
      if (a.listeners) {
        b.on(a.listeners);
      }
      Ext.each(
        c.getBatchOrder().split(","),
        function (c) {
          d = a.operations[c];
          if (d) {
            if (g) {
              b.add(
                new Ext.data.Operation({ action: c, records: d, model: e })
              );
            } else {
              Ext.each(d, function (d) {
                b.add(
                  new Ext.data.Operation({ action: c, records: [d], model: e })
                );
              });
            }
          }
        },
        c
      );
      b.start();
      return b;
    },
    onBatchComplete: function (a, b) {
      var c = a.scope || this;
      if (b.hasException) {
        if (Ext.isFunction(a.failure)) {
          Ext.callback(a.failure, c, [b, a]);
        }
      } else {
        if (Ext.isFunction(a.success)) {
          Ext.callback(a.success, c, [b, a]);
        }
      }
      if (Ext.isFunction(a.callback)) {
        Ext.callback(a.callback, c, [b, a]);
      }
      Ext.destroy(b);
    },
  },
  function () {}
);
Ext.define("Ext.data.proxy.Client", {
  extend: Ext.data.proxy.Proxy,
  alternateClassName: "Ext.proxy.ClientProxy",
  clear: function () {},
});
Ext.define("Ext.data.proxy.Memory", {
  extend: Ext.data.proxy.Client,
  alias: "proxy.memory",
  alternateClassName: "Ext.data.MemoryProxy",
  isMemoryProxy: !0,
  config: { data: [] },
  finishOperation: function (a, d, e) {
    if (a) {
      var b = 0,
        c = a.getRecords(),
        f = c.length;
      for (b; b < f; b++) {
        c[b].commit();
      }
      a.setCompleted();
      a.setSuccessful();
      Ext.callback(d, e || this, [a]);
    }
  },
  create: function () {
    this.finishOperation.apply(this, arguments);
  },
  update: function () {
    this.finishOperation.apply(this, arguments);
  },
  destroy: function () {
    this.finishOperation.apply(this, arguments);
  },
  read: function (a, c, e) {
    var b = this,
      d = b.getReader();
    if (a.process("read", d.process(b.getData())) === !1) {
      this.fireEvent("exception", this, null, a);
    }
    Ext.callback(c, e || b, [a]);
  },
  clear: Ext.emptyFn,
});
Ext.define("Ext.data.SortTypes", {
  singleton: !0,
  stripTagsRE: /<\/?[^>]+>/gi,
  none: function (a) {
    return a;
  },
  asText: function (a) {
    return String(a).replace(this.stripTagsRE, "");
  },
  asUCText: function (a) {
    return String(a).toUpperCase().replace(this.stripTagsRE, "");
  },
  asUCString: function (a) {
    return String(a).toUpperCase();
  },
  asDate: function (a) {
    if (!a) {
      return 0;
    }
    if (Ext.isDate(a)) {
      return a.getTime();
    }
    return Date.parse(String(a));
  },
  asFloat: function (a) {
    a = parseFloat(String(a).replace(/,/g, ""));
    return isNaN(a) ? 0 : a;
  },
  asInt: function (a) {
    a = parseInt(String(a).replace(/,/g, ""), 10);
    return isNaN(a) ? 0 : a;
  },
});
Ext.define(
  "Ext.data.Types",
  {
    singleton: !0,
    stripRe: /[\$,%]/g,
    dashesRe: /-/g,
    iso8601TestRe: /\d\dT\d\d/,
    iso8601SplitRe: /[- :T\.Z\+]/,
  },
  function () {
    var a = this,
      b = Ext.data.SortTypes;
    Ext.apply(a, {
      AUTO: {
        convert: function (a) {
          return a;
        },
        sortType: b.none,
        type: "auto",
      },
      STRING: {
        convert: function (a) {
          return a === undefined || a === null
            ? this.getAllowNull()
              ? null
              : ""
            : String(a);
        },
        sortType: b.asUCString,
        type: "string",
      },
      INT: {
        convert: function (b) {
          return b !== undefined && b !== null && b !== ""
            ? typeof b === "number"
              ? parseInt(b, 10)
              : parseInt(String(b).replace(a.stripRe, ""), 10)
            : this.getAllowNull()
            ? null
            : 0;
        },
        sortType: b.none,
        type: "int",
      },
      FLOAT: {
        convert: function (b) {
          return b !== undefined && b !== null && b !== ""
            ? typeof b === "number"
              ? b
              : parseFloat(String(b).replace(a.stripRe, ""), 10)
            : this.getAllowNull()
            ? null
            : 0;
        },
        sortType: b.none,
        type: "float",
      },
      BOOL: {
        convert: function (a) {
          if (
            (a === undefined || a === null || a === "") &&
            this.getAllowNull()
          ) {
            return null;
          }
          return a !== "false" && a !== "0" && !!a;
        },
        sortType: b.none,
        type: "bool",
      },
      DATE: {
        convert: function (c) {
          var d = this.getDateFormat(),
            b;
          if (!c) {
            return null;
          }
          if (Ext.isDate(c)) {
            return c;
          }
          if (d) {
            if (d == "timestamp") {
              return new Date(c * 1000);
            }
            if (d == "time") {
              return new Date(parseInt(c, 10));
            }
            return Ext.Date.parse(c, d);
          }
          b = new Date(Date.parse(c));
          if (isNaN(b)) {
            if (a.iso8601TestRe.test(c)) {
              b = c.split(a.iso8601SplitRe);
              b = new Date(b[0], b[1] - 1, b[2], b[3], b[4], b[5]);
            }
            if (isNaN(b)) {
              b = new Date(Date.parse(c.replace(a.dashesRe, "/")));
            }
          }
          return isNaN(b) ? null : b;
        },
        sortType: b.asDate,
        type: "date",
      },
    });
    Ext.apply(a, { BOOLEAN: this.BOOL, INTEGER: this.INT, NUMBER: this.FLOAT });
  }
);
Ext.define("Ext.data.Field", {
  alias: "data.field",
  isField: !0,
  config: {
    name: null,
    type: "auto",
    convert: undefined,
    dateFormat: null,
    allowNull: !0,
    defaultValue: undefined,
    mapping: null,
    sortType: undefined,
    sortDir: "ASC",
    allowBlank: !0,
    persist: !0,
    encode: null,
    decode: null,
    bubbleEvents: "action",
  },
  constructor: function (a) {
    if (Ext.isString(a)) {
      a = { name: a };
    }
    this.initConfig(a);
  },
  applyType: function (a) {
    var c = Ext.data.Types,
      b = c.AUTO;
    if (a) {
      if (Ext.isString(a)) {
        return c[a.toUpperCase()] || b;
      } else {
        return a;
      }
    }
    return b;
  },
  updateType: function (c, a) {
    var b = this.getConvert();
    if (a && b === a.convert) {
      this.setConvert(c.convert);
    }
  },
  applySortType: function (a) {
    var c = Ext.data.SortTypes,
      d = this.getType(),
      b = d.sortType;
    if (a) {
      if (Ext.isString(a)) {
        return c[a] || b;
      } else {
        return a;
      }
    }
    return b;
  },
  applyConvert: function (a) {
    var b = this.getType().convert;
    if (a && a !== b) {
      this._hasCustomConvert = !0;
      return a;
    } else {
      this._hasCustomConvert = !1;
      return b;
    }
  },
  hasCustomConvert: function () {
    return this._hasCustomConvert;
  },
});
Ext.define("Ext.data.identifier.Simple", {
  alias: "data.identifier.simple",
  statics: { AUTO_ID: 1 },
  config: { prefix: "ext-record-" },
  constructor: function (a) {
    this.initConfig(a);
  },
  generate: function (a) {
    return this._prefix + this.self.AUTO_ID++;
  },
});
Ext.define(
  "Ext.data.ModelManager",
  {
    extend: Ext.AbstractManager,
    alternateClassName: ["Ext.ModelMgr", "Ext.ModelManager"],
    singleton: !0,
    modelNamespace: null,
    registerType: function (d, a) {
      var c = a.prototype,
        b;
      if (c && c.isModel) {
        b = a;
      } else {
        a = { extend: a.extend || "Ext.data.Model", config: a };
        b = Ext.define(d, a);
      }
      this.types[d] = b;
      return b;
    },
    onModelDefined: Ext.emptyFn,
    getModel: function (b) {
      var a = b;
      if (typeof a == "string") {
        a = this.types[a];
        if (!a && this.modelNamespace) {
          a = this.types[this.modelNamespace + "." + a];
        }
      }
      return a;
    },
    create: function (b, a, d) {
      var c = typeof a == "function" ? a : this.types[a || b.name];
      return new c(b, d);
    },
  },
  function () {
    Ext.regModel = function () {
      return this.ModelManager.registerType.apply(this.ModelManager, arguments);
    };
  }
);
Ext.define("Ext.data.Request", {
  config: {
    action: null,
    params: null,
    method: "GET",
    url: null,
    operation: null,
    proxy: null,
    disableCaching: !1,
    headers: {},
    callbackKey: null,
    jsonP: null,
    jsonData: null,
    xmlData: null,
    withCredentials: null,
    username: null,
    password: null,
    callback: null,
    scope: null,
    timeout: 30000,
    records: null,
    directFn: null,
    args: null,
    useDefaultXhrHeader: null,
  },
  constructor: function (a) {
    this.initConfig(a);
  },
});
Ext.define("Ext.data.proxy.Server", {
  extend: Ext.data.proxy.Proxy,
  alias: "proxy.server",
  alternateClassName: "Ext.data.ServerProxy",
  config: {
    url: null,
    pageParam: "page",
    startParam: "start",
    limitParam: "limit",
    groupParam: "group",
    sortParam: "sort",
    filterParam: "filter",
    directionParam: "dir",
    enablePagingParams: !0,
    simpleSortMode: !1,
    noCache: !0,
    cacheString: "_dc",
    timeout: 30000,
    api: {
      create: undefined,
      read: undefined,
      update: undefined,
      destroy: undefined,
    },
    extraParams: {},
  },
  constructor: function (a) {
    a = a || {};
    if (a.nocache !== undefined) {
      a.noCache = a.nocache;
    }
    this.callParent([a]);
  },
  create: function () {
    return this.doRequest.apply(this, arguments);
  },
  read: function () {
    return this.doRequest.apply(this, arguments);
  },
  update: function () {
    return this.doRequest.apply(this, arguments);
  },
  destroy: function () {
    return this.doRequest.apply(this, arguments);
  },
  setExtraParam: function (b, a) {
    this.getExtraParams()[b] = a;
  },
  buildRequest: function (a) {
    var c = this,
      d = Ext.applyIf(a.getParams() || {}, c.getExtraParams() || {}),
      b;
    d = Ext.applyIf(d, c.getParams(a));
    b = Ext.create("Ext.data.Request", {
      params: d,
      action: a.getAction(),
      records: a.getRecords(),
      url: a.getUrl(),
      operation: a,
      proxy: c,
    });
    b.setUrl(c.buildUrl(b));
    a.setRequest(b);
    return b;
  },
  processResponse: function (g, a, f, c, e, j) {
    var b = this,
      i = a.getAction(),
      h,
      d;
    if (g === !0) {
      h = b.getReader();
      try {
        d = h.process(b.getResponseResult(c));
      } catch (k) {
        a.setException(k.message);
        b.fireEvent("exception", b, c, a);
        return;
      }
      if (!a.getModel()) {
        a.setModel(this.getModel());
      }
      if (a.process(i, d, f, c) === !1) {
        b.setException(a, c);
        b.fireEvent("exception", b, c, a);
      }
    } else {
      b.setException(a, c);
      b.fireEvent("exception", this, c, a);
    }
    if (typeof e == "function") {
      e.call(j || b, a);
    }
    b.afterRequest(f, g);
  },
  getResponseResult: function (a) {
    return a;
  },
  setException: function (b, a) {
    if (Ext.isObject(a)) {
      b.setException({ status: a.status, statusText: a.statusText });
    }
  },
  applyEncoding: function (a) {
    return Ext.encode(a);
  },
  encodeSorters: function (b) {
    var c = [],
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      c[a] = { property: b[a].getProperty(), direction: b[a].getDirection() };
    }
    return this.applyEncoding(c);
  },
  encodeFilters: function (b) {
    var c = [],
      d = b.length,
      a = 0;
    for (; a < d; a++) {
      c[a] = { property: b[a].getProperty(), value: b[a].getValue() };
    }
    return this.applyEncoding(c);
  },
  getParams: function (c) {
    var a = this,
      b = {},
      l = c.getGrouper(),
      d = c.getSorters(),
      f = c.getFilters(),
      o = c.getPage(),
      n = c.getStart(),
      m = c.getLimit(),
      q = a.getSimpleSortMode(),
      k = a.getPageParam(),
      j = a.getStartParam(),
      i = a.getLimitParam(),
      h = a.getGroupParam(),
      e = a.getSortParam(),
      g = a.getFilterParam(),
      p = a.getDirectionParam();
    if (a.getEnablePagingParams()) {
      if (k && o !== null) {
        b[k] = o;
      }
      if (j && n !== null) {
        b[j] = n;
      }
      if (i && m !== null) {
        b[i] = m;
      }
    }
    if (h && l) {
      b[h] = a.encodeSorters([l]);
    }
    if (e && d && d.length > 0) {
      if (q) {
        b[e] = d[0].getProperty();
        b[p] = d[0].getDirection();
      } else {
        b[e] = a.encodeSorters(d);
      }
    }
    if (g && f && f.length > 0) {
      b[g] = a.encodeFilters(f);
    }
    return b;
  },
  buildUrl: function (c) {
    var b = this,
      a = b.getUrl(c);
    if (b.getNoCache()) {
      a = Ext.urlAppend(
        a,
        Ext.String.format("{0}={1}", b.getCacheString(), Ext.Date.now())
      );
    }
    return a;
  },
  getUrl: function (a) {
    return a
      ? a.getUrl() || this.getApi()[a.getAction()] || this._url
      : this._url;
  },
  doRequest: function () {},
  afterRequest: Ext.emptyFn,
});
Ext.define("Ext.data.proxy.Ajax", {
  extend: Ext.data.proxy.Server,
  alias: "proxy.ajax",
  alternateClassName: ["Ext.data.HttpProxy", "Ext.data.AjaxProxy"],
  config: {
    withCredentials: !1,
    useDefaultXhrHeader: !0,
    username: null,
    password: null,
    actionMethods: {
      create: "POST",
      read: "GET",
      update: "POST",
      destroy: "POST",
    },
    headers: {},
  },
  doRequest: function (c, d, f) {
    var a = this,
      e = a.getWriter(),
      b = a.buildRequest(c);
    b.setConfig({
      headers: a.getHeaders(),
      timeout: a.getTimeout(),
      method: a.getMethod(b),
      callback: a.createRequestCallback(b, c, d, f),
      scope: a,
      proxy: a,
      useDefaultXhrHeader: a.getUseDefaultXhrHeader(),
    });
    if (c.getWithCredentials() || a.getWithCredentials()) {
      b.setWithCredentials(!0);
      b.setUsername(a.getUsername());
      b.setPassword(a.getPassword());
    }
    b = e.write(b);
    Ext.Ajax.request(b.getCurrentConfig());
    return b;
  },
  getMethod: function (a) {
    return this.getActionMethods()[a.getAction()];
  },
  createRequestCallback: function (c, a, b, d) {
    var e = this;
    return function (h, g, f) {
      e.processResponse(g, a, c, f, b, d);
    };
  },
});
Ext.define("Ext.data.association.Association", {
  alternateClassName: "Ext.data.Association",
  config: {
    ownerModel: null,
    ownerName: undefined,
    associatedModel: null,
    associatedName: undefined,
    associationKey: undefined,
    primaryKey: "id",
    reader: null,
    type: null,
    name: undefined,
  },
  statics: {
    create: function (a) {
      if (!a.isAssociation) {
        if (Ext.isString(a)) {
          a = { type: a };
        }
        a.type = a.type.toLowerCase();
        return Ext.factory(
          a,
          Ext.data.association.Association,
          null,
          "association"
        );
      }
      return a;
    },
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  applyName: function (a) {
    if (!a) {
      a = this.getAssociatedName();
    }
    return a;
  },
  applyOwnerModel: function (b) {
    var a = Ext.data.ModelManager.getModel(b);
    if (a === undefined) {
      Ext.Logger.error(
        "The configured ownerModel was not valid (you tried " + b + ")"
      );
    }
    return a;
  },
  applyOwnerName: function (a) {
    if (!a) {
      a = this.getOwnerModel().modelName;
    }
    a = a.slice(a.lastIndexOf(".") + 1);
    return a;
  },
  updateOwnerModel: function (b, a) {
    if (a) {
      this.setOwnerName(b.modelName);
    }
  },
  applyAssociatedModel: function (b) {
    var a = Ext.data.ModelManager.types[b];
    if (a === undefined) {
      Ext.Logger.error(
        "The configured associatedModel was not valid (you tried " + b + ")"
      );
    }
    return a;
  },
  applyAssociatedName: function (a) {
    if (!a) {
      a = this.getAssociatedModel().modelName;
    }
    a = a.slice(a.lastIndexOf(".") + 1);
    return a;
  },
  updateAssociatedModel: function (b, a) {
    if (a) {
      this.setAssociatedName(b.modelName);
    }
  },
  applyReader: function (a) {
    if (a) {
      if (Ext.isString(a)) {
        a = { type: a };
      }
      if (!a.isReader) {
        Ext.applyIf(a, { type: "json" });
      }
    }
    return Ext.factory(a, Ext.data.Reader, this.getReader(), "reader");
  },
  updateReader: function (a) {
    a.setModel(this.getAssociatedModel());
  },
});
Ext.define(
  "Ext.util.Inflector",
  {
    singleton: !0,
    plurals: [
      [/(quiz)$/i, "$1zes"],
      [/^(ox)$/i, "$1en"],
      [/([m|l])ouse$/i, "$1ice"],
      [/(matr|vert|ind)ix|ex$/i, "$1ices"],
      [/(x|ch|ss|sh)$/i, "$1es"],
      [/([^aeiouy]|qu)y$/i, "$1ies"],
      [/(hive)$/i, "$1s"],
      [/(?:([^f])fe|([lr])f)$/i, "$1$2ves"],
      [/sis$/i, "ses"],
      [/([ti])um$/i, "$1a"],
      [/(buffal|tomat|potat)o$/i, "$1oes"],
      [/(bu)s$/i, "$1ses"],
      [/(alias|status|sex)$/i, "$1es"],
      [/(octop|vir)us$/i, "$1i"],
      [/(ax|test)is$/i, "$1es"],
      [/^person$/, "people"],
      [/^man$/, "men"],
      [/^(child)$/, "$1ren"],
      [/s$/i, "s"],
      [/$/, "s"],
    ],
    singulars: [
      [/(quiz)zes$/i, "$1"],
      [/(matr)ices$/i, "$1ix"],
      [/(vert|ind)ices$/i, "$1ex"],
      [/^(ox)en/i, "$1"],
      [/(alias|status)es$/i, "$1"],
      [/(octop|vir)i$/i, "$1us"],
      [/(cris|ax|test)es$/i, "$1is"],
      [/(shoe)s$/i, "$1"],
      [/(o)es$/i, "$1"],
      [/(bus)es$/i, "$1"],
      [/([m|l])ice$/i, "$1ouse"],
      [/(x|ch|ss|sh)es$/i, "$1"],
      [/(m)ovies$/i, "$1ovie"],
      [/(s)eries$/i, "$1eries"],
      [/([^aeiouy]|qu)ies$/i, "$1y"],
      [/([lr])ves$/i, "$1f"],
      [/(tive)s$/i, "$1"],
      [/(hive)s$/i, "$1"],
      [/([^f])ves$/i, "$1fe"],
      [/(^analy)ses$/i, "$1sis"],
      [
        /((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,
        "$1$2sis",
      ],
      [/([ti])a$/i, "$1um"],
      [/(n)ews$/i, "$1ews"],
      [/people$/i, "person"],
      [/s$/i, ""],
    ],
    uncountable: [
      "sheep",
      "fish",
      "series",
      "species",
      "money",
      "rice",
      "information",
      "equipment",
      "grass",
      "mud",
      "offspring",
      "deer",
      "means",
    ],
    singular: function (b, a) {
      this.singulars.unshift([b, a]);
    },
    plural: function (b, a) {
      this.plurals.unshift([b, a]);
    },
    clearSingulars: function () {
      this.singulars = [];
    },
    clearPlurals: function () {
      this.plurals = [];
    },
    isTransnumeral: function (a) {
      return Ext.Array.indexOf(this.uncountable, a) != -1;
    },
    pluralize: function (a) {
      if (this.isTransnumeral(a)) {
        return a;
      }
      var e = this.plurals,
        f = e.length,
        d,
        b,
        c;
      for (c = 0; c < f; c++) {
        d = e[c];
        b = d[0];
        if (b == a || (b.test && b.test(a))) {
          return a.replace(b, d[1]);
        }
      }
      return a;
    },
    singularize: function (a) {
      if (this.isTransnumeral(a)) {
        return a;
      }
      var e = this.singulars,
        f = e.length,
        d,
        b,
        c;
      for (c = 0; c < f; c++) {
        d = e[c];
        b = d[0];
        if (b == a || (b.test && b.test(a))) {
          return a.replace(b, d[1]);
        }
      }
      return a;
    },
    classify: function (a) {
      return Ext.String.capitalize(this.singularize(a));
    },
    ordinalize: function (a) {
      var c = parseInt(a, 10),
        d = c % 10,
        b = c % 100;
      if (11 <= b && b <= 13) {
        return a + "th";
      } else {
        switch (d) {
          case 1:
            return a + "st";
          case 2:
            return a + "nd";
          case 3:
            return a + "rd";
          default:
            return a + "th";
        }
      }
    },
  },
  function () {
    var b = {
        alumnus: "alumni",
        cactus: "cacti",
        focus: "foci",
        nucleus: "nuclei",
        radius: "radii",
        stimulus: "stimuli",
        ellipsis: "ellipses",
        paralysis: "paralyses",
        oasis: "oases",
        appendix: "appendices",
        index: "indexes",
        beau: "beaux",
        bureau: "bureaux",
        tableau: "tableaux",
        woman: "women",
        child: "children",
        man: "men",
        corpus: "corpora",
        criterion: "criteria",
        curriculum: "curricula",
        genus: "genera",
        memorandum: "memoranda",
        phenomenon: "phenomena",
        foot: "feet",
        goose: "geese",
        tooth: "teeth",
        antenna: "antennae",
        formula: "formulae",
        nebula: "nebulae",
        vertebra: "vertebrae",
        vita: "vitae",
      },
      a;
    for (a in b) {
      this.plural(a, b[a]);
      this.singular(b[a], a);
    }
  }
);
Ext.define("Ext.data.association.HasMany", {
  extend: Ext.data.association.Association,
  alternateClassName: "Ext.data.HasManyAssociation",
  alias: "association.hasmany",
  config: {
    foreignKey: undefined,
    store: undefined,
    storeName: undefined,
    filterProperty: null,
    autoLoad: !1,
    autoSync: !1,
  },
  constructor: function (a) {
    a = a || {};
    if (a.storeConfig) {
      a.store = a.storeConfig;
      delete a.storeConfig;
    }
    this.callParent([a]);
  },
  applyName: function (a) {
    if (!a) {
      a = Ext.util.Inflector.pluralize(this.getAssociatedName().toLowerCase());
    }
    return a;
  },
  applyStoreName: function (a) {
    if (!a) {
      a = this.getName() + "Store";
    }
    return a;
  },
  applyForeignKey: function (a) {
    if (!a) {
      var b = this.getInverseAssociation();
      if (b) {
        a = b.getForeignKey();
      } else {
        a = this.getOwnerName().toLowerCase() + "_id";
      }
    }
    return a;
  },
  applyAssociationKey: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = Ext.util.Inflector.pluralize(b[0].toLowerCase() + b.slice(1));
    }
    return a;
  },
  updateForeignKey: function (d, c) {
    var a = this.getAssociatedModel().getFields(),
      b = a.get(d);
    if (!b) {
      b = new Ext.data.Field({ name: d });
      a.add(b);
      a.isDirty = !0;
    }
    if (c) {
      b = a.get(c);
      if (b) {
        a.remove(b);
        a.isDirty = !0;
      }
    }
  },
  applyStore: function (g) {
    var a = this,
      f = a.getAssociatedModel(),
      b = a.getStoreName(),
      d = a.getForeignKey(),
      e = a.getPrimaryKey(),
      c = a.getFilterProperty(),
      h = a.getAutoLoad(),
      i = a.getAutoSync();
    return function () {
      var j = this,
        n,
        k,
        l,
        m = {},
        o = {
          addrecords: a.onAddRecords,
          removerecords: a.onRemoveRecords,
          scope: a,
        };
      if (j[b] === undefined) {
        if (c) {
          k = { property: c, value: j.get(c), exactMatch: !0 };
        } else {
          k = { property: d, value: j.get(e), exactMatch: !0 };
        }
        m[d] = j.get(e);
        n = Ext.apply({}, g, {
          model: f,
          filters: [k],
          remoteFilter: !0,
          autoSync: i,
          modelDefaults: m,
        });
        l = j[b] = Ext.create("Ext.data.Store", n);
        l.boundTo = j;
        l.onAfter(o);
        if (h) {
          j[b].load();
        }
      }
      return j[b];
    };
  },
  onAddRecords: function (d, b) {
    var f = b.length,
      e = d.boundTo.getId(),
      a,
      c;
    for (a = 0; a < f; a++) {
      c = b[a];
      c.set(this.getForeignKey(), e);
    }
    this.updateInverseInstances(d.boundTo);
  },
  onRemoveRecords: function (e, b) {
    var d = b.length,
      a,
      c;
    for (a = 0; a < d; a++) {
      c = b[a];
      c.set(this.getForeignKey(), null);
    }
  },
  updateStore: function (a) {
    this.getOwnerModel().prototype[this.getName()] = a;
  },
  read: function (d, c, a) {
    var e = d[this.getName()](),
      b = c.read(a).getRecords();
    e.add(b);
  },
  updateInverseInstances: function (b) {
    var c = b[this.getName()](),
      a = this.getInverseAssociation();
    if (a) {
      c.each(function (c) {
        c[a.getInstanceName()] = b;
      });
    }
  },
  getInverseAssociation: function () {
    var a = this.getOwnerModel().modelName;
    return this.getAssociatedModel().associations.findBy(function (b) {
      return (
        b.getType().toLowerCase() === "belongsto" &&
        b.getAssociatedModel().modelName === a
      );
    });
  },
});
Ext.define("Ext.data.association.BelongsTo", {
  extend: Ext.data.association.Association,
  alternateClassName: "Ext.data.BelongsToAssociation",
  alias: "association.belongsto",
  config: {
    foreignKey: undefined,
    getterName: undefined,
    setterName: undefined,
    instanceName: undefined,
  },
  applyForeignKey: function (a) {
    if (!a) {
      a = this.getAssociatedName().toLowerCase() + "_id";
    }
    return a;
  },
  updateForeignKey: function (d, c) {
    var a = this.getOwnerModel().getFields(),
      b = a.get(d);
    if (!b) {
      b = new Ext.data.Field({ name: d });
      a.add(b);
      a.isDirty = !0;
    }
    if (c) {
      b = a.get(c);
      if (b) {
        a.isDirty = !0;
        a.remove(b);
      }
    }
  },
  applyInstanceName: function (a) {
    if (!a) {
      a = this.getAssociatedName() + "BelongsToInstance";
    }
    return a;
  },
  applyAssociationKey: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = b[0].toLowerCase() + b.slice(1);
    }
    return a;
  },
  applyGetterName: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = "get" + b[0].toUpperCase() + b.slice(1);
    }
    return a;
  },
  applySetterName: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = "set" + b[0].toUpperCase() + b.slice(1);
    }
    return a;
  },
  updateGetterName: function (b, a) {
    var c = this.getOwnerModel().prototype;
    if (a) {
      delete c[a];
    }
    if (b) {
      c[b] = this.createGetter();
    }
  },
  updateSetterName: function (c, a) {
    var b = this.getOwnerModel().prototype;
    if (a) {
      delete b[a];
    }
    if (c) {
      b[c] = this.createSetter();
    }
  },
  createSetter: function () {
    var b = this,
      f = b.getForeignKey(),
      e = b.getAssociatedModel(),
      d,
      a,
      c;
    return function (i, j, k) {
      var h = b.getInverseAssociation(),
        g = this;
      if (i && i.isModel) {
        i = i.getId();
      }
      if (Ext.isFunction(j)) {
        j = { callback: j, scope: k || g };
      }
      delete g[b.getInstanceName()];
      d =
        Ext.data.Model.cache[
          Ext.data.Model.generateCacheId(e.modelName, this.get(f))
        ];
      a = Ext.data.Model.cache[Ext.data.Model.generateCacheId(e.modelName, i)];
      g.set(f, i);
      if (h) {
        if (a) {
          if (h.getType().toLowerCase() === "hasmany") {
            c = a[h.getName()]();
            c.add(g);
          } else {
            a[h.getInstanceName()] = g;
          }
        }
        if (d) {
          if (h.getType().toLowerCase() === "hasmany") {
            c = d[h.getName()]();
            c.remove(g);
          } else {
            delete i[h.getInstanceName()];
          }
        }
      }
      if (a) {
        g[b.getInstanceName()] = a;
      }
      if (Ext.isObject(j)) {
        return g.save(j);
      }
      return g;
    };
  },
  createGetter: function () {
    var b = this,
      c = b.getAssociatedModel(),
      d = b.getForeignKey(),
      a = b.getInstanceName();
    return function (b, f) {
      b = b || {};
      var g = this,
        j = g.get(d),
        i,
        e,
        h;
      e = g[a];
      if (!e) {
        e =
          Ext.data.Model.cache[Ext.data.Model.generateCacheId(c.modelName, j)];
        if (e) {
          g[a] = e;
        }
      }
      if (b.reload === !0 || e === undefined) {
        if (typeof b == "function") {
          b = { callback: b, scope: f || g };
        }
        i = b.success;
        b.success = function (c) {
          g[a] = c;
          if (i) {
            i.apply(this, arguments);
          }
        };
        c.load(j, b);
      } else {
        h = [e];
        f = f || g;
        Ext.callback(b, f, h);
        Ext.callback(b.success, f, h);
        Ext.callback(b.failure, f, h);
        Ext.callback(b.callback, f, h);
        return e;
      }
    };
  },
  read: function (c, b, a) {
    c[this.getInstanceName()] = b.read([a]).getRecords()[0];
  },
  getInverseAssociation: function () {
    var b = this.getOwnerModel().modelName,
      a = this.getForeignKey();
    return this.getAssociatedModel().associations.findBy(function (c) {
      var d = c.getType().toLowerCase();
      return (
        (d === "hasmany" || d === "hasone") &&
        c.getAssociatedModel().modelName === b &&
        c.getForeignKey() === a
      );
    });
  },
});
Ext.define("Ext.data.association.HasOne", {
  extend: Ext.data.association.Association,
  alternateClassName: "Ext.data.HasOneAssociation",
  alias: "association.hasone",
  config: {
    foreignKey: undefined,
    getterName: undefined,
    setterName: undefined,
    instanceName: undefined,
  },
  applyForeignKey: function (a) {
    if (!a) {
      var b = this.getInverseAssociation();
      if (b) {
        a = b.getForeignKey();
      } else {
        a = this.getAssociatedName().toLowerCase() + "_id";
      }
    }
    return a;
  },
  updateForeignKey: function (d, c) {
    var a = this.getOwnerModel().getFields(),
      b = a.get(d);
    if (!b) {
      b = new Ext.data.Field({ name: d });
      a.add(b);
      a.isDirty = !0;
    }
    if (c) {
      b = a.get(c);
      if (b) {
        a.remove(b);
        a.isDirty = !0;
      }
    }
  },
  applyInstanceName: function (a) {
    if (!a) {
      a = this.getAssociatedName() + "HasOneInstance";
    }
    return a;
  },
  applyAssociationKey: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = b[0].toLowerCase() + b.slice(1);
    }
    return a;
  },
  applyGetterName: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = "get" + b[0].toUpperCase() + b.slice(1);
    }
    return a;
  },
  applySetterName: function (a) {
    if (!a) {
      var b = this.getAssociatedName();
      a = "set" + b[0].toUpperCase() + b.slice(1);
    }
    return a;
  },
  updateGetterName: function (b, a) {
    var c = this.getOwnerModel().prototype;
    if (a) {
      delete c[a];
    }
    if (b) {
      c[b] = this.createGetter();
    }
  },
  updateSetterName: function (c, a) {
    var b = this.getOwnerModel().prototype;
    if (a) {
      delete b[a];
    }
    if (c) {
      b[c] = this.createSetter();
    }
  },
  createSetter: function () {
    var a = this,
      d = a.getForeignKey(),
      b = a.getInstanceName(),
      c = a.getAssociatedModel();
    return function (a, e, h) {
      var g = Ext.data.Model,
        f;
      if (a && a.isModel) {
        a = a.getId();
      }
      this.set(d, a);
      if (a || a === 0) {
        f = g.cache[g.generateCacheId(c.modelName, a)];
        if (f) {
          this[b] = f;
        }
      } else {
        delete this[b];
      }
      if (Ext.isFunction(e)) {
        e = { callback: e, scope: h || this };
      }
      if (Ext.isObject(e)) {
        return this.save(e);
      }
      return this;
    };
  },
  createGetter: function () {
    var b = this,
      c = b.getAssociatedModel(),
      d = b.getForeignKey(),
      a = b.getInstanceName();
    return function (b, e) {
      b = b || {};
      var f = this,
        j = f.get(d),
        i,
        h,
        g;
      if (b.reload === !0 || f[a] === undefined) {
        if (typeof b == "function") {
          b = { callback: b, scope: e || f };
        }
        i = b.success;
        b.success = function (c) {
          f[a] = c;
          if (i) {
            i.apply(this, arguments);
          }
        };
        c.load(j, b);
      } else {
        h = f[a];
        g = [h];
        e = e || f;
        Ext.callback(b, e, g);
        Ext.callback(b.success, e, g);
        Ext.callback(b.failure, e, g);
        Ext.callback(b.callback, e, g);
        return h;
      }
    };
  },
  read: function (a, e, d) {
    var c = this.getInverseAssociation(),
      b = e.read([d]).getRecords()[0];
    a[this.getSetterName()].call(a, b);
    if (c) {
      b[c.getInstanceName()] = a;
    }
  },
  getInverseAssociation: function () {
    var a = this.getOwnerModel().modelName;
    return this.getAssociatedModel().associations.findBy(function (b) {
      return (
        b.getType().toLowerCase() === "belongsto" &&
        b.getAssociatedModel().modelName === a
      );
    });
  },
});
Ext.define("Ext.data.Error", {
  config: { field: null, message: "" },
  constructor: function (a) {
    this.initConfig(a);
  },
});
Ext.define("Ext.data.Errors", {
  extend: Ext.util.Collection,
  isValid: function () {
    return this.length === 0;
  },
  getByField: function (d) {
    var c = [],
      b,
      a;
    for (a = 0; a < this.length; a++) {
      b = this.items[a];
      if (b.getField() == d) {
        c.push(b);
      }
    }
    return c;
  },
  add: function () {
    var a = arguments.length == 1 ? arguments[0] : arguments[1];
    if (!(a instanceof Ext.data.Error)) {
      a = Ext.create("Ext.data.Error", {
        field: a.field || a.name,
        message: a.error || a.message,
      });
    }
    return this.callParent([a]);
  },
});
Ext.define("Ext.data.Model", {
  alternateClassName: "Ext.data.Record",
  mixins: { observable: Ext.mixin.Observable },
  isModel: !0,
  config: {
    idProperty: "id",
    data: null,
    fields: undefined,
    validations: null,
    associations: null,
    hasMany: null,
    hasOne: null,
    belongsTo: null,
    proxy: null,
    identifier: { type: "simple" },
    clientIdProperty: "clientId",
    isErased: !1,
    useCache: !0,
  },
  staticConfigs: [
    "idProperty",
    "fields",
    "validations",
    "associations",
    "hasMany",
    "hasOne",
    "belongsTo",
    "clientIdProperty",
    "identifier",
    "useCache",
    "proxy",
  ],
  statics: {
    EDIT: "edit",
    REJECT: "reject",
    COMMIT: "commit",
    cache: {},
    generateProxyMethod: function (a) {
      return function () {
        var b = this.prototype;
        return b[a].apply(b, arguments);
      };
    },
    generateCacheId: function (a, c) {
      var b;
      if (a && a.isModel) {
        b = a.modelName;
        if (c === undefined) {
          c = a.getId();
        }
      } else {
        b = a;
      }
      return b.replace(/\./g, "-").toLowerCase() + "-" + c;
    },
  },
  inheritableStatics: {
    load: function (i, a, b) {
      var g = this.getProxy(),
        h = this.getIdProperty(),
        c = null,
        f = {},
        e,
        d;
      b = b || (a && a.scope) || this;
      if (Ext.isFunction(a)) {
        a = { callback: a, scope: b };
      }
      f[h] = i;
      a = Ext.apply({}, a);
      a = Ext.applyIf(a, { action: "read", params: f, model: this });
      d = Ext.create("Ext.data.Operation", a);
      if (!g) {
        Ext.Logger.error(
          "You are trying to load a model that doesn't have a Proxy specified"
        );
      }
      e = function (d) {
        if (d.wasSuccessful()) {
          c = d.getRecords()[0] || null;
          Ext.callback(a.success, b, [c, d]);
        } else {
          Ext.callback(a.failure, b, [c, d]);
        }
        Ext.callback(a.callback, b, [c, d]);
      };
      g.read(d, e, this);
    },
  },
  editing: !1,
  dirty: !1,
  phantom: !1,
  constructor: function (c, b, h, f) {
    var a = this,
      d = null,
      g = a.getUseCache(),
      e = a.getIdProperty();
    c = c || f || {};
    if (b || b === 0) {
      c[e] = a.internalId = b;
    }
    b = c[e];
    if (g && (b || b === 0)) {
      d = Ext.data.Model.cache[Ext.data.Model.generateCacheId(this, b)];
      if (d) {
        d.raw = h || d.raw;
        return d.mergeData(f || c || {});
      }
    }
    a.modified = {};
    a.raw = h || c || {};
    a.stores = [];
    if (f) {
      a.setConvertedData(c);
    } else {
      a.setData(c);
    }
    a.id = a.getIdentifier().generate(a);
    b = a.data[e];
    if (!b && b !== 0) {
      a.data[e] = a.internalId = a.id;
      a.phantom = !0;
      if (this.associations.length) {
        this.handleInlineAssociationData(c);
      }
    } else {
      this.internalId = b;
    }
    if (g) {
      Ext.data.Model.cache[Ext.data.Model.generateCacheId(a)] = a;
    }
    if (this.init && typeof this.init == "function") {
      this.init();
    }
  },
  mergeData: function (f) {
    var b = this,
      g = b.getFields().items,
      j = g.length,
      i = b.modified,
      h = b.data,
      e,
      c,
      d,
      a,
      k;
    for (e = 0; e < j; e++) {
      c = g[e];
      d = c._name;
      a = f[d];
      if (a !== undefined && !i.hasOwnProperty(d)) {
        if (c._convert) {
          a = c._convert(a, b);
        }
        h[d] = a;
      } else {
        if (Ext.isFunction(c._convert)) {
          a = c._convert(a, b);
          h[d] = a;
        }
      }
    }
    if (b.associations.length) {
      b.handleInlineAssociationData(f);
    }
    return this;
  },
  setData: function (c) {
    var a = this,
      i = a.fields.items,
      l = i.length,
      j = Ext.isArray(c),
      k = (a._data = a.data = {}),
      e,
      d,
      f,
      b,
      h,
      g;
    if (!c) {
      return a;
    }
    for (e = 0; e < l; e++) {
      d = i[e];
      f = d._name;
      h = d._convert;
      if (j) {
        b = c[e];
      } else {
        b = c[f];
        if (typeof b == "undefined") {
          b = d._defaultValue;
        }
      }
      if (h) {
        b = d._convert(b, a);
      }
      k[f] = b;
    }
    g = a.getId();
    if (a.associations.length && (g || g === 0)) {
      a.handleInlineAssociationData(c);
    }
    return a;
  },
  handleInlineAssociationData: function (f) {
    var h = this.associations.items,
      i = h.length,
      c,
      a,
      d,
      b,
      e,
      g;
    f = Ext.apply({}, f, this.raw);
    for (c = 0; c < i; c++) {
      a = h[c];
      g = a.getAssociationKey();
      d = f[g];
      if (d) {
        b = a.getReader();
        if (!b) {
          e = a.getAssociatedModel().getProxy();
          if (e) {
            b = e.getReader();
          } else {
            b = new Ext.data.JsonReader({ model: a.getAssociatedModel() });
          }
        }
        a.read(this, b, d);
      }
    }
  },
  setId: function (a) {
    var b = this.getId();
    this.set(this.getIdProperty(), a);
    this.internalId = a;
    if (this.getUseCache()) {
      delete Ext.data.Model.cache[Ext.data.Model.generateCacheId(this, b)];
      Ext.data.Model.cache[Ext.data.Model.generateCacheId(this)] = this;
    }
  },
  getId: function () {
    return this.get(this.getIdProperty());
  },
  setConvertedData: function (a) {
    this._data = this.data = a;
    return this;
  },
  get: function (a) {
    return this.data[a];
  },
  set: function (b, g) {
    var a = this,
      n = a.fields.map,
      d = a.modified,
      i = !a.editing,
      f = 0,
      h = [],
      c,
      e,
      k,
      l,
      j,
      m;
    if (arguments.length == 1) {
      for (e in b) {
        if (b.hasOwnProperty(e)) {
          c = n[e];
          if (c && c.hasCustomConvert()) {
            h.push(e);
            continue;
          }
          if (!f && i) {
            a.beginEdit();
          }
          ++f;
          a.set(e, b[e]);
        }
      }
      j = h.length;
      if (j) {
        if (!f && i) {
          a.beginEdit();
        }
        f += j;
        for (k = 0; k < j; k++) {
          c = h[k];
          a.set(c, b[c]);
        }
      }
      if (i && f) {
        a.endEdit(!1, h);
      }
    } else {
      if (d) {
        c = n[b];
        m = c && c.getConvert();
        if (m) {
          g = m.call(c, g, a);
        }
        l = a.data[b];
        a.data[b] = g;
        if (c && !a.isEqual(l, g)) {
          if (d.hasOwnProperty(b)) {
            if (a.isEqual(d[b], g)) {
              delete d[b];
              a.dirty = !1;
              for (e in d) {
                if (d.hasOwnProperty(e)) {
                  a.dirty = !0;
                  break;
                }
              }
            }
          } else {
            a.dirty = !0;
            d[b] = l;
          }
        }
        if (i) {
          a.afterEdit([b], d);
        }
      }
    }
  },
  isEqual: function (a, b) {
    if (Ext.isDate(a) && Ext.isDate(b)) {
      return a.getTime() === b.getTime();
    }
    return a === b;
  },
  beginEdit: function () {
    var a = this;
    if (!a.editing) {
      a.editing = !0;
      a.dirtySave = a.dirty;
      a.dataSave = Ext.apply({}, a.data);
      a.modifiedSave = Ext.apply({}, a.modified);
    }
  },
  cancelEdit: function () {
    var a = this;
    if (a.editing) {
      a.editing = !1;
      a.modified = a.modifiedSave;
      a.data = a.dataSave;
      a.dirty = a.dirtySave;
      delete a.modifiedSave;
      delete a.dataSave;
      delete a.dirtySave;
    }
  },
  endEdit: function (c, b) {
    var a = this;
    if (a.editing) {
      a.editing = !1;
      if (c !== !0 && a.changedWhileEditing()) {
        a.afterEdit(b || Ext.Object.getKeys(this.modified), this.modified);
      }
      delete a.modifiedSave;
      delete a.dataSave;
      delete a.dirtySave;
    }
  },
  changedWhileEditing: function () {
    var c = this,
      d = c.dataSave,
      b = c.data,
      a;
    for (a in b) {
      if (b.hasOwnProperty(a)) {
        if (!c.isEqual(b[a], d[a])) {
          return !0;
        }
      }
    }
    return !1;
  },
  getChanges: function () {
    var b = this.modified,
      c = {},
      a;
    for (a in b) {
      if (b.hasOwnProperty(a)) {
        c[a] = this.get(a);
      }
    }
    return c;
  },
  isModified: function (a) {
    return this.modified.hasOwnProperty(a);
  },
  save: function (a, c) {
    var b = this,
      f = b.phantom ? "create" : "update",
      g = b.getProxy(),
      d,
      e;
    if (!g) {
      Ext.Logger.error(
        "You are trying to save a model instance that doesn't have a Proxy specified"
      );
    }
    a = a || {};
    c = c || b;
    if (Ext.isFunction(a)) {
      a = { callback: a, scope: c };
    }
    Ext.applyIf(a, { records: [b], action: f, model: b.self });
    d = Ext.create("Ext.data.Operation", a);
    e = function (d) {
      if (d.wasSuccessful()) {
        Ext.callback(a.success, c, [b, d]);
      } else {
        Ext.callback(a.failure, c, [b, d]);
      }
      Ext.callback(a.callback, c, [b, d]);
    };
    g[f](d, e, b);
    return b;
  },
  erase: function (a, c) {
    var b = this,
      f = this.getProxy(),
      d,
      e;
    if (!f) {
      Ext.Logger.error(
        "You are trying to erase a model instance that doesn't have a Proxy specified"
      );
    }
    a = a || {};
    c = c || b;
    if (Ext.isFunction(a)) {
      a = { callback: a, scope: c };
    }
    Ext.applyIf(a, { records: [b], action: "destroy", model: this.self });
    d = Ext.create("Ext.data.Operation", a);
    e = function (d) {
      if (d.wasSuccessful()) {
        Ext.callback(a.success, c, [b, d]);
      } else {
        Ext.callback(a.failure, c, [b, d]);
      }
      Ext.callback(a.callback, c, [b, d]);
    };
    f.destroy(d, e, b);
    return b;
  },
  reject: function (d) {
    var a = this,
      c = a.modified,
      b;
    for (b in c) {
      if (c.hasOwnProperty(b)) {
        if (typeof c[b] != "function") {
          a.data[b] = c[b];
        }
      }
    }
    a.dirty = !1;
    a.editing = !1;
    a.modified = {};
    if (d !== !0) {
      a.afterReject();
    }
  },
  commit: function (c) {
    var a = this,
      b = this.modified;
    a.phantom = a.dirty = a.editing = !1;
    a.modified = {};
    if (c !== !0) {
      a.afterCommit(b);
    }
  },
  afterEdit: function (a, b) {
    this.notifyStores("afterEdit", a, b);
  },
  afterReject: function () {
    this.notifyStores("afterReject");
  },
  afterCommit: function (a) {
    this.notifyStores("afterCommit", Ext.Object.getKeys(a || {}), a);
  },
  notifyStores: function (e) {
    var d = Ext.Array.clone(arguments),
      c = this.stores;
    if (Ext.isArray(c)) {
      var f = c.length,
        b,
        a;
      d[0] = this;
      for (b = 0; b < f; ++b) {
        a = c[b];
        if (a !== undefined && typeof a[e] == "function") {
          a[e].apply(a, d);
        }
      }
    }
  },
  copy: function (e) {
    var a = this,
      b = a.getIdProperty(),
      d = Ext.apply({}, a.raw),
      c = Ext.apply({}, a.data);
    delete d[b];
    delete c[b];
    return new a.self(null, e, d, c);
  },
  getData: function (b) {
    var a = this.data;
    if (b === !0) {
      Ext.apply(a, this.getAssociatedData());
    }
    return a;
  },
  getAssociatedData: function () {
    return this.prepareAssociatedData(this, [], null);
  },
  prepareAssociatedData: function (p, e, l) {
    var r = p.associations.items,
      s = r.length,
      c = {},
      j = [],
      k,
      d,
      o,
      a,
      q,
      h,
      f,
      n,
      g,
      i,
      m,
      b;
    for (n = 0; n < s; n++) {
      h = r[n];
      d = h.getName();
      i = h.getType();
      m = !0;
      if (l) {
        m = i == l;
      }
      if (m && i.toLowerCase() == "hasmany") {
        k = p[h.getStoreName()];
        c[d] = [];
        if (k && k.getCount() > 0) {
          o = k.data.items;
          q = o.length;
          j.length = 0;
          for (g = 0; g < q; g++) {
            a = o[g];
            f = a.id;
            if (Ext.Array.indexOf(e, f) == -1) {
              e.push(f);
              c[d][g] = a.getData();
              j.push({
                associationName: d,
                j: g,
                associatedRecord: a,
                ids: e,
                associationType: l,
              });
            }
          }
          while (j.length > 0) {
            b = j.shift();
            Ext.apply(
              c[b.associationName][b.j],
              this.prepareAssociatedData(
                b.associatedRecord,
                b.ids,
                b.associationType
              )
            );
          }
        }
      } else {
        if (
          m &&
          (i.toLowerCase() == "belongsto" || i.toLowerCase() == "hasone")
        ) {
          a = p[h.getInstanceName()];
          if (a !== undefined) {
            f = a.id;
            if (Ext.Array.indexOf(e, f) === -1) {
              e.push(f);
              c[d] = a.getData();
              Ext.apply(c[d], this.prepareAssociatedData(a, e, l));
            }
          }
        }
      }
    }
    return c;
  },
  join: function (a) {
    Ext.Array.include(this.stores, a);
  },
  unjoin: function (a) {
    Ext.Array.remove(this.stores, a);
  },
  setDirty: function () {
    var a = this,
      b;
    a.dirty = !0;
    a.fields.each(function (c) {
      if (c.getPersist()) {
        b = c.getName();
        a.modified[b] = a.get(b);
      }
    });
  },
  validate: function () {
    var g = Ext.create("Ext.data.Errors"),
      c = this.getValidations().items,
      f = Ext.data.Validations,
      h,
      a,
      d,
      i,
      e,
      b;
    if (c) {
      h = c.length;
      for (b = 0; b < h; b++) {
        a = c[b];
        d = a.field || a.name;
        e = a.type;
        i = f[e](a, this.get(d));
        if (!i) {
          g.add(
            Ext.create("Ext.data.Error", {
              field: d,
              message: a.message || f.getMessage(e),
            })
          );
        }
      }
    }
    return g;
  },
  isValid: function () {
    return this.validate().isValid();
  },
  toUrl: function () {
    var a = this.$className.split("."),
      b = a[a.length - 1].toLowerCase();
    return b + "/" + this.getId();
  },
  destroy: function () {
    var a = this;
    a.notifyStores("afterErase", a);
    if (a.getUseCache()) {
      delete Ext.data.Model.cache[Ext.data.Model.generateCacheId(a)];
    }
    a.raw = a.stores = a.modified = null;
    a.callParent(arguments);
  },
  applyProxy: function (b, a) {
    return Ext.factory(b, Ext.data.Proxy, a, "proxy");
  },
  updateProxy: function (a) {
    if (a) {
      a.setModel(this.self);
    }
  },
  applyAssociations: function (a) {
    if (a) {
      this.addAssociations(a, "hasMany");
    }
  },
  applyBelongsTo: function (a) {
    if (a) {
      this.addAssociations(a, "belongsTo");
    }
  },
  applyHasMany: function (a) {
    if (a) {
      this.addAssociations(a, "hasMany");
    }
  },
  applyHasOne: function (a) {
    if (a) {
      this.addAssociations(a, "hasOne");
    }
  },
  addAssociations: function (b, g) {
    var e,
      c,
      a,
      h = this.self.modelName,
      f = this.self.associations,
      d;
    b = Ext.Array.from(b);
    for (c = 0, e = b.length; c < e; c++) {
      a = b[c];
      if (!Ext.isObject(a)) {
        a = { model: a };
      }
      Ext.applyIf(a, { type: g, ownerModel: h, associatedModel: a.model });
      delete a.model;
      d = Ext.Function.bind(function (a) {
        f.add(Ext.data.association.Association.create(this));
      }, a);
      Ext.ClassManager.onCreated(
        d,
        this,
        typeof a.associatedModel === "string"
          ? a.associatedModel
          : Ext.getClassName(a.associatedModel)
      );
    }
  },
  applyValidations: function (a) {
    if (a) {
      if (!Ext.isArray(a)) {
        a = [a];
      }
      this.addValidations(a);
    }
  },
  addValidations: function (a) {
    this.self.validations.addAll(a);
  },
  applyFields: function (a) {
    var b = this.superclass.fields;
    if (b) {
      a = b.items.concat(a || []);
    }
    return a || [];
  },
  updateFields: function (e) {
    var i = e.length,
      f = this,
      h = f.self.prototype,
      g = this.getIdProperty(),
      d,
      a,
      c,
      b;
    a = f._fields = f.fields = new Ext.util.Collection(h.getFieldName);
    for (b = 0; b < i; b++) {
      c = e[b];
      if (!c.isField) {
        c = new Ext.data.Field(e[b]);
      }
      a.add(c);
    }
    d = a.get(g);
    if (!d) {
      a.add(new Ext.data.Field(g));
    } else {
      d.setType("auto");
    }
    a.addSorter(h.sortConvertFields);
  },
  applyIdentifier: function (a) {
    if (typeof a === "string") {
      a = { type: a };
    }
    return Ext.factory(
      a,
      Ext.data.identifier.Simple,
      this.getIdentifier(),
      "data.identifier"
    );
  },
  getFieldName: function (a) {
    return a.getName();
  },
  sortConvertFields: function (c, d) {
    var a = c.hasCustomConvert(),
      b = d.hasCustomConvert();
    if (a && !b) {
      return 1;
    }
    if (!a && b) {
      return -1;
    }
    return 0;
  },
  onClassExtended: function (j, c, a) {
    var f = a.onBeforeCreated,
      b = this,
      e = b.prototype,
      g = Ext.Class.configNameCache,
      d = e.staticConfigs.concat(c.staticConfigs || []),
      i = e.config,
      h = c.config || {},
      k;
    c.config = h;
    a.onBeforeCreated = function (e, w) {
      var i = [],
        n = e.prototype,
        r = {},
        h = n.config,
        u = d.length,
        q = ["set", "get"],
        v = q.length,
        p = h.associations || [],
        o = Ext.getClassName(e),
        s,
        l,
        k,
        m,
        t;
      for (k = 0; k < u; k++) {
        s = d[k];
        for (m = 0; m < v; m++) {
          l = g[s][q[m]];
          if (l in n) {
            r[l] = b.generateProxyMethod(l);
          }
        }
      }
      e.addStatics(r);
      e.modelName = o;
      n.modelName = o;
      if (h.belongsTo) {
        i.push("association.belongsto");
      }
      if (h.hasMany) {
        i.push("association.hasmany");
      }
      if (h.hasOne) {
        i.push("association.hasone");
      }
      for (k = 0, t = p.length; k < t; ++k) {
        i.push("association." + p[k].type.toLowerCase());
      }
      if (h.identifier) {
        if (typeof h.identifier === "string") {
          i.push("data.identifier." + h.identifier);
        } else {
          if (typeof h.identifier.type === "string") {
            i.push("data.identifier." + h.identifier.type);
          }
        }
      }
      if (h.proxy) {
        if (typeof h.proxy === "string") {
          i.push("proxy." + h.proxy);
        } else {
          if (typeof h.proxy.type === "string") {
            i.push("proxy." + h.proxy.type);
          }
        }
      }
      if (h.validations) {
        i.push("Ext.data.Validations");
      }
      Ext.require(i, function () {
        Ext.Function.interceptBefore(a, "onCreated", function () {
          Ext.data.ModelManager.registerType(o, e);
          var b = e.prototype.superclass;
          e.prototype.associations =
            e.associations =
            e.prototype._associations =
              b && b.associations
                ? b.associations.clone()
                : new Ext.util.Collection(function (b) {
                    return b.getName();
                  });
          e.prototype.validations =
            e.validations =
            e.prototype._validations =
              b && b.validations
                ? b.validations.clone()
                : new Ext.util.Collection(function (b) {
                    return b.field
                      ? b.field + "-" + b.type
                      : b.name + "-" + b.type;
                  });
          e.prototype = Ext.Object.chain(e.prototype);
          e.prototype.initConfig.call(e.prototype, h);
          delete e.prototype.initConfig;
        });
        f.call(b, e, w, a);
      });
    };
  },
});
Ext.define("MEM.overrides.data.Model", {
  override: "Ext.data.Model",
  isModified: function (a) {
    if (!this.modified) {
      return !1;
    }
    return this.callOverridden(arguments);
  },
});
Ext.define("Ext.util.Grouper", {
  extend: Ext.util.Sorter,
  isGrouper: !0,
  config: {
    groupFn: null,
    sortProperty: null,
    sorterFn: function (d, e) {
      var f = this.getSortProperty(),
        c,
        a,
        b,
        g;
      c = this.getGroupFn();
      a = c.call(this, d);
      b = c.call(this, e);
      if (f) {
        if (a !== b) {
          return this.defaultSortFn.call(this, d, e);
        } else {
          return 0;
        }
      }
      return a > b ? 1 : a < b ? -1 : 0;
    },
  },
  defaultSortFn: function (d, e) {
    var g = this,
      c = g._transform,
      f = g._root,
      a,
      b,
      h = g._sortProperty;
    if (f !== null) {
      d = d[f];
      e = e[f];
    }
    a = d[h];
    b = e[h];
    if (c) {
      a = c(a);
      b = c(b);
    }
    return a > b ? 1 : a < b ? -1 : 0;
  },
  updateProperty: function (a) {
    this.setGroupFn(this.standardGroupFn);
  },
  standardGroupFn: function (b) {
    var c = this.getRoot(),
      d = this.getProperty(),
      a = b;
    if (c) {
      a = b[c];
    }
    return a[d];
  },
  getGroupString: function (b) {
    var a = this.getGroupFn().call(this, b);
    return a !== null && typeof a != "undefined" ? a.toString() : "";
  },
});
Ext.define("Ext.data.Store", {
  alias: "store.store",
  extend: Ext.Evented,
  statics: {
    create: function (a) {
      if (!a.isStore) {
        if (!a.type) {
          a.type = "store";
        }
        a = Ext.createByAlias("store." + a.type, a);
      }
      return a;
    },
  },
  isStore: !0,
  config: {
    storeId: undefined,
    data: null,
    autoLoad: null,
    autoSync: !1,
    model: undefined,
    proxy: undefined,
    fields: null,
    remoteSort: !1,
    remoteFilter: !1,
    remoteGroup: !1,
    filters: null,
    sorters: null,
    grouper: null,
    groupField: null,
    groupDir: null,
    getGroupString: null,
    pageSize: 25,
    totalCount: null,
    clearOnPageLoad: !0,
    params: {},
    modelDefaults: {},
    autoDestroy: !1,
    syncRemovedRecords: !0,
    destroyRemovedRecords: !0,
    buffered: !1,
    plugins: null,
  },
  currentPage: 1,
  constructor: function (a) {
    a = a || {};
    this.data = this._data = this.createDataCollection();
    this.data.setSortRoot("data");
    this.data.setFilterRoot("data");
    this.removed = [];
    if (a.id && !a.storeId) {
      a.storeId = a.id;
      delete a.id;
    }
    this.initConfig(a);
    this.callParent(arguments);
  },
  applyPlugins: function (a) {
    var d, b, c;
    if (!a) {
      return a;
    }
    a = [].concat(a);
    for (b = 0, d = a.length; b < d; b++) {
      c = a[b];
      a[b] = Ext.factory(c, "Ext.plugin.Plugin", null, "plugin");
    }
    return a;
  },
  updatePlugins: function (c, d) {
    var b, a;
    if (c) {
      for (a = 0, b = c.length; a < b; a++) {
        c[a].init(this);
      }
    }
    if (d) {
      for (a = 0, b = d.length; a < b; a++) {
        Ext.destroy(d[a]);
      }
    }
  },
  createDataCollection: function () {
    return new Ext.util.Collection(function (a) {
      return a.getId();
    });
  },
  applyStoreId: function (a) {
    if (a === undefined || a === null) {
      a = this.getUniqueId();
    }
    return a;
  },
  updateStoreId: function (b, a) {
    if (a) {
      Ext.data.StoreManager.unregister(this);
    }
    if (b) {
      Ext.data.StoreManager.register(this);
    }
  },
  applyModel: function (a) {
    if (typeof a == "string") {
      var d = Ext.data.ModelManager.getModel(a);
      if (!d) {
        Ext.Logger.error('Model with name "' + a + '" does not exist.');
      }
      a = d;
    }
    if (a && !a.prototype.isModel && Ext.isObject(a)) {
      a = Ext.data.ModelManager.registerType(a.storeId || a.id || Ext.id(), a);
    }
    if (!a) {
      var b = this.getFields(),
        c = this.config.data;
      if (!b && c && c.length) {
        b = Ext.Object.getKeys(c[0]);
      }
      if (b) {
        a = Ext.define(
          "Ext.data.Store.ImplicitModel-" + (this.getStoreId() || Ext.id()),
          {
            extend: "Ext.data.Model",
            config: { fields: b, useCache: !1, proxy: this.getProxy() },
          }
        );
        this.implicitModel = !0;
      }
    }
    if (!a && this.getProxy()) {
      a = this.getProxy().getModel();
    }
    return a;
  },
  updateModel: function (b) {
    var a = this.getProxy();
    if (a && !a.getModel()) {
      a.setModel(b);
    }
  },
  applyProxy: function (a, b) {
    a = Ext.factory(a, Ext.data.Proxy, b, "proxy");
    if (!a && this.getModel()) {
      a = this.getModel().getProxy();
    }
    if (!a) {
      a = new Ext.data.proxy.Memory({ model: this.getModel() });
    }
    if (a.isMemoryProxy) {
      this.setSyncRemovedRecords(!1);
    }
    return a;
  },
  updateProxy: function (a, b) {
    if (a) {
      if (!a.getModel()) {
        a.setModel(this.getModel());
      }
      a.on("metachange", "onMetaChange", this);
    }
    if (b) {
      a.un("metachange", "onMetaChange", this);
    }
  },
  applyData: function (c) {
    var a = this,
      b;
    if (c) {
      b = a.getProxy();
      if (b instanceof Ext.data.proxy.Memory) {
        b.setData(c);
        a.load();
        return;
      } else {
        a.removeAll(!0);
        a.fireEvent("clear", a);
        a.suspendEvents();
        a.add(c);
        a.resumeEvents();
        a.dataLoaded = !0;
      }
    } else {
      a.removeAll(!0);
      a.fireEvent("clear", a);
    }
    a.fireEvent("refresh", a, a.data);
  },
  clearData: function () {
    this.setData(null);
  },
  addData: function (d) {
    var c = this.getProxy().getReader(),
      a = c.read(d),
      b = a.getRecords();
    this.add(b);
  },
  updateAutoLoad: function (a) {
    var b = this.getProxy();
    if (a && b && !b.isMemoryProxy) {
      this.load(Ext.isObject(a) ? a : null);
    }
  },
  isAutoLoading: function () {
    var a = this.getProxy();
    return this.getAutoLoad() || (a && a.isMemoryProxy) || this.dataLoaded;
  },
  updateGroupField: function (a) {
    var b = this.getGrouper();
    if (a) {
      if (!b) {
        this.setGrouper({
          property: a,
          direction: this.getGroupDir() || "ASC",
        });
      } else {
        b.setProperty(a);
      }
    } else {
      if (b) {
        this.setGrouper(null);
      }
    }
  },
  updateGroupDir: function (b) {
    var a = this.getGrouper();
    if (a) {
      a.setDirection(b);
    }
  },
  applyGetGroupString: function (a) {
    var b = this.getGrouper();
    if (a) {
      if (b) {
        b.setGroupFn(a);
      } else {
        this.setGrouper({ groupFn: a });
      }
    } else {
      if (b) {
        this.setGrouper(null);
      }
    }
  },
  applyGrouper: function (a) {
    if (typeof a == "string") {
      a = { property: a };
    } else {
      if (typeof a == "function") {
        a = { groupFn: a };
      }
    }
    a = Ext.factory(a, Ext.util.Grouper);
    return a;
  },
  updateGrouper: function (c, b) {
    var a = this.data;
    if (b) {
      a.removeSorter(b);
      if (!c) {
        a.getSorters().removeSorter("isGrouper");
      }
    }
    if (c) {
      a.insertSorter(0, c);
      if (!b) {
        a.getSorters().addSorter({
          direction: "DESC",
          property: "isGrouper",
          transform: function (a) {
            return a === !0 ? 1 : -1;
          },
        });
      }
    }
    if (b) {
      this.fireEvent("refresh", this, a);
    }
  },
  isGrouped: function () {
    return !!this.getGrouper();
  },
  updateSorters: function (d) {
    var b = this.getGrouper(),
      a = this.data,
      c = a.getAutoSort();
    a.setAutoSort(!1);
    a.setSorters(d);
    if (b) {
      a.insertSorter(0, b);
    }
    this.updateSortTypes();
    a.setAutoSort(c);
  },
  updateSortTypes: function () {
    var b = this.getModel(),
      a = b && b.getFields(),
      c = this.data;
    if (a) {
      c.getSorters().each(function (b) {
        var d = b.getProperty(),
          c;
        if (!b.isGrouper && d && !b.getTransform()) {
          c = a.get(d);
          if (c) {
            b.setTransform(c.getSortType());
          }
        }
      });
    }
  },
  updateFilters: function (a) {
    this.data.setFilters(a);
  },
  add: function (a) {
    if (!Ext.isArray(a)) {
      a = Array.prototype.slice.call(arguments);
    }
    return this.insert(this.data.length, a);
  },
  insert: function (g, a) {
    if (!Ext.isArray(a)) {
      a = Array.prototype.slice.call(arguments, 1);
    }
    var d = this,
      f = !1,
      h = this.data,
      k = a.length,
      j = this.getModel(),
      i = d.getModelDefaults(),
      c = !1,
      e,
      b;
    a = a.slice();
    for (e = 0; e < k; e++) {
      b = a[e];
      if (!b.isModel) {
        b = new j(b);
      } else {
        if (this.removed.indexOf(b) != -1) {
          Ext.Array.remove(this.removed, b);
        }
      }
      b.set(i);
      b.join(d);
      a[e] = b;
      f = f || b.phantom === !0;
    }
    if (a.length === 1) {
      c = h.insert(g, a[0]);
      if (c) {
        c = [c];
      }
    } else {
      c = h.insertAll(g, a);
    }
    if (c) {
      d.fireEvent("addrecords", d, c);
    }
    if (d.getAutoSync() && f) {
      d.sync();
    }
    return a;
  },
  remove: function (c) {
    if (c.isModel) {
      c = [c];
    }
    var b = this,
      f = !1,
      g = 0,
      l = this.getAutoSync(),
      h = b.getSyncRemovedRecords(),
      k = this.getDestroyRemovedRecords(),
      n = c.length,
      i = [],
      j = [],
      d,
      m = b.data.items,
      a,
      e;
    for (; g < n; g++) {
      a = c[g];
      if (b.data.contains(a)) {
        d = a.phantom === !0;
        e = m.indexOf(a);
        if (e !== -1) {
          j.push(a);
          i.push(e);
        }
        a.unjoin(b);
        b.data.remove(a);
        if (k && !h && !a.stores.length) {
          a.destroy();
        } else {
          if (!d && h) {
            b.removed.push(a);
          }
        }
        f = f || !d;
      }
    }
    b.fireEvent("removerecords", b, j, i);
    if (l && f) {
      b.sync();
    }
  },
  removeAt: function (b) {
    var a = this.getAt(b);
    if (a) {
      this.remove(a);
    }
  },
  removeAll: function (a) {
    if (a !== !0 && this.eventFiringSuspended !== !0) {
      this.fireAction("clear", [this], "doRemoveAll");
    } else {
      this.doRemoveAll.call(this, !0);
    }
  },
  doRemoveAll: function (g) {
    var a = this,
      f = this.getDestroyRemovedRecords(),
      d = this.getSyncRemovedRecords(),
      e = a.data.all.slice(),
      h = e.length,
      c,
      b;
    for (c = 0; c < h; c++) {
      b = e[c];
      b.unjoin(a);
      if (f && !d && !b.stores.length) {
        b.destroy();
      } else {
        if (b.phantom !== !0 && d) {
          a.removed.push(b);
        }
      }
    }
    a.data.clear();
    if (g !== !0) {
      a.fireEvent("refresh", a, a.data);
    }
    if (a.getAutoSync()) {
      this.sync();
    }
  },
  each: function (b, a) {
    this.data.each(b, a);
  },
  getCount: function () {
    return this.data.items.length || 0;
  },
  getAllCount: function () {
    return this.data.all.length || 0;
  },
  getAt: function (a) {
    return this.data.getAt(a);
  },
  getRange: function (a, b) {
    return this.data.getRange(a, b);
  },
  getById: function (a) {
    return this.data.findBy(function (b) {
      return b.getId() == a;
    });
  },
  indexOf: function (a) {
    return this.data.indexOf(a);
  },
  indexOfId: function (a) {
    return this.data.indexOfKey(a);
  },
  afterEdit: function (a, h, g) {
    var b = this,
      e = b.data,
      f = g[a.getIdProperty()] || a.getId(),
      c = e.keys.indexOf(f),
      d;
    if (c === -1 && e.map[f] === undefined) {
      return;
    }
    if (b.getAutoSync()) {
      b.sync();
    }
    if (f !== a.getId()) {
      e.replace(f, a);
    } else {
      e.replace(a);
    }
    d = e.indexOf(a);
    if (c === -1 && d !== -1) {
      b.fireEvent("addrecords", b, [a]);
    } else {
      if (c !== -1 && d === -1) {
        b.fireEvent("removerecords", b, [a], [c]);
      } else {
        if (d !== -1) {
          b.fireEvent("updaterecord", b, a, d, c, h, g);
        }
      }
    }
  },
  afterReject: function (a) {
    var b = this.data.indexOf(a);
    this.fireEvent("updaterecord", this, a, b, b, [], {});
  },
  afterCommit: function (a, h, g) {
    var b = this,
      e = b.data,
      f = g[a.getIdProperty()] || a.getId(),
      c = e.keys.indexOf(f),
      d;
    if (c === -1 && e.map[f] === undefined) {
      return;
    }
    if (f !== a.getId()) {
      e.replace(f, a);
    } else {
      e.replace(a);
    }
    d = e.indexOf(a);
    if (c === -1 && d !== -1) {
      b.fireEvent("addrecords", b, [a]);
    } else {
      if (c !== -1 && d === -1) {
        b.fireEvent("removerecords", b, [a], [c]);
      } else {
        if (d !== -1) {
          b.fireEvent("updaterecord", b, a, d, c, h, g);
        }
      }
    }
  },
  afterErase: function (a) {
    var b = this,
      d = b.data,
      c = d.indexOf(a);
    if (c !== -1) {
      d.remove(a);
      b.fireEvent("removerecords", b, [a], [c]);
    }
  },
  applyRemoteFilter: function (b) {
    var a = this.getProxy();
    return b || (a && a.isSQLProxy === !0);
  },
  applyRemoteSort: function (b) {
    var a = this.getProxy();
    return b || (a && a.isSQLProxy === !0);
  },
  applyRemoteGroup: function (b) {
    var a = this.getProxy();
    return b || (a && a.isSQLProxy === !0);
  },
  updateRemoteFilter: function (a) {
    this.data.setAutoFilter(!a);
  },
  updateRemoteSort: function (a) {
    this.data.setAutoSort(!a);
  },
  sort: function (b, c, e) {
    var a = this.data,
      d = this.getGrouper(),
      f = a.getAutoSort();
    if (b) {
      a.setAutoSort(!1);
      if (typeof e === "string") {
        if (e == "prepend") {
          a.insertSorters(d ? 1 : 0, b, c);
        } else {
          a.addSorters(b, c);
        }
      } else {
        a.setSorters(null);
        if (d) {
          a.addSorters(d);
        }
        a.addSorters(b, c);
      }
      this.updateSortTypes();
      a.setAutoSort(f);
    }
    if (!this.getRemoteSort()) {
      if (!b) {
        this.data.sort();
      }
      this.fireEvent("sort", this, this.data, this.data.getSorters());
      if (a.length) {
        this.fireEvent("refresh", this, this.data);
      }
    }
  },
  filter: function (a, f, e, d) {
    var c = this.data,
      b = null;
    if (a) {
      if (Ext.isFunction(a)) {
        b = { filterFn: a };
      } else {
        if (Ext.isArray(a) || a.isFilter) {
          b = a;
        } else {
          b = { property: a, value: f, anyMatch: e, caseSensitive: d, id: a };
        }
      }
    }
    if (this.getRemoteFilter()) {
      c.addFilters(b);
    } else {
      c.filter(b);
      this.fireEvent("filter", this, c, c.getFilters());
      this.fireEvent("refresh", this, c);
    }
  },
  filterBy: function (d, c) {
    var b = this,
      a = b.data,
      e = a.length;
    a.filter({
      filterFn: function (a) {
        return d.call(c || b, a, a.getId());
      },
    });
    this.fireEvent("filter", this, a, a.getFilters());
    if (a.length !== e) {
      this.fireEvent("refresh", this, a);
    }
  },
  queryBy: function (b, a) {
    return this.data.filterBy(b, a || this);
  },
  clearFilter: function (a) {
    var b = this.data.length;
    if (a) {
      this.suspendEvents();
    }
    this.data.setFilters(null);
    if (a) {
      this.resumeEvents(!0);
    } else {
      if (b !== this.data.length) {
        this.fireEvent("refresh", this, this.data);
      }
    }
  },
  isFiltered: function () {
    return this.data.filtered;
  },
  isSorted: function () {
    return this.data.sorted;
  },
  getSorters: function () {
    var a = this.data.getSorters();
    return a ? a.items : [];
  },
  getFilters: function () {
    var a = this.data.getFilters();
    return a ? a.items : [];
  },
  getGroups: function (f) {
    var g = this.data.items,
      j = g.length,
      i = this.getGrouper(),
      h = [],
      d = {},
      e,
      b,
      a,
      c;
    for (c = 0; c < j; c++) {
      e = g[c];
      b = i.getGroupString(e);
      a = d[b];
      if (a === undefined) {
        a = { name: b, children: [] };
        h.push(a);
        d[b] = a;
      }
      a.children.push(e);
    }
    return f ? d[f] : h;
  },
  getGroupString: function (b) {
    var a = this.getGrouper();
    if (a) {
      return a.getGroupString(b);
    }
    return null;
  },
  find: function (d, g, c, e, a, b) {
    var f = Ext.create("Ext.util.Filter", {
      property: d,
      value: g,
      anyMatch: e,
      caseSensitive: a,
      exactMatch: b,
      root: "data",
    });
    return this.data.findIndexBy(f.getFilterFn(), null, c);
  },
  findRecord: function () {
    var a = this,
      b = a.find.apply(a, arguments);
    return b !== -1 ? a.getAt(b) : null;
  },
  findExact: function (b, c, a) {
    return this.data.findIndexBy(
      function (d) {
        return d.get(b) === c;
      },
      this,
      a
    );
  },
  findBy: function (c, b, a) {
    return this.data.findIndexBy(c, b, a);
  },
  load: function (a, f) {
    var b = this,
      c,
      d = b.currentPage,
      e = b.getPageSize();
    a = a || {};
    if (Ext.isFunction(a)) {
      a = { callback: a, scope: f || this };
    }
    if (b.getRemoteSort()) {
      a.sorters = a.sorters || this.getSorters();
    }
    if (b.getRemoteFilter()) {
      a.filters = a.filters || this.getFilters();
    }
    if (b.getRemoteGroup()) {
      a.grouper = a.grouper || this.getGrouper();
    }
    Ext.applyIf(a, {
      page: d,
      start: (d - 1) * e,
      limit: e,
      addRecords: !1,
      action: "read",
      params: this.getParams(),
      model: this.getModel(),
    });
    c = Ext.create("Ext.data.Operation", a);
    if (b.fireEvent("beforeload", b, c) !== !1) {
      b.loading = !0;
      b.getProxy().read(c, b.onProxyLoad, b);
    }
    return b;
  },
  isLoading: function () {
    return Boolean(this.loading);
  },
  isLoaded: function () {
    return Boolean(this.loaded);
  },
  sync: function (g) {
    var a = this,
      b = {},
      e = a.getNewRecords(),
      f = a.getUpdatedRecords(),
      d = a.getRemovedRecords(),
      c = !1;
    if (e.length > 0) {
      b.create = e;
      c = !0;
    }
    if (f.length > 0) {
      b.update = f;
      c = !0;
    }
    if (d.length > 0) {
      b.destroy = d;
      c = !0;
    }
    if (c && a.fireEvent("beforesync", this, b) !== !1) {
      a.getProxy().batch(
        Ext.merge({ operations: b, listeners: a.getBatchListeners() }, g || {})
      );
    }
    return { added: e, updated: f, removed: d };
  },
  first: function () {
    return this.data.first();
  },
  last: function () {
    return this.data.last();
  },
  sum: function (d) {
    var c = 0,
      a = 0,
      b = this.data.items,
      e = b.length;
    for (; a < e; ++a) {
      c += b[a].get(d);
    }
    return c;
  },
  min: function (e) {
    var d = 1,
      b = this.data.items,
      f = b.length,
      c,
      a;
    if (f > 0) {
      a = b[0].get(e);
    }
    for (; d < f; ++d) {
      c = b[d].get(e);
      if (c < a) {
        a = c;
      }
    }
    return a;
  },
  max: function (e) {
    var d = 1,
      b = this.data.items,
      f = b.length,
      c,
      a;
    if (f > 0) {
      a = b[0].get(e);
    }
    for (; d < f; ++d) {
      c = b[d].get(e);
      if (c > a) {
        a = c;
      }
    }
    return a;
  },
  average: function (e) {
    var b = 0,
      a = this.data.items,
      c = a.length,
      d = 0;
    if (a.length > 0) {
      for (; b < c; ++b) {
        d += a[b].get(e);
      }
      return d / c;
    }
    return 0;
  },
  getBatchListeners: function () {
    return {
      scope: this,
      exception: this.onBatchException,
      complete: this.onBatchComplete,
    };
  },
  onBatchComplete: function (d) {
    var e = this,
      b = d.operations,
      c = b.length,
      a;
    for (a = 0; a < c; a++) {
      e.onProxyWrite(b[a]);
    }
  },
  onBatchException: function (b, a) {},
  onProxyLoad: function (a) {
    var b = this,
      e = a.getRecords(),
      d = a.getResultSet(),
      c = a.wasSuccessful();
    if (d) {
      b.setTotalCount(d.getTotal());
    }
    if (c) {
      this.fireAction("datarefresh", [this, this.data, a], "doDataRefresh");
    }
    b.loaded = !0;
    b.loading = !1;
    b.fireEvent("load", this, e, c, a);
    Ext.callback(a.getCallback(), a.getScope() || b, [e, a, c]);
  },
  doDataRefresh: function (l, e, g) {
    var c = g.getRecords(),
      a = this,
      i = a.getDestroyRemovedRecords(),
      f = e.all.slice(),
      k = f.length,
      j = c.length,
      h = {},
      b,
      d;
    if (g.getAddRecords() !== !0) {
      for (b = 0; b < j; b++) {
        h[c[b].id] = !0;
      }
      for (b = 0; b < k; b++) {
        d = f[b];
        d.unjoin(a);
        if (h[d.id] !== !0 && i && !d.stores.length) {
          d.destroy();
        }
      }
      e.clear();
      a.fireEvent("clear", a);
    }
    if (c && c.length) {
      a.suspendEvents();
      a.add(c);
      a.resumeEvents(!0);
    }
    a.fireEvent("refresh", a, e);
  },
  onProxyWrite: function (a) {
    var b = this,
      c = a.wasSuccessful(),
      d = a.getRecords();
    switch (a.getAction()) {
      case "create":
        b.onCreateRecords(d, a, c);
        break;
      case "update":
        b.onUpdateRecords(d, a, c);
        break;
      case "destroy":
        b.onDestroyRecords(d, a, c);
        break;
    }
    if (c) {
      b.fireEvent("write", b, a);
    }
    Ext.callback(a.getCallback(), a.getScope() || b, [d, a, c]);
  },
  onCreateRecords: function (b, a, c) {},
  onUpdateRecords: function (b, a, c) {},
  onDestroyRecords: function (b, a, c) {
    this.removed = [];
  },
  onMetaChange: function (b) {
    var a = this.getProxy().getModel();
    if (!this.getModel() && a) {
      this.setModel(a);
    }
    this.fireEvent("metachange", this, b);
  },
  getNewRecords: function () {
    return this.data.filterBy(function (a) {
      return a.phantom === !0 && a.isValid();
    }).items;
  },
  getUpdatedRecords: function () {
    return this.data.filterBy(function (a) {
      return a.dirty === !0 && a.phantom !== !0 && a.isValid();
    }).items;
  },
  getRemovedRecords: function () {
    return this.removed;
  },
  loadPage: function (c, a, f) {
    if (typeof a === "function") {
      a = { callback: a, scope: f || this };
    }
    var b = this,
      d = b.getPageSize(),
      e = b.getClearOnPageLoad();
    a = Ext.apply({}, a);
    b.currentPage = c;
    b.load(
      Ext.applyIf(a, { page: c, start: (c - 1) * d, limit: d, addRecords: !e })
    );
  },
  nextPage: function (a) {
    this.loadPage(this.currentPage + 1, a);
  },
  previousPage: function (a) {
    this.loadPage(this.currentPage - 1, a);
  },
  destroy: function () {
    this.clearData();
    var a = this.getProxy();
    if (a) {
      a.onDestroy();
    }
    Ext.data.StoreManager.unregister(this);
    Ext.destroy(this.getPlugins());
    if (this.implicitModel && this.getModel()) {
      delete Ext.data.ModelManager.types[this.getModel().getName()];
    }
    Ext.destroy(this.data);
    this.callParent(arguments);
  },
});
Ext.define(
  "Ext.dataview.IndexBar",
  {
    extend: Ext.Component,
    alternateClassName: "Ext.IndexBar",
    config: {
      baseCls: Ext.baseCSSPrefix + "indexbar",
      direction: "vertical",
      letters: [
        "A",
        "B",
        "C",
        "D",
        "E",
        "F",
        "G",
        "H",
        "I",
        "J",
        "K",
        "L",
        "M",
        "N",
        "O",
        "P",
        "Q",
        "R",
        "S",
        "T",
        "U",
        "V",
        "W",
        "X",
        "Y",
        "Z",
      ],
      ui: "alphabet",
      listPrefix: null,
    },
    itemCls: Ext.baseCSSPrefix + "",
    updateDirection: function (b, c) {
      var a = this.getBaseCls();
      this.element.replaceCls(a + "-" + c, a + "-" + b);
    },
    getElementConfig: function () {
      return {
        reference: "wrapper",
        classList: ["x-centered", "x-indexbar-wrapper"],
        children: [this.callParent()],
      };
    },
    updateLetters: function (b) {
      this.innerElement.setHtml("");
      if (b) {
        var c = b.length,
          a;
        for (a = 0; a < c; a++) {
          this.innerElement.createChild({ html: b[a] });
        }
      }
    },
    updateListPrefix: function (a) {
      if (a && a.length) {
        this.innerElement.createChild({ html: a }, 0);
      }
    },
    initialize: function () {
      this.callParent();
      this.innerElement.on({
        touchstart: this.onTouchStart,
        dragend: this.onDragEnd,
        drag: this.onDrag,
        scope: this,
      });
    },
    onTouchStart: function (a) {
      a.stopPropagation();
      this.innerElement.addCls(this.getBaseCls() + "-pressed");
      this.pageBox = this.innerElement.getPageBox();
      this.onDrag(a);
    },
    onDragEnd: function () {
      this.innerElement.removeCls(this.getBaseCls() + "-pressed");
    },
    onDrag: function (d) {
      var b = Ext.util.Point.fromEvent(d),
        c,
        a = this.pageBox;
      if (!a) {
        a = this.pageBox = this.el.getPageBox();
      }
      if (this.getDirection() === "vertical") {
        if (b.y > a.bottom || b.y < a.top) {
          return;
        }
        c = Ext.Element.fromPoint(a.left + a.width / 2, b.y);
      } else {
        if (b.x > a.right || b.x < a.left) {
          return;
        }
        c = Ext.Element.fromPoint(b.x, a.top + a.height / 2);
      }
      if (c) {
        this.fireEvent("index", this, c.dom.innerHTML, c);
      }
    },
    destroy: function () {
      var d = this,
        b = Array.prototype.slice.call(d.innerElement.dom.childNodes),
        c = b.length,
        a = 0;
      for (; a < c; a++) {
        Ext.removeNode(b[a]);
      }
      this.callParent();
    },
  },
  function () {}
);
Ext.define("Ext.dataview.ListItemHeader", {
  extend: Ext.Component,
  xtype: "listitemheader",
  config: { baseCls: Ext.baseCSSPrefix + "list-header" },
});
Ext.define("Ext.dataview.component.ListItem", {
  extend: Ext.dataview.component.DataItem,
  xtype: "listitem",
  config: {
    baseCls: Ext.baseCSSPrefix + "list-item",
    dataMap: null,
    body: { xtype: "component", cls: "x-list-item-body" },
    disclosure: {
      xtype: "component",
      cls: "x-list-disclosure",
      hidden: !0,
      docked: "right",
    },
    header: { xtype: "component", cls: "x-list-header", html: " " },
    tpl: null,
    items: null,
  },
  applyBody: function (a) {
    if (a && !a.isComponent) {
      a = Ext.factory(a, Ext.Component, this.getBody());
    }
    return a;
  },
  updateBody: function (b, a) {
    if (b) {
      this.add(b);
    } else {
      if (a) {
        a.destroy();
      }
    }
  },
  applyHeader: function (a) {
    if (a && !a.isComponent) {
      a = Ext.factory(a, Ext.Component, this.getHeader());
    }
    return a;
  },
  updateHeader: function (b, a) {
    if (a) {
      a.destroy();
    }
  },
  applyDisclosure: function (a) {
    if (a && !a.isComponent) {
      a = Ext.factory(a, Ext.Component, this.getDisclosure());
    }
    return a;
  },
  updateDisclosure: function (b, a) {
    if (b) {
      this.add(b);
    } else {
      if (a) {
        a.destroy();
      }
    }
  },
  updateTpl: function (a) {
    this.getBody().setTpl(a);
  },
  updateRecord: function (a) {
    var b = this,
      d = b.dataview || this.getDataview(),
      c = a && d.prepareData(a.getData(!0), d.getStore().indexOf(a), a),
      h = b.getDataMap(),
      e = this.getBody(),
      g = this.getDisclosure();
    b._record = a;
    if (h) {
      b.doMapData(h, c, e);
    } else {
      if (e) {
        e.updateData(c || null);
      }
    }
    if (g && a && d.getOnItemDisclosure()) {
      var f = d.getDisclosureProperty();
      g[c.hasOwnProperty(f) && c[f] === !1 ? "hide" : "show"]();
    }
    b.fireEvent("updatedata", b, c);
  },
  destroy: function () {
    Ext.destroy(this.getHeader());
    this.callParent(arguments);
  },
});
Ext.define("Ext.dataview.component.SimpleListItem", {
  extend: Ext.Component,
  xtype: "simplelistitem",
  config: {
    baseCls: Ext.baseCSSPrefix + "list-item",
    disclosure: { xtype: "component", cls: "x-list-disclosure", hidden: !0 },
    header: { xtype: "component", cls: "x-list-header", html: " " },
    dataview: null,
    record: null,
  },
  initialize: function () {
    this.element.addCls(this.getBaseCls() + "-tpl");
  },
  applyHeader: function (a) {
    if (a && !a.isComponent) {
      a = Ext.factory(a, Ext.Component, this.getHeader());
    }
    return a;
  },
  updateHeader: function (b, a) {
    if (a) {
      a.destroy();
    }
  },
  applyDisclosure: function (a) {
    if (a && !a.isComponent) {
      a = Ext.factory(a, Ext.Component, this.getDisclosure());
    }
    return a;
  },
  updateDisclosure: function (b, a) {
    if (b) {
      this.element.appendChild(b.renderElement);
    } else {
      if (a) {
        a.destroy();
      }
    }
  },
  updateRecord: function (a) {
    var f = this,
      b = f.dataview || this.getDataview(),
      c = a && b.prepareData(a.getData(!0), b.getStore().indexOf(a), a),
      e = this.getDisclosure();
    f.updateData(c || null);
    if (e && a && b.getOnItemDisclosure()) {
      var d = b.getDisclosureProperty();
      e[c.hasOwnProperty(d) && c[d] === !1 ? "hide" : "show"]();
    }
  },
  destroy: function () {
    Ext.destroy(this.getHeader(), this.getDisclosure());
    this.callParent(arguments);
  },
});
Ext.define("Ext.util.PositionMap", {
  config: { minimumHeight: 50 },
  constructor: function (a) {
    this.map = [];
    this.adjustments = {};
    this.offset = 0;
    this.initConfig(a);
  },
  populate: function (d, f) {
    var b = (this.map = this.map || []),
      g = this.getMinimumHeight(),
      a,
      c,
      e;
    f = f || 0;
    d++;
    b.length = d;
    b[0] = 0;
    for (a = f + 1, e = d - 1; a <= e; a++) {
      c = a - 1;
      b[a] = b[c] + g;
    }
    this.adjustments = { indices: [], heights: {} };
    this.offset = 0;
    for (a = 1, e = d - 1; a <= e; a++) {
      c = a - 1;
      this.offset += b[a] - b[c] - g;
    }
  },
  setItemHeight: function (b, a) {
    a = Math.max(a, this.getMinimumHeight());
    if (a !== this.getItemHeight(b)) {
      var c = this.adjustments;
      c.indices.push(parseInt(b, 10));
      c.heights[b] = a;
    }
  },
  update: function () {
    var g = this.adjustments,
      e = g.indices,
      l = g.heights,
      b = this.map,
      m = e.length,
      k = this.getMinimumHeight(),
      d = 0,
      c,
      f,
      j,
      a,
      i,
      h;
    if (!g.indices.length) {
      return !1;
    }
    Ext.Array.sort(e, function (a, b) {
      return a - b;
    });
    for (c = 0; c < m; c++) {
      a = e[c];
      i = e[c + 1] || b.length - 1;
      h = b[a + 1] !== undefined ? b[a + 1] - b[a] + d : k;
      j = l[a];
      d += j - h;
      for (f = a + 1; f <= i; f++) {
        b[f] += d;
      }
    }
    this.offset += d;
    this.adjustments = { indices: [], heights: {} };
    return !0;
  },
  getItemHeight: function (a) {
    return this.map[a + 1] - this.map[a];
  },
  getTotalHeight: function () {
    return (this.map.length - 1) * this.getMinimumHeight() + this.offset;
  },
  findIndex: function (a) {
    return this.map.length ? this.binarySearch(this.map, a) : 0;
  },
  binarySearch: function (b, d) {
    var c = 0,
      a = b.length;
    if (d < b[0]) {
      return 0;
    }
    if (d > b[a - 1]) {
      return a - 1;
    }
    while (c + 1 < a) {
      var e = (c + a) >> 1,
        f = b[e];
      if (f == d) {
        return e;
      } else {
        if (f < d) {
          c = e;
        } else {
          a = e;
        }
      }
    }
    return c;
  },
});
Ext.define("Ext.dataview.List", {
  alternateClassName: "Ext.List",
  extend: Ext.dataview.DataView,
  xtype: "list",
  mixins: [Ext.mixin.Bindable],
  config: {
    layout: "fit",
    indexBar: !1,
    icon: null,
    preventSelectionOnDisclose: !0,
    baseCls: Ext.baseCSSPrefix + "list",
    pinHeaders: !0,
    grouped: null,
    onItemDisclosure: null,
    disclosureProperty: "disclosure",
    ui: "normal",
    defaultType: undefined,
    itemMap: {},
    itemHeight: 42,
    variableHeights: !1,
    refreshHeightOnUpdate: !0,
    infinite: !1,
    useSimpleItems: !0,
    scrollable: null,
    bufferSize: 20,
    minimumBufferDistance: 5,
    useHeaders: !0,
    striped: !1,
  },
  platformConfig: [
    { theme: ["Windows"], itemHeight: 44 },
    { theme: ["Cupertino"], itemHeight: 43 },
  ],
  topRenderedIndex: 0,
  topVisibleIndex: 0,
  visibleCount: 0,
  constructor: function () {
    var a = this,
      b;
    a.callParent(arguments);
  },
  beforeInitialize: function () {
    var a = this,
      c = a.container,
      b,
      e,
      d;
    Ext.apply(a, {
      listItems: [],
      headerItems: [],
      updatedItems: [],
      headerMap: [],
      scrollDockItems: { top: [], bottom: [] },
    });
    this.translationMethod = Ext.browser.is.AndroidStock2
      ? "cssposition"
      : "csstransform";
    if (!c) {
      c = a.container = Ext.factory({
        xtype: "container",
        scrollable: {
          scroller: { autoRefresh: !a.getInfinite(), direction: "vertical" },
        },
      });
    }
    a.add(c);
    b = c.getScrollable();
    e = a.scrollViewElement = b.getElement();
    a.scrollElement = b.getScroller().getElement();
    a.setScrollable(b);
    a.scrollableBehavior = c.getScrollableBehavior();
    d = a.pinnedHeader = Ext.factory({
      xtype: "listitemheader",
      html: "&nbsp;",
      translatable: { translationMethod: this.translationMethod },
      cls: ["x-list-header", "x-list-header-swap"],
    });
    d.translate(0, -10000);
    d.$position = -10000;
    e.insertFirst(d.renderElement);
    a.bind(b.getScroller().getTranslatable(), "doTranslate", "onTranslate");
  },
  initialize: function () {
    var a = this,
      b = a.container,
      f = a.scrollViewElement,
      e = a.getIndexBar(),
      d = a.getTriggerEvent(),
      c = a.getTriggerCtEvent();
    if (e) {
      f.appendChild(e.renderElement);
    }
    if (d) {
      a.on(d, a.onItemTrigger, a);
    }
    if (c) {
      a.on(c, a.onContainerTrigger, a);
    }
    b.element.on({
      delegate: "." + a.getBaseCls() + "-disclosure",
      tap: "handleItemDisclosure",
      scope: a,
    });
    b.element.on({ resize: "onContainerResize", scope: a });
    b.innerElement.on({
      touchstart: "onItemTouchStart",
      touchend: "onItemTouchEnd",
      tap: "onItemTap",
      taphold: "onItemTapHold",
      singletap: "onItemSingleTap",
      doubletap: "onItemDoubleTap",
      swipe: "onItemSwipe",
      delegate: "." + Ext.baseCSSPrefix + "list-item",
      scope: a,
    });
    if (a.getStore()) {
      a.refresh();
    }
  },
  onTranslate: function (h, b) {
    var a = this,
      c = a.pinnedHeader,
      d = a.getStore(),
      e = d && d.getCount(),
      g = a.getGrouped(),
      f = a.getInfinite();
    if (!e) {
      a.showEmptyText();
      a.showEmptyScrollDock();
      c.$position = -10000;
      c.translate(0, -10000);
    } else {
      if (f && a.itemsCount) {
        a.handleItemUpdates(b);
        a.handleItemHeights();
        a.handleItemTransforms();
        if (!a.onIdleBound) {
          Ext.AnimationQueue.onIdle(a.onAnimationIdle, a);
          a.onIdleBound = !0;
        }
      }
    }
    if (g && a.groups && a.groups.length && a.getPinHeaders()) {
      a.handlePinnedHeader(b);
    }
    this.onScrollBinder(h, b);
  },
  onScrollBinder: function () {},
  handleItemUpdates: function (q) {
    var b = this,
      h = b.listItems,
      k = h.length,
      l = b.getListItemInfo(),
      p = b.getItemMap(),
      n = b.getBufferSize(),
      o = b.getStore().getCount() - 1,
      i = b.getMinimumBufferDistance(),
      m = b.topVisibleIndex,
      e = b.topRenderedIndex,
      f,
      a,
      d,
      g,
      j,
      c;
    b.topVisibleIndex = g = Math.max(0, p.findIndex(-q) || 0);
    if (m !== g) {
      if (m > g) {
        j = g - e;
        if (j < i) {
          f = Math.min(k, i - j);
          if (f == k) {
            b.topRenderedIndex = e = Math.max(0, g - (n - i));
            for (a = 0; a < f; a++) {
              c = e + a;
              d = h[a];
              b.updateListItem(d, c, l);
            }
          } else {
            for (a = 0; a < f; a++) {
              c = e - a - 1;
              if (c < 0) {
                break;
              }
              d = h.pop();
              h.unshift(d);
              b.updateListItem(d, c, l);
              b.topRenderedIndex--;
            }
          }
        }
      } else {
        j = n - (g - e);
        if (j < i) {
          f = Math.min(k, i - j);
          if (f == k) {
            b.topRenderedIndex = e = Math.min(o - k, g - i);
            for (a = 0; a < f; a++) {
              c = e + a;
              d = h[a];
              b.updateListItem(d, c, l);
            }
          } else {
            for (a = 0; a < f; a++) {
              c = e + k + a;
              if (c > o) {
                break;
              }
              d = h.shift();
              h.push(d);
              b.updateListItem(d, c, l);
              b.topRenderedIndex++;
            }
          }
        }
      }
    }
  },
  onAnimationIdle: function () {
    var a = this,
      k = a.getListItemInfo(),
      l = a.getBufferSize(),
      j = a.topVisibleIndex,
      h = a.topRenderedIndex,
      n = a.getStore().getCount() - 1,
      e = a.listItems,
      m = e.length,
      g,
      f,
      b,
      i,
      d,
      c;
    g = j - h;
    f = h + l - j;
    if (g < f) {
      if (j > 0) {
        i = f - g;
        for (b = 0; b < i; b++) {
          c = h - b - 1;
          if (c < 0) {
            break;
          }
          d = e.pop();
          e.unshift(d);
          a.updateListItem(d, c, k);
          a.topRenderedIndex--;
        }
      }
    } else {
      i = g - f;
      for (b = 0; b < i; b++) {
        c = h + m + b;
        if (c > n) {
          break;
        }
        d = e.shift();
        e.push(d);
        a.updateListItem(d, c, k);
        a.topRenderedIndex++;
      }
    }
    a.handleItemHeights();
    a.handleItemTransforms();
    a.onIdleBound = !1;
  },
  handleItemHeights: function () {
    var a = this,
      l = a.updatedItems,
      p = l.length,
      g = a.getItemMap(),
      o = a.getUseSimpleItems(),
      k = g.getMinimumHeight(),
      h = a.headerIndices,
      m = a.headerMap,
      n = a.getVariableHeights(),
      i,
      e,
      d,
      j,
      c,
      b,
      f;
    for (e = 0; e < p; e++) {
      c = l[e];
      i = c.$dataIndex;
      if (i !== null) {
        if (n) {
          b = o ? c.element.getHeight() : c.element.getFirstChild().getHeight();
          b = Math.max(b, k);
        } else {
          b = k;
        }
        c.$ownItemHeight = b;
        j = a.scrollDockItems.top.length;
        if (c.isFirst) {
          a.totalScrollDockTopHeight = 0;
          for (d = 0; d < j; d++) {
            f = a.scrollDockItems.top[d].$scrollDockHeight;
            b += f;
            a.totalScrollDockTopHeight += f;
          }
        }
        j = a.scrollDockItems.bottom.length;
        if (c.isLast) {
          for (d = 0; d < j; d++) {
            f = a.scrollDockItems.bottom[d].$scrollDockHeight;
            b += f;
          }
        }
        if (h && h[i]) {
          b += a.headerHeight;
        }
        g.setItemHeight(i, b);
        c.$height = b;
      }
    }
    g.update();
    b = g.getTotalHeight();
    m.length = 0;
    for (e in h) {
      if (h.hasOwnProperty(e)) {
        m.push(g.map[e]);
      }
    }
    a.setScrollerHeight(b);
    a.updatedItems.length = 0;
  },
  setScrollerHeight: function (c) {
    var d = this,
      a = d.container.getScrollable().getScroller(),
      b = a.getTranslatable();
    if (c != a.givenSize) {
      a.setSize(c);
      a.refreshMaxPosition();
      a.fireEvent("refresh", a);
      if (
        b.isAnimating &&
        b.activeEasingY &&
        b.activeEasingY.setMinMomentumValue
      ) {
        b.activeEasingY.setMinMomentumValue(-a.getMaxPosition().y);
      }
    }
  },
  handleItemTransforms: function () {
    var d = this,
      h = d.listItems,
      i = h.length,
      k = d.getItemMap(),
      e = d.scrollDockItems,
      j = d.getGrouped(),
      b,
      a,
      g,
      f,
      c;
    for (g = 0; g < i; g++) {
      b = h[g];
      a = k.map[b.$dataIndex];
      if (!b.$hidden && b.$position !== a) {
        b.$position = a;
        f = e.top.length;
        if (b.isFirst && f) {
          for (c = 0; c < f; c++) {
            e.top[c].translate(0, a);
            a += e.top[c].$scrollDockHeight;
          }
        }
        if (
          j &&
          d.getUseHeaders() &&
          d.headerIndices &&
          d.headerIndices[b.$dataIndex]
        ) {
          b.getHeader().translate(0, a);
          a += d.headerHeight;
        }
        b.translate(0, a);
        a += b.$ownItemHeight;
        f = e.bottom.length;
        if (b.isLast && f) {
          for (c = 0; c < f; c++) {
            e.bottom[c].translate(0, a);
            a += e.bottom[c].$scrollDockHeight;
          }
        }
      }
    }
  },
  handlePinnedHeader: function (e) {
    var a = this,
      c = a.pinnedHeader,
      l = a.getItemMap(),
      m = a.groups,
      h = a.headerMap,
      k = a.headerHeight,
      n = a.getStore(),
      j = a.totalScrollDockTopHeight,
      i,
      b,
      g,
      d,
      f;
    b = l.binarySearch(h, -e);
    i = m[b].children[0];
    if (i) {
      g = e + h[b + 1] - k;
      if (e >= 0 || (b === 0 && j + e >= 0) || (b === 0 && -e <= h[b])) {
        d = -10000;
      } else {
        if (g < 0) {
          d = g;
        } else {
          d = Math.max(0, e);
        }
      }
      f = n.getGroupString(i);
      if (c.$currentHeader != f) {
        c.setHtml(f);
        c.$currentHeader = f;
      }
      if (c.$position != d) {
        c.translate(0, d);
        c.$position = d;
      }
    }
  },
  createItem: function (f) {
    var b = this,
      i = b.container,
      j = b.listItems,
      e = b.getInfinite(),
      g = b.scrollElement,
      h = b.getUseHeaders(),
      a,
      c,
      d;
    a = Ext.factory(f);
    a.dataview = b;
    a.$height = f.minHeight;
    if (!e) {
      d = b.getBaseCls() + "-item-relative";
      a.addCls(d);
    }
    if (h) {
      c = a.getHeader();
      if (!e) {
        c.addCls(d);
      } else {
        c.setTranslatable({ translationMethod: this.translationMethod });
        c.translate(0, -10000);
        g.insertFirst(c.renderElement);
      }
    }
    i.doAdd(a);
    j.push(a);
    return a;
  },
  setItemsCount: function (d) {
    var a = this,
      e = a.listItems,
      f = a.getListItemConfig(),
      c = d - e.length,
      b;
    for (b = 0; b < c; b++) {
      a.createItem(f);
    }
    for (b = c; b < 0; b++) {
      e.pop().destroy();
    }
    a.itemsCount = d;
    a.updateAllListItems();
    if (
      Ext.browser.is.AndroidStock &&
      a.container.element &&
      d === 0 &&
      c !== 0
    ) {
      a.container.element.redraw();
    }
    return a.listItems;
  },
  updateUi: function (a, b) {
    if (a && a != b && a == "round") {
      this.setPinHeaders(!1);
    }
    this.callParent(arguments);
  },
  updateListItem: function (b, g, a) {
    var k = this,
      n = a.store.getAt(g),
      v = k.headerIndices,
      u = k.footerIndices,
      m = k.getUseHeaders(),
      f = m && b.getHeader(),
      h = k.scrollDockItems,
      w = k.updatedItems,
      p = b.renderElement.classList.slice(),
      o = m && f.renderElement.classList.slice(),
      e = k.getInfinite(),
      t = a.store.getCount(),
      d = [],
      j = [],
      s = [
        a.headerCls,
        a.footerCls,
        a.firstCls,
        a.lastCls,
        a.selectedCls,
        a.stripeCls,
      ],
      r = [a.headerCls, a.footerCls, a.firstCls, a.lastCls],
      l,
      c,
      i,
      q;
    if (e) {
      b.$position = -10000;
    }
    if (!n) {
      b.setRecord(null);
      if (e) {
        b.translate(0, -10000);
      } else {
        b.hide();
      }
      if (m) {
        if (e) {
          f.translate(0, -10000);
        } else {
          f.hide();
        }
      }
      b.$hidden = !0;
      return;
    } else {
      if (b.$hidden) {
        if (!e) {
          b.show();
        }
        b.$hidden = !1;
      }
    }
    if (e) {
      w.push(b);
    }
    if (b.isFirst && g !== 0 && h.top.length) {
      for (c = 0, l = h.top.length; c < l; c++) {
        i = h.top[c];
        if (e) {
          i.translate(0, -10000);
        }
      }
      b.isFirst = !1;
    }
    if (b.isLast && g !== t - 1 && h.bottom.length) {
      for (c = 0, l = h.bottom.length; c < l; c++) {
        i = h.bottom[c];
        if (e) {
          i.translate(0, -10000);
        }
      }
      b.isLast = !1;
    }
    if (b.$dataIndex !== g) {
      b.$dataIndex = g;
      k.fireEvent("itemindexchange", k, n, g, b);
    }
    if (b.getRecord() === n) {
      b.updateRecord(n);
    } else {
      b.setRecord(n);
    }
    if (k.isSelected(n)) {
      d.push(a.selectedCls);
    }
    if (a.grouped && m) {
      if (v[g]) {
        d.push(a.headerCls);
        j.push(a.headerCls);
        f.setHtml(a.store.getGroupString(n));
        if (!e) {
          f.renderElement.insertBefore(b.renderElement);
        }
        f.show();
      } else {
        if (e) {
          f.translate(0, -10000);
        } else {
          f.hide();
        }
      }
      if (u[g]) {
        d.push(a.footerCls);
        j.push(a.footerCls);
      }
    }
    if (!a.grouped && m) {
      f.hide();
    }
    if (g === 0) {
      b.isFirst = !0;
      d.push(a.firstCls);
      j.push(a.firstCls);
      if (!a.grouped) {
        d.push(a.headerCls);
        j.push(a.headerCls);
      }
      if (!e) {
        for (c = 0, l = h.top.length; c < l; c++) {
          i = h.top[c];
          if (a.grouped) {
            i.renderElement.insertBefore(f.renderElement);
          } else {
            i.renderElement.insertBefore(b.renderElement);
          }
        }
      }
    }
    if (g === t - 1) {
      b.isLast = !0;
      d.push(a.lastCls);
      j.push(a.lastCls);
      if (!a.grouped) {
        d.push(a.footerCls);
        j.push(a.footerCls);
      }
      if (!e) {
        for (c = 0, l = h.bottom.length; c < l; c++) {
          i = h.bottom[c];
          i.renderElement.insertAfter(b.renderElement);
        }
      }
    }
    if (a.striped && g % 2 == 1) {
      d.push(a.stripeCls);
    }
    if (p) {
      for (c = 0; c < s.length; c++) {
        Ext.Array.remove(p, s[c]);
      }
      d = Ext.Array.merge(d, p);
    }
    if (m && o) {
      for (c = 0; c < r.length; c++) {
        Ext.Array.remove(o, r[c]);
      }
      j = Ext.Array.merge(j, o);
    }
    q = d.join(" ");
    if (b.classCache !== q) {
      b.renderElement.setCls(d);
      b.classCache = q;
    }
    if (m) {
      f.renderElement.setCls(j);
    }
  },
  updateAllListItems: function () {
    var a = this,
      c = a.getStore(),
      d = a.listItems,
      g = a.getListItemInfo(),
      f = a.topRenderedIndex,
      b,
      e;
    if (c) {
      for (b = 0, e = d.length; b < e; b++) {
        a.updateListItem(d[b], f + b, g);
      }
    }
    if (a.isPainted()) {
      if (a.getInfinite() && c && c.getCount()) {
        a.handleItemHeights();
      }
      a.refreshScroller();
    }
  },
  doRefresh: function () {
    var a = this,
      c = a.getInfinite(),
      d = a.container.getScrollable().getScroller(),
      b = a.getStore().getCount();
    if (c) {
      a.getItemMap().populate(b, this.topRenderedIndex);
    }
    if (a.getGrouped()) {
      a.refreshHeaderIndices();
    }
    if (b) {
      a.hideScrollDockItems();
      a.hideEmptyText();
      if (!c) {
        a.setItemsCount(b);
        if (a.getScrollToTopOnRefresh()) {
          d.scrollTo(0, 0);
        }
      } else {
        if (a.getScrollToTopOnRefresh()) {
          a.topRenderedIndex = 0;
          a.topVisibleIndex = 0;
          d.position.y = 0;
        }
        a.updateAllListItems();
      }
    } else {
      a.onStoreClear();
    }
  },
  onContainerResize: function (d, c) {
    var a = this,
      b = a.visibleCount;
    if (!a.headerHeight) {
      a.headerHeight = parseInt(a.pinnedHeader.renderElement.getHeight(), 10);
    }
    if (a.getInfinite()) {
      a.visibleCount = Math.ceil(c.height / a.getItemMap().getMinimumHeight());
      if (a.visibleCount != b) {
        a.setItemsCount(a.visibleCount + a.getBufferSize());
        a.fireEvent("updatevisiblecount", this, a.visibleCount, b);
      }
    } else {
      if (
        a.listItems.length &&
        a.getUseHeaders() &&
        a.getGrouped() &&
        a.getPinHeaders()
      ) {
        a.updateHeaderMap();
      }
    }
  },
  refreshScroller: function () {
    var a = this;
    if (a.isPainted()) {
      if (!a.getInfinite() && a.getGrouped() && a.getPinHeaders()) {
        a.updateHeaderMap();
      }
      a.container.getScrollable().getScroller().refresh();
    }
  },
  updateHeaderMap: function () {
    var a = this,
      d = a.headerMap,
      c = a.headerIndices,
      e,
      b;
    d.length = 0;
    for (b in c) {
      if (c.hasOwnProperty(b)) {
        e = a.getItemAt(b).getHeader();
        d.push(e.renderElement.dom.offsetTop);
      }
    }
  },
  applyVariableHeights: function (a) {
    if (!this.getInfinite()) {
      return !0;
    }
    return a;
  },
  applyDefaultType: function (a) {
    if (!a) {
      a = this.getUseSimpleItems() ? "simplelistitem" : "listitem";
    }
    return a;
  },
  applyItemMap: function (a) {
    return Ext.factory(a, Ext.util.PositionMap, this.getItemMap());
  },
  updateItemHeight: function (a) {
    this.getItemMap().setMinimumHeight(a);
  },
  applyIndexBar: function (a) {
    return Ext.factory(a, Ext.dataview.IndexBar, this.getIndexBar());
  },
  updatePinHeaders: function (a) {
    if (this.isPainted()) {
      this.pinnedHeader.translate(0, a ? this.pinnedHeader.$position : -10000);
    }
  },
  updateItemTpl: function (e) {
    var d = this,
      b = d.listItems,
      f = b.length || 0,
      a,
      c;
    for (a = 0; a < f; a++) {
      c = b[a];
      c.setTpl(e);
    }
    d.updateAllListItems();
  },
  updateItemCls: function (d, e) {
    var c = this.listItems,
      f = c.length,
      a,
      b;
    for (a = 0; a < f; a++) {
      b = c[a];
      b.removeCls(e);
      b.addCls(d);
    }
  },
  updateIndexBar: function (d, c) {
    var a = this,
      b = a.scrollViewElement;
    if (c) {
      c.un({ index: "onIndex", scope: a });
      if (!d) {
        a.element.removeCls(a.getBaseCls() + "-indexed");
      }
      if (b) {
        b.removeChild(c.renderElement);
      }
    }
    if (d) {
      d.on({ index: "onIndex", scope: a });
      if (!c) {
        a.element.addCls(a.getBaseCls() + "-indexed");
      }
      if (b) {
        b.appendChild(d.renderElement);
      }
    }
  },
  updateGrouped: function (f) {
    var a = this,
      c = this.getBaseCls(),
      b = a.pinnedHeader,
      e = c + "-grouped",
      d = c + "-ungrouped";
    if (b) {
      b.translate(0, -10000);
    }
    if (f) {
      a.addCls(e);
      a.removeCls(d);
    } else {
      a.addCls(d);
      a.removeCls(e);
    }
    if (a.getInfinite()) {
      a.refreshHeaderIndices();
      a.handleItemHeights();
    }
    a.updateAllListItems();
  },
  onStoreAdd: function () {
    this.doRefresh();
  },
  onStoreRemove: function () {
    this.doRefresh();
  },
  onStoreUpdate: function (f, e, b, c) {
    var a = this,
      d;
    c = typeof c === "undefined" ? b : c;
    if (a.getInfinite() || c !== b) {
      a.doRefresh();
    } else {
      d = a.listItems[b];
      if (d) {
        a.updateListItem(d, b, a.getListItemInfo());
      }
    }
  },
  onStoreClear: function () {
    var a = this,
      b = a.container.getScrollable().getScroller(),
      c = a.getInfinite();
    if (a.pinnedHeader) {
      a.pinnedHeader.translate(0, -10000);
    }
    if (!c) {
      a.setItemsCount(0);
      b.scrollTo(0, 0);
    } else {
      a.topRenderedIndex = 0;
      a.topVisibleIndex = 0;
      b.position.y = 0;
      a.updateAllListItems();
    }
  },
  showEmptyScrollDock: function () {
    var g = this,
      f = g.getInfinite(),
      c = g.scrollDockItems,
      d = 0,
      b,
      e,
      a;
    for (b = 0, e = c.top.length; b < e; b++) {
      a = c.top[b];
      if (f) {
        a.translate(0, d);
        d += a.$scrollDockHeight;
      } else {
        this.scrollElement.appendChild(a.renderElement);
      }
    }
    for (b = 0, e = c.bottom.length; b < e; b++) {
      a = c.bottom[b];
      if (f) {
        a.translate(0, d);
        d += a.$scrollDockHeight;
      } else {
        this.scrollElement.appendChild(a.renderElement);
      }
    }
  },
  hideScrollDockItems: function () {
    var e = this,
      f = e.getInfinite(),
      b = e.scrollDockItems,
      a,
      d,
      c;
    if (!f) {
      return;
    }
    for (a = 0, d = b.top.length; a < d; a++) {
      c = b.top[a];
      c.translate(0, -10000);
    }
    for (a = 0, d = b.bottom.length; a < d; a++) {
      c = b.bottom[a];
      c.translate(0, -10000);
    }
  },
  getItemAt: function (d) {
    var c = this.listItems,
      e = c.length,
      a,
      b;
    for (a = 0; a < e; a++) {
      b = c[a];
      if (b.$dataIndex == d) {
        return b;
      }
    }
  },
  getItemIndex: function (a) {
    return a.$dataIndex;
  },
  getViewItems: function () {
    return this.listItems;
  },
  getListItemInfo: function () {
    var a = this,
      b = a.getBaseCls();
    return {
      store: a.getStore(),
      grouped: a.getGrouped(),
      baseCls: b,
      selectedCls: a.getSelectedCls(),
      headerCls: b + "-header-wrap",
      footerCls: b + "-footer-wrap",
      firstCls: b + "-item-first",
      lastCls: b + "-item-last",
      stripeCls: b + "-item-odd",
      striped: a.getStriped(),
      itemMap: a.getItemMap(),
      defaultItemHeight: a.getItemHeight(),
    };
  },
  getListItemConfig: function () {
    var a = this,
      c = a.getItemMap().getMinimumHeight(),
      b = {
        xtype: a.getDefaultType(),
        itemConfig: a.getItemConfig(),
        tpl: a.getItemTpl(),
        minHeight: c,
        cls: a.getItemCls(),
      };
    if (a.getInfinite()) {
      b.translatable = { translationMethod: this.translationMethod };
    }
    if (!a.getVariableHeights()) {
      b.height = c;
    }
    return b;
  },
  refreshHeaderIndices: function () {
    var a = this,
      b = a.getStore(),
      l = b && b.getCount(),
      g = b.getGroups(),
      k = a.getGrouped(),
      j = g.length,
      i = (a.headerIndices = {}),
      d = (a.footerIndices = {}),
      c,
      e,
      h,
      f;
    if (!k) {
      return d;
    }
    a.groups = g;
    for (c = 0; c < j; c++) {
      h = g[c].children[0];
      f = b.indexOf(h);
      i[f] = !0;
      e = f - 1;
      if (e >= 0) {
        d[e] = !0;
      }
    }
    d[l - 1] = !0;
    return i;
  },
  onIndex: function (k, f) {
    var j = this,
      h = f.toLowerCase(),
      g = j.getStore(),
      d = g.getGroups(),
      i = d.length,
      b,
      c,
      a,
      e;
    for (c = 0; c < i; c++) {
      b = d[c];
      e = b.name.toLowerCase();
      if (e >= h) {
        a = b;
        break;
      } else {
        a = b;
      }
    }
    if (a) {
      this.scrollToRecord(a.children[0]);
    }
  },
  scrollToRecord: function (j, i, g) {
    var b = this,
      c = b.container.getScrollable().getScroller(),
      k = b.getStore(),
      e = k.indexOf(j);
    c.stopAnimation();
    var f = c.getContainerSize().y,
      l = c.getSize().y,
      h = l - f,
      a,
      d;
    if (b.getInfinite()) {
      a = b.getItemMap().map[e];
    } else {
      d = b.listItems[e];
      if (b.getUseHeaders() && d.getHeader().isPainted()) {
        a = d.getHeader().renderElement.dom.offsetTop;
      } else {
        a = d.renderElement.dom.offsetTop;
      }
    }
    if (!g) {
      a = Math.min(a, h);
    }
    c.scrollTo(0, a, !!i);
  },
  onItemAdd: function (a) {
    var b = this,
      c = a.config;
    if (c.scrollDock) {
      if (c.scrollDock == "bottom") {
        b.scrollDockItems.bottom.push(a);
      } else {
        b.scrollDockItems.top.push(a);
      }
      if (b.getInfinite()) {
        a.on({ resize: "onScrollDockItemResize", scope: this });
        a.addCls(b.getBaseCls() + "-scrolldockitem");
        a.setTranslatable({ translationMethod: this.translationMethod });
        a.translate(0, -10000);
        a.$scrollDockHeight = 0;
      }
      b.container.doAdd(a);
    } else {
      b.callParent(arguments);
    }
  },
  getScrollDockedItems: function () {
    return this.scrollDockItems.bottom
      .slice()
      .concat(this.scrollDockItems.top.slice());
  },
  onScrollDockItemResize: function (d, e) {
    var g = this,
      c = g.listItems,
      f = c.length,
      a,
      b;
    Ext.getCmp(d.id).$scrollDockHeight = e.height;
    for (a = 0; a < f; a++) {
      b = c[a];
      if (b.isLast) {
        this.updatedItems.push(b);
        this.refreshScroller();
        break;
      }
    }
  },
  onItemTouchStart: function (a) {
    this.container.innerElement.on({
      touchmove: "onItemTouchMove",
      delegate: "." + Ext.baseCSSPrefix + "list-item",
      single: !0,
      scope: this,
    });
    this.callParent(this.parseEvent(a));
  },
  onItemTouchMove: function (a) {
    this.callParent(this.parseEvent(a));
  },
  onItemTouchEnd: function (a) {
    this.container.innerElement.un({
      touchmove: "onItemTouchMove",
      delegate: "." + Ext.baseCSSPrefix + "list-item",
      scope: this,
    });
    this.callParent(this.parseEvent(a));
  },
  onItemTap: function (a) {
    this.callParent(this.parseEvent(a));
  },
  onItemTapHold: function (a) {
    this.callParent(this.parseEvent(a));
  },
  onItemSingleTap: function (a) {
    this.callParent(this.parseEvent(a));
  },
  onItemDoubleTap: function (a) {
    this.callParent(this.parseEvent(a));
  },
  onItemSwipe: function (a) {
    this.callParent(this.parseEvent(a));
  },
  parseEvent: function (b) {
    var d = this,
      c = Ext.fly(b.getTarget()).findParent(
        "." + Ext.baseCSSPrefix + "list-item",
        8
      ),
      a = Ext.getCmp(c.id);
    return [d, a, a.$dataIndex, b];
  },
  doItemSelect: function (b, c) {
    this.callParent(arguments);
    var a = b.getItemAt(b.getStore().indexOf(c));
    if (b.container && !b.isDestroyed && a && a.isComponent) {
      a.classCache = a.renderElement.classList.slice();
    }
  },
  doItemDeselect: function (b, c) {
    this.callParent(arguments);
    var a = b.getItemAt(b.getStore().indexOf(c));
    if (a && a.isComponent) {
      a.classCache = a.renderElement.classList.slice();
    }
  },
  applyOnItemDisclosure: function (a) {
    if (Ext.isFunction(a)) {
      return { scope: this, handler: a };
    }
    return a;
  },
  handleItemDisclosure: function (d) {
    var a = this,
      c = Ext.getCmp(Ext.get(d.getTarget()).up(".x-list-item").id),
      b = c.$dataIndex,
      e = a.getStore().getAt(b);
    a.fireAction("disclose", [a, e, c, b, d], "doDisclose");
  },
  doDisclose: function (b, c, e, d, f) {
    var a = b.getOnItemDisclosure();
    if (a && a.handler) {
      a.handler.call(a.scope || b, c, e, d, f);
    }
  },
  onItemTrigger: function (e, d, c, b, a) {
    if (
      !(
        this.getPreventSelectionOnDisclose() &&
        Ext.fly(a.target).hasCls(this.getBaseCls() + "-disclosure")
      )
    ) {
      this.callParent(arguments);
    }
  },
  destroy: function () {
    var a = this,
      c = a.listItems,
      d = c.length,
      b;
    a.callParent(arguments);
    if (a.onIdleBound) {
      Ext.AnimationQueue.unIdle(a.onAnimationIdle, a);
    }
    for (b = 0; b < d; b++) {
      c[b].destroy();
    }
    a.listItems = null;
  },
});
Ext.define("MEM.overrides.dataview.List", {
  override: "Ext.dataview.List",
  config: { loadingText: !1, masked: !1 },
});
Ext.define("MEM.ux.dataview.MyIndexBar", {
  extend: Ext.dataview.IndexBar,
  alias: "widget.myindexbar",
  config: { cls: "myindexbar" },
  constructor: function (a) {
    globalBar = this;
    this.callParent(arguments);
  },
  updateLetters: function (a) {
    this.innerElement.setHtml("");
    var d = this.element.up(".x-list-inner")
        ? this.element.up(".x-list-inner").getHeight()
        : 0,
      g = d ? d : Ext.Viewport.element.getHeight(),
      e = d ? 0 : 70,
      c = parseInt((0.9 * (g - e)) / a.length);
    if (c > 40) {
      c = 40;
    }
    if (a) {
      var f = a.length,
        b;
      for (b = 0; b < f; b++) {
        this.innerElement.createChild({
          html: a[b],
          style: { fontSize: c + "px" },
        });
      }
    }
  },
  onListPaint: function () {
    var a = this;
    var c = a.getIndexBar();
    c.element.getWidth();
    var b =
      a.xtypesChain.indexOf("bufferedlist") != -1
        ? a.element.query(".ux-list-container")
        : a.element.query(".x-list-container");
    var b = a.element.query(".x-list-inner .x-inner");
    if (b && b.length) {
      b[0].style.paddingRight = 20 + 13 + "px";
    }
    c.updateLetters(c.getLetters());
  },
});
Ext.define("MEM.view.customer.CustomerPanelOverride", {
  override: "Ext.dataview.List",
  constructor: function (a) {
    this.callParent(arguments);
    if (this.getIndexBar() && this.getIndexBar().onListPaint) {
      this.on("painted", this.getIndexBar().onListPaint, this);
      Ext.Viewport.on("resize", this.getIndexBar().onListPaint, this);
    }
  },
});
Ext.define("Ext.TitleBar", {
  extend: Ext.Container,
  xtype: "titlebar",
  isToolbar: !0,
  config: {
    baseCls: Ext.baseCSSPrefix + "toolbar",
    cls: Ext.baseCSSPrefix + "navigation-bar",
    ui: "dark",
    title: null,
    titleAlign: "center",
    defaultType: "button",
    minHeight: null,
    layout: { type: "hbox" },
    items: [],
    maxButtonWidth: "40%",
  },
  platformConfig: [
    { theme: ["Blackberry", "Tizen"], titleAlign: "left" },
    { theme: ["Cupertino"], maxButtonWidth: "80%" },
  ],
  hasCSSMinHeight: !0,
  beforeInitialize: function () {
    this.applyItems = this.applyInitialItems;
  },
  initialize: function () {
    delete this.applyItems;
    this.add(this.initialItems);
    delete this.initialItems;
    this.on({ painted: "refreshTitlePosition", single: !0 });
  },
  applyInitialItems: function (d) {
    var a = this,
      c = a.getTitleAlign(),
      b = a.getDefaults() || {};
    a.initialItems = d;
    a.leftBox = a.add({
      xtype: "container",
      style: "position: relative",
      layout: { type: "hbox", align: "center" },
      listeners: { resize: "refreshTitlePosition", scope: a },
    });
    a.spacer = a.add({
      xtype: "component",
      style: "position: relative",
      flex: 1,
      listeners: { resize: "refreshTitlePosition", scope: a },
    });
    a.rightBox = a.add({
      xtype: "container",
      style: "position: relative",
      layout: { type: "hbox", align: "center" },
      listeners: { resize: "refreshTitlePosition", scope: a },
    });
    switch (c) {
      case "left":
        a.titleComponent = a.leftBox.add({
          xtype: "title",
          cls: Ext.baseCSSPrefix + "title-align-left",
          hidden: b.hidden,
        });
        a.refreshTitlePosition = Ext.emptyFn;
        break;
      case "right":
        a.titleComponent = a.rightBox.add({
          xtype: "title",
          cls: Ext.baseCSSPrefix + "title-align-right",
          hidden: b.hidden,
        });
        a.refreshTitlePosition = Ext.emptyFn;
        break;
      default:
        a.titleComponent = a.add({
          xtype: "title",
          hidden: b.hidden,
          centered: !0,
        });
        break;
    }
    a.doAdd = a.doBoxAdd;
    a.remove = a.doBoxRemove;
    a.doInsert = a.doBoxInsert;
  },
  doBoxAdd: function (a) {
    if (a.config.align == "right") {
      this.rightBox.add(a);
    } else {
      this.leftBox.add(a);
    }
  },
  doBoxRemove: function (a, b) {
    if (a.config.align == "right") {
      this.rightBox.remove(a, b);
    } else {
      this.leftBox.remove(a, b);
    }
  },
  doBoxInsert: function (b, a) {
    if (a.config.align == "right") {
      this.rightBox.insert(b, a);
    } else {
      this.leftBox.insert(b, a);
    }
  },
  calculateMaxButtonWidth: function () {
    var a = this.getMaxButtonWidth();
    if (Ext.isString(a)) {
      a = parseInt(a.replace("%", ""), 10);
    }
    a = Math.round((this.element.getWidth() / 100) * a);
    return a;
  },
  refreshTitlePosition: function () {
    if (this.isDestroyed) {
      return;
    }
    var a = this.titleComponent.renderElement;
    a.setWidth(null);
    a.setLeft(null);
    var i = this.leftBox,
      c = i.down("button"),
      n = i.getItems().getCount() == 1,
      j,
      d;
    if (c && n) {
      if (c.getWidth() == null) {
        c.renderElement.setWidth("auto");
      }
      j = i.renderElement.getWidth();
      d = this.calculateMaxButtonWidth();
      if (j > d) {
        c.renderElement.setWidth(d);
      }
    }
    var b = this.spacer.renderElement.getPageBox();
    if (Ext.browser.is.IE) {
      a.setWidth(b.width);
    }
    var h = a.getPageBox(),
      m = h.width - b.width,
      l = h.left,
      k = h.right,
      e,
      g,
      f;
    if (m > 0) {
      e = m / 2;
      l += e;
      k -= e;
      a.setWidth(b.width);
    }
    g = b.left - l;
    f = k - b.right;
    if (g > 0) {
      a.setLeft(g);
    } else {
      if (f > 0) {
        a.setLeft(-f);
      }
    }
    a.repaint();
  },
  updateTitle: function (a) {
    this.titleComponent.setTitle(a);
    if (this.isPainted()) {
      this.refreshTitlePosition();
    }
  },
});
Ext.define("Ext.data.NodeInterface", {
  alternateClassName: "Ext.data.Node",
  statics: {
    decorate: function (a) {
      if (!a.isNode) {
        var h = Ext.data.ModelManager,
          g = a.modelName,
          d = h.getModel(g),
          e = [],
          c,
          b,
          f;
        d.override(this.getPrototypeBody());
        e = this.applyFields(d, [
          { name: "parentId", type: "string", defaultValue: null },
          { name: "index", type: "int", defaultValue: 0 },
          { name: "depth", type: "int", defaultValue: 0, persist: !1 },
          { name: "expanded", type: "bool", defaultValue: !1, persist: !1 },
          { name: "expandable", type: "bool", defaultValue: !0, persist: !1 },
          { name: "checked", type: "auto", defaultValue: null },
          { name: "leaf", type: "bool", defaultValue: !1, persist: !1 },
          { name: "cls", type: "string", defaultValue: null, persist: !1 },
          { name: "iconCls", type: "string", defaultValue: null, persist: !1 },
          { name: "root", type: "boolean", defaultValue: !1, persist: !1 },
          { name: "isLast", type: "boolean", defaultValue: !1, persist: !1 },
          { name: "isFirst", type: "boolean", defaultValue: !1, persist: !1 },
          { name: "allowDrop", type: "boolean", defaultValue: !0, persist: !1 },
          { name: "allowDrag", type: "boolean", defaultValue: !0, persist: !1 },
          { name: "loaded", type: "boolean", defaultValue: !1, persist: !1 },
          { name: "loading", type: "boolean", defaultValue: !1, persist: !1 },
          { name: "href", type: "string", defaultValue: null, persist: !1 },
          {
            name: "hrefTarget",
            type: "string",
            defaultValue: null,
            persist: !1,
          },
          { name: "qtip", type: "string", defaultValue: null, persist: !1 },
          { name: "qtitle", type: "string", defaultValue: null, persist: !1 },
        ]);
        f = e.length;
        d.getFields().isDirty = !0;
        for (c = 0; c < f; ++c) {
          b = e[c];
          if (a.get(b.getName()) === undefined) {
            a.data[b.getName()] = b.getDefaultValue();
          }
        }
      }
      if (!a.isDecorated) {
        a.isDecorated = !0;
        Ext.applyIf(a, {
          firstChild: null,
          lastChild: null,
          parentNode: null,
          previousSibling: null,
          nextSibling: null,
          childNodes: [],
        });
        a.enableBubble([
          "append",
          "remove",
          "move",
          "insert",
          "beforeappend",
          "beforeremove",
          "beforemove",
          "beforeinsert",
          "expand",
          "collapse",
          "beforeexpand",
          "beforecollapse",
          "sort",
          "load",
        ]);
      }
      return a;
    },
    applyFields: function (g, c) {
      var f = g.prototype,
        e = f.fields,
        h = e.keys,
        i = c.length,
        a,
        b,
        d = [];
      for (b = 0; b < i; b++) {
        a = c[b];
        if (!Ext.Array.contains(h, a.name)) {
          a = Ext.create("Ext.data.Field", a);
          d.push(a);
          e.add(a);
        }
      }
      return d;
    },
    getPrototypeBody: function () {
      return {
        isNode: !0,
        createNode: function (a) {
          if (Ext.isObject(a) && !a.isModel) {
            a = Ext.data.ModelManager.create(a, this.modelName);
          }
          return Ext.data.NodeInterface.decorate(a);
        },
        isLeaf: function () {
          return this.get("leaf") === !0;
        },
        setFirstChild: function (a) {
          this.firstChild = a;
        },
        setLastChild: function (a) {
          this.lastChild = a;
        },
        updateInfo: function (c) {
          var a = this,
            b = a.parentNode,
            h = !b ? !0 : b.firstChild == a,
            i = !b ? !0 : b.lastChild == a,
            g = 0,
            e = a,
            f = a.childNodes,
            j = f.length,
            d;
          while (e.parentNode) {
            ++g;
            e = e.parentNode;
          }
          a.beginEdit();
          a.set({
            isFirst: h,
            isLast: i,
            depth: g,
            index: b ? b.indexOf(a) : 0,
            parentId: b ? b.getId() : null,
          });
          a.endEdit(c);
          if (c) {
            a.commit(c);
          }
          for (d = 0; d < j; d++) {
            f[d].updateInfo(c);
          }
        },
        isLast: function () {
          return this.get("isLast");
        },
        isFirst: function () {
          return this.get("isFirst");
        },
        hasChildNodes: function () {
          return !this.isLeaf() && this.childNodes.length > 0;
        },
        isExpandable: function () {
          var a = this;
          if (a.get("expandable")) {
            return !(a.isLeaf() || (a.isLoaded() && !a.hasChildNodes()));
          }
          return !1;
        },
        appendChild: function (a, f, h) {
          var b = this,
            g,
            i,
            c,
            d,
            e;
          if (Ext.isArray(a)) {
            for (g = 0, i = a.length; g < i; g++) {
              b.appendChild(a[g], f, h);
            }
          } else {
            a = b.createNode(a);
            if (f !== !0 && b.fireEvent("beforeappend", b, a) === !1) {
              return !1;
            }
            c = b.childNodes.length;
            d = a.parentNode;
            if (d) {
              if (f !== !0 && a.fireEvent("beforemove", a, d, b, c) === !1) {
                return !1;
              }
              d.removeChild(a, null, !1, !0);
            }
            c = b.childNodes.length;
            if (c === 0) {
              b.setFirstChild(a);
            }
            b.childNodes.push(a);
            a.parentNode = b;
            a.nextSibling = null;
            b.setLastChild(a);
            e = b.childNodes[c - 1];
            if (e) {
              a.previousSibling = e;
              e.nextSibling = a;
              e.updateInfo(h);
            } else {
              a.previousSibling = null;
            }
            a.updateInfo(h);
            if (!b.isLoaded()) {
              b.set("loaded", !0);
            } else {
              if (b.childNodes.length === 1) {
                b.set("loaded", b.isLoaded());
              }
            }
            if (f !== !0) {
              b.fireEvent("append", b, a, c);
              if (d) {
                a.fireEvent("move", a, d, b, c);
              }
            }
            return a;
          }
        },
        getBubbleTarget: function () {
          return this.parentNode;
        },
        removeChild: function (a, f, d, c) {
          var b = this,
            e = b.indexOf(a);
          if (
            e == -1 ||
            (d !== !0 && b.fireEvent("beforeremove", b, a) === !1)
          ) {
            return !1;
          }
          Ext.Array.erase(b.childNodes, e, 1);
          if (b.firstChild == a) {
            b.setFirstChild(a.nextSibling);
          }
          if (b.lastChild == a) {
            b.setLastChild(a.previousSibling);
          }
          if (d !== !0) {
            b.fireEvent("remove", b, a);
          }
          if (a.previousSibling) {
            a.previousSibling.nextSibling = a.nextSibling;
            a.previousSibling.updateInfo(c);
          }
          if (a.nextSibling) {
            a.nextSibling.previousSibling = a.previousSibling;
            a.nextSibling.updateInfo(c);
          }
          if (!b.childNodes.length) {
            b.set("loaded", b.isLoaded());
          }
          if (f) {
            a.destroy(!0);
          } else {
            a.clear();
          }
          return a;
        },
        copy: function (f, d) {
          var a = this,
            c = a.callOverridden(arguments),
            e = a.childNodes ? a.childNodes.length : 0,
            b;
          if (d) {
            for (b = 0; b < e; b++) {
              c.appendChild(a.childNodes[b].copy(!0));
            }
          }
          return c;
        },
        clear: function (b) {
          var a = this;
          a.parentNode = a.previousSibling = a.nextSibling = null;
          if (b) {
            a.firstChild = a.lastChild = null;
          }
        },
        destroy: function (b) {
          var a = this,
            c = a.destroyOptions;
          if (b === !0) {
            a.clear(!0);
            Ext.each(a.childNodes, function (a) {
              a.destroy(!0);
            });
            a.childNodes = null;
            delete a.destroyOptions;
            a.callOverridden([c]);
          } else {
            a.destroyOptions = b;
            a.remove(!0);
          }
        },
        insertBefore: function (a, c, g) {
          var b = this,
            h = b.indexOf(c),
            d = a.parentNode,
            e = h,
            f;
          if (!c) {
            return b.appendChild(a);
          }
          if (a == c) {
            return !1;
          }
          a = b.createNode(a);
          if (g !== !0 && b.fireEvent("beforeinsert", b, a, c) === !1) {
            return !1;
          }
          if (d == b && b.indexOf(a) < h) {
            e--;
          }
          if (d) {
            if (g !== !0 && a.fireEvent("beforemove", a, d, b, h, c) === !1) {
              return !1;
            }
            d.removeChild(a);
          }
          if (e === 0) {
            b.setFirstChild(a);
          }
          Ext.Array.splice(b.childNodes, e, 0, a);
          a.parentNode = b;
          a.nextSibling = c;
          c.previousSibling = a;
          f = b.childNodes[e - 1];
          if (f) {
            a.previousSibling = f;
            f.nextSibling = a;
            f.updateInfo();
          } else {
            a.previousSibling = null;
          }
          a.updateInfo();
          if (!b.isLoaded()) {
            b.set("loaded", !0);
          } else {
            if (b.childNodes.length === 1) {
              b.set("loaded", b.isLoaded());
            }
          }
          if (g !== !0) {
            b.fireEvent("insert", b, a, c);
            if (d) {
              a.fireEvent("move", a, d, b, e, c);
            }
          }
          return a;
        },
        insertChild: function (c, b) {
          var a = this.childNodes[c];
          if (a) {
            return this.insertBefore(b, a);
          } else {
            return this.appendChild(b);
          }
        },
        remove: function (c, b) {
          var a = this.parentNode;
          if (a) {
            a.removeChild(this, c, b, !0);
          }
          return this;
        },
        removeAll: function (c, b) {
          var d = this.childNodes,
            a;
          while ((a = d[0])) {
            this.removeChild(a, c, b);
          }
          return this;
        },
        getChildAt: function (a) {
          return this.childNodes[a];
        },
        replaceChild: function (c, a, b) {
          var d = a ? a.nextSibling : null;
          this.removeChild(a, b);
          this.insertBefore(c, d, b);
          return a;
        },
        indexOf: function (a) {
          return Ext.Array.indexOf(this.childNodes, a);
        },
        getPath: function (c, a) {
          c = c || this.idProperty;
          a = a || "/";
          var d = [this.get(c)],
            b = this.parentNode;
          while (b) {
            d.unshift(b.get(c));
            b = b.parentNode;
          }
          return a + d.join(a);
        },
        getDepth: function () {
          return this.get("depth");
        },
        bubble: function (d, b, c) {
          var a = this;
          while (a) {
            if (d.apply(b || a, c || [a]) === !1) {
              break;
            }
            a = a.parentNode;
          }
        },
        cascadeBy: function (e, c, d) {
          if (e.apply(c || this, d || [this]) !== !1) {
            var b = this.childNodes,
              f = b.length,
              a;
            for (a = 0; a < f; a++) {
              b[a].cascadeBy(e, c, d);
            }
          }
        },
        eachChild: function (f, d, e) {
          var b = this.childNodes,
            c = b.length,
            a;
          for (a = 0; a < c; a++) {
            if (f.apply(d || this, e || [b[a]]) === !1) {
              break;
            }
          }
        },
        findChild: function (a, b, c) {
          return this.findChildBy(
            function () {
              return this.get(a) == b;
            },
            null,
            c
          );
        },
        findChildBy: function (g, d, e) {
          var f = this.childNodes,
            h = f.length,
            c = 0,
            a,
            b;
          for (; c < h; c++) {
            a = f[c];
            if (g.call(d || a, a) === !0) {
              return a;
            } else {
              if (e) {
                b = a.findChildBy(g, d, e);
                if (b !== null) {
                  return b;
                }
              }
            }
          }
          return null;
        },
        contains: function (a) {
          return a.isAncestor(this);
        },
        isAncestor: function (b) {
          var a = this.parentNode;
          while (a) {
            if (a == b) {
              return !0;
            }
            a = a.parentNode;
          }
          return !1;
        },
        sort: function (f, g, e) {
          var c = this.childNodes,
            d = c.length,
            a,
            b;
          if (d > 0) {
            Ext.Array.sort(c, f);
            for (a = 0; a < d; a++) {
              b = c[a];
              b.previousSibling = c[a - 1];
              b.nextSibling = c[a + 1];
              if (a === 0) {
                this.setFirstChild(b);
              }
              if (a == d - 1) {
                this.setLastChild(b);
              }
              b.updateInfo(e);
              if (g && !b.isLeaf()) {
                b.sort(f, !0, !0);
              }
            }
            this.notifyStores("afterEdit", ["sorted"], { sorted: "sorted" });
            if (e !== !0) {
              this.fireEvent("sort", this, c);
            }
          }
        },
        isExpanded: function () {
          return this.get("expanded");
        },
        isLoaded: function () {
          return this.get("loaded");
        },
        isLoading: function () {
          return this.get("loading");
        },
        isRoot: function () {
          return !this.parentNode;
        },
        isVisible: function () {
          var a = this.parentNode;
          while (a) {
            if (!a.isExpanded()) {
              return !1;
            }
            a = a.parentNode;
          }
          return !0;
        },
        expand: function (d, b, c) {
          var a = this;
          if (!a.isLeaf()) {
            if (a.isLoading()) {
              a.on(
                "expand",
                function () {
                  a.expand(d, b, c);
                },
                a,
                { single: !0 }
              );
            } else {
              if (!a.isExpanded()) {
                a.fireAction("expand", [this], function () {
                  a.set("expanded", !0);
                  Ext.callback(b, c || a, [a.childNodes]);
                });
              } else {
                Ext.callback(b, c || a, [a.childNodes]);
              }
            }
          } else {
            Ext.callback(b, c || a);
          }
        },
        collapse: function (d, b, c) {
          var a = this;
          if (!a.isLeaf() && a.isExpanded()) {
            this.fireAction("collapse", [a], function () {
              a.set("expanded", !1);
              Ext.callback(b, c || a, [a.childNodes]);
            });
          } else {
            Ext.callback(b, c || a, [a.childNodes]);
          }
        },
      };
    },
  },
});
Ext.define("Ext.data.NodeStore", {
  extend: Ext.data.Store,
  alias: "store.node",
  config: {
    node: null,
    recursive: !1,
    rootVisible: !1,
    sorters: undefined,
    filters: undefined,
    folderSort: !1,
  },
  afterEdit: function (b, a) {
    if (a) {
      if (a.indexOf("loaded") !== -1) {
        return this.add(this.retrieveChildNodes(b));
      }
      if (a.indexOf("expanded") !== -1) {
        return this.filter();
      }
      if (a.indexOf("sorted") !== -1) {
        return this.sort();
      }
    }
    this.callParent(arguments);
  },
  onNodeAppend: function (b, a) {
    this.add([a].concat(this.retrieveChildNodes(a)));
  },
  onNodeInsert: function (b, a) {
    this.add([a].concat(this.retrieveChildNodes(a)));
  },
  onNodeRemove: function (b, a) {
    this.remove([a].concat(this.retrieveChildNodes(a)));
  },
  onNodeSort: function () {
    this.sort();
  },
  updateFolderSort: function (a) {
    if (a) {
      this.setGrouper(function (b) {
        if (b.isLeaf()) {
          return 1;
        }
        return 0;
      });
    } else {
      this.setGrouper(null);
    }
  },
  createDataCollection: function () {
    var a = this.callParent();
    a.handleSort = Ext.Function.bind(this.handleTreeSort, this, [a], !0);
    a.findInsertionIndex = Ext.Function.bind(
      this.handleTreeInsertionIndex,
      this,
      [a, a.findInsertionIndex],
      !0
    );
    return a;
  },
  handleTreeInsertionIndex: function (c, d, a, b) {
    return b.call(a, c, d, this.treeSortFn);
  },
  handleTreeSort: function (a) {
    Ext.Array.sort(a, this.treeSortFn);
    return a;
  },
  treeSortFn: function (c, d) {
    if (c.parentNode === d.parentNode) {
      return c.data.index < d.data.index ? -1 : 1;
    }
    var e = 0,
      f = 0,
      a = c,
      b = d;
    while (a) {
      e += Math.pow(10, (a.data.depth + 1) * -4) * (a.data.index + 1);
      a = a.parentNode;
    }
    while (b) {
      f += Math.pow(10, (b.data.depth + 1) * -4) * (b.data.index + 1);
      b = b.parentNode;
    }
    if (e > f) {
      return 1;
    } else {
      if (e < f) {
        return -1;
      }
    }
    return c.data.index > d.data.index ? 1 : -1;
  },
  applyFilters: function (b) {
    var a = this;
    return function (c) {
      return a.isVisible(c);
    };
  },
  applyProxy: function (a) {},
  applyNode: function (a) {
    if (a) {
      a = Ext.data.NodeInterface.decorate(a);
    }
    return a;
  },
  updateNode: function (a, c) {
    if (c && !c.isDestroyed) {
      c.un({
        append: "onNodeAppend",
        insert: "onNodeInsert",
        remove: "onNodeRemove",
        load: "onNodeLoad",
        scope: this,
      });
      c.unjoin(this);
    }
    if (a) {
      a.on({
        scope: this,
        append: "onNodeAppend",
        insert: "onNodeInsert",
        remove: "onNodeRemove",
        load: "onNodeLoad",
      });
      a.join(this);
      var b = [];
      if (a.childNodes.length) {
        b = b.concat(this.retrieveChildNodes(a));
      }
      if (this.getRootVisible()) {
        b.push(a);
      } else {
        if (a.isLoaded() || a.isLoading()) {
          a.set("expanded", !0);
        }
      }
      this.data.clear();
      this.fireEvent("clear", this);
      this.suspendEvents();
      this.add(b);
      this.resumeEvents();
      if (b.length === 0) {
        this.loaded = a.loaded = !0;
      }
      this.fireEvent("refresh", this, this.data);
    }
  },
  retrieveChildNodes: function (b) {
    var e = this.getNode(),
      d = this.getRecursive(),
      c = [],
      a = b;
    if (!b.childNodes.length || (!d && b !== e)) {
      return c;
    }
    if (!d) {
      return b.childNodes;
    }
    while (a) {
      if (a._added) {
        delete a._added;
        if (a === b) {
          break;
        } else {
          a = a.nextSibling || a.parentNode;
        }
      } else {
        if (a !== b) {
          c.push(a);
        }
        if (a.firstChild) {
          a._added = !0;
          a = a.firstChild;
        } else {
          a = a.nextSibling || a.parentNode;
        }
      }
    }
    return c;
  },
  isVisible: function (b) {
    var a = b.parentNode;
    if (!this.getRecursive() && a !== this.getNode()) {
      return !1;
    }
    while (a) {
      if (!a.isExpanded()) {
        return !1;
      }
      if (a === this.getNode()) {
        break;
      }
      a = a.parentNode;
    }
    return !0;
  },
});
Ext.define("Ext.data.TreeStore", {
  extend: Ext.data.NodeStore,
  alias: "store.tree",
  config: {
    root: undefined,
    clearOnLoad: !0,
    nodeParam: "node",
    defaultRootId: "root",
    defaultRootProperty: "children",
    recursive: !0,
  },
  applyProxy: function () {
    return Ext.data.Store.prototype.applyProxy.apply(this, arguments);
  },
  applyRoot: function (a) {
    var b = this;
    a = a || {};
    a = Ext.apply({}, a);
    if (!a.isModel) {
      Ext.applyIf(a, {
        id: b.getStoreId() + "-" + b.getDefaultRootId(),
        text: "Root",
        allowDrag: !1,
      });
      a = Ext.data.ModelManager.create(a, b.getModel());
    }
    Ext.data.NodeInterface.decorate(a);
    a.set(a.raw);
    return a;
  },
  handleTreeInsertionIndex: function (d, a, b, c) {
    if (a.parentNode) {
      a.parentNode.sort(b.getSortFn(), !0, !0);
    }
    return this.callParent(arguments);
  },
  handleTreeSort: function (b, a) {
    if (this._sorting) {
      return b;
    }
    this._sorting = !0;
    this.getNode().sort(a.getSortFn(), !0, !0);
    delete this._sorting;
    return this.callParent(arguments);
  },
  updateRoot: function (a, b) {
    if (b) {
      b.unBefore({ expand: "onNodeBeforeExpand", scope: this });
      b.unjoin(this);
    }
    a.onBefore({ expand: "onNodeBeforeExpand", scope: this });
    this.onNodeAppend(null, a);
    this.setNode(a);
    if (!a.isLoaded() && !a.isLoading() && a.isExpanded()) {
      this.load({ node: a });
    }
    this.fireEvent("rootchange", this, a, b);
  },
  getNodeById: function (a) {
    return this.data.getByKey(a);
  },
  getById: function (a) {
    return this.data.getByKey(a);
  },
  onNodeBeforeExpand: function (b, c, a) {
    if (b.isLoading()) {
      a.pause();
      this.on(
        "load",
        function () {
          a.resume();
        },
        this,
        { single: !0 }
      );
    } else {
      if (!b.isLoaded()) {
        a.pause();
        this.load({
          node: b,
          callback: function () {
            a.resume();
          },
        });
      }
    }
  },
  onNodeAppend: function (m, b) {
    var l = this.getProxy(),
      g = l.getReader(),
      k = this.getModel(),
      h = b.raw,
      f = [],
      j = g.getRootProperty(),
      e,
      d,
      c,
      i,
      a;
    if (!b.isLeaf()) {
      e = g.getRoot(h);
      if (e) {
        d = g.extractData(e);
        for (c = 0, i = d.length; c < i; c++) {
          a = d[c];
          f.push(new k(a.data, a.id, a.node));
        }
        if (f.length) {
          this.fillNode(b, f);
        } else {
          b.set("loaded", !0);
        }
        delete h[j];
      }
    }
  },
  updateAutoLoad: function (b) {
    if (b) {
      var a = this.getRoot();
      if (!a.isLoaded() && !a.isLoading()) {
        this.load({ node: a });
      }
    }
  },
  load: function (a) {
    a = a || {};
    a.params = a.params || {};
    var b = this,
      c = (a.node = a.node || b.getRoot());
    a.params[b.getNodeParam()] = c.getId();
    if (b.getClearOnLoad()) {
      c.removeAll(!0);
    }
    c.set("loading", !0);
    return b.callParent([a]);
  },
  updateProxy: function (b) {
    this.callParent(arguments);
    var a = b.getReader();
    if (!a.getRootProperty()) {
      a.setRootProperty(this.getDefaultRootProperty());
      a.buildExtractors();
    }
  },
  removeAll: function () {
    this.getRoot().removeAll(!0);
    this.callParent(arguments);
  },
  onProxyLoad: function (a) {
    var d = this,
      c = a.getRecords(),
      e = a.wasSuccessful(),
      b = a.getNode();
    b.beginEdit();
    b.set("loading", !1);
    if (e) {
      c = d.fillNode(b, c);
    }
    b.endEdit();
    d.loading = !1;
    d.loaded = !0;
    b.fireEvent("load", b, c, e);
    d.fireEvent("load", this, c, e, a);
    Ext.callback(a.getCallback(), a.getScope() || d, [c, a, e]);
  },
  fillNode: function (c, a) {
    var e = a ? a.length : 0,
      b,
      d;
    for (b = 0; b < e; b++) {
      d = c.appendChild(a[b], !0, !0);
      this.onNodeAppend(c, d);
    }
    c.set("loaded", !0);
    return a;
  },
});
Ext.define(
  "Ext.dataview.NestedList",
  {
    alternateClassName: "Ext.NestedList",
    extend: Ext.Container,
    xtype: "nestedlist",
    config: {
      baseCls: Ext.baseCSSPrefix + "nested-list",
      backText: "Back",
      useTitleAsBackText: !0,
      updateTitleText: !0,
      displayField: "text",
      loadingText: "Loading...",
      emptyText: "No items available.",
      onItemDisclosure: !1,
      allowDeselect: !1,
      useToolbar: null,
      toolbar: { docked: "top", xtype: "titlebar", ui: "light", inline: !0 },
      title: "",
      layout: {
        type: "card",
        animation: { type: "slide", duration: 250, direction: "left" },
      },
      store: null,
      detailContainer: undefined,
      detailCard: null,
      backButton: { ui: "back", hidden: !0 },
      listConfig: null,
      useSimpleItems: !0,
      itemHeight: 47,
      variableHeights: !1,
      lastNode: null,
      lastActiveList: null,
      ui: null,
      clearSelectionOnListChange: !0,
    },
    platformConfig: [
      { theme: ["Windows"], itemHeight: 42 },
      {
        theme: ["Cupertino"],
        itemHeight: 43,
        useTitleAsBackText: !0,
        updateTitleText: !1,
      },
      { theme: ["Blackberry"], toolbar: { splitNavigation: !0 } },
      { theme: ["Tizen"], backText: "" },
    ],
    constructor: function (a) {
      if (Ext.isObject(a)) {
        if (a.getTitleTextTpl) {
          this.getTitleTextTpl = a.getTitleTextTpl;
        }
        if (a.getItemTextTpl) {
          this.getItemTextTpl = a.getItemTextTpl;
        }
      }
      this.callParent(arguments);
    },
    onItemInteraction: function () {
      if (this.isGoingTo) {
        return !1;
      }
    },
    applyDetailContainer: function (a) {
      if (!a) {
        a = this;
      }
      return a;
    },
    updateDetailContainer: function (a, b) {
      if (a) {
        a.onBefore("activeitemchange", "onBeforeDetailContainerChange", this);
        a.onAfter("activeitemchange", "onDetailContainerChange", this);
      }
    },
    onBeforeDetailContainerChange: function () {
      this.isGoingTo = !0;
    },
    onDetailContainerChange: function () {
      this.isGoingTo = !1;
    },
    onItemTap: function (b, a, f, e, g) {
      var d = this,
        h = b.getStore(),
        c = h.getAt(a);
      d.fireEvent("itemtap", this, b, a, f, e, g);
      if (c.isLeaf()) {
        d.fireEvent("leafitemtap", this, b, a, f, e, g);
        d.goToLeaf(c);
      } else {
        this.goToNode(c);
      }
    },
    onBeforeSelect: function () {
      this.fireEvent.apply(
        this,
        [].concat("beforeselect", this, Array.prototype.slice.call(arguments))
      );
    },
    onContainerTap: function () {
      this.fireEvent.apply(
        this,
        [].concat("containertap", this, Array.prototype.slice.call(arguments))
      );
    },
    onSelectionChange: function () {
      this.fireEvent.apply(
        this,
        [].concat(
          "selectionchange",
          this,
          Array.prototype.slice.call(arguments)
        )
      );
    },
    onItemDoubleTap: function () {
      this.fireEvent.apply(
        this,
        [].concat("itemdoubletap", this, Array.prototype.slice.call(arguments))
      );
    },
    onStoreBeforeLoad: function () {
      var a = this.getLoadingText(),
        b = this.getScrollable();
      if (a) {
        this.setMasked({ xtype: "loadmask", message: a });
        if (b) {
          b.getScroller().setDisabled(!0);
        }
      }
      this.fireEvent.apply(
        this,
        [].concat("beforeload", this, Array.prototype.slice.call(arguments))
      );
    },
    onStoreLoad: function (a, d, b, c) {
      this.setMasked(!1);
      this.fireEvent.apply(
        this,
        [].concat("load", this, Array.prototype.slice.call(arguments))
      );
      if (a.indexOf(this.getLastNode()) === -1) {
        this.goToNode(a.getRoot());
      }
    },
    onBackTap: function () {
      var a = this,
        e = a.getLastNode(),
        b = a.getDetailCard(),
        c = b && a.getActiveItem() == b,
        d = a.getLastActiveList();
      this.fireAction("back", [this, e, d, c], "doBack");
    },
    doBack: function (a, e, b, f) {
      var d = a.getLayout(),
        c = d ? d.getAnimation() : null;
      if (f && b) {
        if (c) {
          c.setReverse(!0);
        }
        a.setActiveItem(b);
        a.setLastNode(e.parentNode);
        a.syncToolbar();
      } else {
        this.goToNode(e.parentNode);
      }
    },
    updateData: function (a) {
      if (!this.getStore()) {
        this.setStore(new Ext.data.TreeStore({ root: a }));
      }
    },
    applyStore: function (a) {
      if (a) {
        if (Ext.isString(a)) {
          a = Ext.data.StoreManager.get(a);
        } else {
          if (!(a instanceof Ext.data.TreeStore)) {
            a = Ext.factory(a, Ext.data.TreeStore, null);
          }
        }
      }
      return a;
    },
    storeListeners: {
      rootchange: "onStoreRootChange",
      load: "onStoreLoad",
      beforeload: "onStoreBeforeLoad",
    },
    updateStore: function (c, a) {
      var d = this,
        b = this.storeListeners;
      b.scope = d;
      if (a && Ext.isObject(a) && a.isStore) {
        if (a.autoDestroy) {
          a.destroy();
        }
        a.un(b);
      }
      if (c) {
        c.on(b);
        d.goToNode(c.getRoot());
      }
    },
    onStoreRootChange: function (b, a) {
      this.goToNode(a);
    },
    applyBackButton: function (a) {
      return Ext.factory(a, Ext.Button, this.getBackButton());
    },
    applyDetailCard: function (a, b) {
      if (a === null) {
        return Ext.factory(a, Ext.Component, b);
      } else {
        return Ext.factory(a, Ext.Component);
      }
    },
    updateBackButton: function (a, c) {
      if (a) {
        var b = this;
        a.on("tap", b.onBackTap, b);
        a.setText(b.getBackText());
        var d = b.getToolbar();
        if (this.$backButtonContainer) {
          this.$backButtonContainer.insert(0, a);
        } else {
          d.insert(0, a);
        }
      } else {
        if (c) {
          c.destroy();
        }
      }
    },
    applyToolbar: function (a) {
      if (a && a.splitNavigation) {
        Ext.apply(a, { docked: "top", xtype: "titlebar", ui: "light" });
        var b = a.splitNavigation === !0 ? {} : a.splitNavigation;
        this.$backButtonContainer = this.add(
          Ext.apply(
            { xtype: "toolbar", docked: "bottom", hidden: !0, ui: "dark" },
            b
          )
        );
      }
      return Ext.factory(a, Ext.TitleBar, this.getToolbar());
    },
    updateToolbar: function (a, b) {
      var c = this;
      if (a) {
        a.setTitle(c.getTitle());
        if (!a.getParent()) {
          c.add(a);
        }
      } else {
        if (b) {
          b.destroy();
        }
      }
    },
    updateUseToolbar: function (a, b) {
      if (!a) {
        this.setToolbar(!1);
      }
    },
    updateTitle: function (c) {
      var b = this,
        a = b.getToolbar();
      if (a) {
        if (b.getUpdateTitleText()) {
          a.setTitle(c);
        }
      }
    },
    getItemTextTpl: function (a) {
      return "{" + this.getDisplayField() + "}";
    },
    getTitleTextTpl: function (a) {
      return "{" + this.getDisplayField() + "}";
    },
    renderTitleText: function (a, c) {
      if (!a.titleTpl) {
        a.titleTpl = Ext.create("Ext.XTemplate", this.getTitleTextTpl(a));
      }
      if (a.isRoot()) {
        var b = this.getInitialConfig("title");
        return c && b === "" ? this.getInitialConfig("backText") : b;
      }
      return a.titleTpl.applyTemplate(a.data);
    },
    goToNode: function (b) {
      if (!b) {
        return;
      }
      var a = this,
        f = a.getActiveItem(),
        h = a.getDetailCard(),
        g = h && a.getActiveItem() == h,
        k = a.goToNodeReverseAnimation(b),
        e = a.firstList,
        i = a.secondList,
        j = a.getLayout(),
        d = j ? j.getAnimation() : null,
        c;
      if (b.isLeaf()) {
        throw new Error("goToNode: passed a node which is a leaf.");
      }
      if (b == a.getLastNode() && !g) {
        return;
      }
      if (g) {
        if (d) {
          d.setReverse(!0);
        }
        c = a.getLastActiveList();
        c.getStore().setNode(b);
        b.expand();
        a.setActiveItem(c);
      } else {
        if (d) {
          d.setReverse(k);
        }
        if (e && i) {
          f = a.getActiveItem();
          a.setLastActiveList(f);
          c = f == e ? i : e;
          c.getStore().setNode(b);
          b.expand();
          a.setActiveItem(c);
          if (this.getClearSelectionOnListChange()) {
            c.deselectAll();
          }
        } else {
          if (e) {
            a.setLastActiveList(a.getActiveItem());
            a.setActiveItem(a.getList(b));
            a.secondList = a.getActiveItem();
          } else {
            a.setActiveItem(a.getList(b));
            a.firstList = a.getActiveItem();
          }
        }
      }
      a.fireEvent("listchange", this, a.getActiveItem());
      a.setLastNode(b);
      a.syncToolbar();
    },
    goToLeaf: function (d) {
      if (!d.isLeaf()) {
        throw new Error("goToLeaf: passed a node which is not a leaf.");
      }
      var a = this,
        c = a.getDetailCard(d),
        b = a.getDetailContainer(),
        g = b == this,
        f = a.getLayout(),
        e = f ? f.getAnimation() : !1;
      if (c) {
        if (b.getItems().indexOf(c) === -1) {
          b.add(c);
        }
        if (g) {
          if (a.getActiveItem() instanceof Ext.dataview.List) {
            a.setLastActiveList(a.getActiveItem());
          }
          a.setLastNode(d);
        }
        if (e) {
          e.setReverse(!1);
        }
        b.setActiveItem(c);
        a.syncToolbar();
      }
    },
    syncToolbar: function (h) {
      var a = this,
        e = a.getDetailCard(),
        b = a.getLastNode(),
        g = h || (e && a.getActiveItem() == e),
        d = g ? b : b.parentNode,
        c = a.getBackButton();
      if (c) {
        var i = this.getToolbar(),
          f = i.getInitialConfig("splitNavigation");
        if (f) {
          this.$backButtonContainer[d ? "show" : "hide"]();
        }
        c[d ? "show" : "hide"]();
        if (d && a.getUseTitleAsBackText()) {
          c.setText(a.renderTitleText(b.parentNode, !0));
        }
      }
      if (b) {
        a.setTitle(a.renderTitleText(b));
      }
    },
    updateBackText: function (a) {
      this.getBackButton().setText(a);
    },
    goToNodeReverseAnimation: function (b) {
      var c = this,
        a = c.getLastNode();
      if (!a) {
        return !1;
      }
      return !a.contains(b) && a.isAncestor(b) ? !0 : !1;
    },
    getList: function (b) {
      var a = this,
        c = Ext.create("Ext.data.NodeStore", {
          recursive: !1,
          node: b,
          rootVisible: !1,
          model: a.getStore().getModel(),
        });
      b.expand();
      return Ext.Object.merge(
        {
          xtype: "list",
          useSimpleItems: a.getUseSimpleItems(),
          pressedDelay: 250,
          autoDestroy: !0,
          store: c,
          onItemDisclosure: a.getOnItemDisclosure(),
          allowDeselect: a.getAllowDeselect(),
          itemHeight: a.getItemHeight(),
          variableHeights: a.getVariableHeights(),
          emptyText: a.getEmptyText(),
          listeners: [
            { event: "itemdoubletap", fn: "onItemDoubleTap", scope: a },
            {
              event: "itemtap",
              fn: "onItemInteraction",
              scope: a,
              order: "before",
            },
            {
              event: "itemtouchstart",
              fn: "onItemInteraction",
              scope: a,
              order: "before",
            },
            { event: "itemtap", fn: "onItemTap", scope: a },
            { event: "beforeselectionchange", fn: "onBeforeSelect", scope: a },
            { event: "containertap", fn: "onContainerTap", scope: a },
            {
              event: "selectionchange",
              fn: "onSelectionChange",
              order: "before",
              scope: a,
            },
          ],
          itemTpl:
            '<span<tpl if="leaf == true"> class="x-list-item-leaf"</tpl>>' +
            a.getItemTextTpl(b) +
            "</span>",
        },
        this.getListConfig()
      );
    },
  },
  function () {}
);
Ext.define("MEM.localization.EN", { extend: Ext.Base, singleton: !0 });
if (window.ME_LANG == "en") {
  var check = function (b) {
      var a = Ext.global.navigator,
        c = a.userAgent;
      return b.test(a.userAgent.toLowerCase());
    },
    isChrome = check(/\bchrome\b/);
  if (isChrome) {
    Ext.Date.monthNames.push("");
  }
  Date.getShortMonthName = function (a) {
    return Date.monthNames[a].substring(0, 3);
  };
  Date.getShortDayName = function (a) {
    return Date.dayNames[a].substring(0, 3);
  };
  Date.getMonthNumber = function (a) {
    return Date.monthNumbers[
      a.substring(0, 1).toUpperCase() + a.substring(1, 3).toLowerCase()
    ];
  };
  Ext.define("Ext.MeIndexBar", {
    override: "Ext.IndexBar",
    config: {
      letters: [
        "A",
        "B",
        "C",
        "D",
        "E",
        "F",
        "G",
        "H",
        "I",
        "J",
        "K",
        "L",
        "M",
        "N",
        "O",
        "P",
        "Q",
        "R",
        "S",
        "T",
        "U",
        "V",
        "W",
        "X",
        "Y",
        "Z",
        "Å",
        "Ä",
        "Ö",
      ],
    },
  });
  if (Ext.NestedList) {
    Ext.override(Ext.NestedList, {
      backText: "Back",
      loadingText: "Loading...",
      emptyText: "No items available.",
    });
  }
  Ext.util.Format.defaultDateFormat = "Y-m-d";
}
Ext.define("MEM.localization.SV", { extend: Ext.Base, singleton: !0 });
if (!window.ME_LANG || window.ME_LANG == "sv") {
  var check = function (b) {
      var a = Ext.global.navigator,
        c = a.userAgent;
      return b.test(a.userAgent.toLowerCase());
    },
    isChrome = check(/\bchrome\b/);
  Ext.define("MEM.localization.MessageBox", {
    override: "Ext.MessageBox",
    statics: {
      OK: { text: "OK", itemId: "ok", ui: "action" },
      YES: { text: "Ja", itemId: "yes", ui: "action" },
      NO: { text: "Nej", itemId: "no" },
      CANCEL: { text: "Avbryt", itemId: "cancel" },
      INFO: Ext.baseCSSPrefix + "msgbox-info",
      WARNING: Ext.baseCSSPrefix + "msgbox-warning",
      QUESTION: Ext.baseCSSPrefix + "msgbox-question",
      ERROR: Ext.baseCSSPrefix + "msgbox-error",
      OKCANCEL: [
        { text: "Avbryt", itemId: "cancel" },
        { text: "OK", itemId: "ok", ui: "action" },
      ],
      YESNOCANCEL: [
        { text: "Avbryt", itemId: "cancel" },
        { text: "Nej", itemId: "no" },
        { text: "Ja", itemId: "yes", ui: "action" },
      ],
      YESNO: [
        { text: "Nej", itemId: "no" },
        { text: "Ja", itemId: "yes", ui: "action" },
      ],
    },
  });
  Ext.Date.dayNames = [
    "Söndag",
    "Måndag",
    "Tisdag",
    "Onsdag",
    "Torsdag",
    "Fredag",
    "Lördag",
  ];
  Ext.Date.monthNames = [
    "Januari",
    "Februari",
    "Mars",
    "April",
    "Maj",
    "Juni",
    "Juli",
    "Augusti",
    "September",
    "Oktober",
    "November",
    "December",
  ];
  if (isChrome) {
    Ext.Date.monthNames.push("");
  }
  Ext.apply(Date, {
    monthNumbers: {
      Jan: 0,
      Feb: 1,
      Mar: 2,
      Apr: 3,
      May: 4,
      Jun: 5,
      Jul: 6,
      Aug: 7,
      Sep: 8,
      Oct: 9,
      Nov: 10,
      Dec: 11,
      "": 12,
    },
  });
  Date.getShortMonthName = function (a) {
    return Date.monthNames[a].substring(0, 3);
  };
  Date.getShortDayName = function (a) {
    return Date.dayNames[a].substring(0, 3);
  };
  Date.getMonthNumber = function (a) {
    return Date.monthNumbers[
      a.substring(0, 1).toUpperCase() + a.substring(1, 3).toLowerCase()
    ];
  };
  Ext.define("Ext.MePicker", {
    override: "Ext.picker.Picker",
    config: { cancelButton: "Avbryt", doneButton: "Välj" },
  });
  Ext.define("Ext.MeIndexBar", {
    override: "Ext.IndexBar",
    config: {
      letters: [
        "A",
        "B",
        "C",
        "D",
        "E",
        "F",
        "G",
        "H",
        "I",
        "J",
        "K",
        "L",
        "M",
        "N",
        "O",
        "P",
        "Q",
        "R",
        "S",
        "T",
        "U",
        "V",
        "W",
        "X",
        "Y",
        "Z",
        "Å",
        "Ä",
        "Ö",
      ],
    },
  });
  if (Ext.NestedList) {
    Ext.override(Ext.NestedList, {
      backText: "Back",
      loadingText: "Laddar...",
      emptyText: "No items available.",
    });
  }
  Ext.util.Format.defaultDateFormat = "Y-m-d";
}
Ext.define("MEM.me", { extend: Ext.Base, singleton: !0 });
function isPhoneDevice() {
  var a = Ext.os,
    b = Ext.global.navigator.userAgent,
    c =
      a.is.iPad ||
      a.is.RIMTablet ||
      a.is.Android3 ||
      Ext.browser.is.Silk ||
      (a.is.Android && b.search(/mobile/i) === -1);
  return Ext.os.deviceType === "Phone" && !c;
}
var isPhone = isPhoneDevice(),
  smallSpace = isPhone ? 3 : 5,
  largeSpace = isPhone ? 10 : 20,
  TIME_MODE = !1,
  TIME_VERSION = 0,
  AWO_MODE = !1,
  DIARY_MODE = !1,
  PHONE_TEXTAREA_HEIGHT = 70,
  PAD_TEXTAREA_HEIGHT = 100,
  CURRENT_PROJECTID,
  CURRENT_PROJECTNO,
  CURRENT_PROJECTNAME,
  CURRENT_WORKORDERID,
  COST_MODE = !1,
  TIMER = new Date(),
  STATUS_FINISHED = 90,
  STATUS_NOTED = 10,
  _approved,
  _approved2,
  IS_IOSgt9 = Boolean(Ext.os.is.iOS && Ext.os.version.major > 9),
  IS_IOSgt10 = Boolean(Ext.os.is.iOS && Ext.os.version.major > 10),
  PREVENT_ZOOM_CSS_REQUIRED = IS_IOSgt9 && !navigator.standalone,
  LABEL_WIDTH = PREVENT_ZOOM_CSS_REQUIRED ? "40%" : "30%";
function retIcon(a) {
  if (a == undefined ? !1 : a || _approved) {
    return 'class="noTrashIcon"><span>&nbsp;</span>';
  } else {
    return 'class="x-button-normal x-button x-iconalign-center trashIcon"><span class="x-button-icon trash2 x-icon-mask"/>"';
  }
}
function isNumber(a) {
  return !isNaN(parseFloat(a)) && isFinite(a);
}
function withSeparator(a) {
  if (isNaN(a)) {
    return "";
  } else {
    return Math.round(a)
      .toString()
      .replace(/\B(?=(\d{3})+(?!\d))/g, " ");
  }
}
function setcookie(d, c, b, e) {
  var a = new Date();
  a.setDate(a.getDate() + (b ? b : 0));
  c = escape(c) + (b == null ? "" : "; expires=" + a.toUTCString());
  document.cookie = d + "=" + c + ";path = " + e + ";";
}
function deletecookie(b) {
  var a = location.pathname.split("/"),
    c = location.pathname.substr(0, location.pathname.indexOf(a[a.length - 2]));
  myCookie = this.setcookie(b, 0, -1, c);
}
function getUserSetting(b) {
  var c = Ext.getStore("MyUserSettingStore"),
    a = c.findRecord("SettingKey", b, 0, !1, !1, !0);
  if (a) {
    return a.get("SettingValue");
  } else {
    return;
  }
}
function havePersonalNo() {
  return !Ext.isEmpty(MEM.app.getUserRec().get("PersonalNo"));
}
function saveUserSetting(e, d, c) {
  var b = Ext.getStore("MyUserSettingStore"),
    a = b.findRecord("SettingKey", d, 0, !1, !1, !0);
  if (!a) {
    a = Ext.ModelManager.create(
      { Id: null, SettingKey: d, SettingValue: c, UserId: e },
      b.getModel()
    );
    a.setId(null);
    b.add(a);
    b.sync();
  } else {
    if (a.get("SettingValue") != c) {
      a.set("SettingValue", c);
      b.sync();
    }
  }
}
function haveRight(e, a) {
  var c = Ext.getStore("MyUserAccessStore"),
    b;
  if (!a) {
    a = 1;
  }
  b = c.findExact("ObjectName", e);
  if (b == -1) {
    return !1;
  }
  var f = c.data.items[b],
    d = f.get("AccessRight");
  return d >= a;
}
function getSetting(c) {
  var a = Ext.getStore("MyOptionValueStore"),
    b;
  if (!a.isLoaded()) {
    console.debug(
      "MyOptionValueStore has not yet been loaded... Value: " +
        c +
        " not loaded"
    );
    return;
  }
  a.clearFilter();
  b = a.find("SettingKey", c);
  if (a.getRange(b, b)[0]) {
    return a.getRange(b, b)[0]._data.SettingValue;
  } else {
    var e = Ext.getStore("MySettingStore"),
      d;
    if (e.isLoaded) {
      d = e.findRecord("Name", c);
      if (d != null) {
        return d.get("Value").toString();
      } else {
        return;
      }
    } else {
      console.debug(
        "MySettingStore was not loaded... must be loaded at startup."
      );
    }
  }
}
function timingX(c) {
  var b = new Date(),
    a;
  a = b.getTime() - TIMER.getTime();
  console.log(c, a);
  return a;
}
function pad(c, b) {
  var a = c + "";
  while (a.length < b) {
    a = "0" + a;
  }
  return a;
}
function AWOpad(c, b) {
  var a = c + "";
  while (a.length < b) {
    a = "0" + a;
  }
  return getSetting("System.Prefix.VariationNo") + a;
}
function checkRequired(e) {
  var c = e ? e.getFields() : null,
    a,
    d = !0,
    f,
    b;
  for (f in c) {
    a = c[f];
    if (!a.length) {
      b =
        (a.getHidden() == null ? !0 : !a.getHidden()) &&
        a.getRequired() &&
        (a.getValue() === "" || a.getValue() == null);
      if (b) {
        a.addCls("x-invalid");
        d = !1;
      } else {
        a.removeCls("x-invalid");
      }
    }
  }
  return d;
}
function Time() {
  var a = new Date();
  var c = a.getHours();
  var b = a.getMinutes();
  var d = a.getSeconds();
  b = checkTime(b);
  clock = Ext.getCmp("clock");
  clock.setHidden(!1);
  clock.setHtml(c + ":" + b);
  t = setTimeout(function () {
    Time();
  }, 6000);
}
function checkTime(a) {
  if (a < 10) {
    a = "0" + a;
  }
  return a;
}
function getAbsenceProjectId() {
  var a = MEM.app.getController("Common");
  return a.absenceProjectId();
}
Ext.define("MEM.serverError", {
  singleton: !0,
  show: function (e, a, h, g) {
    var k = this,
      i,
      c,
      b;
    MEM.loadSpinner.hide();
    switch (e) {
      case "string":
        b = Ext.util.Format.htmlEncode(a);
        break;
      case "exception":
        b = Ext.util.Format.htmlEncode(a, h, g);
        break;
      case "proxy":
        if (a && a.responseText) {
          try {
            obj = Ext.decode(a.responseText);
            if (obj.errors) {
              if (obj.success == !1) {
                return;
              }
              b = obj.errors;
            }
          } catch (l) {}
        }
        if (b == undefined) {
          if (a != undefined && a.responseText) {
            b = Ext.util.Format.htmlEncode(a.responseText);
          } else {
            if (a != undefined && a.statusText) {
              b = Ext.util.Format.htmlEncode(a.statusText);
            } else {
              Ext.Msg.alert(
                T("No connection"),
                T("No connection, please try again later")
              );
              return;
            }
          }
          if (a == undefined && a.status) {
            c = Ext.util.Format.htmlEncode(a.status);
          }
        }
        break;
      case "ajax":
        if (a != undefined && a.responseText) {
          b = Ext.util.Format.htmlEncode(a.responseText);
        } else {
          if (a != undefined && a.statusText) {
            b = Ext.util.Format.htmlEncode(a.statusText);
          } else {
            console.dir(a);
            Ext.Msg.alert(
              T("No connection"),
              T("No connection, please try again later")
            );
            return;
          }
        }
        if (a == undefined && a.status) {
          c = Ext.util.Format.htmlEncode(a.status);
        }
        break;
      default:
        b =
          "Unknown type (" +
          e +
          "), submitted to serverError function. <br>" +
          Ext.util.Format.htmlEncode(a);
        break;
    }
    b =
      b == undefined
        ? ""
        : b
            .replace(new RegExp("&lt;/.*&gt;", "gi"), " ")
            .replace(new RegExp("&lt;.*&gt;", "gi"), "");
    if (b.indexOf("communication failure") >= 0) {
      Ext.Msg.alert(
        T("No connection"),
        T("No connection, please try again later") + " *"
      );
      return;
    }
    try {
      var d = Ext.getCmp("myErrorOverlay");
      var f = Ext.Viewport;
      if (undefined == d) {
        d = Ext.create("MEM.view.MyErrorOverlay");
      }
      d.showBy(f);
      html =
        Ext.getCmp("errorNote").getHtml() == null
          ? ""
          : Ext.getCmp("errorNote").getHtml() + "<hr>";
      msg =
        "<center>" +
        T("Server Error") +
        ",<br>" +
        T("please try again later") +
        "." +
        (c ? "<br>(" + Ext.util.Format.htmlEncode(c) + ")" : "") +
        (b ? "<br> " + b + "<br>" : "") +
        "<br>Type: " +
        e +
        "<br>" +
        "</center>";
      if (html.indexOf(msg) < 0 && "" != b ? b : "") {
        Ext.getCmp("errorNote").setHtml(html + msg);
      }
    } catch (m) {
      var j = Ext.Msg.show({
        title: T("Server Error"),
        message:
          T("Server Error") +
          ",<br>" +
          T("please try again later") +
          ".<br>(" +
          m +
          ")",
        fn: function () {
          Ext.Ajax.request({ url: "reload.html", method: "GET" });
          window.location.reload(!0);
        },
      });
    }
  },
});
Date.patterns = {
  ISO8601Long: "Y-m-d H:i:s",
  ISO8601Short: "Y-m-d",
  ShortDate: "n/j/Y",
  LongDate: "l, F d, Y",
  FullDateTime: "l, F d, Y g:i:s A",
  MonthDay: "F d",
  ShortTime: "g:i A",
  LongTime: "g:i:s A",
  SortableDateTime: "Y-m-d\\TH:i:s",
  UniversalSortableDateTime: "Y-m-d H:i:sO",
  YearMonth: "F, Y",
};
Ext.define("MEM.Error", {
  singleton: !0,
  show: function (c, b, a) {
    Ext.Msg.alert(
      T("Error"),
      c.message +
        (b != undefined ? "<br>(" + b.id + ")" : "") +
        (a != undefined ? "<br>" + a + "()" : "")
    );
  },
});
Ext.define("MEM.loadSpinner", {
  singleton: !0,
  showSpinner: function (a) {
    this.show("", a);
  },
  hideSpinner: function (a) {
    this.hide(null, null, null, a);
  },
  show: function (a, b) {
    function view() {
      var c = Ext.Viewport.getMasked();
      if (!a) {
        a = T("Loading...");
      }
      if (!c || c.getId() != "myLoadMask") {
        Ext.Viewport.setMasked({
          id: "myLoadMask",
          xtype: "loadmask",
          message: a,
          indicator: !0,
        });
      } else {
        c.setMessage(a);
        c.show();
      }
    }
    if (!this._key || !Ext.isArray(this._key)) {
      this._key = [];
    }
    var c = b ? this._key.indexOf(b) : -1;
    if (b && c < 0) {
      this._key.push(b);
    }
    Ext.defer(view, 60);
  },
  hide: function (d, f, e, c) {
    var a = this;
    if (this._key && Ext.isArray(this._key)) {
      var b = c ? this._key.indexOf(c) : -1;
      if (b > -1) {
        this._key.splice(b, 1);
      }
      if (this._key.length) {
        return;
      }
    }
    Ext.defer(function () {
      var b = Ext.Viewport.getMasked(),
        g = a._key && Ext.isArray(a._key) && a._key.length;
      if (!g && b && b.getId() == "myLoadMask") {
        Ext.Viewport.setMasked(!1);
      }
    }, 80);
    if (d) {
      MEM.Error.show(d, f, e);
    }
  },
});
function encodeSorters(b) {
  var a,
    d,
    c = [];
  for (a = 0; a < b.length; a++) {
    c.push([b[a].property, b[a].direction]);
  }
  if (c.length) {
    return Ext.JSON.encode(c);
  }
}
Ext.define("Me", {
  extends: "Ext.Base",
  singleton: !0,
  SHOWERRORS: !1,
  Moms: 1.25,
  IMAGE_URL: "",
  STORE_URL: "../cgi/me.cgi/data/store/",
  API_URL: "../cgi/me.cgi/api/",
  slotOrderDate: ["year", "month", "day"],
  slotOrderDateTime: ["year", "month", "day", "hour", "minute"],
  getIcon: function (b, a) {
    return this.IMAGE_URL + b + "." + (a || "png");
  },
  getDefaultMessageText: function () {
    return "A problem occured";
  },
  debug: !1,
  loadAllStoresRecursive: function (a, b) {
    var d = this,
      c = a.shift();
    if (c) {
      d.loadAllStores(c, function () {
        d.loadAllStoresRecursive(a, b);
      });
    } else {
      b();
    }
  },
  loadAllStores: function (a, b) {
    var c = 0;
    if (Ext.isArray(a[0])) {
      return this.loadAllStoresRecursive(a, b);
    }
    function afterLoad(e) {
      var d;
      if (a.length != undefined) {
        d = a.length;
      } else {
        d = 1;
      }
      if (++c == d) {
        c = 0;
        b();
      }
    }
    Ext.each(a, function (c, d) {
      var e = {};
      if (typeof c == "string") {
        c = Ext.getStore(c);
      }
      if (c.config.meBeforeStartupLoad) {
        c.config.meBeforeStartupLoad(c);
      }
      if (c.isLoaded() && !c.isLoading()) {
        console.log("in loadAllStores(), store already loaded", d, c);
        console.log("used to cause problems");
        afterLoad(c);
      } else {
        c.on(
          "load",
          function () {
            afterLoad(arguments);
          },
          this,
          { single: !0 }
        );
        if (!c.isLoading()) {
          c.load();
        } else {
          console.log("in loadAllStores(), store already loading", d, c);
        }
      }
    });
  },
  onException: function (f, a, b, e) {
    console.log(f);
    console.log(a);
    console.log(b);
    console.log(e);
    if (a.request.status !== 200) {
      Ext.Msg.alert("Error", this.getDefaultMessageText());
      console.log("url - incorrect status [" + a.request.status + "]", b.url);
      return;
    }
    if (a.getAllResponseHeaders()["content-type"] !== "application/json") {
      Ext.Msg.alert("Error", this.getDefaultMessageText());
      console.log("url - wrong content-type", b.url);
      return;
    }
    var c = Ext.decode(a.responseText);
    if (b.success === !1 || c.success == !1) {
      console.log("url", b.url);
      var d = c ? c.error || c.errors : null;
      Ext.Msg.alert("Error", d || this.getDefaultMessageText());
    }
  },
  initModels: function (a) {
    Ext.each(
      a,
      function (b) {
        this.createModel(b.name, b.fields, b.validations);
      },
      this
    );
  },
  initCloneStores: function (a, b) {
    var c = this;
    Ext.each(
      a,
      function (d) {
        Ext.each(b, function (e) {
          if (d.name == e.name) {
            c.createStore(d.name, e.options, !0);
          }
        });
      },
      this
    );
  },
  createModel: function (c, b, a) {
    Ext.define("MEM.model." + c, {
      extend: "MEM.model.Base",
      config: { fields: b, validations: a, idPropery: "Id" },
    });
  },
  findRecord: function (b, d, e) {
    var a, c;
    for (a = 0, c = b.length; a < c; a++) {
      if (b[a].get(d) == e) {
        return b[a];
      }
    }
    return null;
  },
  overrideProxyErrors: function () {
    Ext.override(Ext.data.proxy.Server, {
      constructor: function (a) {
        this.callOverridden([a]);
        this.addListener("exception", function (d, b, c) {
          if (Me.SHOWERRORS) {
            console.log("Proxy error");
            console.log(d);
            console.log(b);
            console.log(c);
            if (b.responseText != null) {
              Ext.Msg.alert(Me.getDefaultMessageText(), b.responseText);
            }
          }
        });
      },
    });
  },
  getFormattedNumeric: function (a) {
    var b;
    if (Math.round(a) == a) {
      b = a;
    } else {
      if (Math.round(a * 10) / 10 == a) {
        b = a;
      } else {
        b = Math.round(a * 100) / 100;
      }
    }
    return b.toLocaleString();
  },
  formValidateHidden: function (d, c) {
    var b = Ext.getStore("MyFormValidationStore"),
      a = b.findBy(function (a) {
        return a.get("StoreName") == d && a.get("FieldName") == c;
      });
    if (a > -1 && b.getAt(a).get("Hidden")) {
      return !0;
    }
    return !1;
  },
  formValidateAllowBlank: function (d, c) {
    var b = Ext.getStore("MyFormValidationStore"),
      a = b.findBy(function (a) {
        return a.get("StoreName") == d && a.get("FieldName") == c;
      });
    if (a < 0) {
      return !0;
    }
    var e = b.getAt(a).get("AllowBlank");
    if (e === !1) {
      return !1;
    }
    return !0;
  },
  getStringPart: function (d, c, b) {
    if (b) {
      var a = d;
      while (b.measureText(a).width > c) {
        a = a.substring(0, a.length - 1);
      }
      return a;
    } else {
      return d.substr(0, c - 2);
    }
  },
  string2Lines: function (j, f, k, i, d) {
    var a = j ? j : "",
      e = a.length ? [] : [""],
      h = d ? d.measureText(a).width : a.length;
    while (h && (!i || e.length < i)) {
      if (a && (h > f || a.indexOf("\n") > -1)) {
        if (k) {
          var c = this.getStringPart(a, f, d),
            g = c.indexOf("\n"),
            b = Math.max(
              c.lastIndexOf(" "),
              c.lastIndexOf("."),
              c.lastIndexOf("!"),
              c.lastIndexOf("?")
            );
          if (b == 0 && c.length) {
            b = 1;
          }
          if (g > 0 && g < b) {
            b = g;
          }
          if (b !== -1) {
            e.push(c.substr(0, b));
            a = a.substr(b).trim();
          } else {
            e.push(a.substr(0, f));
            a = a.substr(f).trim();
          }
        }
      } else {
        e.push(a);
        a = a.substr(f);
      }
      h = d ? d.measureText(a).width : a.length;
    }
    return e;
  },
  fixWidthString: function (b, a, c) {
    return c.padStart(b, a);
  },
  templateRender: function (e, f, i) {
    function applyModifierText(b, a) {
      if (!b) {
        b = "";
      }
      if (a[0] == ["["]) {
        a = a.slice(1, -1);
        var d = a.split(":");
        return b ? d[1] : d[0];
      }
      var c = " ";
      if (a[0] === "0") {
        c = "0";
        a = a.slice(1);
      }
      return Me.fixWidthString(a, c, b);
    }
    function applyModifierTpl(g, a) {
      var h;
      var b = g.slice(1, -1);
      if (a[0] == ["["]) {
        a = a.slice(1, -1);
        var d = a.split(":");
        return (
          "<tpl if='" + b + " == true'>" + d[1] + "<tpl else>" + d[0] + "</tpl>"
        );
      }
      var c = " ";
      if (a[0] === "0") {
        c = "0";
        a = a.slice(1);
      }
      return (
        "{[Me.fixWidthString(" + a + ", '" + c + "', values." + b + " + '');]}"
      );
    }
    if (i === "tpl") {
      applyModifier = applyModifierTpl;
    } else {
      applyModifier = applyModifierText;
    }
    var k = new RegExp("{[^}]*}", "g"),
      c = e;
    while (!0) {
      var g = k.exec(e),
        d,
        b;
      if (g === null) {
        break;
      }
      d = g[0];
      a = d.slice(1, -1);
      if (a.indexOf(":") > 0) {
        var h = a.indexOf(":");
        var j = a.slice(h + 1);
        var a = a.slice(0, h);
        b = applyModifier(f[a], j);
      } else {
        b = f[a];
      }
      c = c.replace(d, b);
    }
    return c;
  },
});
Ext.define("MEM.localization.NO", { extend: Ext.Base, singleton: !0 });
if (window.ME_LANG == "no") {
  var check = function (b) {
      var a = Ext.global.navigator,
        c = a.userAgent;
      return b.test(a.userAgent.toLowerCase());
    },
    isChrome = check(/\bchrome\b/);
  Ext.define("MEM.localization.MessageBox", {
    override: "Ext.MessageBox",
    statics: {
      OK: { text: "OK", itemId: "ok", ui: "action" },
      YES: { text: "Ja", itemId: "yes", ui: "action" },
      NO: { text: "Nei", itemId: "no" },
      CANCEL: { text: "Avbryt", itemId: "cancel" },
      INFO: Ext.baseCSSPrefix + "msgbox-info",
      WARNING: Ext.baseCSSPrefix + "msgbox-warning",
      QUESTION: Ext.baseCSSPrefix + "msgbox-question",
      ERROR: Ext.baseCSSPrefix + "msgbox-error",
      OKCANCEL: [
        { text: "Avbryt", itemId: "cancel" },
        { text: "OK", itemId: "ok", ui: "action" },
      ],
      YESNOCANCEL: [
        { text: "Avbryt", itemId: "cancel" },
        { text: "Nei", itemId: "no" },
        { text: "Ja", itemId: "yes", ui: "action" },
      ],
      YESNO: [
        { text: "Nei", itemId: "no" },
        { text: "Ja", itemId: "yes", ui: "action" },
      ],
    },
  });
  Ext.Date.dayNames = [
    "Søndag",
    "Mandag",
    "Tirsdag",
    "Onsdag",
    "Torsdag",
    "Fredag",
    "Lørdag",
  ];
  Ext.Date.monthNames = [
    "Januar",
    "Februar",
    "Mars",
    "April",
    "Mai",
    "Juni",
    "Juli",
    "August",
    "September",
    "Oktober",
    "November",
    "Desember",
  ];
  if (isChrome) {
    Ext.Date.monthNames.push("");
  }
  Ext.apply(Date, {
    monthNumbers: {
      Jan: 0,
      Feb: 1,
      Mar: 2,
      Apr: 3,
      May: 4,
      Jun: 5,
      Jul: 6,
      Aug: 7,
      Sep: 8,
      Oct: 9,
      Nov: 10,
      Dec: 11,
      "": 12,
    },
  });
  Date.getShortMonthName = function (a) {
    return Date.monthNames[a].substring(0, 3);
  };
  Date.getShortDayName = function (a) {
    return Date.dayNames[a].substring(0, 3);
  };
  Date.getMonthNumber = function (a) {
    return Date.monthNumbers[
      a.substring(0, 1).toUpperCase() + a.substring(1, 3).toLowerCase()
    ];
  };
  Ext.define("Ext.MePicker", {
    override: "Ext.picker.Picker",
    config: { cancelButton: "Avbryt", doneButton: "Velg" },
  });
  Ext.define("Ext.MeIndexBar", {
    override: "Ext.IndexBar",
    config: {
      letters: [
        "A",
        "B",
        "C",
        "D",
        "E",
        "F",
        "G",
        "H",
        "I",
        "J",
        "K",
        "L",
        "M",
        "N",
        "O",
        "P",
        "Q",
        "R",
        "S",
        "T",
        "U",
        "V",
        "W",
        "X",
        "Y",
        "Z",
        "Æ",
        "Ø",
        "Å",
      ],
    },
  });
  if (Ext.NestedList) {
    Ext.override(Ext.NestedList, {
      backText: "Back",
      loadingText: "Laster...",
      emptyText: "No items available.",
    });
  }
  Ext.util.Format.defaultDateFormat = "d.m.Y";
  Me.slotOrderDate = ["day", "month", "year"];
  Me.slotOrderDateTime = ["day", "month", "year", "hour", "minute"];
}
Ext.define("MEM.overrides.MessageBox", {
  override: "Ext.MessageBox",
  hide: function () {
    console.log("override hide()");
    if (this.activeAnimation && this.activeAnimation._onEnd) {
      this.activeAnimation._onEnd();
    }
    return this.callParent(arguments);
  },
});
Ext.define(
  "Ext.SegmentedButton",
  {
    extend: Ext.Container,
    xtype: "segmentedbutton",
    config: {
      baseCls: Ext.baseCSSPrefix + "segmentedbutton",
      pressedCls: Ext.baseCSSPrefix + "button-pressed",
      allowMultiple: !1,
      allowDepress: !1,
      allowToggle: !0,
      pressedButtons: [],
      layout: { type: "hbox", align: "stretch" },
      defaultType: "button",
    },
    initialize: function () {
      var a = this;
      a.callParent();
      a.on({ delegate: "> button", scope: a, tap: "onButtonRelease" });
      a.onAfter({
        delegate: "> button",
        scope: a,
        hide: "onButtonHiddenChange",
        show: "onButtonHiddenChange",
      });
    },
    updateAllowMultiple: function (a) {
      if (
        !this.initialized &&
        !this.getInitialConfig().hasOwnProperty("allowDepress") &&
        a
      ) {
        this.setAllowDepress(!0);
      }
    },
    applyItems: function () {
      var c = this,
        d = [],
        f,
        b,
        e,
        a;
      c.callParent(arguments);
      a = this.getItems();
      f = a.length;
      for (b = 0; b < f; b++) {
        e = a.items[b];
        if (e.getInitialConfig("pressed")) {
          d.push(a.items[b]);
        }
      }
      c.updateFirstAndLastCls(a);
      c.setPressedButtons(d);
    },
    onButtonRelease: function (c) {
      if (!this.getAllowToggle()) {
        return;
      }
      var b = this,
        e = b.getPressedButtons() || [],
        a = [],
        d;
      if (!b.getDisabled() && !c.getDisabled()) {
        if (b.getAllowMultiple()) {
          a = e.concat(a);
        }
        d = a.indexOf(c) !== -1 || e.indexOf(c) !== -1;
        if (d && b.getAllowDepress()) {
          Ext.Array.remove(a, c);
        } else {
          if (!d || !b.getAllowDepress()) {
            a.push(c);
          }
        }
        b.setPressedButtons(a);
      }
    },
    onItemAdd: function () {
      this.callParent(arguments);
      this.updateFirstAndLastCls(this.getItems());
    },
    onItemRemove: function () {
      this.callParent(arguments);
      this.updateFirstAndLastCls(this.getItems());
    },
    onButtonHiddenChange: function () {
      this.updateFirstAndLastCls(this.getItems());
    },
    updateFirstAndLastCls: function (c) {
      var d = c.length,
        e = Ext.baseCSSPrefix,
        f = e + "first",
        g = e + "last",
        b,
        a;
      for (a = 0; a < d; a++) {
        b = c.items[a];
        b.removeCls(f);
        b.removeCls(g);
      }
      for (a = 0; a < d; a++) {
        b = c.items[a];
        if (!b.isHidden()) {
          b.addCls(f);
          break;
        }
      }
      for (a = d - 1; a >= 0; a--) {
        b = c.items[a];
        if (!b.isHidden()) {
          b.addCls(g);
          break;
        }
      }
    },
    applyPressedButtons: function (c) {
      var e = this,
        b = [],
        a,
        f,
        d;
      if (e.getAllowToggle()) {
        if (Ext.isArray(c)) {
          f = c.length;
          for (d = 0; d < f; d++) {
            a = e.getComponent(c[d]);
            if (a && b.indexOf(a) === -1) {
              b.push(a);
            }
          }
        } else {
          a = e.getComponent(c);
          if (a && b.indexOf(a) === -1) {
            b.push(a);
          }
        }
      }
      return b;
    },
    updatePressedButtons: function (h, c) {
      var g = this,
        k = g.getItems(),
        j = g.getPressedCls(),
        f = [],
        d,
        e,
        b,
        a,
        i;
      b = k.length;
      if (c && c.length) {
        for (a = 0; a < b; a++) {
          d = k.items[a];
          if (c.indexOf(d) != -1 && h.indexOf(d) == -1) {
            d.removeCls([j, d.getPressedCls()]);
            f.push({ item: d, toggle: !1 });
          }
        }
      }
      b = h.length;
      for (a = 0; a < b; a++) {
        e = h[a];
        if (!c || c.indexOf(e) == -1) {
          e.addCls(j);
          f.push({ item: e, toggle: !0 });
        }
      }
      b = f.length;
      if (b && c !== undefined) {
        Ext.defer(function () {
          for (a = 0; a < b; a++) {
            i = f[a];
            g.fireEvent("toggle", g, i.item, i.toggle);
          }
        }, 50);
      }
    },
    isPressed: function (b) {
      var a = this.getPressedButtons();
      return a.indexOf(b) != -1;
    },
    doSetDisabled: function (b) {
      var a = this;
      a.items.each(function (a) {
        a.setDisabled(b);
      }, a);
      a.callParent(arguments);
    },
  },
  function () {}
);
Ext.define("Ext.app.Action", {
  config: {
    scope: null,
    application: null,
    controller: null,
    action: null,
    args: [],
    url: undefined,
    data: {},
    title: null,
    beforeFilters: [],
    currentFilterIndex: -1,
  },
  constructor: function (a) {
    this.initConfig(a);
    this.getUrl();
  },
  applyBeforeFilters: function (a) {
    return a || [];
  },
  execute: function () {
    this.resume();
  },
  resume: function () {
    var c = this.getCurrentFilterIndex() + 1,
      d = this.getBeforeFilters(),
      a = this.getController(),
      b = d[c];
    if (b) {
      this.setCurrentFilterIndex(c);
      b.call(a, this);
    } else {
      a[this.getAction()].apply(a, this.getArgs());
    }
  },
  applyUrl: function (a) {
    if (a === null || a === undefined) {
      a = this.urlEncode();
    }
    return a;
  },
  applyController: function (a) {
    var c = this.getApplication(),
      b = c.getCurrentProfile();
    if (Ext.isString(a)) {
      a = c.getController(a, b ? b.getNamespace() : null);
    }
    return a;
  },
  urlEncode: function () {
    var a = this.getController(),
      b;
    if (a instanceof Ext.app.Controller) {
      b = a.$className.split(".");
      a = b[b.length - 1];
    }
    return a + "/" + this.getAction();
  },
});
Ext.define(
  "Ext.app.Controller",
  {
    mixins: { observable: Ext.mixin.Observable },
    config: {
      refs: {},
      routes: {},
      control: {},
      before: {},
      application: {},
      stores: [],
      models: [],
      views: [],
    },
    constructor: function (a) {
      this.initConfig(a);
      this.mixins.observable.constructor.call(this, a);
    },
    init: Ext.emptyFn,
    launch: Ext.emptyFn,
    redirectTo: function (a) {
      return this.getApplication().redirectTo(a);
    },
    execute: function (a, b) {
      a.setBeforeFilters(this.getBefore()[a.getAction()]);
      a.execute();
    },
    applyBefore: function (c) {
      var a, d, e, b;
      for (d in c) {
        a = Ext.Array.from(c[d]);
        e = a.length;
        for (b = 0; b < e; b++) {
          a[b] = this[a[b]];
        }
        c[d] = a;
      }
      return c;
    },
    applyControl: function (a) {
      this.control(a, this);
      return a;
    },
    applyRefs: function (a) {
      this.ref(a);
      return a;
    },
    applyRoutes: function (c) {
      var f =
          this instanceof Ext.app.Application ? this : this.getApplication(),
        e = f.getRouter(),
        b,
        d,
        a;
      for (d in c) {
        b = c[d];
        a = { controller: this.$className };
        if (Ext.isString(b)) {
          a.action = b;
        } else {
          Ext.apply(a, b);
        }
        e.connect(d, a);
      }
      return c;
    },
    applyStores: function (a) {
      return this.getFullyQualified(a, "store");
    },
    applyModels: function (a) {
      return this.getFullyQualified(a, "model");
    },
    applyViews: function (a) {
      return this.getFullyQualified(a, "view");
    },
    getFullyQualified: function (c, e) {
      var f = c.length,
        d = this.getApplication().getName(),
        a,
        b;
      for (b = 0; b < f; b++) {
        a = c[b];
        if (Ext.isString(a) && (Ext.Loader.getPrefix(a) === "" || a === d)) {
          c[b] = d + "." + e + "." + a;
        }
      }
      return c;
    },
    control: function (a) {
      this.getApplication().control(a, this);
    },
    ref: function (b) {
      var f = this,
        a,
        c,
        e,
        d;
      for (a in b) {
        e = b[a];
        c = "get" + Ext.String.capitalize(a);
        if (!this[c]) {
          if (Ext.isString(b[a])) {
            d = { ref: a, selector: e };
          } else {
            d = b[a];
          }
          this[c] = (function (c, d) {
            var a = [c, d];
            return function () {
              return f.getRef.apply(f, a.concat.apply(a, arguments));
            };
          })(a, d);
        }
        this.references = this.references || [];
        this.references.push(a.toLowerCase());
      }
    },
    getRef: function (c, a, e) {
      this.refCache = this.refCache || {};
      a = a || {};
      e = e || {};
      Ext.apply(a, e);
      if (a.forceCreate) {
        return Ext.ComponentManager.create(a, "component");
      }
      var d = this,
        b = d.refCache[c];
      if (!b) {
        d.refCache[c] = b = Ext.ComponentQuery.query(a.selector)[0];
        if (!b && a.autoCreate) {
          d.refCache[c] = b = Ext.ComponentManager.create(a, "component");
        }
        if (b) {
          b.on("destroy", function () {
            d.refCache[c] = null;
          });
        }
      }
      return b;
    },
    hasRef: function (a) {
      return this.references && this.references.indexOf(a.toLowerCase()) !== -1;
    },
  },
  function () {}
);
Ext.define("Ext.app.History", {
  mixins: [Ext.mixin.Observable],
  config: { actions: [], updateUrl: !0, token: "" },
  constructor: function (a) {
    if (Ext.feature.has.History) {
      window.addEventListener(
        "hashchange",
        Ext.bind(this.detectStateChange, this)
      );
    } else {
      setInterval(Ext.bind(this.detectStateChange, this), 100);
    }
    this.initConfig(a);
    if (a && Ext.isEmpty(a.token)) {
      this.setToken(window.location.hash.substr(1));
    }
  },
  add: function (a, c) {
    a = Ext.factory(a, Ext.app.Action);
    this.getActions().push(a);
    var b = a.getUrl();
    if (this.getUpdateUrl()) {
      this.setToken(b);
      window.location.hash = b;
    }
    if (c !== !0) {
      this.fireEvent("change", b);
    }
    this.setToken(b);
  },
  back: function () {
    var a = this.getActions(),
      b = a[a.length - 2];
    if (b) {
      a.pop();
      b.getController().getApplication().redirectTo(b.getUrl());
    } else {
      a[a.length - 1].getController().getApplication().redirectTo("");
    }
  },
  applyToken: function (a) {
    return a[0] == "#" ? a.substr(1) : a;
  },
  detectStateChange: function () {
    var a = this.applyToken(window.location.hash),
      b = this.getToken();
    if (a != b) {
      this.onStateChange();
      this.setToken(a);
    }
  },
  onStateChange: function () {
    this.fireEvent("change", window.location.hash.substr(1));
  },
});
Ext.define("Ext.app.Profile", {
  mixins: { observable: Ext.mixin.Observable },
  config: {
    namespace: "auto",
    name: "auto",
    controllers: [],
    models: [],
    views: [],
    stores: [],
    application: null,
  },
  constructor: function (a) {
    this.initConfig(a);
    this.mixins.observable.constructor.apply(this, arguments);
  },
  isActive: function () {
    return !1;
  },
  launch: Ext.emptyFn,
  applyNamespace: function (a) {
    if (a == "auto") {
      a = this.getName();
    }
    return a.toLowerCase();
  },
  applyName: function (a) {
    if (a == "auto") {
      var b = this.$className.split(".");
      a = b[b.length - 1];
    }
    return a;
  },
  getDependencies: function () {
    var d = [],
      h = Ext.String.format,
      e = this.getApplication().getName(),
      f = this.getNamespace(),
      a = {
        model: this.getModels(),
        view: this.getViews(),
        controller: this.getControllers(),
        store: this.getStores(),
      },
      b,
      c,
      g;
    for (b in a) {
      c = [];
      Ext.each(
        a[b],
        function (a) {
          if (Ext.isString(a)) {
            if (
              Ext.isString(a) &&
              (Ext.Loader.getPrefix(a) === "" || a === e)
            ) {
              a = e + "." + b + "." + f + "." + a;
            }
            c.push(a);
            d.push(a);
          }
        },
        this
      );
      a[b] = c;
    }
    a.all = d;
    return a;
  },
});
Ext.define("Ext.app.Route", {
  config: {
    conditions: {},
    url: null,
    controller: null,
    action: null,
    initialized: !1,
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  recognize: function (a) {
    if (!this.getInitialized()) {
      this.initialize();
    }
    if (this.recognizes(a)) {
      var c = this.matchesFor(a),
        b = a.match(this.matcherRegex);
      b.shift();
      return Ext.applyIf(c, {
        controller: this.getController(),
        action: this.getAction(),
        url: a,
        args: b,
        historyUrl: a,
      });
    }
  },
  initialize: function () {
    this.paramMatchingRegex = new RegExp(/:([0-9A-Za-z\_]*)/g);
    this.paramsInMatchString =
      this.getUrl().match(this.paramMatchingRegex) || [];
    this.matcherRegex = this.createMatcherRegex(this.getUrl());
    this.setInitialized(!0);
  },
  recognizes: function (a) {
    return this.matcherRegex.test(a);
  },
  matchesFor: function (f) {
    var b = {},
      d = this.paramsInMatchString,
      c = f.match(this.matcherRegex),
      e = d.length,
      a;
    c.shift();
    for (a = 0; a < e; a++) {
      b[d[a].replace(":", "")] = c[a];
    }
    return b;
  },
  argsFor: function (f) {
    var e = [],
      b = this.paramsInMatchString,
      c = f.match(this.matcherRegex),
      d = b.length,
      a;
    c.shift();
    for (a = 0; a < d; a++) {
      e.push(b[a].replace(":", ""));
      params[b[a].replace(":", "")] = c[a];
    }
    return params;
  },
  urlFor: function (b) {
    var a = this.getUrl();
    for (var c in b) {
      a = a.replace(":" + c, b[c]);
    }
    return a;
  },
  createMatcherRegex: function (c) {
    var b = this.paramsInMatchString,
      f = b.length,
      a,
      e,
      d;
    for (a = 0; a < f; a++) {
      e = this.getConditions()[b[a]];
      d = Ext.util.Format.format("({0})", e || "[%a-zA-Z0-9\\-\\_\\s,]+");
      c = c.replace(new RegExp(b[a]), d);
    }
    return new RegExp("^" + c + "$");
  },
});
Ext.define(
  "Ext.app.Router",
  {
    config: { routes: [], defaults: { action: "index" } },
    constructor: function (a) {
      this.initConfig(a);
    },
    connect: function (c, a) {
      a = Ext.apply({ url: c }, a || {}, this.getDefaults());
      var b = Ext.create("Ext.app.Route", a);
      this.getRoutes().push(b);
      return b;
    },
    recognize: function (e) {
      var c = this.getRoutes(),
        d = c.length,
        a,
        b;
      for (a = 0; a < d; a++) {
        b = c[a].recognize(e);
        if (b !== undefined) {
          return b;
        }
      }
      return undefined;
    },
    draw: function (a) {
      a.call(this, this);
    },
    clear: function () {
      this.setRoutes([]);
    },
  },
  function () {}
);
Ext.define(
  "Ext.app.Application",
  {
    extend: Ext.app.Controller,
    config: {
      profiles: [],
      controllers: [],
      history: {},
      name: null,
      appFolder: "app",
      router: {},
      controllerInstances: [],
      profileInstances: [],
      currentProfile: null,
      launch: Ext.emptyFn,
      enableLoader: !0,
      requires: [],
      themeVariationPrefix: Ext.baseCSSPrefix + "theme-variation-",
      themeVariationTransitionCls: null,
      themeVariation: null,
    },
    constructor: function (a) {
      a = a || {};
      Ext.applyIf(a, { application: this });
      this.initConfig(a);
      for (var b in a) {
        this[b] = a[b];
      }
      Ext.require(
        this.getRequires(),
        function () {
          if (this.getEnableLoader() !== !1) {
            Ext.require(this.getProfiles(), this.onProfilesLoaded, this);
          }
        },
        this
      );
    },
    dispatch: function (a, d) {
      a = a || {};
      Ext.applyIf(a, { application: this });
      a = Ext.factory(a, Ext.app.Action);
      if (a) {
        var c = this.getCurrentProfile(),
          e = c ? c.getNamespace() : undefined,
          b = this.getController(a.getController(), e);
        if (b) {
          if (d !== !1) {
            this.getHistory().add(a, !0);
          }
          b.execute(a);
        }
      }
    },
    redirectTo: function (b) {
      if (Ext.data && Ext.data.Model && b instanceof Ext.data.Model) {
        var c = b;
        b = c.toUrl();
      }
      var a = this.getRouter().recognize(b);
      if (a) {
        a.url = b;
        if (c) {
          a.data = {};
          a.data.record = c;
        }
        return this.dispatch(a);
      }
    },
    control: function (g, a) {
      a = a || this;
      var h = this.getEventDispatcher(),
        i = a ? a.getRefs() : {},
        b,
        e,
        c,
        f,
        d;
      for (b in g) {
        if (g.hasOwnProperty(b)) {
          f = g[b];
          d = i[b];
          if (d) {
            b = d.selector || d;
          }
          for (e in f) {
            c = f[e];
            if (Ext.isString(c)) {
              c = a[c];
            }
            h.addListener("component", b, e, c, a);
          }
        }
      }
    },
    getController: function (a, c) {
      var b = this.getControllerInstances(),
        e = this.getName(),
        f = Ext.String.format,
        d;
      if (a instanceof Ext.app.Controller) {
        return a;
      }
      if (b[a]) {
        return b[a];
      } else {
        d = f("{0}.controller.{1}", e, a);
        c = f("{0}.controller.{1}.{2}", e, c, a);
        return b[c] || b[d];
      }
    },
    onProfilesLoaded: function () {
      var f = this.getProfiles(),
        g = f.length,
        c = [],
        d = this.gatherDependencies(),
        e,
        a,
        b;
      for (a = 0; a < g; a++) {
        c[a] = Ext.create(f[a], { application: this });
        b = c[a].getDependencies();
        d = d.concat(b.all);
        if (c[a].isActive() && !e) {
          e = c[a];
          this.setCurrentProfile(e);
          this.setControllers(this.getControllers().concat(b.controller));
          this.setModels(this.getModels().concat(b.model));
          this.setViews(this.getViews().concat(b.view));
          this.setStores(this.getStores().concat(b.store));
        }
      }
      this.setProfileInstances(c);
      Ext.require(d, this.loadControllerDependencies, this);
    },
    loadControllerDependencies: function () {
      this.instantiateControllers();
      var e = this.getControllerInstances(),
        c = [],
        d = [],
        g,
        a,
        b,
        f;
      for (f in e) {
        a = e[f];
        b = a.getStores();
        d = d.concat(b);
        c = c.concat(a.getModels().concat(a.getViews()).concat(b));
      }
      this.setStores(this.getStores().concat(d));
      Ext.require(c, this.onDependenciesLoaded, this);
    },
    onDependenciesLoaded: function () {
      var d = this,
        c = this.getCurrentProfile(),
        e = this.getLaunch(),
        a,
        b;
      this.instantiateStores();
      a = this.getControllerInstances();
      for (b in a) {
        a[b].init(this);
      }
      if (c) {
        c.launch();
      }
      e.call(d);
      for (b in a) {
        a[b].launch(this);
      }
      d.redirectTo(window.location.hash.substr(1));
    },
    gatherDependencies: function () {
      var a = this.getModels()
        .concat(this.getViews())
        .concat(this.getControllers());
      Ext.each(
        this.getStores(),
        function (b) {
          if (Ext.isString(b)) {
            a.push(b);
          }
        },
        this
      );
      return a;
    },
    instantiateStores: function () {
      var c = this.getStores(),
        g = c.length,
        a,
        e,
        f,
        d,
        b;
      for (b = 0; b < g; b++) {
        a = c[b];
        if (Ext.data && Ext.data.Store && !(a instanceof Ext.data.Store)) {
          if (Ext.isString(a)) {
            f = a;
            e = Ext.ClassManager.classes[a];
            a = { xclass: a };
            if (e.prototype.defaultConfig.storeId === undefined) {
              d = f.split(".");
              a.id = d[d.length - 1];
            }
          }
          c[b] = Ext.factory(a, Ext.data.Store);
        }
      }
      this.setStores(c);
    },
    instantiateControllers: function () {
      var c = this.getControllers(),
        d = {},
        e = c.length,
        b,
        a;
      for (a = 0; a < e; a++) {
        b = c[a];
        d[b] = Ext.create(b, { application: this });
      }
      return this.setControllerInstances(d);
    },
    applyControllers: function (a) {
      return this.getFullyQualified(a, "controller");
    },
    applyProfiles: function (a) {
      return this.getFullyQualified(a, "profile");
    },
    applyName: function (a) {
      var b;
      if (a && a.match(/ /g)) {
        b = a;
        a = a.replace(/ /g, "");
      }
      return a;
    },
    updateName: function (a) {
      Ext.ClassManager.setNamespace(a + ".app", this);
      if (!Ext.Loader.config.paths[a]) {
        Ext.Loader.setPath(a, this.getAppFolder());
      }
    },
    applyRouter: function (a) {
      return Ext.factory(a, Ext.app.Router, this.getRouter());
    },
    applyHistory: function (b) {
      var a = Ext.factory(b, Ext.app.History, this.getHistory());
      a.on("change", this.onHistoryChange, this);
      return a;
    },
    onHistoryChange: function (a) {
      this.dispatch(this.getRouter().recognize(a), !1);
    },
    updateThemeVariation: function (a, l) {
      var c = Ext.getBody().getParent(),
        h = this.getThemeVariationPrefix() || "",
        b = this.getThemeVariationTransitionCls();
      if (Ext.isFunction(a)) {
        a = a.call(this);
      }
      if (!Ext.isString(a)) {
        Ext.Error.raise("Theme variation must be a String.'");
      }
      if (b) {
        var k = "",
          i = 0,
          j = document.styleSheets[0].cssRules,
          f,
          d,
          g,
          e;
        c.addCls(b);
        for (f in j) {
          d = j[f];
          if (d.selectorText && d.selectorText.indexOf("." + b) >= 1) {
            k += d.cssText;
          }
        }
        g = k.match(/[0-9]+s/g);
        for (f in g) {
          e = parseInt(g[f]);
          if (e > i) {
            i = e;
          }
        }
        if (this.$themeVariationChangeTimeout) {
          clearTimeout(this.$themeVariationChangeTimeout);
          this.$themeVariationChangeTimeout = null;
        }
        this.$themeVariationChangeTimeout = Ext.defer(function () {
          c.removeCls(b);
        }, e * 1000);
      }
      c.removeCls(h + l);
      c.addCls(h + a);
    },
  },
  function () {}
);
Ext.define("Ext.carousel.Item", {
  extend: Ext.Decorator,
  config: { baseCls: "x-carousel-item", component: null, translatable: !0 },
});
Ext.define("Ext.carousel.Indicator", {
  extend: Ext.Component,
  xtype: "carouselindicator",
  alternateClassName: "Ext.Carousel.Indicator",
  config: {
    baseCls: Ext.baseCSSPrefix + "carousel-indicator",
    direction: "horizontal",
  },
  initialize: function () {
    this.callParent();
    this.indicators = [];
    this.element.on({ tap: "onTap", scope: this });
  },
  updateDirection: function (a, b) {
    var c = this.getBaseCls();
    this.element.replaceCls(b, a, c);
    if (a === "horizontal") {
      this.setBottom(0);
      this.setRight(null);
    } else {
      this.setRight(0);
      this.setBottom(null);
    }
  },
  addIndicator: function () {
    this.indicators.push(this.element.createChild({ tag: "span" }));
  },
  removeIndicator: function () {
    var a = this.indicators;
    if (a.length > 0) {
      a.pop().destroy();
    }
  },
  setActiveIndex: function (e) {
    var c = this.indicators,
      f = this.activeIndex,
      a = c[f],
      b = c[e],
      d = this.getBaseCls();
    if (a) {
      a.removeCls(d, null, "active");
    }
    if (b) {
      b.addCls(d, null, "active");
    }
    this.activeIndex = e;
    return this;
  },
  onTap: function (f) {
    var c = f.touch,
      a = this.element.getPageBox(),
      d = a.left + a.width / 2,
      e = a.top + a.height / 2,
      b = this.getDirection();
    if (
      (b === "horizontal" && c.pageX >= d) ||
      (b === "vertical" && c.pageY >= e)
    ) {
      this.fireEvent("next", this);
    } else {
      this.fireEvent("previous", this);
    }
  },
  destroy: function () {
    var b = this.indicators,
      a,
      d,
      c;
    for (a = 0, d = b.length; a < d; a++) {
      c = b[a];
      c.destroy();
    }
    b.length = 0;
    this.callParent();
  },
});
Ext.define("Ext.util.TranslatableGroup", {
  extend: Ext.util.translatable.Abstract,
  config: { items: [], activeIndex: 0, itemLength: { x: 0, y: 0 } },
  applyItems: function (a) {
    return Ext.Array.from(a);
  },
  doTranslate: function (i, j) {
    var g = this.getItems(),
      k = this.getActiveIndex(),
      d = this.getItemLength(),
      l = d.x,
      m = d.y,
      n = Ext.isNumber(i),
      o = Ext.isNumber(j),
      b,
      a,
      h,
      c,
      e,
      f;
    for (a = 0, h = g.length; a < h; a++) {
      c = g[a];
      if (c) {
        b = a - k;
        if (n) {
          e = i + b * l;
        }
        if (o) {
          f = j + b * m;
        }
        c.translate(e, f);
      }
    }
  },
});
Ext.define(
  "Ext.carousel.Carousel",
  {
    extend: Ext.Container,
    alternateClassName: "Ext.Carousel",
    xtype: "carousel",
    config: {
      baseCls: "x-carousel",
      direction: "horizontal",
      directionLock: !1,
      animation: { duration: 250, easing: { type: "ease-out" } },
      indicator: !0,
      ui: "dark",
      itemConfig: {},
      bufferSize: 1,
      itemLength: null,
    },
    itemLength: 0,
    offset: 0,
    flickStartOffset: 0,
    flickStartTime: 0,
    dragDirection: 0,
    count: 0,
    painted: !1,
    activeIndex: -1,
    beforeInitialize: function () {
      this.element.on({
        dragstart: "onDragStart",
        drag: "onDrag",
        dragend: "onDragEnd",
        scope: this,
      });
      this.element.on("resize", "onSizeChange", this);
      this.carouselItems = [];
      this.orderedCarouselItems = [];
      this.inactiveCarouselItems = [];
      this.hiddenTranslation = 0;
    },
    updateBufferSize: function (e) {
      var j = Ext.carousel.Item,
        l = e * 2 + 1,
        g = this.isRendered(),
        f = this.innerElement,
        d = this.carouselItems,
        m = d.length,
        h = this.getItemConfig(),
        c = this.getItemLength(),
        k = this.getDirection(),
        i = k === "horizontal" ? "setWidth" : "setHeight",
        b,
        a;
      for (b = m; b < l; b++) {
        a = Ext.factory(h, j);
        if (c) {
          a[i].call(a, c);
        }
        a.setLayoutSizeFlags(this.LAYOUT_BOTH);
        d.push(a);
        f.append(a.renderElement);
        if (g && a.setRendered(!0)) {
          a.fireEvent("renderedchange", this, a, !0);
        }
      }
      this.getTranslatable().setActiveIndex(e);
    },
    setRendered: function (b) {
      var g = this.rendered;
      if (b !== g) {
        this.rendered = b;
        var f = this.items.items,
          e = this.carouselItems,
          a,
          c,
          d;
        for (a = 0, c = f.length; a < c; a++) {
          d = f[a];
          if (!d.isInnerItem()) {
            d.setRendered(b);
          }
        }
        for (a = 0, c = e.length; a < c; a++) {
          e[a].setRendered(b);
        }
        return !0;
      }
      return !1;
    },
    onSizeChange: function () {
      this.refreshSizing();
      this.refreshCarouselItems();
      this.refreshActiveItem();
    },
    onItemAdd: function (c, d) {
      this.callParent(arguments);
      var a = this.getInnerItems().indexOf(c),
        b = this.getIndicator();
      if (b && c.isInnerItem()) {
        b.addIndicator();
      }
      if (a <= this.getActiveIndex()) {
        this.refreshActiveIndex();
      }
      if (this.isIndexDirty(a) && !this.isItemsInitializing) {
        this.refreshActiveItem();
      }
    },
    doItemLayoutAdd: function (a) {
      if (a.isInnerItem()) {
        return;
      }
      this.callParent(arguments);
    },
    onItemRemove: function (c, h) {
      this.callParent(arguments);
      var e = this.getInnerItems().indexOf(c),
        f = this.getIndicator(),
        d = this.carouselItems,
        a,
        g,
        b;
      if (c.isInnerItem() && f) {
        f.removeIndicator();
      }
      if (e <= this.getActiveIndex()) {
        this.refreshActiveIndex();
      }
      if (this.isIndexDirty(e)) {
        for (a = 0, g = d.length; a < g; a++) {
          b = d[a];
          if (b.getComponent() === c) {
            b.setComponent(null);
          }
        }
        this.refreshActiveItem();
      }
    },
    doItemLayoutRemove: function (a) {
      if (a.isInnerItem()) {
        return;
      }
      this.callParent(arguments);
    },
    onInnerItemMove: function (c, b, a) {
      if (this.isIndexDirty(b) || this.isIndexDirty(a)) {
        this.refreshActiveItem();
      }
    },
    doItemLayoutMove: function (a) {
      if (a.isInnerItem()) {
        return;
      }
      this.callParent(arguments);
    },
    isIndexDirty: function (c) {
      var a = this.getActiveIndex(),
        b = this.getBufferSize();
      return c >= a - b && c <= a + b;
    },
    getTranslatable: function () {
      var a = this.translatable;
      if (!a) {
        this.translatable = a = new Ext.util.TranslatableGroup();
        a.setItems(this.orderedCarouselItems);
        a.on("animationend", "onAnimationEnd", this);
      }
      return a;
    },
    onDragStart: function (a) {
      var d = this.getDirection(),
        b = a.absDeltaX,
        c = a.absDeltaY,
        e = this.getDirectionLock();
      this.isDragging = !0;
      if (e) {
        if ((d === "horizontal" && b > c) || (d === "vertical" && c > b)) {
          a.stopPropagation();
        } else {
          this.isDragging = !1;
          return;
        }
      }
      this.getTranslatable().stopAnimation();
      this.dragStartOffset = this.offset;
      this.dragDirection = 0;
    },
    onDrag: function (g) {
      if (!this.isDragging) {
        return;
      }
      var j = this.dragStartOffset,
        k = this.getDirection(),
        c = k === "horizontal" ? g.deltaX : g.deltaY,
        d = this.offset,
        i = this.flickStartTime,
        a = this.dragDirection,
        f = Ext.Date.now(),
        e = this.getActiveIndex(),
        l = this.getMaxItemIndex(),
        h = a,
        b;
      if ((e === 0 && c > 0) || (e === l && c < 0)) {
        c *= 0.5;
      }
      b = j + c;
      if (b > d) {
        a = 1;
      } else {
        if (b < d) {
          a = -1;
        }
      }
      if (a !== h || f - i > 300) {
        this.flickStartOffset = d;
        this.flickStartTime = f;
      }
      this.dragDirection = a;
      this.setOffset(b);
    },
    onDragEnd: function (l) {
      if (!this.isDragging) {
        return;
      }
      this.onDrag(l);
      this.isDragging = !1;
      var k = Ext.Date.now(),
        g = this.itemLength,
        i = g / 2,
        d = this.offset,
        b = this.getActiveIndex(),
        j = this.getMaxItemIndex(),
        a = 0,
        e = d - this.flickStartOffset,
        f = k - this.flickStartTime,
        h = this.getIndicator(),
        c;
      if (f > 0 && Math.abs(e) >= 10) {
        c = e / f;
        if (Math.abs(c) >= 1) {
          if (c < 0 && b < j) {
            a = -1;
          } else {
            if (c > 0 && b > 0) {
              a = 1;
            }
          }
        }
      }
      if (a === 0) {
        if (b < j && d < -i) {
          a = -1;
        } else {
          if (b > 0 && d > i) {
            a = 1;
          }
        }
      }
      if (h) {
        h.setActiveIndex(b - a);
      }
      this.animationDirection = a;
      this.setOffsetAnimated(a * g);
    },
    applyAnimation: function (a) {
      a.easing = Ext.factory(a.easing, Ext.fx.easing.EaseOut);
      return a;
    },
    updateDirection: function (a) {
      var b = this.getIndicator();
      this.currentAxis = a === "horizontal" ? "x" : "y";
      if (b) {
        b.setDirection(a);
      }
    },
    setOffset: function (a) {
      this.offset = a;
      if (Ext.isNumber(this.itemOffset)) {
        this.getTranslatable().translateAxis(
          this.currentAxis,
          a + this.itemOffset
        );
      }
      return this;
    },
    setOffsetAnimated: function (b) {
      var a = this.getIndicator();
      if (a) {
        a.setActiveIndex(this.getActiveIndex() - this.animationDirection);
      }
      this.offset = b;
      this.getTranslatable().translateAxis(
        this.currentAxis,
        b + this.itemOffset,
        this.getAnimation()
      );
      return this;
    },
    onAnimationEnd: function (f) {
      var e = this.getActiveIndex(),
        b = this.animationDirection,
        g = this.currentAxis,
        c = f[g],
        d = this.itemLength,
        a;
      if (b === -1) {
        a = d + c;
      } else {
        if (b === 1) {
          a = c - d;
        } else {
          a = c;
        }
      }
      a -= this.itemOffset;
      this.offset = a;
      this.setActiveItem(e - b);
    },
    refresh: function () {
      this.refreshSizing();
      this.refreshActiveItem();
    },
    refreshSizing: function () {
      var e = this.element,
        b = this.getItemLength(),
        d = { x: 0, y: 0 },
        c,
        a;
      if (this.getDirection() === "horizontal") {
        a = e.getWidth();
      } else {
        a = e.getHeight();
      }
      this.hiddenTranslation = -a;
      if (b === null) {
        b = a;
        c = 0;
      } else {
        c = (a - b) / 2;
      }
      this.itemLength = b;
      this.itemOffset = c;
      d[this.currentAxis] = b;
      this.getTranslatable().setItemLength(d);
    },
    refreshOffset: function () {
      this.setOffset(this.offset);
    },
    refreshActiveItem: function () {
      this.doSetActiveItem(this.getActiveItem());
    },
    getActiveIndex: function () {
      return this.activeIndex;
    },
    refreshActiveIndex: function () {
      this.activeIndex = this.getInnerItemIndex(this.getActiveItem());
    },
    refreshCarouselItems: function () {
      var b = this.carouselItems,
        a,
        d,
        c;
      for (a = 0, d = b.length; a < d; a++) {
        c = b[a];
        c.getTranslatable().refresh();
      }
      this.refreshInactiveCarouselItems();
    },
    refreshInactiveCarouselItems: function () {
      var b = this.inactiveCarouselItems,
        e = this.hiddenTranslation,
        f = this.currentAxis,
        a,
        d,
        c;
      for (a = 0, d = b.length; a < d; a++) {
        c = b[a];
        c.translateAxis(f, e);
      }
    },
    getMaxItemIndex: function () {
      return this.innerItems.length - 1;
    },
    getInnerItemIndex: function (a) {
      return this.innerItems.indexOf(a);
    },
    getInnerItemAt: function (a) {
      return this.innerItems[a];
    },
    applyActiveItem: function () {
      var b = this.callParent(arguments),
        a;
      if (b) {
        a = this.getInnerItemIndex(b);
        if (a !== -1) {
          this.activeIndex = a;
          return b;
        }
      }
    },
    doSetActiveItem: function (l) {
      var i = this.getActiveIndex(),
        p = this.getMaxItemIndex(),
        o = this.getIndicator(),
        j = this.getBufferSize(),
        f = this.carouselItems.slice(),
        k = this.orderedCarouselItems,
        e = {},
        d = {},
        c,
        m,
        a,
        b,
        h,
        n,
        g;
      if (f.length === 0) {
        return;
      }
      this.callParent(arguments);
      k.length = 0;
      if (l) {
        a = l.getId();
        d[a] = l;
        e[a] = j;
        if (i > 0) {
          for (b = 1; b <= j; b++) {
            h = i - b;
            if (h >= 0) {
              c = this.getInnerItemAt(h);
              a = c.getId();
              d[a] = c;
              e[a] = j - b;
            } else {
              break;
            }
          }
        }
        if (i < p) {
          for (b = 1; b <= j; b++) {
            h = i + b;
            if (h <= p) {
              c = this.getInnerItemAt(h);
              a = c.getId();
              d[a] = c;
              e[a] = j + b;
            } else {
              break;
            }
          }
        }
        for (b = 0, n = f.length; b < n; b++) {
          g = f[b];
          m = g.getComponent();
          if (m) {
            a = m.getId();
            if (e.hasOwnProperty(a)) {
              f.splice(b, 1);
              b--;
              n--;
              delete d[a];
              k[e[a]] = g;
            }
          }
        }
        for (a in d) {
          if (d.hasOwnProperty(a)) {
            c = d[a];
            g = f.pop();
            g.setComponent(c);
            k[e[a]] = g;
          }
        }
      }
      this.inactiveCarouselItems.length = 0;
      this.inactiveCarouselItems = f;
      this.refreshOffset();
      this.refreshInactiveCarouselItems();
      if (o) {
        o.setActiveIndex(i);
      }
    },
    next: function () {
      this.setOffset(0);
      if (this.activeIndex === this.getMaxItemIndex()) {
        return this;
      }
      this.animationDirection = -1;
      this.setOffsetAnimated(-this.itemLength);
      return this;
    },
    previous: function () {
      this.setOffset(0);
      if (this.activeIndex === 0) {
        return this;
      }
      this.animationDirection = 1;
      this.setOffsetAnimated(this.itemLength);
      return this;
    },
    applyIndicator: function (b, a) {
      return Ext.factory(b, Ext.carousel.Indicator, a);
    },
    updateIndicator: function (a) {
      if (a) {
        this.insertFirst(a);
        a.setUi(this.getUi());
        a.on({ next: "next", previous: "previous", scope: this });
      }
    },
    destroy: function () {
      var a = this.carouselItems.slice();
      this.carouselItems.length = 0;
      Ext.destroy(a, this.getIndicator(), this.translatable);
      this.callParent();
      delete this.carouselItems;
    },
  },
  function () {}
);
Ext.define(
  "Ext.data.ArrayStore",
  {
    extend: Ext.data.Store,
    alias: "store.array",
    config: { proxy: { type: "memory", reader: "array" } },
    loadData: function (b, a) {
      this.callParent([b, a]);
    },
  },
  function () {
    Ext.data.SimpleStore = Ext.data.ArrayStore;
  }
);
Ext.define("Ext.direct.Manager", {
  singleton: !0,
  mixins: { observable: Ext.mixin.Observable },
  alternateClassName: "Ext.Direct",
  exceptions: {
    TRANSPORT: "xhr",
    PARSE: "parse",
    LOGIN: "login",
    SERVER: "exception",
  },
  constructor: function () {
    var a = this;
    a.transactions = Ext.create("Ext.util.Collection", this.getKey);
    a.providers = Ext.create("Ext.util.Collection", this.getKey);
  },
  getKey: function (a) {
    return a.getId();
  },
  addProvider: function (a) {
    var b = this,
      c = Ext.toArray(arguments),
      d = 0,
      e;
    if (c.length > 1) {
      for (e = c.length; d < e; ++d) {
        b.addProvider(c[d]);
      }
      return;
    }
    if (!a.isProvider) {
      a = Ext.create("direct." + a.type + "provider", a);
    }
    b.providers.add(a);
    a.on("data", b.onProviderData, b);
    if (!a.isConnected()) {
      a.connect();
    }
    return a;
  },
  getProvider: function (a) {
    return a.isProvider ? a : this.providers.get(a);
  },
  removeProvider: function (a) {
    var b = this,
      c = b.providers;
    a = a.isProvider ? a : c.get(a);
    if (a) {
      a.un("data", b.onProviderData, b);
      c.remove(a);
      return a;
    }
    return null;
  },
  addTransaction: function (a) {
    this.transactions.add(a);
    return a;
  },
  removeTransaction: function (a) {
    a = this.getTransaction(a);
    this.transactions.remove(a);
    return a;
  },
  getTransaction: function (a) {
    return Ext.isObject(a) ? a : this.transactions.get(a);
  },
  onProviderData: function (e, a) {
    var c = this,
      d = 0,
      f,
      b;
    if (Ext.isArray(a)) {
      for (f = a.length; d < f; ++d) {
        c.onProviderData(e, a[d]);
      }
      return;
    }
    b = a.getName();
    if (b && b != "event" && b != "exception") {
      c.fireEvent(b, a);
    } else {
      if (a.getStatus() === !1) {
        c.fireEvent("exception", a);
      }
    }
    c.fireEvent("event", a, e);
  },
  parseMethod: function (b) {
    if (Ext.isString(b)) {
      var d = b.split("."),
        c = 0,
        e = d.length,
        a = window;
      while (a && c < e) {
        a = a[d[c]];
        ++c;
      }
      b = Ext.isFunction(a) ? a : null;
    }
    return b || null;
  },
});
Ext.define("Ext.data.Validations", {
  alternateClassName: "Ext.data.validations",
  singleton: !0,
  config: {
    presenceMessage: "must be present",
    lengthMessage: "is the wrong length",
    formatMessage: "is the wrong format",
    inclusionMessage: "is not included in the list of acceptable values",
    exclusionMessage: "is not an acceptable value",
    emailMessage: "is not a valid email address",
  },
  constructor: function (a) {
    this.initConfig(a);
  },
  getMessage: function (b) {
    var a = this["get" + b[0].toUpperCase() + b.slice(1) + "Message"];
    if (a) {
      return a.call(this);
    }
    return "";
  },
  emailRe:
    /^\s*[\w\-\+_]+(\.[\w\-\+_]+)*\@[\w\-\+_]+\.[\w\-\+_]+(\.[\w\-\+_]+)*\s*$/,
  presence: function (b, a) {
    if (arguments.length === 1) {
      a = b;
    }
    return !!a || a === 0;
  },
  length: function (b, a) {
    if (a === undefined || a === null) {
      return !1;
    }
    var c = a.length,
      e = b.min,
      d = b.max;
    if ((e && c < e) || (d && c > d)) {
      return !1;
    } else {
      return !0;
    }
  },
  email: function (b, a) {
    return Ext.data.validations.emailRe.test(a);
  },
  format: function (b, a) {
    if (a === undefined || a === null) {
      a = "";
    }
    return !!(b.matcher && b.matcher.test(a));
  },
  inclusion: function (a, b) {
    return a.list && Ext.Array.indexOf(a.list, b) != -1;
  },
  exclusion: function (a, b) {
    return a.list && Ext.Array.indexOf(a.list, b) == -1;
  },
});
Ext.define("Ext.data.proxy.Rest", {
  extend: Ext.data.proxy.Ajax,
  alternateClassName: "Ext.data.RestProxy",
  alias: "proxy.rest",
  config: {
    appendId: !0,
    format: null,
    batchActions: !1,
    actionMethods: {
      create: "POST",
      read: "GET",
      update: "PUT",
      destroy: "DELETE",
    },
  },
  buildUrl: function (b) {
    var c = this,
      i = b.getOperation(),
      j = i.getRecords() || [],
      d = j[0],
      k = c.getModel(),
      e = k.getIdProperty(),
      f = c.getFormat(),
      a = c.getUrl(b),
      g = b.getParams() || {},
      h = d && !d.phantom ? d.getId() : g[e];
    if (c.getAppendId() && h) {
      if (!a.match(/\/$/)) {
        a += "/";
      }
      a += h;
      delete g[e];
    }
    if (f) {
      if (!a.match(/\.$/)) {
        a += ".";
      }
      a += f;
    }
    b.setUrl(a);
    return c.callParent([b]);
  },
});
Ext.define("Ext.data.reader.Array", {
  extend: Ext.data.reader.Json,
  alternateClassName: "Ext.data.ArrayReader",
  alias: "reader.array",
  config: { totalProperty: undefined, successProperty: undefined },
  createFieldAccessExpression: function (e, f, c) {
    var g = this,
      d = e.getMapping(),
      a = d == null ? g.getModel().getFields().indexOf(e) : d,
      b;
    if (typeof a === "function") {
      b = f + ".getMapping()(" + c + ", this)";
    } else {
      if (isNaN(a)) {
        a = '"' + a + '"';
      }
      b = c + "[" + a + "]";
    }
    return b;
  },
});
Ext.define("Ext.event.Event", {
  alternateClassName: "Ext.EventObject",
  isStopped: !1,
  set: function (a, c) {
    if (arguments.length === 1 && typeof a != "string") {
      var b = a;
      for (a in b) {
        if (b.hasOwnProperty(a)) {
          this[a] = b[a];
        }
      }
    } else {
      this[a] = b[a];
    }
  },
  stopEvent: function () {
    return this.stopPropagation();
  },
  stopPropagation: function () {
    this.isStopped = !0;
    return this;
  },
});
Ext.define("Ext.event.Dom", {
  extend: Ext.event.Event,
  constructor: function (a) {
    var c = a.target,
      b;
    if (c && c.nodeType !== 1) {
      c = c.parentNode;
    }
    b = a.changedTouches;
    if (b) {
      b = b[0];
      this.pageX = b.pageX;
      this.pageY = b.pageY;
    } else {
      this.pageX = a.pageX;
      this.pageY = a.pageY;
    }
    this.browserEvent = this.event = a;
    this.target = this.delegatedTarget = c;
    this.type = a.type;
    this.timeStamp = this.time = +a.timeStamp;
    return this;
  },
  stopEvent: function () {
    this.preventDefault();
    return this.callParent();
  },
  preventDefault: function () {
    this.browserEvent.preventDefault();
  },
  getPageX: function () {
    return this.pageX || this.browserEvent.pageX;
  },
  getPageY: function () {
    return this.pageY || this.browserEvent.pageY;
  },
  getXY: function () {
    if (!this.xy) {
      this.xy = [this.getPageX(), this.getPageY()];
    }
    return this.xy;
  },
  getTarget: function (b, c, a) {
    if (arguments.length === 0) {
      return this.delegatedTarget;
    }
    return b
      ? Ext.fly(this.target).findParent(b, c, a)
      : a
      ? Ext.get(this.target)
      : this.target;
  },
  getTime: function () {
    return this.time;
  },
  setDelegatedTarget: function (a) {
    this.delegatedTarget = a;
  },
  makeUnpreventable: function () {
    this.browserEvent.preventDefault = Ext.emptyFn;
  },
});
Ext.define("Ext.event.Touch", {
  extend: Ext.event.Dom,
  constructor: function (e, f, h, g) {
    var c = [],
      a,
      b,
      i,
      d;
    if (f) {
      this.set(f);
    }
    this.changedTouches = this.cloneTouches(e.changedTouches, h);
    for (b = 0, i = g.length; b < i; b++) {
      d = g[b];
      c.push(h[d]);
    }
    this.touches = c;
    this.targetTouches = c.slice();
    a = this.changedTouches[0];
    this.callSuper([e]);
    this.target = this.delegatedTarget = a.target;
    this.pageX = a.pageX;
    this.pageY = a.pageY;
  },
  cloneTouches: function (d, g) {
    var b = [],
      a,
      f,
      e,
      c;
    for (a = 0, f = d.length; a < f; a++) {
      e = d[a];
      c = e.identifier;
      b[a] = g[c];
    }
    return b;
  },
});
Ext.define("Ext.event.publisher.Publisher", {
  targetType: "",
  idSelectorRegex: /^#([\w\-]+)$/i,
  constructor: function () {
    var c = this.handledEvents,
      b,
      a,
      e,
      d;
    b = this.handledEventsMap = {};
    for (a = 0, e = c.length; a < e; a++) {
      d = c[a];
      b[d] = !0;
    }
    this.subscribers = {};
    return this;
  },
  handles: function (a) {
    var b = this.handledEventsMap;
    return !!b[a] || !!b["*"] || a === "*";
  },
  getHandledEvents: function () {
    return this.handledEvents;
  },
  setDispatcher: function (a) {
    this.dispatcher = a;
  },
  subscribe: function () {
    return !1;
  },
  unsubscribe: function () {
    return !1;
  },
  unsubscribeAll: function () {
    delete this.subscribers;
    this.subscribers = {};
    return this;
  },
  notify: function () {
    return !1;
  },
  getTargetType: function () {
    return this.targetType;
  },
  dispatch: function (b, a, c) {
    this.dispatcher.doDispatchEvent(this.targetType, b, a, c);
  },
});
Ext.define("Ext.event.publisher.ComponentDelegation", {
  extend: Ext.event.publisher.Publisher,
  targetType: "component",
  optimizedSelectorRegex: /^#([\w\-]+)((?:[\s]*)>(?:[\s]*)|(?:\s*))([\w\-]+)$/i,
  handledEvents: ["*"],
  getSubscribers: function (c, d) {
    var b = this.subscribers,
      a = b[c];
    if (!a && d) {
      a = b[c] = { type: { $length: 0 }, selector: [], $length: 0 };
    }
    return a;
  },
  subscribe: function (a, k) {
    if (this.idSelectorRegex.test(a)) {
      return !1;
    }
    var e = a.match(this.optimizedSelectorRegex),
      h = this.getSubscribers(k, !0),
      g = h.type,
      d = h.selector,
      f,
      j,
      i,
      b,
      c;
    if (e !== null) {
      f = e[1];
      j = e[2].indexOf(">") === -1;
      i = e[3];
      b = g[i];
      if (!b) {
        g[i] = b = {
          descendents: { $length: 0 },
          children: { $length: 0 },
          $length: 0,
        };
      }
      c = j ? b.descendents : b.children;
      if (c.hasOwnProperty(f)) {
        c[f]++;
        return !0;
      }
      c[f] = 1;
      c.$length++;
      b.$length++;
      g.$length++;
    } else {
      if (d.hasOwnProperty(a)) {
        d[a]++;
        return !0;
      }
      d[a] = 1;
      d.push(a);
    }
    h.$length++;
    return !0;
  },
  unsubscribe: function (b, k, g) {
    var e = this.getSubscribers(k);
    if (!e) {
      return !1;
    }
    var f = b.match(this.optimizedSelectorRegex),
      i = e.type,
      d = e.selector,
      h,
      j,
      l,
      c,
      a;
    g = Boolean(g);
    if (f !== null) {
      h = f[1];
      j = f[2].indexOf(">") === -1;
      l = f[3];
      c = i[l];
      if (!c) {
        return !0;
      }
      a = j ? c.descendents : c.children;
      if (!a.hasOwnProperty(h) || (!g && --a[h] > 0)) {
        return !0;
      }
      delete a[h];
      a.$length--;
      c.$length--;
      i.$length--;
    } else {
      if (!d.hasOwnProperty(b) || (!g && --d[b] > 0)) {
        return !0;
      }
      delete d[b];
      Ext.Array.remove(d, b);
    }
    if (--e.$length === 0) {
      delete this.subscribers[k];
    }
    return !0;
  },
  notify: function (d, b) {
    var c = this.getSubscribers(b),
      e,
      a;
    if (!c || c.$length === 0) {
      return !1;
    }
    e = d.substr(1);
    a = Ext.ComponentManager.get(e);
    if (a) {
      this.dispatcher.doAddListener(
        this.targetType,
        d,
        b,
        "publish",
        this,
        { args: [b, a] },
        "before"
      );
    }
  },
  matchesSelector: function (a, b) {
    return Ext.ComponentQuery.is(a, b);
  },
  dispatch: function (c, b, d, a) {
    this.dispatcher.doDispatchEvent(this.targetType, c, b, d, null, a);
  },
  publish: function (g, f) {
    var a = this.getSubscribers(g);
    if (!a) {
      return;
    }
    var l = arguments[arguments.length - 1],
      t = a.type,
      q = a.selector,
      p = Array.prototype.slice.call(arguments, 2, -2),
      s = f.xtypesChain,
      j,
      k,
      d,
      c,
      n,
      m,
      o,
      b,
      e,
      h,
      i,
      r;
    for (b = 0, e = s.length; b < e; b++) {
      h = s[b];
      a = t[h];
      if (a && a.$length > 0) {
        j = a.descendents;
        if (j.$length > 0) {
          if (!c) {
            c = f.getAncestorIds();
          }
          for (i = 0, r = c.length; i < r; i++) {
            n = c[i];
            if (j.hasOwnProperty(n)) {
              this.dispatch("#" + n + " " + h, g, p, l);
            }
          }
        }
        k = a.children;
        if (k.$length > 0) {
          if (!d) {
            if (c) {
              d = c[0];
            } else {
              m = f.getParent();
              if (m) {
                d = m.getId();
              }
            }
          }
          if (d) {
            if (k.hasOwnProperty(d)) {
              this.dispatch("#" + d + " > " + h, g, p, l);
            }
          }
        }
      }
    }
    e = q.length;
    if (e > 0) {
      for (b = 0; b < e; b++) {
        o = q[b];
        if (this.matchesSelector(f, o)) {
          this.dispatch(o, g, p, l);
        }
      }
    }
  },
});
Ext.define("Ext.event.publisher.ComponentPaint", {
  extend: Ext.event.publisher.Publisher,
  targetType: "component",
  handledEvents: ["erased"],
  eventNames: { painted: "painted", erased: "erased" },
  constructor: function () {
    this.callParent(arguments);
    this.hiddenQueue = {};
    this.renderedQueue = {};
  },
  getSubscribers: function (b, c) {
    var a = this.subscribers;
    if (!a.hasOwnProperty(b)) {
      if (!c) {
        return null;
      }
      a[b] = { $length: 0 };
    }
    return a[b];
  },
  setDispatcher: function (a) {
    var b = this.targetType;
    a.doAddListener(
      b,
      "*",
      "renderedchange",
      "onBeforeComponentRenderedChange",
      this,
      null,
      "before"
    );
    a.doAddListener(
      b,
      "*",
      "hiddenchange",
      "onBeforeComponentHiddenChange",
      this,
      null,
      "before"
    );
    a.doAddListener(
      b,
      "*",
      "renderedchange",
      "onComponentRenderedChange",
      this,
      null,
      "after"
    );
    a.doAddListener(
      b,
      "*",
      "hiddenchange",
      "onComponentHiddenChange",
      this,
      null,
      "after"
    );
    return this.callParent(arguments);
  },
  subscribe: function (e, d) {
    var c = e.match(this.idSelectorRegex),
      a,
      b;
    if (!c) {
      return !1;
    }
    b = c[1];
    a = this.getSubscribers(d, !0);
    if (a.hasOwnProperty(b)) {
      a[b]++;
      return !0;
    }
    a[b] = 1;
    a.$length++;
    return !0;
  },
  unsubscribe: function (e, c, f) {
    var d = e.match(this.idSelectorRegex),
      a,
      b;
    if (!d || !(a = this.getSubscribers(c))) {
      return !1;
    }
    b = d[1];
    if (!a.hasOwnProperty(b) || (!f && --a[b] > 0)) {
      return !0;
    }
    delete a[b];
    if (--a.$length === 0) {
      delete this.subscribers[c];
    }
    return !0;
  },
  onBeforeComponentRenderedChange: function (g, c, f) {
    var b = this.eventNames,
      d = f ? b.painted : b.erased,
      a = this.getSubscribers(d),
      e;
    if (a && a.$length > 0) {
      this.renderedQueue[c.getId()] = e = [];
      this.publish(a, c, d, e);
    }
  },
  onBeforeComponentHiddenChange: function (c, f) {
    var b = this.eventNames,
      d = f ? b.erased : b.painted,
      a = this.getSubscribers(d),
      e;
    if (a && a.$length > 0) {
      this.hiddenQueue[c.getId()] = e = [];
      this.publish(a, c, d, e);
    }
  },
  onComponentRenderedChange: function (e, d) {
    var a = this.renderedQueue,
      c = d.getId(),
      b;
    if (!a.hasOwnProperty(c)) {
      return;
    }
    b = a[c];
    delete a[c];
    if (b.length > 0) {
      this.dispatchQueue(b);
    }
  },
  onComponentHiddenChange: function (d) {
    var a = this.hiddenQueue,
      c = d.getId(),
      b;
    if (!a.hasOwnProperty(c)) {
      return;
    }
    b = a[c];
    delete a[c];
    if (b.length > 0) {
      this.dispatchQueue(b);
    }
  },
  dispatchQueue: function (g) {
    var j = this.dispatcher,
      k = this.targetType,
      h = this.eventNames,
      f = g.slice(),
      i = f.length,
      c,
      b,
      d,
      a,
      e;
    g.length = 0;
    if (i > 0) {
      for (c = 0; c < i; c++) {
        b = f[c];
        d = b.component;
        a = b.eventName;
        e = d.isPainted();
        if ((a === h.painted && e) || (a === h.erased && !e)) {
          j.doDispatchEvent(k, "#" + b.id, a, [d]);
        }
      }
      f.length = 0;
    }
  },
  publish: function (e, a, b, d) {
    var j = a.getId(),
      i = !1,
      f,
      h,
      c,
      k,
      g;
    if (e[j]) {
      f = this.eventNames;
      g = a.isPainted();
      if ((b === f.painted && !g) || (b === f.erased && g)) {
        i = !0;
      } else {
        return this;
      }
    }
    if (a.isContainer) {
      h = a.getItems().items;
      for (c = 0, k = h.length; c < k; c++) {
        this.publish(e, h[c], b, d);
      }
    } else {
      if (a.isDecorator) {
        this.publish(e, a.getComponent(), b, d);
      }
    }
    if (i) {
      d.push({ id: j, eventName: b, component: a });
    }
  },
});
Ext.define("Ext.event.publisher.Dom", {
  extend: Ext.event.publisher.Publisher,
  targetType: "element",
  idOrClassSelectorRegex: /^([#|\.])([\w\-]+)$/,
  handledEvents: [
    "focus",
    "blur",
    "paste",
    "input",
    "change",
    "keyup",
    "keydown",
    "keypress",
    "submit",
    "transitionend",
    "animationstart",
    "animationend",
  ],
  classNameSplitRegex: /\s+/,
  SELECTOR_ALL: "*",
  constructor: function () {
    var e = this.getHandledEvents(),
      d = {},
      a,
      f,
      c,
      b;
    this.doBubbleEventsMap = {
      click: !0,
      submit: !0,
      mousedown: !0,
      mousemove: !0,
      mouseup: !0,
      mouseover: !0,
      mouseout: !0,
      transitionend: !0,
    };
    this.onEvent = Ext.Function.bind(this.onEvent, this);
    for (a = 0, f = e.length; a < f; a++) {
      c = e[a];
      b = this.getVendorEventName(c);
      d[b] = c;
      this.attachListener(b);
    }
    this.eventNameMap = d;
    return this.callParent();
  },
  getSubscribers: function (c) {
    var b = this.subscribers,
      a = b[c];
    if (!a) {
      a = b[c] = {
        id: { $length: 0 },
        className: { $length: 0 },
        selector: [],
        all: 0,
        $length: 0,
      };
    }
    return a;
  },
  getVendorEventName: function (a) {
    if (Ext.browser.is.WebKit) {
      if (a === "transitionend") {
        a = Ext.browser.getVendorProperyName("transitionEnd");
      } else {
        if (a === "animationstart") {
          a = Ext.browser.getVendorProperyName("animationStart");
        } else {
          if (a === "animationend") {
            a = Ext.browser.getVendorProperyName("animationEnd");
          }
        }
      }
    }
    return a;
  },
  bindListeners: function (e, d) {
    var b = this.getHandledEvents(),
      c = b.length,
      a;
    for (a = 0; a < c; a++) {
      this.bindListener(e, this.getVendorEventName(b[a]), d);
    }
  },
  bindListener: function (b, a, c) {
    if (c) {
      this.attachListener(a, b);
    } else {
      this.removeListener(a, b);
    }
    return this;
  },
  attachListener: function (a, b) {
    if (!b) {
      b = document;
    }
    var c = b.defaultView;
    if (Ext.os.is.iOS && Ext.os.version.getMajor() < 5) {
      document.addEventListener(a, this.onEvent, !this.doesEventBubble(a));
    } else {
      if (c && c.addEventListener) {
        b.defaultView.addEventListener(
          a,
          this.onEvent,
          !this.doesEventBubble(a)
        );
      } else {
        b.addEventListener(a, this.onEvent, !this.doesEventBubble(a));
      }
    }
    return this;
  },
  removeListener: function (a, b) {
    if (!b) {
      b = document;
    }
    var c = b.defaultView;
    if (Ext.os.is.iOS && Ext.os.version.getMajor() < 5) {
      document.removeEventListener(a, this.onEvent, !this.doesEventBubble(a));
    } else {
      if (c && c.addEventListener) {
        b.defaultView.removeEventListener(
          a,
          this.onEvent,
          !this.doesEventBubble(a)
        );
      } else {
        b.removeEventListener(a, this.onEvent, !this.doesEventBubble(a));
      }
    }
    return this;
  },
  doesEventBubble: function (a) {
    return !!this.doBubbleEventsMap[a];
  },
  subscribe: function (b, h) {
    if (!this.handles(h)) {
      return !1;
    }
    var g = b.match(this.idOrClassSelectorRegex),
      c = this.getSubscribers(h),
      f = c.id,
      d = c.className,
      e = c.selector,
      i,
      a;
    if (g !== null) {
      i = g[1];
      a = g[2];
      if (i === "#") {
        if (f.hasOwnProperty(a)) {
          f[a]++;
          return !0;
        }
        f[a] = 1;
        f.$length++;
      } else {
        if (d.hasOwnProperty(a)) {
          d[a]++;
          return !0;
        }
        d[a] = 1;
        d.$length++;
      }
    } else {
      if (b === this.SELECTOR_ALL) {
        c.all++;
      } else {
        if (e.hasOwnProperty(b)) {
          e[b]++;
          return !0;
        }
        e[b] = 1;
        e.push(b);
      }
    }
    c.$length++;
    return !0;
  },
  unsubscribe: function (c, i, d) {
    if (!this.handles(i)) {
      return !1;
    }
    var h = c.match(this.idOrClassSelectorRegex),
      b = this.getSubscribers(i),
      g = b.id,
      e = b.className,
      f = b.selector,
      j,
      a;
    d = Boolean(d);
    if (h !== null) {
      j = h[1];
      a = h[2];
      if (j === "#") {
        if (!g.hasOwnProperty(a) || (!d && --g[a] > 0)) {
          return !0;
        }
        delete g[a];
        g.$length--;
      } else {
        if (!e.hasOwnProperty(a) || (!d && --e[a] > 0)) {
          return !0;
        }
        delete e[a];
        e.$length--;
      }
    } else {
      if (c === this.SELECTOR_ALL) {
        if (d) {
          b.all = 0;
        } else {
          b.all--;
        }
      } else {
        if (!f.hasOwnProperty(c) || (!d && --f[c] > 0)) {
          return !0;
        }
        delete f[c];
        Ext.Array.remove(f, c);
      }
    }
    b.$length--;
    return !0;
  },
  getElementTarget: function (a) {
    if (a.nodeType !== 1) {
      a = a.parentNode;
      if (!a || a.nodeType !== 1) {
        return null;
      }
    }
    return a;
  },
  getBubblingTargets: function (a) {
    var b = [];
    if (!a) {
      return b;
    }
    do {
      b[b.length] = a;
      a = a.parentNode;
    } while (a && a.nodeType === 1);
    return b;
  },
  dispatch: function (c, b, a) {
    a.push(a[0].target);
    this.callParent(arguments);
  },
  publish: function (b, d, e) {
    var c = this.getSubscribers(b),
      a;
    if (c.$length === 0 || !this.doPublish(c, b, d, e)) {
      a = this.getSubscribers("*");
      if (a.$length > 0) {
        this.doPublish(a, b, d, e);
      }
    }
    return this;
  },
  doPublish: function (g, h, i, c) {
    var s = g.id,
      q = g.className,
      n = g.selector,
      x = s.$length > 0,
      t = q.$length > 0,
      u = n.length > 0,
      w = g.all > 0,
      r = {},
      k = [c],
      a = !1,
      v = this.classNameSplitRegex,
      d,
      m,
      e,
      j,
      f,
      l,
      b,
      o,
      p;
    for (d = 0, m = i.length; d < m; d++) {
      f = i[d];
      c.setDelegatedTarget(f);
      if (x) {
        l = f.getAttribute("id");
        if (l) {
          if (s.hasOwnProperty(l)) {
            a = !0;
            this.dispatch("#" + l, h, k);
          }
        }
      }
      if (t) {
        b = f.className;
        if (b) {
          o = b.split(v);
          for (e = 0, j = o.length; e < j; e++) {
            b = o[e];
            if (!r[b]) {
              r[b] = !0;
              if (q.hasOwnProperty(b)) {
                a = !0;
                this.dispatch("." + b, h, k);
              }
            }
          }
        }
      }
      if (c.isStopped) {
        return a;
      }
    }
    if (w && !a) {
      c.setDelegatedTarget(c.browserEvent.target);
      a = !0;
      this.dispatch(this.SELECTOR_ALL, h, k);
      if (c.isStopped) {
        return a;
      }
    }
    if (u) {
      for (e = 0, j = i.length; e < j; e++) {
        f = i[e];
        for (d = 0, m = n.length; d < m; d++) {
          p = n[d];
          if (this.matchesSelector(f, p)) {
            c.setDelegatedTarget(f);
            a = !0;
            this.dispatch(p, h, k);
          }
          if (c.isStopped) {
            return a;
          }
        }
      }
    }
    return a;
  },
  matchesSelector: (function () {
    var a = Element.prototype,
      b =
        "webkitMatchesSelector" in a
          ? "webkitMatchesSelector"
          : "msMatchesSelector" in a
          ? "msMatchesSelector"
          : "mozMatchesSelector" in a
          ? "mozMatchesSelector"
          : null;
    if (b) {
      return function (c, a) {
        return c[b](a);
      };
    }
    return function (b, a) {
      Ext.DomQuery.is(b, a);
    };
  })(),
  onEvent: function (b) {
    var a = this.eventNameMap[b.type];
    Ext.frameStartTime = b.timeStamp;
    if (!a || this.getSubscribersCount(a) === 0) {
      return;
    }
    var d = this.getElementTarget(b.target),
      c;
    if (!d) {
      return;
    }
    if (this.doesEventBubble(a)) {
      c = this.getBubblingTargets(d);
    } else {
      c = [d];
    }
    this.publish(a, c, new Ext.event.Dom(b));
  },
  getSubscribersCount: function (a) {
    if (!this.handles(a)) {
      return 0;
    }
    return this.getSubscribers(a).$length + this.getSubscribers("*").$length;
  },
});
Ext.define("Ext.util.paintmonitor.Abstract", {
  config: { element: null, callback: Ext.emptyFn, scope: null, args: [] },
  eventName: "",
  monitorClass: "",
  constructor: function (a) {
    this.onElementPainted = Ext.Function.bind(this.onElementPainted, this);
    this.initConfig(a);
  },
  bindListeners: function (a) {
    this.monitorElement[a ? "addEventListener" : "removeEventListener"](
      this.eventName,
      this.onElementPainted,
      !0
    );
  },
  applyElement: function (a) {
    if (a) {
      return Ext.get(a);
    }
  },
  updateElement: function (a) {
    this.monitorElement = Ext.Element.create(
      { classList: ["x-paint-monitor", this.monitorClass] },
      !0
    );
    a.appendChild(this.monitorElement);
    a.addCls("x-paint-monitored");
    this.bindListeners(!0);
  },
  onElementPainted: function () {},
  destroy: function () {
    var b = this.monitorElement,
      c = b.parentNode,
      a = this.getElement();
    this.bindListeners(!1);
    delete this.monitorElement;
    if (a && !a.isDestroyed) {
      a.removeCls("x-paint-monitored");
      delete this._element;
    }
    if (c) {
      c.removeChild(b);
    }
    this.callSuper();
  },
});
Ext.define("Ext.util.paintmonitor.CssAnimation", {
  extend: Ext.util.paintmonitor.Abstract,
  eventName: Ext.browser.is.WebKit ? "webkitAnimationEnd" : "animationend",
  monitorClass: "cssanimation",
  onElementPainted: function (a) {
    if (a.animationName === "x-paint-monitor-helper") {
      this.getCallback().apply(this.getScope(), this.getArgs());
    }
  },
});
Ext.define("Ext.util.paintmonitor.OverflowChange", {
  extend: Ext.util.paintmonitor.Abstract,
  eventName: Ext.browser.is.Firefox ? "overflow" : "overflowchanged",
  monitorClass: "overflowchange",
  onElementPainted: function (a) {
    this.getCallback().apply(this.getScope(), this.getArgs());
  },
});
Ext.define("Ext.util.PaintMonitor", {
  constructor: function (a) {
    if (
      Ext.browser.is.Firefox ||
      (Ext.browser.is.WebKit &&
        Ext.browser.engineVersion.gtEq("536") &&
        !Ext.os.is.Blackberry)
    ) {
      return new Ext.util.paintmonitor.OverflowChange(a);
    } else {
      return new Ext.util.paintmonitor.CssAnimation(a);
    }
  },
});
Ext.define("MEM.overrides.util.PaintMonitor", {
  override: "Ext.util.PaintMonitor",
  constructor: function (a) {
    if (
      Ext.browser.is("Safari") ||
      (Ext.os.is("iOS") && parseFloat(Ext.os.version.version) >= 13.4)
    ) {
      return new Ext.util.paintmonitor.OverflowChange(a);
    } else {
      if (
        Ext.browser.is.Firefox ||
        (Ext.browser.is.WebKit &&
          Ext.browser.engineVersion.gtEq("536") &&
          !Ext.browser.engineVersion.gtEq("537.36") &&
          !Ext.os.is.Blackberry)
      ) {
        return new Ext.util.paintmonitor.OverflowChange(a);
      } else {
        return new Ext.util.paintmonitor.CssAnimation(a);
      }
    }
  },
});
Ext.define("Ext.event.publisher.ElementPaint", {
  extend: Ext.event.publisher.Publisher,
  targetType: "element",
  handledEvents: ["painted"],
  constructor: function () {
    this.monitors = {};
    this.callSuper(arguments);
  },
  subscribe: function (d) {
    var e = d.match(this.idSelectorRegex),
      b = this.subscribers,
      a,
      c;
    if (!e) {
      return !1;
    }
    a = e[1];
    if (b.hasOwnProperty(a)) {
      b[a]++;
      return !0;
    }
    b[a] = 1;
    c = Ext.get(a);
    this.monitors[a] = new Ext.util.PaintMonitor({
      element: c,
      callback: this.onElementPainted,
      scope: this,
      args: [d, c],
    });
    return !0;
  },
  unsubscribe: function (d, f, e) {
    var c = d.match(this.idSelectorRegex),
      b = this.subscribers,
      a;
    if (!c) {
      return !1;
    }
    a = c[1];
    if (!b.hasOwnProperty(a) || (!e && --b[a] > 0)) {
      return !0;
    }
    delete b[a];
    this.monitors[a].destroy();
    delete this.monitors[a];
    return !0;
  },
  onElementPainted: function (b, a) {
    Ext.TaskQueue.requestRead("dispatch", this, [b, "painted", [a]]);
  },
});
Ext.define("Ext.mixin.Templatable", {
  extend: Ext.mixin.Mixin,
  mixinConfig: { id: "templatable" },
  referenceAttributeName: "reference",
  referenceSelector: "[reference]",
  getElementConfig: function () {
    return { reference: "element" };
  },
  getElementTemplate: function () {
    var a = document.createDocumentFragment();
    a.appendChild(Ext.Element.create(this.getElementConfig(), !0));
    return a;
  },
  initElement: function () {
    var a = this.self.prototype;
    a.elementTemplate = this.getElementTemplate();
    a.initElement = a.doInitElement;
    this.initElement.apply(this, arguments);
  },
  linkElement: function (a, b) {
    this.link(a, b);
  },
  doInitElement: function () {
    var d = this.referenceAttributeName,
      e,
      c,
      b,
      g,
      a,
      f;
    e = this.elementTemplate.cloneNode(!0);
    c = e.querySelectorAll(this.referenceSelector);
    for (b = 0, g = c.length; b < g; b++) {
      a = c[b];
      f = a.getAttribute(d);
      a.removeAttribute(d);
      this.linkElement(f, a);
    }
  },
});
Ext.define("Ext.util.sizemonitor.Abstract", {
  mixins: [Ext.mixin.Templatable],
  config: { element: null, callback: Ext.emptyFn, scope: null, args: [] },
  width: 0,
  height: 0,
  contentWidth: 0,
  contentHeight: 0,
  constructor: function (a) {
    this.refresh = Ext.Function.bind(this.refresh, this);
    this.info = {
      width: 0,
      height: 0,
      contentWidth: 0,
      contentHeight: 0,
      flag: 0,
    };
    this.initElement();
    this.initConfig(a);
    this.bindListeners(!0);
  },
  bindListeners: Ext.emptyFn,
  applyElement: function (a) {
    if (a) {
      return Ext.get(a);
    }
  },
  updateElement: function (a) {
    a.append(this.detectorsContainer);
    a.addCls("x-size-monitored");
  },
  applyArgs: function (a) {
    return a.concat([this.info]);
  },
  refreshMonitors: Ext.emptyFn,
  forceRefresh: function () {
    Ext.TaskQueue.requestRead("refresh", this);
  },
  getContentBounds: function () {
    return this.detectorsContainer.getBoundingClientRect();
  },
  getContentWidth: function () {
    return this.detectorsContainer.offsetWidth;
  },
  getContentHeight: function () {
    return this.detectorsContainer.offsetHeight;
  },
  refreshSize: function () {
    var b = this.getElement();
    if (!b || b.isDestroyed) {
      return !1;
    }
    var h = b.getWidth(),
      g = b.getHeight(),
      d = this.getContentWidth(),
      c = this.getContentHeight(),
      j = this.contentWidth,
      i = this.contentHeight,
      a = this.info,
      f = !1,
      e;
    this.width = h;
    this.height = g;
    this.contentWidth = d;
    this.contentHeight = c;
    e = (j !== d ? 1 : 0) + (i !== c ? 2 : 0);
    if (e > 0) {
      a.width = h;
      a.height = g;
      a.contentWidth = d;
      a.contentHeight = c;
      a.flag = e;
      f = !0;
      this.getCallback().apply(this.getScope(), this.getArgs());
    }
    return f;
  },
  refresh: function (a) {
    if (this.refreshSize() || a) {
      Ext.TaskQueue.requestWrite("refreshMonitors", this);
    }
  },
  destroy: function () {
    var a = this.getElement();
    this.bindListeners(!1);
    if (a && !a.isDestroyed) {
      a.removeCls("x-size-monitored");
    }
    delete this._element;
    this.callSuper();
  },
});
Ext.define("Ext.util.sizemonitor.Default", {
  extend: Ext.util.sizemonitor.Abstract,
  updateElement: function (a) {},
  bindListeners: function (b) {
    var a = this.getElement().dom;
    if (!a) {
      return;
    }
    if (b) {
      a.onresize = this.refresh;
    } else {
      delete a.onresize;
    }
  },
  getContentBounds: function () {
    return this.getElement().dom.getBoundingClientRect();
  },
  getContentWidth: function () {
    return this.getElement().getWidth();
  },
  getContentHeight: function () {
    return this.getElement().getHeight();
  },
});
Ext.define("Ext.util.sizemonitor.Scroll", {
  extend: Ext.util.sizemonitor.Abstract,
  getElementConfig: function () {
    return {
      reference: "detectorsContainer",
      classList: ["x-size-monitors", "scroll"],
      children: [
        { reference: "expandMonitor", className: "expand" },
        { reference: "shrinkMonitor", className: "shrink" },
      ],
    };
  },
  constructor: function (a) {
    this.onScroll = Ext.Function.bind(this.onScroll, this);
    this.callSuper(arguments);
  },
  bindListeners: function (b) {
    var a = b ? "addEventListener" : "removeEventListener";
    this.expandMonitor[a]("scroll", this.onScroll, !0);
    this.shrinkMonitor[a]("scroll", this.onScroll, !0);
  },
  forceRefresh: function () {
    Ext.TaskQueue.requestRead("refresh", this, [!0]);
  },
  onScroll: function () {
    Ext.TaskQueue.requestRead("refresh", this);
  },
  refreshMonitors: function () {
    var a = this.expandMonitor,
      b = this.shrinkMonitor,
      c = 1000000;
    if (a && !a.isDestroyed) {
      a.scrollLeft = c;
      a.scrollTop = c;
    }
    if (b && !b.isDestroyed) {
      b.scrollLeft = c;
      b.scrollTop = c;
    }
  },
});
Ext.define("Ext.util.sizemonitor.OverflowChange", {
  extend: Ext.util.sizemonitor.Abstract,
  constructor: function (a) {
    this.onExpand = Ext.Function.bind(this.onExpand, this);
    this.onShrink = Ext.Function.bind(this.onShrink, this);
    this.callSuper(arguments);
  },
  getElementConfig: function () {
    return {
      reference: "detectorsContainer",
      classList: ["x-size-monitors", "overflowchanged"],
      children: [
        {
          reference: "expandMonitor",
          className: "expand",
          children: [{ reference: "expandHelper" }],
        },
        {
          reference: "shrinkMonitor",
          className: "shrink",
          children: [{ reference: "shrinkHelper" }],
        },
      ],
    };
  },
  bindListeners: function (b) {
    var a = b ? "addEventListener" : "removeEventListener";
    this.expandMonitor[a](
      Ext.browser.is.Firefox ? "underflow" : "overflowchanged",
      this.onExpand,
      !0
    );
    this.shrinkMonitor[a](
      Ext.browser.is.Firefox ? "overflow" : "overflowchanged",
      this.onShrink,
      !0
    );
  },
  onExpand: function (a) {
    if (Ext.browser.is.Webkit && a.horizontalOverflow && a.verticalOverflow) {
      return;
    }
    Ext.TaskQueue.requestRead("refresh", this);
  },
  onShrink: function (a) {
    if (Ext.browser.is.Webkit && !a.horizontalOverflow && !a.verticalOverflow) {
      return;
    }
    Ext.TaskQueue.requestRead("refresh", this);
  },
  refreshMonitors: function () {
    if (this.isDestroyed) {
      return;
    }
    var b = this.expandHelper,
      c = this.shrinkHelper,
      d = this.getContentBounds(),
      f = d.width,
      e = d.height,
      a;
    if (b && !b.isDestroyed) {
      a = b.style;
      a.width = f + 1 + "px";
      a.height = e + 1 + "px";
    }
    if (c && !c.isDestroyed) {
      a = c.style;
      a.width = f + "px";
      a.height = e + "px";
    }
    Ext.TaskQueue.requestRead("refresh", this);
  },
});
Ext.define("Ext.util.SizeMonitor", {
  constructor: function (b) {
    var a = Ext.util.sizemonitor;
    if (Ext.browser.is.Firefox) {
      return new a.OverflowChange(b);
    } else {
      if (Ext.browser.is.WebKit) {
        if (!Ext.browser.is.Silk && Ext.browser.engineVersion.gtEq("535")) {
          return new a.OverflowChange(b);
        } else {
          return new a.Scroll(b);
        }
      } else {
        if (Ext.browser.is.IE11) {
          return new a.Scroll(b);
        } else {
          return new a.Default(b);
        }
      }
    }
  },
});
Ext.define("MEM.overrides.util.SizeMonitor", {
  override: "Ext.util.SizeMonitor",
  constructor: function (b) {
    var a = Ext.util.sizemonitor;
    if (Ext.browser.is.Firefox) {
      return new a.OverflowChange(b);
    } else {
      if (Ext.browser.is.WebKit) {
        if (
          !Ext.browser.is.Silk &&
          Ext.browser.engineVersion.gtEq("535") &&
          !Ext.browser.engineVersion.gtEq("537.36")
        ) {
          return new a.OverflowChange(b);
        } else {
          return new a.Scroll(b);
        }
      } else {
        if (Ext.browser.is.IE11) {
          return new a.Scroll(b);
        } else {
          return new a.Default(b);
        }
      }
    }
  },
});
Ext.define("Ext.event.publisher.ElementSize", {
  extend: Ext.event.publisher.Publisher,
  targetType: "element",
  handledEvents: ["resize"],
  constructor: function () {
    this.monitors = {};
    this.callSuper(arguments);
  },
  subscribe: function (d) {
    var f = d.match(this.idSelectorRegex),
      b = this.subscribers,
      a,
      c,
      e;
    if (!f) {
      return !1;
    }
    a = f[1];
    if (b.hasOwnProperty(a)) {
      b[a]++;
      return !0;
    }
    b[a] = 1;
    c = Ext.get(a);
    this.monitors[a] = e = new Ext.util.SizeMonitor({
      element: c,
      callback: this.onElementResize,
      scope: this,
      args: [d, c],
    });
    this.dispatcher.addListener("element", d, "painted", "forceRefresh", e);
    return !0;
  },
  unsubscribe: function (e, h, g) {
    var f = e.match(this.idSelectorRegex),
      c = this.subscribers,
      d = this.monitors,
      a,
      b;
    if (!f) {
      return !1;
    }
    a = f[1];
    if (!c.hasOwnProperty(a) || (!g && --c[a] > 0)) {
      return !0;
    }
    delete c[a];
    b = d[a];
    this.dispatcher.removeListener("element", e, "painted", "forceRefresh", b);
    b.destroy();
    delete d[a];
    return !0;
  },
  onElementResize: function (b, a, c) {
    Ext.TaskQueue.requestRead("dispatch", this, [b, "resize", [a, c]]);
  },
});
Ext.define(
  "Ext.event.publisher.TouchGesture",
  {
    extend: Ext.event.publisher.Dom,
    isNotPreventable: /^(select|a)$/i,
    handledEvents: ["touchstart", "touchmove", "touchend", "touchcancel"],
    mouseToTouchMap: {
      mousedown: "touchstart",
      mousemove: "touchmove",
      mouseup: "touchend",
    },
    lastEventType: null,
    config: { moveThrottle: 0, recognizers: {} },
    constructor: function (a) {
      this.eventProcessors = {
        touchstart: this.onTouchStart,
        touchmove: this.onTouchMove,
        touchend: this.onTouchEnd,
        touchcancel: this.onTouchEnd,
      };
      this.eventToRecognizerMap = {};
      this.activeRecognizers = [];
      this.touchesMap = {};
      this.currentIdentifiers = [];
      if (Ext.browser.is.Chrome && Ext.os.is.Android) {
        this.screenPositionRatio = Ext.browser.version.gt("18")
          ? 1
          : 1 / window.devicePixelRatio;
      } else {
        if (Ext.browser.is.AndroidStock4) {
          this.screenPositionRatio = 1;
        } else {
          if (Ext.os.is.BlackBerry) {
            this.screenPositionRatio = 1 / window.devicePixelRatio;
          } else {
            if (Ext.browser.engineName == "WebKit" && Ext.os.is.Desktop) {
              this.screenPositionRatio = 1;
            } else {
              this.screenPositionRatio =
                window.innerWidth / window.screen.width;
            }
          }
        }
      }
      this.initConfig(a);
      return this.callSuper();
    },
    applyRecognizers: function (a) {
      var c, b;
      for (c in a) {
        if (a.hasOwnProperty(c)) {
          b = a[c];
          if (b) {
            this.registerRecognizer(b);
          }
        }
      }
      return a;
    },
    handles: function (a) {
      return (
        this.callSuper(arguments) || this.eventToRecognizerMap.hasOwnProperty(a)
      );
    },
    doesEventBubble: function () {
      return !0;
    },
    onEvent: function (a) {
      var b = a.type,
        d = this.lastEventType,
        c = [a];
      if (this.eventProcessors[b]) {
        this.eventProcessors[b].call(this, a);
        return;
      }
      if ("button" in a && a.button > 0) {
        return;
      } else {
        if (b === "mousedown" && d && d !== "mouseup") {
          var e = document.createEvent("MouseEvent");
          e.initMouseEvent(
            "mouseup",
            a.bubbles,
            a.cancelable,
            document.defaultView,
            a.detail,
            a.screenX,
            a.screenY,
            a.clientX,
            a.clientY,
            a.ctrlKey,
            a.altKey,
            a.shiftKey,
            a.metaKey,
            a.metaKey,
            a.button,
            a.relatedTarget
          );
          this.onEvent(e);
        }
        if (b !== "mousemove") {
          this.lastEventType = b;
        }
        a.identifier = 1;
        a.touches = b !== "mouseup" ? c : [];
        a.targetTouches = b !== "mouseup" ? c : [];
        a.changedTouches = c;
        this.eventProcessors[this.mouseToTouchMap[b]].call(this, a);
      }
    },
    registerRecognizer: function (a) {
      var g = this.eventToRecognizerMap,
        f = this.activeRecognizers,
        c = a.getHandledEvents(),
        b,
        e,
        d;
      a.setOnRecognized(this.onRecognized);
      a.setCallbackScope(this);
      for (b = 0, e = c.length; b < e; b++) {
        d = c[b];
        g[d] = a;
      }
      f.push(a);
      return this;
    },
    onRecognized: function (d, i, b, g) {
      var c = [],
        h = b.length,
        e,
        a,
        f;
      if (h === 1) {
        return this.publish(d, b[0].targets, i, g);
      }
      for (a = 0; a < h; a++) {
        f = b[a];
        c.push(f.targets);
      }
      e = this.getCommonTargets(c);
      this.publish(d, e, i, g);
    },
    publish: function (b, c, a, d) {
      a.set(d);
      return this.callSuper([b, c, a]);
    },
    getCommonTargets: function (e) {
      var d = e[0],
        h = e.length;
      if (h === 1) {
        return d;
      }
      var a = [],
        g = 1,
        b,
        f,
        c;
      while (!0) {
        b = d[d.length - g];
        if (!b) {
          return a;
        }
        for (c = 1; c < h; c++) {
          f = e[c];
          if (f[f.length - g] !== b) {
            return a;
          }
        }
        a.unshift(b);
        g++;
      }
      return a;
    },
    invokeRecognizers: function (d, f) {
      var c = this.activeRecognizers,
        e = c.length,
        a,
        b;
      if (d === "onStart") {
        for (a = 0; a < e; a++) {
          c[a].isActive = !0;
        }
      }
      for (a = 0; a < e; a++) {
        b = c[a];
        if (b.isActive && b[d].call(b, f) === !1) {
          b.isActive = !1;
        }
      }
    },
    getActiveRecognizers: function () {
      return this.activeRecognizers;
    },
    updateTouch: function (b) {
      var c = b.identifier,
        a = this.touchesMap[c],
        f,
        d,
        e;
      if (!a) {
        f = this.getElementTarget(b.target);
        this.touchesMap[c] = a = {
          identifier: c,
          target: f,
          targets: this.getBubblingTargets(f),
        };
        this.currentIdentifiers.push(c);
      }
      d = b.pageX;
      e = b.pageY;
      if (d === a.pageX && e === a.pageY) {
        return !1;
      }
      a.pageX = d;
      a.pageY = e;
      a.timeStamp = b.timeStamp;
      a.point = new Ext.util.Point(d, e);
      return a;
    },
    updateTouches: function (d) {
      var a,
        e,
        b,
        c = [];
      for (a = 0, e = d.length; a < e; a++) {
        b = this.updateTouch(d[a]);
        if (b) {
          c.push(b);
        }
      }
      return c;
    },
    factoryEvent: function (a) {
      return new Ext.event.Touch(
        a,
        null,
        this.touchesMap,
        this.currentIdentifiers
      );
    },
    onTouchStart: function (a) {
      var b = a.changedTouches,
        f = a.target,
        g = b.length,
        h = this.isNotPreventable,
        c,
        d,
        e;
      this.updateTouches(b);
      a = this.factoryEvent(a);
      b = a.changedTouches;
      for (c = 0; c < g; c++) {
        d = b[c];
        this.publish("touchstart", d.targets, a, { touch: d });
      }
      if (!this.isStarted) {
        this.isStarted = !0;
        this.invokeRecognizers("onStart", a);
      }
      this.invokeRecognizers("onTouchStart", a);
      e = f.parentNode || {};
    },
    onTouchMove: function (a) {
      if (!this.isStarted) {
        return;
      }
      if (!this.animationQueued) {
        this.animationQueued = !0;
        Ext.AnimationQueue.start("onAnimationFrame", this);
      }
      this.lastMoveEvent = a;
    },
    onAnimationFrame: function () {
      var a = this.lastMoveEvent;
      if (a) {
        this.lastMoveEvent = null;
        this.doTouchMove(a);
      }
    },
    doTouchMove: function (a) {
      var c, b, e, d;
      c = this.updateTouches(a.changedTouches);
      e = c.length;
      a = this.factoryEvent(a);
      for (b = 0; b < e; b++) {
        d = c[b];
        this.publish("touchmove", d.targets, a, { touch: d });
      }
      if (e > 0) {
        this.invokeRecognizers("onTouchMove", a);
      }
    },
    onTouchEnd: function (a) {
      if (!this.isStarted) {
        return;
      }
      if (this.lastMoveEvent) {
        this.onAnimationFrame();
      }
      var g = this.touchesMap,
        d = this.currentIdentifiers,
        c = a.changedTouches,
        h = c.length,
        e,
        b,
        f;
      this.updateTouches(c);
      c = a.changedTouches;
      for (b = 0; b < h; b++) {
        Ext.Array.remove(d, c[b].identifier);
      }
      a = this.factoryEvent(a);
      for (b = 0; b < h; b++) {
        e = c[b].identifier;
        f = g[e];
        delete g[e];
        this.publish("touchend", f.targets, a, { touch: f });
      }
      this.invokeRecognizers("onTouchEnd", a);
      if (a.touches.length === 1 && d.length) {
        d.length = 0;
        this.touchesMap = {};
      }
      if (d.length === 0) {
        this.isStarted = !1;
        this.invokeRecognizers("onEnd", a);
        if (this.animationQueued) {
          this.animationQueued = !1;
          Ext.AnimationQueue.stop("onAnimationFrame", this);
        }
      }
    },
  },
  function () {
    if (Ext.feature.has.Pointer) {
      this.override({
        pointerToTouchMap: {
          MSPointerDown: "touchstart",
          MSPointerMove: "touchmove",
          MSPointerUp: "touchend",
          MSPointerCancel: "touchcancel",
          pointerdown: "touchstart",
          pointermove: "touchmove",
          pointerup: "touchend",
          pointercancel: "touchcancel",
        },
        touchToPointerMap: {
          touchstart: "MSPointerDown",
          touchmove: "MSPointerMove",
          touchend: "MSPointerUp",
          touchcancel: "MSPointerCancel",
        },
        attachListener: function (a, b) {
          a = this.touchToPointerMap[a];
          if (!a) {
            return;
          }
          return this.callOverridden([a, b]);
        },
        onEvent: function (a) {
          if ("button" in a && a.button > 0) {
            return;
          }
          var b = this.pointerToTouchMap[a.type];
          a.identifier = a.pointerId;
          a.changedTouches = [a];
          this.eventProcessors[b].call(this, a);
        },
      });
    } else {
      if (
        !Ext.browser.is.Ripple &&
        (Ext.os.is.ChromeOS || !Ext.feature.has.Touch)
      ) {
        this.override({
          handledEvents: [
            "touchstart",
            "touchmove",
            "touchend",
            "touchcancel",
            "mousedown",
            "mousemove",
            "mouseup",
          ],
        });
      }
    }
  }
);
Ext.define("Ext.event.recognizer.Recognizer", {
  mixins: [Ext.mixin.Identifiable],
  handledEvents: [],
  config: {
    onRecognized: Ext.emptyFn,
    onFailed: Ext.emptyFn,
    callbackScope: null,
  },
  constructor: function (a) {
    this.initConfig(a);
    return this;
  },
  getHandledEvents: function () {
    return this.handledEvents;
  },
  onStart: Ext.emptyFn,
  onEnd: Ext.emptyFn,
  fail: function () {
    this.getOnFailed().apply(this.getCallbackScope(), arguments);
    return !1;
  },
  fire: function () {
    this.getOnRecognized().apply(this.getCallbackScope(), arguments);
  },
});
Ext.define("Ext.event.recognizer.Touch", {
  extend: Ext.event.recognizer.Recognizer,
  onTouchStart: Ext.emptyFn,
  onTouchMove: Ext.emptyFn,
  onTouchEnd: Ext.emptyFn,
});
Ext.define("Ext.event.recognizer.SingleTouch", {
  extend: Ext.event.recognizer.Touch,
  inheritableStatics: { NOT_SINGLE_TOUCH: 1, TOUCH_MOVED: 2 },
  onTouchStart: function (a) {
    if (a.touches.length > 1) {
      return this.fail(this.self.NOT_SINGLE_TOUCH);
    }
  },
});
Ext.define("Ext.event.recognizer.DoubleTap", {
  extend: Ext.event.recognizer.SingleTouch,
  inheritableStatics: { DIFFERENT_TARGET: 3 },
  config: { maxDuration: 300 },
  handledEvents: ["singletap", "doubletap"],
  singleTapTimer: null,
  startTime: 0,
  lastTapTime: 0,
  onTouchStart: function (a) {
    if (this.callParent(arguments) === !1) {
      return !1;
    }
    this.startTime = a.time;
    clearTimeout(this.singleTapTimer);
  },
  onTouchMove: function () {
    return this.fail(this.self.TOUCH_MOVED);
  },
  onEnd: function (a) {
    var i = this,
      c = this.getMaxDuration(),
      b = a.changedTouches[0],
      e = a.time,
      g = a.target,
      f = this.lastTapTime,
      h = this.lastTarget,
      d;
    this.lastTapTime = e;
    this.lastTarget = g;
    if (f) {
      d = e - f;
      if (d <= c) {
        if (g !== h) {
          return this.fail(this.self.DIFFERENT_TARGET);
        }
        this.lastTarget = null;
        this.lastTapTime = 0;
        this.fire("doubletap", a, [b], { touch: b, duration: d });
        return;
      }
    }
    if (e - this.startTime > c) {
      this.fireSingleTap(a, b);
    } else {
      this.singleTapTimer = setTimeout(function () {
        i.fireSingleTap(a, b);
      }, c);
    }
  },
  fireSingleTap: function (b, a) {
    this.fire("singletap", b, [a], { touch: a });
  },
});
Ext.define("Ext.event.recognizer.Drag", {
  extend: Ext.event.recognizer.SingleTouch,
  isStarted: !1,
  startPoint: null,
  previousPoint: null,
  lastPoint: null,
  handledEvents: ["dragstart", "drag", "dragend"],
  config: { minDistance: 8 },
  constructor: function () {
    this.callSuper(arguments);
    this.info = {
      touch: null,
      previous: { x: 0, y: 0 },
      x: 0,
      y: 0,
      delta: { x: 0, y: 0 },
      absDelta: { x: 0, y: 0 },
      flick: { velocity: { x: 0, y: 0 } },
      direction: { x: 0, y: 0 },
      time: 0,
      previousTime: { x: 0, y: 0 },
    };
  },
  onTouchStart: function (a) {
    if (this.callSuper(arguments) === !1) {
      if (this.isStarted && this.lastMoveEvent !== null) {
        this.lastMoveEvent.isStopped = !1;
        this.onTouchEnd(this.lastMoveEvent);
      }
      return !1;
    }
    this.startTime = a.time;
    this.startPoint = a.changedTouches[0].point;
  },
  tryDragStart: function (a) {
    var g = this.startPoint,
      c = a.changedTouches,
      b = c[0],
      d = b.point,
      f = this.getMinDistance(),
      e = this.info;
    if (Math.abs(d.getDistanceTo(g)) >= f) {
      this.isStarted = !0;
      this.previousPoint = this.lastPoint = d;
      this.resetInfo("x", a, b);
      this.resetInfo("y", a, b);
      e.time = a.time;
      this.fire("dragstart", a, c, e);
    }
  },
  onTouchMove: function (a) {
    if (!this.isStarted) {
      this.tryDragStart(a);
    }
    if (!this.isStarted) {
      return;
    }
    var c = a.changedTouches,
      b = c[0],
      d = b.point;
    if (this.lastPoint) {
      this.previousPoint = this.lastPoint;
    }
    this.lastPoint = d;
    this.lastMoveEvent = a;
    this.updateInfo("x", a, b, !0);
    this.updateInfo("y", a, b, !0);
    this.info.time = a.time;
    this.fire("drag", a, c, this.info);
  },
  onAxisDragEnd: function (b, a) {
    var c = a.time - a.previousTime[b];
    if (c > 0) {
      a.flick.velocity[b] = (a[b] - a.previous[b]) / c;
    }
  },
  resetInfo: function (b, h, g) {
    var f = this.lastPoint[b],
      d = this.startPoint[b],
      e = f - d,
      c = b.toUpperCase(),
      a = this.info;
    a.touch = g;
    a.delta[b] = e;
    a.absDelta[b] = Math.abs(e);
    a.previousTime[b] = this.startTime;
    a.previous[b] = d;
    a[b] = f;
    a.direction[b] = 0;
    a["start" + c] = this.startPoint[b];
    a["previous" + c] = a.previous[b];
    a["page" + c] = a[b];
    a["delta" + c] = a.delta[b];
    a["absDelta" + c] = a.absDelta[b];
    a["previousDelta" + c] = 0;
    a.startTime = this.startTime;
  },
  updateInfo: function (b, n, l, i) {
    var m = n.time,
      d = this.lastPoint[b],
      f = this.previousPoint[b],
      k = this.startPoint[b],
      h = d - k,
      a = this.info,
      g = a.direction,
      c = b.toUpperCase(),
      j = a.previous[b],
      e;
    a.touch = l;
    e = a.delta[b];
    a.delta[b] = h;
    a.absDelta[b] = Math.abs(h);
    if (i && d !== j && d !== a[b] && m - a.previousTime[b] >= 50) {
      a.previous[b] = a[b];
      a.previousTime[b] = a.time;
    }
    a[b] = d;
    if (d > f) {
      g[b] = 1;
    } else {
      if (d < f) {
        g[b] = -1;
      }
    }
    a["start" + c] = this.startPoint[b];
    a["previous" + c] = a.previous[b];
    a["page" + c] = a[b];
    a["delta" + c] = a.delta[b];
    a["absDelta" + c] = a.absDelta[b];
    a["previousDelta" + c] = e;
    a.startTime = this.startTime;
  },
  onTouchEnd: function (a) {
    if (!this.isStarted) {
      this.tryDragStart(a);
    }
    if (this.isStarted) {
      var d = a.changedTouches,
        c = d[0],
        e = c.point,
        b = this.info;
      this.isStarted = !1;
      this.lastPoint = e;
      this.updateInfo("x", a, c);
      this.updateInfo("y", a, c);
      b.time = a.time;
      this.onAxisDragEnd("x", b);
      this.onAxisDragEnd("y", b);
      this.fire("dragend", a, d, b);
      this.startPoint = null;
      this.previousPoint = null;
      this.lastPoint = null;
      this.lastMoveEvent = null;
    }
  },
});
Ext.define("Ext.event.recognizer.Swipe", {
  extend: Ext.event.recognizer.SingleTouch,
  handledEvents: ["swipestart", "swipe"],
  inheritableStatics: {
    MAX_OFFSET_EXCEEDED: 16,
    MAX_DURATION_EXCEEDED: 17,
    DISTANCE_NOT_ENOUGH: 18,
  },
  config: { minDistance: 80, maxOffset: 35, maxDuration: 1000 },
  onTouchStart: function (b) {
    if (this.callParent(arguments) === !1) {
      return !1;
    }
    var a = b.changedTouches[0];
    this.startTime = b.time;
    this.isHorizontal = !0;
    this.isVertical = !0;
    this.startX = a.pageX;
    this.startY = a.pageY;
  },
  onTouchMove: function (c) {
    var b = c.changedTouches[0],
      h = b.pageX,
      i = b.pageY,
      k = h - this.startX,
      l = i - this.startY,
      d = Math.abs(h - this.startX),
      e = Math.abs(i - this.startY),
      j = c.time - this.startTime,
      g = this.getMinDistance(),
      m = c.time,
      a,
      f;
    if (m - this.startTime > this.getMaxDuration()) {
      return this.fail(this.self.MAX_DURATION_EXCEEDED);
    }
    if (this.isHorizontal && e > this.getMaxOffset()) {
      this.isHorizontal = !1;
    }
    if (this.isVertical && d > this.getMaxOffset()) {
      this.isVertical = !1;
    }
    if (!this.isVertical || !this.isHorizontal) {
      if (this.isHorizontal && d < g) {
        a = k < 0 ? "left" : "right";
        f = d;
      } else {
        if (this.isVertical && e < g) {
          a = l < 0 ? "up" : "down";
          f = e;
        }
      }
    }
    if (a && !this.started) {
      this.started = !0;
      this.fire("swipestart", c, [b], {
        touch: b,
        direction: a,
        distance: f,
        duration: j,
      });
    }
    if (!this.isHorizontal && !this.isVertical) {
      return this.fail(this.self.MAX_OFFSET_EXCEEDED);
    }
  },
  onTouchEnd: function (b) {
    if (this.onTouchMove(b) === !1) {
      return !1;
    }
    var a = b.changedTouches[0],
      k = a.pageX,
      l = a.pageY,
      h = k - this.startX,
      i = l - this.startY,
      f = Math.abs(h),
      g = Math.abs(i),
      e = this.getMinDistance(),
      j = b.time - this.startTime,
      c,
      d;
    if (this.isVertical && g < e) {
      this.isVertical = !1;
    }
    if (this.isHorizontal && f < e) {
      this.isHorizontal = !1;
    }
    if (this.isHorizontal) {
      c = h < 0 ? "left" : "right";
      d = f;
    } else {
      if (this.isVertical) {
        c = i < 0 ? "up" : "down";
        d = g;
      } else {
        return this.fail(this.self.DISTANCE_NOT_ENOUGH);
      }
    }
    this.started = !1;
    this.fire("swipe", b, [a], {
      touch: a,
      direction: c,
      distance: d,
      duration: j,
    });
  },
});
Ext.define("Ext.event.recognizer.EdgeSwipe", {
  extend: Ext.event.recognizer.Swipe,
  handledEvents: ["edgeswipe", "edgeswipestart", "edgeswipeend"],
  inheritableStatics: { NOT_NEAR_EDGE: 19 },
  config: { minDistance: 60 },
  onTouchStart: function (b) {
    if (this.callParent(arguments) === !1) {
      return !1;
    }
    var a = b.changedTouches[0];
    this.started = !1;
    this.direction = null;
    this.isHorizontal = !0;
    this.isVertical = !0;
    this.startX = a.pageX;
    this.startY = a.pageY;
  },
  onTouchMove: function (c) {
    var b = c.changedTouches[0],
      l = b.pageX,
      m = b.pageY,
      f = l - this.startX,
      g = m - this.startY,
      i = Math.abs(m - this.startY),
      h = Math.abs(l - this.startX),
      d = this.getMinDistance(),
      j = this.getMaxOffset(),
      k = c.time - this.startTime,
      o = Ext.Viewport && Ext.Viewport.element.getWidth(),
      n = Ext.Viewport && Ext.Viewport.element.getHeight(),
      e,
      a;
    if (this.isVertical && h > j) {
      this.isVertical = !1;
    }
    if (this.isHorizontal && i > j) {
      this.isHorizontal = !1;
    }
    if (this.isVertical && this.isHorizontal) {
      if (i > h) {
        this.isHorizontal = !1;
      } else {
        this.isVertical = !1;
      }
    }
    if (this.isHorizontal) {
      e = f < 0 ? "left" : "right";
      a = f;
    } else {
      if (this.isVertical) {
        e = g < 0 ? "up" : "down";
        a = g;
      }
    }
    this.direction = this.direction || e;
    if (this.direction == "up") {
      a = g * -1;
    } else {
      if (this.direction == "left") {
        a = f * -1;
      }
    }
    this.distance = a;
    if (a == 0) {
      return this.fail(this.self.DISTANCE_NOT_ENOUGH);
    }
    if (!this.started) {
      if (this.direction == "right" && this.startX > d) {
        return this.fail(this.self.NOT_NEAR_EDGE);
      } else {
        if (this.direction == "down" && this.startY > d) {
          return this.fail(this.self.NOT_NEAR_EDGE);
        } else {
          if (this.direction == "left" && o - this.startX > d) {
            return this.fail(this.self.NOT_NEAR_EDGE);
          } else {
            if (this.direction == "up" && n - this.startY > d) {
              return this.fail(this.self.NOT_NEAR_EDGE);
            }
          }
        }
      }
      this.started = !0;
      this.startTime = c.time;
      this.fire("edgeswipestart", c, [b], {
        touch: b,
        direction: this.direction,
        distance: this.distance,
        duration: k,
      });
    } else {
      this.fire("edgeswipe", c, [b], {
        touch: b,
        direction: this.direction,
        distance: this.distance,
        duration: k,
      });
    }
  },
  onTouchEnd: function (a) {
    if (this.onTouchMove(a) !== !1) {
      var b = a.changedTouches[0],
        c = a.time - this.startTime;
      this.fire("edgeswipeend", a, [b], {
        touch: b,
        direction: this.direction,
        distance: this.distance,
        duration: c,
      });
    }
  },
});
Ext.define(
  "Ext.event.recognizer.LongPress",
  {
    extend: Ext.event.recognizer.SingleTouch,
    inheritableStatics: { DURATION_NOT_ENOUGH: 32 },
    config: { minDuration: 1000 },
    handledEvents: ["longpress"],
    fireLongPress: function (b) {
      var a = b.changedTouches[0];
      this.fire("longpress", b, [a], {
        touch: a,
        duration: this.getMinDuration(),
      });
      this.isLongPress = !0;
    },
    onTouchStart: function (b) {
      var a = this;
      if (this.callParent(arguments) === !1) {
        return !1;
      }
      this.isLongPress = !1;
      this.timer = setTimeout(function () {
        a.fireLongPress(b);
      }, this.getMinDuration());
    },
    onTouchMove: function () {
      return this.fail(this.self.TOUCH_MOVED);
    },
    onTouchEnd: function () {
      if (!this.isLongPress) {
        return this.fail(this.self.DURATION_NOT_ENOUGH);
      }
    },
    fail: function () {
      clearTimeout(this.timer);
      return this.callParent(arguments);
    },
  },
  function () {
    this.override({
      handledEvents: ["longpress", "taphold"],
      fire: function (b) {
        if (b === "longpress") {
          var a = Array.prototype.slice.call(arguments);
          a[0] = "taphold";
          this.fire.apply(this, a);
        }
        return this.callOverridden(arguments);
      },
    });
  }
);
Ext.define("Ext.event.recognizer.MultiTouch", {
  extend: Ext.event.recognizer.Touch,
  requiredTouchesCount: 2,
  isTracking: !1,
  isStarted: !1,
  onTouchStart: function (a) {
    var b = this.requiredTouchesCount,
      d = a.touches,
      c = d.length;
    if (c === b) {
      this.start(a);
    } else {
      if (c > b) {
        this.end(a);
      }
    }
  },
  onTouchEnd: function (a) {
    this.end(a);
  },
  start: function () {
    if (!this.isTracking) {
      this.isTracking = !0;
      this.isStarted = !1;
    }
  },
  end: function (a) {
    if (this.isTracking) {
      this.isTracking = !1;
      if (this.isStarted) {
        this.isStarted = !1;
        this.fireEnd(a);
      }
    }
  },
});
Ext.define("Ext.event.recognizer.Pinch", {
  extend: Ext.event.recognizer.MultiTouch,
  requiredTouchesCount: 2,
  handledEvents: ["pinchstart", "pinch", "pinchend"],
  startDistance: 0,
  lastTouches: null,
  onTouchMove: function (c) {
    if (!this.isTracking) {
      return;
    }
    var a = Array.prototype.slice.call(c.touches),
      e,
      d,
      b;
    e = a[0].point;
    d = a[1].point;
    b = e.getDistanceTo(d);
    if (b === 0) {
      return;
    }
    if (!this.isStarted) {
      this.isStarted = !0;
      this.startDistance = b;
      this.fire("pinchstart", c, a, { touches: a, distance: b, scale: 1 });
    } else {
      this.fire("pinch", c, a, {
        touches: a,
        distance: b,
        scale: b / this.startDistance,
      });
    }
    this.lastTouches = a;
  },
  fireEnd: function (a) {
    this.fire("pinchend", a, this.lastTouches);
  },
  fail: function () {
    return this.callParent(arguments);
  },
});
Ext.define("Ext.event.recognizer.Rotate", {
  extend: Ext.event.recognizer.MultiTouch,
  requiredTouchesCount: 2,
  handledEvents: ["rotatestart", "rotate", "rotateend"],
  startAngle: 0,
  lastTouches: null,
  lastAngle: null,
  onTouchMove: function (g) {
    if (!this.isTracking) {
      return;
    }
    var b = Array.prototype.slice.call(g.touches),
      c = this.lastAngle,
      i,
      h,
      a,
      e,
      d,
      f;
    i = b[0].point;
    h = b[1].point;
    a = i.getAngleTo(h);
    if (c !== null) {
      f = Math.abs(c - a);
      e = a + 360;
      d = a - 360;
      if (Math.abs(e - c) < f) {
        a = e;
      } else {
        if (Math.abs(d - c) < f) {
          a = d;
        }
      }
    }
    this.lastAngle = a;
    if (!this.isStarted) {
      this.isStarted = !0;
      this.startAngle = a;
      this.fire("rotatestart", g, b, { touches: b, angle: a, rotation: 0 });
    } else {
      this.fire("rotate", g, b, {
        touches: b,
        angle: a,
        rotation: a - this.startAngle,
      });
    }
    this.lastTouches = b;
  },
  fireEnd: function (a) {
    this.lastAngle = null;
    this.fire("rotateend", a, this.lastTouches);
  },
});
Ext.define("Ext.event.recognizer.Tap", {
  extend: Ext.event.recognizer.SingleTouch,
  handledEvents: ["tap", "tapcancel"],
  config: { moveDistance: 8 },
  onTouchStart: function (a) {
    if (this.callSuper(arguments) === !1) {
      return !1;
    }
    this.startPoint = a.changedTouches[0].point;
  },
  onTouchMove: function (b) {
    var a = b.changedTouches[0],
      c = a.point;
    if (Math.abs(c.getDistanceTo(this.startPoint)) >= this.getMoveDistance()) {
      this.fire("tapcancel", b, [a], { touch: a });
      return this.fail(this.self.TOUCH_MOVED);
    }
  },
  onTouchEnd: function (b) {
    var a = b.changedTouches[0];
    this.fire("tap", b, [a], { touch: a });
  },
});
Ext.define("Ext.field.Checkbox", {
  extend: Ext.field.Field,
  alternateClassName: "Ext.form.Checkbox",
  xtype: "checkboxfield",
  qsaLeftRe: /[\[]/g,
  qsaRightRe: /[\]]/g,
  isCheckbox: !0,
  config: {
    ui: "checkbox",
    value: "",
    checked: !1,
    tabIndex: -1,
    component: {
      xtype: "input",
      type: "checkbox",
      useMask: !0,
      cls: Ext.baseCSSPrefix + "input-checkbox",
    },
  },
  platformConfig: [
    { theme: ["Windows", "Blackberry", "Tizen"], labelAlign: "left" },
  ],
  initialize: function () {
    var a = this,
      b = a.getComponent();
    a.callParent();
    b.on({ scope: a, order: "before", masktap: "onMaskTap" });
    b.doMaskTap = Ext.emptyFn;
    a.label.on({ scope: a, tap: "onMaskTap" });
  },
  doInitValue: function () {
    var b = this,
      a = b.getInitialConfig();
    if (a.hasOwnProperty("value")) {
      b.originalState = a.value;
    }
    if (a.hasOwnProperty("checked")) {
      b.originalState = a.checked;
    }
    b.callParent(arguments);
  },
  updateInputType: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setType(b);
    }
  },
  updateName: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setName(b);
    }
  },
  getChecked: function () {
    this._checked = this.getComponent().getChecked();
    return this._checked;
  },
  getSubmitValue: function () {
    return this.getChecked()
      ? Ext.isEmpty(this._value)
        ? !0
        : this._value
      : null;
  },
  setChecked: function (a) {
    this.updateChecked(a);
    this._checked = a;
  },
  updateChecked: function (a) {
    this.getComponent().setChecked(a);
    if (this.initialized) {
      this.onChange();
    }
  },
  onMaskTap: function (d, c) {
    var a = this,
      b = a.getComponent().input.dom;
    if (a.getDisabled()) {
      return !1;
    }
    b.checked = !b.checked;
    a.onChange(c);
    return !1;
  },
  onChange: function (d) {
    var a = this,
      c = a._checked,
      b = a.getChecked();
    if (c != b) {
      if (b) {
        a.fireEvent("check", a, d);
      } else {
        a.fireEvent("uncheck", a, d);
      }
      a.fireEvent("change", a, b, c);
    }
  },
  doChecked: Ext.emptyFn,
  doUnChecked: Ext.emptyFn,
  isChecked: function () {
    return this.getChecked();
  },
  check: function () {
    return this.setChecked(!0);
  },
  uncheck: function () {
    return this.setChecked(!1);
  },
  getSameGroupFields: function () {
    var b = this,
      e = b.up("formpanel") || b.up("fieldset"),
      c = b.getName(),
      j = b.qsaLeftRe,
      i = b.qsaRightRe,
      k = b.getBaseCls().split(" ").join("."),
      g = [],
      f,
      a,
      d,
      h;
    if (!e) {
      e = Ext.Viewport;
    }
    c = c.replace(j, "\\[");
    c = c.replace(i, "\\]");
    f = Ext.query("[name=" + c + "]", e.element.dom);
    h = f.length;
    for (d = 0; d < h; d++) {
      a = f[d];
      a = Ext.fly(a).up("." + k);
      if (a && a.id) {
        g.push(Ext.getCmp(a.id));
      }
    }
    return g;
  },
  getGroupValues: function () {
    var a = [];
    this.getSameGroupFields().forEach(function (b) {
      if (b.getChecked()) {
        a.push(b.getValue());
      }
    });
    return a;
  },
  setGroupValues: function (a) {
    this.getSameGroupFields().forEach(function (b) {
      b.setChecked(a.indexOf(b.getValue()) !== -1);
    });
    return this;
  },
  resetGroupValues: function () {
    this.getSameGroupFields().forEach(function (a) {
      a.setChecked(a.originalState);
    });
    return this;
  },
  reset: function () {
    this.setChecked(this.originalState);
    return this;
  },
});
Ext.define("Ext.picker.Slot", {
  extend: Ext.dataview.DataView,
  xtype: "pickerslot",
  alternateClassName: "Ext.Picker.Slot",
  isSlot: !0,
  config: {
    title: null,
    showTitle: !0,
    cls: Ext.baseCSSPrefix + "picker-slot",
    name: null,
    value: null,
    flex: 1,
    align: "left",
    displayField: "text",
    valueField: "value",
    itemTpl: null,
    scrollable: {
      direction: "vertical",
      indicators: !1,
      momentumEasing: { minVelocity: 2 },
      slotSnapEasing: { duration: 100 },
    },
    verticallyCenterItems: !0,
  },
  platformConfig: [{ theme: ["Windows"], title: "choose an item" }],
  constructor: function () {
    this.selectedIndex = 0;
    this.callParent(arguments);
  },
  applyTitle: function (a) {
    if (a) {
      a = Ext.create("Ext.Component", {
        cls: Ext.baseCSSPrefix + "picker-slot-title",
        docked: "top",
        html: a,
      });
    }
    return a;
  },
  updateTitle: function (a, b) {
    if (a) {
      this.add(a);
      this.setupBar();
    }
    if (b) {
      this.remove(b);
    }
  },
  updateShowTitle: function (b) {
    var a = this.getTitle(),
      c = b ? "show" : "hide";
    if (a) {
      a.on(c, this.setupBar, this, { single: !0, delay: 50 });
      a[b ? "show" : "hide"]();
    }
  },
  updateDisplayField: function (a) {
    if (!this.config.itemTpl) {
      this.setItemTpl(
        '<div class="' +
          Ext.baseCSSPrefix +
          'picker-item {cls} <tpl if="extra">' +
          Ext.baseCSSPrefix +
          'picker-invalid</tpl>">{' +
          a +
          "}</div>"
      );
    }
  },
  updateAlign: function (b, c) {
    var a = this.element;
    a.addCls(Ext.baseCSSPrefix + "picker-" + b);
    a.removeCls(Ext.baseCSSPrefix + "picker-" + c);
  },
  applyData: function (c) {
    var f = [],
      e = c && c.length,
      d,
      a,
      b;
    if (c && Ext.isArray(c) && e) {
      for (d = 0; d < e; d++) {
        a = c[d];
        b = {};
        if (Ext.isArray(a)) {
          b[this.valueField] = a[0];
          b[this.displayField] = a[1];
        } else {
          if (Ext.isString(a)) {
            b[this.valueField] = a;
            b[this.displayField] = a;
          } else {
            if (Ext.isObject(a)) {
              b = a;
            }
          }
        }
        f.push(b);
      }
    }
    return c;
  },
  initialize: function () {
    this.callParent();
    var a = this.getScrollable().getScroller();
    this.on({ scope: this, painted: "onPainted", itemtap: "doItemTap" });
    this.element.on({
      scope: this,
      touchstart: "onTouchStart",
      touchend: "onTouchEnd",
    });
    a.on({ scope: this, scrollend: "onScrollEnd" });
  },
  onPainted: function () {
    this.setupBar();
  },
  getPicker: function () {
    if (!this.picker) {
      this.picker = this.getParent();
    }
    return this.picker;
  },
  setupBar: function () {
    if (!this.rendered) {
      return;
    }
    var i = this.element,
      f = this.innerElement,
      j = this.getPicker(),
      l = j.bar,
      k = this.getValue(),
      h = this.getShowTitle(),
      e = this.getTitle(),
      g = this.getScrollable(),
      d = g.getScroller(),
      c = 0,
      a,
      b;
    a = l.dom.getBoundingClientRect().height;
    if (h && e) {
      c = e.element.getHeight();
    }
    b = Math.ceil((i.getHeight() - c - a) / 2);
    if (this.getVerticallyCenterItems()) {
      f.setStyle({ padding: b + "px 0 " + b + "px" });
    }
    d.refresh();
    d.setSlotSnapSize(a);
    this.setValue(k);
  },
  doItemTap: function (d, c, b, e) {
    var a = this;
    a.selectedIndex = c;
    a.selectedNode = b;
    a.scrollToItem(b, !0);
  },
  scrollToItem: function (b, d) {
    var h = b.getY(),
      e = b.parent(),
      g = e.getY(),
      c = this.getScrollable(),
      f = c.getScroller(),
      a;
    a = h - g;
    f.scrollTo(0, a, d);
  },
  onTouchStart: function () {
    this.element.addCls(Ext.baseCSSPrefix + "scrolling");
  },
  onTouchEnd: function () {
    this.element.removeCls(Ext.baseCSSPrefix + "scrolling");
  },
  onScrollEnd: function (f, g, e) {
    var a = this,
      b = Math.round(e / a.picker.bar.dom.getBoundingClientRect().height),
      d = a.getViewItems(),
      c = d[b];
    if (c) {
      a.selectedIndex = b;
      a.selectedNode = c;
      a.fireEvent("slotpick", a, a.getValue(), a.selectedNode);
    }
  },
  getValue: function (d) {
    var b = this.getStore(),
      a,
      c;
    if (!b) {
      return;
    }
    if (!this.rendered || !d) {
      return this._value;
    }
    if (this._value === !1) {
      return null;
    }
    a = b.getAt(this.selectedIndex);
    c = a ? a.get(this.getValueField()) : null;
    return c;
  },
  setValue: function (a) {
    return this.doSetValue(a);
  },
  setValueAnimated: function (a) {
    return this.doSetValue(a, !0);
  },
  doSetValue: function (b, f) {
    if (!this.rendered) {
      this._value = b;
      return;
    }
    var g = this.getStore(),
      e = this.getViewItems(),
      d = this.getValueField(),
      a,
      c;
    a = g.findExact(d, b);
    if (a == -1) {
      a = 0;
    }
    c = Ext.get(e[a]);
    this.selectedIndex = a;
    if (c) {
      this.scrollToItem(c, f ? { duration: 100 } : !1);
      this.select(this.selectedIndex);
    }
    this._value = b;
  },
});
Ext.define("MEM.overrides.picker.Slot", {
  override: "Ext.picker.Slot",
  onScrollEnd: function (f, g, e) {
    var a = this,
      b = Math.round(e / a.picker.bar.dom.getBoundingClientRect().height);
    if (this.element !== null) {
      var d = a.getViewItems(),
        c = d[b];
      if (c) {
        a.selectedIndex = b;
        a.selectedNode = c;
        a.fireEvent("slotpick", a, a.getValue(), a.selectedNode);
      }
    }
  },
});
Ext.define(
  "Ext.picker.Picker",
  {
    extend: Ext.Sheet,
    alias: "widget.picker",
    alternateClassName: "Ext.Picker",
    isPicker: !0,
    config: {
      baseCls: Ext.baseCSSPrefix + "picker",
      doneButton: !0,
      cancelButton: !0,
      useTitles: !1,
      slots: null,
      value: null,
      height: 220,
      layout: { type: "hbox", align: "stretch" },
      centered: !1,
      left: 0,
      right: 0,
      bottom: 0,
      defaultType: "pickerslot",
      toolbarPosition: "top",
      toolbar: { xtype: "titlebar" },
    },
    platformConfig: [
      {
        theme: ["Windows"],
        height: "100%",
        toolbarPosition: "bottom",
        toolbar: { xtype: "toolbar", layout: { type: "hbox", pack: "center" } },
        doneButton: { iconCls: "check2", ui: "round", text: "" },
        cancelButton: { iconCls: "delete", ui: "round", text: "" },
      },
      { theme: ["CupertinoClassic"], toolbar: { ui: "black" } },
      {
        theme: ["MountainView"],
        toolbarPosition: "bottom",
        toolbar: { defaults: { flex: 1 } },
      },
    ],
    initialize: function () {
      var c = this,
        a = Ext.baseCSSPrefix,
        b = this.innerElement;
      this.mask = b.createChild({ cls: a + "picker-mask" });
      this.bar = this.mask.createChild({ cls: a + "picker-bar" });
      c.on({ scope: this, delegate: "pickerslot", slotpick: "onSlotPick" });
    },
    applyToolbar: function (a) {
      if (a === !0) {
        a = {};
      }
      Ext.applyIf(a, { docked: this.getToolbarPosition() });
      return Ext.factory(a, "Ext.TitleBar", this.getToolbar());
    },
    updateToolbar: function (a, b) {
      if (a) {
        this.add(a);
      }
      if (b) {
        this.remove(b);
      }
    },
    applyDoneButton: function (a) {
      if (a) {
        if (Ext.isBoolean(a)) {
          a = {};
        }
        if (typeof a == "string") {
          a = { text: a };
        }
        Ext.applyIf(a, { ui: "action", align: "right", text: "Done" });
      }
      return Ext.factory(a, "Ext.Button", this.getDoneButton());
    },
    updateDoneButton: function (a, b) {
      var c = this.getToolbar();
      if (a) {
        c.add(a);
        a.on("tap", this.onDoneButtonTap, this);
      } else {
        if (b) {
          c.remove(b);
        }
      }
    },
    applyCancelButton: function (a) {
      if (a) {
        if (Ext.isBoolean(a)) {
          a = {};
        }
        if (typeof a == "string") {
          a = { text: a };
        }
        Ext.applyIf(a, { align: "left", text: "Cancel" });
      }
      return Ext.factory(a, "Ext.Button", this.getCancelButton());
    },
    updateCancelButton: function (a, b) {
      var c = this.getToolbar();
      if (a) {
        c.add(a);
        a.on("tap", this.onCancelButtonTap, this);
      } else {
        if (b) {
          c.remove(b);
        }
      }
    },
    updateUseTitles: function (d) {
      var c = this.getInnerItems(),
        f = c.length,
        e = Ext.baseCSSPrefix + "use-titles",
        a,
        b;
      if (d) {
        this.addCls(e);
      } else {
        this.removeCls(e);
      }
      for (a = 0; a < f; a++) {
        b = c[a];
        if (b.isSlot) {
          b.setShowTitle(d);
        }
      }
    },
    applySlots: function (a) {
      if (a) {
        var c = a.length,
          b;
        for (b = 0; b < c; b++) {
          a[b].picker = this;
        }
      }
      return a;
    },
    updateSlots: function (b) {
      var c = Ext.baseCSSPrefix,
        a;
      this.removeAll();
      if (b) {
        this.add(b);
      }
      a = this.getInnerItems();
      if (a.length > 0) {
        a[0].addCls(c + "first");
        a[a.length - 1].addCls(c + "last");
      }
      this.updateUseTitles(this.getUseTitles());
    },
    onDoneButtonTap: function () {
      var b = this._value,
        a = this.getValue(!0);
      if (a != b) {
        this.fireEvent("change", this, a);
      }
      this.hide();
      Ext.util.InputBlocker.unblockInputs();
    },
    onCancelButtonTap: function () {
      this.fireEvent("cancel", this);
      this.hide();
      Ext.util.InputBlocker.unblockInputs();
    },
    onSlotPick: function (a) {
      this.fireEvent("pick", this, this.getValue(!0), a);
    },
    show: function () {
      if (this.getParent() === undefined) {
        Ext.Viewport.add(this);
      }
      this.callParent(arguments);
      if (!this.isHidden()) {
        this.setValue(this._value);
      }
      Ext.util.InputBlocker.blockInputs();
    },
    setValue: function (b, i) {
      var e = this,
        d = e.getInnerItems(),
        j = d.length,
        h,
        c,
        f,
        a,
        g;
      if (!b) {
        b = {};
        for (a = 0; a < j; a++) {
          b[d[a].config.name] = null;
        }
      }
      for (h in b) {
        c = null;
        g = b[h];
        for (a = 0; a < d.length; a++) {
          f = d[a];
          if (f.config.name == h) {
            c = f;
            break;
          }
        }
        if (c) {
          if (i) {
            c.setValueAnimated(g);
          } else {
            c.setValue(g);
          }
        }
      }
      e._values = e._value = b;
      return e;
    },
    setValueAnimated: function (a) {
      this.setValue(a, !0);
    },
    getValue: function (c) {
      var d = {},
        e = this.getItems().items,
        f = e.length,
        a,
        b;
      if (c) {
        for (b = 0; b < f; b++) {
          a = e[b];
          if (a && a.isSlot) {
            d[a.getName()] = a.getValue(c);
          }
        }
        this._values = d;
      }
      return this._values;
    },
    getValues: function () {
      return this.getValue();
    },
    destroy: function () {
      this.callParent();
      Ext.destroy(this.mask, this.bar);
    },
  },
  function () {}
);
Ext.define("Ext.field.Select", {
  extend: Ext.field.Text,
  xtype: "selectfield",
  alternateClassName: "Ext.form.Select",
  config: {
    ui: "select",
    valueField: "value",
    displayField: "text",
    store: null,
    options: null,
    hiddenName: null,
    component: { useMask: !0 },
    clearIcon: !1,
    usePicker: "auto",
    autoSelect: !0,
    defaultPhonePickerConfig: null,
    defaultTabletPickerConfig: null,
    name: "picker",
    pickerSlotAlign: "center",
  },
  platformConfig: [
    { theme: ["Windows"], pickerSlotAlign: "left" },
    { theme: ["Tizen"], usePicker: !1 },
  ],
  initialize: function () {
    var a = this,
      b = a.getComponent();
    a.callParent();
    b.on({ scope: a, masktap: "onMaskTap" });
    b.doMaskTap = Ext.emptyFn;
    if (Ext.browser.is.AndroidStock2) {
      b.input.dom.disabled = !0;
    }
    if (Ext.theme.is.Blackberry) {
      this.label.on({ scope: a, tap: "onFocus" });
    }
  },
  getElementConfig: function () {
    if (Ext.theme.is.Blackberry) {
      var a = Ext.baseCSSPrefix;
      return {
        reference: "element",
        className: "x-container",
        children: [
          {
            reference: "innerElement",
            cls: a + "component-outer",
            children: [
              {
                reference: "label",
                cls: a + "form-label",
                children: [{ reference: "labelspan", tag: "span" }],
              },
            ],
          },
        ],
      };
    } else {
      return this.callParent(arguments);
    }
  },
  updateDefaultPhonePickerConfig: function (b) {
    var a = this.picker;
    if (a) {
      a.setConfig(b);
    }
  },
  updateDefaultTabletPickerConfig: function (b) {
    var a = this.listPanel;
    if (a) {
      a.setConfig(b);
    }
  },
  applyUsePicker: function (a) {
    if (a == "auto") {
      a = Ext.os.deviceType == "Phone";
    }
    return Boolean(a);
  },
  syncEmptyCls: Ext.emptyFn,
  applyValue: function (b) {
    var d = b,
      c,
      a;
    this.getOptions();
    a = this.getStore();
    if (b != undefined && !b.isModel && a) {
      c = a.find(this.getValueField(), b, null, null, null, !0);
      if (c == -1) {
        c = a.find(this.getDisplayField(), b, null, null, null, !0);
      }
      d = a.getAt(c);
    }
    return d;
  },
  updateValue: function (a, b) {
    this.record = a;
    this.callParent([a && a.isModel ? a.get(this.getDisplayField()) : ""]);
  },
  getValue: function () {
    var a = this.record;
    return a && a.isModel ? a.get(this.getValueField()) : null;
  },
  getRecord: function () {
    return this.record;
  },
  getPhonePicker: function () {
    var a = this.getDefaultPhonePickerConfig();
    if (!this.picker) {
      this.picker = Ext.create(
        "Ext.picker.Picker",
        Ext.apply(
          {
            slots: [
              {
                align: this.getPickerSlotAlign(),
                name: this.getName(),
                valueField: this.getValueField(),
                displayField: this.getDisplayField(),
                value: this.getValue(),
                store: this.getStore(),
              },
            ],
            listeners: { change: this.onPickerChange, scope: this },
          },
          a
        )
      );
    }
    return this.picker;
  },
  getTabletPicker: function () {
    var a = this.getDefaultTabletPickerConfig();
    if (!this.listPanel) {
      this.listPanel = Ext.create(
        "Ext.Panel",
        Ext.apply(
          {
            left: 0,
            top: 0,
            modal: !0,
            cls: Ext.baseCSSPrefix + "select-overlay",
            layout: "fit",
            hideOnMaskTap: !0,
            width: Ext.os.is.Phone ? "14em" : "18em",
            height:
              Ext.os.is.BlackBerry && Ext.os.version.getMajor() === 10
                ? "12em"
                : Ext.os.is.Phone
                ? "12.5em"
                : "22em",
            items: {
              xtype: "list",
              store: this.getStore(),
              itemTpl:
                '<span class="x-list-label">{' +
                this.getDisplayField() +
                ":htmlEncode}</span>",
              listeners: {
                select: this.onListSelect,
                itemtap: this.onListTap,
                scope: this,
              },
            },
          },
          a
        )
      );
    }
    return this.listPanel;
  },
  onMaskTap: function () {
    this.onFocus();
    return !1;
  },
  showPicker: function () {
    var a = this,
      b = a.getStore(),
      f = a.getValue();
    if (!b || b.getCount() === 0) {
      return;
    }
    if (a.getReadOnly()) {
      return;
    }
    a.isFocused = !0;
    if (a.getUsePicker()) {
      var d = a.getPhonePicker(),
        j = a.getName(),
        g = {};
      g[j] = f;
      d.setValue(g);
      if (!d.getParent()) {
        Ext.Viewport.add(d);
      }
      d.show();
    } else {
      var c = a.getTabletPicker(),
        i = c.down("list"),
        h,
        e;
      if (!c.getParent()) {
        Ext.Viewport.add(c);
      }
      c.showBy(a.getComponent(), null);
      if (f || a.getAutoSelect()) {
        b = i.getStore();
        h = b.find(a.getValueField(), f, null, null, null, !0);
        e = b.getAt(h);
        if (e) {
          i.select(e, null, !0);
        }
      }
    }
  },
  onListSelect: function (c, a) {
    var b = this;
    if (a) {
      b.setValue(a);
    }
  },
  onListTap: function () {
    this.listPanel.hide({ type: "fade", out: !0, scope: this });
  },
  onPickerChange: function (g, f) {
    var a = this,
      c = f[a.getName()],
      b = a.getStore(),
      e = b.find(a.getValueField(), c, null, null, null, !0),
      d = b.getAt(e);
    a.setValue(d);
  },
  onChange: function (g, h, c) {
    var a = this,
      b = a.getStore(),
      f = b ? b.find(a.getDisplayField(), c, null, null, null, !0) : -1,
      e = a.getValueField(),
      d = b ? b.getAt(f) : null;
    c = d ? d.get(e) : null;
    a.fireEvent("change", a, a.getValue(), c);
  },
  updateOptions: function (b) {
    var a = this.getStore();
    if (!a) {
      this.setStore(!0);
      a = this._store;
    }
    if (!b) {
      a.clearData();
    } else {
      a.setData(b);
      this.onStoreDataChanged(a);
    }
    return this;
  },
  applyStore: function (a) {
    if (a === !0) {
      a = Ext.create("Ext.data.Store", {
        fields: [this.getValueField(), this.getDisplayField()],
        autoDestroy: !0,
      });
    }
    if (a) {
      a = Ext.data.StoreManager.lookup(a);
      a.on({
        scope: this,
        addrecords: "onStoreDataChanged",
        removerecords: "onStoreDataChanged",
        updaterecord: "onStoreDataChanged",
        refresh: "onStoreDataChanged",
      });
    }
    return a;
  },
  updateStore: function (a) {
    if (a) {
      this.onStoreDataChanged(a);
    }
    if (this.getUsePicker() && this.picker) {
      this.picker.down("pickerslot").setStore(a);
    } else {
      if (this.listPanel) {
        this.listPanel.down("dataview").setStore(a);
      }
    }
  },
  onStoreDataChanged: function (c) {
    var b = this.getInitialConfig(),
      a = this.getValue();
    if (a || a == 0) {
      this.updateValue(this.applyValue(a));
    }
    if (this.getValue() === null) {
      if (b.hasOwnProperty("value")) {
        this.setValue(b.value);
      }
      if (this.getValue() === null && this.getAutoSelect()) {
        if (c.getCount() > 0) {
          this.setValue(c.getAt(0));
        }
      }
    }
  },
  doSetDisabled: function (b) {
    var a = this.getComponent();
    if (a) {
      a.setDisabled(b);
    }
    Ext.Component.prototype.doSetDisabled.apply(this, arguments);
  },
  setDisabled: function () {
    Ext.Component.prototype.setDisabled.apply(this, arguments);
  },
  updateLabelWidth: function () {
    if (Ext.theme.is.Blackberry) {
      return;
    } else {
      this.callParent(arguments);
    }
  },
  updateLabelAlign: function () {
    if (Ext.theme.is.Blackberry) {
      return;
    } else {
      this.callParent(arguments);
    }
  },
  reset: function () {
    var b = this.getStore(),
      a = this.originalValue ? this.originalValue : b.getAt(0);
    if (b && a) {
      this.setValue(a);
    }
    return this;
  },
  onFocus: function (b) {
    if (this.getDisabled()) {
      return !1;
    }
    var a = this.getComponent();
    this.fireEvent("focus", this, b);
    if (Ext.os.is.Android4) {
      a.input.dom.focus();
    }
    a.input.dom.blur();
    this.isFocused = !0;
    this.showPicker();
  },
  destroy: function () {
    this.callParent(arguments);
    var a = this.getStore();
    if (a && a.getAutoDestroy()) {
      Ext.destroy(a);
    }
    Ext.destroy(this.listPanel, this.picker);
  },
});
Ext.define("Ext.picker.Date", {
  extend: Ext.picker.Picker,
  xtype: "datepicker",
  alternateClassName: "Ext.DatePicker",
  config: {
    yearFrom: 1980,
    yearTo: new Date().getFullYear(),
    monthText: "Month",
    dayText: "Day",
    yearText: "Year",
    slotOrder: ["month", "day", "year"],
    doneButton: !0,
  },
  platformConfig: [
    {
      theme: ["Windows"],
      doneButton: { iconCls: "check2", ui: "round", text: "" },
    },
  ],
  initialize: function () {
    this.callParent();
    this.on({ scope: this, delegate: "> slot", slotpick: this.onSlotPick });
    this.on({ scope: this, show: this.onSlotPick });
  },
  setValue: function (a, b) {
    if (Ext.isDate(a)) {
      a = { day: a.getDate(), month: a.getMonth() + 1, year: a.getFullYear() };
    }
    this.callParent([a, b]);
    this.onSlotPick();
  },
  getValue: function (i) {
    var a = {},
      h = this.getItems().items,
      j = h.length,
      g,
      b,
      c,
      e,
      d,
      f;
    for (f = 0; f < j; f++) {
      d = h[f];
      if (d instanceof Ext.picker.Slot) {
        a[d.getName()] = d.getValue(i);
      }
    }
    if (a.year === null && a.month === null && a.day === null) {
      return null;
    }
    e = Ext.isNumber(a.year) ? a.year : 1;
    c = Ext.isNumber(a.month) ? a.month : 1;
    b = Ext.isNumber(a.day) ? a.day : 1;
    if (c && e && c && b) {
      g = this.getDaysInMonth(c, e);
    }
    b = g ? Math.min(b, g) : b;
    return new Date(e, c - 1, b);
  },
  updateYearFrom: function () {
    if (this.initialized) {
      this.createSlots();
    }
  },
  updateYearTo: function () {
    if (this.initialized) {
      this.createSlots();
    }
  },
  updateMonthText: function (e, c) {
    var d = this.getInnerItems,
      f = d.length,
      a,
      b;
    if (this.initialized) {
      for (b = 0; b < f; b++) {
        a = d[b];
        if ((typeof a.title == "string" && a.title == c) || a.title.html == c) {
          a.setTitle(e);
        }
      }
    }
  },
  updateDayText: function (e, d) {
    var c = this.getInnerItems,
      f = c.length,
      a,
      b;
    if (this.initialized) {
      for (b = 0; b < f; b++) {
        a = c[b];
        if ((typeof a.title == "string" && a.title == d) || a.title.html == d) {
          a.setTitle(e);
        }
      }
    }
  },
  updateYearText: function (d) {
    var c = this.getInnerItems,
      e = c.length,
      b,
      a;
    if (this.initialized) {
      for (a = 0; a < e; a++) {
        b = c[a];
        if (b.title == this.yearText) {
          b.setTitle(d);
        }
      }
    }
  },
  constructor: function () {
    this.callParent(arguments);
    this.createSlots();
  },
  createSlots: function () {
    var c = this,
      k = c.getSlotOrder(),
      b = c.getYearFrom(),
      e = c.getYearTo(),
      h = [],
      i = [],
      f = [],
      l = b > e,
      j,
      a,
      d;
    while (b) {
      h.push({ text: b, value: b });
      if (b === e) {
        break;
      }
      if (l) {
        b--;
      } else {
        b++;
      }
    }
    d = c.getDaysInMonth(1, new Date().getFullYear());
    for (a = 0; a < d; a++) {
      i.push({ text: a + 1, value: a + 1 });
    }
    for (a = 0, j = Ext.Date.monthNames.length; a < j; a++) {
      f.push({ text: Ext.Date.monthNames[a], value: a + 1 });
    }
    var g = [];
    k.forEach(function (a) {
      g.push(c.createSlot(a, i, f, h));
    });
    c.setSlots(g);
  },
  createSlot: function (a, d, b, c) {
    switch (a) {
      case "year":
        return {
          name: "year",
          align: "center",
          data: c,
          title: this.getYearText(),
          flex: 3,
        };
      case "month":
        return {
          name: a,
          align: "right",
          data: b,
          title: this.getMonthText(),
          flex: 4,
        };
      case "day":
        return {
          name: "day",
          align: "center",
          data: d,
          title: this.getDayText(),
          flex: 2,
        };
    }
  },
  onSlotPick: function () {
    var b = this.getValue(!0),
      a = this.getDaySlot(),
      l = b.getFullYear(),
      j = b.getMonth(),
      e = [],
      f,
      c;
    if (!b || !Ext.isDate(b) || !a) {
      return;
    }
    this.callParent(arguments);
    f = this.getDaysInMonth(j + 1, l);
    for (c = 0; c < f; c++) {
      e.push({ text: c + 1, value: c + 1 });
    }
    if (a.getStore().getCount() == e.length) {
      return;
    }
    a.getStore().setData(e);
    var k = a.getStore(),
      i = a.getViewItems(),
      h = a.getValueField(),
      d,
      g;
    d = k.find(h, b.getDate());
    if (d == -1) {
      return;
    }
    g = Ext.get(i[d]);
    a.selectedIndex = d;
    a.scrollToItem(g);
    a.setValue(a.getValue(!0));
  },
  getDaySlot: function () {
    var c = this.getInnerItems(),
      d = c.length,
      b,
      a;
    if (this.daySlot) {
      return this.daySlot;
    }
    for (b = 0; b < d; b++) {
      a = c[b];
      if (a.isSlot && a.getName() == "day") {
        this.daySlot = a;
        return a;
      }
    }
    return null;
  },
  getDaysInMonth: function (a, c) {
    var b = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    return a == 2 && this.isLeapYear(c) ? 29 : b[a - 1];
  },
  isLeapYear: function (a) {
    return !!((a & 3) === 0 && (a % 100 || (a % 400 === 0 && a)));
  },
  onDoneButtonTap: function () {
    var b = this._value,
      a = this.getValue(!0),
      c = a;
    if (Ext.isDate(a)) {
      c = a.toDateString();
    }
    if (Ext.isDate(b)) {
      b = b.toDateString();
    }
    if (c != b) {
      this.fireEvent("change", this, a);
    }
    this.hide();
    Ext.util.InputBlocker.unblockInputs();
  },
});
Ext.define("Ext.field.DatePicker", {
  extend: Ext.field.Select,
  alternateClassName: "Ext.form.DatePicker",
  xtype: "datepickerfield",
  config: {
    ui: "select",
    picker: !0,
    clearIcon: !1,
    destroyPickerOnHide: !1,
    dateFormat: null,
    component: { useMask: !0 },
  },
  initialize: function () {
    var b = this,
      a = b.getComponent();
    b.callParent();
    a.on({ scope: b, masktap: "onMaskTap" });
    a.doMaskTap = Ext.emptyFn;
    if (Ext.browser.is.AndroidStock2) {
      a.input.dom.disabled = !0;
    }
  },
  syncEmptyCls: Ext.emptyFn,
  applyValue: function (a) {
    if (!Ext.isDate(a) && !Ext.isObject(a)) {
      return null;
    }
    if (Ext.isObject(a)) {
      return new Date(a.year, a.month - 1, a.day);
    }
    return a;
  },
  updateValue: function (b, d) {
    var a = this,
      c = a._picker;
    if (c && c.isPicker) {
      c.setValue(b);
    }
    if (b !== null) {
      a.getComponent().setValue(
        Ext.Date.format(
          b,
          a.getDateFormat() || Ext.util.Format.defaultDateFormat
        )
      );
    } else {
      a.getComponent().setValue("");
    }
    if (b !== d) {
      a.fireEvent("change", a, b, d);
    }
  },
  updateDateFormat: function (a, c) {
    var b = this.getValue();
    if (a != c && Ext.isDate(b)) {
      this.getComponent().setValue(
        Ext.Date.format(b, a || Ext.util.Format.defaultDateFormat)
      );
    }
  },
  getValue: function () {
    if (this._picker && this._picker instanceof Ext.picker.Date) {
      return this._picker.getValue();
    }
    return this._value;
  },
  getFormattedValue: function (b) {
    var a = this.getValue();
    return Ext.isDate(a)
      ? Ext.Date.format(
          a,
          b || this.getDateFormat() || Ext.util.Format.defaultDateFormat
        )
      : a;
  },
  applyPicker: function (b, a) {
    if (a && a.isPicker) {
      b = a.setConfig(b);
    }
    return b;
  },
  getPicker: function () {
    var a = this._picker,
      b = this.getValue();
    if (a && !a.isPicker) {
      a = Ext.factory(a, Ext.picker.Date);
      if (b != null) {
        a.setValue(b);
      }
    }
    a.on({ scope: this, change: "onPickerChange", hide: "onPickerHide" });
    this._picker = a;
    return a;
  },
  onMaskTap: function () {
    if (this.getDisabled()) {
      return !1;
    }
    this.onFocus();
    return !1;
  },
  onPickerChange: function (d, b) {
    var a = this,
      c = a.getValue();
    a.setValue(b);
    a.fireEvent("select", a, b);
    a.onChange(a, b, c);
  },
  onChange: Ext.emptyFn,
  onPickerHide: function () {
    var a = this,
      b = a.getPicker();
    if (a.getDestroyPickerOnHide() && b) {
      b.destroy();
      a._picker = a.getInitialConfig().picker || !0;
    }
  },
  reset: function () {
    this.setValue(this.originalValue);
  },
  onFocus: function (b) {
    var a = this.getComponent();
    this.fireEvent("focus", this, b);
    if (Ext.os.is.Android4) {
      a.input.dom.focus();
    }
    a.input.dom.blur();
    if (this.getReadOnly()) {
      return !1;
    }
    this.isFocused = !0;
    this.getPicker().show();
  },
  destroy: function () {
    var a = this._picker;
    if (a && a.isPicker) {
      a.destroy();
    }
    this.callParent(arguments);
  },
});
Ext.define("Ext.field.Email", {
  extend: Ext.field.Text,
  alternateClassName: "Ext.form.Email",
  xtype: "emailfield",
  config: { component: { type: "email" }, autoCapitalize: !1 },
});
Ext.define("Ext.field.Hidden", {
  extend: Ext.field.Text,
  alternateClassName: "Ext.form.Hidden",
  xtype: "hiddenfield",
  config: {
    component: { xtype: "input", type: "hidden" },
    ui: "hidden",
    hidden: !0,
    tabIndex: -1,
  },
});
Ext.define("Ext.field.Number", {
  extend: Ext.field.Text,
  xtype: "numberfield",
  alternateClassName: "Ext.form.Number",
  config: { component: { type: "number" }, ui: "number" },
  proxyConfig: { minValue: null, maxValue: null, stepValue: null },
  applyPlaceHolder: function (a) {
    this._enableNumericPlaceHolderHack =
      !Ext.feature.has.NumericInputPlaceHolder && !Ext.isEmpty(a);
    return a;
  },
  onFocus: function (a) {
    if (this._enableNumericPlaceHolderHack) {
      this.getComponent().input.dom.setAttribute("type", "number");
    }
    this.callParent(arguments);
  },
  onBlur: function (a) {
    if (this._enableNumericPlaceHolderHack) {
      this.getComponent().input.dom.setAttribute("type", "text");
    }
    this.callParent(arguments);
  },
  doInitValue: function () {
    var a = this.getInitialConfig().value;
    if (a) {
      a = this.applyValue(a);
    }
    this.originalValue = a;
  },
  applyValue: function (a) {
    var c = this.getMinValue(),
      b = this.getMaxValue();
    if (Ext.isNumber(c) && Ext.isNumber(a)) {
      a = Math.max(a, c);
    }
    if (Ext.isNumber(b) && Ext.isNumber(a)) {
      a = Math.min(a, b);
    }
    a = parseFloat(a);
    return isNaN(a) ? "" : a;
  },
  getValue: function () {
    var a = parseFloat(this.callParent(), 10);
    return isNaN(a) ? null : a;
  },
  doClearIconTap: function (a, b) {
    a.getComponent().setValue("");
    a.getValue();
    a.hideClearIcon();
  },
});
Ext.define("Ext.field.Password", {
  extend: Ext.field.Text,
  xtype: "passwordfield",
  alternateClassName: "Ext.form.Password",
  config: { autoCapitalize: !1, component: { type: "password" } },
});
Ext.define("Ext.field.Radio", {
  extend: Ext.field.Checkbox,
  xtype: "radiofield",
  alternateClassName: "Ext.form.Radio",
  isRadio: !0,
  config: {
    ui: "radio",
    component: { type: "radio", cls: Ext.baseCSSPrefix + "input-radio" },
  },
  getValue: function () {
    return typeof this._value === "undefined" ? null : this._value;
  },
  setValue: function (a) {
    this._value = a;
    return this;
  },
  getSubmitValue: function () {
    var a = this._value;
    if (typeof a == "undefined" || a == null) {
      a = !0;
    }
    return this.getChecked() ? a : null;
  },
  updateChecked: function (a) {
    this.getComponent().setChecked(a);
    if (this.initialized) {
      this.refreshGroupValues();
    }
  },
  onMaskTap: function (c, d) {
    var a = this,
      b = a.getComponent().input.dom;
    if (a.getDisabled()) {
      return !1;
    }
    if (!a.getChecked()) {
      b.checked = !0;
    }
    a.refreshGroupValues();
    return !1;
  },
  getGroupValue: function () {
    var c = this.getSameGroupFields(),
      d = c.length,
      b = 0,
      a;
    for (; b < d; b++) {
      a = c[b];
      if (a.getChecked()) {
        return a.getValue();
      }
    }
    return null;
  },
  setGroupValue: function (d) {
    var c = this.getSameGroupFields(),
      e = c.length,
      b = 0,
      a;
    for (; b < e; b++) {
      a = c[b];
      if (a.getValue() === d) {
        a.setChecked(!0);
        return a;
      }
    }
  },
  refreshGroupValues: function () {
    var b = this.getSameGroupFields(),
      d = b.length,
      a = 0,
      c;
    for (; a < d; a++) {
      c = b[a];
      c.onChange();
    }
  },
});
Ext.define("Ext.field.Search", {
  extend: Ext.field.Text,
  xtype: "searchfield",
  alternateClassName: "Ext.form.Search",
  config: { component: { type: "search" }, ui: "search" },
  platformConfig: [{ platform: "blackberry", component: { type: "text" } }],
});
Ext.define("Ext.slider.Thumb", {
  extend: Ext.Component,
  xtype: "thumb",
  config: {
    baseCls: Ext.baseCSSPrefix + "thumb",
    draggable: { direction: "horizontal" },
  },
  platformConfig: [
    {
      platform: ["ie10"],
      draggable: { translatable: { translationMethod: "csstransform" } },
    },
  ],
  elementWidth: 0,
  initialize: function () {
    this.callParent();
    this.getDraggable().onBefore({
      dragstart: "onDragStart",
      drag: "onDrag",
      dragend: "onDragEnd",
      scope: this,
    });
    this.element.on("resize", "onElementResize", this);
  },
  onDragStart: function () {
    if (this.isDisabled()) {
      return !1;
    }
    this.relayEvent(arguments);
  },
  onDrag: function () {
    if (this.isDisabled()) {
      return !1;
    }
    this.relayEvent(arguments);
  },
  onDragEnd: function () {
    if (this.isDisabled()) {
      return !1;
    }
    this.relayEvent(arguments);
  },
  onElementResize: function (b, a) {
    this.elementWidth = a.width;
  },
  getElementWidth: function () {
    return this.elementWidth;
  },
});
Ext.define(
  "Ext.slider.Slider",
  {
    extend: Ext.Container,
    xtype: "slider",
    config: {
      baseCls: "x-slider",
      thumbConfig: {
        draggable: {
          translatable: { easingX: { duration: 300, type: "ease-out" } },
        },
      },
      increment: 1,
      value: 0,
      minValue: 0,
      maxValue: 100,
      allowThumbsOverlapping: !1,
      animation: !0,
      readOnly: !1,
    },
    elementWidth: 0,
    offsetValueRatio: 0,
    activeThumb: null,
    constructor: function (a) {
      a = a || {};
      if (a.hasOwnProperty("values")) {
        a.value = a.values;
      }
      this.callParent([a]);
    },
    initialize: function () {
      var b = this.element;
      this.callParent();
      b.on({ scope: this, tap: "onTap", resize: "onResize" });
      this.on({
        scope: this,
        delegate: "> thumb",
        tap: "onTap",
        dragstart: "onThumbDragStart",
        drag: "onThumbDrag",
        dragend: "onThumbDragEnd",
      });
      var a = this.getThumb(0);
      if (a) {
        a.on("resize", "onThumbResize", this);
      }
    },
    factoryThumb: function () {
      return Ext.factory(this.getThumbConfig(), Ext.slider.Thumb);
    },
    getThumbs: function () {
      return this.innerItems;
    },
    getThumb: function (a) {
      if (typeof a != "number") {
        a = 0;
      }
      return this.innerItems[a];
    },
    refreshOffsetValueRatio: function () {
      var b = this.getMaxValue() - this.getMinValue(),
        a = this.elementWidth - this.thumbWidth;
      this.offsetValueRatio = a / b;
    },
    onThumbResize: function () {
      var a = this.getThumb(0);
      if (a) {
        this.thumbWidth = a.getElementWidth();
      }
      this.refresh();
    },
    onResize: function (b, a) {
      this.elementWidth = a.width;
      this.refresh();
    },
    refresh: function () {
      this.refreshValue();
    },
    setActiveThumb: function (b) {
      var a = this.activeThumb;
      if (a && a !== b) {
        a.setZIndex(null);
      }
      this.activeThumb = b;
      b.setZIndex(2);
      return this;
    },
    onThumbDragStart: function (b, a) {
      if (a.absDeltaX <= a.absDeltaY || this.getReadOnly()) {
        return !1;
      } else {
        a.stopPropagation();
      }
      if (this.getAllowThumbsOverlapping()) {
        this.setActiveThumb(b);
      }
      this.dragStartValue = this.getValue()[this.getThumbIndex(b)];
      this.fireEvent("dragstart", this, b, this.dragStartValue, a);
    },
    onThumbDrag: function (a, b, e) {
      var f = this.getThumbIndex(a),
        d = this.offsetValueRatio,
        c = this.constrainValue(this.getMinValue() + e / d);
      b.stopPropagation();
      this.setIndexValue(f, c);
      this.fireEvent("drag", this, a, this.getValue(), b);
      return !1;
    },
    setIndexValue: function (e, i, f) {
      var h = this.getThumb(e),
        g = this.getValue(),
        d = this.getMinValue(),
        a = this.offsetValueRatio,
        c = this.getIncrement(),
        b = h.getDraggable();
      b.setOffset((i - d) * a, null, f);
      g[e] = d + Math.round(b.offset.x / a / c) * c;
    },
    onThumbDragEnd: function (a, e) {
      this.refreshThumbConstraints(a);
      var d = this.getThumbIndex(a),
        b = this.getValue()[d],
        c = this.dragStartValue;
      this.fireEvent("dragend", this, a, this.getValue(), e);
      if (c !== b) {
        this.fireEvent("change", this, a, b, c);
      }
    },
    getThumbIndex: function (a) {
      return this.getThumbs().indexOf(a);
    },
    refreshThumbConstraints: function (h) {
      var a = this.getAllowThumbsOverlapping(),
        e = h.getDraggable().getOffset().x,
        f = this.getThumbs(),
        g = this.getThumbIndex(h),
        b = f[g - 1],
        d = f[g + 1],
        c = this.thumbWidth;
      if (b) {
        b.getDraggable().addExtraConstraint({ max: { x: e - (a ? 0 : c) } });
      }
      if (d) {
        d.getDraggable().addExtraConstraint({ min: { x: e + (a ? 0 : c) } });
      }
    },
    onTap: function (l) {
      if (this.isDisabled()) {
        return;
      }
      var h = Ext.get(l.target);
      if (!h || (Ext.browser.engineName == "WebKit" && h.hasCls("x-thumb"))) {
        return;
      }
      var m = l.touch.point.x,
        o = this.element,
        n = o.getX(),
        p = m - n - this.thumbWidth / 2,
        c = this.constrainValue(this.getMinValue() + p / this.offsetValueRatio),
        f = this.getValue(),
        i = Infinity,
        k = f.length,
        b,
        d,
        j,
        a,
        e,
        g;
      if (k === 1) {
        a = 0;
      } else {
        for (b = 0; b < k; b++) {
          j = f[b];
          d = Math.abs(j - c);
          if (d < i) {
            i = d;
            a = b;
          }
        }
      }
      e = f[a];
      g = this.getThumb(a);
      this.setIndexValue(a, c, this.getAnimation());
      this.refreshThumbConstraints(g);
      if (e !== c) {
        this.fireEvent("change", this, g, c, e);
      }
    },
    updateThumbs: function (a) {
      this.add(a);
    },
    applyValue: function (g) {
      var e = Ext.Array.from(g || 0),
        d = [],
        c = this.getMinValue(),
        a,
        b,
        f;
      for (b = 0, f = e.length; b < f; b++) {
        a = this.constrainValue(e[b]);
        if (a < c) {
          a = c;
        }
        d.push(a);
        c = a;
      }
      return d;
    },
    updateValue: function (c, g) {
      var d = this.getThumbs(),
        b = c.length,
        e = this.getMinValue(),
        f = this.offsetValueRatio,
        a;
      this.setThumbsCount(b);
      for (a = 0; a < b; a++) {
        d[a]
          .getDraggable()
          .setExtraConstraint(null)
          .setOffset((c[a] - e) * f);
      }
      for (a = 0; a < b; a++) {
        this.refreshThumbConstraints(d[a]);
      }
    },
    refreshValue: function () {
      this.refreshOffsetValueRatio();
      this.setValue(this.getValue());
    },
    constrainValue: function (a) {
      var e = this,
        d = e.getMinValue(),
        f = e.getMaxValue(),
        b = e.getIncrement(),
        c;
      a = parseFloat(a);
      if (isNaN(a)) {
        a = d;
      }
      c = (a - d) % b;
      a -= c;
      if (Math.abs(c) >= b / 2) {
        a += c > 0 ? b : -b;
      }
      a = Math.max(d, a);
      a = Math.min(f, a);
      return a;
    },
    setThumbsCount: function (c) {
      var e = this.getThumbs(),
        b = e.length,
        a,
        d,
        f;
      if (b > c) {
        for (a = 0, d = b - c; a < d; a++) {
          f = e[e.length - 1];
          f.destroy();
        }
      } else {
        if (b < c) {
          for (a = 0, d = c - b; a < d; a++) {
            this.add(this.factoryThumb());
          }
        }
      }
      return this;
    },
    setValues: function (a) {
      this.setValue(a);
    },
    getValues: function () {
      return this.getValue();
    },
    applyIncrement: function (a) {
      if (a === 0) {
        a = 1;
      }
      return Math.abs(a);
    },
    updateAllowThumbsOverlapping: function (b, a) {
      if (typeof a != "undefined") {
        this.refreshValue();
      }
    },
    updateMinValue: function (b, a) {
      if (typeof a != "undefined") {
        this.refreshValue();
      }
    },
    updateMaxValue: function (b, a) {
      if (typeof a != "undefined") {
        this.refreshValue();
      }
    },
    updateIncrement: function (b, a) {
      if (typeof a != "undefined") {
        this.refreshValue();
      }
    },
    doSetDisabled: function (c) {
      this.callParent(arguments);
      var b = this.getItems().items,
        d = b.length,
        a;
      for (a = 0; a < d; a++) {
        b[a].setDisabled(c);
      }
    },
  },
  function () {}
);
Ext.define("Ext.field.Slider", {
  extend: Ext.field.Field,
  xtype: "sliderfield",
  alternateClassName: "Ext.form.Slider",
  config: {
    cls: Ext.baseCSSPrefix + "slider-field",
    tabIndex: -1,
    readOnly: !1,
  },
  proxyConfig: { increment: 1, value: 0, minValue: 0, maxValue: 100 },
  constructor: function (a) {
    a = a || {};
    if (a.hasOwnProperty("values")) {
      a.value = a.values;
    }
    this.callParent([a]);
    this.updateMultipleState();
  },
  initialize: function () {
    this.callParent();
    this.getComponent().on({
      scope: this,
      change: "onSliderChange",
      dragstart: "onSliderDragStart",
      drag: "onSliderDrag",
      dragend: "onSliderDragEnd",
    });
  },
  applyComponent: function (a) {
    return Ext.factory(a, Ext.slider.Slider);
  },
  updateComponent: function (a) {
    this.callSuper(arguments);
    a.setMinValue(this.getMinValue());
    a.setMaxValue(this.getMaxValue());
  },
  onSliderChange: function () {
    this.fireEvent.apply(
      this,
      [].concat("change", this, Array.prototype.slice.call(arguments))
    );
  },
  onSliderDragStart: function () {
    this.fireEvent.apply(
      this,
      [].concat("dragstart", this, Array.prototype.slice.call(arguments))
    );
  },
  onSliderDrag: function () {
    this.fireEvent.apply(
      this,
      [].concat("drag", this, Array.prototype.slice.call(arguments))
    );
  },
  onSliderDragEnd: function () {
    this.fireEvent.apply(
      this,
      [].concat("dragend", this, Array.prototype.slice.call(arguments))
    );
  },
  setValues: function (a) {
    this.setValue(a);
    this.updateMultipleState();
  },
  getValues: function () {
    return this.getValue();
  },
  reset: function () {
    var a = this.config,
      b = this.config.hasOwnProperty("values") ? a.values : a.value;
    this.setValue(b);
  },
  doSetDisabled: function (a) {
    this.callParent(arguments);
    this.getComponent().setDisabled(a);
  },
  updateReadOnly: function (a) {
    this.getComponent().setReadOnly(a);
  },
  isDirty: function () {
    if (this.getDisabled()) {
      return !1;
    }
    return this.getValue() !== this.originalValue;
  },
  updateMultipleState: function () {
    var a = this.getValue();
    if (a && a.length > 1) {
      this.addCls(Ext.baseCSSPrefix + "slider-multiple");
    }
  },
});
Ext.define("Ext.util.TapRepeater", {
  mixins: { observable: Ext.mixin.Observable },
  config: {
    el: null,
    accelerate: !0,
    interval: 10,
    delay: 250,
    preventDefault: !0,
    stopDefault: !1,
    timer: 0,
    pressCls: null,
  },
  constructor: function (a) {
    var b = this;
    b.initConfig(a);
  },
  updateEl: function (c, b) {
    var a = {
      touchstart: "onTouchStart",
      touchend: "onTouchEnd",
      tap: "eventOptions",
      scope: this,
    };
    if (b) {
      b.un(a);
    }
    c.on(a);
  },
  eventOptions: function (a) {
    if (this.getPreventDefault()) {
      a.preventDefault();
    }
    if (this.getStopDefault()) {
      a.stopEvent();
    }
  },
  destroy: function () {
    this.clearListeners();
    Ext.destroy(this.el);
  },
  onTouchStart: function (b) {
    var a = this,
      c = a.getPressCls();
    clearTimeout(a.getTimer());
    if (c) {
      a.getEl().addCls(c);
    }
    a.tapStartTime = new Date();
    a.fireEvent("touchstart", a, b);
    a.fireEvent("tap", a, b);
    if (a.getAccelerate()) {
      a.delay = 400;
    }
    a.setTimer(Ext.defer(a.tap, a.getDelay() || a.getInterval(), a, [b]));
  },
  tap: function (b) {
    var a = this;
    a.fireEvent("tap", a, b);
    a.setTimer(
      Ext.defer(
        a.tap,
        a.getAccelerate()
          ? a.easeOutExpo(Ext.Date.getElapsed(a.tapStartTime), 400, -390, 12000)
          : a.getInterval(),
        a,
        [b]
      )
    );
  },
  easeOutExpo: function (d, a, b, c) {
    return d == c ? a + b : b * (-Math.pow(2, (-10 * d) / c) + 1) + a;
  },
  onTouchEnd: function (b) {
    var a = this;
    clearTimeout(a.getTimer());
    a.getEl().removeCls(a.getPressCls());
    a.fireEvent("touchend", a, b);
  },
});
Ext.define(
  "Ext.field.Spinner",
  {
    extend: Ext.field.Number,
    xtype: "spinnerfield",
    alternateClassName: "Ext.form.Spinner",
    config: {
      cls: Ext.baseCSSPrefix + "spinner",
      minValue: Number.NEGATIVE_INFINITY,
      maxValue: Number.MAX_VALUE,
      stepValue: 0.1,
      accelerateOnTapHold: !0,
      cycle: !1,
      clearIcon: !1,
      defaultValue: 0,
      tabIndex: -1,
      groupButtons: !0,
      component: { disabled: !0 },
    },
    platformConfig: [
      { platform: "android", component: { disabled: !1, readOnly: !0 } },
    ],
    constructor: function () {
      var a = this;
      a.callParent(arguments);
      if (!a.getValue()) {
        a.suspendEvents();
        a.setValue(a.getDefaultValue());
        a.resumeEvents();
      }
    },
    syncEmptyCls: Ext.emptyFn,
    updateComponent: function (b) {
      this.callParent(arguments);
      var a = this.getCls();
      if (b) {
        this.spinDownButton = Ext.Element.create({
          cls: a + "-button " + a + "-button-down",
          html: "-",
        });
        this.spinUpButton = Ext.Element.create({
          cls: a + "-button " + a + "-button-up",
          html: "+",
        });
        this.downRepeater = this.createRepeater(
          this.spinDownButton,
          this.onSpinDown
        );
        this.upRepeater = this.createRepeater(this.spinUpButton, this.onSpinUp);
      }
    },
    updateGroupButtons: function (c, e) {
      var a = this,
        b = a.innerElement,
        d = a.getBaseCls() + "-grouped-buttons";
      a.getComponent();
      if (c != e) {
        if (c) {
          this.addCls(d);
          b.appendChild(a.spinDownButton);
          b.appendChild(a.spinUpButton);
        } else {
          this.removeCls(d);
          b.insertFirst(a.spinDownButton);
          b.appendChild(a.spinUpButton);
        }
      }
    },
    applyValue: function (a) {
      a = parseFloat(a);
      if (isNaN(a) || a === null) {
        a = this.getDefaultValue();
      }
      a = Math.round(a * 10) / 10;
      return this.callParent([a]);
    },
    createRepeater: function (c, d) {
      var b = this,
        a = Ext.create("Ext.util.TapRepeater", {
          el: c,
          accelerate: b.getAccelerateOnTapHold(),
        });
      a.on({
        tap: d,
        touchstart: "onTouchStart",
        touchend: "onTouchEnd",
        scope: b,
      });
      return a;
    },
    onSpinDown: function () {
      if (!this.getDisabled() && !this.getReadOnly()) {
        this.spin(!0);
      }
    },
    onSpinUp: function () {
      if (!this.getDisabled() && !this.getReadOnly()) {
        this.spin(!1);
      }
    },
    onTouchStart: function (a) {
      if (!this.getDisabled() && !this.getReadOnly()) {
        a.getEl().addCls(Ext.baseCSSPrefix + "button-pressed");
      }
    },
    onTouchEnd: function (a) {
      a.getEl().removeCls(Ext.baseCSSPrefix + "button-pressed");
    },
    spin: function (h) {
      var a = this,
        c = a.getValue(),
        g = a.getStepValue(),
        f = h ? "down" : "up",
        e = a.getMinValue(),
        d = a.getMaxValue(),
        b;
      if (h) {
        b = c - g;
      } else {
        b = c + g;
      }
      if (a.getCycle()) {
        if (c == e && b < e) {
          b = d;
        }
        if (c == d && b > d) {
          b = e;
        }
      }
      a.setValue(b);
      b = a.getValue();
      a.fireEvent("spin", a, b, f);
      a.fireEvent("spin" + f, a, b);
    },
    doSetDisabled: function (a) {
      Ext.Component.prototype.doSetDisabled.apply(this, arguments);
    },
    setDisabled: function () {
      Ext.Component.prototype.setDisabled.apply(this, arguments);
    },
    reset: function () {
      this.setValue(this.getDefaultValue());
    },
    destroy: function () {
      var a = this;
      Ext.destroy(
        a.downRepeater,
        a.upRepeater,
        a.spinDownButton,
        a.spinUpButton
      );
      a.callParent(arguments);
    },
  },
  function () {}
);
Ext.define("Ext.slider.Toggle", {
  extend: Ext.slider.Slider,
  config: {
    baseCls: "x-toggle",
    minValueCls: "x-toggle-off",
    maxValueCls: "x-toggle-on",
  },
  initialize: function () {
    this.callParent();
    this.on({ change: "onChange" });
  },
  applyMinValue: function () {
    return 0;
  },
  applyMaxValue: function () {
    return 1;
  },
  applyIncrement: function () {
    return 1;
  },
  updateMinValueCls: function (c, a) {
    var b = this.element;
    if (a && b.hasCls(a)) {
      b.replaceCls(a, c);
    }
  },
  updateMaxValueCls: function (c, a) {
    var b = this.element;
    if (a && b.hasCls(a)) {
      b.replaceCls(a, c);
    }
  },
  setValue: function (a, b) {
    this.callParent(arguments);
    this.onChange(this, this.getThumbs()[0], a, b);
  },
  setIndexValue: function (a, f, e) {
    var c = this.getValue()[a];
    this.callParent(arguments);
    var d = this.getThumb(a),
      b = this.getValue()[a];
    if (c !== b) {
      this.fireEvent("change", this, d, b, c);
    }
  },
  onChange: function (e, h, f, g) {
    var d = f > 0,
      c = e.getMaxValueCls(),
      b = e.getMinValueCls(),
      a = this.element;
    a.addCls(d ? c : b);
    a.removeCls(d ? b : c);
  },
  toggle: function () {
    var a = this.getValue();
    this.setValue(a == 1 ? 0 : 1);
    return this;
  },
  onTap: function () {
    if (this.isDisabled() || this.getReadOnly()) {
      return;
    }
    var b = this.getValue(),
      a = b == 1 ? 0 : 1,
      c = this.getThumb(0);
    this.setIndexValue(0, a, this.getAnimation());
    this.refreshThumbConstraints(c);
  },
});
Ext.define("Ext.field.Toggle", {
  extend: Ext.field.Slider,
  xtype: "togglefield",
  alternateClassName: "Ext.form.Toggle",
  config: {
    cls: "x-toggle-field",
    labelAlign: "left",
    activeLabel: null,
    inactiveLabel: null,
  },
  platformConfig: [
    { theme: ["Windows"], labelAlign: "left" },
    {
      theme: ["Blackberry", "MountainView"],
      activeLabel: "On",
      inactiveLabel: "Off",
    },
  ],
  proxyConfig: { minValueCls: "x-toggle-off", maxValueCls: "x-toggle-on" },
  applyComponent: function (a) {
    return Ext.factory(a, Ext.slider.Toggle);
  },
  updateActiveLabel: function (a, b) {
    if (a != b) {
      this.getComponent().element.dom.setAttribute("data-activelabel", a);
    }
  },
  updateInactiveLabel: function (a, b) {
    if (a != b) {
      this.getComponent().element.dom.setAttribute("data-inactivelabel", a);
    }
  },
  setValue: function (a) {
    if (a === !0) {
      a = 1;
    }
    var b = this.getValue();
    if (b != a) {
      this.getComponent().setValue(a);
      this.fireEvent("change", this, a, b);
    }
    return this;
  },
  getValue: function () {
    return this.getComponent().getValue() == 1 ? 1 : 0;
  },
  onSliderChange: function (c, d, a, b) {
    this.fireEvent.call(this, "change", this, a, b);
  },
  toggle: function () {
    var a = this.getValue();
    this.setValue(a == 1 ? 0 : 1);
    return this;
  },
  onChange: function () {
    this.setLabel(
      this.getValue() == 1 ? this.toggleOnLabel : this.toggleOffLabel
    );
  },
});
Ext.define("Ext.form.FieldSet", {
  extend: Ext.Container,
  alias: "widget.fieldset",
  config: {
    baseCls: Ext.baseCSSPrefix + "form-fieldset",
    title: null,
    instructions: null,
  },
  applyTitle: function (a) {
    if (typeof a == "string") {
      a = { title: a };
    }
    Ext.applyIf(a, { docked: "top", baseCls: this.getBaseCls() + "-title" });
    return Ext.factory(a, Ext.Title, this._title);
  },
  updateTitle: function (a, b) {
    if (a) {
      this.add(a);
    }
    if (b) {
      this.remove(b);
    }
  },
  getTitle: function () {
    var a = this._title;
    if (a && a instanceof Ext.Title) {
      return a.getTitle();
    }
    return a;
  },
  applyInstructions: function (a) {
    if (typeof a == "string") {
      a = { title: a };
    }
    Ext.applyIf(a, {
      docked: "bottom",
      baseCls: this.getBaseCls() + "-instructions",
    });
    return Ext.factory(a, Ext.Title, this._instructions);
  },
  updateInstructions: function (a, b) {
    if (a) {
      this.add(a);
    }
    if (b) {
      this.remove(b);
    }
  },
  getInstructions: function () {
    var a = this._instructions;
    if (a && a instanceof Ext.Title) {
      return a.getTitle();
    }
    return a;
  },
  doSetDisabled: function (a) {
    this.getFieldsAsArray().forEach(function (b) {
      b.setDisabled(a);
    });
    return this;
  },
  getFieldsAsArray: function () {
    var b = [],
      a = function (c) {
        if (c.isField) {
          b.push(c);
        }
        if (c.isContainer) {
          c.getItems().each(a);
        }
      };
    this.getItems().each(a);
    return b;
  },
});
Ext.define(
  "Ext.form.Panel",
  {
    alternateClassName: "Ext.form.FormPanel",
    extend: Ext.Panel,
    xtype: "formpanel",
    config: {
      baseCls: Ext.baseCSSPrefix + "form",
      standardSubmit: !1,
      url: null,
      enctype: null,
      baseParams: null,
      submitOnAction: !1,
      record: null,
      method: "post",
      scrollable: { translatable: { translationMethod: "scrollposition" } },
      trackResetOnLoad: !1,
      api: null,
      paramOrder: null,
      paramsAsHash: null,
      timeout: 30,
      multipartDetection: !0,
      enableSubmissionForm: !0,
    },
    getElementConfig: function () {
      var a = this.callParent();
      a.tag = "form";
      a.children.push({
        tag: "input",
        type: "submit",
        style:
          "visibility: hidden; width: 0; height: 0; position: absolute; right: 0; bottom: 0;",
      });
      return a;
    },
    initialize: function () {
      var a = this;
      a.callParent();
      a.element.on({ submit: "onSubmit", scope: a });
    },
    applyEnctype: function (b) {
      var a = this.element.dom || null;
      if (a) {
        if (b) {
          a.setAttribute("enctype", b);
        } else {
          a.setAttribute("enctype");
        }
      }
    },
    updateRecord: function (c) {
      var d, b, a;
      if (c && (d = c.fields)) {
        b = this.getValues();
        for (a in b) {
          if (b.hasOwnProperty(a) && d.containsKey(a)) {
            c.set(a, b[a]);
          }
        }
      }
      return this;
    },
    setRecord: function (a) {
      var b = this;
      if (a && a.data) {
        b.setValues(a.data);
      }
      b._record = a;
      return this;
    },
    onSubmit: function (a) {
      var b = this;
      if (a && !b.getStandardSubmit()) {
        a.stopEvent();
      } else {
        this.submit(null, a);
      }
    },
    updateSubmitOnAction: function (a) {
      if (a) {
        this.on({ action: "onFieldAction", scope: this });
      } else {
        this.un({ action: "onFieldAction", scope: this });
      }
    },
    onFieldAction: function (a) {
      if (this.getSubmitOnAction()) {
        a.blur();
        this.submit();
      }
    },
    submit: function (c, e) {
      var a = this,
        d = a.getValues(a.getStandardSubmit() || !c.submitDisabled),
        b = a.element.dom || {};
      if (this.getEnableSubmissionForm()) {
        b = this.createSubmissionForm(b, d);
      }
      c = Ext.apply(
        {
          url: a.getUrl() || b.action,
          submit: !1,
          form: b,
          method: a.getMethod() || b.method || "post",
          autoAbort: !1,
          params: null,
          waitMsg: null,
          headers: null,
          success: null,
          failure: null,
        },
        c || {}
      );
      return a.fireAction("beforesubmit", [a, d, c, e], "doBeforeSubmit");
    },
    createSubmissionForm: function (a, h) {
      var e = this.getFields(),
        d,
        b,
        f,
        c,
        g;
      if (a.nodeType === 1) {
        a = a.cloneNode(!1);
        for (d in h) {
          b = document.createElement("input");
          b.setAttribute("type", "text");
          b.setAttribute("name", d);
          b.setAttribute("value", h[d]);
          a.appendChild(b);
        }
      }
      for (d in e) {
        if (e.hasOwnProperty(d)) {
          f = e[d];
          if (f.isFile) {
            if (!a.$fileswap) {
              a.$fileswap = [];
            }
            g = f.getComponent().input;
            c = g.dom;
            b = c.cloneNode(!0);
            c.parentNode.insertBefore(b, c.nextSibling);
            a.appendChild(c);
            a.$fileswap.push({ original: c, placeholder: b });
          }
        }
      }
      return a;
    },
    doBeforeSubmit: function (b, r, a) {
      var c = a.form || {},
        l = !1;
      if (this.getMultipartDetection() === !0) {
        this.getFieldsAsArray().forEach(function (c) {
          if (c.isFile === !0) {
            l = !0;
            return !1;
          }
        });
        if (l) {
          c.setAttribute("enctype", "multipart/form-data");
        }
      }
      if (a.enctype) {
        c.setAttribute("enctype", a.enctype);
      }
      if (b.getStandardSubmit()) {
        if (a.url && Ext.isEmpty(c.action)) {
          c.action = a.url;
        }
        var n = this.query("spinnerfield"),
          q = n.length,
          h,
          j;
        for (h = 0; h < q; h++) {
          j = n[h];
          if (!j.getDisabled()) {
            j.getComponent().setDisabled(!1);
          }
        }
        c.method = (a.method || c.method).toLowerCase();
        c.submit();
      } else {
        var k = b.getApi(),
          p = a.url || b.getUrl(),
          o = a.scope || b,
          g = a.waitMsg,
          f = function (c, d) {
            if (Ext.isFunction(a.failure)) {
              a.failure.call(o, b, c, d);
            }
            b.fireEvent("exception", b, c);
          },
          m = function (c, d) {
            if (Ext.isFunction(a.success)) {
              a.success.call(a.scope || b, b, c, d);
            }
            b.fireEvent("submit", b, c);
          },
          e;
        if (a.waitMsg) {
          if (typeof g === "string") {
            g = { xtype: "loadmask", message: g };
          }
          b.setMasked(g);
        }
        if (k) {
          e = k.submit;
          if (typeof e === "string") {
            e = Ext.direct.Manager.parseMethod(e);
            if (e) {
              k.submit = e;
            }
          }
          if (e) {
            return e(
              this.element,
              function (c, d, e) {
                b.setMasked(!1);
                if (e) {
                  if (c.success) {
                    m(d, c);
                  } else {
                    f(d, c);
                  }
                } else {
                  f(d, c);
                }
              },
              this
            );
          }
        } else {
          var d = Ext.merge(
            {},
            { url: p, timeout: this.getTimeout() * 1000, form: c, scope: b },
            a
          );
          delete d.success;
          delete d.failure;
          d.params = Ext.merge(b.getBaseParams() || {}, a.params);
          d.header = Ext.apply(
            {
              "Content-Type":
                "application/x-www-form-urlencoded; charset=UTF-8",
            },
            a.headers || {}
          );
          d.callback = function (l, g, d) {
            var e = d.responseText,
              k = d.responseXML,
              i = Ext.Ajax.parseStatus(d.status, d);
            if (c.$fileswap) {
              var j, h;
              Ext.each(c.$fileswap, function (c) {
                j = c.original;
                h = c.placeholder;
                h.parentNode.insertBefore(j, h.nextSibling);
                h.parentNode.removeChild(h);
              });
              c.$fileswap = null;
              delete c.$fileswap;
            }
            b.setMasked(!1);
            if (d.success === !1) {
              g = !1;
            }
            if (g) {
              if (i && e && e.length == 0) {
                g = !0;
              } else {
                if (!Ext.isEmpty(d.responseBytes)) {
                  g = i.success;
                } else {
                  if (
                    Ext.isString(e) &&
                    d.request.options.responseType === "text"
                  ) {
                    d.success = !0;
                  } else {
                    if (Ext.isString(e)) {
                      try {
                        d = Ext.decode(e);
                      } catch (s) {
                        d.success = !1;
                        d.error = s;
                        d.message = s.message;
                      }
                    } else {
                      if (Ext.isSimpleObject(e)) {
                        d = e;
                        Ext.applyIf(d, { success: !0 });
                      }
                    }
                  }
                  if (!Ext.isEmpty(k)) {
                    d.success = !0;
                  }
                  g = !!d.success;
                }
              }
              if (g) {
                m(d, e);
              } else {
                f(d, e);
              }
            } else {
              f(d, e);
            }
          };
          if (Ext.feature.has.XHR2 && d.xhr2) {
            delete d.form;
            var i = new FormData(c);
            if (d.params) {
              Ext.iterate(d.params, function (d, c) {
                if (Ext.isArray(c)) {
                  Ext.each(c, function (e) {
                    i.append(d, e);
                  });
                } else {
                  i.append(d, c);
                }
              });
              delete d.params;
            }
            d.data = i;
          }
          return Ext.Ajax.request(d);
        }
      }
    },
    load: function (b) {
      b = b || {};
      var a = this,
        g = a.getApi(),
        j = a.getUrl() || b.url,
        d = b.waitMsg,
        h = function (d, c) {
          a.setValues(d.data);
          if (Ext.isFunction(b.success)) {
            b.success.call(b.scope || a, a, c, d);
          }
          a.fireEvent("load", a, c);
        },
        e = function (d, c) {
          if (Ext.isFunction(b.failure)) {
            b.failure.call(scope, a, c, d);
          }
          a.fireEvent("exception", a, c);
        },
        c,
        i,
        f;
      if (b.waitMsg) {
        if (typeof d === "string") {
          d = { xtype: "loadmask", message: d };
        }
        a.setMasked(d);
      }
      if (g) {
        c = g.load;
        if (typeof c === "string") {
          c = Ext.direct.Manager.parseMethod(c);
          if (c) {
            g.load = c;
          }
        }
        if (c) {
          i = c.directCfg.method;
          f = i.getArgs(
            a.getParams(b.params),
            a.getParamOrder(),
            a.getParamsAsHash()
          );
          f.push(function (d, c, f) {
            a.setMasked(!1);
            if (f) {
              h(c, d);
            } else {
              e(c, d);
            }
          }, a);
          return c.apply(window, f);
        }
      } else {
        if (j) {
          return Ext.Ajax.request({
            url: j,
            scope: a,
            timeout: (b.timeout || this.getTimeout()) * 1000,
            method: b.method || "GET",
            autoAbort: b.autoAbort,
            headers: Ext.apply(
              {
                "Content-Type":
                  "application/x-www-form-urlencoded; charset=UTF-8",
              },
              b.headers || {}
            ),
            callback: function (i, d, a) {
              var g = this,
                c = a.responseText,
                f = Ext.Ajax.parseStatus(a.status, a);
              g.setMasked(!1);
              if (d) {
                if (f && c.length == 0) {
                  d = !0;
                } else {
                  a = Ext.decode(c);
                  d = !!a.success;
                }
                if (d) {
                  h(a, c);
                } else {
                  e(a, c);
                }
              } else {
                e(a, c);
              }
            },
          });
        }
      }
    },
    getParams: function (a) {
      return Ext.apply({}, a, this.getBaseParams());
    },
    setValues: function (d) {
      var h = this.getFields(),
        i = this,
        f,
        a,
        b,
        g,
        e,
        c;
      d = d || {};
      for (f in d) {
        if (d.hasOwnProperty(f)) {
          a = h[f];
          b = d[f];
          if (a) {
            if (Ext.isArray(a)) {
              g = a.length;
              for (e = 0; e < g; e++) {
                c = a[e];
                if (c.isRadio) {
                  c.setGroupValue(b);
                  break;
                } else {
                  if (c.isCheckbox) {
                    if (Ext.isArray(b)) {
                      c.setChecked(b.indexOf(c._value) != -1);
                    } else {
                      c.setChecked(b == c._value);
                    }
                  } else {
                    if (Ext.isArray(b)) {
                      c.setValue(b[e]);
                    }
                  }
                }
              }
            } else {
              if (a.isRadio || a.isCheckbox) {
                a.setChecked(b);
              } else {
                a.setValue(b);
              }
            }
            if (i.getTrackResetOnLoad()) {
              a.resetOriginalValue();
            }
          }
        }
      }
      return this;
    },
    getValues: function (k, l) {
      var i = this.getFields(),
        c = {},
        h = Ext.isArray,
        d,
        b,
        g,
        a,
        e,
        j,
        f;
      g = function (d, e) {
        if ((!l && (!e || e === "null")) || d.isFile) {
          return;
        }
        if (d.isCheckbox) {
          b = d.getSubmitValue();
        } else {
          b = d.getValue();
        }
        if (!(k && d.getDisabled())) {
          if (d.isRadio) {
            if (d.isChecked()) {
              c[e] = b;
            }
          } else {
            a = c[e];
            if (!Ext.isEmpty(a)) {
              if (!h(a)) {
                a = c[e] = [a];
              }
              if (h(b)) {
                a = c[e] = a.concat(b);
              } else {
                a.push(b);
              }
            } else {
              c[e] = b;
            }
          }
        }
      };
      for (e in i) {
        if (i.hasOwnProperty(e)) {
          d = i[e];
          if (h(d)) {
            j = d.length;
            for (f = 0; f < j; f++) {
              g(d[f], e);
            }
          } else {
            g(d, e);
          }
        }
      }
      return c;
    },
    reset: function () {
      this.getFieldsAsArray().forEach(function (a) {
        a.reset();
      });
      return this;
    },
    doSetDisabled: function (a) {
      this.getFieldsAsArray().forEach(function (b) {
        b.setDisabled(a);
      });
      return this;
    },
    getFieldsAsArray: function () {
      var b = [],
        a = function (c) {
          if (c.isField) {
            b.push(c);
          }
          if (c.isContainer) {
            c.getItems().each(a);
          }
        };
      this.getItems().each(a);
      return b;
    },
    getFields: function (c) {
      var b = {},
        a;
      var d = function (e) {
        if (e.isField) {
          a = e.getName();
          if ((c && a == c) || typeof c == "undefined") {
            if (b.hasOwnProperty(a)) {
              if (!Ext.isArray(b[a])) {
                b[a] = [b[a]];
              }
              b[a].push(e);
            } else {
              b[a] = e;
            }
          }
        }
        if (e.isContainer) {
          e.items.each(d);
        }
      };
      this.getItems().each(d);
      return c ? b[c] || [] : b;
    },
    getFieldsArray: function () {
      var b = [];
      var a = function (c) {
        if (c.isField) {
          b.push(c);
        }
        if (c.isContainer) {
          c.items.each(a);
        }
      };
      this.items.each(a);
      return b;
    },
    getFieldsFromItem: Ext.emptyFn,
    showMask: function (a, b) {
      a = Ext.isObject(a) ? a.message : a;
      if (a) {
        this.setMasked({ xtype: "loadmask", message: a });
      } else {
        this.setMasked(!0);
      }
      return this;
    },
    hideMask: function () {
      this.setMasked(!1);
      return this;
    },
    getFocusedField: function () {
      var c = this.getFieldsArray(),
        d = c.length,
        b,
        a;
      for (a = 0; a < d; a++) {
        b = c[a];
        if (b.isFocused) {
          return b;
        }
      }
      return null;
    },
    getNextField: function () {
      var b = this.getFieldsArray(),
        c = this.getFocusedField(),
        a;
      if (c) {
        a = b.indexOf(c);
        if (a !== b.length - 1) {
          a++;
          return b[a];
        }
      }
      return !1;
    },
    focusNextField: function () {
      var a = this.getNextField();
      if (a) {
        a.focus();
        return a;
      }
      return !1;
    },
    getPreviousField: function () {
      var c = this.getFieldsArray(),
        b = this.getFocusedField(),
        a;
      if (b) {
        a = c.indexOf(b);
        if (a !== 0) {
          a--;
          return c[a];
        }
      }
      return !1;
    },
    focusPreviousField: function () {
      var a = this.getPreviousField();
      if (a) {
        a.focus();
        return a;
      }
      return !1;
    },
  },
  function () {}
);
Ext.define("MEM.overrides.form.Panel", {
  override: "Ext.form.Panel",
  constructor: function (a) {
    this.callParent([a]);
    if (this.getScrollable()) {
      this.on(
        "show",
        function () {
          var b = this.getScrollable(),
            c = b ? b.getScroller() : null;
          if (c) {
            c.refresh();
          }
        },
        this
      );
    }
  },
  setRecord: function (a) {
    this._record = a;
    return this.callParent(arguments);
  },
});
Ext.define("Ext.fx.runner.Css", {
  extend: Ext.Evented,
  prefixedProperties: {
    transform: !0,
    "transform-origin": !0,
    perspective: !0,
    "transform-style": !0,
    transition: !0,
    "transition-property": !0,
    "transition-duration": !0,
    "transition-timing-function": !0,
    "transition-delay": !0,
    animation: !0,
    "animation-name": !0,
    "animation-duration": !0,
    "animation-iteration-count": !0,
    "animation-direction": !0,
    "animation-timing-function": !0,
    "animation-delay": !0,
  },
  lengthProperties: {
    top: !0,
    right: !0,
    bottom: !0,
    left: !0,
    width: !0,
    height: !0,
    "max-height": !0,
    "max-width": !0,
    "min-height": !0,
    "min-width": !0,
    "margin-bottom": !0,
    "margin-left": !0,
    "margin-right": !0,
    "margin-top": !0,
    "padding-bottom": !0,
    "padding-left": !0,
    "padding-right": !0,
    "padding-top": !0,
    "border-bottom-width": !0,
    "border-left-width": !0,
    "border-right-width": !0,
    "border-spacing": !0,
    "border-top-width": !0,
    "border-width": !0,
    "outline-width": !0,
    "letter-spacing": !0,
    "line-height": !0,
    "text-indent": !0,
    "word-spacing": !0,
    "font-size": !0,
    translate: !0,
    translateX: !0,
    translateY: !0,
    translateZ: !0,
    translate3d: !0,
  },
  durationProperties: {
    "transition-duration": !0,
    "transition-delay": !0,
    "animation-duration": !0,
    "animation-delay": !0,
  },
  angleProperties: {
    rotate: !0,
    rotateX: !0,
    rotateY: !0,
    rotateZ: !0,
    skew: !0,
    skewX: !0,
    skewY: !0,
  },
  lengthUnitRegex: /([a-z%]*)$/,
  DEFAULT_UNIT_LENGTH: "px",
  DEFAULT_UNIT_ANGLE: "deg",
  DEFAULT_UNIT_DURATION: "ms",
  formattedNameCache: {},
  constructor: function () {
    var a = Ext.feature.has.Css3dTransforms;
    if (a) {
      this.transformMethods = [
        "translateX",
        "translateY",
        "translateZ",
        "rotate",
        "rotateX",
        "rotateY",
        "rotateZ",
        "skewX",
        "skewY",
        "scaleX",
        "scaleY",
        "scaleZ",
      ];
    } else {
      this.transformMethods = [
        "translateX",
        "translateY",
        "rotate",
        "skewX",
        "skewY",
        "scaleX",
        "scaleY",
      ];
    }
    this.vendorPrefix = Ext.browser.getStyleDashPrefix();
    this.ruleStylesCache = {};
    return this;
  },
  getStyleSheet: function () {
    var c = this.styleSheet,
      a,
      b;
    if (!c) {
      a = document.createElement("style");
      a.type = "text/css";
      (document.head || document.getElementsByTagName("head")[0]).appendChild(
        a
      );
      b = document.styleSheets;
      this.styleSheet = c = b[b.length - 1];
    }
    return c;
  },
  applyRules: function (j) {
    var i = this.getStyleSheet(),
      h = this.ruleStylesCache,
      k = i.cssRules,
      d,
      g,
      b,
      c,
      f,
      a,
      e;
    for (d in j) {
      g = j[d];
      b = h[d];
      if (b === undefined) {
        f = k.length;
        i.insertRule(d + "{}", f);
        b = h[d] = k.item(f).style;
      }
      c = b.$cache;
      if (!c) {
        c = b.$cache = {};
      }
      for (a in g) {
        e = this.formatValue(g[a], a);
        a = this.formatName(a);
        if (c[a] !== e) {
          c[a] = e;
          if (e === null) {
            b.removeProperty(a);
          } else {
            b.setProperty(a, e, "important");
          }
        }
      }
    }
    return this;
  },
  applyStyles: function (f) {
    var c, e, d, b, a, g;
    for (c in f) {
      if (f.hasOwnProperty(c)) {
        e = document.getElementById(c);
        if (!e) {
          return this;
        }
        d = e.style;
        b = f[c];
        for (a in b) {
          if (b.hasOwnProperty(a)) {
            g = this.formatValue(b[a], a);
            a = this.formatName(a);
            if (g === null) {
              d.removeProperty(a);
            } else {
              d.setProperty(a, g, "important");
            }
          }
        }
      }
    }
    return this;
  },
  formatName: function (b) {
    var c = this.formattedNameCache,
      a = c[b];
    if (!a) {
      if (
        (Ext.os.is.Tizen || !Ext.feature.has.CssTransformNoPrefix) &&
        this.prefixedProperties[b]
      ) {
        a = this.vendorPrefix + b;
      } else {
        a = b;
      }
      c[b] = a;
    }
    return a;
  },
  formatValue: function (a, c) {
    var j = typeof a,
      i = this.DEFAULT_UNIT_LENGTH,
      g,
      d,
      b,
      f,
      h,
      e,
      k;
    if (a === null) {
      return "";
    }
    if (j == "string") {
      if (this.lengthProperties[c]) {
        k = a.match(this.lengthUnitRegex)[1];
        if (k.length > 0) {
        } else {
          return a + i;
        }
      }
      return a;
    } else {
      if (j == "number") {
        if (a == 0) {
          return "0";
        }
        if (this.lengthProperties[c]) {
          return a + i;
        }
        if (this.angleProperties[c]) {
          return a + this.DEFAULT_UNIT_ANGLE;
        }
        if (this.durationProperties[c]) {
          return a + this.DEFAULT_UNIT_DURATION;
        }
      } else {
        if (c === "transform") {
          g = this.transformMethods;
          h = [];
          for (b = 0, f = g.length; b < f; b++) {
            d = g[b];
            h.push(d + "(" + this.formatValue(a[d], d) + ")");
          }
          return h.join(" ");
        } else {
          if (Ext.isArray(a)) {
            e = [];
            for (b = 0, f = a.length; b < f; b++) {
              e.push(this.formatValue(a[b], c));
            }
            return e.length > 0 ? e.join(", ") : "none";
          }
        }
      }
    }
    return a;
  },
});
Ext.define("Ext.fx.runner.CssTransition", {
  extend: Ext.fx.runner.Css,
  listenersAttached: !1,
  constructor: function () {
    this.runningAnimationsData = {};
    return this.callParent(arguments);
  },
  attachListeners: function () {
    this.listenersAttached = !0;
    this.getEventDispatcher().addListener(
      "element",
      "*",
      "transitionend",
      "onTransitionEnd",
      this
    );
  },
  onTransitionEnd: function (c) {
    var a = c.target,
      b = a.id;
    if (b && this.runningAnimationsData.hasOwnProperty(b)) {
      this.refreshRunningAnimationsData(Ext.get(a), [
        c.browserEvent.propertyName,
      ]);
    }
  },
  onAnimationEnd: function (d, a, b, c, n) {
    var l = d.getId(),
      j = this.runningAnimationsData[l],
      k = {},
      h = {},
      g,
      f,
      e,
      m,
      i;
    b.un("stop", "onAnimationStop", this);
    if (j) {
      g = j.nameMap;
    }
    k[l] = h;
    if (a.onBeforeEnd) {
      a.onBeforeEnd.call(a.scope || this, d, c);
    }
    b.fireEvent("animationbeforeend", b, d, c);
    this.fireEvent("animationbeforeend", this, b, d, c);
    if (n || (!c && !a.preserveEndState)) {
      f = a.toPropertyNames;
      for (e = 0, m = f.length; e < m; e++) {
        i = f[e];
        if (g && !g.hasOwnProperty(i)) {
          h[i] = null;
        }
      }
    }
    if (a.after) {
      Ext.merge(h, a.after);
    }
    this.applyStyles(k);
    if (a.onEnd) {
      a.onEnd.call(a.scope || this, d, c);
    }
    b.fireEvent("animationend", b, d, c);
    this.fireEvent("animationend", this, b, d, c);
    Ext.AnimationQueue.stop(Ext.emptyFn, b);
  },
  onAllAnimationsEnd: function (b) {
    var c = b.getId(),
      a = {};
    delete this.runningAnimationsData[c];
    a[c] = {
      "transition-property": null,
      "transition-duration": null,
      "transition-timing-function": null,
      "transition-delay": null,
    };
    this.applyStyles(a);
    this.fireEvent("animationallend", this, b);
  },
  hasRunningAnimations: function (c) {
    var b = c.getId(),
      a = this.runningAnimationsData;
    return a.hasOwnProperty(b) && a[b].sessions.length > 0;
  },
  refreshRunningAnimationsData: function (i, m, f, g) {
    var s = i.getId(),
      r = this.runningAnimationsData,
      e = r[s];
    if (!e) {
      return;
    }
    var o = e.nameMap,
      n = e.nameList,
      c = e.sessions,
      h,
      j,
      p,
      d,
      b,
      a,
      k,
      q,
      l = !1;
    f = Boolean(f);
    g = Boolean(g);
    if (!c) {
      return this;
    }
    h = c.length;
    if (h === 0) {
      return this;
    }
    if (g) {
      e.nameMap = {};
      n.length = 0;
      for (b = 0; b < h; b++) {
        a = c[b];
        this.onAnimationEnd(i, a.data, a.animation, f, g);
      }
      c.length = 0;
    } else {
      for (b = 0; b < h; b++) {
        a = c[b];
        k = a.map;
        q = a.list;
        for (j = 0, p = m.length; j < p; j++) {
          d = m[j];
          if (k[d]) {
            delete k[d];
            Ext.Array.remove(q, d);
            a.length--;
            if (--o[d] == 0) {
              delete o[d];
              Ext.Array.remove(n, d);
            }
          }
        }
        if (a.length == 0) {
          c.splice(b, 1);
          b--;
          h--;
          l = !0;
          this.onAnimationEnd(i, a.data, a.animation, f);
        }
      }
    }
    if (!g && !f && c.length == 0 && l) {
      this.onAllAnimationsEnd(i);
    }
  },
  getRunningData: function (b) {
    var a = this.runningAnimationsData;
    if (!a.hasOwnProperty(b)) {
      a[b] = { nameMap: {}, nameList: [], sessions: [] };
    }
    return a[b];
  },
  getTestElement: function () {
    var c = this.testElement,
      d,
      b,
      a;
    if (!c) {
      d = document.createElement("iframe");
      a = d.style;
      a.setProperty("visibility", "hidden", "important");
      a.setProperty("width", "0px", "important");
      a.setProperty("height", "0px", "important");
      a.setProperty("position", "absolute", "important");
      a.setProperty("border", "0px", "important");
      a.setProperty("zIndex", "-1000", "important");
      document.body.appendChild(d);
      b = d.contentDocument;
      b.open();
      b.writeln("</body>");
      b.close();
      this.testElement = c = b.createElement("div");
      c.style.setProperty("position", "absolute", "important");
      b.body.appendChild(c);
      this.testElementComputedStyle = window.getComputedStyle(c);
    }
    return c;
  },
  getCssStyleValue: function (b, a) {
    var c = this.getTestElement(),
      e = this.testElementComputedStyle,
      d = c.style;
    d.setProperty(b, a);
    if (Ext.browser.is.Firefox) {
      c.offsetHeight;
    }
    a = e.getPropertyValue(b);
    d.removeProperty(b);
    return a;
  },
  run: function (s) {
    var H = this,
      G = this.lengthProperties,
      D = {},
      i = {},
      c = {},
      h,
      e,
      l,
      j,
      E,
      f,
      d,
      t,
      u,
      r,
      q,
      v,
      w,
      F,
      b,
      n,
      z,
      B,
      g,
      a,
      k,
      C,
      m,
      x,
      p,
      o,
      y,
      A;
    if (!this.listenersAttached) {
      this.attachListeners();
    }
    s = Ext.Array.from(s);
    for (v = 0, F = s.length; v < F; v++) {
      b = s[v];
      b = Ext.factory(b, Ext.fx.Animation);
      h = b.getElement();
      Ext.AnimationQueue.start(Ext.emptyFn, b);
      B = window.getComputedStyle(h.dom);
      e = h.getId();
      c = Ext.merge({}, b.getData());
      if (b.onBeforeStart) {
        b.onBeforeStart.call(b.scope || this, h);
      }
      b.fireEvent("animationstart", b);
      this.fireEvent("animationstart", this, b);
      c[e] = c;
      E = c.before;
      l = c.from;
      j = c.to;
      c.fromPropertyNames = f = [];
      c.toPropertyNames = d = [];
      for (a in j) {
        if (j.hasOwnProperty(a)) {
          j[a] = k = this.formatValue(j[a], a);
          g = this.formatName(a);
          x = G.hasOwnProperty(a);
          if (!x) {
            k = this.getCssStyleValue(g, k);
          }
          if (l.hasOwnProperty(a)) {
            l[a] = m = this.formatValue(l[a], a);
            if (!x) {
              m = this.getCssStyleValue(g, m);
            }
            if (k !== m) {
              f.push(g);
              d.push(g);
            }
          } else {
            C = B.getPropertyValue(g);
            if (k !== C) {
              d.push(g);
            }
          }
        }
      }
      n = d.length;
      if (n === 0) {
        this.onAnimationEnd(h, c, b);
        continue;
      }
      r = this.getRunningData(e);
      y = r.sessions;
      if (y.length > 0) {
        this.refreshRunningAnimationsData(
          h,
          Ext.Array.merge(f, d),
          !0,
          c.replacePrevious
        );
      }
      p = r.nameMap;
      o = r.nameList;
      z = {};
      for (w = 0; w < n; w++) {
        a = d[w];
        z[a] = !0;
        if (!p.hasOwnProperty(a)) {
          p[a] = 1;
          o.push(a);
        } else {
          p[a]++;
        }
      }
      A = {
        element: h,
        map: z,
        list: d.slice(),
        length: n,
        data: c,
        animation: b,
      };
      y.push(A);
      b.on("stop", "onAnimationStop", this);
      q = Ext.apply({}, E);
      Ext.apply(q, l);
      if (o.length > 0) {
        f = Ext.Array.difference(o, f);
        d = Ext.Array.merge(f, d);
        q["transition-property"] = f;
      }
      D[e] = q;
      i[e] = Ext.apply({}, j);
      i[e]["transition-property"] = d;
      i[e]["transition-duration"] = c.duration;
      i[e]["transition-timing-function"] = c.easing;
      i[e]["transition-delay"] = c.delay;
      b.startTime = Date.now();
    }
    u = this.$className;
    this.applyStyles(D);
    t = function (a) {
      if (a.data === u && a.source === window) {
        window.removeEventListener("message", t, !1);
        H.applyStyles(i);
      }
    };
    if (Ext.browser.is.IE) {
      window.requestAnimationFrame(function () {
        window.addEventListener("message", t, !1);
        window.postMessage(u, "*");
      });
    } else {
      window.addEventListener("message", t, !1);
      window.postMessage(u, "*");
    }
  },
  onAnimationStop: function (h) {
    var c = this.runningAnimationsData,
      e,
      f,
      d,
      b,
      g,
      a;
    for (e in c) {
      if (c.hasOwnProperty(e)) {
        f = c[e];
        d = f.sessions;
        for (b = 0, g = d.length; b < g; b++) {
          a = d[b];
          if (a.animation === h) {
            this.refreshRunningAnimationsData(a.element, a.list.slice(), !1);
          }
        }
      }
    }
  },
});
Ext.define("Ext.fx.Runner", {
  constructor: function () {
    return new Ext.fx.runner.CssTransition();
  },
});
Ext.define("Ext.navigation.Bar", {
  extend: Ext.TitleBar,
  isToolbar: !0,
  config: {
    baseCls: Ext.baseCSSPrefix + "toolbar",
    cls: Ext.baseCSSPrefix + "navigation-bar",
    ui: "dark",
    title: null,
    defaultType: "button",
    layout: { type: "hbox" },
    defaultBackButtonText: "Back",
    animation: { duration: 300 },
    useTitleForBackButtonText: null,
    view: null,
    android2Transforms: !1,
    backButton: { align: "left", ui: "back", hidden: !0 },
  },
  platformConfig: [{ theme: ["Blackberry"], animation: !1 }],
  constructor: function (a) {
    a = a || {};
    if (!a.items) {
      a.items = [];
    }
    this.backButtonStack = [];
    this.activeAnimations = [];
    this.callParent([a]);
  },
  applyBackButton: function (a) {
    return Ext.factory(a, Ext.Button, this.getBackButton());
  },
  updateBackButton: function (a, b) {
    if (b) {
      this.remove(b);
    }
    if (a) {
      this.add(a);
      a.on({ scope: this, tap: this.onBackButtonTap });
    }
  },
  onBackButtonTap: function () {
    this.fireEvent("back", this);
  },
  updateView: function (h) {
    var a = this,
      g = a.getBackButton(),
      f,
      d,
      e,
      c,
      i,
      b;
    a.getItems();
    if (h) {
      f = h.getInnerItems();
      for (d = 0; d < f.length; d++) {
        c = f[d];
        i = c.getTitle ? c.getTitle() : c.config.title;
        a.backButtonStack.push(i || "&nbsp;");
      }
      b = a.getTitleText();
      if (b === undefined) {
        b = "";
      }
      a.setTitle(b);
      e = a.getBackButtonText();
      if (e) {
        g.setText(e);
        g.show();
      }
    }
  },
  onViewAdd: function (f, a) {
    var b = this,
      c = b.backButtonStack,
      d,
      e;
    b.endAnimation();
    e = a.getTitle ? a.getTitle() : a.config.title;
    c.push(e || "&nbsp;");
    d = c.length > 1;
    b.doChangeView(f, d, !1);
  },
  onViewRemove: function (d) {
    var a = this,
      b = a.backButtonStack,
      c;
    a.endAnimation();
    b.pop();
    c = b.length > 1;
    a.doChangeView(d, c, !0);
  },
  doChangeView: function (p, l, r) {
    var a = this,
      o = a.leftBox,
      j = o.element,
      k = a.titleComponent,
      f = k.element,
      b = a.getBackButton(),
      n = a.getTitleText(),
      i = a.getBackButtonText(),
      m = a.getAnimation() && p.getLayout().getAnimation(),
      q = m && m.isAnimation && p.isPainted(),
      e,
      d,
      c,
      h,
      g;
    if (q) {
      d = a.createProxy(o.element);
      j.setStyle("opacity", "0");
      b.setText(i);
      b[l ? "show" : "hide"]();
      c = a.createProxy(k.element.getParent());
      f.setStyle("opacity", "0");
      a.setTitle(n);
      e = a.measureView(d, c, r);
      h = e.left;
      g = e.title;
      a.isAnimating = !0;
      a.animate(j, h.element);
      a.animate(f, g.element, function () {
        f.setLeft(e.titleLeft);
        a.isAnimating = !1;
        a.refreshTitlePosition();
      });
      if (Ext.browser.is.AndroidStock2 && !this.getAndroid2Transforms()) {
        d.ghost.destroy();
        c.ghost.destroy();
      } else {
        a.animate(d.ghost, h.ghost);
        a.animate(c.ghost, g.ghost, function () {
          d.ghost.destroy();
          c.ghost.destroy();
        });
      }
    } else {
      if (l) {
        b.setText(i);
        b.show();
      } else {
        b.hide();
      }
      a.setTitle(n);
    }
  },
  measureView: function (m, x, r) {
    var n = this,
      j = n.element,
      t = n.leftBox.element,
      g = n.titleComponent.element,
      p = Math.min(j.getWidth() / 3, 200),
      u = t.getWidth(),
      e = j.getX(),
      q = j.getWidth(),
      c = g.getX(),
      i = g.getLeft(),
      h = g.getWidth(),
      w = m.x,
      o = m.width,
      v = m.left,
      s = Ext.browser.is.AndroidStock2 && !this.getAndroid2Transforms(),
      a,
      b,
      l,
      k,
      f,
      d;
    d = e - w - o;
    if (r) {
      a = d;
      b = Math.min(c - o, p);
    } else {
      b = d;
      a = Math.min(c - e, p);
    }
    if (s) {
      l = {
        element: { from: { left: a, opacity: 1 }, to: { left: 0, opacity: 1 } },
      };
    } else {
      l = {
        element: {
          from: { transform: { translateX: a }, opacity: 0 },
          to: { transform: { translateX: 0 }, opacity: 1 },
        },
        ghost: { to: { transform: { translateX: b }, opacity: 0 } },
      };
    }
    d = e - c + u;
    if (v + h > c) {
      f = e - c - h;
    }
    if (r) {
      g.setLeft(0);
      b = e + q - c - h;
      if (f !== undefined) {
        a = f;
      } else {
        a = d;
      }
    } else {
      a = e + q - c - h;
      if (f !== undefined) {
        b = f;
      } else {
        b = d;
      }
      a = Math.max(i, a);
    }
    if (s) {
      k = {
        element: { from: { left: a, opacity: 1 }, to: { left: i, opacity: 1 } },
      };
    } else {
      k = {
        element: {
          from: { transform: { translateX: a }, opacity: 0 },
          to: { transform: { translateX: i }, opacity: 1 },
        },
        ghost: { to: { transform: { translateX: b }, opacity: 0 } },
      };
    }
    return { left: l, title: k, titleLeft: i };
  },
  animate: function (e, c, d) {
    var b = this,
      a;
    e.setLeft(0);
    c = Ext.apply(c, {
      element: e,
      easing: "ease-in-out",
      duration: b.getAnimation().duration || 250,
      preserveEndState: !0,
    });
    a = new Ext.fx.Animation(c);
    a.on(
      "animationend",
      function () {
        if (d) {
          d.call(b);
        }
      },
      b
    );
    Ext.Animator.run(a);
    b.activeAnimations.push(a);
  },
  endAnimation: function () {
    var c = this.activeAnimations,
      a,
      b,
      d;
    if (c) {
      d = c.length;
      for (b = 0; b < d; b++) {
        a = c[b];
        if (a.isAnimating) {
          a.stopAnimation();
        } else {
          a.destroy();
        }
      }
      this.activeAnimations = [];
    }
  },
  refreshTitlePosition: function () {
    if (!this.isAnimating) {
      this.callParent();
    }
  },
  getBackButtonText: function () {
    var a = this.backButtonStack[this.backButtonStack.length - 2],
      b = this.getUseTitleForBackButtonText();
    if (!b) {
      if (a) {
        a = this.getDefaultBackButtonText();
      }
    }
    return a;
  },
  getTitleText: function () {
    return this.backButtonStack[this.backButtonStack.length - 1];
  },
  beforePop: function (a) {
    a--;
    for (var b = 0; b < a; b++) {
      this.backButtonStack.pop();
    }
  },
  doSetHidden: function (a) {
    if (!a) {
      this.element.setStyle({
        position: "relative",
        top: "auto",
        left: "auto",
        width: "auto",
      });
    } else {
      this.element.setStyle({
        position: "absolute",
        top: "-1000px",
        left: "-1000px",
        width: this.element.getWidth() + "px",
      });
    }
  },
  createProxy: function (b) {
    var a, d, e, f, c;
    a = b.dom.cloneNode(!0);
    a.id = b.id + "-proxy";
    b.getParent().dom.appendChild(a);
    a = Ext.get(a);
    d = b.getX();
    e = b.getY();
    f = b.getLeft();
    c = b.getWidth();
    a.setStyle("position", "absolute");
    a.setX(d);
    a.setY(e);
    a.setHeight(b.getHeight());
    a.setWidth(c);
    return { x: d, y: e, left: f, width: c, ghost: a };
  },
});
Ext.define("Ext.navigation.View", {
  extend: Ext.Container,
  alternateClassName: "Ext.NavigationView",
  xtype: "navigationview",
  config: {
    baseCls: Ext.baseCSSPrefix + "navigationview",
    navigationBar: { docked: "top" },
    defaultBackButtonText: "Back",
    useTitleForBackButtonText: !1,
    layout: {
      type: "card",
      animation: {
        duration: 300,
        easing: "ease-out",
        type: "slide",
        direction: "left",
      },
    },
  },
  platformConfig: [
    { theme: ["Blackberry"], navigationBar: { splitNavigation: !0 } },
  ],
  initialize: function () {
    var a = this,
      b = a.getNavigationBar();
    if (b) {
      b.on({ back: a.onBackButtonTap, scope: a });
      a.relayEvents(b, "rightbuttontap");
      a.relayEvents(a, { add: "push", remove: "pop" });
    }
  },
  applyLayout: function (a) {
    a = a || {};
    return a;
  },
  onBackButtonTap: function () {
    this.pop();
    this.fireEvent("back", this);
  },
  push: function (a) {
    return this.add(a);
  },
  pop: function (a) {
    if (this.beforePop(a)) {
      return this.doPop();
    }
  },
  beforePop: function (a) {
    var f = this,
      c = f.getInnerItems();
    if (Ext.isString(a) || Ext.isObject(a)) {
      var e = c.length - 1,
        b;
      for (b = e; b >= 0; b--) {
        if (
          (Ext.isString(a) && Ext.ComponentQuery.is(c[b], a)) ||
          (Ext.isObject(a) && a == c[b])
        ) {
          a = e - b;
          break;
        }
      }
      if (!Ext.isNumber(a)) {
        return !1;
      }
    }
    var g = c.length,
      d;
    if (!Ext.isNumber(a) || a < 1) {
      a = 1;
    }
    a = Math.min(a, g - 1);
    if (a) {
      f.getNavigationBar().beforePop(a);
      d = c.splice(-a, a - 1);
      for (b = 0; b < d.length; b++) {
        this.remove(d[b]);
      }
      return !0;
    }
    return !1;
  },
  doPop: function () {
    var c = this,
      a = this.getInnerItems();
    c.remove(a[a.length - 1]);
    if (a.length < 3 && this.$backButton) {
      this.$backButton.hide();
    }
    if (this.$titleContainer) {
      var b = a[a.length - 2];
      this.$titleContainer.setTitle(b.getTitle ? b.getTitle() : b.config.title);
    }
    return this.getActiveItem();
  },
  getPreviousItem: function () {
    var a = this.getInnerItems();
    return a[a.length - 2];
  },
  updateUseTitleForBackButtonText: function (b) {
    var a = this.getNavigationBar();
    if (a) {
      a.setUseTitleForBackButtonText(b);
    }
  },
  updateDefaultBackButtonText: function (b) {
    var a = this.getNavigationBar();
    if (a) {
      a.setDefaultBackButtonText(b);
    }
  },
  applyNavigationBar: function (a) {
    if (!a) {
      a = { hidden: !0, docked: "top" };
    }
    if (a.title) {
      delete a.title;
    }
    a.view = this;
    a.useTitleForBackButtonText = this.getUseTitleForBackButtonText();
    if (a.splitNavigation) {
      this.$titleContainer = this.add({
        docked: "top",
        xtype: "titlebar",
        ui: "light",
        title: this.$currentTitle || "",
      });
      var b = a.splitNavigation === !0 ? {} : a.splitNavigation;
      this.$backButtonContainer = this.add(
        Ext.apply({ xtype: "toolbar", docked: "bottom" }, b)
      );
      this.$backButton = this.$backButtonContainer.add({
        xtype: "button",
        text: "Back",
        hidden: !0,
        ui: "back",
      });
      this.$backButton.on({ scope: this, tap: this.onBackButtonTap });
      a = { hidden: !0, docked: "top" };
    }
    return Ext.factory(a, Ext.navigation.Bar, this.getNavigationBar());
  },
  updateNavigationBar: function (a, b) {
    if (b) {
      this.remove(b, !0);
    }
    if (a) {
      this.add(a);
    }
  },
  applyActiveItem: function (b, c) {
    var a = this,
      d = a.getInnerItems();
    a.getItems();
    if (!a.initialized) {
      b = d.length - 1;
    }
    return this.callParent([b, c]);
  },
  doResetActiveItem: function (b) {
    var a = this,
      d = a.getInnerItems(),
      c = a.getLayout().getAnimation();
    if (b > 0) {
      if (c && c.isAnimation) {
        c.setReverse(!0);
      }
      a.setActiveItem(b - 1);
      a.getNavigationBar().onViewRemove(a, d[b], b);
    }
  },
  doRemove: function () {
    var a = this.getLayout().getAnimation();
    if (a && a.isAnimation) {
      a.setReverse(!1);
    }
    this.callParent(arguments);
  },
  onItemAdd: function (a, b) {
    if (a && a.getDocked() && a.config.title === !0) {
      this.$titleContainer = a;
    }
    this.doItemLayoutAdd(a, b);
    var c = this.getInitialConfig().navigationBar;
    if (!this.isItemsInitializing && a.isInnerItem()) {
      this.setActiveItem(a);
      if (c) {
        this.getNavigationBar().onViewAdd(this, a, b);
      }
      if (this.$backButtonContainer) {
        this.$backButton.show();
      }
    }
    if (a && a.isInnerItem()) {
      this.updateTitleContainerTitle(
        a.getTitle ? a.getTitle() : a.config.title
      );
    }
    if (this.initialized) {
      this.fireEvent("add", this, a, b);
    }
  },
  updateTitleContainerTitle: function (a) {
    if (this.$titleContainer) {
      this.$titleContainer.setTitle(a);
    } else {
      this.$currentTitle = a;
    }
  },
  reset: function () {
    return this.pop(this.getInnerItems().length);
  },
});
Ext.define("Ext.plugin.ListPaging", {
  extend: Ext.Component,
  alias: "plugin.listpaging",
  config: {
    autoPaging: !1,
    loadMoreText: "Load More...",
    noMoreRecordsText: "No More Records",
    loadTpl: [
      '<div class="{cssPrefix}loading-spinner" style="font-size: 180%; margin: 10px auto;">',
      '<span class="{cssPrefix}loading-top"></span>',
      '<span class="{cssPrefix}loading-right"></span>',
      '<span class="{cssPrefix}loading-bottom"></span>',
      '<span class="{cssPrefix}loading-left"></span>',
      "</div>",
      '<div class="{cssPrefix}list-paging-msg">{message}</div>',
    ].join(""),
    loadMoreCmp: {
      xtype: "component",
      baseCls: Ext.baseCSSPrefix + "list-paging",
      scrollDock: "bottom",
      hidden: !0,
    },
    loadMoreCmpAdded: !1,
    loadingCls: Ext.baseCSSPrefix + "loading",
    list: null,
    scroller: null,
    loading: !1,
  },
  init: function (a) {
    var b = a.getScrollable().getScroller(),
      c = a.getStore();
    this.setList(a);
    this.setScroller(b);
    this.bindStore(a.getStore());
    this.addLoadMoreCmp();
    a.updateStore = Ext.Function.createInterceptor(
      a.updateStore,
      this.bindStore,
      this
    );
    if (this.getAutoPaging()) {
      b.on({ scrollend: this.onScrollEnd, scope: this });
    }
  },
  bindStore: function (a, b) {
    if (b) {
      b.un({
        beforeload: this.onStoreBeforeLoad,
        load: this.onStoreLoad,
        filter: this.onFilter,
        scope: this,
      });
    }
    if (a) {
      a.on({
        beforeload: this.onStoreBeforeLoad,
        load: this.onStoreLoad,
        filter: this.onFilter,
        scope: this,
      });
    }
  },
  disableDataViewMask: function () {
    var a = this.getList();
    this._listMask = a.getLoadingText();
    a.setLoadingText(null);
  },
  enableDataViewMask: function () {
    if (this._listMask) {
      var a = this.getList();
      a.setLoadingText(this._listMask);
      delete this._listMask;
    }
  },
  applyLoadTpl: function (a) {
    return Ext.isObject(a) && a.isTemplate ? a : new Ext.XTemplate(a);
  },
  applyLoadMoreCmp: function (a) {
    a = Ext.merge(a, {
      html: this.getLoadTpl().apply({
        cssPrefix: Ext.baseCSSPrefix,
        message: this.getLoadMoreText(),
      }),
      scrollDock: "bottom",
      listeners: {
        tap: { fn: this.loadNextPage, scope: this, element: "element" },
      },
    });
    return Ext.factory(a, Ext.Component, this.getLoadMoreCmp());
  },
  onScrollEnd: function (b, d, c) {
    var a = this.getList();
    if (!this.getLoading() && c >= b.maxPosition.y) {
      this.currentScrollToTopOnRefresh = a.getScrollToTopOnRefresh();
      a.setScrollToTopOnRefresh(!1);
      this.loadNextPage();
    }
  },
  updateLoading: function (c) {
    var b = this.getLoadMoreCmp(),
      a = this.getLoadingCls();
    if (c) {
      b.addCls(a);
    } else {
      b.removeCls(a);
    }
  },
  onStoreBeforeLoad: function (a) {
    if (a.getCount() === 0) {
      this.getLoadMoreCmp().hide();
    }
  },
  onStoreLoad: function (d) {
    var a = this.getLoadMoreCmp(),
      b = this.getLoadTpl(),
      c = this.storeFullyLoaded()
        ? this.getNoMoreRecordsText()
        : this.getLoadMoreText();
    if (d.getCount() && this.storeFullyLoaded()) {
      a.show();
    } else {
      a.hide();
    }
    this.setLoading(!1);
    a.setHtml(b.apply({ cssPrefix: Ext.baseCSSPrefix, message: c }));
    if (this.currentScrollToTopOnRefresh !== undefined) {
      this.getList().setScrollToTopOnRefresh(this.currentScrollToTopOnRefresh);
      delete this.currentScrollToTopOnRefresh;
    }
    this.enableDataViewMask();
  },
  onFilter: function (a) {
    if (a.getCount() === 0 || this.storeFullyLoaded()) {
      this.getLoadMoreCmp().hide();
    } else {
      this.getLoadMoreCmp().show();
    }
  },
  addLoadMoreCmp: function () {
    var a = this.getList(),
      b = this.getLoadMoreCmp();
    if (!this.getLoadMoreCmpAdded()) {
      a.add(b);
      a.fireEvent("loadmorecmpadded", this, a);
      this.setLoadMoreCmpAdded(!0);
    }
    return b;
  },
  storeFullyLoaded: function () {
    var a = this.getList().getStore(),
      b = a.getTotalCount();
    return b !== null
      ? a.getTotalCount() <= a.currentPage * a.getPageSize()
      : !1;
  },
  loadNextPage: function () {
    var a = this;
    if (!a.storeFullyLoaded()) {
      a.disableDataViewMask();
      a.setLoading(!0);
      a.getList().getStore().nextPage({ addRecords: !0 });
    }
  },
});
Ext.define("Ext.viewport.Default", {
  extend: Ext.Container,
  xtype: "viewport",
  PORTRAIT: "portrait",
  LANDSCAPE: "landscape",
  config: {
    autoMaximize: !1,
    autoBlurInput: !0,
    preventPanning: !0,
    preventZooming: !1,
    autoRender: !0,
    layout: "card",
    width: "100%",
    height: "100%",
    useBodyElement: !0,
    menus: {},
  },
  isReady: !1,
  isViewport: !0,
  isMaximizing: !1,
  id: "ext-viewport",
  isInputRegex: /^(input|textarea|select|a)$/i,
  focusedElement: null,
  fullscreenItemCls: Ext.baseCSSPrefix + "fullscreen",
  constructor: function (b) {
    var a = Ext.Function.bind;
    this.doPreventPanning = a(this.doPreventPanning, this);
    this.doPreventZooming = a(this.doPreventZooming, this);
    this.doBlurInput = a(this.doBlurInput, this);
    this.maximizeOnEvents = ["ready", "orientationchange"];
    window.devicePixelRatio = window.devicePixelRatio || 1;
    this.callSuper([b]);
    this.orientation = this.determineOrientation();
    this.windowWidth = this.getWindowWidth();
    this.windowHeight = this.getWindowHeight();
    this.windowOuterHeight = this.getWindowOuterHeight();
    if (!this.stretchHeights) {
      this.stretchHeights = {};
    }
    if (!Ext.os.is.Android || Ext.browser.is.ChromeMobile) {
      if (this.supportsOrientation()) {
        this.addWindowListener(
          "orientationchange",
          a(this.onOrientationChange, this)
        );
      } else {
        this.addWindowListener("resize", a(this.onResize, this));
      }
    }
    document.addEventListener("focus", a(this.onElementFocus, this), !0);
    document.addEventListener("blur", a(this.onElementBlur, this), !0);
    Ext.onDocumentReady(this.onDomReady, this);
    this.on("ready", this.onReady, this, { single: !0 });
    this.getEventDispatcher().addListener(
      "component",
      "*",
      "fullscreen",
      "onItemFullscreenChange",
      this
    );
    return this;
  },
  onDomReady: function () {
    this.isReady = !0;
    this.updateSize();
    this.fireEvent("ready", this);
  },
  onReady: function () {
    if (this.getAutoRender()) {
      this.render();
    }
    if (Ext.browser.name == "ChromeiOS") {
      this.setHeight(
        "-webkit-calc(100% - " +
          (window.outerHeight - window.innerHeight) / 2 +
          "px)"
      );
    }
  },
  onElementFocus: function (a) {
    this.focusedElement = a.target;
  },
  onElementBlur: function () {
    this.focusedElement = null;
  },
  render: function () {
    if (!this.rendered) {
      var f = Ext.getBody(),
        b = Ext.baseCSSPrefix,
        a = [],
        c = Ext.os,
        e = c.name.toLowerCase(),
        g = Ext.browser.name.toLowerCase(),
        d = c.version.getMajor(),
        h = this.getOrientation();
      this.renderTo(f);
      a.push(b + c.deviceType.toLowerCase());
      if (c.is.iPad) {
        a.push(b + "ipad");
      }
      a.push(b + e);
      a.push(b + g);
      if (d) {
        a.push(b + e + "-" + d);
      }
      if (c.is.BlackBerry) {
        a.push(b + "bb");
      }
      if (Ext.browser.is.WebKit) {
        a.push(b + "webkit");
      }
      if (Ext.browser.is.Standalone) {
        a.push(b + "standalone");
      }
      if (Ext.browser.is.AndroidStock) {
        a.push(b + "android-stock");
      }
      a.push(b + h);
      f.addCls(a);
    }
  },
  applyAutoBlurInput: function (a) {
    var b = Ext.feature.has.Touch ? "touchstart" : "mousedown";
    if (a) {
      this.addWindowListener(b, this.doBlurInput, !1);
    } else {
      this.removeWindowListener(b, this.doBlurInput, !1);
    }
    return a;
  },
  applyAutoMaximize: function (a) {
    if (Ext.browser.is.WebView) {
      a = !1;
    }
    if (a) {
      this.on("ready", "doAutoMaximizeOnReady", this, { single: !0 });
      this.on("orientationchange", "doAutoMaximizeOnOrientationChange", this);
    } else {
      this.un("ready", "doAutoMaximizeOnReady", this);
      this.un("orientationchange", "doAutoMaximizeOnOrientationChange", this);
    }
    return a;
  },
  applyPreventPanning: function (a) {
    if (a) {
      this.addWindowListener("touchmove", this.doPreventPanning, !1);
    } else {
      this.removeWindowListener("touchmove", this.doPreventPanning, !1);
    }
    return a;
  },
  applyPreventZooming: function (a) {
    var b = Ext.feature.has.Touch ? "touchstart" : "mousedown";
    if (a) {
      this.addWindowListener(b, this.doPreventZooming, !1);
    } else {
      this.removeWindowListener(b, this.doPreventZooming, !1);
    }
    return a;
  },
  doAutoMaximizeOnReady: function () {
    var a = arguments[arguments.length - 1];
    a.pause();
    this.isMaximizing = !0;
    this.on(
      "maximize",
      function () {
        this.isMaximizing = !1;
        this.updateSize();
        a.resume();
        this.fireEvent("ready", this);
      },
      this,
      { single: !0 }
    );
    this.maximize();
  },
  doAutoMaximizeOnOrientationChange: function () {
    var a = arguments[arguments.length - 1],
      b = a.firingArguments;
    a.pause();
    this.isMaximizing = !0;
    this.on(
      "maximize",
      function () {
        this.isMaximizing = !1;
        this.updateSize();
        b[2] = this.windowWidth;
        b[3] = this.windowHeight;
        a.resume();
      },
      this,
      { single: !0 }
    );
    this.maximize();
  },
  doBlurInput: function (c) {
    var b = c.target,
      a = this.focusedElement;
    if (
      a &&
      a.nodeName.toUpperCase() != "BODY" &&
      !this.isInputRegex.test(b.tagName)
    ) {
      delete this.focusedElement;
      a.blur();
    }
  },
  doPreventPanning: function (a) {
    a.preventDefault();
  },
  doPreventZooming: function (a) {
    if ("button" in a && a.button !== 0) {
      return;
    }
    var b = a.target;
    if (b && b.nodeType === 1 && !this.isInputRegex.test(b.tagName)) {
      a.preventDefault();
    }
  },
  addWindowListener: function (b, c, a) {
    window.addEventListener(b, c, Boolean(a));
  },
  removeWindowListener: function (b, c, a) {
    window.removeEventListener(b, c, Boolean(a));
  },
  doAddListener: function (a, c, b, d) {
    if (a === "ready" && this.isReady && !this.isMaximizing) {
      c.call(b);
      return this;
    }
    return this.callSuper(arguments);
  },
  supportsOrientation: function () {
    return Ext.feature.has.Orientation;
  },
  onResize: function () {
    var d = this.windowWidth,
      c = this.windowHeight,
      f = this.getWindowWidth(),
      e = this.getWindowHeight(),
      a = this.getOrientation(),
      b = this.determineOrientation();
    if (d !== f && c !== e && a !== b) {
      this.fireOrientationChangeEvent(b, a);
    }
  },
  onOrientationChange: function () {
    var a = this.getOrientation(),
      b = this.determineOrientation();
    if (b !== a) {
      this.fireOrientationChangeEvent(b, a);
    }
  },
  fireOrientationChangeEvent: function (a, c) {
    var b = Ext.baseCSSPrefix;
    Ext.getBody().replaceCls(b + c, b + a);
    this.orientation = a;
    this.updateSize();
    this.fireEvent(
      "orientationchange",
      this,
      a,
      this.windowWidth,
      this.windowHeight
    );
  },
  updateSize: function (b, a) {
    this.windowWidth = b !== undefined ? b : this.getWindowWidth();
    this.windowHeight = a !== undefined ? a : this.getWindowHeight();
    return this;
  },
  waitUntil: function (g, d, e, a, b) {
    if (!a) {
      a = 50;
    }
    if (!b) {
      b = 2000;
    }
    var c = this,
      f = 0;
    setTimeout(function repeat() {
      f += a;
      if (g.call(c) === !0) {
        if (d) {
          d.call(c);
        }
      } else {
        if (f >= b) {
          if (e) {
            e.call(c);
          }
        } else {
          setTimeout(repeat, a);
        }
      }
    }, a);
  },
  maximize: function () {
    this.fireMaximizeEvent();
  },
  fireMaximizeEvent: function () {
    this.updateSize();
    this.fireEvent("maximize", this);
  },
  doSetHeight: function (a) {
    Ext.getBody().setHeight(a);
    this.callParent(arguments);
  },
  doSetWidth: function (a) {
    Ext.getBody().setWidth(a);
    this.callParent(arguments);
  },
  scrollToTop: function () {
    window.scrollTo(0, -1);
  },
  getWindowWidth: function () {
    return window.innerWidth;
  },
  getWindowHeight: function () {
    return window.innerHeight;
  },
  getWindowOuterHeight: function () {
    return window.outerHeight;
  },
  getWindowOrientation: function () {
    return window.orientation;
  },
  getOrientation: function () {
    return this.orientation;
  },
  getSize: function () {
    return { width: this.windowWidth, height: this.windowHeight };
  },
  determineOrientation: function () {
    var b = this.PORTRAIT,
      a = this.LANDSCAPE;
    if (!Ext.os.is.Android && this.supportsOrientation()) {
      if (this.getWindowOrientation() % 180 === 0) {
        return b;
      }
      return a;
    } else {
      if (this.getWindowHeight() >= this.getWindowWidth()) {
        return b;
      }
      return a;
    }
  },
  onItemFullscreenChange: function (a) {
    a.addCls(this.fullscreenItemCls);
    this.add(a);
  },
  setMenu: function (a, c) {
    var b = this;
    c = c || {};
    if (Ext.os.is.iOS && !this.hasiOSOrientationFix) {
      this.hasiOSOrientationFix = !0;
      this.on(
        "orientationchange",
        function () {
          window.scrollTo(0, 0);
        },
        this
      );
    }
    if (!a) {
      return;
    }
    if (!c.side) {
      return;
    }
    if (["left", "right", "top", "bottom"].indexOf(c.side) == -1) {
      return;
    }
    var d = b.getMenus();
    if (!d) {
      d = {};
    }
    if (!b.addedSwipeListener) {
      b.addedSwipeListener = !0;
      b.element.on({
        tap: b.onTap,
        swipestart: b.onSwipeStart,
        edgeswipestart: b.onEdgeSwipeStart,
        edgeswipe: b.onEdgeSwipe,
        edgeswipeend: b.onEdgeSwipeEnd,
        scope: b,
      });
      if (window.blackberry) {
        var e = function () {
          var e = b.getMenus(),
            d = e["top"];
          if (!d) {
            return;
          }
          if (d.isHidden()) {
            b.showMenu("top");
          } else {
            b.hideMenu("top");
          }
        };
        if (
          blackberry.app &&
          blackberry.app.event &&
          blackberry.app.event.onSwipeDown
        ) {
          blackberry.app.event.onSwipeDown(e);
        } else {
          if (blackberry.event && blackberry.event.addEventListener) {
            blackberry.event.addEventListener("swipedown", e);
          }
        }
      }
    }
    d[c.side] = a;
    a.$reveal = Boolean(c.reveal);
    a.$cover = c.cover !== !1 && !a.$reveal;
    a.$side = c.side;
    b.fixMenuSize(a, c.side);
    if (c.side == "left") {
      a.setLeft(0);
      a.setRight(null);
      a.setTop(0);
      a.setBottom(0);
    } else {
      if (c.side == "right") {
        a.setLeft(null);
        a.setRight(0);
        a.setTop(0);
        a.setBottom(0);
      } else {
        if (c.side == "top") {
          a.setLeft(0);
          a.setRight(0);
          a.setTop(0);
          a.setBottom(null);
        } else {
          if (c.side == "bottom") {
            a.setLeft(0);
            a.setRight(0);
            a.setTop(null);
            a.setBottom(0);
          }
        }
      }
    }
    b.setMenus(d);
  },
  removeMenu: function (b) {
    var a = this.getMenus() || {},
      c = a[b];
    if (c) {
      this.hideMenu(b);
    }
    delete a[b];
    this.setMenus(a);
  },
  fixMenuSize: function (b, a) {
    if (a == "top" || a == "bottom") {
      b.setWidth("100%");
    } else {
      if (a == "left" || a == "right") {
        b.setHeight("100%");
      }
    }
  },
  showMenu: function (b) {
    var h = this.getMenus(),
      a = h[b],
      e,
      g,
      f,
      d;
    if (!a || a.isAnimating) {
      return;
    }
    this.hideOtherMenus(b);
    e = { translateX: 0, translateY: 0 };
    g = { translateX: 0, translateY: 0 };
    f = { translateX: 0, translateY: 0 };
    d = { translateX: 0, translateY: 0 };
    if (a.$reveal) {
      Ext.getBody().insertFirst(a.element);
    } else {
      Ext.Viewport.add(a);
    }
    a.show();
    a.addCls("x-" + b);
    var c =
      b == "left" || b == "right"
        ? a.element.getWidth()
        : a.element.getHeight();
    if (b == "left") {
      e.translateX = -c;
      d.translateX = c;
    } else {
      if (b == "right") {
        e.translateX = c;
        d.translateX = -c;
      } else {
        if (b == "top") {
          e.translateY = -c;
          d.translateY = c;
        } else {
          if (b == "bottom") {
            e.translateY = c;
            d.translateY = -c;
          }
        }
      }
    }
    if (a.$reveal) {
      if (Ext.browser.getPreferredTranslationMethod() != "scrollposition") {
        a.translate(0, 0);
      }
    } else {
      a.translate(e.translateX, e.translateY);
    }
    if (a.$cover) {
      a.getTranslatable().on(
        "animationend",
        function () {
          a.isAnimating = !1;
        },
        this,
        { single: !0 }
      );
      a.translate(g.translateX, g.translateY, {
        preserveEndState: !0,
        duration: 200,
      });
    } else {
      this.translate(f.translateX, f.translateY);
      this.getTranslatable().on(
        "animationend",
        function () {
          a.isAnimating = !1;
        },
        this,
        { single: !0 }
      );
      this.translate(d.translateX, d.translateY, {
        preserveEndState: !0,
        duration: 200,
      });
    }
    a.isAnimating = !0;
  },
  hideMenu: function (c, f) {
    var g = this.getMenus(),
      a = g[c],
      b,
      d,
      e;
    f = f === !1 ? !1 : !0;
    if (!a || a.isHidden() || a.isAnimating) {
      return;
    }
    b = { translateX: 0, translateY: 0 };
    d = { translateX: 0, translateY: 0 };
    e =
      c == "left" || c == "right"
        ? a.element.getWidth()
        : a.element.getHeight();
    if (c == "left") {
      b.translateX = -e;
    } else {
      if (c == "right") {
        b.translateX = e;
      } else {
        if (c == "top") {
          b.translateY = -e;
        } else {
          if (c == "bottom") {
            b.translateY = e;
          }
        }
      }
    }
    if (a.$cover) {
      if (f) {
        a.getTranslatable().on(
          "animationend",
          function () {
            a.isAnimating = !1;
            a.hide();
          },
          this,
          { single: !0 }
        );
        a.translate(b.translateX, b.translateY, {
          preserveEndState: !0,
          duration: 200,
        });
      } else {
        a.translate(b.translateX, b.translateY);
        a.hide();
      }
    } else {
      if (f) {
        this.getTranslatable().on(
          "animationend",
          function () {
            a.isAnimating = !1;
            a.hide();
          },
          this,
          { single: !0 }
        );
        this.translate(d.translateX, d.translateY, {
          preserveEndState: !0,
          duration: 200,
        });
      } else {
        this.translate(d.translateX, d.translateY);
        a.hide();
      }
    }
  },
  hideAllMenus: function (a) {
    var b = this.getMenus();
    for (var c in b) {
      this.hideMenu(c, a);
    }
  },
  hideOtherMenus: function (d, b) {
    var c = this.getMenus();
    for (var a in c) {
      if (d != a) {
        this.hideMenu(a, b);
      }
    }
  },
  toggleMenu: function (a) {
    var b = this.getMenus(),
      c;
    if (b[a]) {
      c = b[a];
      if (c.isHidden()) {
        this.showMenu(a);
      } else {
        this.hideMenu(a);
      }
    }
  },
  sideForDirection: function (a) {
    if (a == "left") {
      return "right";
    } else {
      if (a == "right") {
        return "left";
      } else {
        if (a == "up") {
          return "bottom";
        } else {
          if (a == "down") {
            return "top";
          }
        }
      }
    }
  },
  sideForSwipeDirection: function (a) {
    if (a == "up") {
      return "top";
    } else {
      if (a == "down") {
        return "bottom";
      }
    }
    return a;
  },
  onTap: function (a) {},
  onSwipeStart: function (b) {
    var a = this.sideForSwipeDirection(b.direction);
    this.hideMenu(a);
  },
  onEdgeSwipeStart: function (k) {
    var c = this.sideForDirection(k.direction),
      g = this.getMenus(),
      a = g[c],
      j,
      i;
    if (!a || !a.isHidden()) {
      return;
    }
    for (j in g) {
      i = g[j];
      if (i.isHidden() !== !1) {
        return;
      }
    }
    this.$swiping = !0;
    this.hideAllMenus(!1);
    if (a.$reveal) {
      Ext.getBody().insertFirst(a.element);
    } else {
      Ext.Viewport.add(a);
    }
    a.show();
    var d =
        c == "left" || c == "right"
          ? a.element.getWidth()
          : a.element.getHeight(),
      b,
      f;
    b = { translateX: 0, translateY: 0 };
    f = { translateX: 0, translateY: 0 };
    if (c == "left") {
      b.translateX = -d;
    } else {
      if (c == "right") {
        b.translateX = d;
      } else {
        if (c == "top") {
          b.translateY = -d;
        } else {
          if (c == "bottom") {
            b.translateY = d;
          }
        }
      }
    }
    var e =
        "webkitTransform" in document.createElement("div").style
          ? "webkitTransform"
          : "transform",
      h = a.element.dom.style[e];
    if (h) {
      a.element.dom.style[e] = "";
    }
    if (a.$reveal) {
      if (Ext.browser.getPreferredTranslationMethod() != "scrollposition") {
        a.translate(0, 0);
      }
    } else {
      a.translate(b.translateX, b.translateY);
    }
    if (!a.$cover) {
      if (h) {
        this.innerElement.dom.style[e] = "";
      }
      this.translate(f.translateX, f.translateY);
    }
  },
  onEdgeSwipe: function (g) {
    var c = this.sideForDirection(g.direction),
      d = this.getMenus()[c];
    if (!d || !this.$swiping) {
      return;
    }
    var h =
        c == "left" || c == "right"
          ? d.element.getWidth()
          : d.element.getHeight(),
      b,
      a,
      f = Math.min(g.distance - h, 0),
      e = Math.min(g.distance, h);
    b = { translateX: 0, translateY: 0 };
    a = { translateX: 0, translateY: 0 };
    if (c == "left") {
      b.translateX = f;
      a.translateX = e;
    } else {
      if (c == "right") {
        b.translateX = -f;
        a.translateX = -e;
      } else {
        if (c == "top") {
          b.translateY = f;
          a.translateY = e;
        } else {
          if (c == "bottom") {
            b.translateY = -f;
            a.translateY = -e;
          }
        }
      }
    }
    if (d.$cover) {
      d.translate(b.translateX, b.translateY);
    } else {
      this.translate(a.translateX, a.translateY);
    }
  },
  onEdgeSwipeEnd: function (i) {
    var a = this.sideForDirection(i.direction),
      c = this.getMenus()[a],
      b = !1;
    if (!c) {
      return;
    }
    var j =
        a == "left" || a == "right"
          ? c.element.getWidth()
          : c.element.getHeight(),
      h = i.flick ? i.flick.velocity : 0;
    if (a == "right") {
      if (h.x > 0) {
        b = !0;
      }
    } else {
      if (a == "left") {
        if (h.x < 0) {
          b = !0;
        }
      } else {
        if (a == "top") {
          if (h.y < 0) {
            b = !0;
          }
        } else {
          if (a == "bottom") {
            if (h.y > 0) {
              b = !0;
            }
          }
        }
      }
    }
    var g = b ? j : 0,
      f = b ? 0 : -j,
      e,
      d;
    e = { translateX: 0, translateY: 0 };
    d = { translateX: 0, translateY: 0 };
    if (a == "left") {
      e.translateX = -g;
      d.translateX = -f;
    } else {
      if (a == "right") {
        e.translateX = g;
        d.translateX = f;
      } else {
        if (a == "top") {
          e.translateY = -g;
          d.translateY = -f;
        } else {
          if (a == "bottom") {
            e.translateY = g;
            d.translateY = f;
          }
        }
      }
    }
    if (c.$cover) {
      c.getTranslatable().on(
        "animationend",
        function () {
          if (b) {
            c.hide();
          }
        },
        this,
        { single: !0 }
      );
      c.translate(e.translateX, e.translateY, {
        preserveEndState: !0,
        duration: 200,
      });
    } else {
      this.getTranslatable().on(
        "animationend",
        function () {
          if (b) {
            c.hide();
          }
        },
        this,
        { single: !0 }
      );
      this.translate(d.translateX, d.translateY, {
        preserveEndState: !0,
        duration: 200,
      });
    }
    this.$swiping = !1;
  },
});
Ext.define("MEM.overrides.viewport.Default", {
  override: "Ext.viewport.Default",
  determineOrientation: function () {
    var b = this.PORTRAIT,
      a = this.LANDSCAPE;
    if (
      (!Ext.os.is.Android || Ext.browser.is.ChromeMobile) &&
      this.supportsOrientation()
    ) {
      if (this.getWindowOrientation() % 180 === 0) {
        return b;
      }
      return a;
    } else {
      if (this.getWindowHeight() >= this.getWindowWidth()) {
        return b;
      }
      return a;
    }
  },
});
Ext.define(
  "Ext.viewport.Android",
  {
    extend: Ext.viewport.Default,
    config: { translatable: { translationMethod: "csstransform" } },
    constructor: function () {
      this.on("orientationchange", "hideKeyboardIfNeeded", this, {
        prepend: !0,
      });
      this.callSuper(arguments);
      this.bodyElement.on("resize", this.onResize, this, { buffer: 1 });
    },
    getWindowWidth: function () {
      return this.element.getWidth();
    },
    getWindowHeight: function () {
      return this.element.getHeight();
    },
    getDummyInput: function () {
      var a = this.dummyInput,
        c = this.focusedElement,
        b = Ext.fly(c).getPageBox();
      if (!a) {
        this.dummyInput = a = document.createElement("input");
        a.style.position = "absolute";
        a.style.opacity = "0";
        a.style.pointerEvents = "none";
        document.body.appendChild(a);
      }
      a.style.left = b.left + "px";
      a.style.top = b.top + "px";
      a.style.display = "";
      return a;
    },
    doBlurInput: function (d) {
      var c = d.target,
        b = this.focusedElement,
        a;
      if (b && !this.isInputRegex.test(c.tagName)) {
        a = this.getDummyInput();
        delete this.focusedElement;
        a.focus();
        setTimeout(function () {
          a.style.display = "none";
        }, 100);
      }
    },
    hideKeyboardIfNeeded: function () {
      var b = arguments[arguments.length - 1],
        a = this.focusedElement;
      if (a) {
        delete this.focusedElement;
        b.pause();
        if (Ext.os.version.lt("4")) {
          a.style.display = "none";
        } else {
          a.blur();
        }
        setTimeout(function () {
          a.style.display = "";
          b.resume();
        }, 1000);
      }
    },
    doFireOrientationChangeEvent: function () {
      var a = arguments[arguments.length - 1];
      this.orientationChanging = !0;
      a.pause();
      this.waitUntil(
        function () {
          return this.getWindowOuterHeight() !== this.windowOuterHeight;
        },
        function () {
          this.windowOuterHeight = this.getWindowOuterHeight();
          this.updateSize();
          a.firingArguments[2] = this.windowWidth;
          a.firingArguments[3] = this.windowHeight;
          a.resume();
          this.orientationChanging = !1;
        },
        function () {}
      );
      return this;
    },
    determineOrientation: function () {
      return this.getWindowHeight() >= this.getWindowWidth()
        ? this.PORTRAIT
        : this.LANDSCAPE;
    },
    getActualWindowOuterHeight: function () {
      return Math.round(this.getWindowOuterHeight() / window.devicePixelRatio);
    },
    maximize: function () {
      var b = this.stretchHeights,
        c = this.orientation,
        a;
      a = b[c];
      if (!a) {
        b[c] = a = this.getActualWindowOuterHeight();
      }
      if (!this.addressBarHeight) {
        this.addressBarHeight = a - this.getWindowHeight();
      }
      this.setHeight(a);
      var d = Ext.Function.bind(this.isHeightMaximized, this, [a]);
      this.scrollToTop();
      this.waitUntil(d, this.fireMaximizeEvent, this.fireMaximizeEvent);
    },
    isHeightMaximized: function (a) {
      this.scrollToTop();
      return this.getWindowHeight() === a;
    },
    supportsOrientation: function () {
      return !1;
    },
    onResize: function () {
      this.waitUntil(
        function () {
          var d = this.windowWidth,
            c = this.windowHeight,
            f = this.getWindowWidth(),
            e = this.getWindowHeight(),
            a = this.getOrientation(),
            b = this.determineOrientation();
          return d !== f && c !== e && a !== b;
        },
        function () {
          var a = this.getOrientation(),
            b = this.determineOrientation();
          this.fireOrientationChangeEvent(b, a);
        },
        Ext.emptyFn,
        250
      );
    },
    doPreventZooming: function (a) {
      if ("button" in a && a.button !== 0) {
        return;
      }
      var b = a.target;
      if (
        b &&
        b.nodeType === 1 &&
        !this.isInputRegex.test(b.tagName) &&
        !this.focusedElement
      ) {
        a.preventDefault();
      }
    },
  },
  function () {
    if (!Ext.os.is.Android) {
      return;
    }
    var a = Ext.os.version,
      b = Ext.browser.userAgent,
      c = /(htc|desire|incredible|ADR6300)/i.test(b) && a.lt("2.3");
    if (c) {
      this.override({
        constructor: function (a) {
          if (!a) {
            a = {};
          }
          a.autoMaximize = !1;
          this.watchDogTick = Ext.Function.bind(this.watchDogTick, this);
          setInterval(this.watchDogTick, 1000);
          return this.callParent([a]);
        },
        watchDogTick: function () {
          this.watchDogLastTick = Ext.Date.now();
        },
        doPreventPanning: function () {
          var c = Ext.Date.now(),
            b = this.watchDogLastTick,
            a = c - b;
          if (a >= 2000) {
            return;
          }
          return this.callParent(arguments);
        },
        doPreventZooming: function () {
          var c = Ext.Date.now(),
            b = this.watchDogLastTick,
            a = c - b;
          if (a >= 2000) {
            return;
          }
          return this.callParent(arguments);
        },
      });
    }
    if (a.match("2")) {
      this.override({
        onReady: function () {
          this.addWindowListener(
            "resize",
            Ext.Function.bind(this.onWindowResize, this)
          );
          this.callParent(arguments);
        },
        scrollToTop: function () {
          document.body.scrollTop = 100;
        },
        onWindowResize: function () {
          var c = this.windowWidth,
            a = this.windowHeight,
            d = this.getWindowWidth(),
            b = this.getWindowHeight();
          if (
            this.getAutoMaximize() &&
            !this.isMaximizing &&
            !this.orientationChanging &&
            window.scrollY === 0 &&
            c === d &&
            b < a &&
            (b >= a - this.addressBarHeight || !this.focusedElement)
          ) {
            this.scrollToTop();
          }
        },
      });
    } else {
      if (a.gtEq("3.1")) {
        this.override({
          isHeightMaximized: function (a) {
            this.scrollToTop();
            return this.getWindowHeight() === a - 1;
          },
        });
      } else {
        if (a.match("3")) {
          this.override({
            isHeightMaximized: function () {
              this.scrollToTop();
              return !0;
            },
          });
        }
      }
    }
    if (a.gtEq("4")) {
      this.override({ doBlurInput: Ext.emptyFn });
    }
  }
);
Ext.define(
  "Ext.viewport.Ios",
  {
    extend: Ext.viewport.Default,
    isFullscreen: function () {
      return this.isHomeScreen();
    },
    isHomeScreen: function () {
      return window.navigator.standalone === !0;
    },
    constructor: function () {
      this.callParent(arguments);
      if (this.getAutoMaximize() && !this.isFullscreen()) {
        this.addWindowListener(
          "touchstart",
          Ext.Function.bind(this.onTouchStart, this)
        );
      }
    },
    maximize: function () {
      if (this.isFullscreen()) {
        return this.callParent();
      }
      var b = this.stretchHeights,
        c = this.orientation,
        d = this.getWindowHeight(),
        a = b[c];
      if (window.scrollY > 0) {
        this.scrollToTop();
        if (!a) {
          b[c] = a = this.getWindowHeight();
        }
        this.setHeight(a);
        this.fireMaximizeEvent();
      } else {
        if (!a) {
          a = this.getScreenHeight();
        }
        this.setHeight(a);
        this.waitUntil(
          function () {
            this.scrollToTop();
            return d !== this.getWindowHeight();
          },
          function () {
            if (!b[c]) {
              a = b[c] = this.getWindowHeight();
              this.setHeight(a);
            }
            this.fireMaximizeEvent();
          },
          function () {
            a = b[c] = this.getWindowHeight();
            this.setHeight(a);
            this.fireMaximizeEvent();
          },
          50,
          1000
        );
      }
    },
    getScreenHeight: function () {
      return window.screen[
        this.orientation === this.PORTRAIT ? "height" : "width"
      ];
    },
    onElementFocus: function () {
      if (this.getAutoMaximize() && !this.isFullscreen()) {
        clearTimeout(this.scrollToTopTimer);
      }
      this.callParent(arguments);
    },
    onElementBlur: function () {
      if (this.getAutoMaximize() && !this.isFullscreen()) {
        this.scrollToTopTimer = setTimeout(this.scrollToTop, 500);
      }
      this.callParent(arguments);
    },
    onTouchStart: function () {
      if (this.focusedElement === null) {
        this.scrollToTop();
      }
    },
    scrollToTop: function () {
      window.scrollTo(0, 0);
    },
  },
  function () {
    if (!Ext.os.is.iOS) {
      return;
    }
    if (Ext.os.version.lt("3.2")) {
      this.override({
        constructor: function () {
          var a = (this.stretchHeights = {});
          a[this.PORTRAIT] = 416;
          a[this.LANDSCAPE] = 268;
          return this.callOverridden(arguments);
        },
      });
    }
    if (Ext.os.version.lt("5")) {
      this.override({
        fieldMaskClsTest: "-field-mask",
        doPreventZooming: function (b) {
          var a = b.target;
          if (
            a &&
            a.nodeType === 1 &&
            !this.isInputRegex.test(a.tagName) &&
            a.className.indexOf(this.fieldMaskClsTest) == -1
          ) {
            b.preventDefault();
          }
        },
      });
    }
    if (Ext.os.is.iPad) {
      this.override({
        isFullscreen: function () {
          return !0;
        },
      });
    }
    if (Ext.os.version.gtEq("7")) {
      if (
        Ext.os.deviceType === "Tablet" ||
        !Ext.browser.is.Safari ||
        window.navigator.standalone
      ) {
        this.override({
          constructor: function () {
            var a = {},
              b = {},
              f = this.determineOrientation(),
              c = window.screen.height,
              d = window.screen.width,
              e =
                f === this.PORTRAIT
                  ? c - window.innerHeight
                  : d - window.innerHeight;
            a[this.PORTRAIT] = c - e;
            a[this.LANDSCAPE] = d - e;
            b[this.PORTRAIT] = d;
            b[this.LANDSCAPE] = c;
            this.stretchHeights = a;
            this.stretchWidths = b;
            this.callOverridden(arguments);
            this.on("ready", this.setViewportSizeToAbsolute, this);
            this.on("orientationchange", this.setViewportSizeToAbsolute, this);
          },
          getWindowHeight: function () {
            return this.stretchHeights[this.orientation];
          },
          getWindowWidth: function () {
            return this.stretchWidths[this.orientation];
          },
          setViewportSizeToAbsolute: function () {
            this.setWidth(this.getWindowWidth());
            this.setHeight(this.getWindowHeight());
          },
        });
      }
      if (Ext.os.deviceType === "Tablet") {
        this.override({
          constructor: function () {
            this.callOverridden(arguments);
            window.addEventListener(
              "scroll",
              function () {
                if (window.scrollX !== 0) {
                  window.scrollTo(0, window.scrollY);
                }
              },
              !1
            );
          },
          setViewportSizeToAbsolute: function () {
            window.scrollTo(0, 0);
            this.callOverridden(arguments);
          },
          onElementBlur: function () {
            this.callOverridden(arguments);
            if (window.scrollY !== 0) {
              window.scrollTo(0, 0);
            }
          },
        });
      }
    }
  }
);
Ext.define("MEM.overrides.viewport.Ios", {
  override: "Ext.viewport.Ios",
  constructor: function () {
    this.callParent(arguments);
    if (Ext.os.version.gtEq("7")) {
      this.setViewportSizeToAbsolute = function () {
        this.setWidth("100%");
        this.setHeight("100%");
      };
      this.on("ready", this.setViewportSizeToAbsolute, this);
      this.on("orientationchange", this.setViewportSizeToAbsolute, this);
      if (!this.supportsOrientation()) {
        this.onResize = function () {
          var a = this.getOrientation(),
            b = a == this.PORTRAIT ? this.LANDSCAPE : this.PORTRAIT;
          this.fireOrientationChangeEvent(b, a);
        };
        window.addEventListener("resize", this.onResize.bind(this));
      }
    }
  },
});
Ext.define("Ext.viewport.WindowsPhone", {
  requires: [],
  alternateClassName: "Ext.viewport.WP",
  extend: Ext.viewport.Default,
  config: { translatable: { translationMethod: "csstransform" } },
  initialize: function () {
    var a = function (c) {
      var b = c.srcElement.nodeName.toUpperCase(),
        a = ["INPUT", "TEXTAREA"];
      if (a.indexOf(b) == -1) {
        return !1;
      }
    };
    document.body.addEventListener("onselectstart", a);
    this.callParent(arguments);
  },
  supportsOrientation: function () {
    return !1;
  },
  onResize: function () {
    this.waitUntil(
      function () {
        var d = this.windowWidth,
          c = this.windowHeight,
          f = this.getWindowWidth(),
          e = this.getWindowHeight(),
          a = this.getOrientation(),
          b = this.determineOrientation();
        return d !== f && c !== e && a !== b;
      },
      function () {
        var a = this.getOrientation(),
          b = this.determineOrientation();
        this.fireOrientationChangeEvent(b, a);
      },
      Ext.emptyFn,
      250
    );
  },
});
Ext.define("Ext.viewport.Viewport", {
  constructor: function (c) {
    var d = Ext.os.name,
      a,
      b;
    switch (d) {
      case "Android":
        a = Ext.browser.name == "ChromeMobile" ? "Default" : "Android";
        break;
      case "iOS":
        a = "Ios";
        break;
      case "Windows":
        a = Ext.browser.name == "IE" ? "WindowsPhone" : "Default";
        break;
      case "WindowsPhone":
        a = "WindowsPhone";
        break;
      default:
        a = "Default";
        break;
    }
    b = Ext.create("Ext.viewport." + a, c);
    return b;
  },
});
Ext.define("MEM.localization.MyLocalization", {
  extend: Ext.Base,
  singleton: !0,
});
Ext.define("MEM.Translation", { extend: Ext.Base, singleton: !0 });
Ext.JSON.encodeDate = function (a) {
  return Ext.Date.format(a, '"Y-m-d"');
};
getCookie = function (e) {
  var a,
    c,
    d,
    b = document.cookie.split(";");
  for (a = 0; a < b.length; a++) {
    c = b[a].substr(0, b[a].indexOf("="));
    d = b[a].substr(b[a].indexOf("=") + 1);
    c = c.replace(/^\s+|\s+$/g, "");
    if (c == e) {
      return unescape(d);
    }
  }
};
Ext.define("MEM.view.MyErrorOverlay", {
  extend: Ext.form.Panel,
  xtype: "myerroroverlay",
  alias: "myerroroverlay",
  id: "myErrorOverlay",
  config: {
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    centered: !0,
    hidden: !0,
    width: "98%",
    height: "90%",
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: !0,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Error"),
        layout: { pack: "end" },
      },
      {
        xtype: "panel",
        docked: "bottom",
        height: "4em",
        items: [
          {
            xtype: "button",
            text: "OK",
            width: "4em",
            cls: "x-button-action",
            centered: !0,
            action: "closeError",
            handler: function () {
              me = this;
              me.parent.parent.hide();
              Ext.Ajax.request({
                url: "reload.html",
                method: "GET",
                failure: function (a) {},
              });
              window.location.reload(!0);
              MEM.serverError.counter = 0;
            },
          },
        ],
      },
      { xtype: "label", id: "errorNote" },
    ],
  },
});
Ext.define("MEM.ux.data.writer.MyWriter", {
  extend: Ext.data.writer.Json,
  alias: "writer.mywriter",
  config: { rootProperty: "json", encode: !0, writeAllFields: !1 },
  getAffectedRecords: function (c) {
    var d = c.getRecords() || [],
      b = {
        "MEM.model.WorkOrder": [{ field: "ProjectId", partnersOnly: !0 }],
        "MEM.model.WorkOrderRow": [{ field: "WorkOrderId", partnersOnly: !1 }],
      },
      f = MEM.app.userIsPartner(),
      e,
      a;
    if (c.getAction() == "update") {
      d.forEach(function (d) {
        if (b.hasOwnProperty(d.$className)) {
          e = b[d.$className];
          for (var g in d.modified) {
            a = e.filter(function (a) {
              return a["field"] == g;
            })[0];
            if (a && a["field"].indexOf(g) > -1 && (!a["partnersOnly"] || f)) {
              d.set(g, d.modified[g]);
              break;
            }
          }
        }
      });
    }
    return d;
  },
  write: function (g) {
    var a = this,
      h = g.getOperation(),
      e = g.getParams(),
      d = a.getAffectedRecords(h),
      i = d.length,
      f = [];
    for (var b = 0; b < i; b++) {
      if (d[b].getId()) {
        f.push({ property: d[b].getIdProperty(), value: d[b].getId() });
      }
    }
    if (!Ext.isEmpty(f)) {
      e["filter"] = Ext.encode(f);
    }
    var c = a.encode
      ? Ext.decode(e[a.getRootProperty()])
      : e[a.getRootProperty()];
    if (Ext.isArray(c)) {
      if (a.encode) {
        c = Ext.encode({ rows: c });
      }
      e[a.rootProperty] = c;
    }
    return a.callParent(arguments);
  },
});
Ext.define("MEM.ux.data.MyProxy", {
  extend: Ext.data.proxy.Rest,
  alias: "proxy.myproxy",
  config: {
    appendId: !1,
    reader: { type: "json", rootProperty: "rows" },
    writer: { type: "mywriter" },
    listeners: {
      exception: function (c, a, b) {
        if (!this.retries) {
          this.retries = 0;
        }
        this.retries += 1;
        console.log(a.status);
        console.log(a.responseText);
        MEM.serverError.show("proxy", a);
      },
    },
    extraParams: { type: "json" },
    timeout: 45000,
    sortParam: "order",
  },
  encodeSorters: function (b) {
    var a,
      c = [];
    for (a = 0; a < b.length; a++) {
      c.push([b[a].getProperty(), b[a].getDirection()]);
    }
    if (c.length) {
      return Ext.JSON.encode(c);
    }
    return undefined;
  },
  doRequest: function (b, e, c) {
    var d = this,
      a = d.onProgress.bind(d, b.getCurrentConfig().records);
    Ext.Ajax.addListener("progress", a);
    this.callParent([
      b,
      function () {
        Ext.Ajax.removeListener("progress", a);
        e.apply(c, arguments);
      },
      c,
    ]);
  },
  onProgress: function (a, b) {
    this.fireEvent("progress", a, b);
  },
});
Ext.define("MEM.ux.data.MyBaseStore", {
  extend: Ext.data.Store,
  meFilters: null,
  config: { singleRequest: !1, pageSize: 0, defaultPageSize: 0 },
  constructor: function (b) {
    var a = this;
    a.meFilters = [];
    if (b && b.meFilters) {
      a.meFilters = b.meFilters;
    }
    a.callParent([b]);
    a.on("write", a.onWrite, a);
    a.on("beforeload", a.onBeforeload, a);
    a.on("beforesync", a.onBeforesync, a);
    a.on("load", a.onLoad, a);
    a.getProxy().on("progress", a.onProgress, a);
  },
  onLoad: function (a, c, d, b, e) {
    a.removed = [];
  },
  onWrite: function (d, a, e) {
    if (a.action === "create") {
      var c = a.records.length;
      for (var b = 0; b < c; b++) {
        a.records[b] = a.resultSet.records[b];
      }
    }
  },
  onProgress: function (a, c) {
    var b = this;
    b.fireEvent("progress", a, c);
  },
  onProxyLoad: function (b) {
    var a = this;
    if (a.getSingleRequest()) {
      if (b._meOpSingleTS && b._meOpSingleTS < a._meSingleTS) {
        console.log(
          "Throwing away result, ts too low",
          b._meOpSingleTS,
          a._meSingleTS
        );
        return;
      }
    }
    a.callParent(arguments);
  },
  onBeforeload: function (h, d, i) {
    var b = this,
      a = h.getProxy(),
      c = a.getExtraParams(),
      f = [],
      e = d.getFilters();
    if (b.getSingleRequest()) {
      var g = new Date().valueOf();
      d._meOpSingleTS = g;
      b._meSingleTS = g;
      console.log("SingleRequestStore, setting ts", d._meOpSingleTS);
    }
    if (!Ext.isDefined(c)) {
      a.setExtraParams({});
      c = a.getExtraParams();
    }
    if (e) {
      Ext.each(e, function (a, b) {
        f.push([a.config.property, "=", a.config.value]);
      });
    }
    if (!Ext.isEmpty(b.meFilters)) {
      a.setExtraParam("filter", Ext.encode(f.concat(b.meFilters)));
    } else {
      delete c.filter;
    }
  },
  onBeforesync: function (e) {
    var b = this,
      a = this.getProxy(),
      c = a.getExtraParams(),
      d = [];
    if (!Ext.isEmpty(b.meFilters)) {
      a.setExtraParam("filter", Ext.encode(d.concat(b.meFilters)));
    } else {
      delete c.filter;
    }
  },
  findRecord: function (a, b) {
    if (arguments.length == 2) {
      return this.callParent([a, b, 0, !1, !1, !0]);
    } else {
      return this.callParent(arguments);
    }
  },
  cancelPreviousRequests: function () {
    var a = this;
    if (!a.getSingleRequest()) {
      return;
    }
    var b = new Date().valueOf();
    a._meSingleTS = b;
  },
  meGetFilterValue: function (b) {
    var a = this.meFilters.find(function (a) {
      return a[0] == b;
    });
    if (a && a.length > 2) {
      return a[2];
    }
    return null;
  },
  meAddFilter: function (a) {
    var b = this;
    b.meFilters.push(a);
  },
  meRemoveFilterByField: function (b) {
    var a = this;
    for (i = 0; i < a.meFilters.length; i++) {
      if (a.meFilters[i][0] == b) {
        a.meFilters.splice(i, 1);
        break;
      }
    }
  },
  meClearFilter: function () {
    var b = this,
      c = b.getProxy(),
      a = c.getExtraParams();
    if (a && a.filter) {
      delete a.filter;
    }
    b.meFilters = new Array();
  },
  applyFilter: function (e, b) {
    console.log("CALLED MyBaseStore.applyFilter");
    var a = this,
      c = [];
    Ext.Object.each(e, function (d, a) {
      if (a) {
        c.push({ property: d, value: a });
      }
    });
    if (a.getFilters()) {
      a.clearFilter();
    }
    if (c.length > 0) {
      var d = a.getRemoteFilter;
      if (Ext.isDefined(b)) {
        a.setRemoteFilter(Ext.isFunction(b) ? !1 : d);
      }
      a.filter(c);
      a.setRemoteFilter(d);
    }
    console.log(this.config.storeId + " - filters:", this.getFilters());
    if (Ext.isFunction(b)) {
      console.log("before load: " + a.config.storeId);
      a.load({ callback: b });
    }
  },
  isNeedSync: function () {
    var a = this,
      c = a.getNewRecords(),
      d = a.getUpdatedRecords(),
      b = a.getRemovedRecords();
    if (c.length > 0 || d.length > 0 || b.length > 0) {
      return !0;
    }
    return !1;
  },
  sync: function () {
    var a = this,
      b = {},
      e = a.getNewRecords(),
      f = a.getUpdatedRecords(),
      d = a.getRemovedRecords(),
      c = !1;
    if (e.length > 0) {
      b.create = e;
      c = !0;
    }
    if (f.length > 0) {
      b.update = f;
      c = !0;
    }
    if (d.length > 0) {
      b.destroy = d;
      c = !0;
    }
    if (c && a.fireEvent("beforesync", this, b) !== !1) {
      a.getProxy().batch({
        operations: b,
        listeners: a.getBatchListeners(),
        callback: function () {
          a.fireEvent("aftersync", this);
        },
      });
    }
    return { added: e, updated: f, removed: d };
  },
});
function Id(a, b) {
  return parseInt(a, 10);
}
function getFormattedNumeric(c, b, d) {
  if (Ext.isDefined(c.get(b))) {
    var a = c.get(b),
      e = c.getFields().findBy(function (a) {
        return a.getName() == b;
      });
    if (!a && e && e.getAllowNull()) {
      return "";
    }
    if (a && Ext.isDefined(d)) {
      a = parseFloat(a.toFixed(d));
    }
    return Me.getFormattedNumeric(a);
  }
  return "";
}
Ext.define("MEM.model.Base", {
  extend: Ext.data.Model,
  config: {
    useCache: !1,
    idProperty: "Id",
    fields: [
      { name: "Id", type: "int", useNull: !0, convert: Id },
      { name: "Created", type: "date", persist: !1 },
      { name: "CreatedId", type: "string", persist: !1 },
      { name: "Changed", type: "date", persist: !1 },
      { name: "ChangedId", type: "string", persist: !1 },
      { name: "Disabled", type: "boolean", defaultValue: !1 },
      { name: "isField", type: "boolean", defaultValue: !1 },
      { name: "isTmpRec", type: "boolean", defaultValue: !1 },
    ],
  },
  convertProductionStartDateDisplay: function (c, b) {
    var a = b.get("ProductionStart");
    if (a) {
      return Ext.Date.format(a, "Y-m-d");
    }
    return "";
  },
  convertProductionStartWeekDay: function (c, b) {
    var a = b.get("ProductionStart");
    if (a) {
      switch (a.getDay()) {
        case 1:
          return T("Monday");
          break;
        case 2:
          return T("Tuesday");
          break;
        case 3:
          return T("Wednesday");
          break;
        case 4:
          return T("Thursday");
          break;
        case 5:
          return T("Friday");
          break;
        case 6:
          return T("Saturday");
          break;
        case 0:
          return T("Sunday");
          break;
      }
    }
    return "";
  },
  convertProductionStartTimeDisplay: function (b, a) {
    return this.timeDisplay(b, a, "ProductionStart");
  },
  timeDisplay: function (d, b, c) {
    var a = b.get(c);
    if (a) {
      return Ext.Date.format(a, "H:i");
    }
    return "";
  },
  getScannedUrl: function () {
    var a = this.get("ScannedUrl");
    if (Ext.isString(a) && a.startsWith("../../cgi/me.cgi/api/")) {
      a = a.replace("../../", "../");
    }
    if (a) {
      return a;
    }
    if (this.get("SupplierInvoiceId")) {
      return Ext.String.format(
        "{0}supplierInvoiceDocument?type=binary&SupplierInvoiceId={1}",
        Me.API_URL,
        this.get("SupplierInvoiceId")
      );
    }
    return null;
  },
});
Ext.define("MEM.model.AccountChart", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "AccountNo", type: "string", meType: "meShortText", max: 5 },
      {
        name: "Account",
        type: "string",
        meType: "meShortText",
        max: 5,
        convert: function (b, a) {
          return a.get("AccountNo") + " " + a.get("Description");
        },
      },
      { name: "Description", type: "string", meType: "meMediumText", max: 50 },
      { name: "Cost", type: "bool", meType: "meBool" },
      { name: "Work", type: "bool", meType: "meBool" },
      { name: "Material", type: "bool", meType: "meBool" },
      { name: "VatCode", type: "string", meType: "meShortText", max: 10 },
      {
        name: "ComplementAccount",
        type: "string",
        meType: "meShortText",
        max: 5,
      },
      { name: "VatDuty", type: "bool", meType: "meBool" },
      { name: "InvoiceOnImport", type: "bool", meType: "meBool" },
      { name: "RotShare", type: "int", meType: "meInt" },
    ],
  },
});
Ext.define("MEM.store.MyAccountChartStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.AccountChart",
    storeId: "MyAccountChartStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sortOnLoad: !0,
    sorters: [{ property: "AccountNo", directon: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "AccountChartStore" },
  },
});
Ext.define("MEM.model.AdditionalWorkOrderRow", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int" },
      { name: "RowType", type: "string", max: 1 },
      { name: "CodeNo", type: "string", max: 10 },
      { name: "Title", type: "string", max: 50 },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "PlannedQty", type: "float" },
      { name: "UsedQty", type: "float" },
      { name: "CostUnit", type: "float" },
      { name: "PriceUnit", type: "float" },
      { name: "Amount", type: "float", defaultValue: 1 },
      { name: "DeliveryDate", type: "date", useNull: !0, persist: !1 },
      { name: "ReturnDate", type: "date", useNull: !0, persist: !1 },
      { name: "PerformedDate", type: "date", useNull: !0, persist: !1 },
      { name: "PerformedUserId", type: "int", useNull: !0, persist: !1 },
      { name: "Comment", type: "string" },
      { name: "RowFormat", type: "string", max: 3, persist: !1 },
      { name: "RowStatus", type: "string", max: 1, persist: !1 },
      { name: "DiaryId", type: "int", persist: !1 },
      { name: "TimeId", type: "int", persist: !1 },
      { name: "Invoiced", type: "bool", persist: !1 },
    ],
  },
});
Ext.define("MEM.store.MyAdditionalWorkOrderRowStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.AdditionalWorkOrderRow",
    storeId: "MyAdditionalWorkOrderRowStore",
    remoteFilter: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "AdditionalWorkOrderRowStore",
    },
  },
});
Ext.define("MEM.model.AdditionalWorkOrderStatus", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "StatusName", type: "string", max: 50 },
      { name: "StatusCode", type: "int" },
      { name: "StatusColor", type: "string", max: 20 },
    ],
  },
});
Ext.define("MEM.store.MyAdditionalWorkOrderStatusStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.AdditionalWorkOrderStatus",
    storeId: "MyAdditionalWorkOrderStatusStore",
    remoteFilter: !1,
    remoteSort: !0,
    sorters: [{ property: "StatusCode", directon: "ASC" }],
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "AdditionalWorkOrderStatusStore",
    },
  },
});
Ext.define("MEM.model.AdditionalWorkOrder", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int", meType: "meMediumText" },
      {
        name: "WorkOrderNo",
        type: "int",
        meType: "meShortText",
        persist: !1,
        readOnly: !0,
        useNull: !0,
      },
      { name: "Addition", type: "bool", meType: "meBool" },
      { name: "Name", type: "string", meType: "meMediumText", max: 50 },
      { name: "WorkDescription", type: "string", meType: "meLongText" },
      { name: "WorkFeedback", type: "string", meType: "meMediumText" },
      {
        name: "WorkplaceAddress",
        type: "string",
        meType: "meMediumText",
        persist: !1,
      },
      {
        name: "GpsX",
        type: "int",
        meType: "meShortText",
        persist: !1,
        useNull: !0,
      },
      {
        name: "GpsY",
        type: "int",
        meType: "meShortText",
        persist: !1,
        useNull: !0,
      },
      {
        name: "District",
        type: "string",
        meType: "meMediumText",
        persist: !1,
        max: 50,
      },
      {
        name: "ResponsibleServiceId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
      },
      {
        name: "ResponsibleForemanId",
        type: "int",
        meType: "meMediumText",
        persist: !1,
        useNull: !0,
      },
      { name: "CreditRisk", type: "boolean" },
      { name: "CustomerId", type: "int", meType: "meMediumText", useNull: !0 },
      { name: "CustomerName", type: "string" },
      {
        name: "CustomerAgentId",
        type: "int",
        meType: "meMediumText",
        persist: !1,
        useNull: !0,
      },
      { name: "ContactName", type: "string", max: 50, persist: !1 },
      {
        name: "CustomerRefNo",
        type: "string",
        meType: "meMediumText",
        persist: !1,
        max: 50,
      },
      {
        name: "WorkOrderStatusId",
        type: "int",
        meType: "meMediumText",
        persist: !1,
      },
      {
        name: "ProductionStart",
        type: "date",
        dateFormat: "Y-m-d\\TH:i:s",
        meType: "meDate",
        persist: !1,
        useNull: !0,
      },
      {
        name: "ProductionEnd",
        type: "date",
        dateFormat: "Y-m-d\\TH:i:s",
        meType: "meDate",
        persist: !1,
        useNull: !0,
      },
      {
        name: "ProductionStartClock",
        type: "date",
        meType: "meTime",
        persist: !1,
        dateFormat: "time",
        useNull: !0,
      },
      {
        name: "ProductionEndClock",
        type: "date",
        meType: "meTime",
        persist: !1,
        dateFormat: "time",
        useNull: !0,
      },
      {
        name: "OrderDate",
        type: "date",
        meType: "medate",
        dateFormat: "Y-m-d",
      },
      {
        name: "ReportSign",
        type: "string",
        meType: "meShortText",
        persist: !1,
        max: 50,
      },
      {
        name: "ReportTimestamp",
        type: "string",
        meType: "meTimeStamp",
        persist: !1,
      },
      {
        name: "Invoiced",
        type: "bool",
        meType: "meBool",
        persist: !1,
        defaultValue: !1,
      },
      {
        name: "InvoiceDate",
        type: "date",
        meType: "meDate",
        persist: !1,
        useNull: !0,
      },
      {
        name: "InvoiceId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        persist: !1,
      },
      {
        name: "CachedWorkCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        persist: !1,
        readOnly: !0,
      },
      {
        name: "CachedWorkRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        persist: !1,
        readOnly: !0,
      },
      { name: "AdditionStatusId", type: "int", meType: "meMediumText" },
      {
        name: "AdditionStatusCode",
        type: "int",
        sortable: !0,
        persist: !1,
        sortType: "asInt",
        convert: function (d, b) {
          var c = Ext.getStore("MyAdditionalWorkOrderStatusStore"),
            a;
          a = c.findRecord("Id", b.get("AdditionStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusCode");
          }
          return "";
        },
      },
      {
        name: "AdditionStatus",
        type: "string",
        sortable: !0,
        persist: !1,
        sortType: "asString",
        convert: function (d, b) {
          var c = Ext.getStore("MyAdditionalWorkOrderStatusStore"),
            a;
          a = c.findRecord("Id", b.get("AdditionStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusName");
          }
          return "";
        },
      },
      {
        name: "ConstructionTypeId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
      },
      {
        name: "BudgetLevelId",
        type: "int",
        meType: "meMediumText",
        persist: !1,
      },
      {
        name: "MarkupModelId",
        type: "int",
        meType: "meShortText",
        persist: !1,
        useNull: !0,
      },
      {
        name: "OrderAmount",
        type: "float",
        meType: "meMoney",
        persist: !1,
        useNull: !0,
      },
      { name: "FixedPrice", type: "bool", meType: "meBool", defaultValue: !0 },
      {
        name: "CostProjectId",
        type: "int",
        meType: "meMediumText",
        persist: !1,
        useNull: !0,
      },
      {
        name: "MarkUpTotal",
        type: "float",
        meType: "meMoney",
        persist: !1,
        readOnly: !0,
        useNull: !0,
      },
      {
        name: "TenderTotal",
        type: "float",
        meType: "meMoney",
        persist: !1,
        readOnly: !0,
        useNull: !0,
      },
      {
        name: "BookedCostTotal",
        type: "float",
        meType: "meMoney",
        persist: !1,
        readOnly: !0,
        useNull: !0,
      },
      {
        name: "BookedHoursTotal",
        type: "float",
        meType: "meMoney",
        persist: !1,
        readOnly: !0,
        useNull: !0,
      },
      { name: "PriceTypeId", type: "int", meType: "meMediumText", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyAdditionalWorkOrderStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.AdditionalWorkOrder",
    storeId: "MyAdditionalWorkOrderStore",
    autoLoad: !1,
    remoteFilter: !1,
    remoteSort: !1,
    autoSync: !1,
    grouper: {
      groupFn: function (a) {
        return "";
      },
      sortProperty: "AdditionStatus",
    },
    sorters: [
      { property: "AdditionStatusCode", direction: "ASC" },
      { property: "WorkOrderNo", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "AdditionalWorkOrderStore" },
  },
});
Ext.define("MEM.model.ArticleCustomer", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (d, a) {
          var c = Ext.getStore("MyItemUnitStore");
          var b;
          b = c.findRecord("Id", a.get("ItemUnitId"));
          if (b) {
            return a.get("Description") + " (" + b.get("Description") + ")";
          } else {
            return a.get("Description");
          }
        },
      },
      { name: "CustomerId", type: "int" },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
    ],
  },
  get: function (a) {
    switch (a) {
      case "ArticleId":
        return this.get("Id");
        break;
      default:
        return this.callParent(arguments);
        break;
    }
  },
});
Ext.define("MEM.store.MyArticleCustomerStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ArticleCustomer",
    storeId: "MyArticleCustomerStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ArticleCustomerStore" },
  },
});
Ext.define("MEM.model.ArticleCategory", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "Name", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyArticleCategoryStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myarticlecategorystorealias",
  config: {
    model: "MEM.model.ArticleCategory",
    storeId: "MyArticleCategoryStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ArticleCategoryStore" },
  },
});
Ext.define("MEM.model.WorkOrderRow", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int" },
      { name: "RowType", type: "string", max: 1, defaultValue: "" },
      { name: "ArticleId", type: "int" },
      { name: "BasePriceUsed", type: "bool" },
      { name: "CostUnitPricelist", type: "string", max: 50, defaultValue: "" },
      { name: "PriceUnitPricelist", type: "string", max: 50, defaultValue: "" },
      {
        name: "PayoffUnitPricelist",
        type: "string",
        max: 50,
        defaultValue: "",
      },
      { name: "CodeNo", type: "string", max: 10, defaultValue: "" },
      { name: "Title", type: "string", max: 128000, defaultValue: "" },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "PlannedQty", type: "float" },
      { name: "Days", type: "float" },
      { name: "StartQty", type: "float" },
      { name: "EndQty", type: "float" },
      { name: "UsedQty", type: "float" },
      { name: "CostUnit", type: "float" },
      { name: "PriceUnit", type: "float" },
      { name: "Amount", type: "float", defaultValue: 1 },
      { name: "DeliveryDate", type: "date", useNull: !0, dateFormat: "Y-m-d" },
      { name: "ReturnDate", type: "date", useNull: !0, dateFormat: "Y-m-d" },
      { name: "PerformedDate", type: "date", useNull: !0, dateFormat: "Y-m-d" },
      { name: "PerformedUserId", type: "int", useNull: !0 },
      { name: "Comment", type: "string", defaultValue: "" },
      { name: "RowFormat", type: "string", max: 3 },
      { name: "RowStatus", type: "string", max: 1 },
      { name: "DiaryId", type: "int" },
      { name: "TimeId", type: "int", useNull: !0 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
      { name: "Invoiced", type: "bool", defaultValue: !1, persist: !1 },
      { name: "IsPaidOff", type: "bool", defaultValue: !1, persist: !1 },
      { name: "ParentIsReadOnly", type: "bool", defaultValue: !1, persist: !1 },
      {
        name: "Locked",
        type: "bool",
        convert: function (b, a) {
          return (
            a.get("Invoiced") || a.get("IsPaidOff") || a.get("ParentIsReadOnly")
          );
        },
      },
      { name: "CreditProjectId", type: "int", useNull: !0 },
      { name: "ResourceId", type: "int", useNull: !0 },
      { name: "FactoryPricelistId", type: "int", useNull: !0 },
      { name: "ArticleCategoryId", type: "int", useNull: !0 },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      {
        name: "PlannedQty_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "PlannedQty");
        },
      },
      {
        name: "Days_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "Days");
        },
      },
      {
        name: "UsedQty_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "UsedQty");
        },
      },
      { name: "KPIValue", type: "float", allowNull: !0, persist: !1 },
      {
        name: "KPIValue_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "KPIValue", 1, this);
        },
      },
      { name: "RelatedWorkOrderRowId", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyArticleDataStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myarticledatastorealias",
  config: {
    model: "MEM.model.WorkOrderRow",
    storeId: "MyArticleDataStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ArticleDataStore" },
  },
});
Ext.define("MEM.model.Article", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (c, a) {
          var b = Ext.getStore("MyItemUnitStore").getById(a.get("ItemUnitId"));
          return (
            a.get("Description") + (b ? " (" + b.get("UnitName") + ")" : "")
          );
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "CostUnit", type: "float" },
      { name: "PriceUnit", type: "float" },
      { name: "CreditProjectId", type: "int", useNull: !0 },
      { name: "ArticleCategoryId", type: "int", useNull: !0 },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
      { name: "WorkOrderId", type: "int", useNull: !0 },
      { name: "WorkOrderProjectId", type: "int", useNull: !0 },
      { name: "HasKPIRelation", type: "bool", defaultValue: !1 },
      { name: "IsKPIRecord", type: "bool", defaultValue: !1 },
    ],
  },
  get: function (a) {
    switch (a) {
      case "ArticleId":
        return this.get("Id");
        break;
      default:
        return this.callParent(arguments);
        break;
    }
  },
});
Ext.define("MEM.store.MyArticleStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myarticlestorealias",
  config: {
    model: "MEM.model.Article",
    storeId: "MyArticleStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ArticleStore" },
  },
});
Ext.define("MEM.model.ChecklistDiary", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "DiaryId", type: "int", meType: "meMediumText" },
      {
        name: "ItemNo",
        type: "string",
        meType: "meShortText",
        max: 50,
        useNull: !0,
      },
      {
        name: "ItemDescription",
        type: "string",
        meType: "meLongText",
        max: 255,
      },
      { name: "Checked", type: "bool", meType: "meBool" },
      {
        name: "CheckDate",
        type: "date",
        meType: "meDate",
        readOnly: !0,
        dateFormat: "Y-m-d",
      },
      {
        name: "CheckedById",
        type: "int",
        meType: "meInt",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "CheckNote",
        type: "string",
        meType: "meLongText",
        max: 255,
        convert: function (a, b) {
          if (null == a) {
            return "";
          } else {
            return a;
          }
        },
      },
    ],
    validations: [
      { type: "presence", field: "ItemNo" },
      { type: "presence", field: "ItemDescription" },
    ],
  },
});
Ext.define("MEM.store.MyChecklistDiaryStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ChecklistDiary",
    storeId: "MyChecklistDiaryStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ChecklistDiaryStore" },
  },
});
Ext.define("MEM.model.ChecklistRow", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int", meType: "meMediumText" },
      {
        name: "ItemNo",
        type: "string",
        meType: "meShortText",
        max: 50,
        useNull: !0,
      },
      {
        name: "ItemDescription",
        type: "string",
        meType: "meLongText",
        max: 255,
      },
      { name: "Checked", type: "bool", meType: "meBool" },
      {
        name: "CheckDate",
        type: "date",
        meType: "meDate",
        readOnly: !0,
        dateFormat: "Y-m-d",
      },
      {
        name: "CheckedById",
        type: "int",
        meType: "meInt",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "CheckNote",
        type: "string",
        meType: "meLongText",
        max: 255,
        convert: function (a, b) {
          if (null == a) {
            return "";
          } else {
            return a;
          }
        },
      },
    ],
    validations: [
      { type: "presence", field: "ItemNo" },
      { type: "presence", field: "ItemDescription" },
    ],
  },
});
Ext.define("MEM.store.MyChecklistRowStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ChecklistRow",
    storeId: "MyChecklistRowStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ChecklistRowStore" },
  },
});
Ext.define("MEM.model.ConstructionType", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "TypeName", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyConstructionTypeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ConstructionType",
    storeId: "MyConstructionTypeStore",
    autoLoad: !1,
    sorters: [{ property: "TypeName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ConstructionTypeStore" },
  },
});
Ext.define("MEM.model.Cost", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "VerificationNo", type: "string", max: 50 },
      { name: "TransactionNote", type: "string", max: 255 },
      { name: "ProjectId", type: "int" },
      { name: "WorkOrderId", type: "int", useNull: !0 },
      {
        name: "WorkOrderNo",
        type: "int",
        useNull: !0,
        convert: function (d, b) {
          var c = Ext.getStore("MyWorkOrderListStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderId"), 0, !1, !0, !0);
          if (a) {
            if (a.get("Addition")) {
              return AWOpad(a.get("WorkOrderNo"), 3);
            } else {
              return a.get("WorkOrderNo");
            }
          }
          return "";
        },
      },
      {
        name: "WorkOrderName",
        type: "int",
        useNull: !0,
        convert: function (d, b) {
          var c = Ext.getStore("MyWorkOrderListStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderId"), 0, !1, !0, !0);
          if (a) {
            return a.get("Name");
          }
          return "";
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "Invoiceable", type: "bool" },
      { name: "LedgerDate", type: "date" },
      {
        name: "InvoiceAmount",
        type: "float",
        convert: function (a, b) {
          return Math.round(a == null ? 0 : a);
        },
      },
      {
        name: "CustomerPrice",
        type: "float",
        convert: function (a, b) {
          return Math.round(a == null ? 0 : a);
        },
      },
      { name: "MarkupAmount", type: "float" },
      { name: "CustomerNo", type: "string", max: 50, useNull: !0 },
      { name: "RevenueTransaction", type: "bool" },
      { name: "Invoiced", type: "bool" },
      { name: "InvoiceId", type: "int", useNull: !0 },
      { name: "TransactionType", type: "string", max: 1 },
      { name: "ExtInvoiceNo", type: "string", max: 20, useNull: !0 },
      { name: "IsScanned", type: "bool" },
      {
        name: "ScannedUrl",
        type: "string",
        max: 255,
        useNull: !0,
        convert: function (b, a) {
          return a.getScannedUrl();
        },
      },
      { name: "SupplierInvoiceId", type: "int", allowNull: !0 },
      { name: "ApprovedByProduction", type: "bool" },
      { name: "Locked", type: "bool" },
      { name: "ExtVerificationId", type: "string", max: 50, useNull: !0 },
      { name: "Notes", type: "string", max: 255, useNull: !0 },
      { name: "Mark1", type: "string", max: 255, useNull: !0 },
      { name: "Mark2", type: "string", max: 255, useNull: !0 },
      {
        name: "VatAmount",
        type: "float",
        convert: function (a, b) {
          return Math.round(a == null ? 0 : a);
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyCostStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Cost",
    storeId: "MyCostStore",
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "CostStore" },
  },
});
Ext.define("MEM.model.Currency", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CurrencyCode", type: "string", max: 3 },
      { name: "Currency", type: "string", max: 50 },
      { name: "Xrate", type: "float" },
      { name: "Base", type: "boolean" },
    ],
  },
});
Ext.define("MEM.store.MyCurrencyStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Currency",
    storeId: "MyCurrencyStore",
    autoLoad: !1,
    sorters: [{ property: "CurrencyCode", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "CurrencyStore" },
  },
});
Ext.define("MEM.model.CustomerContact", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CustomerId", type: "int" },
      { name: "ContactName", type: "string", max: 50 },
      { name: "Mobile", type: "string", max: 30 },
      { name: "Phone", type: "string", max: 30 },
      { name: "Email", type: "string", max: 50 },
      { name: "OrganizationNo", type: "string", max: 12 },
      { name: "CustomerRef", type: "string", max: 50 },
      { name: "DefaultExternalWorkOrderStatusId", type: "int", useNull: !0 },
      { name: "isSelected", type: "bool", persist: !1, defaultValue: !1 },
    ],
    validations: [{ type: "email", field: "Email" }],
  },
});
Ext.define("MEM.store.MyCustomerContactStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mycustomercontactstorealias",
  config: {
    model: "MEM.model.CustomerContact",
    storeId: "MyCustomerContactStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "ContactName", direction: "ASC" }],
    syncRemovedRecords: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "CustomerContactStore" },
    filters: [{ property: "Disabled", value: !1 }],
  },
});
Ext.define("MEM.model.CustomerList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CustomerNo", type: "string", max: 50, allowBlank: !1 },
      { name: "CustomerName", type: "string", max: 50, allowBlank: !1 },
      { name: "CreditRisk", type: "boolean" },
      {
        name: "CustomerId",
        type: "int",
        persist: !1,
        convert: function (b, a) {
          return a.get("Id");
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyCustomerListStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.CustomerList",
    storeId: "MyCustomerListStore",
    remoteFilter: !1,
    remoteSort: !1,
    sorters: [
      { property: "CustomerName", direction: "ASC" },
      { property: "CustomerNo", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "CustomerListStore" },
  },
});
Ext.define("MEM.model.CustomerPricelistItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CustomerId", type: "int", meType: "meMediumText", useNull: !0 },
      {
        name: "ProfessionItemId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
      },
      { name: "PriceUnit", type: "float", meType: "meMoney" },
    ],
  },
});
Ext.define("MEM.store.MyCustomerPricelistItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.CustomerPricelistItem",
    storeId: "MyCustomerPricelistItemStore",
    autoLoad: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "CustomerPricelistItemStore",
    },
  },
});
Ext.define("MEM.model.Customer", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CustomerNo", type: "string", max: 50, allowBlank: !1 },
      { name: "CustomerName", type: "string", max: 50, allowBlank: !1 },
      { name: "OrganizationNo", type: "string", max: 15 },
      { name: "BillAddress1", type: "string", max: 50 },
      { name: "BillAddress2", type: "string", max: 50 },
      { name: "BillAddress3", type: "string", max: 50 },
      { name: "BillAddress4", type: "string", max: 50 },
      { name: "BillAddress5", type: "string", max: 50 },
      { name: "BillAddress6", type: "string", max: 50 },
      { name: "Email", type: "string", max: 255 },
      { name: "WebAddress", type: "string", max: 255 },
      { name: "Phone", type: "string", max: 30 },
      { name: "Mobile", type: "string", max: 30 },
      { name: "Fax", type: "string", max: 30 },
      { name: "EdiAddress", type: "string", max: 255 },
      { name: "CustomerNote", type: "string" },
      { name: "CustomerName2", type: "string", max: 50 },
      { name: "OrganizationNo2", type: "string", max: 15 },
      { name: "ConstructionCompany", type: "boolean" },
      { name: "SupplierNo", type: "string", max: 50 },
      { name: "CustomerTypeId", type: "int" },
      { name: "CurrencyId", type: "int" },
      { name: "PaymentTermsCode", type: "string", max: 10 },
      { name: "Iban", type: "string", max: 34 },
      { name: "SwiftBic", type: "string", max: 11 },
      { name: "BankName", type: "string", max: 50 },
      { name: "BankAccountNo", type: "string", max: 50 },
      { name: "ClearingNo", type: "string", max: 4 },
      { name: "EanCode", type: "string", max: 50 },
      { name: "VatNo", type: "string", max: 20 },
      { name: "CountryCode", type: "string", max: 2 },
      { name: "PropertyName", type: "string", max: 50 },
      { name: "HousingCooperativeOrgNo", type: "string", max: 15 },
      { name: "ApartmentNo", type: "string", max: 10 },
      { name: "InfoNoteId", type: "int", useNull: !0, persist: !1 },
      { name: "CreditRisk", type: "boolean" },
      { name: "DefaultExternalWorkOrderStatusId", type: "int", useNull: !0 },
      { name: "HasFavorites", type: "boolean" },
      { name: "FrameworkContractId", type: "int", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyCustomerStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mycustomerstorealias",
  config: {
    model: "MEM.model.Customer",
    storeId: "MyCustomerStore",
    remoteFilter: !1,
    remoteSort: !1,
    sorters: [
      { property: "CustomerName", direction: "ASC" },
      { property: "CustomerNo", direction: "ASC" },
    ],
    grouper: {
      groupFn: function (a) {
        return a.get("CustomerName").substr(0, 1);
      },
    },
    proxy: { type: "myproxy", url: Me.STORE_URL + "CustomerStore" },
  },
});
Ext.define("MEM.model.CustomerType", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "TypeName", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyCustomerTypeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.CustomerType",
    storeId: "MyCustomerTypeStore",
    autoLoad: !1,
    sorters: [{ property: "TypeName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "CustomerTypeStore" },
  },
});
Ext.define("MEM.model.Diary", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "RegDate", type: "string", meType: "meDate" },
      { name: "ProjectId", type: "int", meType: "meMediumText" },
      { name: "CurrentWork", type: "string", meType: "meMediumText" },
      { name: "FinishedWork", type: "string", meType: "meMediumText" },
      { name: "WorkProblems", type: "string", meType: "meMediumText" },
      { name: "ChangeAdditionNotes", type: "string", meType: "meMediumText" },
      {
        name: "Time1",
        type: "date",
        meType: "meTimeStamp",
        dateFormat: "Y-m-d\\TH:i:s",
      },
      {
        name: "Time1Display",
        type: "string",
        meType: "meTimeStamp",
        persist: !1,
        convert: function (b, a) {
          return a.timeDisplay(b, a, "Time1");
        },
      },
      { name: "Temperature1", type: "float", meType: "meQty" },
      { name: "Precipitation1", type: "string", meType: "meMediumText" },
      {
        name: "Time2",
        type: "date",
        meType: "meTimeStamp",
        dateFormat: "Y-m-d\\TH:i:s",
      },
      {
        name: "Time2Display",
        type: "string",
        meType: "meTimeStamp",
        persist: !1,
        convert: function (b, a) {
          return a.timeDisplay(b, a, "Time2");
        },
      },
      { name: "Temperature2", type: "float", meType: "meQty" },
      { name: "Precipitation2", type: "string", meType: "meMediumText" },
      { name: "WorkforceCount", type: "int", meType: "meInt" },
      { name: "WorkforceNotes", type: "string", meType: "meMediumText" },
      { name: "HasStaffLog", type: "boolean" },
      { name: "UserId", type: "int", useNull: !0 },
      { name: "KPIName", type: "string" },
      { name: "MaterialTemp1", type: "float", meType: "meQty", useNull: !0 },
      { name: "MaterialTemp2", type: "float", meType: "meQty", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyDiaryStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mydiarystorealias",
  config: {
    model: "MEM.model.Diary",
    storeId: "MyDiaryStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "DiaryStore" },
  },
});
Ext.define("MEM.model.ExternalWorkOrderStatus", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "StatusName", type: "string", max: 50 },
      { name: "StatusCode", type: "int" },
      { name: "StatusColor", type: "string", max: 20 },
      { name: "IsDefaultStatus", type: "bool", defaultValue: !1 },
      { name: "IsSignatureStatus", type: "bool", defaultValue: !1 },
    ],
  },
});
Ext.define("MEM.store.MyExternalWorkOrderStatusStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myexternalworkorderstatusstorealias",
  config: {
    model: "MEM.model.ExternalWorkOrderStatus",
    storeId: "MyExternalWorkOrderStatusStore",
    remoteFilter: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "ExternalWorkOrderStatusStore",
    },
  },
});
Ext.define("MEM.model.FactoryPricelist", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "Name", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyFactoryPricelistStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myfactorypriceliststorealias",
  config: {
    model: "MEM.model.FactoryPricelist",
    storeId: "MyFactoryPricelistStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FactoryPricelistStore" },
  },
});
Ext.define("MEM.model.FactoryArticleItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "FactoryPricelistId", type: "int" },
      { name: "ArticleId", type: "int", useNull: !0 },
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (c, a) {
          var b = Ext.getStore("MyItemUnitStore").findRecord(
            "Id",
            a.get("ItemUnitId")
          );
          return (
            a.get("Description") + (b ? " (" + b.get("UnitName") + ")" : "")
          );
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "CostUnit", type: "float" },
      { name: "PriceUnit", type: "float" },
    ],
  },
});
Ext.define("MEM.store.MyFactoryArticleItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myfactoryarticleitemstorealias",
  config: {
    model: "MEM.model.FactoryArticleItem",
    storeId: "MyFactoryArticleItemStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FactoryArticleItemStore" },
  },
});
Ext.define("MEM.model.FrameworkContract", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Name", type: "string", max: 50 },
      { name: "CustomerId", type: "int" },
      { name: "LimitArticles", type: "bool" },
    ],
  },
});
Ext.define("MEM.store.MyFrameworkContractStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myframeworkcontractstorealias",
  config: {
    model: "MEM.model.FrameworkContract",
    storeId: "MyFrameworkContractStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FrameworkContractStore" },
  },
});
Ext.define("MEM.model.FrameworkArticleItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "FrameworkContractId", type: "int" },
      { name: "ArticleId", type: "int", useNull: !0 },
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (c, a) {
          var b = Ext.getStore("MyItemUnitStore").getById(a.get("ItemUnitId"));
          return (
            a.get("Description") + (b ? " (" + b.get("UnitName") + ")" : "")
          );
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "CostUnit", type: "float" },
      { name: "PriceUnit", type: "float" },
      { name: "CreditProjectId", type: "int", useNull: !0 },
      { name: "ArticleCategoryId", type: "int", useNull: !0 },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
    ],
  },
});
Ext.define("MEM.store.MyFrameworkArticleItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myframeworkarticleitemstorealias",
  config: {
    model: "MEM.model.FrameworkArticleItem",
    storeId: "MyFrameworkArticleItemStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FrameworkArticleItemStore" },
  },
});
Ext.define("MEM.model.FormValidation", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "StoreName", type: "string", max: 50 },
      { name: "FieldName", type: "string", max: 50 },
      { name: "AllowBlank", type: "boolean" },
      { name: "ValidationType", type: "string", max: 50 },
      { name: "RegEx", type: "string", max: 1000 },
      { name: "Hidden", type: "boolean" },
    ],
  },
});
Ext.define("MEM.store.MyFormValidationStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.FormValidation",
    storeId: "MyFormValidationStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "FormValidationStore" },
  },
});
Ext.define("MEM.model.Group", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "GroupName", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyGroupStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Group",
    storeId: "MyGroupStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "GroupStore" },
  },
});
Ext.define("MEM.model.HourlyRate2", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "ProfessionCode",
        type: "string",
        meType: "meShortText",
        max: 20,
      },
      {
        name: "ProfessionDescription",
        type: "string",
        meType: "meMediumText",
        max: 50,
      },
      { name: "ItemUnitId", type: "int", meType: "meMediumText", useNull: !0 },
      { name: "PriceUnit", type: "float", meType: "meMoney" },
      { name: "CostUnit", type: "float", meType: "meMoney" },
      { name: "AccountNo", type: "string", meType: "meShortText", max: 5 },
      { name: "SalaryNo", type: "string", meType: "meShortText", max: 10 },
      { name: "CustomerPriceUnit", type: "float", meType: "meMoney" },
      { name: "ProjectPriceUnit", type: "float", meType: "meMoney" },
    ],
  },
});
Ext.define("MEM.store.MyHourlyRate2Store", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.HourlyRate2",
    storeId: "MyHourlyRate2Store",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "HourlyRate2Store" },
  },
});
Ext.define("MEM.model.HourlyRate", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProfessionItemId", type: "int" },
      { name: "ProfessionCode", type: "string", max: 20 },
      { name: "ProfessionDescription", type: "string", max: 50 },
      { name: "PriceUnit", type: "float" },
      { name: "UnitName", type: "string", max: 50 },
      { name: "CustomerPrice", type: "float" },
      { name: "ProjectPrice", type: "float" },
    ],
  },
});
Ext.define("MEM.store.MyHourlyRateStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.HourlyRate",
    storeId: "MyHourlyRateStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "HourlyRateStore" },
  },
});
Ext.define("MEM.model.InfoMessage", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "Date",
        type: "string",
        convert: function (b, a) {
          return Ext.Date.format(a.get("Created"), "Y-m-d");
        },
      },
      { name: "Message", type: "string" },
      { name: "ShowInMobile", type: "bool" },
      { name: "GroupId", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyInfoMessageStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.InfoMessage",
    storeId: "MyInfoMessageStore",
    sorters: [{ property: "Created", direction: "DESC" }],
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "InfoMessageStore" },
  },
});
Ext.define("MEM.model.InfoNote", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "TableName", type: "string", max: 50 },
      { name: "TableId", type: "int" },
      { name: "UserId", type: "int" },
      { name: "Note", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyInfoNoteStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.InfoNote",
    storeId: "MyInfoNoteStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "InfoNoteStore" },
  },
});
Ext.define("MEM.model.InvoiceRow", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "InvoiceId", type: "int" },
      { name: "RowNo", type: "int" },
      { name: "RowType", type: "string", max: 1 },
      { name: "CodeNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      { name: "Unit", type: "string", max: 5 },
      { name: "Amount", type: "int" },
      { name: "PriceUnit", type: "float" },
      { name: "Markup", type: "int" },
      {
        name: "TotalPrice",
        type: "float",
        persist: !1,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("Amount") * a.get("PriceUnit");
        },
      },
      { name: "RowFormat", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyInvoiceRowStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.InvoiceRow",
    storeId: "MyInvoiceRowStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "InvoiceRowStore" },
  },
});
Ext.define("MEM.model.Invoice", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "InvoiceId", type: "int" },
      { name: "RowNo", type: "int" },
      { name: "RowType", type: "string", max: 1 },
      { name: "CodeNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      { name: "Unit", type: "string", max: 5 },
      { name: "Amount", type: "int" },
      { name: "PriceUnit", type: "float" },
      { name: "Markup", type: "int" },
      {
        name: "TotalPrice",
        type: "float",
        persist: !1,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("Amount") * a.get("PriceUnit");
        },
      },
      { name: "RowFormat", type: "string" },
    ],
    validations: [
      {
        type: "custom",
        field: "InvoiceTotal",
        validate: function (b, a) {
          return a.get("TaxReductionAmount") <= b;
        },
        message:
          "Tax Reduction Amount should be less or equeal to Invoice Total value.",
      },
    ],
  },
});
Ext.define("MEM.store.MyInvoiceStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Invoice",
    storeId: "MyInvoiceStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "InvoiceStore" },
  },
});
Ext.define("MEM.model.ItemUnit", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UnitName", type: "string", max: 10 },
      { name: "Description", type: "string", max: 10 },
    ],
  },
});
Ext.define("MEM.store.MyItemUnitStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ItemUnit",
    storeId: "MyItemUnitStore",
    autoLoad: !1,
    sorters: [{ property: "UnitName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ItemUnitStore" },
  },
});
Ext.define("MEM.model.MainMenu", {
  extend: Ext.data.Model,
  config: {
    fields: [
      { name: "MenuText" },
      { name: "ShortMenuText" },
      { name: "View" },
      { name: "Store" },
      { name: "Active" },
      { name: "Picto" },
      { name: "Title" },
    ],
  },
});
Ext.define("MEM.store.MyMainMenuStore", {
  extend: Ext.data.Store,
  alias: "store.mainmenustore",
  config: {
    autoLoad: !1,
    model: "MEM.model.MainMenu",
    storeId: "MyMainMenuStore",
    filters: new Ext.util.Filter({ property: "Active", value: "true" }),
    proxy: { type: "rest", url: "app/data/MainMenu.json" },
  },
});
Ext.define("MEM.model.MarkupModelItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "MarkupModelId", type: "int" },
      { name: "ResourceAccount", type: "string", max: 5 },
      { name: "Description", type: "string", max: 50 },
      { name: "MarkupCF", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyMarkupModelItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.MarkupModelItem",
    storeId: "MyMarkupModelItemStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "MarkupModelItemStore" },
  },
});
Ext.define("MEM.model.MarkupModel", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Name", type: "string", max: 50 },
      { name: "Code", type: "string", max: 10 },
    ],
  },
});
Ext.define("MEM.store.MyMarkupModelStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.MarkupModel",
    storeId: "MyMarkupModelStore",
    remoteFilter: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "MarkupModelStore" },
  },
});
Ext.define("MEM.model.Time", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UserId", type: "int" },
      { name: "FullName", type: "string", max: 100 },
      { name: "ProjectId", type: "int" },
      { name: "AbsenceProjectId", type: "int", useNull: !0 },
      {
        name: "Absence",
        type: "bool",
        convert: function (c, b) {
          var a = MEM.app.getController("Common");
          return b.get("ProjectId") != a.absenceProjectId() ? 0 : 1;
        },
      },
      {
        name: "ProjectName",
        type: "string",
        max: 255,
        sortable: !0,
        convert: function (b, c) {
          if (b) {
            return b;
          } else {
            var d = Ext.getStore("MyCloneProjectListAllStore"),
              a = d.findRecord("Id", c.get("ProjectId"), 0, !1, !0, !0);
            if (a) {
              return a.get("ProjectName");
            } else {
              return "";
            }
          }
        },
      },
      {
        name: "ProjectNo",
        type: "string",
        max: 20,
        sortable: !0,
        sortType: "asInt",
        convert: function (b, c) {
          if (b) {
            return b;
          } else {
            var d = Ext.getStore("MyCloneProjectListAllStore"),
              a = d.findRecord("Id", c.get("ProjectId"), 0, !1, !0, !0);
            if (a) {
              return a.get("ProjectNo");
            } else {
              return "";
            }
          }
        },
      },
      {
        name: "Project",
        type: "string",
        max: 255,
        convert: function (d, b) {
          var c = Ext.getStore("MyCloneProjectListAllStore"),
            a;
          a = c.findRecord("Id", b.get("ProjectId"), 0, !1, !0, !0);
          if (a) {
            return a.get("ProjectNo") + ", " + a.get("ProjectName");
          }
        },
      },
      {
        name: "ProjectStatus",
        type: "string",
        max: 255,
        convert: function (e, c) {
          var d = Ext.getStore("MyCloneProjectListAllStore"),
            b = Ext.getStore("MyProjectStatusStore"),
            a;
          a = d.findRecord("Id", c.get("ProjectId"), 0, !1, !0, !0);
          if (a) {
            b = b.findRecord("Id", a.get("ProjectStatusId"), 0, !1, !0, !0);
            return b.get("StatusCode");
          } else {
            return null;
          }
        },
      },
      { name: "WorkOrderId", type: "int", useNull: !0 },
      {
        name: "WorkOrderNo",
        type: "int",
        useNull: !0,
        convert: function (b, c) {
          var a = Ext.getStore("MyWorkOrderListStore").findRecord(
            "Id",
            c.get("WorkOrderId"),
            0,
            !1,
            !0,
            !0
          );
          if (a && a.get("Addition")) {
            return AWOpad(b, 3);
          }
          return b;
        },
      },
      { name: "WOAWONo", type: "string", max: 10, sortable: !0 },
      { name: "WorkOrderName", type: "string", max: 255, sortable: !0 },
      { name: "RegDate", type: "string", max: 10, sortType: "asDate" },
      { name: "Debit", type: "boolean", defaultValue: !0 },
      { name: "ProfessionItemId", type: "int" },
      { name: "ProfessionCode", type: "string", max: 20 },
      { name: "ProfessionAccountNo", type: "string", max: 5 },
      { name: "Unit", type: "string", max: 5 },
      {
        name: "Hours",
        type: "float",
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      {
        name: "BreakTime",
        type: "float",
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      {
        name: "StartTime",
        useNull: !0,
        type: "date",
        dateFormat: "Y-m-d H:i:s",
        convert: function (b, h) {
          var f,
            d = new Date(h.get("RegDate")),
            c,
            e = getSetting("Time.Timestamp.Interval"),
            g = e ? parseInt(e) : 15;
          if (typeof b == "string") {
            var a = b.split(/[-:T]/);
            c = new Date(a[0], a[1] - 1, a[2], a[3], a[4], a[5]);
          } else {
            if (
              getSetting("Time.Timestamp.Show.Project") == 1 ||
              getSetting("Time.Timestamp.Show.Absence") == 1
            ) {
              c = b ? b : new Date();
            } else {
              return b;
            }
          }
          f = new Date(
            d.getFullYear(),
            d.getMonth(),
            d.getDate(),
            c.getHours(),
            b ? c.getMinutes() : (Math.round(c.getMinutes() / g) * g) % 60
          );
          return f;
        },
      },
      {
        name: "StopTime",
        dateFormat: "Y-m-d H:i:s",
        type: "date",
        persist: !1,
        convert: function (b, c) {
          var h = c.get("StartTime"),
            e,
            g = getSetting("Time.Timestamp.Interval"),
            i = g ? parseInt(g) : 15;
          if (c.get("Hours") && !b) {
            Date.prototype.addHours = function (a) {
              this.setTime(this.getTime() + a * 60 * 60 * 1000);
              return this;
            };
            if (h) {
              e = new Date(h).addHours(c.get("Hours") + c.get("BreakTime"));
            }
          } else {
            if (b) {
              var d,
                f = new Date(c.get("RegDate"));
              if (typeof b == "string") {
                var a = b.split(/[-:T]/);
                d = new Date(a[0], a[1] - 1, a[2], a[3], a[4], a[5]);
              } else {
                d = b;
              }
              e = new Date(
                f.getFullYear(),
                f.getMonth(),
                f.getDate(),
                d.getHours(),
                b ? d.getMinutes() : (Math.round(d.getMinutes() / i) * i) % 60
              );
            }
          }
          return e;
        },
      },
      { name: "Description", type: "string", defaultValue: "" },
      { name: "TotalCost", type: "float" },
      {
        name: "Travel1Km",
        type: "float",
        useNull: !0,
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      { name: "Travel1PriceKm", type: "float", useNull: !0 },
      {
        name: "Travel2Km",
        type: "float",
        useNull: !0,
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      {
        name: "Travel3Km",
        type: "float",
        useNull: !0,
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      { name: "Travel3Driver", type: "int", useNull: !0 },
      { name: "Travel3IsDriver", type: "boolean" },
      { name: "Travel4", type: "bool", useNull: !0, defaultValue: !1 },
      { name: "Invoiced", type: "bool", defaultValue: !1 },
      { name: "InvoiceId", type: "int", useNull: !0 },
      {
        name: "SalaryTransferDate",
        type: "date",
        useNull: !0,
        dateFormat: "Y-m-d",
      },
      { name: "Locked", type: "bool", useNull: !0 },
      { name: "Approved", type: "bool", useNull: !0, defaultValue: !1 },
      {
        name: "Approved2",
        type: "bool",
        useNull: !0,
        defaultValue: !1,
        persist: !1,
      },
      {
        name: "Addition",
        type: "bool",
        useNull: !0,
        defaultValue: !1,
        persist: !1,
      },
      { name: "CarPooling", type: "bool", useNull: !0 },
      { name: "InfoNoteId", type: "int", useNull: !0, persist: !1 },
      {
        name: "AllowanceQty",
        type: "float",
        convert: function (a, b) {
          return a == null ? null : parseFloat(a);
        },
      },
      { name: "MoveAll", type: "boolean", meType: "meBool", defaultValue: !1 },
      { name: "PieceWork", type: "bool", useNull: !0, defaultValue: !1 },
      { name: "CustomerId", type: "int", useNull: !0, persist: !1 },
      {
        name: "DisplayTitle",
        convert: function (d, a) {
          var b = getSetting("MEM.TimeRowFormat");
          if (!b) {
            b = "{p} - {pn}";
          }
          var c = Ext.getStore("MyCloneProfessionItemStore").getById(
            a.get("ProfessionItemId")
          );
          b = Me.templateRender(b, {
            p: a.get("ProjectNo"),
            pn: a.get("ProjectName"),
            w: a.get("WOAWONo"),
            wn: a.get("WorkOrderName"),
            r: a.get("ProfessionCode"),
            a: a.get("Addition"),
            rn: c ? c.get("ProfessionDescription") : "",
          });
          return b;
        },
      },
      {
        name: "Hours_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "Hours");
        },
      },
      {
        name: "StartTime_fmt",
        type: "string",
        persist: !1,
        convert: function (c, b) {
          var a = b.get("StartTime");
          if (a instanceof Date) {
            return Ext.util.Format.date(a, "H:i");
          }
        },
      },
      {
        name: "StopTime_fmt",
        type: "string",
        persist: !1,
        convert: function (c, b) {
          var a = b.get("StopTime");
          if (a instanceof Date) {
            return Ext.util.Format.date(a, "H:i");
          }
        },
      },
      {
        name: "BreakTime_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "BreakTime");
        },
      },
      {
        name: "Travel1Km_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "Travel1Km");
        },
      },
      {
        name: "Travel2Km_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "Travel2Km");
        },
      },
      {
        name: "Travel3Km_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "Travel3Km");
        },
      },
      {
        name: "AllowanceQty_fmt",
        type: "string",
        persist: !1,
        convert: function (b, a) {
          return getFormattedNumeric(a, "AllowanceQty");
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyMonthTimeStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.monthtimestore",
  config: {
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    model: "MEM.model.Time",
    sorters: [{ property: "RegDate", direction: "ASC" }],
    proxy: {
      type: "ajax",
      url: Me.STORE_URL + "MobileUserTimeStore",
      reader: { type: "json", rootProperty: "rows" },
      writer: {
        type: "json",
        rootProperty: "json",
        encode: !0,
        writeAllFields: !1,
      },
      extraParams: { type: "json", limit: 0 },
    },
  },
  constructor: function (a) {
    var b = this;
    b.meFilters = [];
    a = a || {};
    b.callParent([Ext.apply({ remoteSort: !1 }, a)]);
  },
});
Ext.define("MEM.model.OptionValue", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "SettingKey", type: "string", max: 50 },
      { name: "SettingValue", type: "string" },
      { name: "SettingDescription", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyOptionValueStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.OptionValue",
    storeId: "MyOptionValueStore",
    autoLoad: !1,
    remoteFilter: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "OptionValueStore" },
  },
});
Ext.define("MEM.model.OfficeCompany", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CompanyName", type: "string" },
      { name: "AbsenceProjectId", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyOfficeCompanyStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.OfficeCompany",
    storeId: "MyOfficeCompanyStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "OfficeCompanyStore" },
  },
});
Ext.define("MEM.model.Phrase", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "Phrase",
        type: "string",
        meType: "meMediumText",
        display: T("Phrasetext"),
      },
    ],
  },
});
Ext.define("MEM.store.MyPhraseStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Phrase",
    storeId: "MyPhraseStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sortOnLoad: !0,
    sorters: [{ property: "Phrase", directon: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "PhraseStore" },
  },
});
Ext.define("MEM.model.PriceType", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "TypeName", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyPriceTypeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.PriceType",
    storeId: "MyPriceTypeStore",
    remoteFilter: !1,
    sorters: [{ property: "TypeName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "PriceTypeStore" },
  },
});
Ext.define("MEM.model.ProfessionItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProfessionCode", type: "string", max: 20 },
      { name: "ProfessionDescription", type: "string", max: 50 },
      { name: "ItemUnitId", type: "int" },
      { name: "PriceUnit", type: "float" },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "SalaryNo", type: "string", max: 10 },
      { name: "CostUnit", type: "float" },
      { name: "ProfessionGroup", type: "string", max: 50 },
      { name: "Chargeable", type: "bool" },
    ],
  },
});
Ext.define("MEM.store.MyProfessionItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myprofessionitemstorealias",
  config: {
    model: "MEM.model.ProfessionItem",
    storeId: "MyProfessionItemStore",
    remoteFilter: !0,
    remoteSort: !1,
    sorters: [{ property: "ProfessionCode", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProfessionItemStore" },
  },
});
Ext.define("MEM.model.WorkOrderDocument", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int", meType: "meMediumText" },
      { name: "WorkOrderId", type: "int", meType: "meMediumText" },
      { name: "DiaryId", type: "int", meType: "meMediumText" },
      { name: "DocumentDescription", type: "string", meType: "meLongText" },
      { name: "Url", type: "string", meType: "meMediumText", max: 255 },
      { name: "Title", type: "string", meType: "meMediumText", max: 255 },
      { name: "Filename", type: "string", meType: "meMediumText", max: 255 },
      {
        name: "DocumentMimeType",
        type: "string",
        meType: "meMediumText",
        max: 255,
      },
      { name: "DocumentSize", type: "int", meType: "meMediumText" },
      { name: "DocumentData", type: "string" },
      {
        name: "ThumbnailMimeType",
        type: "string",
        meType: "meMediumText",
        max: 255,
      },
      { name: "ThumbnailData", type: "string", meType: "meLongText" },
      { name: "ImageWidth", type: "int", meType: "meInt" },
      { name: "ImageHeight", type: "int", meType: "meInt" },
      { name: "HideInPDA", type: "bool", persist: !1 },
      { name: "EnlargeInReports", type: "bool" },
      { name: "IncludeInReport", type: "bool" },
      { name: "ShowInPortal", type: "bool" },
      { name: "RegDate", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyProject4WorkOrderStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.WorkOrderDocument",
    storeId: "MyWorkOrderDocumentStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    remoteSort: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "Project4WorkOrderStore" },
  },
});
Ext.define("MEM.model.ProjectEconomyBudget", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "BudgetCost", type: "float" },
      { name: "BudgetRevenue", type: "float" },
    ],
  },
});
Ext.define("MEM.store.MyProjectEconomyBudgetStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectEconomyBudget",
    storeId: "MyProjectEconomyBudgetStore",
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectEconomyBudgetStore" },
  },
});
Ext.define("MEM.model.ProjectEconomy", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "LineType", type: "int" },
      { name: "Cost", type: "float" },
      { name: "Revenue", type: "float" },
      { name: "ContributionMargin", type: "float" },
      { name: "ContributionMarginPercent", type: "float" },
    ],
  },
});
Ext.define("MEM.store.MyProjectEconomyStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectEconomy",
    storeId: "MyProjectEconomyStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectEconomyStore" },
  },
});
Ext.define("MEM.model.ProjectList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectStatusId", type: "int" },
      {
        name: "ProjectStatus",
        type: "string",
        sortable: !0,
        convert: function (d, b) {
          var c = Ext.getStore("MyProjectStatusStore"),
            a;
          a = c.findRecord("Id", b.get("ProjectStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusName");
          }
          return "";
        },
      },
      { name: "CustomerId", type: "int" },
      { name: "WorkplaceId", type: "string" },
      { name: "StatusCode", type: "string", sortType: "asInt" },
      { name: "ProjectName", type: "string" },
      { name: "ProjectNo", type: "string", sortType: "asInt" },
      {
        name: "Project",
        type: "string",
        convert: function (b, a) {
          return a.data.ProjectNo + ", " + a.data.ProjectName;
        },
      },
      { name: "SecReadOnly", type: "bool", persist: !1 },
      { name: "Piecework", type: "bool", persist: !1 },
      { name: "KPIRuleId", type: "int", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyProjectListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myprojectliststorealias",
  config: {
    model: "MEM.model.ProjectList",
    storeId: "MyProjectListStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Project", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectListStore" },
  },
});
Ext.define("MEM.model.UserList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "FullName", type: "string" },
      { name: "Signature", type: "string" },
      { name: "EmployeeNo", type: "string" },
      { name: "PersonalNo", type: "string" },
      { name: "ProfessionCode", type: "string" },
      { name: "ProfessionItemId", type: "int" },
      { name: "OrganizationalProjectId", type: "int" },
      { name: "PartnerSupplier", type: "bool" },
    ],
  },
});
Ext.define("MEM.store.MyProjectManagerStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myprojectmanagerstorealias",
  config: {
    model: "MEM.model.UserList",
    storeId: "MyProjectManagerStore",
    autoLoad: !1,
    autoSync: !1,
    sortOnLoad: !0,
    sorters: [{ property: "FullName", directon: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectManagerStore" },
  },
  filters: [{ property: "Disabled", value: !1 }],
});
Ext.define("MEM.model.ProjectOverview", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "ProjectId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ProjectNo",
        type: "string",
        meType: "meShortText",
        max: 10,
        readOnly: !0,
      },
      {
        name: "ProjectName",
        type: "string",
        meType: "meMediumText",
        max: 50,
        readOnly: !0,
      },
      {
        name: "TagField1Id",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "TagField2Id",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ProjectManagerId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ProjectStart",
        type: "date",
        meType: "meDate",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ProjectEnd",
        type: "date",
        meType: "meDate",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "CustomerId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ProjectStatusId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "BudgetCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "BudgetRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
        convert: function (a, b) {
          return Number(a) ? a : "";
        },
      },
      {
        name: "BudgetRevenueWithTax",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("EarnedRevenue") * Me.Moms;
        },
      },
      {
        name: "BookedCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "BookedRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
        convert: function (a, b) {
          return Number(a) ? a : "";
        },
      },
      {
        name: "BudgetRevenueWithTax",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("EarnedRevenue") * Me.Moms;
        },
      },
      {
        name: "ContributionMarginAmount",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ContributionMarginPercent",
        type: "int",
        meType: "mePercent",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "BudgetHours",
        type: "int",
        meType: "meInt",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "BookedHours",
        type: "int",
        meType: "meInt",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "WorkOrderCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "WorkOrderRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ContributionMarginWO",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "SLPCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "SLPRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ContributionMarginAmountSLP",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "ContributionMarginPercentSLP",
        type: "int",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "WorkCost",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
      },
      {
        name: "WorkCostWithTax",
        type: "float",
        meType: "meMoney",
        useNull: !0,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("WorkCost") * Me.Moms;
        },
      },
      {
        name: "MaterialCost",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        readOnly: !0,
        convert: function (a, b) {
          return Number(a) ? a : "";
        },
      },
      {
        name: "MaterialCost",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("MaterialCost") * Me.Moms;
        },
      },
      {
        name: "EarnedRevenue",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        readOnly: !0,
        convert: function (a, b) {
          return Number(a) ? a : "";
        },
      },
      {
        name: "EarnedRevenueWithTax",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        convert: function (b, a) {
          return a.get("EarnedRevenue") * Me.Moms;
        },
      },
      {
        name: "EarnedRevenueNotInvoiced",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        readOnly: !0,
        convert: function (a, b) {
          return Number(a) ? a : "";
        },
      },
      {
        name: "EarnedRevenueNotInvoicedWithTax",
        type: "float",
        meType: "meMoney",
        useNull: !1,
        readOnly: !0,
        convert: function (b, a) {
          return a.get("EarnedRevenueNotInvoiced") * Me.Moms;
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyProjectOverviewStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectOverview",
    storeId: "MyProjectOverviewStore",
    autoLoad: !1,
    remoteFilter: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectOverviewStore" },
  },
});
Ext.define("MEM.model.ProjectPricelistItem", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int", meType: "meMediumText", useNull: !0 },
      {
        name: "ProfessionItemId",
        type: "int",
        meType: "meMediumText",
        useNull: !0,
      },
      { name: "PriceUnit", type: "float", meType: "meMoney" },
    ],
  },
});
Ext.define("MEM.store.MyProjectPricelistItemStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectPricelistItem",
    storeId: "MyProjectPricelistItemStore",
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectPricelistItemStore" },
  },
});
Ext.define("MEM.model.ProjectPricelist", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "ServiceCarPriceDay", type: "float" },
      { name: "ServiceCarPriceKm", type: "float" },
    ],
  },
});
Ext.define("MEM.store.MyProjectPricelistStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectPricelist",
    storeId: "MyProjectPricelistStore",
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectPricelistStore" },
  },
});
Ext.define("MEM.model.ProjectStatusHistory", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "ProjectStatusHistoryId", type: "int" },
      { name: "StatusName", type: "string", max: 50 },
      { name: "StatusCode", type: "int" },
      { name: "StatusColor", type: "string", max: 20 },
      { name: "FullName", type: "string", max: 50 },
    ],
  },
});
Ext.define("MEM.store.MyProjectStatusHistoryStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectStatusHistory",
    storeId: "MyProjectStatusHistoryStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectStatusHistoryStore" },
  },
});
Ext.define("MEM.store.MyProjectArchiveListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myprojectarchiveliststorealias",
  config: {
    model: "MEM.model.ProjectList",
    storeId: "MyProjectListStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    remoteSort: !0,
    pageSize: 500,
    sorters: [{ property: "StatusCode", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectListStore" },
  },
});
Ext.define("MEM.model.Project", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ParentProjectId", type: "int", allowBlank: !1, useNull: !0 },
      { name: "ProjectNo", type: "int", persist: !1, sortType: "asInt" },
      { name: "ProjectStatusId", type: "int" },
      { name: "ProjectName", type: "string", max: 50, allowBlank: !1 },
      { name: "PriceTypeId", type: "int" },
      { name: "ProjectTypeId", type: "int" },
      { name: "ProjectManagerId", type: "int" },
      { name: "WorkLeaderId", type: "int" },
      { name: "TagField1Id", type: "int", useNull: !0 },
      { name: "TagField2Id", type: "int", useNull: !0 },
      { name: "ProjectNote", type: "string", useNull: !0 },
      { name: "CustomerId", type: "int", useNull: !0 },
      { name: "CustomerName", type: "string" },
      { name: "CreditRisk", type: "boolean" },
      { name: "ContactName", type: "string" },
      { name: "CustomerAgentId", type: "int", useNull: !0 },
      { name: "CustomerRef", type: "string", max: 50 },
      { name: "ProjectStart", type: "date", dateFormat: "Y-m-d" },
      { name: "ProjectEnd", type: "date", useNull: !0, dateFormat: "Y-m-d" },
      { name: "MarkupModelId", type: "int", allowBlank: !1 },
      { name: "WorkplaceAddress1", type: "string", max: 50 },
      { name: "WorkplaceAddress2", type: "string", max: 50 },
      { name: "WorkplaceZipcode", type: "string", max: 50 },
      { name: "WorkplaceCity", type: "string", max: 50 },
      { name: "WorkplaceDistance", type: "int" },
      { name: "FinalInspectionDate", type: "date", dateFormat: "Y-m-d" },
      { name: "GuaranteeTime", type: "int" },
      { name: "GuaranteeInspectionDate", type: "date", dateFormat: "Y-m-d" },
      { name: "WOFavorite", type: "boolean", persist: !1 },
      { name: "FrameworkContractId", type: "int", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyProjectStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Project",
    storeId: "MyProjectStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !0,
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectStore" },
  },
});
Ext.define("MEM.model.ProjectTree", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectStatusId", type: "int" },
      { name: "ProjectName", type: "string" },
      { name: "ProjectNo", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyProjectTreeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectTree",
    storeId: "MyProjectTreeStore",
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectTreeStore" },
  },
});
Ext.define("MEM.model.ProjectType", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "TypeName", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyProjectTypeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectType",
    storeId: "MyProjectTypeStore",
    remoteFilter: !1,
    sorters: [{ property: "TypeName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectTypeStore" },
  },
});
Ext.define("MEM.model.Resource", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ResourceNo", type: "string", max: 20 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (b, a) {
          return a.get("ResourceNo") + " " + a.get("Description");
        },
      },
      { name: "CreditProjectId", type: "int" },
      { name: "CreditProjectNo", type: "string" },
      { name: "CreditProjectName", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyResourceStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myresourcestorealias",
  config: {
    model: "MEM.model.Resource",
    storeId: "MyResourceStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "ResourceNo", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ResourceStore" },
  },
});
Ext.define("MEM.model.Revenue", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "VerificationNo", type: "string", max: 50, readOnly: !0 },
      { name: "TransactionNote", type: "string", max: 255 },
      { name: "ProjectId", type: "int" },
      { name: "WorkOrderId", type: "int", useNull: !0 },
      {
        name: "WorkOrderNo",
        type: "int",
        useNull: !0,
        convert: function (d, b) {
          var c = Ext.getStore("MyWorkOrderListStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderId"), 0, !1, !0, !0);
          if (a) {
            if (a.get("Addition")) {
              return AWOpad(a.get("WorkOrderNo"), 3);
            } else {
              return a.get("WorkOrderNo");
            }
          }
          return "";
        },
      },
      {
        name: "WorkOrderName",
        type: "int",
        useNull: !0,
        convert: function (d, b) {
          var c = Ext.getStore("MyWorkOrderListStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderId"), 0, !1, !0, !0);
          if (a) {
            return a.get("Name");
          }
          return "";
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "Invoiceable", type: "bool" },
      { name: "LedgerDate", type: "date" },
      {
        name: "InvoiceAmount",
        type: "float",
        convert: function (a, b) {
          return Math.round(a == null ? 0 : a);
        },
      },
      {
        name: "CustomerPrice",
        type: "float",
        convert: function (a, b) {
          return Math.round(a == null ? 0 : a);
        },
      },
      { name: "MarkupAmount", type: "float" },
      { name: "CustomerNo", type: "string", max: 50, useNull: !0 },
      { name: "RevenueTransaction", type: "bool" },
      { name: "Invoiced", type: "bool" },
      { name: "InvoiceId", type: "int", useNull: !0 },
      { name: "TransactionType", type: "string", max: 1 },
      { name: "ExtInvoiceNo", type: "string", max: 20, useNull: !0 },
      { name: "IsScanned", type: "bool" },
      {
        name: "ScannedUrl",
        type: "string",
        max: 255,
        useNull: !0,
        convert: function (b, a) {
          return a.getScannedUrl();
        },
      },
      { name: "SupplierInvoiceId", type: "int", allowNull: !0 },
      { name: "ApprovedByProduction", type: "bool" },
      { name: "Locked", type: "bool" },
      { name: "ExtVerificationId", type: "string", max: 50, useNull: !0 },
      { name: "Notes", type: "string", max: 255, useNull: !0 },
      { name: "Mark1", type: "string", max: 255, useNull: !0 },
      { name: "Mark2", type: "string", max: 255, useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyRevenueStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Revenue",
    storeId: "MyRevenueStore",
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "RevenueStore" },
  },
});
Ext.define("MEM.model.Setting", {
  extend: Ext.data.Model,
  config: { fields: [{ name: "Name" }, { name: "Value" }] },
});
Ext.define("MEM.store.MySettingStore", {
  extend: Ext.data.ArrayStore,
  alias: "store.settingstore",
  config: {
    autoLoad: !0,
    model: "MEM.model.Setting",
    storeId: "MySettingStore",
    data: [
      ["StatusFinished", "90"],
      ["BasicScopeWONo", "1"],
      ["MEM.Travel4", "0"],
      ["MEM.Days", "0"],
      ["MEM.PlannedQty", "1"],
      ["MEM.ProductionStart", "0"],
      ["MEM.ProductionEnd", "0"],
      ["MEM.PriceUnit", "0"],
      ["MEM.CostUnit", "0"],
      ["MEM.CustomerRefNo", "0"],
      ["MEM.SetEndDate", "0"],
      ["MEM.required.Description", "1"],
      ["MEM.WorkOrderEndCode ", ""],
      ["MEM.WorkOrderStartCode ", ""],
      ["MEM.HoursDebitable", "1"],
      ["CustomerTypeId", "1"],
      ["CurrencyId", "1"],
      ["ProjectToolbar", "0"],
      ["AWO", "1"],
      ["Diary", "0"],
      ["SupplierInvoices", "1"],
      ["ClientInvoices", "1"],
      ["HoursMenu", "1"],
      ["ProjectFilter", "0"],
      ["BasicScopeWONo", "1"],
      ["Unit", "pcs"],
      ["Travel3IsDriver", "0"],
    ],
  },
});
Ext.define("MEM.model.ServiceCategory", {
  extend: MEM.model.Base,
  config: { fields: [{ name: "Name", type: "string", max: 50 }] },
});
Ext.define("MEM.store.MyServiceCategoryStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myservicecategorystorealias",
  config: {
    model: "MEM.model.ServiceCategory",
    storeId: "MyServiceCategoryStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ServiceCategoryStore" },
  },
});
Ext.define("MEM.model.StaffList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "DiaryId", type: "int" },
      { name: "CustomerId", type: "int" },
      { name: "CustomerName", type: "string" },
      { name: "FullName", type: "string" },
      { name: "IdNo", type: "string" },
      { name: "Origin", type: "string", useNull: !0 },
      { name: "OriginId", type: "int" },
      { name: "isEmployee", type: "bool" },
      { name: "LogId", type: "int" },
      { name: "CheckedIn", type: "date", dateFormat: "Y-m-d\\TH:i:s" },
      {
        name: "CheckedInTime",
        type: "string",
        convert: function (b, a) {
          return a.timeDisplay(b, a, "CheckedIn");
        },
      },
      { name: "CheckedOut", type: "date", dateFormat: "Y-m-d\\TH:i:s" },
      {
        name: "CheckedOutTime",
        type: "string",
        convert: function (b, a) {
          return a.timeDisplay(b, a, "CheckedOut");
        },
      },
      {
        name: "Present",
        type: "string",
        convert: function (b, a) {
          if (a.data.CheckedIn == null || a.data.CheckedOut != null) {
            return "red";
          } else {
            return "green";
          }
        },
      },
    ],
  },
  set: function (a, b) {
    this.callParent(arguments);
    switch (a) {
      case "CheckedIn":
        this.set("CheckedInTime", "");
        this.set("Present", "");
        break;
      case "CheckedOut":
        this.set("CheckedOutTime", "");
        this.set("Present", "");
        break;
    }
  },
});
Ext.define("MEM.store.MyStaffListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mystaffliststorealias",
  config: {
    model: "MEM.model.StaffList",
    storeId: "MyStaffListStore",
    autoLoad: !1,
    sorters: [
      { property: "isEmployee" },
      { property: "CustomerName" },
      { property: "FullName" },
    ],
    grouper: {
      groupFn: function (a) {
        if (a.get("isEmployee") == !0) {
          return T("Own Staff");
        } else {
          return a.get("CustomerName");
        }
      },
      sortProperty: "isEmployee",
      direction: "DESC",
    },
    proxy: { type: "myproxy", url: Me.STORE_URL + "StaffListStore" },
  },
});
Ext.define("MEM.model.StatusHistory", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectStatusHistoryId", type: "int" },
      { name: "StatusName", type: "string", max: 50 },
      { name: "FullName", type: "string", max: 50 },
      { name: "Changed", type: "data" },
    ],
  },
});
Ext.define("MEM.store.MyStatusHistoryStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.StatusHistory",
    storeId: "MyStatusHistoryStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "StatusHistoryStore" },
  },
});
Ext.define("MEM.model.Tag", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "TagName", type: "string", max: 50 },
      { name: "TagValue", type: "string", max: 50 },
    ],
  },
});
Ext.define("MEM.store.MyTagStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Tag",
    storeId: "MyTagStore",
    remoteFilter: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "TagStore" },
  },
});
Ext.define("MEM.store.MyTimeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Time",
    storeId: "MyTimeStore",
    autoLoad: !1,
    remoteSort: !0,
    sorters: [
      { property: "RegDate", direction: "DESC" },
      { property: "FullName", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "TimeStore" },
  },
});
Ext.define("MEM.model.UserPoolWorkOrderList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int" },
      { name: "ProjectId", type: "int" },
      { name: "ProjectStatusCode", type: "int" },
      { name: "ResponsibleServiceId", type: "int" },
      { name: "ResponsibleForemanId", type: "int" },
      { name: "WorkOrderStatusId", type: "int" },
      { name: "ProjectName", type: "string", max: 50 },
      { name: "ProjectNo", type: "string", max: 50 },
      {
        name: "Project",
        type: "string",
        max: 100,
        convert: function (b, a) {
          return a.get("ProjectNo") + ", " + a.get("ProjectName");
        },
      },
      { name: "WorkOrderNo", type: "int", readOnly: !0 },
      { name: "Addition", type: "bool", defaultValue: !1 },
      { name: "Name", type: "string", max: 100 },
      {
        name: "ProductionStart",
        type: "date",
        useNull: !0,
        dateFormat: "Y-m-d\\TH:i:s",
      },
      {
        name: "ProductionEnd",
        type: "date",
        useNull: !0,
        dateFormat: "Y-m-d\\TH:i:s",
      },
      { name: "HaveDocument", type: "bool", defaultValue: !1 },
      {
        name: "WorkOrderStatusCode",
        type: "int",
        sortable: !0,
        sortType: "asInt",
        convert: function (d, b) {
          var c = Ext.getStore("MyCloneWorkOrderStatusStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusCode");
          }
          return "";
        },
      },
      {
        name: "ProductionStartDateDisplay",
        type: "string",
        meType: "meTimeStamp",
        convert: function (b, a) {
          return a.convertProductionStartDateDisplay(b, a);
        },
      },
      {
        name: "ProductionStartWeekDay",
        type: "string",
        convert: function (b, a) {
          return Ext.String.capitalize(a.convertProductionStartWeekDay(b, a));
        },
      },
      {
        name: "ProductionStartTimeDisplay",
        type: "string",
        meType: "meTimeStamp",
        convert: function (b, a) {
          return a.convertProductionStartTimeDisplay(b, a);
        },
      },
      { name: "CustomerName", type: "string", max: 50 },
      { name: "CustomerFavoritePriceList", type: "boolean", persist: !1 },
      { name: "CustomerFavoriteArticlePrice", type: "boolean", persist: !1 },
      { name: "ProjectFavorite", type: "boolean", persist: !1 },
    ],
  },
});
Ext.define("MEM.store.MyUserPoolWorkOrderListStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.UserPoolWorkOrderList",
    storeId: "MyUserPoolWorkOrderListStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "UserPoolWorkOrderListStore",
    },
  },
});
Ext.define("MEM.model.UserWorkOrderList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int" },
      { name: "ProjectId", type: "int" },
      { name: "ProjectStatusCode", type: "int" },
      { name: "ResponsibleServiceId", type: "int" },
      { name: "ResponsibleForemanId", type: "int" },
      { name: "WorkOrderStatusId", type: "int" },
      { name: "ProjectName", type: "string", max: 50 },
      { name: "ProjectNo", type: "string", max: 50 },
      {
        name: "Project",
        type: "string",
        max: 100,
        convert: function (b, a) {
          return a.get("ProjectNo") + ", " + a.get("ProjectName");
        },
      },
      { name: "WorkOrderNo", type: "int", readOnly: !0 },
      { name: "Addition", type: "bool", defaultValue: !1 },
      { name: "Name", type: "string", max: 100 },
      {
        name: "ProductionStart",
        type: "date",
        useNull: !0,
        dateFormat: "Y-m-d\\TH:i:s",
      },
      {
        name: "ProductionStartDateDisplay",
        type: "string",
        meType: "meTimeStamp",
        convert: function (b, a) {
          return a.convertProductionStartDateDisplay(b, a);
        },
      },
      {
        name: "ProductionStartWeekDay",
        type: "string",
        convert: function (b, a) {
          return Ext.String.capitalize(a.convertProductionStartWeekDay(b, a));
        },
      },
      {
        name: "ProductionStartTimeDisplay",
        type: "string",
        meType: "meTimeStamp",
        convert: function (b, a) {
          return a.convertProductionStartTimeDisplay(b, a);
        },
      },
      {
        name: "ProductionEnd",
        type: "date",
        useNull: !0,
        dateFormat: "Y-m-d\\TH:i:s",
      },
      {
        name: "WorkOrderStatusCode",
        type: "int",
        sortable: !0,
        sortType: "asInt",
        convert: function (d, b) {
          var c = Ext.getStore("MyCloneWorkOrderStatusStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusCode");
          }
          return "";
        },
      },
      {
        name: "FullName",
        type: "string",
        max: 100,
        convert: function (b, a) {
          if (a.get("Addition")) {
            return AWOpad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          } else {
            return pad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          }
        },
      },
      { name: "HaveDocument", type: "bool", defaultValue: !1 },
      { name: "CustomerName", type: "string", max: 50 },
    ],
  },
});
Ext.define("MEM.store.MyOrganisationWorkOrderListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myorganisationworkorderliststorealias",
  config: {
    model: "MEM.model.UserWorkOrderList",
    storeId: "MyOrganisationWorkOrderListStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "OrganisationWorkOrderListStore",
    },
  },
});
Ext.define("MEM.model.UserProjectWorkOrderList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "ResponsibleServiceId", type: "int" },
      { name: "WorkPoolId", type: "int" },
      { name: "WorkOrderStatusId", type: "int" },
      { name: "ProjectName", type: "string", max: 50 },
      { name: "WorkOrderNo", type: "int", readOnly: !0 },
      {
        name: "BasicScope",
        type: "bool",
        readOnly: !0,
        convert: function (b, a) {
          if (a.get("WorkOrderNo") == 1) {
            return !0;
          }
          return !1;
        },
      },
      { name: "Addition", type: "bool", defaultValue: !1 },
      { name: "Name", type: "string", max: 100 },
      {
        name: "FullName",
        type: "string",
        max: 100,
        convert: function (b, a) {
          if (a.get("Addition")) {
            return AWOpad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          } else {
            return pad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          }
        },
      },
      { name: "CustomerId", type: "int", persist: !1 },
      { name: "CustomerFavoritePriceList", type: "boolean", persist: !1 },
      { name: "CustomerFavoriteArticlePrice", type: "boolean", persist: !1 },
      { name: "ProjectFavorite", type: "boolean", persist: !1 },
    ],
  },
});
Ext.define("MEM.store.MyUserProjectWorkOrderListStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.UserProjectWorkOrderList",
    storeId: "MyUserProjectWorkOrderListStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    grouper: {
      groupFn: function (a) {
        return a.get("ProjectName").substr(0, 1);
      },
    },
    sorters: [
      { property: "BasicScope", direction: "DESC" },
      { property: "Addition", direction: "ASC" },
      { property: "FullName", direction: "ASC" },
      { property: "WorkOrderNo", direction: "ASC" },
    ],
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "UserProjectWorkOrderListStore",
    },
  },
});
Ext.define("MEM.model.UserRight", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UserId", type: "int" },
      { name: "ObjectRightId", type: "int" },
      { name: "ObjectRightName", type: "string", max: 50 },
      { name: "ObjectName", type: "string", max: 50 },
      { name: "WebClient", type: "bool" },
      { name: "MobileClient", type: "bool" },
      { name: "ApiClient", type: "bool" },
      { name: "AdminClient", type: "bool" },
    ],
  },
});
Ext.define("MEM.store.MyUserRightStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuserrightstorealias",
  config: {
    model: "MEM.model.UserRight",
    storeId: "MyUserRightStore",
    autoLoad: !1,
    remoteFilter: !0,
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserRightStore" },
  },
});
Ext.define("MEM.model.UserAccess", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UserId", type: "int" },
      { name: "ObjectRightId", type: "int" },
      { name: "ObjectRightName", type: "string", max: 50 },
      { name: "ObjectName", type: "string", max: 50 },
      { name: "IsProjectRight", type: "bool" },
      { name: "AccessRight", type: "int" },
      { name: "WriteRight", type: "int" },
      { name: "ReadRight", type: "int" },
      { name: "OwnRight", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyUserAccessStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuseraccessstorealias",
  config: {
    model: "MEM.model.UserAccess",
    storeId: "MyUserAccessStore",
    autoLoad: !1,
    remoteFilter: !0,
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserAccessStore" },
  },
});
Ext.define("MEM.model.UserSession", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "SessionId", type: "string", max: 128 },
      { name: "SessionUserId", type: "int" },
      { name: "ImpersonatedUserId", type: "int" },
      { name: "Languagecode", type: "string" },
      {
        name: "FullName",
        type: "string",
        max: 50,
        convert: function (d, b) {
          var c = Ext.getStore("MyUserListStore"),
            a;
          a = c.findRecord("Id", b.get("ImpersonatedUserId"), 0, !1, !0, !0);
          if (a) {
            return a.get("FullName");
          }
          return "";
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyUserSessionStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myusersessionstorealias",
  config: {
    model: "MEM.model.UserSession",
    storeId: "MyUserSessionStore",
    autoLoad: !1,
    remoteFilter: !0,
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserSessionStore" },
  },
});
Ext.define("MEM.model.UserSetting", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UserId", type: "int" },
      { name: "SettingKey", type: "string", max: 50 },
      { name: "SettingValue", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyUserSettingStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myusersettingstorealias",
  config: {
    model: "MEM.model.UserSetting",
    storeId: "MyUserSettingStore",
    autoLoad: !1,
    remoteFilter: !0,
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserSettingStore" },
  },
});
Ext.define("MEM.store.MyUserListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuserliststorealias",
  config: {
    model: "MEM.model.UserList",
    storeId: "MyUserListStore",
    autoLoad: !1,
    autoSync: !1,
    sorters: [{ property: "FullName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserListStore" },
  },
});
Ext.define("MEM.store.MyMobileUserTimeStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.Time",
    storeId: "MyMobileUserTimeStore",
    autoLoad: !1,
    autoSync: !1,
    requiredFilters: ["UserId", "RegDate"],
    sorters: [
      { property: "RegDate", direction: "ASC" },
      { property: "Id", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "MobileUserTimeStore" },
  },
});
Ext.define("MEM.store.MyUserWorkOrderListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuserworkorderliststorealias",
  config: {
    model: "MEM.model.UserWorkOrderList",
    storeId: "MyUserWorkOrderListStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserWorkOrderListStore" },
  },
});
Ext.define("MEM.model.Vat", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "VatPercent",
        type: "float",
        meType: "mePercent",
        useNull: !0,
        display: T("VAT factor"),
      },
      {
        name: "Description",
        type: "string",
        meType: "meMediumText",
        max: 50,
        display: T("Description"),
      },
    ],
  },
});
Ext.define("MEM.store.MyVatStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myvatstorealias",
  config: {
    model: "MEM.model.Vat",
    storeId: "MyVatStore",
    remoteFilter: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "VatStore" },
  },
});
Ext.define("MEM.store.MyWorkleaderStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkleaderstorealias",
  config: {
    model: "MEM.model.UserList",
    storeId: "MyWorkleaderStore",
    autoLoad: !1,
    autoSync: !1,
    sortOnLoad: !0,
    sorters: [{ property: "FullName", directon: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkleaderStore" },
  },
  filters: [{ property: "Disabled", value: !1 }],
});
Ext.define("MEM.model.WorkOrderAssignedLocation", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int", useNull: !0 },
      { name: "WorkOrderNo", type: "int", max: 10 },
      {
        name: "WOAWONo",
        type: "int",
        meType: "meShortText",
        persist: !1,
        useNull: !0,
        convert: function (b, a) {
          if (a.get("Addition") == 1) {
            return (
              getSetting("System.Prefix.VariationNo") +
              Ext.String.leftPad(a.get("WorkOrderNo"), 3, "0")
            );
          } else {
            return a.get("WorkOrderNo");
          }
        },
      },
      { name: "Name", type: "string", meType: "meLongText", max: 100 },
      { name: "CustomerName", type: "string", meType: "meLongText", max: 100 },
      { name: "WorkplaceAddress", type: "string", meType: "meMediumText" },
      { name: "WorkOrderStatusId", type: "int", meType: "meMediumText" },
      { name: "WorkOrderStatusCode", type: "int", meType: "meMediumText" },
      { name: "GpsX", type: "int", meType: "meShortText", useNull: !0 },
      { name: "GpsY", type: "int", meType: "meShortText", useNull: !0 },
      { name: "ProjectStatusCode", type: "int" },
      { name: "ProjectStatusId", type: "int" },
      { name: "ResponsibleServiceId", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderAssignedLocationStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderassignedlocationstorealias",
  config: {
    model: "MEM.model.WorkOrderAssignedLocation",
    storeId: "MyWorkOrderAssignedLocationStore",
    autoLoad: !1,
    sortOnLoad: !0,
    sorters: [{ property: "WorkOrderNo", direction: "ASC" }],
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "WorkOrderAssignedLocationStore",
    },
  },
});
Ext.define("MEM.store.MyWorkOrderDocumentStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.WorkOrderDocument",
    storeId: "MyWorkOrderDocumentStore",
    autoLoad: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "WorkOrderDocumentStore",
      timeout: 500000,
    },
  },
});
Ext.define("MEM.model.WorkOrderList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Id", type: "int" },
      { name: "ProjectId", type: "int" },
      {
        name: "WorkOrderId",
        type: "int",
        convert: function (a, b) {
          if (a) {
            return a;
          }
          return b.get("Id");
        },
      },
      { name: "ResponsibleServiceId", type: "int" },
      { name: "ResponsibleForemanId", type: "int" },
      { name: "CustomerId", type: "int" },
      { name: "WorkPoolId", type: "int" },
      { name: "WorkOrderStatusId", type: "int" },
      { name: "ProjectNo", type: "string", max: 50 },
      { name: "ProjectName", type: "string", max: 50 },
      { name: "WorkOrderNo", type: "int", readOnly: !0 },
      {
        name: "BasicScope",
        type: "bool",
        readOnly: !0,
        convert: function (b, a) {
          if (a.get("WorkOrderNo") == 1) {
            return !0;
          }
          return !1;
        },
      },
      { name: "Addition", type: "bool", defaultValue: !1 },
      { name: "Name", type: "string", max: 100 },
      {
        name: "FullName",
        type: "string",
        max: 100,
        convert: function (b, a) {
          if (a.get("Addition")) {
            return AWOpad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          } else {
            return pad(a.get("WorkOrderNo"), 3) + ", " + a.get("Name");
          }
        },
      },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderliststorealias",
  config: {
    model: "MEM.model.WorkOrderList",
    storeId: "MyWorkOrderListStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    grouper: {
      groupFn: function (a) {
        return a.get("ProjectName").substr(0, 1);
      },
    },
    sorters: [
      { property: "BasicScope", direction: "DESC" },
      { property: "Addition", direction: "ASC" },
      { property: "FullName", direction: "ASC" },
      { property: "WorkOrderNo", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderListStore" },
  },
});
Ext.define("MEM.model.WorkOrderLocation", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int", useNull: !0 },
      { name: "WorkOrderNo", type: "int", max: 10 },
      {
        name: "WOAWONo",
        type: "int",
        meType: "meShortText",
        persist: !1,
        useNull: !0,
        convert: function (b, a) {
          if (a.get("Addition") == 1) {
            return (
              getSetting("System.Prefix.VariationNo") +
              Ext.String.leftPad(a.get("WorkOrderNo"), 3, "0")
            );
          } else {
            return a.get("WorkOrderNo");
          }
        },
      },
      { name: "Name", type: "string", meType: "meLongText", max: 100 },
      { name: "CustomerName", type: "string", meType: "meLongText", max: 100 },
      { name: "WorkplaceAddress", type: "string", meType: "meMediumText" },
      { name: "WorkOrderStatusId", type: "int", meType: "meMediumText" },
      { name: "WorkOrderStatusCode", type: "int", meType: "meMediumText" },
      { name: "GpsX", type: "int", meType: "meShortText", useNull: !0 },
      { name: "GpsY", type: "int", meType: "meShortText", useNull: !0 },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderLocationStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderlocationstorealias",
  config: {
    model: "MEM.model.WorkOrderLocation",
    storeId: "MyWorkOrderLocationStore",
    autoLoad: !1,
    sortOnLoad: !0,
    sorters: [{ property: "WorkOrderNo", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderLocationStore" },
  },
});
Ext.define("MEM.store.MyWorkOrderRowStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderrowstorealias",
  config: {
    model: "MEM.model.WorkOrderRow",
    storeId: "MyWorkOrderRowStore",
    autoLoad: !1,
    pageSize: 100,
    remoteSort: !0,
    sorters: [{ property: "Id", direction: "DESC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderRowStore" },
  },
});
Ext.define("MEM.model.WorkOrderStatus", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "StatusName", type: "string", max: 50 },
      { name: "StatusCode", type: "int", sortable: !0, sortType: "asInt" },
      { name: "StatusColor", type: "string", max: 20 },
      { name: "TempRec", type: "bool", persist: !1, defaultValue: !1 },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderStatusStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderstatusstorealias",
  config: {
    model: "MEM.model.WorkOrderStatus",
    storeId: "MyWorkOrderStatusStore",
    remoteFilter: !1,
    remoteSort: !0,
    sortOnLoad: !0,
    sorters: [{ property: "StatusCode", directon: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderStatusStore" },
  },
});
Ext.define("MEM.model.WorkOrderStatusRelations", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderStatusId", type: "int", useNull: !0 },
      { name: "ExternalWorkOrderStatusId", type: "int", useNull: !0 },
      { name: "AllowExternal", type: "bool", defaultValue: !1 },
      { name: "RequireExternal", type: "bool", defaultValue: !1 },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderStatusRelationsStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderstatusrelationsstorealias",
  config: {
    model: "MEM.model.WorkOrderStatusRelations",
    storeId: "MyWorkOrderStatusRelationsStore",
    remoteFilter: !1,
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "WorkOrderStatusRelationsStore",
    },
  },
});
Ext.define("MEM.model.WorkOrder", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ProjectId", type: "int" },
      { name: "WorkOrderNo", type: "int", readOnly: !0 },
      { name: "Addition", type: "bool" },
      { name: "Name", type: "string", max: 100, defaultValue: "" },
      { name: "WorkDescription", type: "string", defaultValue: "" },
      { name: "WorkFeedback", type: "string", defaultValue: "" },
      { name: "WorkplaceAddress", type: "string", defaultValue: "" },
      { name: "GpsX", type: "int", persist: !1, useNull: !0 },
      { name: "GpsY", type: "int", persist: !1, useNull: !0 },
      { name: "District", type: "string", persist: !1, max: 50 },
      { name: "ResponsibleServiceId", type: "int", useNull: !0 },
      { name: "WorkPoolId", type: "int", useNull: !0 },
      { name: "ResponsibleForemanId", type: "int", useNull: !0 },
      { name: "CreditRisk", type: "boolean" },
      { name: "CustomerId", type: "int" },
      { name: "CustomerName", type: "string" },
      { name: "CustomerAgentId", type: "int", useNull: !0 },
      { name: "ContactName", type: "string", max: 50 },
      { name: "CustomerRefNo", type: "string", max: 1024, defaultValue: "" },
      { name: "WorkOrderStatusId", type: "int" },
      { name: "ExternalWorkOrderStatusId", type: "int", useNull: !0 },
      {
        name: "WorkOrderStatusCode",
        type: "int",
        sortable: !0,
        persist: !1,
        sortType: "asInt",
        convert: function (d, b) {
          var c = Ext.getStore("MyCloneWorkOrderStatusStore"),
            a;
          a = c.findRecord("Id", b.get("WorkOrderStatusId"), 0, !1, !0, !0);
          if (a) {
            return a.get("StatusCode");
          }
          return "";
        },
      },
      {
        name: "ProductionStart",
        type: "date",
        dateFormat: "Y-m-d\\TH:i:s",
        useNull: !0,
      },
      {
        name: "ProductionEnd",
        type: "date",
        dateFormat: "Y-m-d\\TH:i:s",
        useNull: !0,
      },
      {
        name: "ProductionStartClockXX",
        type: "string",
        dateFormat: "time",
        useNull: !0,
      },
      {
        name: "ProductionEndClockXX",
        type: "string",
        dateFormat: "time",
        useNull: !0,
      },
      { name: "OrderDate", type: "date", dateFormat: "Y-m-d" },
      { name: "ReportSign", type: "string", persist: !1, max: 50 },
      { name: "ReportTimestamp", type: "string", persist: !1 },
      { name: "Invoiced", type: "bool", persist: !1, defaultValue: !1 },
      { name: "InvoiceDate", type: "date", persist: !1, useNull: !0 },
      { name: "InvoiceId", type: "int", persist: !1, useNull: !0 },
      { name: "CachedWorkCost", type: "float", persist: !1, useNull: !0 },
      { name: "CachedWorkRevenue", type: "float", persist: !1, useNull: !0 },
      { name: "AdditionStatusId", type: "int" },
      { name: "ConstructionTypeId", type: "int" },
      { name: "BudgetLevelId", type: "int", persist: !1 },
      { name: "MarkupModelId", type: "int", persist: !1 },
      { name: "OrderAmount", type: "float", persist: !1, useNull: !0 },
      { name: "FixedPrice", type: "bool", defaultValue: !0 },
      { name: "CostProjectId", type: "int" },
      { name: "FrameworkContractId", type: "int", useNull: !0 },
      { name: "ServiceCategoryId", type: "int", useNull: !0 },
      { name: "GpsX", type: "int", useNull: !0 },
      { name: "GpsY", type: "int", useNull: !0 },
      { name: "SignOnSite", type: "bool", defaultValue: !1 },
      { name: "WorkOrderDocumentId", type: "int" },
      {
        name: "ExternalStatusName",
        type: "string",
        persist: !1,
        defaultValue: "",
      },
      { name: "ExternalStatusComment", type: "string", persist: !1 },
      { name: "UpdatePrices", type: "bool", defaultValue: !1 },
      { name: "KPIRuleId", type: "int", useNull: !0 },
      { name: "KPIName", type: "string", persist: !1 },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkorderstorealias",
  config: {
    model: "MEM.model.WorkOrder",
    storeId: "MyWorkOrderStore",
    remoteFilter: !1,
    remoteSort: !1,
    autoLoad: !1,
    autoSync: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderStore" },
  },
});
Ext.define("MEM.store.LocalWorkOrderStatusStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.localworkorderstatusstorealias",
  config: {
    model: "MEM.model.WorkOrderStatus",
    storeId: "LocalWorkOrderStatusStore",
    autoLoad: !1,
    data: [],
    proxy: { type: "memory" },
  },
  fetchData: function (b, a) {
    var e = this,
      g = Ext.StoreManager.lookup("MyWorkOrderStatusStore"),
      f = Ext.StoreManager.lookup("MyWorkOrderStatusRelationsStore"),
      d = [],
      c = [];
    if (!Ext.isDefined(b) || b == null) {
      return;
    }
    if (!Ext.isDefined(a)) {
      return;
    }
    f.each(function (d) {
      if (d.get("ExternalWorkOrderStatusId") == a && d.get("RequireExternal")) {
        c.push(d.get("WorkOrderStatusId"));
      }
    }, this);
    e.removeAll(!0);
    g.each(function (e) {
      var f;
      if (a == null || e.getId() == b || Ext.Array.contains(c, e.getId())) {
        f = Ext.ModelMgr.create(
          {
            Id: e.getId(),
            StatusName: e.get("StatusName"),
            StatusCode: e.get("StatusCode"),
            StatusColor: e.get("StatusColor"),
          },
          this.getModel()
        );
        d.push(f);
      }
    }, this);
    e.add(d);
  },
});
Ext.define("MEM.controller.Common", {
  extend: Ext.app.Controller,
  boolSetting: function (b) {
    var c = this,
      a = c.stringSetting(b);
    if (a == !0 || a == "true") {
      return !0;
    } else {
      return !1;
    }
  },
  intSetting: function (b) {
    var c = this,
      a = c.stringSetting(b);
    if (isNaN(parseInt(a, 10))) {
      console.log("Setting Not a Number: " + b);
      return NaN;
    } else {
      return parseInt(a, 10);
    }
  },
  stringSetting: function (c) {
    var d = this.opt(c);
    if (d) {
      return d;
    } else {
      var b = Ext.getStore("MySettingStore"),
        a = b.find("Name", c);
      if (b.getRange(a, a)[0]) {
        return b.getRange(a, a)[0]._data.Value;
      } else {
        return;
      }
    }
  },
  absenceProjectId: function () {
    return Ext.getStore("MyOfficeCompanyStore")
      .getAt(0)
      .get("AbsenceProjectId");
  },
  statusFinishedId: function () {
    var c = this,
      a = Ext.getStore("MyProjectStatusStore"),
      d,
      b;
    a.clearFilter();
    a.meClearFilter();
    if (a.getAt(0) == undefined) {
      a.load({
        callback: function () {
          a.filter("StatusCode", c.setting("statusFinished"));
          if (a.getAt(0)) {
            b = parseInt(a.getAt(0).getId());
            return b;
          } else {
            return null;
          }
        },
      });
    } else {
      a.filter("StatusCode", c.setting("statusFinished"));
      if (a.getAt(0)) {
        b = parseInt(a.getAt(0).getId(), 10);
        return b;
      } else {
        return null;
      }
    }
  },
  opt: function (b) {
    var a = Ext.getStore("MyOptionValueStore").findRecord("SettingKey", b);
    if (a) {
      return a.get("SettingValue");
    }
    return;
  },
  saveInfoNote: function (m, h, f, j, d, g, c) {
    var i = this,
      l = i.getApplication(),
      a = Ext.getStore("MyInfoNoteStore"),
      k = a.getModel(),
      b;
    if (h != "") {
      if (isNaN(d) || d == null) {
        var e = Ext.ModelManager.create(
          { UserId: l.getUserId(), TableName: j, TableId: m, Note: h },
          k
        );
        e.set("Id", null);
        e.setProxy(a.getProxy());
        e.save({
          callback: function () {
            f.set("InfoNoteId", e.get("Id"));
            i.setInfoNote(e.get("Id"));
            if (g) {
              g.setValue(e.get("Id"));
            }
            f.commit();
            if (c) {
              c();
            }
          },
        });
      } else {
        a.meClearFilter();
        a.meAddFilter(["Id", "=", d]);
        a.load({
          callback: function () {
            b = a.getById(d);
            if (b) {
              b.set("Note", h);
              b.setProxy(a.getProxy());
              b.save({
                callback: function () {
                  f.set("InfoNoteId", b.get("Id"));
                  if (c) {
                    c();
                  }
                },
              });
            } else {
              Ext.Msg.alert(T("InfoNote") + " " + T("is missing."));
              if (c) {
                c();
              }
            }
          },
        });
      }
    } else {
      if (!isNaN(d) && d != null) {
        a.meClearFilter();
        a.meAddFilter(["Id", "=", d]);
        a.load({
          callback: function () {
            b = a.getById(d);
            if (b) {
              b.setProxy(a.getProxy());
              b.erase();
              f.set("InfoNoteId", null);
              f.commit();
              if (g) {
                g.setValue(null);
              }
            }
            if (c) {
              c();
            }
          },
        });
      } else {
        if (c) {
          c();
        }
      }
    }
  },
  setInfoNote: function (c, a) {
    var b = Ext.getStore("MyInfoNoteStore");
    if (!c) {
      a.setValue("");
      return;
    }
    b.meClearFilter();
    b.meAddFilter(["Id", "=", parseInt(c, 10)]);
    b.load({
      callback: function (b) {
        if (b && b.length && a) {
          a.setValue(b[0].get("Note"));
        }
      },
    });
  },
  navigateToPanel: function (a, b) {
    if (a.hasInnerItem(b)) {
      var c = a.getInnerItems();
      if (c.length > 1 && c[c.length - 2] === b) {
        return a.pop();
      } else {
        a.setActiveItem(b);
        return b;
      }
    } else {
      return a.push(b);
    }
  },
  trimAllFormFields: function (a) {
    Ext.each(a.getFieldsArray(), function (b) {
      if (Ext.isString(b.getValue())) {
        b.setValue(b.getValue().trim());
      }
    });
  },
  dirtyDueToCreatedByAdmin: function (b) {
    var a = b.modified ? Object.keys(b.modified) : null;
    if (
      a &&
      a.length === 1 &&
      a[0] === "CreatedId" &&
      b.modified["CreatedId"] === "1"
    ) {
      return !0;
    } else {
      return !1;
    }
  },
  dirtyDueToNew: function (b) {
    var a = b.modified ? Object.keys(b.modified) : null;
    if (a && a.length == 1 && a[0] == "Id" && b.phantom) {
      return !0;
    }
    return !1;
  },
  styleFieldByValue: function (a, c, e, d) {
    a.removeCls(d);
    var b;
    if (c) {
      b = c.findRecord(a.getName(), a.getValue());
    } else {
      c = a.getStore();
      b = c ? a.getStore().findRecord(a.getValueField(), a.getValue()) : null;
    }
    if (b && b.get(e)) {
      a.addCls(d);
    }
  },
});
Ext.define("MEM.view.awo.MyContactOverlay", {
  extend: Ext.form.Panel,
  xtype: "mycontactoverlay",
  config: {
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !1,
    width: "70%",
    height: "6em",
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Send to Customer?"),
        layout: { pack: "end" },
        items: [
          {
            itemId: "sendAWOEmail",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "mail",
            iconMask: !0,
            action: "sendAWOEmail",
          },
          {
            itemId: "closeEmailOverlay",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "closeContactOverlay",
          },
        ],
      },
      {
        xtype: "checkboxfield",
        itemId: "contactCustomer",
        label: T("To customer"),
        value: "1",
        checked: !0,
        name: "Customer",
      },
    ],
  },
});
Ext.define("MEM.ux.field.MySignature", {
  extend: Ext.Container,
  alias: "widget.mysignature",
  config: {
    cls: "mysignature",
    lineWidth: 750,
    fontSize: 14,
    fontName: "Helvetica",
    html: '<canvas id="signatureCanvas">no canvas support</canvas>',
    imageWidth: 768,
    imageHeight: 1024,
    signHeight: 150,
  },
  constructor: function (b) {
    var a = this;
    a.callParent([b]);
    a.on("painted", a.initCmp, a);
  },
  initCmp: function () {
    var a = this;
    if (a.meInited) {
      a.fireEvent("signatureopen");
      return;
    }
    a.meInited = !0;
    a.canvasEl = a.element.down("canvas");
    a.canvas = a.canvasEl.dom;
    if (a.canvas && a.canvas.getContext) {
      a.canvasContext = a.canvas.getContext("2d");
    }
    if (!a.canvas || !a.canvasContext) {
      alert("Error creating signature pad.");
      return;
    }
    var b = a.getImageWidth();
    a.canvas.width = b;
    a.canvas.height = a.getImageHeight();
    if (b < a.element.getWidth()) {
      var c = parseInt((a.element.getWidth() - b - 2) / 2);
      a.canvas.style.border = "1px solid black";
      a.canvas.style.padding = 0;
      a.canvas.style.width = b + "px";
      a.canvas.style.marginLeft = c + "px";
      a.canvas.style.marginRight = c + "px";
    }
    a.canvasContext.font = Ext.String.format(
      "{0}px {1}",
      a.getFontSize(),
      a.getFontName()
    );
    a.canvasContext.lineWidth = 2;
    a.fireEvent("signatureopen");
  },
  clearImage: function (b) {
    var a = this;
    a.canvas.width = a.canvas.width;
    a.canvasContext.lineWidth = 2;
    a.canvasContext.fillStyle = "#FFFFFF";
    a.canvasContext.fillRect(0, 0, a.canvas.width, a.canvas.height);
  },
  getImage: function () {
    var b = this,
      d = b.canvas.toDataURL("image/jpeg"),
      c = d.replace(/^data:image\/(png|jpeg);base64,/, ""),
      a = d.match(/^data:([^;]*);/);
    if (!a || a.length < 2) {
      return null;
    }
    imagedata = {};
    imagedata.data = c;
    imagedata.type = a[1];
    imagedata.width = b.element.getWidth();
    imagedata.height = b.element.getHeight();
    imagedata.size = atob(c).length;
    return imagedata;
  },
  initImage: function (e) {
    var a = this,
      k = 0,
      f = 0,
      g = 0,
      m = a.canvas.height - a.getSignHeight(),
      h,
      i,
      l = a.getFontSize() * 1.25,
      j = a.canvas.width,
      c;
    a.clearImage();
    if (j > a.getLineWidth()) {
      j = a.getLineWidth();
    }
    if (!e && a.text) {
      e = a.text;
    }
    a.text = e;
    a.canvasContext.restore();
    a.canvasContext.font = Ext.String.format(
      "{0}px {1}",
      a.getFontSize(),
      a.getFontName()
    );
    for (h = 0; h < e.length; h++) {
      var b = e[h];
      if (b.suppress === !0) {
        continue;
      }
      if (Ext.isDefined(b.row)) {
        k = b.row;
      }
      if (b.xpos) {
        f = b.xpos;
      } else {
        f = 10;
      }
      if (!Ext.isArray(b.text)) {
        b.text = [b.text];
      }
      i = "#000000";
      if (b.color) {
        i = b.color;
      }
      a.canvasContext.fillStyle = i;
      c = 0;
      if (b.width) {
        c = b.width;
      }
      if (b.align) {
        a.canvasContext.textAlign = b.align;
      } else {
        a.canvasContext.textAlign = "left";
      }
      switch (a.canvasContext.textAlign) {
        case "right":
          f += c - 5;
          break;
        case "center":
          f += c / 2 - 3;
          break;
      }
      for (g = 0; g < b.text.length; g++) {
        var d = b.text[g];
        if (c && !b.wrap) {
          while (a.canvasContext.measureText(d).width > c) {
            d = d.substring(0, d.length - 1);
          }
        }
        a.canvasContext.fillText(d, f, ++k * l);
      }
    }
  },
});
Ext.define("MEM.ux.field.MySignaturePad", {
  extend: Ext.Container,
  alias: "widget.mysignaturepad",
  config: {
    height: 150,
    html: '<canvas id="signaturePadCanvas">no canvas support</canvas>',
  },
  constructor: function (b) {
    var a = this;
    a.callParent([b]);
    a.on("painted", a.initCmp, a);
  },
  initCmp: function () {
    var a = this;
    a.canvasEl = a.element.down("canvas");
    a.canvas = a.canvasEl.dom;
    if (a.canvas && a.canvas.getContext) {
      a.canvasContext = a.canvas.getContext("2d");
    }
    if (!a.canvas || !a.canvasContext) {
      alert("Error creating signature pad.");
      return;
    }
    a.canvas.width = a.element.getWidth();
    a.canvas.height = a.getHeight();
    a.canvas.addEventListener(
      "mousedown",
      function (b) {
        a.eventCanvas(b, a);
      },
      !1
    );
    a.canvas.addEventListener(
      "mousemove",
      function (b) {
        a.eventCanvas(b, a);
      },
      !1
    );
    a.canvas.addEventListener(
      "mouseup",
      function (b) {
        a.eventCanvas(b, a);
      },
      !1
    );
    a.canvas.addEventListener(
      "touchstart",
      function (b) {
        a.eventTouchPad(b, a);
      },
      !1
    );
    a.canvas.addEventListener(
      "touchmove",
      function (b) {
        a.eventTouchPad(b, a);
      },
      !1
    );
    a.canvas.addEventListener(
      "touchend",
      function (b) {
        a.eventTouchPad(b, a);
      },
      !1
    );
    a.sign = new a.signCap(a);
    a.canvasContext.lineWidth = 2;
    a.clearImage();
  },
  clearImage: function (b) {
    var a = this;
    a.canvas.width = a.canvas.width;
    a.canvasContext.lineWidth = 2;
    a.canvasContext.fillStyle = "#FFFFFF";
    a.canvasContext.fillRect(0, 0, a.canvas.width, a.canvas.height);
  },
  getImage: function () {
    var b = this,
      d = b.canvas.toDataURL("image/jpeg"),
      c = d.replace(/^data:image\/(png|jpeg);base64,/, ""),
      a = d.match(/^data:([^;]*);/);
    if (!a || a.length < 2) {
      return null;
    }
    imagedata = {};
    imagedata.data = c;
    imagedata.type = a[1];
    imagedata.width = b.element.getWidth();
    imagedata.height = b.element.getHeight();
    imagedata.size = atob(c).length;
    return imagedata;
  },
  signCap: function (a) {
    var b = this;
    this.draw = !1;
    this.start = !1;
    this.mousedown = function (c) {
      a.canvasContext.beginPath();
      a.canvasContext.arc(c._x, c._y, 1, 0 * Math.PI, 2 * Math.PI);
      a.canvasContext.fill();
      a.canvasContext.stroke();
      a.canvasContext.moveTo(c._x, c._y);
      b.draw = !0;
    };
    this.mousemove = function (c) {
      if (b.draw) {
        a.canvasContext.lineTo(c._x, c._y);
        a.canvasContext.stroke();
      }
    };
    this.mouseup = function (c) {
      if (b.draw) {
        b.mousemove(c);
        b.draw = !1;
      }
    };
    this.touchstart = function (c) {
      a.canvasContext.beginPath();
      a.canvasContext.arc(c._x, c._y, 1, 0 * Math.PI, 2 * Math.PI);
      a.canvasContext.fill();
      a.canvasContext.stroke();
      a.canvasContext.moveTo(c._x, c._y);
      b.start = !0;
    };
    this.touchmove = function (c) {
      c.preventDefault();
      if (b.start) {
        a.canvasContext.lineTo(c._x, c._y);
        a.canvasContext.stroke();
      }
    };
    this.touchend = function (c) {
      if (b.start) {
        b.touchmove(c);
        b.start = !1;
      }
    };
  },
  eventCanvas: function (a, c) {
    if (a.offsetX || a.offsetX == 0) {
      a._x = a.offsetX;
      a._y = a.offsetY;
    } else {
      if (a.layerX || a.layerX == 0) {
        a._x = a.layerX;
        a._y = a.layerY;
      }
    }
    var b = c.sign[a.type];
    if (b) {
      b(a);
    }
  },
  eventTouchPad: function (a, e) {
    var f = this;
    var c = e.element.down("canvas");
    var b = a.targetTouches[0];
    if (b) {
      a._x = b.pageX - c.getX();
      a._y = b.pageY - c.getY();
    }
    var d = e.sign[a.type];
    if (d) {
      d(a);
    }
  },
  initImage: function () {
    var b = this.canvas,
      a = this.canvasContext;
    if (!b || !a) {
      return;
    }
    this.clearImage();
    a.save();
    a.rect(0, 0, b.width, b.height);
    a.stroke();
    a.clip();
  },
});
Ext.define("MEM.view.awo.MyAWOSignaturePanel", {
  extend: Ext.Panel,
  alias: "widget.myawosignaturepanel",
  config: {
    cls: "mysignaturepanel",
    layout: { type: "vbox", align: "stretch", pack: "end" },
    title: T("Sign AWO"),
    items: [
      {
        xtype: "mysignature",
        height: 0,
        imageWidth: 768,
        imageHeight: 1024,
        signHeight: 120,
      },
      {
        xtype: "list",
        itemId: "header",
        cls: "mysignatureoverlayheader",
        itemCls: "mysignatureoverlayheaderitem",
        flex: 0,
        scrollable: "vertical",
        inline: { wrap: !1 },
        store: { fields: ["title", "value"] },
        itemHeight: isPhone ? 18 : 30,
        itemTpl: [
          '<div class="sign-listitem sign-header-title";align="left"><tpl if="title">{title}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-header-value";align="left"><tpl if="value">{value}<tpl else>&nbsp;</tpl></div>',
        ],
      },
      {
        xtype: "list",
        itemId: "list",
        itemCls: "mysignatureoverlaylistitem",
        flex: 1,
        scrollable: "vertical",
        inline: { wrap: !1 },
        store: { fields: ["date", "title", "unit", "qty", "comment"] },
        itemHeight: isPhone ? 18 : 30,
        itemTpl: [
          '<div class="sign-listitem sign-date ";align="left"><tpl if="date">{date}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-title";align="left"><tpl if="title">{title}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-unit";align="left"><tpl if="unit">{unit}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-qty";align="right"><tpl if="qty">{qty}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-comment";align="left">{comment}</div>',
        ],
      },
      { xtype: "mysignaturepad", height: 120 },
      {
        xtype: "toolbar",
        cls: "my-button-toolbar",
        ui: "light",
        layout: { pack: "center", type: "hbox" },
        items: [
          {
            xtype: "button",
            itemId: "signatureSave",
            cls: "x-button-icon-standard",
            text: T("Save"),
            handler: function () {
              var b = this.up("myawosignaturepanel"),
                a = b.down("mysignature"),
                f = a.canvas,
                e = f.getContext("2d"),
                c = new Image(),
                d = new Image();
              c.onload = function () {
                e.drawImage(
                  c,
                  0,
                  0,
                  a.getImageWidth(),
                  a.getImageHeight() - a.getSignHeight()
                );
                d.src = b.down("mysignaturepad").canvas.toDataURL();
              };
              d.onload = function () {
                e.drawImage(
                  d,
                  0,
                  a.getImageHeight() - a.getSignHeight(),
                  a.getImageWidth(),
                  a.getSignHeight()
                );
                var c = b.down("mysignature").getImage();
                b.fireEvent("signaturesave", c);
              };
              c.src = b.down("mysignature").canvas.toDataURL();
            },
          },
          {
            xtype: "button",
            itemId: "signatureClear",
            cls: "x-button-icon-standard",
            text: T("Clear"),
            handler: function () {
              var a = this.up("myawosignaturepanel");
              a.down("mysignature").initImage();
              a.down("mysignaturepad").initImage();
            },
          },
        ],
      },
    ],
  },
  constructor: function () {
    this.callParent(arguments);
    this.relayEvents(this.down("mysignature"), "signatureopen");
  },
  getLineWidth: function () {
    return this.down("mysignature").getLineWidth();
  },
  getCanvas: function () {
    return this.down("mysignature").canvasContext;
  },
  initImage: function (a) {
    this.setOverlayText(a);
    this.down("mysignature").initImage(a);
    this.down("mysignaturepad").initImage(a);
  },
  setOverlayText: function (c) {
    var a = new Ext.util.MixedCollection(),
      b = new Ext.util.MixedCollection();
    c.forEach(function (d) {
      if (d.datafield) {
        var f = d.header === !0 ? a : b,
          e = f.get(d.row);
        if (!e) {
          e = f.add(d.row, {});
        }
        e[d.datafield] = d.text;
      }
    });
    this.down("#header").getStore().setData(a.getRange(0));
    this.down("#list").getStore().setData(b.getRange(0));
  },
});
Ext.define("MEM.view.awo.MyAWOStatusOverlay", {
  extend: Ext.form.Panel,
  xtype: "myawostatusoverlay",
  config: {
    cls: "mystatusoverlay",
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Confirm status"),
        layout: { pack: "end" },
        items: [
          {
            id: "setAWOStatus",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "check2",
            iconMask: !0,
            action: "setAWOStatus",
          },
          {
            id: "closeAWOStatus",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "closeAWOStatus",
          },
        ],
      },
      {
        xtype: "selectfield",
        itemId: "overlayStatus",
        store: "MyAdditionalWorkOrderStatusStore",
        displayField: "StatusName",
        valueField: "Id",
        usePicker: !1,
        label: T("Status"),
        name: "AdditionStatusId",
      },
    ],
  },
});
var header = !0;
function hexToR(a) {
  return parseInt(cutHex(a).substring(0, 2), 16);
}
function hexToG(a) {
  return parseInt(cutHex(a).substring(2, 4), 16);
}
function hexToB(a) {
  return parseInt(cutHex(a).substring(4, 6), 16);
}
function cutHex(a) {
  return a.charAt(0) == "#" ? a.substring(1, 7) : a;
}
function AWOstatus(c) {
  var b = Ext.getStore("MyAdditionalWorkOrderStatusStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("StatusName");
  }
  return "";
}
function AWOstatusColor(d) {
  var c = Ext.getStore("MyAdditionalWorkOrderStatusStore"),
    b,
    g,
    f,
    e,
    a = c.findRecord("Id", d, 0, !1, !0, !0);
  if (a) {
    b = a.get("StatusColor");
    return "background-color: " + b;
  }
  return "";
}
Ext.define("MEM.view.awo.MyAWOPanel", {
  extend: Ext.Panel,
  alias: "widget.myawopanel",
  fullscreen: !0,
  config: {
    autoDestroy: !1,
    cls: "myawopanel",
    layout: { type: "card" },
    items: [
      {
        xtype: "container",
        docked: "top",
        cls: "my-topcontainer",
        width: "100%",
        scrollable: { direction: "horizontal", directionLock: !0 },
        items: [
          {
            xtype: "toolbar",
            ui: "my-status-button-ui",
            cls: "woToolbar",
            width: "4096",
            fieldLabel: T("Status"),
            items: [{ xtype: "segmentedbutton", allowDepress: !1 }],
          },
        ],
      },
      {
        xtype: "list",
        title: "All",
        autoDestroy: !1,
        scrollable: "vertical",
        store: "MyAdditionalWorkOrderStore",
        id: "MyAWOList",
        listeners: {
          painted: function () {
            this.up("myawopanel").fireEvent("panelshow");
          },
        },
        onItemDisclosure: !0,
        grouped: !0,
        indexBar: { xtype: "myindexbar" },
        ui: "round",
        itemTpl: [
          '<div class="status-box" style="{[AWOstatusColor(values.AdditionStatusId)]}"></div><span class="span-status"> {[ AWOpad(values.WorkOrderNo, 3)]}, {Name} </span><span class="span-date">{ProductionStartDate:date("' +
            Ext.util.Format.defaultDateFormat +
            '")}</span>',
        ],
      },
    ],
  },
});
Ext.define("MEM.ux.field.MySelectField", {
  extend: Ext.field.Select,
  alias: "widget.myselectfield",
  config: {
    clearIcon: !1,
    usePicker: !1,
    defaultTabletPickerConfig: {
      width: "95%",
      height: "20em",
      maxWidth: "30em",
    },
    listeners: {
      clearicontap: function () {
        this.setValue(null);
      },
    },
  },
  findRecord: function (e, d, f) {
    var b = this.getStore(),
      a = null;
    a = b.findRecord(e, d, 0, !1, !1, !0) || !1;
    if (!a && b.isFiltered() && f) {
      var c = b
        .queryBy(function (a, b) {
          return a.get(e) == d;
        })
        .getRange();
      if (c.length == 1) {
        a = c[0];
      }
    }
    return a;
  },
  checkValue: function () {
    var c = this.getStore(),
      b = this._myvalue || this._value;
    var a = this.findRecord(this.getValueField(), b);
    if (b && !b.isModel && !a) {
      var d = { Id: b, isTmpRec: !0 };
      a = this.findRecord(this.getValueField(), b, !0);
      if (a) {
        c.data.items = c.data.items.concat([a]);
        this.refreshPickerList();
      } else {
        var e = JSON.stringify(d);
        if (this.fireEvent("missingvalue", this, c, d)) {
          if (JSON.stringify(d) != e) {
            a = Ext.create(c.getModel().$className, d);
            c.add(a);
          }
        }
      }
      if (a) {
        this.record = a;
        return b;
      }
    }
  },
  reFilterStore: function () {
    var e = this.getStore();
    if (!e) {
      return;
    }
    var a = undefined,
      d = [],
      c = 0,
      g = 0,
      f = e.getFilters(),
      b = e.data.items;
    for (c in b) {
      a = b[c];
      for (g in f) {
        var i = f[g].getFilterFn();
        if (!i(a)) {
          d.push(a);
          break;
        }
      }
    }
    for (c in d) {
      a = d[c];
      var h = b.indexOf(a);
      b.splice(h, 1);
    }
  },
  setValue: function (a) {
    var c = this.getTabletPicker(),
      b = c ? c.down("list") : null;
    this.reFilterStore();
    this.refreshPickerList();
    this._myvalue = a;
    if (a && !a.isModel) {
      this.checkValue();
    }
    this.callParent(arguments);
    if (a == null || !Ext.isDefined(a)) {
      if (b && b.selected) {
        b.selected.clear();
      }
    }
  },
  refreshPickerList: function () {
    var a = this.getTabletPicker(),
      b = a ? a.down("list") : null;
    if (b) {
      b.refresh();
    }
  },
});
Ext.define("MEM.ux.dataview.List", {
  extend: Ext.dataview.List,
  alias: "widget.mylist",
  config: {
    headerItem: null,
    headerCls: "my-header-item",
    itemHeight: isPhone ? 22 : 42,
  },
  initialize: function () {
    var a = this,
      c,
      b = a.getHeaderItem();
    a.callParent(arguments);
    c = a;
    if (b) {
      b = Ext.applyIf(b, { cls: a.headerCls });
      a.headerTitle = c.insert(0, b);
    }
  },
  setTitleText: function (a) {
    this.headerTitle.setHtml(a);
  },
});
Ext.define("MEM.ux.field.MyDisplayField", {
  extend: Ext.field.Text,
  alias: "widget.mydisplayfield",
  config: {
    valueField: null,
    displayField: "",
    parentForm: "",
    cls: "mydisplayfield",
    listeners: {
      change: "onValueChange",
      painted: "onValueChange",
      erased: function () {
        this.setDisplayValue(null);
      },
    },
    needRight: "",
  },
  initialize: function () {
    this.callParent();
    this.element.on({ scope: this, tap: "onTap" });
  },
  onValueChange: function (c) {
    var a = this,
      b = a.up(a.getParentForm());
    if (a.displayValue) {
      a.setHtml("<span>" + a.displayValue + "</span>");
    } else {
      if (b && b.getRecord()) {
        if (b.getRecord().get(a.getDisplayField())) {
          a.setDisplayValue(b.getRecord().get(a.getDisplayField()));
        }
      }
    }
  },
  setDisplayValue: function (c) {
    var a = this;
    a.displayValue = c;
    var b = a.displayValue ? a.displayValue : "";
    a.setHtml("<span>" + b + "</span>");
  },
  setDisplayRecord: function (a, c, b) {
    this.setValue(a.get(c || this.getValueField() || this.getName()));
    this.setDisplayValue(a.get(b || this.getDisplayField()));
    this.fireEvent(
      "setData",
      this,
      a.get(c),
      a.get(b || this.getDisplayField())
    );
  },
  onTap: function (a) {
    this.fireEvent("tap", this, a);
  },
});
Ext.define("MEM.ux.dataview.MyInlineList", {
  extend: MEM.ux.dataview.List,
  alias: "widget.myinlinelist",
  config: { itemHeight: isPhone ? 28 : 42 },
  initialize: function () {
    this.on("painted", this.onPainted, this);
    this.on("erased", this.onUnPainted, this);
    this._paintActive = !1;
    this.callParent(arguments);
  },
  onPainted: function () {
    var a = this,
      b = a.getStore();
    if (!b.isLoading()) {
      a.fixHeight();
    }
    if (!a._paintActive) {
      b.on("load", a.fixHeight, a);
      a._paintActive = !0;
    }
  },
  onUnPainted: function () {
    var a = this,
      b = a.getStore();
    if (a._paintActive) {
      b.un("load", a.fixHeight, a);
      a._paintActive = !1;
    }
  },
  fixHeight: function () {
    var b = this,
      a = b.element.down(".x-list-inner .x-scroll-container"),
      d = a.down(".x-inner"),
      c = a.getTop() + Math.abs(a.getBottom()) + d.getHeight();
    b.setHeight(c);
  },
});
Ext.define("MEM.ux.dataview.MyChecklistList", {
  extend: Ext.Container,
  alias: "widget.mychecklistlist",
  config: { cls: "my-checklist", layout: "vbox" },
  constructor: function (a) {
    var b = [
      {
        html:
          '<div class="my-tpl-list itemno">' +
          T("Number") +
          "</div>" +
          '<div class="my-tpl-list description">' +
          T("Title") +
          "</div>" +
          '<div class="my-tpl-list checked">' +
          T("Checked") +
          "</div>" +
          '<div class="my-tpl-list checkdate">' +
          T("Date") +
          "</div>" +
          (isPhone
            ? ""
            : '<div class="my-tpl-list checknote">' + T("Comment") + "</div>"),
        border: 0,
        cls: "myHeader",
        itemId: "WorkOrderCheckListHeader",
      },
      {
        xtype: "myinlinelist",
        title: "Checklist",
        autoDestroy: !1,
        itemId: "WorkOrderCheckList",
        scrollable: null,
        width: "auto",
        itemTpl: [
          '<div class="my-tpl-list itemno">&nbsp;{ItemNo}</div>' +
            '<div class="my-tpl-list description">&nbsp;{ItemDescription}</div>' +
            '<div class="my-tpl-list checked my-pictos-icon boolcheckbox' +
            "{[values.Checked ? '' : ' me-no-checked' ]}" +
            '">' +
            "{[values.Checked ? '3' : '6' ]}" +
            "</div>" +
            '<div class="my-tpl-list checkdate">&nbsp;{[values.CheckDate==null ? "" : Ext.Date.format(values.CheckDate,"' +
            Ext.util.Format.defaultDateFormat.replace("Y", "y") +
            '")]}</div>' +
            (isPhone
              ? ""
              : '<div class="my-tpl-list checknote">{CheckNote}&nbsp;</div>') +
            '<div class="my-tpl-list my-double checklistcomment my-pictos-icon" style="min-height: 12px;" align="right">W</div>',
        ],
      },
    ];
    a = Ext.merge(a, { items: b });
    if (a.id) {
      a.items[1].id = a.id;
      delete a.id;
    }
    if (a.listeners) {
      a.items[1].listeners = a.listeners;
      delete a.listeners;
    }
    if (a.store) {
      a.items[1].store = a.store;
      delete a.store;
    }
    this.callParent([a]);
    this.down("myinlinelist").on("itemsingletap", this.onMyItemSingleTap, this);
    this.down("myinlinelist").getStore().on("load", this.onLoad, this);
  },
  onLoad: function (c, a, b) {
    this.down("#WorkOrderCheckListHeader").setHidden(a.length == 0);
  },
  onMyItemSingleTap: function (d, g, e, a, c, f) {
    if (c.target.className.indexOf("boolcheckbox") >= 0) {
      var b = this.up("myworkorderformpanel");
      if (b && b.getIsReadOnly()) {
        return;
      }
      if (a.get("Checked") || c.target.checked) {
        a.set("Checked", 0);
        a.set("CheckDate", null);
      } else {
        a.set("Checked", 1);
        a.set("CheckDate", Ext.Date.format(new Date(), "Y-m-d"));
      }
      a.setProxy(d.getStore().getProxy());
      a.save({
        success: function () {
          return !0;
        },
      });
    }
  },
});
Ext.define("MEM.ux.picker.DateTimePicker", {
  extend: Ext.picker.Picker,
  xtype: "datetimepicker",
  config: {
    yearFrom: 2011,
    yearTo: 2022,
    monthText: T("Month"),
    dayText: T("Day"),
    yearText: T("Year"),
    hourText: T("Hour"),
    minuteText: T("Minute"),
    ampmText: "AM/PM",
    slotOrder: Me.slotOrderDateTime,
    minuteInterval: 5,
    ampm: !1,
    clearIcon: null,
    useTitles: !1,
  },
  initialize: function () {
    this.callParent();
    this.on({ scope: this, delegate: "> slot", slotpick: this.onSlotPick });
  },
  setValue: function (a, g) {
    if (Ext.isDate(a)) {
      var c = this.getMinuteInterval(),
        f = a.getMinutes(),
        e = "AM",
        d = a.getHours(),
        b = a.getHours(),
        h = (parseInt((f + c / 2) / c) * c) % 60,
        i = f > 60 - c / 2 ? (b === 23 ? 0 : ++b) : b;
      if (this.getAmpm()) {
        if (d > 12) {
          e = "PM";
          b -= 12;
        } else {
          if (d == 12) {
            e = "PM";
          } else {
            if (d == 0) {
              b = 12;
            }
          }
        }
      }
      a = {
        day: a.getDate(),
        month: a.getMonth() + 1,
        year: a.getFullYear(),
        hour: i,
        minute: h,
        ampm: e,
      };
    }
    this.callParent([a, g]);
  },
  getValue: function () {
    var a = {},
      h,
      g,
      f,
      e,
      l = this.getItems().items,
      n = l.length,
      c,
      d;
    for (d = 0; d < n; d++) {
      c = l[d];
      if (c instanceof Ext.picker.Slot) {
        a[c.getName()] = c.getValue();
      }
    }
    h = this.getDaysInMonth(a.month, a.year);
    (g = Math.min(a.day, h)), (f = a.hour), (e = a.minute);
    var j = isNaN(a.year) ? new Date().getFullYear() : a.year,
      i = isNaN(a.month) ? new Date().getMonth() : a.month - 1,
      k = isNaN(g) ? new Date().getDate() : g,
      b = isNaN(f) ? new Date().getHours() : f,
      m = isNaN(e) ? new Date().getMinutes() : e;
    if (a.ampm && a.ampm == "PM" && b < 12) {
      b = b + 12;
    }
    if (a.ampm && a.ampm == "AM" && b == 12) {
      b = 0;
    }
    if (j === null || i === null || k === null) {
      return null;
    }
    return new Date(j, i, k, b, m);
  },
  updateYearFrom: function () {
    if (this.initialized) {
      this.createSlots();
    }
  },
  updateYearTo: function () {
    if (this.initialized) {
      this.createSlots();
    }
  },
  updateMonthText: function (e, c) {
    var d = this.getInnerItems,
      f = d.length,
      a,
      b;
    if (this.initialized) {
      for (b = 0; b < f; b++) {
        a = d[b];
        if ((typeof a.title == "string" && a.title == c) || a.title.html == c) {
          a.setTitle(e);
        }
      }
    }
  },
  updateDayText: function (e, d) {
    var c = this.getInnerItems,
      f = c.length,
      a,
      b;
    if (this.initialized) {
      for (b = 0; b < f; b++) {
        a = c[b];
        if ((typeof a.title == "string" && a.title == d) || a.title.html == d) {
          a.setTitle(e);
        }
      }
    }
  },
  updateYearText: function (d) {
    var c = this.getInnerItems,
      e = c.length,
      b,
      a;
    if (this.initialized) {
      for (a = 0; a < e; a++) {
        b = c[a];
        if (b.title == this.yearText) {
          b.setTitle(d);
        }
      }
    }
  },
  constructor: function () {
    this.callParent(arguments);
    this.createSlots();
  },
  createSlots: function () {
    var e = this,
      d = this.getSlotOrder(),
      b = e.getYearFrom(),
      c = e.getYearTo(),
      l = [],
      n = [],
      h = [],
      i = [],
      g = [],
      m = [],
      p,
      o,
      a,
      f;
    if (!this.getAmpm()) {
      var j = d.indexOf("ampm");
      if (j >= 0) {
        d.splice(j);
      }
    }
    if (b > c) {
      o = b;
      b = c;
      c = o;
    }
    for (a = b; a <= c; a++) {
      l.push({ text: a, value: a });
    }
    f = this.getDaysInMonth(1, new Date().getFullYear());
    for (a = 0; a < f; a++) {
      n.push({ text: a + 1, value: a + 1 });
    }
    for (a = 0, p = Ext.Date.monthNames.length; a < p; a++) {
      h.push({
        text: isPhone
          ? Ext.Date.monthNames[a].substring(0, 3)
          : Ext.Date.monthNames[a],
        value: a + 1,
      });
    }
    var q = this.getAmpm() ? 12 : 23;
    var r = this.getAmpm() ? 1 : 0;
    for (a = r; a <= q; a++) {
      i.push({ text: this.pad2(a), value: a });
    }
    for (a = 0; a < 60; a += this.getMinuteInterval()) {
      g.push({ text: this.pad2(a), value: a });
    }
    m.push({ text: "AM", value: "AM" }, { text: "PM", value: "PM" });
    var k = [];
    d.forEach(function (a) {
      k.push(this.createSlot(a, n, h, l, i, g, m));
    }, this);
    e.setSlots(k);
  },
  createSlot: function (a, g, c, e, d, b, f) {
    switch (a) {
      case "year":
        return {
          name: "year",
          align: isPhone ? "left" : "center",
          data: e,
          title: this.getYearText(),
          flex: isPhone ? 1.3 : 3,
        };
      case "month":
        return {
          name: a,
          align: isPhone ? "left" : "right",
          data: c,
          title: this.getMonthText(),
          flex: isPhone ? 1.2 : 4,
        };
      case "day":
        return {
          name: "day",
          align: isPhone ? "left" : "center",
          data: g,
          title: this.getDayText(),
          flex: isPhone ? 0.9 : 2,
        };
      case "hour":
        return {
          name: "hour",
          align: isPhone ? "left" : "center",
          data: d,
          title: this.getHourText(),
          flex: isPhone ? 0.9 : 2,
        };
      case "minute":
        return {
          name: "minute",
          align: isPhone ? "left" : "center",
          data: b,
          title: this.getMinuteText(),
          flex: isPhone ? 0.9 : 2,
        };
      case "ampm":
        return {
          name: "ampm",
          align: isPhone ? "left" : "center",
          data: f,
          title: this.getAmpmText(),
          flex: isPhone ? 1.1 : 2,
        };
    }
  },
  onSlotPick: function (a, d, c, e) {
    var b = a.getStore().getAt(a.selectedIndex).get(a.getValueField());
    a.setValue(b);
    if (a.getName() === "month" || a.getName() === "year") {
      this.repopulateDaySlot();
    }
  },
  repopulateDaySlot: function () {
    var c = this.getDaySlot(),
      a = [],
      d = this.getSlotByName("month").getValue(),
      e = this.getSlotByName("year").getValue(),
      b;
    b = this.getDaysInMonth(d, e);
    for (i = 0; i < b; i++) {
      a.push({ text: i + 1, value: i + 1 });
    }
    if (c.getData().length == a.length) {
      return;
    }
    c.setData(a);
  },
  getSlotByName: function (a) {
    return this.down("pickerslot[name=" + a + "]");
  },
  getDaySlot: function () {
    return this.getSlotByName("day");
  },
  getDaysInMonth: function (a, c) {
    var b = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    return a == 2 && this.isLeapYear(c) ? 29 : b[a - 1];
  },
  isLeapYear: function (a) {
    return !!((a & 3) === 0 && (a % 100 || (a % 400 === 0 && a)));
  },
  pad2: function (a) {
    return (a < 10 ? "0" : "") + a;
  },
});
Ext.define("MEM.ux.field.MyDateTimePicker", {
  extend: Ext.field.Text,
  xtype: "mydatetimepicker",
  config: {
    cls: "mydatetimepicker",
    ui: "select",
    picker: !0,
    destroyPickerOnHide: !1,
    dateTimeFormat: Ext.util.Format.defaultDateFormat + " H:i",
    component: { useMask: !0 },
  },
  initialize: function () {
    this.callParent();
    this.getComponent().on({ scope: this, masktap: "onMaskTap" });
    this.getComponent().input.dom.disabled = !0;
    this.getComponent().input.dom.style.backgroundColor = "white";
  },
  syncEmptyCls: Ext.emptyFn,
  applyValue: function (a) {
    if (!Ext.isDate(a) && !Ext.isObject(a)) {
      a = null;
    }
    if (Ext.isObject(a)) {
      a = new Date(a.year, a.month - 1, a.day, a.hour, a.minute);
    }
    return a;
  },
  updateValue: function (a) {
    var b = this._picker;
    if (b && b.isPicker) {
      b.setValue(a);
    }
    if (a !== null) {
      this.getComponent().setValue(
        Ext.Date.format(
          a,
          this.getDateTimeFormat() || Ext.util.Format.defaultDateFormat
        )
      );
    } else {
      this.getComponent().setValue("");
    }
    if (this._picker && this._picker instanceof MEM.ux.picker.DateTimePicker) {
      this._picker.setValue(a);
    }
  },
  updateDateFormat: function (a, c) {
    var b = this.getValue();
    if (
      a != c &&
      Ext.isDate(b) &&
      this._picker &&
      this._picker instanceof MEM.ux.picker.DateTimePicker
    ) {
      this.getComponent().setValue(
        Ext.Date.format(b, a || Ext.util.Format.defaultDateFormat)
      );
    }
  },
  getValue: function () {
    return this._value;
  },
  getFormattedValue: function (b) {
    var a = this.getValue();
    console.log(this.getDateTimeFormat(), "format");
    return Ext.isDate(a)
      ? Ext.Date.format(
          a,
          b || this.getDateTimeFormat() || Ext.util.Format.defaultDateFormat
        )
      : a;
  },
  applyPicker: function (b, a) {
    if (a && a.isPicker) {
      b = a.setConfig(b);
    }
    return b;
  },
  getPicker: function () {
    var a = this._picker,
      b = this.getValue();
    if (a && !a.isPicker) {
      a = Ext.factory(a, MEM.ux.picker.DateTimePicker);
      a.on({
        scope: this,
        cancel: "onPickerCancel",
        change: "onPickerChange",
        hide: "onPickerHide",
      });
      if (b !== null) {
        a.setValue(b);
      } else {
        a.setValue(new Date());
      }
      Ext.Viewport.add(a);
      this._picker = a;
    }
    return a;
  },
  onMaskTap: function () {
    if (this.getDisabled()) {
      return !1;
    }
    if (this.getReadOnly()) {
      return !1;
    }
    this.getPicker().show();
    return !1;
  },
  onPickerCancel: function (a, b) {
    this._picker = !0;
    a.destroy();
    return !0;
  },
  onPickerChange: function (c, b) {
    var a = this;
    a.setValue(b);
    a.fireEvent("change", a, a.getValue());
  },
  onPickerHide: function () {
    var a = this.getPicker();
    if (this.getDestroyPickerOnHide() && a) {
      a.destroy();
      this._picker = !0;
    }
  },
  reset: function () {
    this.setValue(this.originalValue);
  },
  destroy: function () {
    var a = this.getPicker();
    if (a && a.isPicker) {
      a.destroy();
    }
    this.callParent(arguments);
  },
});
Ext.define("MEM.ux.dataview.plugins.MyListPaging", {
  extend: Ext.plugin.ListPaging,
  alias: "plugin.mylistpaging",
  config: { requestGrouping: null },
  originalGrouping: null,
  storeFullyLoaded: function () {
    var a = this.getList().getStore(),
      b = a.getTotalCount();
    if (b === undefined) {
      return !0;
    }
    if (b !== null ? b <= a.currentPage * a.getPageSize() : !1) {
      this.getLoadMoreCmp().hide();
      return !0;
    } else {
      this.getLoadMoreCmp().show();
      return !1;
    }
    return b !== null ? b <= a.currentPage * a.getPageSize() : !1;
  },
  onStoreLoad: function (c) {
    var a = this,
      d = a.getList(),
      c = d.getStore(),
      b = a.addLoadMoreCmp();
    if (a.getRequestGrouping() !== null) {
      if (a.originalGrouping) {
        c.setGrouper(a.originalGrouping);
      }
    }
    a.setLoading(!1);
    a.storeFullyLoaded() ? b.hide() : a.getLoadMoreCmp().show();
    if (c.getCount() && !a.storeFullyLoaded()) {
      b.show();
    } else {
      b.hide();
    }
    if (this.scrollY) {
      this.getScroller().scrollTo(null, this.scrollY);
      delete this.scrollY;
    }
  },
  onStoreBeforeLoad: function (a) {
    var b = this;
    if (b.getRequestGrouping() !== null) {
      b.originalGrouping = a.getGrouper();
      a.setGrouper(b.getRequestGrouping());
    }
    if (a.getCount() === 0) {
      this.getLoadMoreCmp().hide();
    }
  },
  loadNextPage: function () {
    var a = this,
      c = a.getList(),
      b = c.getStore();
    if (!a.storeFullyLoaded() && !b.isLoading()) {
      a.disableDataViewMask();
      a.setLoading(!0);
      b.nextPage({ addRecords: !0 });
    }
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderRowList", {
  extend: Ext.Container,
  alias: "widget.myworkorderrowlist",
  config: {
    project: null,
    KPIName: T("KPIValue"),
    cls: ["myworkorderrowlist", "my-rowlist-hide-kpi"],
    layout: "vbox",
  },
  constructor: function (a) {
    var b = [
      {
        html:
          '<div class="rowform-delete wrl-item wrl-delete">&nbsp;</div>' +
          '<div class="wrl-item wrl-codeno">' +
          T("Art no") +
          "</div>" +
          '<div class="wrl-item wrl-title">' +
          T("ArtTitle") +
          "</div>" +
          '<div class="performeddateheader wrl-item wrl-performed">' +
          T("PerformedDate") +
          "</div>" +
          '<div class="x-days wrl-item wrl-days">' +
          T("Qty.") +
          "</div>" +
          '<div class="wrl-item wrl-plannedqty">' +
          T("Planned qty") +
          "</div>" +
          '<div class="wrl-item wrl-usedqty">' +
          T("UsedQty") +
          "</div>" +
          '<div class="wrl-item wrl-unit">' +
          T("Unit") +
          "</div>" +
          '<div class="wrl-item wrl-kpi">' +
          T("KPIValue") +
          "</div>" +
          '<div class="wrl-item wrl-woawo">' +
          T("WO/AWO") +
          "</div>",
        border: 0,
        cls: "myHeader",
      },
      {
        xtype: "myinlinelist",
        title: "Resourcerows",
        autoDestroy: !1,
        itemId: "WorkOrderRowList",
        scrollable: null,
        cls: "my-rowlist",
        width: "auto",
        itemTpl: [
          "<div " +
            '<tpl if="Locked == true">' +
            'class="wrl-item wrl-delete noTrashIcon"><span>&nbsp;</span>' +
            "<tpl else>" +
            'class="wrl-item wrl-delete x-button-normal x-button x-iconalign-center trashIcon x-button-icon">#' +
            "</tpl>" +
            "</div>" +
            '<div class="wrl-item wrl-codeno">&nbsp;{CodeNo}</div>' +
            '<div class="wrl-item wrl-title">&nbsp;{Title}</div>' +
            '<div class="performeddate wrl-item wrl-performed">&nbsp;{PerformedDate:date("' +
            Ext.util.Format.defaultDateFormat +
            '")}</div>' +
            '<div class="x-days wrl-item wrl-days">&nbsp;{Days_fmt}</div>' +
            '<div class="wrl-item wrl-plannedqty">&nbsp;{PlannedQty_fmt}</div>' +
            '<div class="wrl-item wrl-usedqty" align="right">&nbsp;{UsedQty_fmt}</div>' +
            '<div class="wrl-item wrl-unit">&nbsp;{[MEM.workorder.unit(values.ItemUnitId)]}</div>' +
            '<div class="wrl-item wrl-kpi" align="right">&nbsp;{KPIValue_fmt}</div>' +
            '<div class="wrl-item wrl-woawo">&nbsp;{[MEM.workorder.woNo(values.WorkOrderId)]}</div>',
        ],
        plugins: [
          {
            xclass: "MEM.ux.dataview.plugins.MyListPaging",
            loadMoreText: T("Load more..."),
          },
        ],
      },
    ];
    a = Ext.merge(a, { items: b });
    if (a.id) {
      a.items[1].id = a.id;
      delete a.id;
    }
    if (a.listeners) {
      a.items[1].listeners = a.listeners;
      delete a.listeners;
    }
    if (a.store) {
      a.items[1].store = a.store;
      delete a.store;
    }
    this.callParent([a]);
    this.down("myinlinelist").on("itemsingletap", this.onItemSingleTap, this);
    this.down("myinlinelist").on("painted", this.onPainted, this);
  },
  onItemSingleTap: function (f, e, c, a, b, d) {
    if (this.isDisabled()) {
      return;
    }
    if (b.target.className.indexOf("wrl-delete") >= 0) {
      this.fireEvent("meitemdelete", a);
    } else {
      this.fireEvent("meitemselect", f, e, c, a, b, d);
    }
  },
  initialize: function () {
    var a = this;
    Ext.Viewport.on("orientationchange", "showPerformedDate", this);
    this.callParent(arguments);
    this.getStore().on({
      scope: a,
      load: a.onWorkOrderRowLoad,
      beforeload: a.onBeforeWorkorderRowLoad,
    });
    this.prevFilter = null;
  },
  onBeforeWorkorderRowLoad: function (a, b, d) {
    var c = this;
    if (c.filterHasChanged(a.meFilters)) {
      a.currentPage = 1;
      b.setStart(0);
    }
  },
  onWorkOrderRowLoad: function (a) {
    var b = this.down("myinlinelist");
    b.setHeight(null);
    this.prevFilter = a.meFilters;
  },
  filterHasChanged: function (b) {
    if (this.prevFilter === null) {
      return !0;
    }
    if (this.prevFilter.length !== b.length) {
      return !0;
    }
    for (var a = this.prevFilter.length; a--; ) {
      if (this.prevFilter[a] !== b[a]) {
        return !0;
      }
    }
    return !1;
  },
  onPainted: function () {
    this.showPerformedDate(Ext.Viewport, Ext.Viewport.getOrientation());
    this.showDays();
    this.showPlannedQty();
  },
  showPerformedDate: function (c, b) {
    var a = this;
    if (b == "landscape" && getSetting("MEM.ShowPerformedDate") == "1") {
      a.removeCls("my-rowlist-hide-performdate");
    } else {
      a.addCls("my-rowlist-hide-performdate");
    }
  },
  showDays: function () {
    if (getSetting("MEM.Days") == "1") {
      this.removeCls("my-rowlist-hide-days");
    } else {
      this.addCls("my-rowlist-hide-days");
    }
  },
  showPlannedQty: function () {
    if (getSetting("MEM.PlannedQty") == "1") {
      this.removeCls("my-rowlist-hide-plannedqty");
    } else {
      this.addCls("my-rowlist-hide-plannedqty");
    }
  },
  getStore: function () {
    return this.down("myinlinelist").getStore();
  },
  applyProject: function (a, c) {
    var b = a && a.get("KPIRuleId");
    if (b) {
      this.removeCls("my-rowlist-hide-kpi");
    } else {
      this.addCls("my-rowlist-hide-kpi");
    }
    return a;
  },
  applyKPIName: function (a, e) {
    if (a == e) {
      return a;
    }
    var c = this.down("[cls=myHeader]"),
      d = "</div>",
      b = c.getHtml().split(d);
    a = a || T("KPIValue");
    b.forEach(function (b, c, d) {
      if (b.indexOf("wrl-kpi") > -1) {
        d[c] = Ext.String.format('<div class="wrl-item wrl-kpi">{0}', a);
      }
    });
    c.setHtml(b.join(d));
    return a;
  },
});
Ext.define("MEM.ux.form.MyTextAreaOverlay", {
  extend: Ext.form.Panel,
  xtype: "mytextareaoverlay",
  config: {
    cls: "mytextareaoverlay",
    left: 0,
    top: 0,
    layout: "vbox",
    myreadonly: !1,
    myrecord: null,
    modal: !0,
    hideOnMaskTap: !1,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    scrollModifier: 1.8,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            itemId: "textareabutton",
            iconMask: !0,
            listeners: {
              tap: function () {
                var a = this.up("panel");
                if (a.getMyreadonly()) {
                  a.hide();
                } else {
                  a.fireHandleTextEvent();
                }
              },
            },
          },
        ],
      },
      {
        xtype: "textareafield",
        maxRows: 15,
        cls: "my-textarea",
        labelWidth: 0,
        name: "textarea",
        autoComplete: !0,
        autoCapitalize: !0,
      },
    ],
  },
  initialize: function () {
    var a = this;
    a.element.on("drag", a.onTouchMove, a);
    a.callParent(arguments);
  },
  initOverlay: function (d, f, a, e, c, b) {
    this.setMyreadonly(a);
    this.setMyrecord(d);
    this.down("textareafield").setReadOnly(a);
    this.down("textareafield").setValue(f);
    this.down("textareafield").resetOriginalValue();
    if (b) {
      this.down("textareafield").setMaxLength(b);
    }
    this.showBy(e, c);
    if (a) {
      this.down("button").setIconCls("delete_black1");
    } else {
      this.down("button").setIconCls("check2");
    }
    this.on("painted", this.onPanelPainted);
    this.handleMaskTap();
  },
  fireHandleTextEvent: function () {
    var a = this;
    a.fireEvent(
      "handleText",
      a.getMyrecord(),
      a.down("textareafield").getValue()
    );
  },
  onPanelPainted: function () {
    this.down("textareafield").setHeight(
      this.element.down(".my-textarea").getHeight() + (isPhone ? 20 : -20)
    );
  },
  handleMaskTap: function () {
    var a = this,
      b = a.getModal();
    if (b) {
      b.on("tap", a.onMaskTap, a);
    }
  },
  onMaskTap: function () {
    var a = this;
    if (a.down("textareafield").isDirty()) {
      Ext.Msg.show({
        title: T("Keep changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (b) {
          if (b == "yes") {
            a.fireHandleTextEvent();
          } else {
            a.hide();
          }
        },
      });
    } else {
      a.hide();
    }
  },
  onTouchMove: function (b) {
    var a = this.down("textareafield").element.down("textarea");
    a.dom.scrollTop -= b.deltaY / this.getScrollModifier();
  },
});
Ext.define("MEM.ux.field.MyTextArea", {
  extend: Ext.Container,
  alias: "widget.mytextarea",
  autoComplete: !0,
  autoCapitalize: !0,
  clearIcon: !0,
  editorAlignment: "",
  label: "",
  labelAlign: "left",
  labelWrap: !0,
  maxRows: 20,
  name: "",
  showButton: !0,
  showPhrases: !1,
  config: {
    cls: "mytextarea",
    scrollModifier: 1.8,
    maxLength: undefined,
    readOnly: !1,
    phraseList: {
      xtype: "panel",
      left: 0,
      top: 0,
      layout: "vbox",
      modal: !0,
      hideOnMaskTap: !0,
      hidden: !1,
      width: "70%",
      height: "18em",
      contentEl: "content",
      styleHtmlContent: !0,
      scrollable: null,
      items: [
        {
          xtype: "toolbar",
          docked: "top",
          title: isPhone ? "" : T("Phrase"),
          layout: { pack: "end" },
          items: [
            {
              xtype: "button",
              cls: "x-button-icon-standard",
              iconCls: "check2",
              iconMask: !0,
            },
            {
              xtype: "button",
              cls: "x-button-icon-standard",
              iconCls: "delete_black1",
              iconMask: !0,
            },
          ],
        },
        {
          xtype: "mylist",
          flex: 1,
          store: "MyPhraseStore",
          mode: "MULTI",
          itemId: "phraselist",
          ui: "round",
          itemHeight: isPhone ? 28 : 42,
          itemTpl: "<div>{Phrase}</div>",
        },
      ],
    },
  },
  constructor: function (b) {
    var a = this,
      e = Ext.isDefined(b.showButton)
        ? b.showButton === !0
          ? !0
          : !1
        : a.showButton,
      c = Ext.isDefined(b.showPhrases)
        ? b.showPhrases === !0
          ? !0
          : !1
        : a.showPhrases;
    a.setMaxLength(b.maxLength || a.getMaxLength());
    b.items = [
      {
        xtype: "textareafield",
        itemId: "notefield",
        autoComplete: b.autoComplete === !1 ? !1 : a.autoComplete,
        autoCapitalize: b.autoCapitalize === !1 ? !1 : a.autoCapitalize,
        clearIcon: b.clearIcon === !1 ? !1 : a.clearIcon,
        height: b.height || a.height,
        label: b.label || a.label,
        labelAlign: b.labelAlign || a.labelAlign,
        labelWidth: b.labelWidth || a.labelWidth,
        labelWrap: b.labelWrap || a.labelWrap,
        name: b.name || a.name,
        maxRows: b.maxRows || a.maxRows,
        maxLength: a.getMaxLength() ? a.getMaxLength() : null,
        style: b.style || a.style,
      },
    ];
    if (e || c) {
      var d = [];
      if (e) {
        d.push({
          margin: c ? "2 0 0 0" : 2,
          listeners: {
            painted: function () {
              a.onPainted();
            },
            tap: function () {
              a.onButtonTap();
            },
          },
          xtype: "button",
          itemId: "notebutton",
          docked: c ? "right" : "left",
          text: "...",
          cls: "x-button-icon-standard ellipsisButton",
          iconMask: !0,
        });
      }
      if (c) {
        d.push({
          margin: 2,
          listeners: {
            tap: function () {
              a.onPhraseButtonTap();
            },
          },
          xtype: "button",
          itemId: "phrasebutton",
          docked: "left",
          cls: "x-button-icon-standard",
          iconCls: "list",
          iconMask: !0,
          hidden: !0,
        });
      }
      b.items.push({
        margin: "0 0 0 -2.5em",
        itemId: "buttonPanel",
        xtype: "container",
        docked: "left",
        cls: "ellipsisButtonPanel",
        items: d,
      });
    }
    a.editorAlignment = b.editorAlignment || a.editorAlignment;
    a.callParent(arguments);
  },
  setRequired: function (a) {
    if (!a) {
      this.down("#notefield").removeCls("x-invalid");
    }
    this.down("#notefield").setRequired(a);
  },
  setPlaceHolder: function (a) {
    this.down("#notefield").setPlaceHolder(a);
  },
  setValue: function (a) {
    this.down("#notefield").setValue(a);
  },
  getValue: function () {
    return this.down("#notefield").getValue();
  },
  applyPhraseList: function (b) {
    var a = this;
    if (!a.phraseList) {
      a.phraseList = Ext.factory(b, Ext.Panel);
      a.phraseList.on("painted", a.onPhrasePanelPainted, a);
    }
    return a.phraseList;
  },
  applyReadOnly: function (a, d) {
    var c = this.down("#notebutton"),
      b = this.down("#phrasebutton");
    this.down("#notefield").setReadOnly(a);
    if (c) {
      c.setDisabled(a);
    }
    if (b) {
      b.setDisabled(a);
    }
    return a;
  },
  onPhrasePanelPainted: function () {
    var a = this.getPhraseList();
    a.query("button")[0].on("tap", this.onFetchPhrase, this, { single: !0 });
    a.query("button")[1].on("tap", this.onClosePhrase, this, { single: !0 });
  },
  onPainted: function () {
    var b = this,
      a = b.down("#buttonPanel"),
      c = b.down("#phrasebutton"),
      d = c && Ext.getStore("MyPhraseStore").data.items.length > 0;
    if (a) {
      a.setLeft(b.down("#notefield").getLabelWidth());
    }
    var f = isPhone ? 2 : 7;
    var e = Ext.String.format(
      "0 0 {0} -{1}px",
      isPhone && !d ? 2 : 0,
      a.element.getWidth() + f
    );
    a.setMargin(e);
    if (d) {
      c.setHidden(!1);
    }
  },
  onButtonTap: function () {
    var a = this,
      b,
      c,
      d = !1,
      e = a;
    b = Ext.create("MEM.ux.form.MyTextAreaOverlay");
    c = a.down("#notefield").getValue();
    b.initOverlay(null, c, d, e, a.editorAlignment, a.getMaxLength());
    b.on({
      handleText: {
        fn: function (d, c) {
          a.down("#notefield").setValue(c);
          b.hide();
        },
        single: !0,
      },
    });
  },
  onPhraseButtonTap: function () {
    var b = this,
      a = b.getPhraseList();
    a.down("#phraselist").deselectAll(!0);
    a.showBy(this, "");
  },
  onFetchPhrase: function () {
    var a = this,
      e = a.getPhraseList(),
      g = e.down("#phraselist").getSelection(),
      c = a.down("#notefield"),
      f = c.getValue(),
      d = f.length > 0 ? [f] : [];
    Ext.each(g, function (a, b, c) {
      d.push(a.get("Phrase"));
    });
    var b = d.join("\n");
    if (a.getMaxLength()) {
      b = b.substr(0, a.getMaxLength());
    }
    c.setValue(b);
    e.hide();
  },
  onClosePhrase: function () {
    panel = this.getPhraseList().hide();
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderContactList", {
  extend: Ext.Container,
  alias: "widget.myworkordercontactlist",
  config: { cls: "myworkordercontactlist", layout: "vbox" },
  constructor: function (a) {
    var b = [
      {
        html:
          '<div class="wrl-item wrl-customername">' +
          T("Supplier") +
          "</div>" +
          '<div class="wrl-item wrl-contactname">' +
          T("Contact") +
          "</div>" +
          '<div class="wrl-item wrl-mobile">' +
          T("Mobile") +
          "</div>",
        border: 0,
        cls: "myHeader",
        height: isPhone ? 15 : 20,
      },
      {
        xtype: "myinlinelist",
        title: "Suppliers",
        autoDestroy: !1,
        itemId: "MyWorkOrderContactList",
        scrollable: null,
        cls: "my-rowlist",
        width: "auto",
        itemTpl: [
          '<div class="wrl-item wrl-customername">&nbsp;{CustomerName}</div>' +
            '<div class="wrl-item wrl-contactname">&nbsp;{ContactName}</div>' +
            '<div class="wrl-item wrl-mobile">&nbsp;<a href="tel://{Mobile}">{Mobile}</div>',
        ],
      },
      { xtype: "spacer", height: 20 },
    ];
    a = Ext.merge(a, { items: b });
    if (a.id) {
      a.items[1].id = a.id;
      delete a.id;
    }
    if (a.listeners) {
      a.items[1].listeners = a.listeners;
      delete a.listeners;
    }
    if (a.store) {
      a.items[1].store = a.store;
      delete a.store;
    }
    this.callParent([a]);
  },
});
Ext.namespace("MEM.workorder");
MEM.workorder.unit = function (c) {
  var b = Ext.getStore("MyItemUnitStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("UnitName");
  }
  return "";
};
MEM.workorder.wo = function (c) {
  var b = Ext.getStore("MyWorkOrderListStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("Name");
  }
  return "";
};
MEM.workorder.woNo = function (c) {
  var b = Ext.getStore("MyWorkOrderListStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    if (a.get("Addition")) {
      return AWOpad(a.get("WorkOrderNo"), 3);
    } else {
      return pad(a.get("WorkOrderNo"), 3);
    }
  }
  return "";
};
Ext.define("Ext.ux.displayfield", {
  extend: Ext.field.Text,
  alias: "widget.displayfield",
  xtype: "displayfield",
  config: { readOnly: !0, clearIcon: !1 },
});
Ext.define("MEM.view.workorder.MyWorkOrderFormPanel", {
  extend: Ext.form.Panel,
  fullscreen: !0,
  alias: "widget.myworkorderformpanel",
  config: {
    cls: "myworkorderformpanel",
    autoDestroy: !1,
    isReadOnly: !1,
    project: null,
    xtype: "fieldset",
    defaults: { labelWidth: "40%" },
    scrollable: "vertical",
    items: [
      {
        id: "myWorkOrderId",
        itemId: "workorderfield",
        xtype: "hiddenfield",
        name: "Id",
        listeners: {
          change: function () {
            var a = isNaN(parseInt(Ext.getCmp("myWorkOrderId").getValue(), 10));
            this.up("myworkorderformpanel").lockButtons(a);
            this.up("myworkorderformpanel")
              .down("#responsibleForemanId")
              .setReadOnly(!a);
            this.up("myworkorderformpanel")
              .down("#foremanSearch")
              .setHidden(!a);
          },
        },
      },
      {
        xtype: "container",
        items: [
          {
            xtype: "myselectfield",
            store: "MyCloneProjectListStore",
            labelWidth: "40%",
            displayField: "Project",
            valueField: "Id",
            id: "myWOProjectId",
            itemId: "projectfield",
            label: T("Project"),
            name: "ProjectId",
          },
          {
            top: 2,
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("myselectfield").getLabelWidth());
              },
            },
            xtype: "button",
            id: "WOProjectSearchButton",
            action: "projectSearch",
            docked: "left",
            iconCls: "search",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
        ],
        listeners: {
          painted: function (a) {
            if (MEM.app.userIsPartner()) {
              this.setHidden(!0);
              this.setDisabled(!0);
              this.getItems().each(function (b) {
                b.setDisabled(!0);
              });
            }
          },
        },
      },
      {
        xtype: "textfield",
        itemId: "woNo",
        label: T("WorkOrderNo"),
        name: "WorkOrderNo",
        listeners: {
          painted: function () {
            if (getSetting("WorkOrderNoUnique") == "1") {
              this.setDisabled(!0);
            }
          },
        },
      },
      {
        xtype: "textfield",
        itemId: "woName",
        label: T("WorkOrderDescription"),
        name: "Name",
        required: !0,
      },
      {
        xtype: "container",
        items: [
          {
            id: "myWOCustomerId",
            itemId: "customerfield",
            xtype: "mydisplayfield",
            readOnly: !0,
            parentForm: "myworkorderformpanel",
            displayField: "CustomerName",
            labelWidth: "40%",
            label: T("Customer"),
            name: "CustomerId",
            needRight: "WorkOrder",
          },
          {
            top: 2,
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                var a = this.up().down("mydisplayfield");
                this.setLeft(a.getLabelWidth());
                if (!haveRight(a.getNeedRight(), 4)) {
                  this.setHidden(!0);
                  var b = this.up().down("#ContactButton");
                  b.setMargin(this.getMargin());
                }
              },
            },
            xtype: "button",
            action: "customerSearch",
            iconCls: "search",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
          {
            id: "ContactButton",
            top: 2,
            margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("mydisplayfield").getLabelWidth());
              },
            },
            xtype: "button",
            iconCls: "user",
            cls: "x-button-icon-standard",
            iconMask: !0,
            action: "contactShow",
          },
        ],
      },
      {
        itemId: "customerContactId",
        xtype: "myselectfield",
        store: {
          type: "mycustomercontactliststorealias",
          storeId: "WorkOrderFormPanel_MyCustomerContactStore",
          sorters: [{ property: "ContactName", direction: "ASC" }],
        },
        displayField: "ContactName",
        valueField: "Id",
        label: T("Customer contact"),
        name: "CustomerAgentId",
        autoSelect: !1,
      },
      {
        itemId: "customerRefNo",
        xtype: "mytextarea",
        label: T("Customer Ref No"),
        name: "CustomerRefNo",
        maxRows: 1,
        maxLength: 1024,
        autoComplete: !1,
        autoCapitalize: !1,
        showPhrases: !0,
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.CustomerRefNo") != "1");
          },
        },
      },
      {
        itemId: "frameworkContractId",
        xtype: "myselectfield",
        store: {
          type: "myframeworkcontractstorealias",
          storeId: "WorkOrderFormPanel_MyFrameworkContractStore",
          sorters: [{ property: "Name", direction: "ASC" }],
        },
        displayField: "Name",
        valueField: "Id",
        label: T("Framework contract"),
        name: "FrameworkContractId",
        autoSelect: !1,
        clearIcon: !0,
        listeners: {
          painted: function (a) {
            if (
              Me.formValidateHidden("WorkOrderStore", "FrameworkContractId")
            ) {
              this.setHidden(!0);
              this.setDisabled(!0);
            }
          },
        },
      },
      {
        itemId: "serviceCategoryId",
        xtype: "myselectfield",
        store: {
          type: "myservicecategorystorealias",
          storeId: "WorkOrderFormPanel_MyServiceCategoryStore",
          sorters: [{ property: "Name", direction: "ASC" }],
        },
        displayField: "Name",
        valueField: "Id",
        autoSelect: !1,
        clearIcon: !0,
        label: T("Service category"),
        name: "ServiceCategoryId",
        listeners: {
          painted: function (a) {
            if (Me.formValidateHidden("WorkOrderStore", "ServiceCategoryId")) {
              this.setHidden(!0);
              this.setDisabled(!0);
            }
          },
        },
      },
      {
        itemId: "createdid",
        xtype: "myselectfield",
        store: {
          type: "myuserliststorealias",
          filters: [{ property: "Disabled", value: !1 }],
        },
        listeners: {
          painted: function () {
            var a = this.up().getRecord().get("CreatedId");
            if (a == 1) {
              this.setValue(null);
            } else {
              if (!a) {
                this.setValue(MEM.app.getUserId());
              }
            }
          },
        },
        disabled: !0,
        displayField: "FullName",
        valueField: "Id",
        label: T("Reported by"),
        name: "CreatedId",
      },
      {
        xtype: "container",
        items: [
          {
            xtype: "myselectfield",
            id: "myResponsibleServiceId",
            store: {
              type: "myuserliststorealias",
              filters: [{ property: "Disabled", value: !1 }],
            },
            displayField: "FullName",
            valueField: "Id",
            labelWidth: "40%",
            clearIcon: !0,
            label: T("Assign to"),
            name: "ResponsibleServiceId",
          },
          {
            top: 2,
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("myselectfield").getLabelWidth());
                var a = this.up().down("#UserButton");
                if (a) {
                  a.setLeft(this.getLeft());
                }
              },
            },
            xtype: "button",
            action: "userSearch",
            docked: "left",
            iconCls: "search",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
          {
            id: "UserButton",
            top: 2,
            margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("button").getLeft());
              },
            },
            xtype: "button",
            iconCls: "user",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
            action: "setUser",
          },
        ],
      },
      {
        xtype: "container",
        items: [
          {
            itemId: "responsibleForemanId",
            xtype: "myselectfield",
            store: {
              type: "myuserliststorealias",
              filters: [{ property: "Disabled", value: !1 }],
            },
            displayField: "FullName",
            valueField: "Id",
            labelWidth: "40%",
            clearIcon: !0,
            autoSelect: !1,
            label: T("Responsible foreman"),
            name: "ResponsibleForemanId",
          },
          {
            top: 2,
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("myselectfield").getLabelWidth());
              },
            },
            xtype: "button",
            itemId: "foremanSearch",
            action: "foremanSearch",
            docked: "left",
            iconCls: "search",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
        ],
      },
      {
        xtype: "myselectfield",
        itemId: "workPoolGroupId",
        store: "MyGroupStore",
        displayField: "GroupName",
        valueField: "Id",
        labelWidth: "40%",
        clearIcon: !0,
        label: T("WorkPool"),
        name: "WorkPoolId",
        listeners: {
          painted: function (a) {
            if (getSetting("MEM.WorkPool") != "1") {
              this.setHidden(!0);
            } else {
              this.setHidden(!1);
            }
          },
        },
      },
      {
        xtype: "container",
        items: [
          {
            listeners: {
              painted: function () {
                this.init = !0;
              },
            },
            xtype: "myselectfield",
            id: "myWorkOrderStatusId",
            init: !1,
            store: "LocalWorkOrderStatusStore",
            displayField: "StatusName",
            valueField: "Id",
            labelWidth: "40%",
            label: T("Status"),
            name: "WorkOrderStatusId",
          },
          {
            top: 2,
            itemId: "sendStatusMail",
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setHidden(!MEM.app.userIsPartner());
                this.setLeft(this.up().down("myselectfield").getLabelWidth());
                var a = this.up().down("#signatureButton");
                if (a) {
                  a.setLeft(this.getLeft());
                }
              },
            },
            xtype: "button",
            action: "statusmail",
            docked: "left",
            iconCls: "mail",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
          {
            id: "signatureButton",
            top: 2,
            margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("button").getLeft());
              },
            },
            xtype: "button",
            iconCls: "compose",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
            action: "signature",
            hidden: !0,
          },
        ],
      },
      {
        xtype: "container",
        itemId: "externalstatus",
        items: [
          {
            listeners: {
              painted: function () {
                this.init = !0;
              },
            },
            xtype: "textfield",
            itemId: "externalstatusname",
            labelWidth: "40%",
            label: T("External status"),
            name: "ExternalStatusName",
            readOnly: !0,
          },
          {
            top: 2,
            itemId: "showExternalStatusComment",
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("textfield").getLabelWidth());
              },
            },
            xtype: "button",
            action: "externalstatuscomment",
            docked: "left",
            text: "...",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
          },
        ],
        listeners: {
          painted: function (a) {
            if (!haveRight("ExternalWorkOrderStatus")) {
              this.setHidden(!0);
            }
          },
        },
      },
      {
        xtype: "textfield",
        label: T("Address"),
        name: "WorkplaceAddress",
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.WorkplaceAddress") != "1");
          },
        },
      },
      {
        xtype: "container",
        items: [
          {
            id: "workDescription",
            xtype: "mytextarea",
            label: T("WorkDescription"),
            labelWidth: "40%",
            name: "WorkDescription",
            maxRows: 3,
            showPhrases: !0,
            height: isPhone ? PHONE_TEXTAREA_HEIGHT : PAD_TEXTAREA_HEIGHT,
          },
        ],
      },
      {
        xtype: "container",
        items: [
          {
            id: "workFeedback",
            xtype: "mytextarea",
            label: T("Feedback"),
            labelWidth: "40%",
            name: "WorkFeedback",
            maxRows: 1,
            showPhrases: !0,
            height: (isPhone ? PHONE_TEXTAREA_HEIGHT : PAD_TEXTAREA_HEIGHT) / 2,
          },
        ],
      },
      {
        xtype: "container",
        items: [
          {
            xtype: "textfield",
            itemId: "gpsX",
            labelWidth: "40%",
            label: T("Gps X"),
            name: "GpsX",
          },
          {
            top: 2,
            margin: "0 0 0 -2.5em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("#gpsX").getLabelWidth());
                var a = this.up().down("#mapButton");
                if (a) {
                  a.setLeft(this.getLeft());
                }
              },
            },
            xtype: "button",
            itemId: "posButton",
            iconCls: "locate",
            cls: "x-button-icon-standard",
            islockable: !0,
            iconMask: !0,
            action: "setPosition",
          },
          {
            top: 2,
            margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
            listeners: {
              painted: function () {
                this.setLeft(this.up().down("#posButton").getLeft());
                this.setHidden(!this.up().down("#gpsX").getValue());
              },
            },
            xtype: "button",
            itemId: "mapButton",
            iconCls: "browser",
            cls: "x-button-icon-standard",
            iconMask: !0,
            action: "showPosition",
          },
        ],
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.Position") != "1");
          },
        },
      },
      {
        xtype: "textfield",
        itemId: "gpsY",
        labelWidth: "40%",
        label: T("Gps Y"),
        name: "GpsY",
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.Position") != "1");
          },
        },
      },
      {
        xtype: "container",
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.ProductionStart") != "1");
          },
        },
        items: [
          {
            xtype: "mydatetimepicker",
            clearIcon: !0,
            id: "myProductionStartClock",
            label: "&nbsp;",
            labelWidth: "40%",
            name: "ProductionStart",
            listeners: {
              painted: function (a) {
                this.up("myworkorderformpanel").handleProductionDate(a);
              },
              change: function (a) {
                this.up("myworkorderformpanel").handleProductionDate(a);
              },
            },
          },
          {
            top: 2,
            margin: "0 0 0 10px",
            id: "myProductionStartButton",
            docked: "left",
            xtype: "button",
            ui: "confirm",
            text: T("Start"),
            islockable: !0,
            minWidth: "30%",
            listeners: {
              tap: function () {
                var a = new Date();
                a.setMilliseconds(0);
                Ext.getCmp("myProductionStartClock").setValue(a);
              },
            },
          },
        ],
      },
      {
        xtype: "container",
        listeners: {
          painted: function (a) {
            this.setHidden(getSetting("MEM.ProductionEnd") != "1");
          },
        },
        items: [
          {
            xtype: "mydatetimepicker",
            clearIcon: !0,
            id: "myProductionEndClock",
            label: "&nbsp;",
            labelWidth: "40%",
            name: "ProductionEnd",
            listeners: {
              painted: function (a) {
                this.up("myworkorderformpanel").handleProductionDate(a);
              },
              change: function (a) {
                this.up("myworkorderformpanel").handleProductionDate(a);
              },
            },
          },
          {
            top: 2,
            margin: "0 0 0 10px",
            id: "myProductionEndButton",
            docked: "left",
            xtype: "button",
            ui: "confirm",
            text: T("Finished"),
            islockable: !0,
            minWidth: "30%",
            listeners: {
              tap: function () {
                var a = new Date();
                a.setMilliseconds(0);
                Ext.getCmp("myProductionEndClock").setValue(a);
              },
            },
          },
        ],
      },
      {
        xtype: "container",
        cls: "savecontainer",
        items: [
          {
            xtype: "button",
            id: "WorkOrderSaveButton",
            minWidth: "20%",
            centered: !0,
            ui: "confirm",
            text: T("Save"),
          },
        ],
      },
      { xtype: "spacer", height: isPhone ? 30 : 50 },
      {
        xtype: "container",
        itemId: "MyWorkOrderContactListHeader",
        hidden: !0,
        items: [
          {
            xtype: "toolbar",
            ui: "light",
            title: T("Suppliers"),
            margin: "0 -1em 0 -1em",
            height: isPhone ? 36 : 40,
            layout: { align: "center", type: "hbox" },
          },
        ],
      },
      {
        xtype: "myworkordercontactlist",
        store: "MyWorkOrderContactStore",
        itemId: "MyWorkOrderContactList",
        hidden: !0,
      },
      {
        xtype: "container",
        id: "MyChecklistContainer",
        items: [
          {
            xtype: "toolbar",
            ui: "light",
            title: T("Checklist"),
            margin: "0 -1em 0 -1em",
            height: isPhone ? 36 : 40,
            layout: { align: "center", type: "hbox" },
          },
        ],
      },
      {
        xtype: "mychecklistlist",
        store: "MyChecklistRowStore",
        id: "MyChecklistRowList",
      },
      { xtype: "spacer", height: 20 },
      {
        xtype: "toolbar",
        ui: "light",
        title: T("Resourcerows"),
        margin: "0 -1em 0 -1em",
        layout: { align: "center", type: "hbox" },
        cls: "myresourceheader",
        items: [
          {
            itemId: "rowdelete",
            xtype: "button",
            cls: "x-button-icon-standard",
            docked: "left",
            iconCls: "trash2",
            iconMask: !0,
            hidden: !0,
          },
          {
            id: "rowadd",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            text: T("Add"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "add",
            iconMask: !0,
          },
          {
            id: "rowsaddtimewo",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            iconCls: "time-clock",
            text: T("Time"),
            iconAlign: isPhone ? "top" : "left",
            iconMask: !0,
          },
          {
            id: "addfile",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Image"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "camera",
            iconMask: !0,
          },
          {
            id: "rowsaddwofav",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            iconCls: "favorites",
            text: T("Favorite"),
            iconAlign: isPhone ? "top" : "left",
            iconMask: !0,
          },
        ],
      },
      {
        xtype: "myworkorderrowlist",
        store: "MyWorkOrderRowStore",
        id: "MyWorkOrderRowList",
        itemId: "WorkOrderRows",
        listeners: {
          painted: function (b) {
            var a = this.up("myworkorderformpanel");
            a.showPerformedDate(Ext.Viewport, Ext.Viewport.getOrientation());
            a.showDays();
          },
        },
      },
    ],
  },
  initialize: function () {
    Ext.Viewport.on("orientationchange", "showPerformedDate", this);
    this.callParent(arguments);
  },
  setRecord: function (a) {
    var e = this.down("#myResponsibleServiceId").getStore(),
      g = a.get("ResponsibleServiceId");
    e.clearFilter();
    e.filterBy(function (b) {
      return !b.get("Disabled") || b.get("Id") === g;
    });
    var h = Ext.create("MEM.model.ProjectList", {
        Id: a.get("ProjectId"),
        KPIRuleId: a.get("KPIRuleId"),
      }),
      b = this.down("#myWorkOrderStatusId").getStore(),
      f = b.findRecord("Id", a.get("WorkOrderStatusId"));
    this.fireEvent("beforedataupdated", a);
    this.down("#WorkOrderRows").setProject(h);
    if (!f) {
      var d = Ext.getStore("MyCloneWorkOrderStatusStore").findRecord(
          "Id",
          a.get("WorkOrderStatusId")
        ),
        c = Ext.ModelManager.create(
          {
            Id: d.get("Id"),
            StatusCode: d.get("StatusCode"),
            StatusName: d.get("StatusName"),
            TempRec: !0,
          },
          b.getModel()
        );
      b.add(c);
    } else {
      if (!f.get("TmpRec")) {
        var c = b.findRecord("TmpRec", !0);
        if (c) {
          b.remove(c);
        }
      }
    }
    var i = this.callParent(arguments);
    this.fireEvent("dataupdated", a);
    return i;
  },
  showPerformedDate: function (c, b) {
    var a = this;
    if (b == "landscape" && getSetting("MEM.ShowPerformedDate") == "1") {
      a.down("#WorkOrderRows").removeCls("my-rowlist-hide-performdate");
    } else {
      a.down("#WorkOrderRows").addCls("my-rowlist-hide-performdate");
    }
  },
  handleProductionDate: function (c) {
    var a = c.isComponent ? c : this.down("#" + c.getId()),
      b = a.getValue() ? !0 : !1;
    switch (a.getId()) {
      case "myProductionStartClock":
        this.down("#myProductionStartButton").setHidden(b);
        this.down("#myProductionStartClock").setLabel(
          b ? T("Start") : "&nbsp;"
        );
        break;
      case "myProductionEndClock":
        Ext.getCmp("myProductionEndButton").setHidden(b);
        Ext.getCmp("myProductionEndClock").setLabel(
          b ? T("Finished") : "&nbsp;"
        );
        break;
    }
    if (a.getClearIcon()) {
      if (b) {
        a.showClearIcon();
      } else {
        a.hideClearIcon();
      }
    }
  },
  showDays: function () {
    if (getSetting("MEM.Days") == "1") {
      this.down("#WorkOrderRows").removeCls("my-rowlist-hide-days");
    } else {
      this.down("#WorkOrderRows").addCls("my-rowlist-hide-days");
    }
  },
  getProjectId: function () {
    var a = this.down("#projectfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getWorkOrderId: function () {
    var a = this.down("#workorderfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getCustomerId: function () {
    var a = this.down("#customerfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getRightStoreName: function () {
    return "WorkOrderStore";
  },
  getRightStoreId: function () {
    return this.getWorkOrderId();
  },
  lockButtons: function (a) {
    this.down("#rowadd").setDisabled(a);
    this.down("#rowsaddwofav").setDisabled(a);
    this.down("#rowsaddtimewo").setDisabled(a);
    this.down("#addfile").setDisabled(a);
  },
  applyIsReadOnly: function (a, b) {
    this.lockButtons(a);
    this.lockControls(a);
    this.down("#WorkOrderSaveButton").setDisabled(a);
    if (this.getRecord()) {
      this.getRecord().set("IsReadOnly", a);
    }
    return a;
  },
  lockControls: function (a) {
    this.lockControlsByType("textfield", a);
    this.lockControlsByType("myselectfield", a);
    this.lockControlsByType("mytextarea", a);
    this.lockControlsByType("mydatetimepicker", a);
    Ext.ComponentQuery.query("[islockable=true]", this).forEach(function (b) {
      b.setDisabled(a);
    });
  },
  lockControlsByType: function (b, a) {
    Ext.ComponentQuery.query("[xtype=" + b + "]", this).forEach(function (c) {
      c.setReadOnly(a);
    });
  },
});
Ext.define("Ext.ux.displayfield", {
  extend: Ext.field.Text,
  alias: "widget.displayfield",
  xtype: "displayfield",
  config: { readOnly: !0, clearIcon: !1 },
});
Ext.define("MEM.view.awo.MyAWOFormPanel", {
  extend: Ext.form.Panel,
  fullscreen: !0,
  alias: "widget.myawoformpanel",
  config: {
    cls: "myawoformpanel",
    autoDestroy: !1,
    scroll: "vertical",
    defaults: {
      labelWidth: LABEL_WIDTH,
      defaults: {
        labelWidth: LABEL_WIDTH,
        defaults: { labelWidth: LABEL_WIDTH },
      },
    },
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            id: "myAWOId",
            itemId: "awoidfield",
            xtype: "hiddenfield",
            name: "Id",
            listeners: {
              change: function () {
                var a = isNaN(parseInt(Ext.getCmp("myAWOId").getValue(), 10));
                if (a == !0) {
                  Ext.getCmp("rowaddAWO").setDisabled(!0);
                  Ext.getCmp("addfileAWO").setDisabled(!0);
                } else {
                  Ext.getCmp("rowaddAWO").setDisabled(!1);
                  Ext.getCmp("addfileAWO").setDisabled(!1);
                }
              },
            },
          },
          {
            xtype: "myselectfield",
            store: "MyCloneProjectListStore",
            displayField: "Project",
            valueField: "Id",
            id: "myAWOProjectId",
            label: T("Project"),
            hidden: !0,
            name: "ProjectId",
          },
          {
            id: "myAWOWorkOrderNo",
            xtype: "textfield",
            label: T("AWO no"),
            name: "WorkOrderNo",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            itemId: "awoName",
            label: T("Title"),
            name: "Name",
            required: !0,
          },
          {
            xtype: "container",
            items: [
              {
                id: "myAWOCustomerId",
                itemId: "customerfield",
                xtype: "mydisplayfield",
                readOnly: !0,
                parentForm: "myawoformpanel",
                displayField: "CustomerName",
                label: T("Customer"),
                name: "CustomerId",
                needRight: "AdditionalWorkOrder",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    var a = this.up().down("mydisplayfield");
                    this.setLeft(a.getLabelWidth());
                    if (!haveRight(a.getNeedRight(), 4)) {
                      this.setHidden(!0);
                      var b = this.up().down("#awoContactButton");
                      b.setMargin(this.getMargin());
                    }
                  },
                },
                xtype: "button",
                action: "customerSearch",
                iconCls: "search",
                cls: "x-button-icon-standard",
                islockable: !0,
                iconMask: !0,
              },
              {
                id: "awoContactButton",
                top: 2,
                margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
                listeners: {
                  painted: function () {
                    this.setLeft(
                      this.up().down("mydisplayfield").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                iconCls: "user",
                cls: "x-button-icon-standard",
                iconMask: !0,
                action: "contactShow",
              },
            ],
          },
          {
            xtype: "myselectfield",
            name: "ConstructionTypeId",
            label: T("Construction type"),
            allowBlank: !1,
            editable: !1,
            forceSelection: !0,
            store: "MyConstructionTypeStore",
            displayField: "TypeName",
            valueField: "Id",
          },
          {
            xtype: "myselectfield",
            store: "MyPriceTypeStore",
            allowBlank: !1,
            forceSelection: !0,
            displayField: "TypeName",
            valueField: "Id",
            label: T("Pricetype"),
            name: "PriceTypeId",
          },
          {
            xtype: "myselectfield",
            store: "MyAdditionalWorkOrderStatusStore",
            displayField: "StatusName",
            allowBlank: !1,
            forceSelection: !0,
            valueField: "Id",
            label: T("Status"),
            name: "AdditionStatusId",
          },
          {
            xtype: "textareafield",
            label: T("Description"),
            name: "WorkDescription",
            maxRows: 3,
            autoComplete: !0,
            autoCapitalize: !0,
          },
        ],
      },
      {
        xtype: "container",
        layout: { type: "hbox", align: "center" },
        cls: "btn-container",
        items: [
          {
            id: "addfileAWO",
            flex: 1,
            xtype: "button",
            ui: "confirm",
            text: T("Image"),
          },
          {
            xtype: "button",
            flex: 1,
            id: "AWOSaveButton",
            listeners: {
              painted: function () {
                this.up("myawoformpanel").fireEvent("panelshow");
              },
            },
            ui: "confirm",
            text: T("Save"),
          },
        ],
      },
      {
        hidden: !0,
        xtype: "toolbar",
        ui: "light",
        title: T("Resourcerows"),
        layout: { align: "center", type: "hbox" },
        items: [
          {
            id: "addfileAWOXX",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Image"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "camera",
            iconMask: !0,
          },
          {
            id: "rowaddAWO",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            docked: "right",
            text: T("Add"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "add",
            iconMask: !0,
            hidden: !0,
          },
        ],
      },
      {
        hidden: !0,
        xtype: "mylist",
        title: "Resourcerows",
        autoDestroy: !1,
        scrollable: null,
        store: "MyWorkOrderRowStore",
        id: "MyAWORowList",
        cls: "my-rowlist",
        headerItem: {
          html:
            '<div class="my-tpl-list"           align="left">&nbsp;</div>' +
            '<div class="my-tpl-list my-double my-wide3" align="right">' +
            T("ArtNo") +
            "</div>" +
            '<div class="my-tpl-list my-wide6"  align="left">' +
            T("ArtTitle") +
            "</div>" +
            '<div class="x-days my-tpl-list"    align="right">' +
            T("Qty.") +
            "</div>" +
            '<div class="my-tpl-list my-wide3"  align="right">' +
            T("Quantity") +
            "</div>" +
            '<div class="my-tpl-list"           align="right">' +
            T("Price") +
            "</div>" +
            '<div class="my-tpl-list my-wide3"  align="right">' +
            T("Amount") +
            "</div>",
          cls: "myHeader",
        },
        itemTpl: [
          '<div class="my-tpl-list" ' +
            '<tpl if="Invoiced == 1">' +
            'class="noTrashIcon"><span>&nbsp;</span>' +
            "<tpl else>" +
            'class="x-button-normal x-button x-iconalign-center trashIcon"><span class="x-button-icon my-pictos-icon my-column-delete x-icon-mask">#</span>' +
            '</tpl></div><div class="my-tpl-list my-double my-wide3" align="right">&nbsp;{CodeNo}</div>' +
            '<div class="my-tpl-list my-wide6" style="overflow: hidden; white-space:nowrap" align="left">&nbsp;{Title}</div>' +
            '<div class="class="my-tpl-list x-days" align="right">&nbsp;{Days}</div>' +
            '<div class="my-tpl-list my-wide3"      align="right">&nbsp;{UsedQty} {[MEM.workorder.unit(values.ItemUnitId)]}</div>' +
            '<div class="my-tpl-list"               align="right">&nbsp;{PriceUnit}</div>' +
            '<div class="my-tpl-list my-wide3"      align="right">&nbsp;{[values.Days*values.PriceUnit*values.UsedQty]}</div>',
        ],
      },
    ],
  },
  getCustomerId: function () {
    var a = this.down("#customerfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getRightStoreName: function () {
    return "AdditionalWorkOrderStore";
  },
  getRightStoreId: function () {
    var a = this.down("#awoidfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getAwoId: function () {
    var a = this.down("#awoidfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
});
Ext.define("MEM.view.file.MyFileList", {
  extend: Ext.Container,
  alias: "widget.myfilelist",
  config: {
    cls: ["myfilelist", "myfilelist-hide-fileName"],
    items: [
      {
        itemId: "documentListHeader",
        html:
          '<div style="float: left; width:40px"; align="left">&nbsp;</div>' +
          '<div style="float: left; width:25%";  align="left">' +
          T("Title") +
          "</div>" +
          '<div class="fileName" style="float: left; width:15%";  align="left">' +
          T("FileName") +
          "</div>" +
          '<div style="float: left; width:40%";  align="left">' +
          T("Description") +
          "</div>" +
          '<div style="float: left; width:40px"; align="left">&nbsp;</div>',
        cls: "myHeader",
        height: isPhone ? 30 : 40,
      },
      {
        xtype: "myinlinelist",
        itemId: "documentList",
        store: "MyWorkOrderDocumentStore",
        scrollable: null,
        cls: "my-rowlist",
        scrollable: "vertical",
        itemTpl: [
          '<div class="x-button-normal x-button x-iconalign-center trashIcon " >' +
            '<span class="x-button-icon my-pictos-icon my-column-delete x-icon-mask">#</span></div>' +
            '<div style="text-overflow: ellipsis; overflow: hidden; white-space:nowrap; float: left; width:25%"; align="left">&nbsp;{Title}</div>' +
            '<div class="fileName" style="text-overflow: ellipsis; overflow: hidden;  white-space:nowrap; float: left; width:15%"; align="left">&nbsp;{Filename}</div>' +
            '<div style="text-overflow: ellipsis; overflow: hidden;  white-space:nowrap; float: left; width:40%"; align="left">&nbsp;{DocumentDescription}</div>' +
            '<div class="my-thumb x-button-normal x-button lens x-iconalign-center ">' +
            '<tpl if="DocumentMimeType == \'external-link\'"><a href="{Url}" target="_blank"></tpl>' +
            '<img class="image" src="data:{[values.ThumbnailMimeType + \';base64,\' + values.ThumbnailData ]}">' +
            "<tpl if=\"DocumentMimeType == 'external-link'\"></a></tpl>" +
            "</div>",
        ],
      },
    ],
  },
  constructor: function (a) {
    this.callParent([a]);
    this.down("myinlinelist").on("painted", this.onPainted, this);
  },
  initialize: function () {
    Ext.Viewport.on("orientationchange", "onOrientationChange", this);
    this.callParent(arguments);
  },
  onPainted: function () {
    this.onOrientationChange(Ext.Viewport, Ext.Viewport.getOrientation());
  },
  onOrientationChange: function (c, b) {
    var a = this;
    if (b == "landscape") {
      a.removeCls("myfilelist-hide-fileName");
    } else {
      a.addCls("myfilelist-hide-fileName");
    }
  },
});
Ext.define("MEM.ux.field.MyDatePicker", {
  extend: Ext.picker.Date,
  alias: "widget.mydatepicker",
  config: {
    slotOrder: Me.slotOrderDate,
    yearFrom: 2011,
    yearTo: 2022,
    doneButton: T("Select"),
    cancelButton: T("Cancel"),
    dayText: T("Day"),
    monthText: T("Month"),
    yearText: T("Year"),
    listeners: {
      painted: function (b) {
        var a = this.getValue();
        if (!a || a.getYear() <= 1) {
          this.setValue(new Date());
        }
      },
    },
  },
});
Ext.define("MEM.view.file.MyFilePanel", {
  extend: Ext.form.Panel,
  alias: "widget.myfilepanel",
  config: {
    cls: "myfilepanel",
    autoDestroy: !1,
    scrollable: "vertical",
    defaults: { labelWidth: "15%" },
    trackResetOnLoad: !0,
    listeners: {
      activate: function () {
        var a = this.down("#myFileProjectId");
        if (!this._imageShown) {
          MEM.loadSpinner.show();
          MEM.app.getController("File").clearForm();
          if (this.getProjectId()) {
            a.setValue(this.getProjectId());
            a.setHidden(!0);
          } else {
            a.setHidden(!1);
          }
          if (a.getValue()) {
            this.setFileWO(a.getValue(), !1);
          } else {
            var b = this.down("#myFileWOId");
            if (this.getWorkorderId()) {
              b.setValue(this.getWorkorderId());
              b.setHidden(!0);
            } else {
              b.setHidden(!1);
            }
          }
        }
        delete this._imageShown;
        Ext.getCmp("FileProjectSearchButton").setHidden(a.getHidden());
      },
    },
    workorderId: null,
    projectId: null,
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "container",
            cls: "myfield",
            items: [
              {
                xtype: "myselectfield",
                id: "myFileProjectId",
                label: T("Project"),
                store: "MyCloneProjectListStore",
                displayField: "Project",
                valueField: "Id",
                required: !0,
                listeners: {
                  change: function (d, a, b, c) {
                    this.up("myfilepanel").setFileWO(a, !0);
                  },
                },
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    Ext.getCmp("FileProjectSearchButton").setLeft(
                      Ext.getCmp("myFileProjectId").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "FileProjectSearchButton",
                action: "projectSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "myselectfield",
            id: "myFileWOId",
            label: T("WorkOrder") + (isPhone ? "<br>" : "/") + T("AWO"),
            store: "MyCloneWorkOrderListStore",
            displayField: "FullName",
            valueField: "Id",
            required: !0,
            listeners: {
              change: function (d, a, b, c) {
                if (a != null) {
                  this.up("myfilepanel").loadDocuments(a);
                }
              },
            },
          },
          { xtype: "hiddenfield", itemId: "documentId" },
          {
            xtype: "textfield",
            id: "imageTitle",
            name: "Title",
            label: T("Title"),
            placeHolder: T("Image title"),
          },
          {
            xtype: "textareafield",
            itemId: "description",
            name: "DocumentDescription",
            label: T("Description"),
            cls: "my-textfield",
            autoComplete: !0,
            autoCapitalize: !0,
          },
          {
            xtype: "datepickerfield",
            itemId: "regdate",
            picker: { xtype: "mydatepicker", value: new Date() },
            label: T("RegDate"),
            name: "RegDate",
          },
          {
            xtype: "container",
            cls: "myfield",
            layout: { type: "hbox" },
            items: [
              {
                xtype: "label",
                docked: "left",
                html: T("Size"),
                cls: "sizelabel",
              },
              {
                xtype: "container",
                flex: 1,
                items: [
                  {
                    xtype: "radiofield",
                    name: "size",
                    value: "S",
                    label: T("Compressed"),
                    checked: !0,
                  },
                  {
                    xtype: "radiofield",
                    name: "size",
                    value: "L",
                    label: T("Full"),
                  },
                ],
              },
            ],
            listeners: {
              painted: function () {
                if (!window.FileReader) {
                  this.setHidden(!0);
                }
              },
            },
          },
          {
            xtype: "checkboxfield",
            itemId: "showInPortal",
            label: T("Show in portal"),
            listeners: {
              painted: function (a) {
                if (
                  Me.formValidateHidden(
                    "WorkOrderDocumentStore",
                    "ShowInPortal"
                  )
                ) {
                  this.setHidden(!0);
                  this.setDisabled(!0);
                } else {
                  this.setChecked(!0);
                }
              },
            },
          },
          { xtype: "hiddenfield", name: "type", value: "json" },
          {
            xtype: "container",
            itemId: "fileContainer",
            height: 80,
            items: [
              {
                xtype: "label",
                itemId: "filefield",
                html:
                  "<label>" +
                  T("Image") +
                  '</label>&nbsp;<input style="width:80%;" id="fileInput" type="file" name="DocumentData" accept="image/*" multiple="multiple" /><br /><br />',
              },
            ],
          },
        ],
      },
      {
        xtype: "container",
        cls: "my-subcontainer",
        layout: { type: "hbox", pack: "center" },
        items: [
          {
            xtype: "button",
            itemId: "clearButton",
            flex: 1,
            ui: "confirm",
            text: T("Clear"),
          },
          {
            xtype: "button",
            itemId: "saveButton",
            flex: 1,
            ui: "confirm",
            text: T("Save"),
            listeners: {
              painted: function () {
                this.setDisabled(!1);
              },
            },
          },
        ],
      },
      { xtype: "myfilelist", itemId: "projectOrderDocumentList" },
    ],
  },
  setFileWO: function (e, d) {
    var b = this,
      a = b.down("#myFileWOId");
    if (b.getWorkorderId()) {
      a.setHidden(!0);
      if (a.getValue() && a.getValue() != b.getWorkorderId()) {
        a.setValue(null);
      }
      b.loadDocuments(b.getWorkorderId());
    } else {
      if (d === !1 && a.getValue()) {
        b.loadDocuments(a.getValue());
      } else {
        var c = Ext.getStore("MyCloneWorkOrderListStore");
        c.meClearFilter();
        c.meAddFilter(["ProjectId", "=", e]);
        c.load({
          callback: function () {
            MEM.loadSpinner.show();
            if (c.data.length == 0) {
              a.setValue(null);
            } else {
              a.setValue(c.getAt(0).getId());
              a.setHidden(!1);
            }
            b.loadDocuments(a.getValue());
          },
        });
      }
    }
  },
  loadDocuments: function (b) {
    var c = this.down("mylist"),
      a = c.getStore();
    MEM.loadSpinner.show();
    a.meClearFilter();
    a.meAddFilter(["WorkOrderId", "=", parseInt(b, 10)]);
    a.meAddFilter(["HideInPDA", "=", !1]);
    if (DIARY_MODE) {
      diaryId = Ext.getCmp("myDiaryId").getValue();
      a.meAddFilter(["DiaryId", "=", parseInt(diaryId, 10)]);
    }
    a.load({
      callback: function () {
        MEM.loadSpinner.hide();
      },
    });
  },
});
Ext.define("MEM.view.awo.MyAWOFileSubmitPanel", {
  extend: Ext.form.Panel,
  alias: "widget.myawofilesubmitpanel",
  config: {
    width: "100%",
    title: T("Add files to AWO"),
    scrollable: !0,
    items: [
      {
        xtype: "myselectfield",
        id: "myDocumentId",
        label: T("Enclose document"),
        store: "MyWorkOrderDocumentStore",
        displayField: "Title",
        valueField: "Id",
        usePicker: !1,
        value: null,
      },
      {
        xtype: "container",
        items: [
          {
            xtype: "button",
            ui: "confirm",
            action: "fileSubmitButton",
            text: T("Send"),
            centered: !0,
            minWidth: "20%",
          },
          { xtype: "spacer", minHeight: 60 },
        ],
      },
    ],
  },
});
Ext.define("MEM.view.customer.MyCustomerContactFormPanel", {
  extend: Ext.form.FormPanel,
  fullscreen: !0,
  alias: "widget.mycustomercontactformpanel",
  config: {
    id: "MyCustomerContactFormPanel",
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            id: "myContactName",
            xtype: "textfield",
            label: T("ContactName"),
            name: "ContactName",
          },
          {
            id: "myOrganizationNo",
            xtype: "textfield",
            label: T("CivicNumber"),
            name: "OrganizationNo",
          },
          { xtype: "textfield", label: T("Mobile"), name: "Mobile" },
          { xtype: "textfield", label: T("Phone"), name: "Phone" },
          {
            xtype: "emailfield",
            label: T("Email"),
            placeHolder: "email@example.com",
            name: "Email",
          },
        ],
      },
      {
        xtype: "container",
        layout: { type: "card" },
        items: [
          {
            xtype: "button",
            docked: "left",
            minWidth: "33.3%",
            ui: "decline",
            text: T("Delete"),
            action: "deleteContact",
            itemId: "deleteContact",
          },
          {
            xtype: "button",
            docked: "right",
            minWidth: "33.3%",
            ui: "confirm",
            text: T("Save"),
            action: "saveContact",
            itemId: "saveContact",
          },
        ],
      },
      { xtype: "spacer", height: "20px" },
    ],
  },
  constructor: function () {
    this.callParent(arguments);
    this.on("painted", function () {
      this.fireEvent("panelshow");
    });
  },
});
Ext.define("MEM.view.customer.MyCustomerContactPanel", {
  extend: Ext.dataview.List,
  xtype: "mycustomercontactpanel",
  config: {
    store: "MyCustomerContactStore",
    id: "MyCustomerList",
    itemTpl: [
      '<span style="display: inline-block; text-overflow: ellipsis; overflow: hidden; white-space: nowrap; <tpl if="Phone!= \'\'"> width: 60%;</tpl>opacity:1 filter:alpha(opacity=100); ">{ContactName}</span>&nbsp;&nbsp;  <span style="position: absolute; right: 4em;"><a href="tel://{Mobile}">{Mobile}</a></span>',
    ],
    onItemDisclosure: !0,
  },
  constructor: function () {
    var a = this;
    a.callParent(arguments);
    a.on("painted", function () {
      a.fireEvent("panelshow");
    });
  },
});
Ext.define("MEM.controller.AWO", {
  extend: MEM.controller.Common,
  config: {
    views: ["awo.MyAWOPanel", "awo.MyAWOSignaturePanel"],
    stores: [
      "MyAdditionalWorkOrderStore",
      "MyWorkOrderRowStore",
      "MyCustomerStore",
      "MyCustomerListStore",
      "MyCustomerContactStore",
      "MyProjectListStore",
    ],
    refs: {
      mynavigationview: "mynavigationview",
      myawopanel: "myawopanel",
      awoform: {
        selector: "myawoformpanel",
        xtype: "myawoformpanel",
        autoCreate: !0,
        title: T("Additional WorkOrders"),
        id: "MyAWOFormPanel",
      },
      workorderrowform: "myworkorderrowform",
      myarticlecombo: "myworkorderrowform #myArticleCombo",
      fetchtoggle: "myworkorderrowform #fetchtoggle",
      statusButtons: "myawopanel segmentedbutton",
      list: "myawoformpanel #MyAWORowList",
      overlay: {
        selector: "myawooverlay",
        xtype: "myawooverlay",
        autoCreate: !0,
      },
      rowOverlay: {
        selector: "myaworowoverlay",
        xtype: "myaworowoverlay",
        id: "myAWOArticleDataview",
        autoCreate: !0,
      },
      myAWOProjectId: "#myAWOProjectId",
      myFilePanel: { selector: "myfilepanel", xtype: "myfilepanel" },
      myFileSubmitPanel: {
        selector: "myawofilesubmitpanel",
        xtype: "myawofilesubmitpanel",
        autoCreate: !0,
      },
      MyContactOverlay: {
        selector: "mycontactoverlay",
        xtype: "mycontactoverlay",
        autoCreate: !0,
      },
      customerId: "#myAWOCustomerId",
      mysignaturepanel: {
        selector: "mysignaturepanel",
        xtype: "myawosignaturepanel",
        autoCreate: !0,
      },
      customercontactpanel: {
        selector: "mycustomercontactpanel",
        xtype: "mycustomercontactpanel",
        title: T("Customercontact"),
        id: "mycustomercontactpanel",
        autoCreate: !0,
      },
      statusOverlay: {
        selector: "myawostatusoverlay",
        xtype: "myawostatusoverlay",
        autoCreate: !0,
      },
    },
    control: {
      "#myAWOProjectId": {},
      "#myAWOCustomerId": { setData: "onCustomerIdChange" },
      myawopanel: { panelshow: "onMyAWOListPainted" },
      "#MyAWOList": { itemsingletap: "onMyAWOListItemTap", erased: "hideAdd" },
      "#MyAWORowList": { itemsingletap: "onMyAWORowListItemTap" },
      "mysearchoverlay #mySearchList": {
        itemsingletap: "onMySearchOverlayItemTap",
      },
      myawoformpanel: { panelshow: "showMail" },
      "#AWOSaveButton": { tap: "onSaveAWOTap", erased: "hideMail" },
      mynavigationview: {
        pop: function (d, a, c) {
          var b = this;
          if (a.getActiveItem && a.getActiveItem().id == "MyAWOFormPanel") {
            b.showSignatureButton();
          }
          if (a._itemId != "MyWorkOrderRowForm" || !AWO_MODE) {
            return;
          }
        },
      },
      "#rowaddAWO": {
        tap: function (a) {
          this.renderAWOApperance();
          this.onRowAdd(Ext.getCmp("myAWOId").getValue());
        },
      },
      "#addfileAWO": { tap: "onAddFile" },
      "button[action=AWOrowSaveClose]": { tap: "onRowSaveClose" },
      "button[action=AWOrowClose]": { tap: "onClose" },
      "myawopanel segmentedbutton": { toggle: "onFilterButton" },
      "myawoformpanel #rowdelete": { tap: "onDeleteAWORow" },
      "button[action=closeRow]": { tap: "onCloseRowTap" },
      "button[action=sendAWOEmail]": { tap: "showFileSubmitPanel" },
      "button[action=closeContactOverlay]": { tap: "hideContactOverlay" },
      "button[action=fileSubmitButton]": {
        tap: function () {
          var a = this;
          a.onMailTap();
        },
      },
      "button[action=closeAWOStatus]": { tap: "onCloseStatus" },
      "button[action=setAWOStatus]": { tap: "onSetStatus" },
    },
  },
  init: function () {
    var a = this;
    a.getApplication().on({
      scope: a,
      additem: a.onAWOAdd,
      sendemail: a.showContactOverlay,
      opensignature: a.openSignature,
    });
    a.getMysignaturepanel().on({
      scope: a,
      signaturesave: a.onSignatureSave,
      signatureopen: a.onSignatureOpen,
    });
  },
  onCustomerIdChange: function (d, e, c) {
    var g = this,
      b = Ext.getStore("MyCustomerListStore"),
      f = g.getAwoform(),
      a = f.getRecord();
    if (a) {
      a.set("CustomerId", e);
      a.set("CustomerName", c);
    }
    this.styleFieldByValue(d, b, "CreditRisk", "creditrisk-warning");
  },
  showContactOverlay: function (d) {
    if (d != "awo") {
      return;
    }
    var b = this,
      c = b.getMynavigationview(),
      a = b.getMyContactOverlay(),
      e;
    try {
      if (a.isHidden()) {
        a.show();
      } else {
        c.push(a);
      }
    } catch (f) {
      MEM.serverError.show("exception", f, this, "showContactOverlay");
    }
  },
  hideContactOverlay: function () {
    this.getMyContactOverlay().hide();
  },
  showFileSubmitPanel: function () {
    var c = this,
      f = c.getMynavigationview(),
      d = c.getMyContactOverlay(),
      e = c.getMyFileSubmitPanel(),
      g = Ext.getCmp("myAWOId").getValue(),
      a = Ext.getStore("MyWorkOrderDocumentStore"),
      b;
    MEM.loadSpinner.show();
    try {
      d.hide();
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["WorkOrderId", "=", parseInt(g, 10)]);
      a.load({
        callback: function (d) {
          MEM.loadSpinner.hide();
          if (a.getCount() > 0) {
            b = d[0].copy();
            b.set("Id", null);
            b.set("Title", "");
            a.insert(0, b);
            f.push(e);
          } else {
            c.onMailTap();
          }
        },
      });
    } catch (h) {
      MEM.loadSpinner.hide();
      MEM.serverError.show("exception", h, this, "showFileSubmitPanel");
    }
  },
  onCloseTap: function () {
    var a = this,
      b = a.getMynavigationview();
    if (b.getActiveItem() == a.getAwoform()) {
      a.getOverlay().hide();
    }
  },
  onCloseRowTap: function () {
    var b = this,
      a = function () {
        b.onTimeWOidChange();
      };
    this.getRowOverlay().hide();
    a();
  },
  loadStores: function () {
    var b = this,
      a = [
        "MyUserListStore",
        "MyAdditionalWorkOrderStatusStore",
        "MyItemUnitStore",
        "MyConstructionTypeStore",
        "MyArticleStore",
        "MyPriceTypeStore",
        "MyAccountChartStore",
      ];
    MEM.loadSpinner.show();
    Me.loadAllStores(
      a,
      function () {
        b.getApplication().fireEvent("AWOstoresloaded");
        MEM.loadSpinner.hide();
      },
      this
    );
  },
  renderAWOApperance: function () {
    try {
      this.getFetchtoggle().setValue(1);
      this.loadStores();
      Ext.getCmp("myArticleCombo").setHidden(!1);
      Ext.getCmp("myCodeNo").setHidden(!0);
      Ext.getCmp("myTitle").setHidden(!0);
      Ext.getCmp("myPriceUnit").setHidden(!1);
      Ext.getCmp("myCostUnit").setHidden(!0);
      Ext.getCmp("myItemUnitId").setHidden(!1);
      Ext.getCmp("myPlannedQty").setHidden(!0);
    } catch (b) {
      MEM.serverError.show("exception", b, this, "renderAWOApperance");
    }
  },
  onAWOAdd: function (j) {
    var h = this,
      g = this.getMynavigationview(),
      f = this.getAwoform(),
      i = Ext.getStore("MyAdditionalWorkOrderStore").getModel(),
      b = Ext.getStore("MyProjectLimitedStore"),
      a = Ext.getStore("MyCustomerListStore"),
      e = Ext.getStore("MyAdditionalWorkOrderStatusStore"),
      d = Ext.getStore("MyPriceTypeStore"),
      c = Ext.getStore("MyConstructionTypeStore"),
      k;
    if (j !== "awo") {
      return;
    }
    try {
      b.meClearFilter();
      b.meAddFilter(["Id", "=", parseInt(CURRENT_PROJECTID, 10)]);
      b.load({
        callback: function (l, m, n) {
          var k = l[0],
            b = k.get("CustomerId");
          a.clearFilter();
          a.meClearFilter();
          a.meAddFilter(["Id", "=", parseInt(b)]);
          a.load({
            callback: function (p, q, r) {
              var a = p[0],
                k = a ? a.get("CustomerName") : null,
                o = Ext.ModelManager.create(
                  {
                    Id: null,
                    ProjectId: CURRENT_PROJECTID,
                    CustomerName: k,
                    CustomerId: b,
                    Addition: 1,
                    OrderDate: new Date(),
                    Created: new Date(),
                    AdditionStatusId: e.getAt(0) ? e.getAt(0).getId() : null,
                    PriceTypeId: d.getAt(0) ? d.getAt(0).getId() : null,
                    ConstructionTypeId: c.getAt(0) ? c.getAt(0).getId() : null,
                  },
                  i
                );
              f.setRecord(o);
              view = g.push(f);
              g.down("titlebar").setTitle(
                T("AWO - project no") + " " + CURRENT_PROJECTNO
              );
              h.getCustomerId().setValue(b);
              h.filterAWORows(-1);
            },
          });
        },
      });
    } catch (l) {
      MEM.serverError.show("exception", l, this, "onAWOAdd");
    }
  },
  onMyAWOListPainted: function () {
    var a = this,
      b = Ext.getStore("MyAdditionalWorkOrderStatusStore");
    b.meClearFilter();
    b.load({
      callback: function () {
        a.setButtons();
        a.showAdd();
        a.filter(0);
        a.loadStores();
      },
    });
  },
  onFilterButton: function (b, a) {
    this.filter(a.getText());
  },
  setButtons: function () {
    var b = this,
      c = b.getStatusButtons(),
      a = Ext.getStore("MyAdditionalWorkOrderStatusStore");
    if (c.getItems().length > 0) {
      return;
    }
    a.sort("StatusCode", "ASC");
    a.clearFilter();
    a.load({ callback: b.onWorkOrderStatusStoreLoaded, scope: b });
  },
  onWorkOrderStatusStoreLoaded: function (f, i, g) {
    if (g) {
      var h = this,
        e = 0,
        j,
        d,
        c,
        a = [],
        b = h.getStatusButtons();
      a.push({
        xtype: "button",
        cls: "my-status-button",
        html: "<span style='width: 20px; height: 10px; background-color: white'>&nbsp&nbsp&nbsp</span> All",
        text: 0,
        pressed: !0,
      });
      Ext.each(f, function (b) {
        c = b.get("Id");
        e += 1;
        d =
          "width: 20px; height: 10px; background-color: " +
          b.get("StatusColor");
        a.push({
          xtype: "button",
          cls: "my-status-button",
          html:
            "<span  id:'mystatusbutton-" +
            b.get("Id") +
            "' style='" +
            d +
            "'>&nbsp&nbsp&nbsp</span> " +
            b.get("StatusName"),
          text: c,
          pressed: !0,
        });
      });
      b.add(a);
      b.setPressedButtons([0]);
    }
  },
  onRowAdd: function (a) {
    var h = this,
      g = this.getMynavigationview(),
      e = Ext.getStore("MyWorkOrderRowStore").getModel(),
      b = Ext.getStore("MyWorkOrderListStore"),
      i = this.getMyarticlecombo().getValue(),
      f = this.getWorkorderrowform(),
      d,
      c;
    try {
      if (parseInt(a, 10) != a) {
        Ext.Msg.alert("Save", "Workorder must be saved first.", Ext.emptyFn);
      } else {
        MEM.loadSpinner.show();
        b.meClearFilter();
        console.log("Load cloneStore... projectId: " + CURRENT_PROJECTID);
        b.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
        b.load({
          callback: function (i) {
            if (null == b.findRecord("Id", a)) {
              Ext.Msg.alert(
                T("Not found"),
                T("WorkOrder") +
                  "/" +
                  T("AWO") +
                  " " +
                  T("not found. Please check status."),
                Ext.emptyFn
              );
              return;
            }
            console.log("WOid: " + a);
            c = Ext.ModelManager.create(
              {
                Id: null,
                WorkOrderId: a,
                UsedQty: 1,
                ItemUnitId: 1,
                RowType: "A",
                AccountNo: "4",
              },
              e
            );
            d = f.setRecord(c);
            h.onArticleComboChange(
              Ext.getCmp("myArticleCombo"),
              Ext.getCmp("myArticleCombo").getValue()
            );
            g.add(d);
          },
        });
        MEM.loadSpinner.hide();
      }
    } catch (j) {
      MEM.loadSpinner.hide(j, this, "onRowAdd");
    }
  },
  onWorkOrderContactAdd: function () {
    var b = this.getMynavigationview(),
      a = this.getMyWorkOrdercontactformpanel(),
      c = b.push(a);
  },
  onSaveAWOTap: function (d, c, a, b) {
    this.onAWOSave();
  },
  onAWOSave: function (e) {
    var b = this,
      h = b.getApplication(),
      g = Ext.getStore("MyAdditionalWorkOrderStore"),
      c = Ext.getCmp("MyAWOFormPanel"),
      i = Ext.getCmp("mynavigationview"),
      a = c.getRecord(),
      f = c.getValues(),
      d;
    try {
      a.set(f);
      a.set("ResponsibleServiceId", h.getUserId());
      if (!checkRequired(c)) {
        Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
        return;
      }
      a.setProxy(g.getProxy());
      a.save({
        success: function () {
          d = a.internalId;
          CURRENT_PROJECTID = a.get("ProjectId");
          if (b.navigationSourceIsTime()) {
            b.getApplication().fireEvent("timeawosaved", CURRENT_PROJECTID);
          }
          Ext.getCmp("myAWOId").setValue(d);
          if (b.getMyawopanel()) {
            b.filter();
            b.getStatusButtons().setPressedButtons([0]);
            b.showSignatureButton();
            c.setRecord(a);
          }
          if (e != !0) {
            Ext.Msg.alert(T("Saved"), T("Saved."));
          }
        },
        failure: function (a) {
          MEM.loadSpinner.hide(a, this, "onAWOSave");
        },
      });
    } catch (j) {
      MEM.loadSpinner.hide(j, this, "onAWOSave");
    }
  },
  navigationSourceIsTime: function () {
    var c = this,
      b = c.getMynavigationview().getItems().keys;
    for (var a = 0; a < b.length; a++) {
      if (b[a] == "mytimerowform") {
        return !0;
      }
    }
    return !1;
  },
  onArticleComboChange: function (a, b, d, e) {
    var c;
    try {
      if (b != 0 && b != d) {
        c = Ext.getCmp("myPriceUnit").getValue();
        Ext.getCmp("myCodeNo").setValue(a._value.data.ArticleNo);
        Ext.getCmp("myTitle").setValue(a._value.data.Description);
        Ext.getCmp("myPriceUnit").setValue(
          a._value.data.PriceUnit != c ? a._value.data.PriceUnit : c
        );
        Ext.getCmp("myCostUnit").setValue(a._value.data.CostUnit);
        Ext.getCmp("myItemUnitId").setValue(a._value.data.ItemUnitId);
      }
      if (b == 0) {
        Ext.getCmp("myCodeNo").setValue(null);
      }
    } catch (f) {
      MEM.serverError.show("exception", f, this, "onArticleComboChange");
    }
  },
  onProjectIdChange: function (c, b) {
    var a = Ext.getStore("MyProjectLimitedStore");
    try {
      a.meClearFilter();
      a.meAddFilter(["Id", "=", parseInt(b, 10)]);
      a.load({
        callback: function () {
          Ext.getCmp("myAWOCustomerId").setValue(a.getAt(0).get("CustomerId"));
        },
      });
    } catch (d) {
      MEM.serverError.show("exception", d, this, "onProjectIdChange");
    }
  },
  onRowSaveClose: function (d, c, a, b) {
    Ext.getCmp("mynavigationview").pop();
  },
  onClose: function (h, g, e, f) {
    var d = this,
      b = Ext.getCmp("mynavigationview"),
      c = Ext.getCmp("MyWorkOrderRowForm"),
      a = c.getRecord();
    b.pop();
    if (a) {
      d.filterAWORows(a.get("WorkOrderId"));
    }
  },
  filterAWORows: function (b, c) {
    var d = this;
    var a = Ext.getStore("MyWorkOrderRowStore");
    try {
      a.clearFilter();
      a.meClearFilter();
      if (TIME_MODE && _currentTimeId != null) {
        a.meAddFilter(["WorkOrderId", "=", parseInt(b, 10)]);
        a.meAddFilter(["TimeId", "=", _currentTimeId]);
      } else {
        a.meAddFilter(["WorkOrderId", "=", parseInt(b, 10)]);
      }
      a.load({ callback: c, scope: d });
    } catch (e) {
      MEM.serverError.show("exception", e, this, "filterAWORows");
    }
  },
  onMyAWOListItemTap: function (h, k, j, c, l, i) {
    var d = this,
      e = Ext.getCmp("mynavigationview"),
      b = Ext.getStore("MyCustomerListStore"),
      a = this.getAwoform(),
      f = c.data.Id,
      g = !1;
    loadAWO = function () {
      a.setRecord(c);
      view = e.push(a);
      MEM.loadSpinner.hide();
      d.filterAWORows(f, d.showSignatureButton);
    };
    MEM.loadSpinner.show();
    try {
      loadAWO();
    } catch (m) {
      MEM.loadSpinner.hide(m, this, "onMyAWOListItemTap");
    }
    b.load({
      scope: this,
      callback: function (e, f, d) {
        if (d) {
          this.styleFieldByValue(
            a.down("#myAWOCustomerId"),
            b,
            "CreditRisk",
            "creditrisk-warning"
          );
        }
      },
    });
  },
  onMySearchOverlayItemTap: function (c, l, k, b, n, j) {
    var f = this,
      d = c.up("mysearchoverlay").getCurrentProjectId(),
      g = c.up("mysearchoverlay").getCurrentWorkOrderId(),
      a = Ext.getStore("MyAdditionalWorkOrderStore"),
      h = c.up("mysearchoverlay").getAdditional(),
      i = Ext.getCmp("mynavigationview"),
      e = this.getAwoform(),
      m;
    switch (b.get("Action")) {
      case "WOSearchTap":
        if (1 == h) {
          TIME_MODE = !1;
          AWO_MODE = !0;
          CURRENT_PROJECTID = parseInt(d);
          a.meClearFilter();
          a.meAddFilter(["ProjectId", "=", parseInt(d)]);
          a.meAddFilter(["Id", "=", g]);
          f.loadStores();
          a.load({
            callback: function (a) {
              b = a[0];
              e.setRecord(b);
              view = i.push(e);
              MEM.loadSpinner.hide();
              f.filterAWORows(b.getId());
            },
          });
        }
        break;
    }
  },
  onMyAWORowListItemTap: function (i, l, k, c, e, j) {
    var a = this,
      f = this.getMynavigationview(),
      d = this.getWorkorderrowform(),
      g = Ext.getStore("MyWorkOrderRowStore"),
      b = Ext.getStore("MyCloneWorkOrderListStore"),
      h;
    try {
      if (e.target.className.indexOf("trash2") >= 0) {
        console.log(
          "deprecated use of trash2. Use my-column-delete as class name instead"
        );
        a.onDeleteAWORow(c);
      } else {
        if (e.target.className.indexOf("my-column-delete") >= 0) {
          a.onDeleteAWORow(c);
        } else {
          b.meClearFilter();
          b.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
          b.load({
            callback: function (b) {
              g.clearFilter();
              a.getFetchtoggle().setValue(0);
              a.getWorkorderrowform().togglechange(0);
              d.setRecord(c);
              h = f.push(d);
            },
          });
        }
      }
    } catch (m) {
      MEM.serverError.show("exception", m, this, "onMyAWORowListItemTap");
    }
  },
  onDeleteAWORow: function (b) {
    var d = this,
      c,
      a = Ext.getStore("MyWorkOrderRowStore");
    try {
      Ext.Msg.confirm("Delete item.", "Are you sure?", function (d) {
        if (d == "yes") {
          a.meClearFilter();
          a.meAddFilter(["Id", "=", b.getId()]);
          c = b.get("WorkOrderId");
          a.remove(b);
          a.sync();
        }
      });
    } catch (e) {
      MEM.serverError.show("exception", e, this, "onDeleteAWORow");
    }
  },
  filter: function (c) {
    var f = this.getApplication(),
      e,
      d,
      b = 0,
      a = Ext.getStore("MyAdditionalWorkOrderStore");
    try {
      c = parseInt(c, 10);
      for (b; b < this.getStatusButtons().items.length; b++) {
        if (
          this.getStatusButtons().innerItems[b].getCls() != null &&
          this.getStatusButtons().innerItems[b].getCls() != "" &&
          this.getStatusButtons()
            .innerItems[b].getCls()
            .indexOf("x-button-pressed") != -1
        ) {
          d = parseInt(this.getStatusButtons().innerItems[b].getText(), 10);
          break;
        }
      }
      if (!d) {
        d = c == 0 ? "" : c;
      }
      if (a.data.length == 0) {
        a.meClearFilter();
        a.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
        MEM.loadSpinner.show();
        a.load({
          callback: function () {
            MEM.loadSpinner.hide();
          },
        });
      }
      if (a.isFiltered()) {
        a.clearFilter();
        a.meClearFilter();
      }
      if (c != "") {
        a.filterBy(function (a) {
          return a.get("AdditionStatusId") == d;
        });
      }
      a.sort([
        { property: "AdditionStatusCode", direction: "ASC" },
        { property: "WorkOrderNo", direction: "ASC" },
      ]);
    } catch (g) {
      MEM.serverError.show("exception", g, this, "filter");
    }
  },
  showAdd: function () {
    this.getApplication().fireEvent("setadditemtype", "awo");
    this.hideMail();
  },
  hideAdd: function () {
    this.getApplication().fireEvent("clearadditemtype");
  },
  showMail: function () {
    this.getApplication().fireEvent("setmailtype", "awo");
  },
  hideMail: function () {
    this.getApplication().fireEvent("clearmailtype");
    this.hideContactOverlay();
    this.hideSignatureButton();
  },
  onFilterList: function () {
    var a = Ext.getStore("MyProjectListStore");
    try {
      a.clearFilter();
      a.meClearFilter();
      a.filter(
        "ProjectName",
        new RegExp(".*" + Ext.getCmp("searchField").value + ".*", "i"),
        !0
      );
    } catch (b) {
      MEM.loadSpinner.hide(b, this, "onFilterList");
    }
  },
  onFilterProject: function (c, a) {
    var b = Ext.getStore("MyProjectListStore");
    try {
      b.clearFilter(!0);
      b.filterBy(function (b, d) {
        if (
          b.get("ProjectNo").indexOf(a) > -1 ||
          b.get("ProjectName").indexOf(a) > -1
        ) {
          return !0;
        }
        return !1;
      });
    } catch (d) {
      MEM.serverError.show("exception", d, this, "onFilterProject");
    }
  },
  onMailTap: function () {
    var c = this,
      d = function (a) {
        return window.JSON && window.JSON.parse
          ? window.JSON.parse(a)
          : new Function("return " + a)();
      };
    try {
      var b = Ext.getCmp("myAWOId").getValue(),
        g = Ext.getCmp("myDocumentId").getValue(),
        e = this.getMyContactOverlay().getValues(),
        a = e.Customer ? 1 : 0,
        f = "sendWorkOrderMsg",
        h = Me.API_URL + f;
      c.checkContactEmail(a, b, function (e) {
        if (a == 1 && e == "") {
          Ext.Msg.show({
            title: T("Mail"),
            message: T("No contact email found."),
          });
        } else {
          c.checkProjectManagerEmail(function (b) {
            if (a == 0 && b == "") {
              Ext.Msg.show({
                title: T("Mail"),
                message: T("No projectleader email found."),
              });
              return;
            }
          });
          Ext.Msg.show({
            title: T("Mail"),
            message:
              a == 0
                ? T("Mail will be sent to the projectleader")
                : T("Mail will be sent to:") + " " + e,
            buttons: Ext.MessageBox.OKCANCEL,
            fn: function (c) {
              if (c == Ext.MessageBox.OK.itemId) {
                Ext.Ajax.request({
                  url: h,
                  method: "POST",
                  params: {
                    type: "json",
                    msgtype: "email",
                    workorderid: b,
                    documentid: g,
                    tocustomer: a,
                  },
                  success: function (a, b) {
                    obj = d(a.responseText);
                    if (obj.success == !0) {
                      Ext.Msg.show({
                        title: T("Mail"),
                        message: T("Mail sent."),
                      });
                    } else {
                      Ext.Msg.show({ title: T("Mail"), message: obj.errors });
                    }
                  },
                  failure: function (a, b) {
                    Ext.Msg.show({ title: T("Mail"), message: a.statusText });
                  },
                });
              }
            },
          });
        }
      });
    } catch (i) {
      MEM.serverError.show("exception", i, this, "onMailTap");
    }
  },
  checkProjectManagerEmail: function (e) {
    var d = Ext.getStore("MyProjectLimitedStore"),
      a = Ext.getStore("MyProjectManagerStore"),
      b,
      c = "";
    try {
      b = d.getAt(0).get("ProjectManagerId");
      a.meClearFilter();
      a.meAddFilter(["Id", "=", b == null ? -1 : b]);
      a.load({
        callback: function () {
          c = a.data.length > 0 ? a.getAt(0).get("Email") : "";
          e(c);
          return;
        },
      });
    } catch (f) {
      MEM.serverError.show("exception", f, this, "checkProjectManagerEmail");
    }
  },
  checkWorkLeaderEmail: function (e) {
    var d = Ext.getStore("MyProjectLimitedStore"),
      a = Ext.getStore("MyWorkleaderStore"),
      b,
      c = "";
    try {
      b = d.getAt(0).get("WorkLeaderId");
      a.meClearFilter();
      a.meAddFilter(["Id", "=", b == null ? -1 : b]);
      a.load({
        callback: function () {
          c = a.data.length > 0 ? a.getAt(0).get("Email") : "";
          e(c);
          return;
        },
      });
    } catch (f) {
      MEM.serverError.show("exception", f, this, "checkWorkLeaderEmail");
    }
  },
  checkContactEmail: function (h, i, f) {
    var g = Ext.getStore("MyProjectLimitedStore"),
      a = Ext.getStore("MyCustomerContactStore"),
      c = Ext.getStore("MyCustomerStore"),
      j = Ext.getStore("MyAdditionalWorkOrderStore"),
      b,
      d,
      e = "";
    try {
      d = g.getAt(0).get("CustomerAgentId");
      b = g.getAt(0).get("CustomerId");
      if (h == 1 && (d || b) && (d != null || b != null)) {
        a.meClearFilter();
        a.meAddFilter(["CustomerId", "=", b]);
        a.meAddFilter(["Id", "=", d > 0 ? d : -1]);
        a.getProxy().getExtraParams().TableName = "AdditionalWorkOrderStore";
        a.getProxy().getExtraParams().TableId = i;
        a.load({
          callback: function () {
            delete a.getProxy().getExtraParams().TableName;
            delete a.getProxy().getExtraParams().TableId;
            try {
              e = (a.data.length > 0 ? a.getAt(0).get("Email") : "") || "";
              if (e != "") {
                f(e);
              } else {
                c.meClearFilter();
                c.meAddFilter(["Id", "=", b == null ? -1 : parseInt(b)]);
                c.load({
                  callback: function () {
                    try {
                      e =
                        (c.data.length > 0 ? c.getAt(0).get("Email") : "") ||
                        "";
                      f(e);
                    } catch (k) {
                      MEM.loadSpinner.hide(k, this, "checkContactEmail");
                    }
                  },
                });
              }
            } catch (k) {
              MEM.loadSpinner.hide(k, this, "checkContactEmail");
            }
          },
        });
      } else {
        f("");
      }
    } catch (k) {
      MEM.loadSpinner.hide(k, this, "checkContactEmail");
    }
  },
  showFileManageDlg: function () {
    var b = this.getMynavigationview(),
      a = this.getMyFilePanel();
    try {
      a = MEM.app
        .getController("MEM.controller.MainMenu")
        .ensureSubPanel("File");
      a.setProjectId(this.getMyAWOProjectId().getValue());
      a.setWorkorderId(Ext.getCmp("myAWOId").getValue());
      MEM.loadSpinner.show();
      b.add(a);
      MEM.loadSpinner.hide();
    } catch (c) {
      MEM.loadSpinner.hide(c, this, "showFileManageDlg");
    }
  },
  onAddFile: function (e, d, a, c, b) {
    this.showFileManageDlg();
  },
  showSignatureButton: function () {
    var a = this;
    if (a.getMynavigationview().getActiveItem().id == "MyAWOFormPanel") {
      this.getApplication().fireEvent("setsignaturetype", "awo");
    }
  },
  hideSignatureButton: function () {
    this.getApplication().fireEvent("clearsignaturetype");
  },
  openSignature: function (a) {
    if (a != "awo") {
      return;
    }
    this.showStatusOverlay(this.getAwoform());
  },
  showStatusOverlay: function (c) {
    var a = this.getStatusOverlay(),
      b = c.getRecord();
    if (!isNaN(b.get("Id"))) {
      var d = a.down("#overlayStatus");
      d.setValue(b.get("AdditionStatusId"));
      a.showBy(c.getFields("AdditionStatusId"));
    }
  },
  onCloseStatus: function () {
    this.getStatusOverlay().hide();
  },
  onSetStatus: function () {
    var a = this,
      c = a.getStatusOverlay(),
      b = a.getAwoform();
    b.getFields("AdditionStatusId").setValue(c.down("selectfield").getValue());
    a.getStatusOverlay().hide();
    a.onAWOSave(!0);
    a.getMynavigationview().push(a.getMysignaturepanel());
  },
  onSignatureOpen: function (A) {
    var u = this,
      h = u.getMysignaturepanel(),
      e = u.getAwoform(),
      l = h.getCanvas(),
      y = Ext.getStore("MyItemUnitStore"),
      f = Ext.getStore("MyCustomerStore"),
      k,
      z = e.getAwoId(),
      m,
      a = 0,
      g = h.getLineWidth(),
      d = 100,
      c = g - d,
      a = 0,
      i = 40,
      q = 0,
      r = 65,
      s = 300,
      t = 330,
      j = 390,
      v = 65 - 2,
      w = 235 - 2,
      x = 40 - 2,
      n = 60 - 2,
      o = g - j - 2,
      b = [];
    var p = function (a, b) {
      return new Array(Math.round(b) + 1).join(a);
    };
    f.clearFilter();
    f.meClearFilter();
    f.meAddFilter(["Id", "=", parseInt(e.getFields("CustomerId").getValue())]);
    f.load({
      callback: function (u, C, B) {
        if (B && u.length > 0) {
          k = u[0];
          var f = Ext.create("MEM.store.MyWorkOrderRowStore");
          f.meAddFilter(["WorkOrderId", "=", z]);
          f.meAddFilter(["Invoiced", "=", !1]);
          f.meAddFilter(["Chargeable", "=", !0]);
          f.load({
            callback: function () {
              var G = this;
              m = 47 - Math.min(G.getCount(), 40);
              var z = e.getRecord();
              var D = e
                .getFields("ProjectId")
                .getStore()
                .findRecord("Id", z.get("ProjectId"), 0, !1, !1, !0);
              var E = e
                .getFields("AdditionStatusId")
                .getStore()
                .findRecord("Id", z.get("AdditionStatusId"), 0, !1, !1, !0);
              var F = Me.string2Lines(z.get("WorkDescription"), c, !0, m, l);
              b.push({
                text: Ext.String.format(
                  "{0} - {1}",
                  T("AWO summary").toUpperCase(),
                  Ext.Date.dateFormat(
                    new Date(),
                    Ext.util.Format.defaultDateFormat
                  )
                ),
                row: a++,
                header: !0,
              });
              b.push({ text: p("-", 65), row: a++, header: !0 });
              b.push({
                text: T("Project no"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: D.get("ProjectNo"),
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("Project name"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: D.get("ProjectName"),
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("AWO no"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: AWOpad(z.get("WorkOrderNo"), 3),
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("AWO"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: z.get("Name"),
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("Status"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: E ? E.get("StatusName") : "",
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("Customer"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: k ? k.get("CustomerName") : "",
                row: a++,
                xpos: d,
                width: c,
                header: !0,
                datafield: "value",
              });
              b.push({
                text: T("Description"),
                row: a,
                header: !0,
                datafield: "title",
              });
              b.push({
                text: z.get("WorkDescription"),
                row: a,
                width: c,
                header: !0,
                datafield: "value",
                suppress: !0,
              });
              F.forEach(function (e) {
                b.push({ text: e, row: a++, xpos: d, width: c, header: !1 });
              });
              a++;
              b.push({ text: T("Date"), row: a, xpos: q, datafield: "date" });
              b.push({ text: T("Title"), row: a, xpos: r, datafield: "title" });
              b.push({
                text: T("Unit-short"),
                row: a,
                xpos: s,
                datafield: "unit",
              });
              b.push({
                text: T("Qty"),
                row: a,
                xpos: t,
                width: n,
                align: "right",
                datafield: "qty",
              });
              b.push({ text: T("Comment"), row: a++, xpos: j });
              b.push({ text: p("-", 184), row: a++ });
              f.each(function (c) {
                if (c.get("PerformedDate")) {
                  b.push({
                    text: Ext.Date.format(
                      c.get("PerformedDate"),
                      Ext.util.Format.defaultDateFormat.replace("Y", "y")
                    ),
                    row: a,
                    xpos: q,
                    width: v,
                    datafield: "date",
                  });
                }
                b.push({
                  text: c.get("Title"),
                  row: a,
                  xpos: r,
                  width: w,
                  datafield: "title",
                });
                b.push({
                  text: y
                    .findRecord("Id", c.get("ItemUnitId"), 0, !1, !1, !0)
                    .get("UnitName"),
                  row: a,
                  xpos: s,
                  width: x,
                  datafield: "unit",
                });
                b.push({
                  text: Me.getFormattedNumeric(
                    c.get("UsedQty") * c.get("Days")
                  ),
                  row: a,
                  xpos: t,
                  width: n,
                  align: "right",
                  datafield: "qty",
                });
                if (c.get("Comment")) {
                  var d = c.get("Comment"),
                    e = Me.string2Lines(d, o, !0, 1, l);
                  b.push({
                    text: d,
                    row: a,
                    datafield: "comment",
                    suppress: !0,
                  });
                  b.push({ text: e[0], row: a++, xpos: j, width: o });
                  if (d.length > e[0].length) {
                    d = d.substr(e[0].length).trim();
                    e = Me.string2Lines(d, g - i, !0, 5, l);
                    e.forEach(function (d) {
                      b.push({ text: d, row: a++, xpos: i, width: g - i });
                    });
                  }
                } else {
                  a++;
                }
              });
              h.initImage(b);
            },
          });
        }
      },
    });
  },
  onSignatureSave: function (a) {
    var g = this,
      h = Ext.getStore("MyWorkOrderDocumentStore"),
      d = g.getAwoform(),
      e = Ext.String.format(
        "{0} {1}",
        T("Signature"),
        Ext.Date.dateFormat(
          new Date(),
          Ext.util.Format.defaultDateFormat + " H:i:s"
        )
      ),
      c,
      f,
      i,
      b;
    if (!a || !d) {
      console.log("missing data");
      return;
    }
    switch (a.type) {
      case "image/png":
        c = "png";
        break;
      default:
        c = "jpg";
        break;
    }
    f = d.getFields("Id").getValue();
    b = Ext.ModelManager.create(
      {
        WorkOrderId: f,
        ProjectId: d.getFields("ProjectId").getValue(),
        Title: e,
        DocumentDescription: e,
        DocumentMimeType: a.type,
        DocumentSize: a.size,
        DocumentData: a.data,
        Filename: Ext.String.format("{0}.{1}", e.replace(/:/g, ""), c),
        ImageWidth: a.width,
        ImageHeight: a.height,
        HideInPDA: !1,
        EnlargeInReports: !0,
        IncludeInReport: !0,
        Id: null,
      },
      h.getModel()
    );
    b.setProxy(h.getProxy());
    b.setId(null);
    MEM.loadSpinner.show();
    b.save({
      success: function (b, d) {
        var c = g.getMynavigationview();
        MEM.loadSpinner.hide();
        c.pop();
        g.onEmailSignature(b.getId(), f);
      },
      failure: function () {
        MEM.loadSpinner.hide();
      },
    });
  },
  onEmailSignature: function (g, f) {
    var b = this,
      d = b.getMynavigationview(),
      e = b.getCustomercontactpanel(),
      c = b.getAwoform().getFields("CustomerId").getValue(),
      h = Ext.getStore("MyAdditionalWorkOrderStore"),
      a = Ext.getStore("MyCustomerContactStore");
    a.meClearFilter();
    a.clearFilter();
    a.meAddFilter({ property: "CustomerId", value: parseInt(c, 10) });
    a.meAddFilter({ property: "Disabled", value: !1 });
    a.getProxy().getExtraParams().TableName = "AdditionalWorkOrderStore";
    a.getProxy().getExtraParams().TableId = f;
    a.load({
      callback: function () {
        delete a.getProxy().getExtraParams().TableName;
        delete a.getProxy().getExtraParams().TableId;
        var b = MEM.app.getController("CustomerContact");
        b.setMode("signature");
        b.setDocumentId(g);
        b.setCustomerId(c);
        d.push(e);
      },
    });
  },
});
Ext.define("MEM.view.customer.MyCustomerPanel", {
  extend: Ext.dataview.List,
  alias: "widget.mycustomerpanel",
  config: {
    cls: "mycustomerpanel",
    autoDestroy: !1,
    store: "MyCustomerStore",
    scrollable: "vertical",
    id: "MyCustomerList",
    ui: "round",
    itemHeight: isPhone ? 28 : 42,
    itemTpl: [
      "<div " +
        '<tpl if="CreditRisk == 1">' +
        'class="creditrisk-warning"' +
        "</tpl>>" +
        "</div>" +
        '<span class="customername">{CustomerName}</span>&nbsp;&nbsp;<span class="customerphone"><a href="tel://{Phone}">{Phone}</a></span>',
    ],
    onItemDisclosure: !0,
    grouped: !0,
    indexBar: { xtype: "myindexbar" },
  },
  constructor: function (a) {
    a = a || {};
    if (Ext.os.is.iOS && !a.infinite) {
      a.infinite = !0;
      a.bufferSize = 100;
    }
    var b = this;
    this.callParent([a]);
    if (a.infinite) {
      this.addCls("my-infinite-fix");
    }
    this.on("painted", function () {
      b.fireEvent("panelshow");
    });
  },
});
Ext.define("MEM.view.customer.MyCustomerFormPanel", {
  extend: Ext.form.FormPanel,
  alias: "widget.mycustomerformpanel",
  config: {
    cls: "mycustomerformpanel",
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "hiddenfield",
            id: "myCustomerId",
            name: "Id",
            listeners: {
              change: function () {
                Ext.getCmp("CustomerContactButton").setDisabled(
                  parseInt(Ext.getCmp("myCustomerId").getValue(), 10) !=
                    Ext.getCmp("myCustomerId").getValue()
                );
              },
            },
          },
          {
            xtype: "myselectfield",
            store: "MyCustomerTypeStore",
            label: T("CustomerType"),
            name: "CustomerTypeId",
            displayField: "TypeName",
            valueField: "Id",
            allowblank: !1,
          },
          {
            xtype: "textfield",
            label: T("CustomerNumber"),
            id: "myCustomerNumber",
            name: "CustomerNo",
            listeners: {
              change: function () {
                Ext.getCmp("myCustomerNumber").setHidden(
                  this.getValue() == "" || this.getValue() == null
                );
              },
            },
            hidden: !0,
          },
          {
            xtype: "textfield",
            label: T("Org / CivicNumber"),
            name: "OrganizationNo",
          },
          {
            xtype: "textfield",
            itemId: "customerName",
            label: T("CustomerName"),
            name: "CustomerName",
            required: !0,
            listeners: {
              change: function (b, a) {
                if (Ext.getCmp("myBillAddress1").getValue() == "") {
                  Ext.getCmp("myBillAddress1").setValue(a);
                }
              },
            },
          },
        ],
      },
      {
        xtype: "fieldset",
        title: T("Address"),
        items: [
          {
            xtype: "textfield",
            id: "myBillAddress1",
            placeHolder: T("Name"),
            labelWidth: 0,
            name: "BillAddress1",
          },
          {
            xtype: "textfield",
            placeHolder: T("Mailing address 1"),
            labelWidth: 0,
            name: "BillAddress2",
          },
          {
            xtype: "textfield",
            placeHolder: T("Mailing address 2"),
            labelWidth: 0,
            name: "BillAddress3",
          },
          {
            xtype: "container",
            items: [
              {
                xtype: "textfield",
                placeHolder: T("Zip code"),
                width: "50%",
                docked: "left",
                labelWidth: 0,
                name: "BillAddress4",
              },
              {
                xtype: "textfield",
                placeHolder: T("City"),
                width: "50%",
                docked: "left",
                labelWidth: 0,
                name: "BillAddress5",
              },
            ],
          },
          {
            xtype: "textfield",
            placeHolder: T("Country"),
            labelWidth: 0,
            name: "BillAddress6",
          },
        ],
      },
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "hiddenfield",
            name: "InfoNoteId",
            listeners: {
              change: function (e, a, c, d) {
                var b = Ext.getStore("MyInfoNoteStore");
                if (a == null || a == "") {
                  Ext.getCmp("CustomerInfoNote").setValue("");
                  return;
                }
                b.meClearFilter();
                b.meAddFilter(["Id", "=", parseInt(a, 10)]);
                b.load({
                  callback: function (b, g, f) {
                    if (f && b.length > 0) {
                      Ext.getCmp("CustomerInfoNote").setValue(b[0].get("Note"));
                    }
                  },
                });
              },
            },
          },
          {
            xtype: "mytextarea",
            labelWidth: "30%",
            id: "CustomerInfoNote",
            label: T("Comment"),
          },
          { xtype: "textfield", label: T("Web address"), name: "WebAddress" },
          {
            xtype: "emailfield",
            label: T("Email"),
            placeHolder: "email@example.com",
            name: "Email",
          },
          { xtype: "textfield", label: T("Phone"), name: "Phone" },
          { xtype: "textfield", label: T("Mobile"), name: "Mobile" },
          {
            xtype: "myselectfield",
            store: "MyCurrencyStore",
            label: T("Currency"),
            name: "CurrencyId",
            displayField: "CurrencyCode",
            valueField: "Id",
            allowblank: !1,
          },
          {
            xtype: "textfield",
            label: T("Property name"),
            name: "PropertyName",
          },
          {
            xtype: "textfield",
            label: T("Housing coop No"),
            name: "HousingCooperativeOrgNo",
          },
          { xtype: "textfield", label: T("Apartment No"), name: "ApartmentNo" },
          {
            xtype: "togglefield",
            label: T("Construction company"),
            name: "ConstructionCompany",
          },
        ],
      },
      {
        xtype: "container",
        items: [
          { xtype: "spacer", docked: "left", width: "30%" },
          {
            xtype: "button",
            ui: "action",
            id: "CustomerContactButton",
            text: T("Contacts"),
            disabled: !0,
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            minWidth: "19%",
          },
          { xtype: "spacer", docked: "left", width: "4px" },
          {
            xtype: "button",
            ui: "confirm",
            id: "CustomerSaveButton",
            text: T("Save"),
            docked: "left",
            minWidth: "19%",
          },
        ],
      },
      { xtype: "spacer", height: "20px" },
    ],
  },
  constructor: function () {
    var a = this;
    a.callParent(arguments);
    a.on("painted", function () {
      a.fireEvent("panelshow");
    });
    a.on("activate", function (b) {
      var a = b.down('[name="OrganizationNo"]');
      if (a) {
        a.setRequired(
          !Me.formValidateAllowBlank("AllCustomerStore", "OrganizationNo")
        );
      }
    });
  },
});
Ext.define("MEM.ux.dataview.MySearchPanel", {
  extend: Ext.form.Panel,
  alias: "widget.mysearchpanel",
  config: {
    autoDestroy: !1,
    scrollable: null,
    fullscreen: !0,
    layout: "vbox",
    defaults: { labelWidth: "33%", margin: 0 },
    limit: 100,
    minLength: 1,
    filters: undefined,
    items: [
      { xtype: "fieldset", docked: "top", itemId: "searchfields" },
      {
        xtype: "mylist",
        itemId: "searchresult",
        flex: 1,
        cls: "my-rowlist",
        ui: "round",
      },
    ],
  },
  constructor: function (g) {
    var a = this,
      f = [],
      c = [];
    a.callParent([g]);
    a.setStore(Ext.getStore(a.getStore()));
    Ext.each(a.getSearchfields(), function (b) {
      f.push({
        itemId: Ext.String.format(
          "{0}_{1}",
          a.getStore().getStoreId(),
          b.field
        ),
        xtype: "searchfield",
        label: b.label,
        name: b.field,
        listeners: {
          keyup: a.onSearch,
          clearicontap: a.onClearIconTap,
          scope: a,
        },
      });
      c.push(b.listeners);
    });
    var d = a.down("#searchresult"),
      e = a.down("#searchfields");
    e.setItems(f);
    for (var b = 0; b <= c.length; b++) {
      if (c[b]) {
        e.getItems().items[b].addListener(c[b]);
      }
    }
    d.setStore(a.getStore());
    d.setItemTpl(a.getItemTpl());
    d.on({ scope: a, itemsingletap: a.onItemTap, itemdoubletap: a.onItemTap });
  },
  search: function (c, g) {
    var b = this,
      d = !1,
      e = b.getFilters(),
      f = b.getMinLength(),
      a = b.getStore();
    a.clearFilter();
    a.meClearFilter();
    if (e) {
      Ext.each(e, function (b) {
        a.meAddFilter(b);
      });
    }
    Ext.each(b.getSearchfields(), function (i) {
      var h = b.down(Ext.String.format("#{0}_{1}", a.getStoreId(), i.field)),
        j = !1,
        e = h.getValue();
      if (i.type == "workorderno") {
        if (
          e.length > 1 &&
          (e.indexOf(String.fromCharCode("196")) >= 0 ||
            e.indexOf(String.fromCharCode("228")) >= 0)
        ) {
          j = !0;
          e = parseInt(e.substring(1, e.length), 10);
        } else {
          e = parseInt(e, 10);
        }
        if (Ext.isNumber(e)) {
          a.meAddFilter([i.field, "=", e]);
          a.meAddFilter(["Addition", "=", j]);
          if (h == c) {
            d = !0;
          }
        }
      } else {
        if (e.length >= f || (h != c && e.length > 0)) {
          a.meAddFilter([i.field, "%", "%" + e]);
          if (h == c) {
            d = !0;
          }
        }
      }
    });
    if (d || g) {
      a.load({ limit: b.getLimit() });
    }
  },
  onSearch: function (a) {
    this.search(a, !1);
  },
  onClearIconTap: function () {
    this.search(null, !0);
  },
  onItemTap: function (a, e, d, c, f, b) {
    this.fireEvent("itemsingletap", a, e, d, c, f, b);
  },
  setSearchStore: function (a) {
    var b = this;
    b.setStore(a);
    b.down("#searchresult").setStore(a);
  },
});
Ext.define("MEM.view.customer.MyCustomerSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.mycustomersearchpanel",
  config: {
    cls: "mycustomersearchpanel",
    itemId: "MyCustomerSearchPanel",
    title: T("Search customer"),
    searchfields: [
      { label: T("Customer no"), field: "CustomerNo" },
      { label: T("Customer name"), field: "CustomerName" },
    ],
    store: {
      storeId: "CustomerSearchPanel_MyCustomerStore",
      type: "mycustomerstorealias",
    },
    itemTpl: [
      '<div <tpl if="CreditRisk == 1">class="creditrisk-warning"</tpl>>{CustomerNo} {CustomerName}</div>',
    ],
  },
});
Ext.define("MEM.view.customer.MySupplierSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.mysuppliersearchpanel",
  config: {
    itemId: "MySupplierSearchPanel",
    title: T("Search Contractor"),
    searchfields: [{ label: T("Name"), field: "CustomerName" }],
    store: { type: "mysupplierstorealias" },
    itemTpl: ["<div>{CustomerName}</div>"],
  },
});
Ext.define("MEM.controller.Customer", {
  extend: MEM.controller.Common,
  config: {
    views: [
      "customer.MyCustomerPanel",
      "customer.MyCustomerFormPanel",
      "customer.MyCustomerContactFormPanel",
      "customer.MyCustomerSearchPanel",
      "customer.MySupplierSearchPanel",
    ],
    stores: [
      "MyCustomerStore",
      "MyCustomerListStore",
      "MyCustomerContactStore",
    ],
    refs: {
      mynavigationview: "mynavigationview",
      customerForm: {
        selector: "mycustomerformpanel",
        xtype: "mycustomerformpanel",
        title: T("Customer"),
        id: "MyCustomerFormPanel",
        autoCreate: !0,
      },
      mycustomercontactformpanel: {
        xtype: "mycustomercontactformpanel",
        selector: "mycustomercontactformpanel",
        autoCreate: !0,
        title: T("Customercontact"),
      },
      customersearchpanel: {
        xtype: "mycustomersearchpanel",
        selector: "mycustomersearchpanel",
        autoCreate: !0,
        title: T("Search customer"),
      },
      suppliersearchpanel: {
        xtype: "mysuppliersearchpanel",
        selector: "mysuppliersearchpanel",
        autoCreate: !0,
        title: T("Search contractor"),
      },
      woCustomerId: "myworkorderformpanel #customerfield",
      awoCustomerId: "myawoformpanel #customerfield",
      projectCustomerId: "myprojectformpanel #customerfield",
      supplierId: "mysuppliercontactpanel #supplierfield",
      saveCustomerButton: "mycustomerformpanel #CustomerSaveButton",
      customerName: "mycustomerformpanel #customerName",
    },
    control: {
      "#MyCustomerFormPanelX": { activate: "hideAdd" },
      "#MyCustomerPanel": {
        itemsingletap: "onMyCustomerPanelListItemTap",
        erased: "hideAdd",
      },
      mycustomerpanel: {
        panelshow: function () {
          this.showAdd();
          MEM.app.getController("CustomerContact").setMode("customer");
        },
      },
      customerForm: {
        panelshow: function () {
          this.getSaveCustomerButton().setDisabled(!1);
        },
      },
      "#MyCustomerPanel .x-list-item-label": {
        itemsingletap: "onMyCustomerPanelListItemTap",
      },
      saveCustomerButton: { tap: "onSaveCustomersTap" },
      "button[action=customerSearch]": { tap: "onCustomerSearch" },
      "#myWOCustomerId": { tap: "onCustomerSearch" },
      "#myAWOCustomerId": { tap: "onCustomerSearch" },
      "#CustomerId": { tap: "onCustomerSearch" },
      customersearchpanel: { itemsingletap: "onCustomerSelected" },
      "button[action=supplierSearch]": { tap: "onSupplierSearch" },
      suppliersearchpanel: { itemsingletap: "onSupplierSelected" },
    },
  },
  init: function () {
    var a = this;
    a.getApplication().on({ scope: a, additem: a.onCustomerAdd });
  },
  onCustomerAdd: function (e) {
    if (e !== "customer") {
      return;
    }
    var d = this.getMynavigationview(),
      a = this.getCustomerForm(),
      c = Ext.getStore("MyCustomerStore").getModel(),
      b = Ext.ModelManager.create(
        {
          Id: null,
          CustomerTypeId: this.intSetting("CustomerTypeId"),
          CurrencyId: this.intSetting("CurrencyId"),
          InfoNoteId: null,
        },
        c
      ),
      f;
    a.setRecord(b);
    f = d.push(a);
  },
  onSaveCustomersTap: function (s, r, o, q) {
    var c = this,
      b = Ext.getStore("MyCustomerStore"),
      i = Ext.getStore("MyCustomerListStore"),
      m = Ext.getStore("MyCustomerContactStore"),
      k = m.getModel(),
      a = c.getCustomerForm().getRecord(),
      e,
      d = a.getId(),
      n = b.findRecord("Id", d, 0, !1, !0, !0),
      g = Ext.getCmp("mynavigationview"),
      h = c.getMycustomercontactformpanel(),
      p,
      f,
      l = Ext.getCmp("CustomerInfoNote").getValue(),
      j = c.getSaveCustomerButton();
    b.remoteFilter = !0;
    f = a.get("InfoNoteId");
    if (!checkRequired(c.getCustomerForm())) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return !1;
    }
    j.setDisabled(!0);
    if (n) {
      c.getCustomerForm().updateRecord(a);
      c.saveInfoNote(d, l, a, "CustomerStore", f);
      if (b.getUpdatedRecords().length) {
        b.meClearFilter();
        b.meAddFilter(["Id", "=", d]);
        b.on({
          scope: c,
          single: !0,
          write: function (b, a) {
            g.pop();
          },
        });
        b.sync();
      } else {
        Ext.Function.defer(function () {
          g.pop();
        }, 100);
      }
    } else {
      c.getCustomerForm().updateRecord(a);
      b.meClearFilter();
      if (isNaN(a.getId())) {
        a.set("Id", null);
        a.set("BillAddress1", a.get("CustomerName"));
      }
      a.setProxy(b.getProxy());
      a.save({
        success: function (m) {
          d = m.get("Id");
          c.saveInfoNote(d, l, a, "CustomerStore", f);
          Ext.getCmp("myCustomerId").setValue(d);
          if (
            m.get("CustomerTypeId") == c.intSetting("PrivateCustomerTypeId")
          ) {
            e = Ext.ModelManager.create(
              {
                Id: null,
                CustomerId: d,
                ContactName: m.get("CustomerName"),
                OrganizationNo: m.get("OrganizationNo"),
                Mobile: m.get("Mobile"),
                Phone: m.get("Phone"),
                Email: m.get("Email"),
              },
              k
            );
          } else {
            e = Ext.ModelManager.create({ Id: null, CustomerId: d }, k);
          }
          b.load({
            callback: function () {
              var a = b.findRecord("Id", d);
              c.getCustomerForm().setRecord(a);
              j.setDisabled(!1);
              h.setRecord(e);
              g.push(h);
            },
          });
          var n = Ext.ModelManager.create(
            {
              Id: m.get("Id"),
              CustomerNo: m.get("CustomerNo"),
              CustomerName: m.get("CustomerName"),
              CreditRisk: m.get("CreditRisk"),
            },
            i.getModel()
          );
          i.add(n);
        },
      });
    }
  },
  onMyCustomerPanelListItemTap: function (g, l, k, b, n, i) {
    var d = this,
      m,
      j,
      f = Ext.getCmp("mynavigationview"),
      c = d.getCustomerForm(),
      a = Ext.getStore("MyCustomerContactStore"),
      h = a.getProxy().getExtraParams(),
      e = b.data.Id;
    a.meClearFilter();
    a.clearFilter();
    a.meAddFilter({ property: "CustomerId", value: parseInt(e, 10) });
    a.meAddFilter({ property: "Disabled", value: !1 });
    a.load({
      callback: function () {
        c.setRecord(b);
        var a = d.getCustomerName();
        a.removeCls("creditrisk-warning");
        if (b && b.get("CreditRisk")) {
          a.addCls("creditrisk-warning");
        }
        f.push(c);
      },
    });
  },
  showAdd: function () {
    this.getApplication().fireEvent("setadditemtype", "customer");
  },
  hideAdd: function () {
    this.getApplication().fireEvent("clearadditemtype");
  },
  onCustomerSearch: function (a) {
    var d = this,
      b = this.getMynavigationview(),
      c = this.getCustomersearchpanel();
    if (a.getNeedRight && !haveRight(a.getNeedRight(), 4)) {
      return;
    }
    d.hideAdd();
    b.push(c);
  },
  onCustomerSelected: function (e, h, g, d, i, f) {
    var b = this.getMynavigationview(),
      c = b.innerItems[b.innerItems.length - 2].getItemId(),
      a;
    switch (c) {
      case "MyWorkOrderFormPanel":
        a = this.getWoCustomerId();
        break;
      case "MyAWOFormPanel":
        a = this.getAwoCustomerId();
        break;
      case "MyProjectFormPanel":
        a = this.getProjectCustomerId();
    }
    if (a) {
      a.setDisplayRecord(d, "Id");
    }
    b.pop();
  },
  onSupplierSearch: function () {
    var c = this,
      a = this.getMynavigationview(),
      b = this.getSuppliersearchpanel();
    c.hideAdd();
    a.push(b);
  },
  onSupplierSelected: function (d, g, f, b, h, e) {
    var c = this.getMynavigationview(),
      a;
    a = this.getSupplierId();
    a.setValue(b.get("Id"));
    c.pop();
  },
});
Ext.define("MEM.controller.CustomerContact", {
  extend: Ext.app.Controller,
  requires: [],
  config: {
    mode: "customer",
    customerId: -1,
    workorderId: -1,
    documentId: -1,
    views: [
      "customer.MyCustomerContactPanel",
      "customer.MyCustomerContactFormPanel",
    ],
    stores: ["MyCustomerContactStore"],
    refs: {
      mynavigationview: "mynavigationview",
      mycustomercontactpanel: "mycustomercontactpanel",
      mycustomercontactformpanel: {
        xtype: "mycustomercontactformpanel",
        selector: "mycustomercontactformpanel",
        autoCreate: !0,
        title: T("Customercontact"),
      },
      savebutton: "#saveContact",
      deletebutton: "#deleteContact",
    },
    control: {
      "#CustomerContactButton": { tap: "openForm" },
      "#MyCustomerContactFormPanel": { activate: "hideButtons" },
      mycustomercontactpanel: {
        panelshow: function () {
          this.onPanelShow();
        },
      },
      mycustomercontactformpanel: {
        panelshow: function () {
          this.onContactPanelShow();
        },
      },
      "#MyCustomerContactPanel": {
        itemsingletap: "onMyCustomerContactListItemTap",
        deactivate: "hideButtons",
      },
      "button[action=saveContact]": { tap: "onCustomerContactSave" },
      "button[action=deleteContact]": { tap: "onDeleteTap" },
    },
  },
  init: function () {
    var a = this;
    a.getApplication().on({
      scope: a,
      additem: a.onCustomerContactAdd,
      addcontact: a.onProjectContactAdd,
      sendemail: a.onSendEmail,
    });
  },
  onDeleteTap: function () {
    var a = Ext.getStore("MyCustomerContactStore"),
      c = this.getMynavigationview(),
      d = Ext.getCmp("MyCustomerContactFormPanel"),
      b = d.getRecord();
    Ext.Msg.confirm("Delete item.", "Are you sure?", function (d) {
      if (d == "yes") {
        a.clearFilter();
        a.meClearFilter();
        a.meAddFilter(["Id", "=", b.getId()]);
        console.dir(a);
        a.remove(b);
        a.sync();
        c.pop();
      }
    });
  },
  openForm: function () {
    var a = this,
      c = a.getMynavigationview(),
      b = a.getMycustomercontactpanel(),
      d = c.push(b);
  },
  onProjectContactAdd: function (a) {
    this.onCustomerContactAdd("customercontact", a.CustomerId);
  },
  onCustomerContactAdd: function (g, c) {
    if (g !== "customercontact") {
      return;
    }
    var i = Ext.getStore("MyCustomerContactStore"),
      f = this.getMynavigationview(),
      b = this.getMycustomercontactformpanel(),
      e = Ext.getStore("MyCustomerContactStore").getModel(),
      a,
      d,
      h;
    if (typeof c === "number") {
      a = c;
    } else {
      if (this.getCustomerId() > 0) {
        a = this.getCustomerId();
      } else {
        if (Ext.getCmp("myCustomerId")) {
          a = Ext.getCmp("myCustomerId").getValue(!0);
        } else {
          a = Ext.getCmp("CustomerId").getValue(!0);
        }
      }
    }
    d = Ext.ModelManager.create({ Id: null, CustomerId: a }, e);
    b.setRecord(d);
    h = f.push(b);
  },
  onCustomerContactSave: function () {
    var d = this,
      b = Ext.getStore("MyCustomerContactStore"),
      c = Ext.getCmp("MyCustomerContactFormPanel"),
      a = c.getRecord(),
      f = c.getValues(),
      e = Ext.getStore("ProjectFormPanel_MyCustomerContactListStore"),
      g = Ext.getCmp("mynavigationview");
    b.clearFilter();
    a.set(f);
    if (isNaN(a.getId())) {
      a.set("Id", null);
    }
    a.setProxy(b.getProxy());
    a.save({
      callback: function () {
        d.reLoadStore(b, "CustomerId", a.data.CustomerId);
        d.reLoadStore(e, "CustomerId", a.data.CustomerId);
        g.pop();
      },
    });
  },
  reLoadStore: function (a, b, c) {
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter([b, "=", c]);
    a.meAddFilter({ property: "Disabled", value: !1 });
    a.load();
  },
  onMyCustomerContactListItemTap: function (e, h, g, b, d, f) {
    var c = Ext.getCmp("mynavigationview"),
      a = this.getMycustomercontactformpanel();
    if (d.getTarget(".x-list-disclosure") || this.getMode() == "customer") {
      a.setRecord(b);
      view = c.push(a);
    }
  },
  onContactPanelShow: function () {
    if (!haveRight("Customer", 4) && !haveRight("CustomerContact", 4)) {
      this.getSavebutton().setHidden(!0);
      this.getDeletebutton().setHidden(!0);
    }
  },
  onPanelShow: function () {
    var a = this;
    a.showButtons();
    switch (a.getMode()) {
      case "signature":
      case "statusmail":
        a.getApplication().fireEvent("setmailtype", "customercontact");
        var b = a.getMynavigationview().getNavigationBar();
        if (b.titleComponent.element) {
          b.titleComponent.element.setWidth("auto");
        }
        b.titleComponent.setTitle(
          a.getMode() == "signature"
            ? T("Copy to customer?")
            : T("Send mail to customer")
        );
        var c = a.getMycustomercontactpanel().getStore();
        if (c.data.length == 1) {
          a.getMycustomercontactpanel().select(0);
        }
        break;
      default:
        break;
    }
  },
  showButtons: function () {
    this.getApplication().fireEvent("setadditemtype", "customercontact");
  },
  hideButtons: function () {
    this.getApplication().fireEvent("clearadditemtype");
    this.getApplication().fireEvent("clearmailtype");
  },
  onSendEmail: function (h) {
    if (h !== "customercontact") {
      return;
    }
    var a = this,
      f = a.getMycustomercontactpanel().selected,
      b = f ? f.items[0] : null,
      e = b ? b.get("Email") : null,
      c = b ? b.getId() : null,
      g = function (a) {
        return window.JSON && window.JSON.parse
          ? window.JSON.parse(a)
          : new Function("return " + a)();
      };
    if (!c) {
      Ext.Msg.show({ title: T("Mail"), message: T("No contact selected") });
      return;
    }
    if (!e || e.length == 0) {
      Ext.Msg.show({ title: T("Mail"), message: T("No contact email found") });
      return;
    } else {
      var d;
      switch (a.getMode()) {
        case "signature":
          d = {
            type: "json",
            msgtype: "email",
            workorderdocumentid: a.getDocumentId(),
            customercontactid: c,
          };
          break;
        case "statusmail":
          d = {
            type: "json",
            msgtype: "email",
            workorderid: a.getWorkorderId(),
            customercontactid: c,
          };
          break;
      }
      Ext.Msg.show({
        title: T("Mail"),
        message: T("Mail will be sent to:") + " " + e,
        buttons: Ext.MessageBox.OKCANCEL,
        fn: function (b) {
          if (b == Ext.MessageBox.OK.itemId) {
            Ext.Ajax.request({
              url:
                Me.API_URL +
                (a.getMode() == "signature"
                  ? "sendWorkOrderDocument"
                  : "sendWorkOrderInfoMsg"),
              method: "POST",
              params: d,
              success: function (d, e) {
                var c = g(d.responseText);
                if (c.success == !0) {
                  Ext.Msg.show({ title: T("Mail"), message: T("Mail sent.") });
                } else {
                  Ext.Msg.show({ title: T("Mail"), message: c.errors });
                }
                a.getMynavigationview().pop(a.getMycustomercontactpanel());
              },
              failure: function (a, c) {
                Ext.Msg.show({ title: T("Mail"), message: a.statusText });
              },
            });
          }
        },
      });
    }
  },
});
Ext.define("MEM.calcdates", {
  extend: Ext.Base,
  singleton: !0,
  holidays: {},
  getDay: function (b, c) {
    var a = b.getDay();
    a = a == 0 ? 7 : a;
    b = Ext.Date.add(b, Ext.Date.DAY, -a + c);
    return b;
  },
  fixWeekend: function (b) {
    var a = new Date(b);
    if (a.getDay() === 0) {
      a = Ext.Date.add(new Date(b), Ext.Date.DAY, 1);
    }
    if (a.getDay() === 6) {
      a = Ext.Date.add(new Date(b), Ext.Date.DAY, 2);
    }
    return a;
  },
  included: function (a, b) {
    return a.indexOf(b) != -1;
  },
  isFreeDay: function (b, d) {
    var a = b.getFullYear(),
      c = Ext.Date.format(b, "Y-m-d");
    if (b.getDay() == 0 || b.getDay() == 6) {
      return !0;
    }
    if (Ext.isDefined(d)) {
      return this.included(d, c);
    }
    if (!this.holidays[a]) {
      this.holidays[a] = this.getHolidays(a);
    }
    return this.included(this.holidays[a], c);
  },
  getWorkingDays: function (b, f) {
    var d = 0,
      e = this.getHolidays(Ext.Date.format(b, "Y")),
      a = b;
    while (a <= f) {
      var c = a.getDay();
      if (
        c != 0 &&
        c != 6 &&
        !this.included(e, Ext.Date.format(a, "Y-m-d")) == !0
      ) {
        d++;
      }
      a.setDate(a.getDate() + 1);
    }
    return d;
  },
  getWorkingHours: function (c, a) {
    a = a < 10 ? "0" + a : a;
    var b = Ext.Date.parseDate(c + "-" + a + "-01", "Y-m-d");
    var d = Ext.Date.parseDate(
      c +
        "-" +
        a +
        "-" +
        Ext.Date.format(
          Ext.Date.add(Ext.Date.add(b, Ext.Date.MONTH, 1), Ext.Date.DAY, -1),
          "d"
        ),
      "Y-m-d"
    );
    return (
      this.getWorkingDays(b, d) *
      parseFloat(getSetting("Time.Hours.StandardWorkingDay").replace(",", "."))
    );
  },
  getEasterDay: function (b) {
    var g = b % 19,
      a = Math.floor(b / 100),
      h = b % 100,
      k = Math.floor(a / 4),
      l = a % 4,
      m = Math.floor((a + 8) / 25),
      n = Math.floor((a - m + 1) / 3),
      c = (19 * g + a - k - n + 15) % 30,
      o = Math.floor(h / 4),
      p = h % 4,
      f = (32 + 2 * l + 2 * o - c - p) % 7,
      i = Math.floor((g + 11 * c + 22 * f) / 451),
      d = Math.floor((c + f - 7 * i + 114) / 31),
      e = ((c + f - 7 * i + 114) % 31) + 1,
      j = b + "-" + (d < 10 ? "0" + d : d) + "-" + (e < 10 ? "0" + e : e);
    return j;
  },
  getNorwayHolidays: function (a) {
    var b = this.getEasterDay(a);
    return [
      a - 1 + "-" + "12-25",
      a - 1 + "-" + "12-26",
      a + "-" + "01-01",
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, -3), "Y-m-d"),
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, -2), "Y-m-d"),
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, 1), "Y-m-d"),
      b,
      a + "-" + "05-01",
      a + "-" + "05-17",
      Ext.Date.format(
        Ext.Date.add(new Date(b), Ext.Date.DAY, 4 + 7 * 5),
        "Y-m-d"
      ),
      Ext.Date.format(
        Ext.Date.add(new Date(b), Ext.Date.DAY, 7 * 7 + 1),
        "Y-m-d"
      ),
      a + "-" + "12-25",
      a + "-" + "12-26",
    ];
  },
  getBoxingDay: function (d) {
    var b = d + "-" + "12-26",
      c = new Date(b).getDay() === 6 || new Date(b).getDay() === 1,
      a = this.fixWeekend(b);
    if (c) {
      a = Ext.Date.add(new Date(a), Ext.Date.DAY, 1);
    }
    return a;
  },
  getNextDate: function (c, b) {
    var a = new Date(c);
    while (a.getDay() !== b) {
      a = Ext.Date.add(a, Ext.Date.DAY, 1);
    }
    return a;
  },
  getPreviousDate: function (c, b) {
    var a = new Date(c);
    while (a.getDay() !== b) {
      a = Ext.Date.add(a, Ext.Date.DAY, -1);
    }
    return a;
  },
  getUkHolidays: function (a) {
    var b = this.getEasterDay(a);
    return [
      Ext.Date.format(this.fixWeekend(a - 1 + "-" + "12-25"), "Y-m-d"),
      Ext.Date.format(this.getBoxingDay(a - 1), "Y-m-d"),
      Ext.Date.format(this.fixWeekend(a + "-" + "01-01"), "Y-m-d"),
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, -2), "Y-m-d"),
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, 1), "Y-m-d"),
      Ext.Date.format(this.getNextDate(a + "-" + "05-01", 1), "Y-m-d"),
      Ext.Date.format(this.getPreviousDate(a + "-" + "05-31", 1), "Y-m-d"),
      Ext.Date.format(this.getPreviousDate(a + "-" + "08-31", 1), "Y-m-d"),
      Ext.Date.format(this.fixWeekend(a + "-" + "12-25"), "Y-m-d"),
      Ext.Date.format(this.getBoxingDay(a), "Y-m-d"),
    ];
  },
  getSwedenHolidays: function (a) {
    var f,
      b,
      c,
      d = new Date(a + "-06-27"),
      e = Ext.Date.add(d, Ext.Date.DAY, -(d.getDay() + 1)),
      g = Ext.Date.add(e, Ext.Date.DAY, -1);
    b = this.getEasterDay(a);
    c = this.getDay(new Date(a + "-11-06"), 6);
    f = [
      a - 1 + "-" + "12-24",
      a - 1 + "-" + "12-25",
      a - 1 + "-" + "12-26",
      a - 1 + "-" + "12-31",
      a + "-" + "01-01",
      a + "-" + "01-06",
      b,
      Ext.Date.format(this.getDay(new Date(b), 5), "Y-m-d"),
      Ext.Date.format(Ext.Date.add(new Date(b), Ext.Date.DAY, 1), "Y-m-d"),
      Ext.Date.format(
        Ext.Date.add(this.getDay(new Date(b), 4), Ext.Date.DAY, 6 * 7),
        "Y-m-d"
      ),
      a + "-" + "05-01",
      a + "-" + "06-06",
      Ext.Date.format(g, "Y-m-d"),
      Ext.Date.format(e, "Y-m-d"),
      Ext.Date.format(
        c > new Date(a + "-11-06") ? Ext.Date.add(c, Ext.Date.DAY, -7) : c,
        "Y-m-d"
      ),
      a + "-" + "12-24",
      a + "-" + "12-25",
      a + "-" + "12-26",
      a + "-" + "12-31",
    ];
    return f;
  },
  getHolidays: function (a) {
    var b = getSetting("country");
    switch (b) {
      case "GB":
        return this.getUkHolidays(a);
      case "NO":
        return this.getNorwayHolidays(a);
      default:
        return this.getSwedenHolidays(a);
    }
  },
});
Ext.define("MEM.view.diary.MyDiaryRowForm", {
  extend: Ext.form.Panel,
  alias: "widget.mydiaryrowform",
  scroll: "vertical",
  currentDate: null,
  config: {
    cls: "mydiaryrowform",
    autoDestroy: !1,
    styleHtmlContent: !0,
    defaults: {},
    project: null,
    myCopyOverlay: null,
    KPIReporting: !1,
    items: [
      {
        xtype: "fieldset",
        defaults: {
          xtype: "mytextarea",
          showPhrases: !0,
          labelWidth: isPhone ? "40%" : "30%",
        },
        items: [
          {
            xtype: "hiddenfield",
            id: "myApproved",
            name: "Approved",
            listeners: {
              change: function (d, a, b, c) {
                _approved = a == "true";
              },
            },
          },
          { itemId: "ProjectId", xtype: "hiddenfield" },
          { itemId: "CustomerId", xtype: "hiddenfield" },
          {
            xtype: "hiddenfield",
            id: "myDiaryId",
            name: "Id",
            listeners: {
              change: function (e, b, c, d) {
                var a = _approved || isNaN(b);
                if (a == !0) {
                  Ext.getCmp("addphoto").setDisabled(!0);
                  Ext.getCmp("rowaddwodiary").setDisabled(!0);
                  Ext.getCmp("rowaddfavdiary").setDisabled(!0);
                  Ext.getCmp("rowaddweather").setDisabled(!0);
                  this.up("[cls=mydiaryrowform]")
                    .down("#kpireporting")
                    .setDisabled(!0);
                } else {
                  Ext.getCmp("addphoto").setDisabled(!1);
                  Ext.getCmp("rowaddwodiary").setDisabled(!1);
                  Ext.getCmp("rowaddfavdiary").setDisabled(!1);
                  Ext.getCmp("rowaddweather").setDisabled(!1);
                  this.up("[cls=mydiaryrowform]")
                    .down("#kpireporting")
                    .setDisabled(!1);
                }
              },
            },
          },
          { label: T("Started and ongoing work"), name: "CurrentWork" },
          { label: T("Completed work"), name: "FinishedWork" },
          { label: T("Deviations and disruptions"), name: "WorkProblems" },
          { label: T("Additional workorders"), name: "ChangeAdditionNotes" },
        ],
      },
      {
        xtype: "container",
        cls: "my-subcontainer",
        layout: { type: "hbox", pack: "center" },
        items: [
          {
            xtype: "button",
            flex: 1,
            ui: "decline",
            text: T("Delete"),
            action: "diaryDelete",
          },
          {
            xtype: "button",
            flex: 1,
            ui: "confirm",
            text: T("Copy"),
            action: "diaryCopy",
          },
          {
            xtype: "button",
            flex: 1,
            ui: "confirm",
            text: T("Save"),
            action: "diarySave",
          },
        ],
      },
      {
        xtype: "container",
        id: "MyChecklistDiaryContainer",
        itemId: "diarychecklistheader",
        hidden: !0,
        items: [
          {
            xtype: "toolbar",
            ui: "light",
            title: T("Checklist"),
            margin: "0 -1em 0 -1em",
            height: isPhone ? 36 : 40,
            layout: { align: "center", type: "hbox" },
          },
        ],
      },
      {
        xtype: "mychecklistlist",
        store: "MyChecklistDiaryStore",
        id: "MyChecklistDiaryList",
        itemId: "diarychecklist",
      },
      {
        xtype: "toolbar",
        cls: "myresourceheader",
        ui: "light",
        title: T("Resourcerows"),
        layout: { align: "center", type: "hbox" },
        items: [
          {
            id: "rowaddwodiary",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            text: T("Add"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "add",
            iconMask: !0,
          },
          {
            itemId: "kpireporting",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            text: T("Reporting"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "compose",
            iconMask: !0,
          },
          {
            id: "rowaddweather",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            text: T("Weather"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "cloud",
            iconMask: !0,
            hidden: !1,
          },
          {
            id: "addphoto",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Image"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "camera",
            iconMask: !0,
          },
          {
            id: "rowaddfavdiary",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Favorite"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "favorites",
            iconMask: !0,
          },
        ],
      },
      {
        xtype: "myworkorderrowlist",
        store: "MyCloneWorkOrderRowStore",
        itemId: "myDiaryRowList",
      },
    ],
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getWorkOrderId: function () {
    return null;
  },
  getCustomerId: function () {
    var a = this.down("#CustomerId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  setProjectId: function (a) {
    this.down("#ProjectId").setValue(a);
  },
  setCustomerId: function (a) {
    this.down("#CustomerId").setValue(a);
  },
  setRecord: function (a) {
    this.down("#myDiaryRowList").setKPIName(a.get("KPIName"));
    return this.callParent(arguments);
  },
  applyProject: function (a, c) {
    var b = a && a.get("KPIRuleId");
    this.setProjectId(a ? a.get("Id") : null);
    this.setCustomerId(a ? a.get("CustomerId") : null);
    this.down("#kpireporting").setHidden(!b);
    this.down("#rowaddwodiary").setHidden(b);
    this.down("#myDiaryRowList").setProject(a);
    this.setKPIReporting(b);
    return a;
  },
});
Ext.define("MEM.view.diary.MyWeatherRowForm", {
  extend: Ext.form.Panel,
  alias: "widget.myweatherrowform",
  scroll: "vertical",
  currentDate: null,
  config: {
    cls: "myweatherrowform",
    autoDestroy: !1,
    styleHtmlContent: !0,
    defaults: {},
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "hiddenfield",
            id: "myWeatherApproved",
            name: "Approved",
            listeners: {
              change: function (d, a, b, c) {
                _approved = a == "true";
              },
            },
          },
          {
            xtype: "textfield",
            label: T("Time 1"),
            placeHolder: "hh:mm",
            name: "Time1Display",
          },
          {
            xtype: "container",
            items: [
              {
                xtype: "numberfield",
                label: T("Temp 1"),
                docked: "left",
                labelWidth: "60%",
                name: "Temperature1",
                width: "50%",
              },
              {
                xtype: "textfield",
                label: T("Precipitation 1"),
                docked: "left",
                name: "Precipitation1",
                width: "50%",
              },
            ],
          },
          {
            xtype: "numberfield",
            label: T("MaterialTemp1"),
            name: "MaterialTemp1",
            itemId: "materialtemp1",
          },
          {
            xtype: "textfield",
            label: T("Time 2"),
            placeHolder: "hh:mm",
            name: "Time2Display",
          },
          {
            xtype: "container",
            items: [
              {
                xtype: "numberfield",
                label: T("Temp 2"),
                docked: "left",
                labelWidth: "60%",
                name: "Temperature2",
                width: "50%",
              },
              {
                xtype: "textfield",
                label: T("Precipitation 2"),
                docked: "left",
                name: "Precipitation2",
                width: "50%",
              },
            ],
          },
          {
            xtype: "numberfield",
            label: T("MaterialTemp2"),
            name: "MaterialTemp2",
            itemId: "materialtemp2",
          },
          {
            xtype: "textfield",
            label: T("Present workforce"),
            name: "WorkforceCount",
          },
          {
            xtype: "mytextarea",
            label: T("Workforce comment"),
            labelWidth: "30%",
            placeHolder: T("Workforce comment"),
            height: isPhone ? PHONE_TEXTAREA_HEIGHT : PAD_TEXTAREA_HEIGHT,
            name: "WorkforceNotes",
          },
        ],
      },
      {
        xtype: "container",
        cls: "my-subcontainer",
        layout: { type: "card" },
        items: [
          { xtype: "spacer", docked: "left", width: "40%" },
          {
            xtype: "button",
            docked: "left",
            minWidth: "20%",
            ui: "confirm",
            text: T("Save"),
            action: "weatherSave",
          },
        ],
      },
    ],
  },
  initialize: function () {
    this.down("#materialtemp1").setHidden(
      Me.formValidateHidden("DiaryStore", "MaterialTemp1")
    );
    this.down("#materialtemp2").setHidden(
      Me.formValidateHidden("DiaryStore", "MaterialTemp2")
    );
    this.callParent(arguments);
  },
});
Ext.define("MEM.view.diary.MyStaffLogPanel", {
  extend: Ext.Panel,
  xtype: "mystafflogpanel",
  alias: "widget.mystafflogpanel",
  fullscreen: !0,
  config: {
    cls: "mystafflogpanel",
    layout: { type: "card" },
    mydiaryrecord: null,
    myfilter: null,
    items: [
      {
        xtype: "container",
        docked: "top",
        cls: "my-stafflist-toolbar",
        scrollable: { direction: "horizontal", directionLock: !0 },
        items: [
          {
            xtype: "toolbar",
            ui: "my-status-button-ui",
            cls: "stafflistToolbar",
            width: "4096",
            fieldLabel: T("Status"),
            items: [
              {
                xtype: "segmentedbutton",
                itemId: "statusButtons",
                allowDepress: !1,
              },
            ],
          },
        ],
      },
      {
        xtype: "list",
        id: "MyStaffList",
        cls: "mystafflist",
        store: { type: "mystaffliststorealias" },
        grouped: !0,
        scrollToTopOnRefresh: !1,
        itemTpl:
          '<span class ="mystafflist stafflist-span">{FullName})</span> <span class ="mystafflist stafflist-span">{CheckedIn} {CheckedOut}</span>',
      },
      {
        xtype: "container",
        docked: "bottom",
        scrollable: null,
        items: [
          {
            xtype: "toolbar",
            itemId: "viewtoolbar",
            cls: "stafflistBottomToolbar",
            ui: "light",
            docked: "bottom",
            layout: { pack: "start", align: "center", type: "hbox" },
            items: [
              {
                xtype: "button",
                cls: "x-button-icon-standard",
                width: 200,
                docked: "right",
                ui: "light",
                text: T("Copy previous day"),
                action: "copyDay",
              },
            ],
          },
        ],
      },
      { itemId: "ProjectId", xtype: "hiddenfield" },
    ],
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  setProjectId: function (a) {
    this.down("#ProjectId").setValue(a);
  },
});
Ext.define("MEM.ux.MyCheckInOutButton", {
  extend: Ext.Button,
  alias: "widget.mycheckinoutbutton",
});
Ext.define("MEM.view.diary.MyPersonalStaffLogPanel", {
  extend: Ext.Panel,
  xtype: "mypersonalstafflogpanel",
  alias: "widget.mypersonalstafflogpanel",
  fullscreen: !0,
  config: {
    cls: "mypersonalstafflogpanel",
    layout: { type: "card" },
    myidno: null,
    mydiaryid: null,
    mylogrecord: null,
    mydiaryrecord: null,
    myprojectid: null,
    items: [
      {
        xtype: "container",
        layout: { type: "vbox" },
        items: [
          {
            xtype: "container",
            items: [
              {
                itemId: "projectfield",
                xtype: "myselectfield",
                store: "MyProjectListStore",
                displayField: "Project",
                placeHolder: T("Select project") + "...",
                valueField: "Id",
                label: T("Project"),
                autoSelect: !1,
              },
              { xtype: "spacer", height: 40 },
            ],
          },
          {
            xtype: "container",
            itemId: "buttonContainer",
            width: "100%",
            height: "100%",
            layout: { type: "card", align: "center", pack: "center" },
            items: [
              { xtype: "container" },
              {
                xtype: "container",
                layout: { type: "vbox", align: "center", pack: "center" },
                items: [
                  {
                    xtype: "mycheckinoutbutton",
                    text: T("Check in"),
                    cls: "mycheckinoutbutton mycheckinbutton",
                    action: "checkInOut",
                  },
                  { flex: 1 },
                ],
              },
              {
                xtype: "container",
                layout: { type: "vbox", align: "center", pack: "center" },
                items: [
                  {
                    xtype: "mycheckinoutbutton",
                    text: T("Check out"),
                    cls: "mycheckinoutbutton mycheckoutbutton",
                    action: "checkInOut",
                  },
                  {
                    xtype: "container",
                    flex: 1,
                    items: [
                      { xtype: "spacer", height: 20 },
                      {
                        xtype: "textfield",
                        itemId: "checkedintime",
                        cls: "checkedintime",
                        clearIcon: !1,
                        readonly: !0,
                      },
                    ],
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
});
Ext.define("MEM.view.diary.MySupplierContactPanel", {
  extend: Ext.Panel,
  xtype: "mysuppliercontactpanel",
  alias: "widget.mysuppliercontactpanel",
  fullscreen: !0,
  config: {
    cls: "mysuppliercontactpanel",
    layout: { type: "card" },
    items: [
      {
        xtype: "container",
        layout: { type: "vbox" },
        items: [
          {
            xtype: "container",
            items: [
              {
                itemId: "supplierfield",
                xtype: "myselectfield",
                store: { type: "mysupplierstorealias" },
                displayField: "CustomerName",
                valueField: "Id",
                label: T("Supplier"),
                autoSelect: !1,
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    this.setLeft(
                      this.up().down("myselectfield").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                action: "supplierSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "list",
            cls: "my-contactlist",
            id: "MyContactList",
            ui: "round",
            flex: 1,
            store: { type: "mysuppliercontactstorealias" },
            itemTpl:
              '<div class ="my-tpl-list name">{ContactName} ({OrganizationNo})</div>',
          },
          {
            xtype: "container",
            docked: "bottom",
            scrollable: null,
            items: [
              {
                xtype: "toolbar",
                itemId: "viewtoolbar",
                cls: "supplierBottomToolbar",
                ui: "light",
                docked: "bottom",
                layout: { pack: "start", align: "center", type: "hbox" },
                items: [
                  {
                    xtype: "button",
                    itemId: "addContactsButton",
                    cls: "x-button-icon-standard",
                    width: 100,
                    docked: "right",
                    ui: "light",
                    text: T("Add"),
                    action: "addContacts",
                  },
                ],
              },
            ],
          },
          { itemId: "ProjectId", xtype: "hiddenfield" },
        ],
      },
    ],
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  setProjectId: function (a) {
    this.down("#ProjectId").setValue(a);
  },
});
Ext.define("MEM.view.diary.MyDiaryCopyOverlay", {
  extend: Ext.form.Panel,
  alias: "widget.mydiarycopyoverlay",
  xtype: "mydiarycopyoverlay",
  config: {
    cls: "mydiarycopyoverlay",
    left: "10%",
    top: "20%",
    width: "80%",
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    scrollable: null,
    styleHtmlContent: !0,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Copy previous diary"),
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            itemId: "closeOverlay",
          },
        ],
      },
      {
        xtype: "checkboxfield",
        labelWidth: "80%",
        label: T("Include order rows"),
        itemId: "includeRows",
        layout: { type: "hbox", align: "center" },
      },
      {
        xtype: "checkboxfield",
        labelWidth: "80%",
        label: T("Copy quantity from order rows"),
        itemId: "copyQty",
      },
      {
        xtype: "button",
        flex: 1,
        ui: "confirm",
        text: T("Copy"),
        action: "copyPreviousDiary",
        minHeight: "30px",
      },
    ],
  },
  initialize: function () {
    var a = this,
      c = getUserSetting("CopyDiaryOptions");
    a.callParent(arguments);
    a.down("#closeOverlay").on({
      tap: {
        fn: function () {
          a.hide();
        },
        scope: this,
        single: !0,
      },
    });
    if (c) {
      var b = JSON.parse(c);
      a.down("#includeRows").setChecked(b.includerows);
      a.down("#copyQty").setChecked(b.copyqty);
      if (b.includerows !== !0) {
        a.down("#copyQty").disable();
      }
    } else {
      a.down("#copyQty").disable();
    }
    a.down("#includeRows").on("change", a.onIncludeRowsChecked, a);
  },
  onIncludeRowsChecked: function () {
    var a = this;
    if (a.down("#includeRows").getChecked()) {
      a.down("#copyQty").enable();
    } else {
      a.down("#copyQty").disable();
      a.down("#copyQty").setChecked(!1);
    }
  },
});
Ext.define("MEM.model.StaffLog", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Id", type: "int" },
      { name: "Created", type: "string", dateFormat: "time" },
      { name: "CreatedId", type: "int" },
      { name: "Changed", type: "string", dateFormat: "time" },
      { name: "ChangedId", type: "int" },
      { name: "DiaryId", type: "int" },
      { name: "ProjectId", type: "int" },
      { name: "IdNo", type: "string" },
      { name: "Origin", type: "string", useNull: !0 },
      { name: "OriginId", type: "int" },
      { name: "CheckedIn", type: "date", dateFormat: "Y-m-d\\TH:i:s" },
      {
        name: "CheckedInTime",
        type: "string",
        convert: function (b, a) {
          return a.timeDisplay(b, a, "CheckedIn");
        },
      },
      { name: "CheckedOut", type: "date", dateFormat: "Y-m-d\\TH:i:s" },
      { name: "FullName", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyStaffLogStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mystafflogstorealias",
  config: {
    model: "MEM.model.StaffLog",
    storeId: "MyStaffLogStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "StaffLogStore" },
  },
});
Ext.define("MEM.model.StaffPreviousDay", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Id", type: "int" },
      { name: "Created", type: "string", dateFormat: "time" },
      { name: "CreatedId", type: "int" },
      { name: "Changed", type: "string", dateFormat: "time" },
      { name: "ChangedId", type: "int" },
      { name: "IdNo", type: "string" },
      { name: "DiaryId", type: "int" },
      { name: "ProjectId", type: "int" },
    ],
  },
});
Ext.define("MEM.store.MyStaffPreviousDayStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mystaffpreviousdaystorealias",
  config: {
    model: "MEM.model.StaffPreviousDay",
    storeId: "MyStaffPreviousDayStore",
    autoLoad: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "StaffPreviousDayStore" },
  },
});
Ext.define("MEM.model.Supplier", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Id", type: "int" },
      { name: "CustomerNo", type: "string", max: 50, allowBlank: !1 },
      { name: "CustomerName", type: "string", max: 50, allowBlank: !1 },
      { name: "OrganizationNo", type: "string", max: 15 },
    ],
  },
});
Ext.define("MEM.store.MySupplierStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mysupplierstorealias",
  config: {
    model: "MEM.model.Supplier",
    storeId: "MySupplierStore",
    remoteFilter: !1,
    remoteSort: !1,
    sorters: [
      { property: "CustomerName", direction: "ASC" },
      { property: "CustomerNo", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "SupplierStore" },
  },
});
Ext.define("MEM.store.MySupplierContactStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mysuppliercontactstorealias",
  config: {
    model: "MEM.model.CustomerContact",
    storeId: "MySupplierContactStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "ContactName", direction: "ASC" }],
    syncRemovedRecords: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "SupplierContactStore" },
    filters: [{ property: "Disabled", value: !1 }],
  },
});
Ext.define("MEM.model.WorkOrderContact", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "WorkOrderId", type: "int" },
      { name: "CustomerAgentId", type: "int" },
      { name: "Mobile", type: "string", max: 30 },
      { name: "Phone", type: "string", max: 30 },
      { name: "Email", type: "string", max: 50 },
      { name: "CustomerId", type: "int" },
      { name: "ContactName", type: "string", max: 50 },
      { name: "CustomerName", type: "string", max: 50 },
    ],
  },
});
Ext.define("MEM.store.MyWorkOrderContactStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myworkordercontactstorealias",
  config: {
    model: "MEM.model.WorkOrderContact",
    storeId: "MyWorkOrderContactStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !0,
    sorters: [
      { property: "CustomerName", direction: "ASC" },
      { property: "ContactName", direction: "ASC" },
    ],
    proxy: { type: "myproxy", url: Me.STORE_URL + "WorkOrderContactStore" },
  },
});
Ext.define("MEM.view.diary.MyChecklistDiaryOverlay", {
  extend: Ext.form.Panel,
  xtype: "mychecklistdiaryoverlay",
  config: {
    cls: "mychecklistdiaryoverlay",
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Add checklistpoint"),
        layout: { pack: "end" },
        items: [
          {
            id: "closeStatus",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "check2",
            iconMask: !0,
            action: "closeChecklistAdd",
          },
        ],
      },
      {
        id: "ChecklistItemNo",
        xtype: "textfield",
        itemId: "overlayChecklistNumber",
        label: T("Number"),
        name: "ItemNo",
      },
      {
        id: "ChecklistItemDescription",
        xtype: "textfield",
        itemId: "overlayChecklistDescription",
        label: T("Title"),
        name: "ItemDescription",
      },
    ],
  },
});
var _currentDiaryId;
Ext.define("MEM.controller.Diary", {
  extend: MEM.controller.Common,
  config: {
    staffLogIcon: '<div class="has-stafflog">g</div>',
    views: [],
    stores: [
      "MEM.store.MyWorkOrderStore",
      "MEM.store.MyStaffListStore",
      "MEM.store.MyStaffLogStore",
      "MEM.store.MyProjectListStore",
      "MEM.store.MyStaffPreviousDayStore",
      "MEM.store.MySupplierStore",
      "MEM.store.MySupplierContactStore",
      "MEM.store.MyWorkOrderContactStore",
    ],
    refs: {
      mynavigationview: "mynavigationview",
      navigationBar: "#mynavigationbar",
      personalStaffLogPanel: "mypersonalstafflogpanel",
      diaryPanel: "#MyDiaryPanel",
      diaryCarouselPanel: "#MyDiaryCarouselPanel",
      checkList: "mydiaryrowform #diarychecklist",
      checkListHeader: "mydiaryrowform #diarychecklistheader",
      diaryForm: {
        selector: "mydiaryrowform",
        xtype: "mydiaryrowform",
        id: "mydiaryrowform",
        autoCreate: !0,
      },
      staffLogPanel: {
        selector: "mystafflogpanel",
        xtype: "mystafflogpanel",
        id: "mystafflogpanel",
        autoCreate: !0,
      },
      supplierContactPanel: {
        selector: "mysuppliercontactpanel",
        xtype: "mysuppliercontactpanel",
        id: "mysuppliercontactpanel",
        autoCreate: !0,
      },
      searchSupplierPanel: {
        selector: "mysuppliersearchpanel",
        xtype: "mysuppliersearchpanel",
        id: "mySupplierSearchPanel",
        autoCreate: !0,
      },
      weatherForm: {
        selector: "myweatherrowform",
        xtype: "myweatherrowform",
        id: "myweatherrowform",
        autoCreate: !0,
      },
      filePanel: {
        selector: "myfilepanel",
        xtype: "myfilepanel",
        id: "MyFilePanel",
      },
      dayToolbar: "mydiaryday toolbar",
      saveButton: "mydiaryrowform button",
      myDiaryId: "mydiaryrowform #myDiaryId",
      checklistOverlay: {
        selector: "mychecklistdiaryoverlay",
        xtype: "mychecklistdiaryoverlay",
        autoCreate: !0,
      },
      textAreaOverlay: {
        selector: "mytextareaoverlay",
        xtype: "mytextareaoverlay",
        autoCreate: !0,
        autoDestroy: !0,
      },
      diaryProjectId: "#myDiaryProjectId",
      diaryWorkOrderId: { selector: "mydiaryrowform #myDiaryWorkOrderId" },
      infoLabel: "#MyDiaryPanel #infoLabel",
      diaryAdd: "#MyDiaryPanelCenter button[action=diaryAdd]",
      dayLabel: "#MyDiaryPanelCenter mydiaryday dayLabel",
      diaryToolbar: "mydiaryrowform toolbar",
      diaryList: "mydiaryrowform mylist",
      diaryPreview: "#MyDiaryPanelCenter button[action=diaryPreview]",
      viewtoolbar: "mystafflogpanel #viewtoolbar",
      filterButtons: "mystafflogpanel #statusButtons",
      copyPreviousDay: "#mystafflogpanel button[action=copyDay]",
      addSupplierContact: "#mysuppliercontactpanel button[action=addContacts]",
      supplier: { selector: "mysuppliercontactpanel #mySuppliers" },
      rowList: "mydiaryrowform #myDiaryRowList",
    },
    control: {
      navigationBar: {
        beforeback: function (d, c) {
          var a = this,
            b;
          if (a.getMynavigationview().getActiveItem().id === "mydiaryrowform") {
            return (b = !a.saveQueryIfDirtyForm(!1));
          }
        },
      },
      "mystafflogpanel segmentedbutton": { toggle: "onFilterStaffLogButton" },
      copyPreviousDay: { tap: "onCopyPreviousDay" },
      addSupplierContact: { tap: "onAddSupplierContacts" },
      "mypersonalstafflogpanel button[action=checkInOut]": {
        tap: "onPersonalCheckInOut",
      },
      "mysuppliercontactpanel #supplierfield": {
        change: "onSupplierSelectListTap",
      },
      "mypersonalstafflogpanel #projectfield": {
        change: "onProjectSelectListTap",
      },
      mynavigationview: {
        push: function (b, c, a) {
          this.hideStaffLogButton();
        },
        pop: function (d, f, e) {
          var b = this,
            a = Ext.getStore("MyCloneWorkOrderRowStore"),
            c;
          if (
            !(
              d.getActiveItem().getActiveItem().id == "MyDiaryPanel" ||
              d.getActiveItem().id == "mydiaryrowform"
            )
          ) {
            b.hideDiaryAdd();
            return;
          }
          if (!_currentDate) {
            _currentDate = new Date();
          }
          c = getMonday(new Date(_currentDate));
          if (
            new Date(_currentDate) > Ext.Date.add(c, Ext.Date.DAY, 7) ||
            new Date(_currentDate) < c
          ) {
            b.onRenderDiary(b.getDiaryPanel(), null, new Date(_currentDate), 1);
          } else {
            if (d.getActiveItem().getActiveItem().id == "MyDiaryPanel") {
              b.onRenderDiary(
                b.getDiaryPanel(),
                null,
                new Date(_currentDate),
                1
              );
            }
          }
          b.setDayLabel(
            Ext.Date.format(_currentDate, Ext.util.Format.defaultDateFormat)
          );
          a.clearFilter();
          a.meClearFilter();
          if (Number(_currentDiaryId)) {
            a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
          } else {
            a.meAddFilter(["DiaryId", "=", -1]);
          }
          a.meAddFilter(["ShowInMobile", "=", !0]);
          a.load();
        },
        back: function (b, e) {
          var a = this,
            c = this.getMynavigationview();
          if (b.getActiveItem().getActiveItem().id == "MyDiaryPanel") {
            c.down("titlebar").setTitle(
              T("Diary") + " - " + CURRENT_PROJECTNAME
            );
            a.hideStaffLogButton();
          } else {
            if (b.getActiveItem().id == "mydiaryrowform") {
              var d = c.getActiveItem().getProject().get("WorkplaceId");
              a.setDayLabel(
                Ext.Date.format(_currentDate, Ext.util.Format.defaultDateFormat)
              );
              if (d) {
                a.showStaffLogButton();
              }
              a.showDiaryAdd();
              a.hideStaffLogButtons();
            } else {
              if (b.getActiveItem().id == "mystafflogpanel") {
                a.onOpenStaffLog();
              }
            }
          }
        },
      },
      diaryPreview: { tap: "onDiaryPreview" },
      diaryAdd: { tap: "onDiaryAdd" },
      "#rowaddweather": { tap: "onRowAddWeather" },
      "mydiaryrowform #kpireporting": { tap: "onKPIReporting" },
      "#addphoto": { tap: "onRowAddPhoto" },
      "button[action=diarySave]": { tap: "onDiarySaveTap" },
      "button[action=diaryCopy]": { tap: "onDiaryCopyTap" },
      "button[action=copyPreviousDiary]": { tap: "onCopyPreviousDiary" },
      "button[action=weatherSave]": { tap: "onWeatherSaveTap" },
      "button[action=diaryDelete]": { tap: "onDiaryDeleteTap" },
      "list[itemId=selectdiaryrow]": { itemsingletap: "onDaySelectListTap" },
      "button[action=checklistdiaryadd]": { tap: "onChecklistDiaryAddTap" },
      "button[action=closeChecklistAdd]": { tap: "onCloseChecklistDiaryAdd" },
      "button[action=openstafflog]": { tap: "onOpenStaffLog" },
      "button[action=printstafflog]": { tap: "onPrintStaffLog" },
      "button[action=opensuppliercontact]": { tap: "onOpenSupplierContact" },
      "#MyChecklistDiaryList": {
        itemsingletap: "onMyChecklistDiaryListItemTap",
      },
      "#MyStaffList": { itemsingletap: "onMyStaffListItemTap" },
      "#MyContactList": { itemsingletap: "onMySupplierContactListItemTap" },
      diaryCarouselPanel: {
        activeitemchange: function (e, f, h, i) {
          var b = e.getInnerItems().indexOf(f),
            a = new Date(),
            d = this.getDiaryPanel().getStartday(),
            c,
            g;
          if (b < 1 || b > 1) {
            TIMER = new Date();
            c = b > 1 ? 7 : -7;
            g = b > 1 ? "right" : "left";
            a =
              d == null
                ? Ext.Date.add(new Date(), Ext.Date.DAY, c)
                : Ext.Date.add(new Date(d), Ext.Date.DAY, c);
            this.getDiaryPanel().setStartday(a);
            this.onRenderDiary(this.getDiaryPanel(), null, a, 1);
            _currentDate = a;
          }
        },
      },
    },
  },
  init: function () {
    var a = this;
    a.diaryStore = Ext.create("MEM.store.MyDiaryStore", {
      storeId: "Diary_MyDiaryStore",
    });
    a.getApplication().on({
      scope: a,
      renderDiary: function () {
        var a = this;
        a.onRenderDiary(a.getDiaryPanel(), null, new Date(_currentDate));
      },
      renderPersonalStaffLog: function () {
        var a = this;
        a.onRenderPersonalStaffLog();
      },
    });
  },
  onDiarySaveTap: function (d, c, a, b) {
    this.onDiarySave();
  },
  onDiaryCopyTap: function (i, h, f, g) {
    var c = this,
      e = c.getMynavigationview(),
      b = c.getDiaryForm(),
      d = b.getRecord(),
      a = Ext.create("MEM.view.diary.MyDiaryCopyOverlay");
    if (!d.phantom) {
      Ext.Msg.alert(
        T("Diary"),
        T("Can't copy. Diary already exist for selected day")
      );
      return;
    }
    e.push(a);
    a.show();
    b.setMyCopyOverlay(a);
  },
  onCopyPreviousDiary: function (o, n, l, m) {
    var a = this,
      k = Ext.getStore("MyDiaryStore"),
      j = a.getMynavigationview(),
      d = a.getDiaryForm(),
      e = d.getMyCopyOverlay(),
      b = Ext.getStore("MyCloneWorkOrderRowStore"),
      c = d.getRecord(),
      i = c.get("RegDate"),
      f = {},
      g = e.down("#includeRows").getChecked(),
      h = e.down("#copyQty").getChecked();
    MEM.loadSpinner.show();
    try {
      saveUserSetting(
        a.getApplication().getUserId(),
        "CopyDiaryOptions",
        JSON.stringify({ includerows: g, copyqty: h })
      );
      f.type = "json";
      f.json = Ext.JSON.encode({
        projectid: CURRENT_PROJECTID,
        regdate: i,
        includerows: g,
        copyqty: h,
      });
      e.hide();
      Ext.Ajax.request({
        url: Me.API_URL + "copyDiary",
        timeout: 90000,
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
        params: f,
        success: function (f, g) {
          var e = Ext.decode(f.responseText);
          Ext.Msg.alert(T("Diary"), T(e.msg), function () {
            k.load({
              callback: function (e) {
                if (e.length > 0) {
                  c = e[0];
                  a.diaryChecklistFill(c.get("Id"));
                  b.clearFilter();
                  b.meClearFilter();
                  b.meAddFilter(["DiaryId", "=", c.get("Id")]);
                  b.meAddFilter(["ShowInMobile", "=", !0]);
                  b.load({
                    callback: function () {
                      d.setRecord(c);
                      j.push(d);
                    },
                  });
                } else {
                  j.pop();
                  a.onRenderDiary(a.getDiaryPanel(), null, new Date(i));
                }
              },
            });
          });
        },
        failure: function (a, b) {
          console.log("server-side failure with status code " + a.status);
        },
      });
    } catch (p) {
      MEM.loadSpinner.hide(p);
    }
  },
  saveNewDiary: function (b, e) {
    var c = this,
      a = b.getMydiaryrecord(),
      d = c.diaryStore;
    a.setProxy(d.getProxy());
    a.set("Id", null);
    a.save(
      {
        success: function (d, f) {
          if (b.id == "mystafflogpanel") {
            c.getMyDiaryId().setValue(a.get("Id"));
            _currentDiaryId = a.get("Id");
            Ext.getCmp("myWorkOrderId").setValue("");
            CURRENT_WORKORDERID = -1;
          } else {
            b.setMydiaryid(d.get("Id"));
          }
          e();
        },
        failure: function (a) {
          MEM.loadSpinner.hide(a);
        },
      },
      this
    );
  },
  onMySupplierContactListItemTap: function (e, h, g, a, b, f) {
    var k = this,
      d = a.get("CustomerId"),
      j = a.get("Id"),
      c,
      i = Ext.getStore("MyWorkOrderContactStore");
    if (b.target.className.indexOf("boolcheckbox") >= 0) {
      if (a.get("isSelected") == !0) {
        a.set("isSelected", !1);
      } else {
        a.set("isSelected", !0);
      }
    }
  },
  onAddSupplierContacts: function () {
    var c = this,
      i = this.getMynavigationview(),
      f = c.getSupplierContactPanel(),
      g = f.down("#MyContactList"),
      e = g.getStore("MySupplierContactStore"),
      d = e.data.items,
      h = Ext.getStore("MyWorkOrderStore"),
      b,
      a = Ext.getStore("MyWorkOrderContactStore");
    woRecord = h.data.items[0];
    Ext.each(d, function (c) {
      if (c.get("isSelected")) {
        b = Ext.ModelManager.create(
          { WorkOrderId: woRecord.get("Id"), CustomerAgentId: c.get("Id") },
          a.getModel()
        );
        b.set("Id", a.data.length);
        a.add(b);
      }
    });
    a.sync();
    a.on({
      scope: c,
      single: !0,
      write: function (b, a) {
        c.onSupplierSelectListTap(this, d[0].get("CustomerId"));
      },
    });
  },
  onMyStaffListItemTap: function (h, k, j, a, m, i) {
    var d = this,
      l = a.get("IdNo"),
      b,
      e = !0,
      g = d.getStaffLogPanel(),
      f = g.getProjectId(),
      c = Ext.getStore("MyStaffLogStore");
    MEM.loadSpinner.show();
    if (_currentDiaryId == null) {
      d.saveNewDiary(g, function () {
        b = d.createStaffLogRecord(
          _currentDiaryId,
          f,
          a.get("OriginId"),
          a.get("Origin")
        );
        d.saveStaffLogRecord(c, b, a, e);
      });
    } else {
      if (a.get("CheckedIn") == null || a.get("CheckedOut") != null) {
        b = d.createStaffLogRecord(
          _currentDiaryId,
          f,
          a.get("OriginId"),
          a.get("Origin")
        );
        d.saveStaffLogRecord(c, b, a, e);
      } else {
        Ext.Msg.confirm(
          T("Check out"),
          T("Do you want to check out") + " " + a.get("FullName") + "?",
          function (g) {
            if (g == "yes") {
              c.meClearFilter();
              c.meAddFilter(["DiaryId", "=", _currentDiaryId]);
              c.load({
                callback: function (l) {
                  b = c.getById(a.get("LogId"));
                  b.set("Id", a.get("LogId"));
                  b.set("DiaryId", _currentDiaryId);
                  b.set("ProjectId", f);
                  e = !1;
                  d.saveStaffLogRecord(c, b, a, e);
                },
              });
            } else {
              MEM.loadSpinner.hide();
            }
          }
        );
      }
    }
  },
  createStaffLogRecord: function (e, d, c, b) {
    var g = this,
      a,
      f = Ext.getStore("MyStaffLogStore");
    a = Ext.ModelManager.create({ DiaryId: e, ProjectId: d }, f.getModel());
    if (c) {
      a.set("OriginId", c);
      if (b) {
        a.set("Origin", b);
      }
    }
    a.set("Id", null);
    return a;
  },
  saveStaffLogRecord: function (b, d, a, i) {
    var c = this,
      g = c.getStaffLogPanel(),
      f = c.getPersonalStaffLogPanel(),
      e,
      h = g.down("#MyStaffList");
    b.clearFilter();
    b.meClearFilter();
    d.setProxy(b.getProxy());
    d.save({
      success: function (g, j) {
        if (a) {
          if (i) {
            a.set("CheckedIn", g.get("Created"));
            a.set("CheckedOut", g.get("CheckedOut"));
            a.set("LogId", g.get("Id"));
            a.set("OriginId", g.get("OriginId"));
            a.set("Origin", g.get("Origin"));
          } else {
            a.set("CheckedOut", g.get("CheckedOut"));
          }
          h.refresh();
        } else {
          e = f.down("#projectfield").getValue();
          c.loadPersonalStaffLog(e);
        }
      },
      failure: function (c) {
        MEM.loadSpinner.hide();
      },
    });
  },
  onMyChecklistDiaryListItemTap: function (j, l, h, a, c, k) {
    var g = this,
      b = g.getTextAreaOverlay(),
      i = Ext.getStore("MyChecklistDiaryStore");
    if (c.target.className.indexOf("trash2") >= 0) {
      console.log("deprecated use of trash2, use my-column-delete instead");
      g.onDeleteChecklistRow(a);
    } else {
      if (c.target.className.indexOf("my-column-delete") >= 0) {
        g.onDeleteChecklistRow(a);
      } else {
        if (c.target.className.indexOf("checklistcomment") >= 0) {
          var e = "CheckNote",
            f = a.get("CheckNote"),
            d = !1;
          b.initOverlay(a, f, d, h, "");
          b.on("handleText", function (d, f) {
            d.set(e, f);
            d.setProxy(i.getProxy());
            d.save({
              success: function () {
                b.destroy();
                b.un("handleText");
              },
            });
          });
        } else {
          if (c.target.className.indexOf("description") >= 0) {
            e = "ItemDescription";
            f = a.get(e);
            d = !0;
            b.initOverlay(a, f, d, h, "");
          }
        }
      }
    }
  },
  onChecklistDiaryAddTap: function () {
    var c = this,
      a = c.getChecklistOverlay(),
      d = Ext.getStore("MyChecklistDiaryStore").getModel(),
      b;
    b = Ext.ModelManager.create({ ItemNo: "", ItemDescription: "" }, d);
    a.record = b;
    a.showBy(c.getCheckList());
    Ext.getCmp("ChecklistItemNo").setValue("");
    Ext.getCmp("ChecklistItemDescription").setValue("");
  },
  onCloseChecklistDiaryAdd: function () {
    var d = this,
      b = this.getChecklistOverlay(),
      a = b.record,
      e = b.getValues(),
      c = Ext.getStore("MyChecklistDiaryStore");
    a.setProxy(c.getProxy());
    a.set("Id", null);
    a.set("DiaryId", _currentDiaryId);
    a.set("ItemNo", Ext.getCmp("ChecklistItemNo").getValue());
    a.set("ItemDescription", Ext.getCmp("ChecklistItemDescription").getValue());
    a.save({
      success: function () {
        b.hide();
        c.load({
          callback: function () {
            d.diaryChecklistFill(_currentDiaryId);
          },
        });
      },
    });
  },
  onDeleteChecklistRow: function (b) {
    var f = this,
      e,
      d,
      c,
      a = Ext.getStore("MyChecklistDiaryStore");
    Ext.Msg.confirm(T("Delete item."), T("Are you sure?"), function (c) {
      if (c == "yes") {
        a.meClearFilter();
        a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
        a.meAddFilter(["Id", "=", b.getId()]);
        a.load({
          callback: function (d) {
            d[0].setProxy(a.getProxy());
            d[0].erase({
              callback: function () {
                a.meClearFilter();
                a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
                a.load();
              },
            });
          },
        });
      }
    });
  },
  onKPIReporting: function () {
    var a = this.getDiaryForm().getProject();
    MEM.app
      .getController("WorkOrder")
      .onKPIReporting(a, this.getRowList().getStore(), _currentDiaryId);
  },
  onRowAddPhoto: function () {
    var c = this,
      b = c.getMynavigationview(),
      d = b.getActiveItem().getProjectId(),
      a,
      e;
    a = c.getFilePanel();
    a = MEM.app.getController("MEM.controller.MainMenu").ensureSubPanel("File");
    a.setProjectId(d);
    a.setWorkorderId(null);
    e = b.push(a);
  },
  onWeatherSaveTap: function (e, d, b, c) {
    var a = this.getWeatherForm();
    this.onWeatherSave(a);
  },
  onRowAddWeather: function () {
    var c = this,
      d = c.getMynavigationview(),
      a = Ext.getStore("MyDiaryStore"),
      b;
    b = c.getWeatherForm();
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["Id", "=", _currentDiaryId]);
    a.load({
      callback: function (a) {
        b.setRecord(a[0]);
        view = d.push(b);
      },
    });
  },
  onWeatherSave: function (e) {
    var c = this,
      d = c.diaryStore,
      f = c.getMynavigationview(),
      a = e.getRecord(),
      b = e.getValues();
    try {
      a.set(b);
      if (document.getElementsByClassName("x-invalid").length > 0) {
        Ext.Msg.alert(T("Value"), T("Please check current values."));
        return;
      }
      MEM.loadSpinner.show();
      if (!d.getProxy()) {
        MEM.serverError.show("string", "No proxy found");
      }
      a.setProxy(d.getProxy());
      a.set(
        "Time1",
        b.Time1Display == ""
          ? null
          : Ext.Date.add(
              new Date(
                Ext.String.format(
                  "{0}T{1}:00Z",
                  a.get("RegDate"),
                  b.Time1Display
                )
              ),
              Ext.Date.MINUTE,
              new Date().getTimezoneOffset()
            )
      );
      a.set(
        "Time2",
        b.Time2Display == ""
          ? null
          : Ext.Date.add(
              new Date(
                Ext.String.format(
                  "{0}T{1}:00Z",
                  a.get("RegDate"),
                  b.Time2Display
                )
              ),
              Ext.Date.MINUTE,
              new Date().getTimezoneOffset()
            )
      );
      if (!a.get("UserId")) {
        a.set("UserId", c.getApplication().getUserId());
      }
      a.save(
        {
          success: function () {
            MEM.loadSpinner.hide();
            f.pop();
          },
          failure: function (a) {
            MEM.loadSpinner.hide(a);
          },
        },
        this
      );
    } catch (g) {
      MEM.loadSpinner.hide(g);
    }
  },
  onDiaryAdd: function (j) {
    var a = this,
      m = a.getMynavigationview(),
      n = a.getApplication(),
      e = j.up("mydiaryday"),
      c = Ext.getStore("MyDiaryStore"),
      b = Ext.getStore("MyCloneWorkOrderRowStore"),
      l = c.getModel(),
      k = n.getUserId(),
      g = e.getProjectId(),
      h = e.getWorkplaceId(),
      i = a.getDiaryPanel().getProject(),
      f,
      d;
    _currentDate = e.getCurrentDate();
    _selectedDate = e.getCurrentDate();
    _currentDiaryId = null;
    d = a.getDiaryForm();
    d.setProject(i);
    c.clearFilter();
    c.meClearFilter();
    c.meAddFilter(["ProjectId", "=", g]);
    c.meAddFilter(["RegDate", "=", Ext.Date.format(_currentDate, "Y-m-d")]);
    a.diaryChecklistFill(null);
    c.load({
      callback: function (c) {
        if (c[0]) {
          record = c[0];
        } else {
          record = Ext.ModelManager.create(
            {
              Id: null,
              ProjectId: g,
              RegDate: Ext.Date.format(_currentDate, "Y-m-d"),
              UserId: k,
              WorkOrderId: null,
              CurrentWork: "",
              FinishedWork: "",
              WorkProblems: "",
              ChangeAdditionNotes: "",
              Time1: null,
              Temperature1: null,
              Precipitation1: null,
              Time2: null,
              Temperature2: null,
              Precipitation2: null,
              WorkforceCount: null,
              WorkforceNotes: null,
            },
            l
          );
        }
        b.clearFilter();
        b.meClearFilter();
        f = record.get("Id");
        if (Number(f)) {
          b.meAddFilter(["DiaryId", "=", f]);
          _currentDiaryId = f;
        } else {
          b.meAddFilter(["DiaryId", "=", -1]);
        }
        b.meAddFilter(["ShowInMobile", "=", !0]);
        b.load({
          callback: function () {
            d.setRecord(record);
            view = m.push(d);
            a.setDayLabel(
              Ext.Date.format(_currentDate, Ext.util.Format.defaultDateFormat)
            );
            if (h) {
              a.showStaffLogButton();
            }
            a.showDiaryAdd();
            a.diaryChecklistFill(_currentDiaryId);
          },
        });
      },
    });
  },
  setDayLabel: function (a) {
    var c = this,
      b = c.getMynavigationview();
    b.down("titlebar").setTitle(a);
  },
  showDiaryForm: function (a, c) {
    var d = this,
      b = c != undefined ? c : a.up("mydiaryday");
    if (b) {
      a = b.down("button");
    }
    this.onDiaryAdd(a);
  },
  showStaffLogButton: function () {
    this.getApplication().fireEvent("setstafflogtype", "diary");
  },
  hideStaffLogButton: function () {
    this.getApplication().fireEvent("clearstafflogtype");
    this.hideDiaryAdd();
  },
  showStaffLogButtons: function () {
    this.getApplication().fireEvent("setstaffloglisttype", "diary");
  },
  hideStaffLogButtons: function () {
    this.getApplication().fireEvent("clearstaffloglisttype");
  },
  showDiaryAdd: function () {
    this.getApplication().fireEvent("setdiarytype", "diary");
  },
  hideDiaryAdd: function () {
    this.getApplication().fireEvent("cleardiarytype", "diary");
  },
  onFilterStaffLogButton: function (c, a) {
    if (a.element.hasCls("x-button-pressed")) {
      var b = a.getText();
      this.onOpenStaffLog(b);
    }
  },
  onRenderPersonalStaffLog: function () {
    var d = this,
      e = d.getPersonalStaffLogPanel(),
      c = e.down("#projectfield"),
      b,
      a = c.getStore("MyProjectListStore");
    a.clearFilter();
    a.meClearFilter();
    minStatus = this.intSetting("MobileProjectStatusCodeMin");
    maxStatus = this.intSetting("MobileProjectStatusCodeMax");
    if (minStatus > 0) {
      a.meAddFilter(["StatusCode", ">=", minStatus]);
    } else {
      a.meAddFilter(["StatusCode", ">=", STATUS_NOTED]);
    }
    if (maxStatus > 0) {
      a.meAddFilter(["StatusCode", "<=", maxStatus]);
    } else {
      a.meAddFilter(["StatusCode", "<", STATUS_FINISHED]);
    }
    a.meAddFilter(["WorkplaceId", "!=", ""]);
    a.load({
      callback: function (a) {
        b = c.getValue();
        if (b) {
          d.loadPersonalStaffLog(b);
        }
      },
    });
  },
  onProjectSelectListTap: function (c, a) {
    var b = this;
    b.loadPersonalStaffLog(a);
  },
  loadPersonalStaffLog: function (d) {
    var e = this,
      a = e.getPersonalStaffLogPanel(),
      g = Ext.Date.format(new Date(), "Y-m-d"),
      f = e.getApplication().getUserId(),
      i,
      c = a.down("#buttonContainer"),
      h = Ext.getStore("MyUserListStore"),
      b = Ext.getStore("MyStaffLogStore");
    b.meClearFilter();
    a.setMyprojectid(d);
    a.setMylogrecord(null);
    a.setMydiaryrecord(null);
    a.setMydiaryid(null);
    b.clearFilter();
    b.meClearFilter();
    b.meAddFilter(["OriginId", "=", f]);
    b.meAddFilter(["Origin", "=", null]);
    b.meAddFilter(["ProjectId", "=", parseInt(d, 10)]);
    b.meAddFilter(["RegDate", "=", g]);
    b.meAddFilter(["CheckedOut", "=", null]);
    b.meAddFilter(["DiaryId", "!=", 0]);
    b.load({
      callback: function (b) {
        if (!d) {
          a.setMydiaryid(null);
          a.setMylogrecord(null);
          c.setActiveItem(0);
        } else {
          if (b.length > 0) {
            c.setActiveItem(2);
            a.down("#checkedintime").setValue(
              T("Checked in") + " " + b[0].get("CheckedInTime")
            );
            a.setMylogrecord(b[0]);
            a.setMydiaryid(b[0].get("DiaryId"));
          } else {
            a.setMydiaryid(null);
            a.setMylogrecord(null);
            c.setActiveItem(1);
          }
        }
        MEM.loadSpinner.hide();
      },
    });
  },
  onPersonalCheckInOut: function () {
    var b = this,
      d = Ext.getStore("MyStaffLogStore"),
      c = b.getPersonalStaffLogPanel(),
      a = c.getMylogrecord(),
      e = c.getMyprojectid(),
      f = c.getMydiaryid();
    MEM.loadSpinner.show();
    if (!a) {
      a = b.createStaffLogRecord(f || null, e);
      b.saveStaffLogRecord(d, a, null, !0);
    } else {
      a.set("Id", parseInt(a.get("Id"), 10));
      b.saveStaffLogRecord(d, a, null, !1);
    }
  },
  createDiary: function (a) {
    var f = this,
      e = Ext.Date.format(new Date(), "Y-m-d"),
      c = f.getApplication().getUserId(),
      d = Ext.getStore("MyDiaryStore"),
      b = Ext.ModelManager.create(
        {
          Id: null,
          ProjectId: parseInt(a, 10),
          RegDate: e,
          UserId: c,
          WorkOrderId: null,
          CurrentWork: "",
          FinishedWork: "",
          WorkProblems: "",
          ChangeAdditionNotes: "",
          Time1: null,
          Temperature1: null,
          Precipitation1: null,
          Time2: null,
          Temperature2: null,
          Precipitation2: null,
          WorkforceCount: null,
          WorkforceNotes: null,
        },
        d.getModel()
      );
    return b;
  },
  onOpenStaffLog: function (f) {
    var c = this,
      e = c.getMynavigationview(),
      g = e.getActiveItem().getProjectId(),
      b = c.getStaffLogPanel(),
      d = b.down("#MyStaffList"),
      h,
      j,
      i = this.getDiaryForm(),
      a = d.getStore("MyStaffListStore");
    d.deselectAll();
    c.showStaffLogButtons();
    c.hideDiaryAdd();
    a.clearFilter();
    a.meClearFilter();
    if (f == 1 || (f != 0 && b.getMyfilter() == 1)) {
      b.setMyfilter(1);
      a.suspendEvents();
      a.filterBy(function (a) {
        if (a.get("CheckedIn") != null && a.get("CheckedOut") == null) {
          return !0;
        } else {
          return !1;
        }
      });
      a.resumeEvents();
    } else {
      b.setMyfilter(0);
    }
    a.meAddFilter(["ProjectId", "=", [g, null]]);
    a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
    a.load({
      callback: function (a) {
        b.setProjectId(g);
        c.setButtons();
        c.hideStaffLogButton();
        h = Ext.String.format(
          '<div class="status-box" style="background-color: {Present}"></div>' +
            '<div class ="mystafflist stafflist-span">{FullName}</div> ' +
            '<div class ="mystafflist stafflist-checkin">{CheckedInTime}&nbsp;&nbsp;' +
            '{[values.CheckedInTime == null ? "" : "-"]}</div>' +
            '<div class ="mystafflist stafflist-checkout">{CheckedOutTime}</div>'
        );
        d.setItemTpl(h);
        b.setMydiaryrecord(i.getRecord());
        j = e.push(b);
        e.down("titlebar").setTitle(
          CURRENT_PROJECTNAME +
            ", " +
            Ext.Date.format(_currentDate, Ext.util.Format.defaultDateFormat)
        );
        MEM.loadSpinner.hide();
      },
    });
  },
  syncAndReloadStaffLog: function () {
    var b = this,
      a = Ext.getStore("MyStaffLogStore");
    a.sync();
    a.on({
      scope: b,
      single: !0,
      write: function (c, a) {
        b.onOpenStaffLog();
      },
    });
  },
  addStaffLogRecords: function (g) {
    var c = this,
      e = c.getStaffLogPanel(),
      f = e.down("#MyStaffList"),
      d = f.getStore("MyStaffListStore"),
      b = Ext.getStore("MyStaffLogStore"),
      a;
    Ext.each(g, function (e) {
      a = d.findBy(function (a) {
        return (
          a.get("OriginId") == e.get("OriginId") &&
          a.get("Origin") == e.get("Origin")
        );
      });
      if (
        null ==
          b.findBy(function (a) {
            return (
              a.get("OriginId") == e.get("OriginId") &&
              a.get("Origin") == e.get("Origin")
            );
          }) &&
        (a == null || a.get("CheckedIn") == null || a.get("CheckedOut") != null)
      ) {
        var f = c.createStaffLogRecord(
          _currentDiaryId,
          e.get("ProjectId"),
          e.get("OriginId"),
          e.get("Origin")
        );
        b.add(f);
      }
    });
  },
  onPrintStaffLog: function () {
    var g = this,
      e = g.getMynavigationview(),
      c = e.getActiveItem().getProjectId(),
      b = [],
      a = {},
      h;
    a.projectid = c;
    a.name = "meStaffLog";
    a.displayname =
      T("Staff log") +
      " " +
      Ext.Date.format(_currentDate, Ext.util.Format.defaultDateFormat);
    a.startdate = _currentDate;
    a.enddate = _currentDate;
    b.push(a);
    var d = { type: "pdf", json: Ext.JSON.encode({ report: b }) };
    var f = Me.API_URL + "getReport" + "?" + Ext.urlEncode(d);
    window.open(f);
  },
  onOpenSupplierContact: function () {
    var c = this,
      b = c.getMynavigationview(),
      f = b.getActiveItem().getProjectId(),
      a = c.getSupplierContactPanel(),
      d = a.down("#supplierfield"),
      e = d.getStore("MySupplierStore");
    view;
    c.hideStaffLogButtons();
    d.setValue(null);
    e.load({ callback: function (a) {} });
    a.setProjectId(f);
    view = b.push(a);
    b.down("titlebar").setTitle(T("Add") + " " + T("Subcontractor staff"));
  },
  onSupplierSelectListTap: function (j, g) {
    var h = this,
      c = h.getSupplierContactPanel(),
      f = c.getProjectId(),
      e = c.down("#MyContactList"),
      a = e.getStore("MySupplierContactStore"),
      d = Ext.getStore("MyWorkOrderContactStore"),
      i,
      b = Ext.getStore("MyWorkOrderStore");
    b.clearFilter();
    b.meClearFilter();
    b.meAddFilter(["ProjectId", "=", f]);
    b.meAddFilter(["WorkOrderNo", "=", 1]);
    b.meAddFilter(["Addition", "=", !1]);
    b.load({
      callback: function (b) {
        if (!b || !b.length) {
          Ext.Msg.alert(T("Missing basic scope"));
          return;
        }
        d.clearFilter();
        d.meClearFilter();
        d.meAddFilter(["WorkOrderId", "=", b[0].get("Id")]);
        d.load({
          callback: function (d) {
            a.clearFilter();
            a.meClearFilter();
            a.meAddFilter(["CustomerId", "=", parseInt(g, 10)]);
            a.meAddFilter(["OrganizationNo", "!=", null]);
            a.meAddFilter(["OrganizationNo", "!=", ""]);
            Ext.each(d, function (c) {
              a.meAddFilter(["Id", "!=", c.get("CustomerAgentId")]);
            });
            a.load({
              callback: function (f) {
                if (f.length > 0) {
                  c.down("#addContactsButton").enable();
                } else {
                  c.down("#addContactsButton").disable();
                }
                var a = Ext.String.format(
                  '<div class="my-tpl-list checked my-pictos-icon boolcheckbox' +
                    "{[values.isSelected ? '' : ' me-no-checked ' ]}" +
                    '">' +
                    "{[values.isSelected ? '3' : '6' ]}" +
                    "</div>" +
                    '<div class ="my-tpl-list name">{ContactName} ({OrganizationNo})</div>'
                );
                e.setItemTpl(a);
              },
            });
          },
        });
      },
    });
  },
  onCopyPreviousDay: function () {
    var a = this,
      f = a.getMynavigationview(),
      d = f.getActiveItem().getProjectId(),
      b = Ext.getStore("MyStaffPreviousDayStore"),
      c = a.getStaffLogPanel(),
      e = c.down("#MyStaffList"),
      g = e.getStore("MyStaffListStore");
    Ext.Msg.confirm(
      T("Check in staff"),
      T("Copy previous day") + "?",
      function (e) {
        if (e == "yes") {
          MEM.loadSpinner.show();
          b.meClearFilter();
          b.meAddFilter(["ProjectId", "=", d]);
          b.load({
            callback: function (b) {
              if (_currentDiaryId == null) {
                a.saveNewDiary(c, function () {
                  a.addStaffLogRecords(b);
                  a.syncAndReloadStaffLog();
                });
              } else {
                a.addStaffLogRecords(b);
                a.syncAndReloadStaffLog();
              }
            },
          });
        }
      }
    );
  },
  setButtons: function () {
    var c = this,
      b = [],
      a = c.getFilterButtons();
    if (a.getItems().length > 0) {
      return;
    }
    b.push({
      xtype: "button",
      html:
        "<span style='border-radius: 3px; background-color: grey'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
        T("All"),
      cls: "my-status-button",
      text: 0,
      pressed: !0,
    });
    b.push({
      xtype: "button",
      html:
        "<span style='border-radius: 3px; background-color: green'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
        T("Present staff"),
      cls: "my-status-button",
      text: 1,
      pressed: !1,
    });
    a.add(b);
    a.setPressedButtons([0]);
  },
  onDiaryDeleteTap: function () {
    var b = this,
      f,
      e,
      a = Ext.getStore("MyDiaryStore"),
      c = b.getMynavigationview(),
      d = b.getDiaryForm();
    record = d.getRecord();
    a.clearFilter();
    a.meClearFilter();
    Ext.Msg.confirm(T("Delete item."), T("Are you sure?"), function (d) {
      if (d == "yes") {
        a.meAddFilter(["Id", "=", record.get("Id")]);
        a.load({
          callback: function (e) {
            e[0].setProxy(a.getProxy());
            e[0].erase({
              callback: function () {
                c.pop();
                b.onRenderDiary(
                  b.getDiaryPanel(),
                  null,
                  new Date(_currentDate)
                );
              },
            });
          },
        });
      }
    });
  },
  diaryChecklistFill: function (c) {
    var b = this.getCheckList(),
      d = this.getCheckListHeader(),
      a = Ext.getStore("MyChecklistDiaryStore");
    if (c == null) {
      b.setHidden(!0);
      d.setHidden(!0);
    } else {
      a.meClearFilter();
      a.meAddFilter(["DiaryId", "=", c]);
      a.load({
        callback: function (a) {
          b.setHidden(a.length == 0);
          d.setHidden(a.length == 0);
        },
      });
    }
  },
  initDiary: function (b) {
    var a = this,
      d = a.getMynavigationview(),
      c = a.diaryCarouselPanel,
      e;
    if (!c) {
      a.diaryCarouselPanel = Ext.create("MEM.view.diary.MyDiaryCarouselPanel", {
        id: "MyDiaryCarouselPanel",
        title: T("Diary"),
      });
      c = a.diaryCarouselPanel;
    }
    e = d.setActiveItem(c);
    CURRENT_PROJECTID = b.getId();
    CURRENT_PROJECTNAME = b.get("ProjectName");
    if (!_currentDate) {
      _currentDate = new Date();
    }
    a.getDiaryPanel().setProject(b);
    a.onRenderDiary(a.getDiaryPanel(), null, new Date(_currentDate));
  },
  onRenderDiary: function (f, z, o, m) {
    var k = this,
      b = new Date(),
      e = new Date(),
      h = f.getProjectId(),
      r = f.getCustomerId(),
      q = f.getWorkplaceId(),
      x,
      j = 0,
      a = 0,
      i,
      u,
      g = this.getMynavigationview(),
      t = new Array(
        T("Mon"),
        T("Tue"),
        T("Wed"),
        T("Thu"),
        T("Fri"),
        T("Sat"),
        T("Sun")
      ),
      d = Ext.getStore("MyDiaryStore"),
      y = k.getApplication(),
      c,
      w,
      v = new Array(null, null, null, null, null, null, null),
      p = Ext.getStore("MyCloneProjectListStore"),
      l = Ext.getStore("MyWorkOrderListStore"),
      s = Ext.getStore("MyItemUnitStore"),
      n = "renderdiary";
    if (
      g.getActiveItem() &&
      (g.getActiveItem().getActiveItem().id == "MyDiaryPanel" ||
        g.getActiveItem().getActiveItem().id == "MyDiaryPanelLeft" ||
        g.getActiveItem().getActiveItem().id == "MyDiaryPanelRigth")
    ) {
      MEM.loadSpinner.showSpinner(n);
      g.down("titlebar").setTitle(T("Diary") + " - " + CURRENT_PROJECTNAME);
      p.load({
        callback: function (p, g, u) {
          if (isDate(o)) {
            b = o;
          }
          b = getMonday(b);
          _currentDate = b;
          c = f.query("mydiaryday");
          d.clearFilter();
          d.meClearFilter();
          d.meAddFilter(["ProjectId", "=", h]);
          d.meAddFilter(["RegDate", ">=", Ext.Date.format(b, "Y-m-d")]);
          d.meAddFilter([
            "RegDate",
            "<",
            Ext.Date.format(Ext.Date.add(b, Ext.Date.DAY, 7), "Y-m-d"),
          ]);
          s.load();
          MEM.app.getController("WorkOrder").loadStores();
          l.meClearFilter();
          l.meAddFilter(["ProjectId", "=", h]);
          l.load({
            callback: function () {
              d.load({
                callback: function () {
                  for (a = 0; a < 7; a++) {
                    rec = d.findRecord(
                      "RegDate",
                      Ext.Date.format(
                        Ext.Date.add(b, Ext.Date.DAY, a),
                        "Y-m-d"
                      ),
                      0,
                      !1,
                      !0,
                      !0
                    );
                    c[a].setProjectId(h);
                    c[a].setCustomerId(r);
                    c[a].setWorkplaceId(q);
                    if (rec) {
                      currentWork = rec.get("CurrentWork");
                      c[a].down("button").setHtml(Ext.htmlEncode(currentWork));
                      i = rec;
                      if (rec.get("HasStaffLog")) {
                        var l = c[a].down("button").getHtml();
                        l = k.getStaffLogIcon() + l;
                        c[a].down("button").setHtml(l);
                      }
                    } else {
                      c[a].down("button").setHtml("");
                    }
                  }
                  if (CURRENT_WORKORDERID == null && i != null) {
                    h = i.get("ProjectId");
                    CURRENT_WORKORDERID = i.get("WorkOrderId");
                  }
                  j = 0;
                  Ext.each(f.query("mydiaryday"), function (a) {
                    e = Ext.Date.add(b, Ext.Date.DAY, j);
                    a.down("toolbar").setTitle("");
                    a.down("toolbar")
                      .down("label")
                      .setHtml(
                        t[j] +
                          " " +
                          Ext.Date.format(e, Ext.util.Format.defaultDateFormat)
                      );
                    a.setCurrentDate(e);
                    button = a.down("toolbar").down("button");
                    a.down("toolbar")
                      .down("label")
                      .element.on({
                        tap: {
                          fn: function (c, d, b) {
                            k.showDiaryForm(b, a);
                          },
                          scope: this,
                          single: !0,
                        },
                      });
                    if (
                      Ext.Date.format(e, "Y-m-d") ==
                      Ext.Date.format(new Date(), "Y-m-d")
                    ) {
                      a.down("toolbar").setCls("currentDay");
                      a.down("label").setCls("currentDayHeader");
                    } else {
                      a.down("toolbar").setCls("dayToolbar");
                      a.down("label").setCls("dayHeader");
                    }
                    if (MEM.calcdates.isFreeDay(e)) {
                      a.addCls("my-button-holiday");
                    } else {
                      a.removeCls("my-button-holiday");
                    }
                    j += 1;
                  });
                  if (m != undefined) {
                    k.getDiaryCarouselPanel().setActiveItem(m);
                  }
                  MEM.loadSpinner.hideSpinner(n);
                },
              });
            },
          });
        },
      });
    }
  },
  saveQueryIfDirtyForm: function () {
    var a = this,
      c = a.getDiaryForm(),
      b = c.getRecord();
    a.trimAllFormFields(c);
    c.updateRecord(b);
    if (b.dirty && !a.dirtyDueToNew(b) && !a.dirtyDueToCreatedByAdmin(b)) {
      Ext.Msg.show({
        title: T("Diary"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (b) {
          if (b == "yes") {
            Ext.defer(function () {
              a.onDiarySave();
            }, 100);
          } else {
            a.getMynavigationview().pop();
          }
        },
      });
      return !0;
    } else {
      return !1;
    }
  },
  onDiarySave: function () {
    var a = this,
      e = this.getDiaryForm(),
      d = a.diaryStore,
      j = this.getMynavigationview(),
      b = e.getRecord(),
      f = e.getValues(),
      g = a.getDiaryForm(),
      h,
      i,
      c;
    try {
      b.set(f);
      if (isNaN(b.getId())) {
        b.set("Id", null);
      }
      if (!b.get("UserId")) {
        b.set("UserId", a.getApplication().getUserId());
      }
      if (document.getElementsByClassName("x-invalid").length > 0) {
        Ext.Msg.alert(T("Value"), T("Please check current values."));
        return;
      }
      MEM.loadSpinner.show();
      if (!d.getProxy()) {
        MEM.serverError.show("string", "No proxy found");
      }
      b.setProxy(d.getProxy());
      b.save(
        {
          success: function () {
            a.onRenderDiary(a.getDiaryPanel(), null, new Date(_currentDate));
            MEM.loadSpinner.hide();
            a.getMyDiaryId().setValue(b.get("Id"));
            _currentDiaryId = b.get("Id");
            Ext.getCmp("myWorkOrderId").setValue("");
            CURRENT_WORKORDERID = -1;
            if (
              (a.intSetting("FavoritesOnSave") == "1" ||
                a.intSetting("MEM.FavoritesOnSave") == "1") &&
              !a.getDiaryForm().getKPIReporting()
            ) {
              c = Ext.getCmp("rowaddfavdiary");
              c.fireEvent("tap", c);
            } else {
              Ext.Msg.alert(T("Saved"), T("Saved."));
            }
            a.diaryChecklistFill(_currentDiaryId);
          },
          failure: function () {
            MEM.loadSpinner.hide(ex);
          },
        },
        this
      );
    } catch (k) {
      MEM.loadSpinner.hide(k);
    }
  },
  onDiaryPreview: function (d) {
    var e = Ext.create("MEM.ux.form.MyTextAreaOverlay"),
      c = d.up("mydiaryday"),
      b = c ? c.down("button") : null,
      a = b ? b.getHtml() : "";
    a = a.replace(this.getStaffLogIcon(), "");
    e.initOverlay(null, a, !0, d, "");
  },
});
Ext.define("MEM.controller.Economy", {
  extend: MEM.controller.Common,
  config: {
    refs: { mynavigationview: "mynavigationview" },
    control: {
      "#economy": { initialize: "read" },
      mynavigationview: {
        pop: function (b, c, a) {
          this.hideUpdateButton();
        },
      },
      "button[action=updateeconomy]": { tap: "onUpdateEconomy" },
    },
  },
  onUpdateEconomy: function () {
    var a = this;
    Ext.Ajax.request({
      url: Me.API_URL + "updateTimeCost",
      timeout: 90000,
      headers: { "Content-Type": "application/x-www-form-urlencoded" },
      params: { projectid: CURRENT_PROJECTID, type: "json" },
      success: function (b, c) {
        Ext.Msg.alert(
          T("Cost"),
          T("Project costs have been updated"),
          function () {
            a.read();
          }
        );
      },
      failure: function (a, b) {
        console.log("server-side failure with status code " + a.status);
      },
    });
  },
  showUpdateButton: function () {
    this.getApplication().fireEvent("seteconomytype", "economy");
  },
  hideUpdateButton: function () {
    this.getApplication().fireEvent("cleareconomytype");
  },
  hideAddButton: function () {
    this.getApplication().fireEvent("clearadditemtype");
  },
  hideArchiveButton: function () {
    this.getApplication().fireEvent("cleararchiveitemtype");
  },
  costInfo: function (b, g) {
    try {
      var a = Ext.getStore("MyCostStore");
      var d;
      var e;
      var f;
      var c;
      a.meClearFilter();
      a.meAddFilter(["ProjectId", "=", b]);
      a.meAddFilter(["RevenueTransaction", "=", !0]);
      a.load({
        params: { sumstore: 1 },
        callback: function (h) {
          d = h[0].copy();
          a.meClearFilter();
          a.meAddFilter(["ProjectId", "=", b]);
          a.meAddFilter(["RevenueTransaction", "=", !1]);
          a.load({
            params: { sumstore: 1 },
            callback: function (i) {
              e = i[0].copy();
              a.meClearFilter();
              a.meAddFilter(["ProjectId", "=", b]);
              a.meAddFilter(["RevenueTransaction", "=", !1]);
              a.meAddFilter(["VerificationNo", "like", "ARB."]);
              a.load({
                params: { sumstore: 1 },
                callback: function (j) {
                  f = j[0].copy();
                  a.meClearFilter();
                  a.meAddFilter(["ProjectId", "=", b]);
                  a.meAddFilter(["RevenueTransaction", "=", !1]);
                  a.meAddFilter(["VerificationNo", "like", "AO."]);
                  a.load({
                    params: { sumstore: 1 },
                    callback: function (a) {
                      c = a[0].copy();
                      g(d, e, f, c);
                    },
                  });
                },
              });
            },
          });
        },
      });
    } catch (h) {
      alert(h);
    } finally {
    }
  },
  hoursInfo: function (b, c) {
    try {
      var a = Ext.getStore("MyTimeStore");
      a.meClearFilter();
      a.meAddFilter(["ProjectId", "=", b]);
      a.load({
        params: { sumstore: 1 },
        callback: function (d) {
          var a = d[0].get("Hours");
          c(a == null ? 0 : a + " " + T("h"));
        },
      });
    } catch (d) {
      alert(d);
    } finally {
    }
  },
  read: function () {
    var a = this,
      h,
      g,
      i,
      k,
      f;
    a.showUpdateButton();
    a.hideAddButton();
    a.hideArchiveButton();
    try {
      var b = Ext.getStore("MyProjectOverviewStore"),
        d = Ext.getCmp("economy"),
        c,
        j,
        e = function (h, e, a, g, f) {
          try {
            b.meClearFilter();
            b.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
            b.load({
              callback: function (b) {
                rec = b[0];
                c = {
                  TSummaryOfCost: T("Summary of cost"),
                  TCost: T("Cost"),
                  TNetto: T("Net amt"),
                  TAddon: T("Markup"),
                  TCustomerprice: T("Customerprice"),
                  TInternal: T("Internal"),
                  TTotal: T("Total"),
                  TTotalHours: T("Total Hours"),
                  TSupplierinvoices: T("Suppl. inv."),
                  TTime: T("Time"),
                  TSummaryOfRevenues: T("Summary of revenues"),
                  TInvoiced: T("Invoiced"),
                  TEarnedNotInvoiced: T("Earned - not invoiced"),
                  TKeyvalues: T("Keyvalues"),
                  TTB: T("TB"),
                  TTG: T("TG%"),
                  AmountsExVat: T("All amounts excl VAT"),
                  ProjectName: rec.get("ProjectName"),
                  CostRevenueInvoices: withSeparator(
                    a.get("InvoiceAmount") -
                      g.get("InvoiceAmount") -
                      f.get("InvoiceAmount")
                  ),
                  CostRevenueInvoicesWithMarkup: withSeparator(
                    a.get("MarkupAmount") -
                      g.get("MarkupAmount") -
                      f.get("MarkupAmount")
                  ),
                  CostRevenueInvoicesSum: withSeparator(
                    a.get("CustomerPrice") -
                      g.get("CustomerPrice") -
                      f.get("CustomerPrice")
                  ),
                  CostRevenueTime: withSeparator(g.get("InvoiceAmount")),
                  CostRevenueTimeWithMarkup: withSeparator(
                    g.get("MarkupAmount")
                  ),
                  CostRevenueTimeSum: withSeparator(g.get("CustomerPrice")),
                  CostRevenueInternal: withSeparator(f.get("InvoiceAmount")),
                  CostRevenueInternalWithMarkup: withSeparator(
                    f.get("MarkupAmount")
                  ),
                  CostRevenueInternalSum: withSeparator(f.get("CustomerPrice")),
                  EarnedRevenue: withSeparator(e.get("InvoiceAmount")),
                  EarnedRevenueWithTax: withSeparator(
                    e.get("InvoiceAmount") + e.get("VatAmount")
                  ),
                  EarnedRevenueNotInvoiced:
                    rec.get("EarnedRevenueNotInvoiced") < 0
                      ? ""
                      : withSeparator(rec.get("EarnedRevenueNotInvoiced")),
                  TotalCostRevenue: withSeparator(a.get("InvoiceAmount")),
                  TotalCostRevenueWithMarkup: withSeparator(
                    a.get("MarkupAmount")
                  ),
                  TotalCostRevenueSum: withSeparator(a.get("CustomerPrice")),
                  TB: withSeparator(
                    e.get("InvoiceAmount") - a.get("InvoiceAmount")
                  ),
                  TG:
                    Math.round(
                      e.get("InvoiceAmount") == 0
                        ? 0
                        : ((e.get("InvoiceAmount") - a.get("InvoiceAmount")) /
                            e.get("InvoiceAmount")) *
                            100
                    ) + "%",
                  SumTime: h,
                };
                d.fillData(c);
              },
            });
          } catch (l) {
            MEM.loadSpinner.hide(l);
          }
        };
      a.hoursInfo(CURRENT_PROJECTID, function (b) {
        a.costInfo(CURRENT_PROJECTID, function (c, d, f, a) {
          e(b, c, d, f, a);
        });
      });
    } catch (l) {
      MEM.loadSpinner.hide(l);
    } finally {
    }
  },
});
Ext.define("MEM.controller.File", {
  extend: MEM.controller.Common,
  fileProgressionHandler: null,
  config: {
    views: ["file.MyFilePanel", "file.MyFileList"],
    stores: ["MyWorkOrderDocumentStore"],
    refs: {
      navigationview: "mynavigationview",
      navigationBar: "#mynavigationbar",
      fileForm: "myfilepanel",
      fileProjectId: "myfilepanel #myFileProjectId",
      fileWorkOrderId: "myfilepanel #myFileWOId",
      workorderDocumentId: "myfilepanel #WODocumentId",
      title: "myfilepanel #imageTitle",
      documentId: "myfilepanel #documentId",
      description: "myfilepanel #description",
      filefield: "myfilepanel #filefield",
      clearbutton: "myfilepanel #clearButton",
      savebutton: "myfilepanel #saveButton",
      diaryId: "mydiaryrowform #myDiaryId",
      documentList: "myfilepanel #documentList",
      showInPortal: "myfilepanel #showInPortal",
      fileContainer: "myfilepanel #fileContainer",
      regdate: "myfilepanel #regdate",
    },
    control: {
      navigationBar: {
        beforeback: function (d, c) {
          var a = this,
            b;
          if (a.getNavigationview().getActiveItem().id === "MyFilePanel") {
            return (b = !a.saveQueryIfDirtyForm(!1));
          }
        },
      },
      myfilepanel: { initialize: "onInitialize" },
      clearbutton: { tap: "clearForm" },
      savebutton: { tap: "onSaveFileTap" },
      documentList: { itemsingletap: "onListItemTap" },
    },
  },
  onInitialize: function () {
    var a = this;
    if (haveRight("MobileUploadDocuments")) {
      a.getFilefield().setHtml(
        "<label>" +
          T("Image") +
          '</label>&nbsp;<input style="width:80%;" id="fileInput" type="file" name="DocumentData" multiple="multiple" /><br /><br />'
      );
    }
  },
  formIsDirty: function () {
    var a = this;
    fileInput = document.getElementById("fileInput");
    if (
      a.getTitle().isDirty() ||
      a.getDescription().isDirty() ||
      a.getRegdate().isDirty() ||
      (!a.getDocumentId().getValue() && fileInput && fileInput.files[0])
    ) {
      return !0;
    }
    return !1;
  },
  saveQueryIfDirtyForm: function () {
    var a = this;
    if (a.getSavebutton().isDisabled() === !1 && a.formIsDirty()) {
      Ext.Msg.show({
        title: T("File"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (b) {
          if (b == "yes") {
            Ext.defer(function () {
              a.onSaveFileTap();
            }, 100);
          } else {
            a.getNavigationview().pop();
          }
        },
      });
      return !0;
    } else {
      return !1;
    }
  },
  onSaveFileTap: function () {
    var a = this,
      e = a.getFileForm(),
      c = parseInt(a.getFileWorkOrderId().getValue() || e.getWorkorderId()),
      b = document.getElementById("fileInput"),
      d = [];
    if (!checkRequired(e)) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return;
    }
    if (a.getDocumentId().getValue() != "") {
      a.saveDocument(a.getDocumentId().getValue(), c);
      return;
    }
    if (!b || b.files[0] == undefined) {
      Ext.Msg.alert(T("No file"), T("No file selected"));
      return;
    }
    if (!c) {
      Ext.Msg.alert(
        T("Missing"),
        T("WorkOrder") + "/" + T("AWO") + " " + T("is missing.")
      );
      return;
    }
    Ext.each(b.files, function (c) {
      try {
        var b = c.name.split("."),
          a;
        if (b.length > 0) {
          a = b.pop();
          d.push(a.toLowerCase());
        }
      } catch (f) {
        Ext.Msg.alert(T("Error"), T("Could not read filename"));
        console.error(f);
        return;
      }
    });
    if (d.indexOf("heic") !== -1) {
      Ext.Msg.confirm(
        T("Info"),
        T(
          "At least one file is in HEIF-format, which NEXT does not fully support. These file(s) might not work correctly with some functions in NEXT. To use a supported format, try selecting the same image(s) again, but from the phones photo library. <br /><br />Do you wish to continue anyway?"
        ),
        function (b) {
          if (b == "yes") {
            a.saveFiles();
          }
        }
      );
    } else {
      a.saveFiles();
    }
  },
  saveFiles: function () {
    var a = this,
      e = a.getSavebutton(),
      c = "S",
      b = Ext.ComponentQuery.query("radiofield[name=size]"),
      d = document.getElementById("fileInput");
    e.setDisabled(!0);
    if (Ext.isEmpty(a.getTitle().getValue())) {
      a.getTitle().setValue(
        Ext.Date.format(
          new Date(),
          Ext.util.Format.defaultDateFormat + " H:i:s"
        )
      );
    }
    if (b && b.length) {
      c = b[0].getGroupValue();
    }
    a.fileProgressionHandler = new a.FileProgression(d.files.length, a);
    MEM.loadSpinner.show(T("Preparing upload of images."), "imageBatch");
    Ext.each(d.files, function (b) {
      if (
        !!window.FileReader &&
        !b.type.match(/^image\/heic/) &&
        b.type.match(/^image\//) &&
        c !== "L"
      ) {
        a.saveCompressedImage(b, c);
      } else {
        a.postFile(b);
      }
    });
  },
  uploadFile: function (b) {
    var a = this,
      e = a.getFileForm(),
      g = Me.API_URL + "uploadWorkOrderDocument",
      d = Ext.create("Ext.data.Connection", {}),
      c = DIARY_MODE && a.getDiaryId() ? a.getDiaryId().getValue() : null,
      f = Ext.Object.toQueryString({
        WorkOrderId: b,
        DiaryId: c,
        RegDate: Ext.Date.format(a.getRegdate().getValue(), "Y-m-d"),
        ShowInPortal: a.getShowInPortal().getChecked() ? 1 : 0,
      });
    d.on("requestcomplete", function (i, c, g, h) {
      var d = {};
      try {
        if (c && c.responseText) {
          d = Ext.JSON.decode(c.responseText.replace(/<[^>]*>/g, ""));
        } else {
          if (c && c.responseXML) {
            var f = c.responseXML.getElementsByTagName("pre")[0];
            if (!f) {
              f = c.responseXML.getElementsByTagName("body")[0];
            }
            if (f) {
              d = Ext.JSON.decode(f.innerHTML);
            }
          } else {
            a.clearForm();
            return;
          }
        }
        if (d.success) {
          a.clearForm();
        } else {
          if (d.errors) {
            MEM.Error.show({ message: d.errors });
          } else {
            MEM.serverError.show("string", T("Unknown server response"));
          }
        }
      } catch (j) {
        e.down("#saveButton").setDisabled(!1);
        MEM.serverError.show("string", T("Unknown server response"));
      }
    });
    MEM.loadSpinner.show();
    d.upload(e.element.dom, g, f, {
      success: function () {
        return;
      },
      callback: function () {
        var a = Ext.getStore("MyWorkOrderDocumentStore");
        a.meClearFilter();
        a.meAddFilter(["WorkOrderId", "=", b]);
        if (DIARY_MODE) {
          a.meAddFilter(["DiaryId", "=", parseInt(c)]);
        }
        Ext.Msg.alert(T("Document"), T("Saved"));
        a.load({
          callback: function () {
            MEM.loadSpinner.hide();
          },
        });
      },
    });
  },
  dataURLtoFile: function (f, e) {
    var d = f.split(","),
      g = d[0].match(/:(.*?);/)[1],
      c = atob(d[1]),
      a = c.length,
      b = new Uint8Array(a);
    while (a--) {
      b[a] = c.charCodeAt(a);
    }
    return new File([b], e, { type: g });
  },
  getCompressedFile: function (e, m, g, j) {
    var n = this,
      f = document.createElement("canvas"),
      c = e.naturalHeight,
      d = e.naturalWidth,
      h = 100,
      a = e.height,
      b = e.width,
      i = g;
    if (typeof g !== "undefined" && g == "png") {
      i = "image/png";
    }
    switch (m) {
      case "S":
        c = 450;
        d = 800;
        h = 60;
        break;
      case "M":
        c = 720;
        d = 1280;
        h = 70;
        break;
    }
    if (b > a && b > d) {
      a = Math.round((a * d) / b);
      b = Math.round((b * d) / b);
    } else {
      if (a > c) {
        b = Math.round((b * c) / a);
        a = Math.round((a * c) / a);
      }
    }
    f.width = b;
    f.height = a;
    var o = f.getContext("2d").drawImage(e, 0, 0, b, a),
      k = f.toDataURL(i, h / 100),
      l = n.dataURLtoFile(k, j);
    return l;
  },
  saveCompressedImage: function (a, e) {
    var c = this,
      d = a.type,
      b = new FileReader();
    b.readAsArrayBuffer(a);
    b.onload = function (h) {
      window.URL = window.URL || window.webkitURL;
      var i = new Blob([h.target.result]),
        g = window.URL.createObjectURL(i),
        b = new Image(),
        f = a.name;
      b.src = g;
      b.onload = function () {
        var g = c.getCompressedFile(b, e, d, f);
        c.postFile(g);
      };
    };
  },
  initConnection: function () {
    var a = new XMLHttpRequest(),
      b = "POST",
      c = Me.API_URL + "uploadWorkOrderDocument";
    a.open(b, c, !0);
    this.abortXhr = function () {
      this.suspendEvents();
      a.abort();
      this.resumeEvents();
    };
    return a;
  },
  postFile: function (b, e) {
    var a = this,
      d = new FormData(),
      h = a.getFileForm(),
      g = parseInt(a.getFileWorkOrderId().getValue() || h.getWorkorderId()),
      e = {
        ProjectId: a.getFileProjectId().getValue(),
        WorkOrderId: g,
        DocumentDescription: a.getDescription().getValue(),
        RegDate: Ext.Date.format(a.getRegdate().getValue(), "Y-m-d"),
        Title: a.getTitle().getValue(),
        HideInPDA: 0,
        DocumentTypeId: null,
        DocOnlineFolderId: null,
        DiaryId: null,
        MakeNameUnique: 1,
        Filename: b.name || a.getTitle().getValue(),
        ShowInPortal: a.getShowInPortal().getChecked(),
        FileLastModified: Ext.Date.format(
          b.lastModifiedDate || a.getRegdate().getValue(),
          "Y-m-d\\TH:i:s"
        ),
      };
    if (DIARY_MODE) {
      e.DiaryId = a.getDiaryId().getValue();
    }
    d.set("DocumentData", b, b.name || a.getTitle().getValue());
    for (key in e) {
      d.append(key, e[key]);
    }
    var c = a.initConnection(),
      f = a.fileProgressionHandler.getHandler();
    c.setRequestHeader("X-File-Size", b.size);
    c.setRequestHeader("X-File-Type", b.type);
    d.append("type", "json");
    c.upload.addEventListener("progress", f.progression, !0);
    c.addEventListener("loadend", f.loadend, !0);
    c.addEventListener("exception", f.exeption, !0);
    c.send(d);
  },
  clearForm: function () {
    var a = this;
    a.getDocumentId().setValue(null);
    a.getFileForm().setValues({
      Title: "",
      DocumentDescription: "",
      RegDate: new Date(),
    });
    var b = a.getRegdate().getComponent();
    b.originalValue = b.getValue();
    a.getSavebutton().setDisabled(!1);
    var c = Ext.DomQuery.selectNode("#" + a.getFilefield().id + " input");
    if (c) {
      c.value = "";
    }
    this.getDocumentList().deselectAll();
    this.getFileContainer().setDisabled(!1);
    this.getFilefield().setHidden(!1);
  },
  onListItemTap: function (e, h, g, a, c, f) {
    var b = this,
      d = "binary",
      i = Ext.getStore("MyWorkOrderRowStore");
    if (
      window.location.protocol == "http:" &&
      Ext.os.is.Android &&
      Ext.browser.is.ChromeMobile
    ) {
      d = "download";
    }
    b.onDocumentListItemTap(e, a);
    if (c.target.className.indexOf("trash2") >= 0) {
      console.log(
        "deprecated use of trash2. use my-column-delete in class name instead"
      );
      b.onDeleteDocument(a);
    } else {
      if (c.target.className.indexOf("my-column-delete") >= 0) {
        b.onDeleteDocument(a);
      } else {
        if (
          c.target.className.indexOf("lens") >= 0 ||
          c.target.className.indexOf("image") >= 0
        ) {
          if (a.get("DocumentMimeType").match(/^image\//)) {
            b.onShowImage(a);
          } else {
            if (a.get("DocumentMimeType") == "external-link") {
              return;
            } else {
              window.open(
                Me.API_URL +
                  "workOrderDocument?type=" +
                  d +
                  "&documentid=" +
                  a.get("Id")
              );
            }
          }
        }
      }
    }
  },
  onDeleteDocument: function (b) {
    var c = this,
      a = Ext.getStore("MyWorkOrderDocumentStore");
    Ext.Msg.confirm(T("Delete item."), T("Are you sure?"), function (d) {
      if (d == "yes") {
        c.clearForm();
        a.meClearFilter();
        a.meAddFilter(["Id", "=", b.getId()]);
        a.remove(b);
        a.sync();
      }
    });
  },
  onShowImage: function (e) {
    var g = this,
      a,
      f = this.getNavigationview(),
      c = window.innerWidth > 0 ? window.innerWidth : screen.width,
      b = window.innerHeight > 0 ? window.innerHeight : screen.height,
      d = function () {
        a = Ext.create("Ext.Panel", {
          items: [
            {
              xtype: "pinchzoomimage",
              itemId: "pinchzoomimage",
              src:
                Me.API_URL +
                "workOrderDocument?type=binary&documentid=" +
                e.get("Id"),
              width: c,
              height: b,
            },
          ],
        });
        f.add(a);
        MEM.loadSpinner.hide();
      };
    MEM.loadSpinner.show();
    g.getFileForm()._imageShown = !0;
    d();
  },
  onDocumentListItemTap: function (e, b) {
    var a = this,
      d = a.getFileForm();
    a.getDocumentId().setValue(b.getId());
    a.getFileContainer().setDisabled(!0);
    a.getFilefield().setHidden(!0);
    d.setValues({
      Title: b.get("Title"),
      DocumentDescription: b.get("DocumentDescription"),
      RegDate: new Date(b.get("RegDate")),
    });
    var c = a.getRegdate().getComponent();
    c.originalValue = c.getValue();
  },
  saveDocument: function (c, d) {
    var b = this,
      e = b.getFileForm(),
      a = Ext.getStore("MyWorkOrderDocumentStore");
    MEM.loadSpinner.show();
    a.meClearFilter();
    a.meAddFilter(["WorkOrderId", "=", d]);
    a.load({
      callback: function (f) {
        MEM.loadSpinner.hide();
        var e = a.findRecord("Id", c);
        if (e) {
          e.setProxy(a.getProxy());
          e.set("Title", b.getTitle().getValue());
          e.set("DocumentDescription", b.getDescription().getValue());
          e.set("RegDate", Ext.Date.format(b.getRegdate().getValue(), "Y-m-d"));
          e.save({
            callback: function () {
              Ext.Msg.alert(T("Document"), T("Saved"));
              b.clearForm();
            },
          });
        } else {
          Ext.Msg.alert(
            T("Can not move"),
            T("Can not move document."),
            Ext.emptyFn
          );
        }
      },
    });
  },
  FileProgression: function (d, e) {
    var f = e,
      a = d,
      c = [];
    var b = {
      progressionUpdate: function () {
        var l = 0,
          k = 0,
          m = !0,
          i = 0,
          j = 0,
          n = null;
        c.forEach(function (b) {
          var a = b.getStatus();
          l += a.total;
          k += a.loaded;
          if (!a.completed) {
            m = !1;
          } else {
            i += 1;
          }
          if (a.failed) {
            j += 1;
            n = a.msg;
          }
        });
        var h = Math.trunc((k / l) * 100);
        var g;
        if (a === 1) {
          g = T("Uploading...") + "<br/>" + h + "%";
        } else {
          g =
            T("Uploading...") +
            "<br/> " +
            i +
            " " +
            T("of") +
            " " +
            a +
            " " +
            T("Files").toLowerCase() +
            "<br/>(" +
            h +
            "%)";
        }
        MEM.loadSpinner.show(g, "imageBatch");
        if (m) {
          b.finialize(f, j, n);
        } else {
          setTimeout(b.progressionUpdate, 300);
        }
      },
      finialize: function (f, b, i) {
        var c = Ext.getStore("MyWorkOrderDocumentStore"),
          j = f.getFileForm(),
          g = parseInt(f.getFileWorkOrderId().getValue() || j.getWorkorderId());
        MEM.loadSpinner.show(T("Finalizing upload..."), "imageBatch");
        f.clearForm();
        c.meClearFilter();
        c.meAddFilter(["HideInPDA", "=", !1]);
        c.meAddFilter(["WorkOrderId", "=", g]);
        if (DIARY_MODE) {
          var h =
            DIARY_MODE && f.getDiaryId() ? f.getDiaryId().getValue() : null;
          c.meAddFilter(["DiaryId", "=", parseInt(h)]);
        }
        c.load(function () {
          MEM.loadSpinner.hideSpinner("imageBatch");
          if (b > 0) {
            if (b === a && b === 1) {
              Ext.Msg.alert(
                T("Document"),
                Ext.String.format(
                  T("Failed upload") + "<br />" + T("Error") + ": {0}",
                  i
                )
              );
            } else {
              if (b === a) {
                Ext.Msg.alert(T("Document"), T("Failed upload"));
              } else {
                Ext.Msg.alert(
                  T("Document"),
                  Ext.String.format(T("Upload completed {0} file(s)"), a - b) +
                    Ext.String.format(T(". Error uploading {0} files(s)"), b)
                );
              }
            }
          } else {
            if (a > 1) {
              Ext.Msg.alert(
                T("Document"),
                Ext.String.format(T("Upload completed {0} file(s)"), a)
              );
            } else {
              Ext.Msg.alert(
                T("Document"),
                T("The file has been successfully uploaded")
              );
            }
          }
        });
      },
      getHandler: function () {
        var b = function () {
          var c = 0,
            f = 0,
            a = !1,
            b = !1,
            g = null;
          return {
            getStatus: function () {
              return { loaded: c, total: f, completed: a, failed: b, msg: g };
            },
            progression: function (a) {
              c = a.loaded;
              f = a.total;
            },
            exception: function (a) {
              MEM.loadSpinner.hideSpinner("imageBatch");
            },
            loadend: function (c) {
              var i = c.target && c.target.status,
                f = i ? Ext.decode(c.target.responseText) : { success: !1 },
                h = f.success;
              a = !0;
              if (!h) {
                b = !0;
                g = f.errors;
              }
            },
          };
        };
        var a = new b();
        c.push(a);
        return a;
      },
    };
    setTimeout(b.progressionUpdate, 300);
    return { getHandler: b.getHandler };
  },
});
Ext.define("MEM.view.info.MyInfoMessagePanel", {
  extend: Ext.dataview.List,
  alias: "widget.myinfomessagepanel",
  config: {
    cls: "myinfomessagepanel",
    scrollable: "vertical",
    autoDestroy: !1,
    store: "MyInfoMessageStore",
    id: "MyInfoMessagePanel",
    ui: "round",
    itemHeight: isPhone ? 28 : 42,
    itemTpl: [
      '<span class="date">{Date:date("' +
        Ext.util.Format.defaultDateFormat +
        '")}</span>&nbsp;&nbsp;<span class="message">{Message}</span>',
    ],
    onItemDisclosure: !0,
  },
  constructor: function (a) {
    a = a || {};
    if (Ext.os.is.iOS && !a.infinite) {
      a.infinite = !0;
      a.bufferSize = 100;
    }
    var b = this;
    this.callParent([a]);
    if (a.infinite) {
      this.addCls("my-infinite-fix");
    }
    this.on("painted", function () {
      b.fireEvent("panelshow");
    });
  },
});
Ext.define("MEM.view.info.MyInfoMessageFormPanel", {
  extend: Ext.form.Panel,
  alias: "widget.myinfomessageformpanel",
  config: {
    cls: "myinfomessageformpanel",
    autoDestroy: !1,
    scrollable: null,
    fullscreen: !0,
    layout: "vbox",
    title: T("Message"),
    items: [
      {
        xtype: "textareafield",
        name: "Message",
        itemId: "messageArea",
        readOnly: !0,
        docked: "top",
        clearIcon: !1,
      },
    ],
  },
  initialize: function () {
    var a = this;
    a.on("painted", this.onFormPanelPainted, a);
    a.element.on("drag", a.onTouchMove, a);
    a.callParent(arguments);
  },
  onFormPanelPainted: function () {
    var a = this,
      b = a.element.getHeight();
    a.down("textareafield").setHeight(b - 20);
    a.element.down("textarea").setHeight(b - 30);
  },
  onTouchMove: function (c) {
    var a = 1.8,
      b = this.down("textareafield").element.down("textarea");
    b.dom.scrollTop -= c.deltaY / a;
  },
});
Ext.define("MEM.controller.InfoMessage", {
  extend: MEM.controller.Common,
  config: {
    stores: ["MyInfoMessageStore"],
    views: ["info.MyInfoMessagePanel", "info.MyInfoMessageFormPanel"],
    refs: {
      navigationView: "mynavigationview",
      infoMessageFormPanel: {
        selector: "myinfomessageformpanel",
        xtype: "myinfomessageformpanel",
        title: T("Message"),
        autoCreate: !0,
      },
      infoMessagePanel: {
        selector: "myinfomessagepanel",
        title: T("Messages"),
        xtype: "myinfomessagepanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
    },
    control: {
      infoMessagePanel: {
        itemsingletap: "onListItemTap",
        panelshow: "onPanelShow",
      },
    },
  },
  onListItemTap: function (e, h, g, c, i, f) {
    var b = this,
      d = b.getNavigationView(),
      a = b.getInfoMessageFormPanel();
    a.setRecord(c);
    d.push(a);
  },
  onPanelShow: function () {
    var c = this,
      b = Ext.getStore("MyInfoMessageStore"),
      a = 0;
    b.each(function (b, d, c) {
      if (b.getId() > a) {
        a = b.getId();
      }
    });
    if (a > 0) {
      saveUserSetting(c.getApplication().getUserId(), "LastInfoMessageId", a);
    }
  },
});
Ext.define("MEM.view.MyNavigationView", {
  extend: Ext.navigation.View,
  xtype: "mynavigationview",
  config: {
    autoDestroy: !1,
    cls: "mynavigationview",
    scrollable: null,
    defaultBackButtonText: T("Back"),
    layout: { animation: null, type: "card" },
    navigationBar: {
      id: "mynavigationbar",
      ui: "light",
      listeners: {
        back: {
          fn: function (a, b) {
            return this.fireEvent("beforeback");
          },
        },
      },
      items: [
        {
          xtype: "button",
          action: "home",
          cls: "x-button-icon-standard",
          iconCls: "home",
          iconMask: !0,
          ui: "dark",
          hidden: !0,
          align: "left",
          listeners: {
            hiddenchange: function () {
              Ext.getCmp("logout").setHidden(!this.getHidden());
            },
          },
        },
        {
          xtype: "button",
          iconCls: "arrow_left",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconMask: !0,
          ui: "dark",
          align: "left",
        },
        {
          xtype: "button",
          action: "impersonate",
          hidden: !0,
          cls: "logoutButton",
          html: T("Impersonate user"),
          id: "impersonate",
          ui: "dark",
          align: "left",
        },
        {
          id: "clock",
          xtype: "label",
          html: "00:00",
          hidden: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "archive",
          cls: "x-button-icon-standard",
          target: "",
          hidden: !0,
          id: "projectarchive",
          iconCls: "organize",
          iconMask: !0,
          ui: "dark",
          align: "right",
        },
        {
          xtype: "button",
          action: "add",
          cls: "x-button-icon-standard",
          target: "",
          hidden: !0,
          id: "projectadd",
          iconCls: "add",
          iconMask: !0,
          ui: "dark",
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          id: "customeradd",
          cls: "x-button-icon-standard",
          iconCls: "add",
          iconMask: !0,
          ui: "dark",
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          id: "workorderadd",
          cls: "x-button-icon-standard",
          iconCls: "add",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          cls: "x-button-icon-standard",
          id: "awoadd",
          iconCls: "add",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          id: "customercontactadd",
          cls: "x-button-icon-standard",
          iconCls: "add",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          id: "stafflog",
          action: "openstafflog",
          hidden: !0,
          iconCls: "team",
          cls: "x-button-icon-standard",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          id: "printstafflog",
          action: "printstafflog",
          hidden: !0,
          iconCls: "file",
          cls: "x-button-icon-standard",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          id: "printdailyreport",
          action: "printdailyreport",
          hidden: !0,
          iconCls: "file",
          cls: "x-button-icon-standard",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          id: "suppliercontact",
          action: "opensuppliercontact",
          hidden: !0,
          iconCls: "add",
          cls: "x-button-icon-standard",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          id: "offeradd",
          cls: "x-button-icon-standard",
          iconCls: "add",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          hidden: !0,
          cls: "x-button-icon-standard",
          iconCls: "arrow_right",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "copy",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconCls: "screens",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "mail",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconCls: "mail",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "signature",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconCls: "compose",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "favorites",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconCls: "favorites",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "timeawoadd",
          cls: "x-textbutton-icon-standard",
          text: T("AWO"),
          hidden: !0,
          iconCls: "add",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          action: "updateeconomy",
          cls: "x-button-icon-standard",
          hidden: !0,
          iconCls: "refresh",
          ui: "dark",
          iconMask: !0,
          align: "right",
        },
        {
          xtype: "button",
          id: "logout",
          cls: "logoutButton",
          html: T("Log out"),
          ui: "dark",
          align: "right",
        },
      ],
    },
  },
  constructor: function () {
    var a = this;
    this.callParent(arguments);
    this.on("painted", function () {
      a.fireEvent("panelshow");
    });
  },
});
function projectStatus(c) {
  var b = Ext.getStore("MyProjectStatusStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("StatusName");
  }
  return "";
}
function projectStatusColor(d) {
  var c = Ext.getStore("MyProjectStatusStore"),
    b,
    g,
    f,
    e,
    a = c.findRecord("Id", d, 0, !1, !0, !0);
  if (a) {
    b = a.get("StatusColor");
    return "background-color: " + b;
  }
  return "";
}
Ext.define("MEM.view.project.MyProjectPanel", {
  extend: Ext.Panel,
  xtype: "myprojectpanel",
  config: {
    layout: { type: "card" },
    items: [
      {
        xtype: "container",
        docked: "top",
        cls: "my-project-toolbar",
        scrollable: { direction: "horizontal", directionLock: !0 },
        items: [
          {
            xtype: "toolbar",
            ui: "my-status-button-ui",
            cls: "projectToolbar",
            width: "4096",
            fieldLabel: T("Status"),
            items: [{ xtype: "segmentedbutton", allowDepress: !1 }],
          },
        ],
      },
      {
        xtype: "list",
        id: "projectlist",
        cls: "myProjectlist",
        scrollToTopOnRefresh: !1,
        store: "MyFilteredProjectListStore",
        listeners: {
          painted: function () {
            this.up("myprojectpanel").fireEvent("panelshow");
          },
        },
        ui: "round",
        itemHeight: isPhone ? 28 : 42,
        scrollable: "vertical",
        onItemDisclosure: !0,
        itemTpl: [
          '<div class="status-box" style="{[projectStatusColor(values.ProjectStatusId)]}"></div><span class="Projectlist-span"> {ProjectNo}, {ProjectName}',
        ],
      },
    ],
  },
  initialize: function () {
    var b = this,
      a = b.down("list"),
      c = a.getStore();
    c.setGrouper({
      groupFn: function (a) {
        return a.get("ProjectStatus");
      },
      sortProperty: "StatusCode",
    });
    a.refreshHeaderIndices();
    a.setGrouped(!0);
    b.callParent(arguments);
  },
});
function projectStatus(c) {
  var b = Ext.getStore("MyProjectStatusStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("StatusName");
  }
  return "";
}
function projectStatusColor(d) {
  var c = Ext.getStore("MyProjectStatusStore"),
    b,
    g,
    f,
    e,
    a = c.findRecord("Id", d, 0, !1, !0, !0);
  if (a) {
    b = a.get("StatusColor");
    return "background-color: " + b;
  }
  return "";
}
Ext.define("MEM.view.project.MyProjectArchivePanel", {
  extend: Ext.Panel,
  xtype: "myprojectarchivepanel",
  config: {
    layout: { type: "card" },
    items: [
      {
        xtype: "list",
        id: "projectarchivelist",
        cls: "myProjectlist",
        scrollToTopOnRefresh: !1,
        store: "MyProjectArchiveListStore",
        listeners: {
          painted: function () {
            this.up("myprojectarchivepanel").fireEvent("panelshow");
          },
        },
        ui: "round",
        itemHeight: isPhone ? 28 : 42,
        scrollable: "vertical",
        onItemDisclosure: !0,
        itemTpl: [
          '<div class="status-box" style="{[projectStatusColor(values.ProjectStatusId)]}"></div><span class="Projectlist-span"> {ProjectNo}, {ProjectName}',
        ],
        plugins: [
          {
            xclass: "MEM.ux.dataview.plugins.MyListPaging",
            requestGrouping: {
              groupFn: function (a) {
                return a.get("ProjectStatus");
              },
              sortProperty: "ProjectStatus",
              property: "StatusCode",
              direction: "ASC",
            },
            loadMoreText: T("Load more..."),
          },
        ],
      },
    ],
  },
  initialize: function () {
    var c = this,
      b = c.down("list"),
      a = b.getStore();
    a.setGrouper({
      groupFn: function (a) {
        return a.get("ProjectStatus");
      },
      sortProperty: "StatusCode",
      property: "ProjectStatus",
      direction: "ASC",
    });
    b.refreshHeaderIndices();
    b.setGrouped(!0);
    c.callParent(arguments);
    MEM.loadSpinner.show();
    a.load({
      callback: function () {
        a.sort([{ property: "Project", direction: "ASC" }]);
        MEM.loadSpinner.hide();
        c.fireEvent("archivestoreloaded");
      },
    });
  },
});
Ext.define("MEM.view.time.MyTimeDayContainer", {
  extend: Ext.Container,
  alias: "widget.mytimeday",
  config: {
    currentDate: null,
    cls: "mytimedaycontainer",
    layout: "vbox",
    title: "Title Here",
  },
  constructor: function (a) {
    var b = this;
    a = a || {};
    Ext.apply(a, {
      items: [
        {
          xtype: "toolbar",
          docked: "top",
          itemid: "dayToolbar",
          cls: "dayToolbar",
          styleHtmlContent: !0,
          layout: { type: "hbox", pack: "end" },
          items: b.getToolBarComponents(a.fake),
        },
        b.getListComponent(a.fake),
      ],
    });
    this.callParent([a]);
  },
  getToolBarComponents: function (b) {
    var a = [];
    if (!b) {
      a = [
        {
          xtype: "label",
          docked: "left",
          html: "",
          cls: "dayHeader",
          itemId: "dayLabel",
          iconMask: !0,
        },
        {
          action: "timeAdd",
          xtype: "button",
          cls: "x-button-icon-standard",
          iconCls: "add",
          ui: "light",
          iconMask: !0,
        },
      ];
    }
    return a;
  },
  getListComponent: function (a) {
    if (!a) {
      return {
        xtype: "list",
        itemId: "selecttimerow",
        flex: 1,
        scrollable: null,
        cls: "my-list",
        itemHeight: isPhone ? 24 : 42,
        itemTpl: new Ext.XTemplate(
          '<tpl if="Invoiced==1 || Approved==1 || Approved2==1">',
          '<div class="approved my-item-value">{Hours_fmt}</div>',
          '<div class="approved my-item-title">',
          '<tpl if="Absence==1">',
          '<span style="color:green;">&#10004;&nbsp;</span>' +
            "{WorkOrderName}",
          "<tpl else>",
          '<span style="color:green;">&#10004;&nbsp;</span>' + "{DisplayTitle}",
          "</tpl>",
          "<tpl else>",
          '<div class="my-item-value">{Hours_fmt}</div>',
          '<div class="my-item-title">',
          '<tpl if="Absence==1">',
          "{WorkOrderName}",
          "<tpl else>",
          "{DisplayTitle}",
          "</tpl>",
          "</tpl>",
          "</div>",
          { compiled: !0, disableFormats: !0 }
        ),
      };
    }
    return { xtype: "container" };
  },
});
Ext.define("MEM.view.time.MyTimePanel", {
  extend: Ext.Panel,
  xtype: "mytimepanel",
  id: "MyTimePanel",
  config: {
    cls: "mytimepanel",
    startday: null,
    layout: { type: "fit" },
    scrollable: null,
    defaults: { padding: 0, styleHtmlContent: "true" },
  },
  constructor: function (a) {
    var b = this;
    a = a || {};
    Ext.apply(a, { items: b.getItemConfig(a.fake) });
    this.callParent([a]);
  },
  getItemConfig: function (a) {
    var b = [
      {
        xtype: "button",
        cls: "x-button-icon-standard",
        itemId: "myMonthButton",
        action: "showMonth",
        ui: "light",
        text: T("Show Month"),
      },
      {
        xtype: "button",
        cls: "x-button-icon-standard",
        itemId: "fillWeek",
        text: T("Fill week"),
        ui: "light",
        action: "fillWeeek",
      },
      {
        xtype: "button",
        cls: "x-button-icon-standard",
        itemId: "copyWeek",
        text: T("Copy week"),
        ui: "light",
        action: "copyWeeek",
      },
    ];
    return [
      {
        xtype: "container",
        docked: "bottom",
        scrollable: null,
        items: [
          {
            xtype: "toolbar",
            cls: "my-button-toolbar",
            ui: "light",
            docked: "bottom",
            layout: { pack: "center", type: "hbox" },
            items: a ? [] : b,
          },
          {
            xtype: "label",
            itemId: "infoLabel",
            docked: "bottom",
            html: "&nbsp;",
          },
        ],
      },
      {
        xtype: "container",
        itemId: "mydays",
        scrollable: null,
        layout: { type: "hbox" },
        defaults: { width: "50%" },
        items: [
          {
            xtype: "container",
            layout: "vbox",
            ui: "light",
            defaults: { flex: 1 },
            items: [
              { xtype: "mytimeday", title: "mon", fake: a },
              { xtype: "mytimeday", title: "tis", fake: a },
              { xtype: "mytimeday", title: "ons", fake: a },
            ],
          },
          {
            xtype: "container",
            layout: "vbox",
            ui: "light",
            defaults: { flex: 1 },
            items: [
              { xtype: "mytimeday", title: "tor", fake: a },
              { xtype: "mytimeday", title: "fre", fake: a },
              { xtype: "mytimeday", title: "lor", fake: a, flex: 0.5 },
              { xtype: "mytimeday", title: "son", fake: a, flex: 0.5 },
            ],
          },
        ],
      },
    ];
  },
});
Ext.define("MEM.view.time.MyTimeCarouselPanel", {
  extend: Ext.Carousel,
  xtype: "mytimecarouselpanel",
  config: {
    id: "MyTimeCarouselPanel",
    autoDestroy: !0,
    fullscreen: !1,
    layout: "fit",
    showAnimation: !1,
    indicator: !1,
    defaults: { styleHtmlContent: !0 },
    activeItem: 1,
    items: [
      { xtype: "mytimepanel", id: "MyTimePanelLeft", fake: !0, html: "" },
      { xtype: "mytimepanel", itemId: "MyTimePanelCenter" },
      { xtype: "mytimepanel", id: "MyTimePanelRigth", fake: !0, html: "" },
    ],
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.myworkordersearchpanel",
  config: {
    cls: "myworkordersearchpanel",
    title: T("Search workorder"),
    searchfields: [
      { label: T("Project number"), field: "ProjectNo" },
      { label: T("Project name"), field: "ProjectName" },
      {
        label: T("Workorder number"),
        field: "WorkOrderNo",
        type: "workorderno",
      },
      { label: T("Workorder name"), field: "Name" },
    ],
    store: {
      storeId: "WorkOrderSearchPanel_MyWorkOrderListStore",
      type: "myworkorderliststorealias",
      singleRequest: !0,
      autoLoad: !1,
      autoSync: !1,
      remoteFilter: !1,
      remoteSort: !0,
      sorters: [{ property: "Changed", direction: "DESC" }],
      grouper: null,
    },
    itemTpl: ["{ProjectNo} {ProjectName} - {FullName}"],
    minLength: 2,
    filters: [
      ["ProjectId", "!=", 0],
      ["ProjectStatusCode", ">=", STATUS_NOTED],
      ["ProjectStatusCode", "<", STATUS_FINISHED],
    ],
  },
  constructor: function (f) {
    var b = this,
      c = MEM.app.getController("WorkOrder"),
      e = c.intSetting("MobileWorkOrderStatusCodeMin"),
      d = c.intSetting("MobileWorkOrderStatusCodeMax");
    if (MEM.app.userIsPartner()) {
      this.config.store.type = "myorganisationworkorderliststorealias";
      this.config.filters.push([
        "OrganizationalProjectId",
        "=",
        MEM.app.getUserRec().get("OrganizationalProjectId"),
      ]);
    }
    b.callParent([f]);
    var a = b.getFilters();
    if (e > 0) {
      a.push(["WorkOrderStatusCode", ">=", e]);
    }
    if (d > 0) {
      a.push(["WorkOrderStatusCode", "<=", d]);
    }
    if (a.length > 0) {
      b.setFilters(a);
    }
  },
});
Ext.define("MEM.view.diary.MyDiaryDayContainer", {
  extend: Ext.Container,
  alias: "widget.mydiaryday",
  config: {
    currentDate: null,
    cls: "mydiarydaycontainer",
    layout: "vbox",
    title: "Title Here",
  },
  constructor: function (a) {
    var b = this;
    a = a || {};
    Ext.apply(a, {
      items: [
        {
          xtype: "toolbar",
          docked: "top",
          itemid: "dayToolbar",
          cls: "dayToolbar",
          styleHtmlContent: !0,
          layout: { type: "hbox", pack: "end" },
          items: b.getToolBarComponents(a.fake),
        },
        { itemId: "ProjectId", xtype: "hiddenfield" },
        { itemId: "CustomerId", xtype: "hiddenfield" },
        { itemId: "WorkplaceId", xtype: "hiddenfield" },
        b.getListComponent(a.fake),
      ],
    });
    this.callParent([a]);
  },
  getToolBarComponents: function (b) {
    var a = [];
    if (!b) {
      a = [
        {
          xtype: "label",
          docked: "left",
          html: "",
          cls: "dayHeader",
          itemId: "dayLabel",
          iconMask: !0,
        },
        {
          action: "diaryPreview",
          xtype: "button",
          cls: "x-button-icon-standard",
          text: "...",
          ui: "light",
          iconMask: !0,
        },
        {
          action: "diaryAdd",
          xtype: "button",
          cls: "x-button-icon-standard",
          iconCls: "add",
          ui: "light",
          iconMask: !0,
        },
      ];
    }
    return a;
  },
  getListComponent: function (a) {
    if (!a) {
      return { xtype: "button", cls: "x-button-day", action: "diaryAdd" };
    }
    return { xtype: "container" };
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getCustomerId: function () {
    var a = this.down("#CustomerId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getWorkplaceId: function () {
    var a = this.down("#WorkplaceId").getValue();
    return a || undefined;
  },
  setProjectId: function (a) {
    this.down("#ProjectId").setValue(a);
  },
  setCustomerId: function (a) {
    this.down("#CustomerId").setValue(a);
  },
  setWorkplaceId: function (a) {
    this.down("#WorkplaceId").setValue(a == "" ? null : a);
  },
});
Ext.define("MEM.view.diary.MyDiaryPanel", {
  extend: Ext.Panel,
  xtype: "mydiarypanel",
  id: "MyDiaryPanel",
  config: {
    startday: null,
    project: null,
    layout: { type: "fit" },
    scrollable: null,
    defaults: { padding: 0, styleHtmlContent: "true" },
  },
  constructor: function (a) {
    var b = this;
    a = a || {};
    Ext.apply(a, { items: b.getItemConfig(a.fake) });
    this.callParent([a]);
  },
  getItemConfig: function (a) {
    return [
      {
        xtype: "container",
        itemId: "mydays",
        scrollable: null,
        layout: { type: "hbox" },
        defaults: { width: "50%" },
        items: [
          { itemId: "ProjectId", xtype: "hiddenfield" },
          { itemId: "CustomerId", xtype: "hiddenfield" },
          { itemId: "WorkplaceId", xtype: "hiddenfield" },
          {
            xtype: "container",
            layout: "vbox",
            ui: "light",
            defaults: { flex: 1 },
            items: [
              { xtype: "mydiaryday", title: "mon", fake: a },
              { xtype: "mydiaryday", title: "tis", fake: a },
              { xtype: "mydiaryday", title: "ons", fake: a },
            ],
          },
          {
            xtype: "container",
            layout: "vbox",
            ui: "light",
            defaults: { flex: 1 },
            items: [
              { xtype: "mydiaryday", title: "tor", fake: a },
              { xtype: "mydiaryday", title: "fre", fake: a },
              { xtype: "mydiaryday", title: "lor", fake: a, flex: 0.5 },
              { xtype: "mydiaryday", title: "son", fake: a, flex: 0.5 },
            ],
          },
        ],
      },
      {
        xtype: "container",
        docked: "bottom",
        scrollable: null,
        items: [
          {
            xtype: "label",
            itemId: "infoLabel",
            docked: "bottom",
            html: "&nbsp;",
          },
        ],
      },
    ];
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getCustomerId: function () {
    var a = this.down("#CustomerId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getWorkplaceId: function () {
    var a = this.down("#WorkplaceId").getValue();
    return a || undefined;
  },
  setProjectId: function (a) {
    this.down("#ProjectId").setValue(a);
  },
  setCustomerId: function (a) {
    this.down("#CustomerId").setValue(a);
  },
  setWorkplaceId: function (a) {
    this.down("#WorkplaceId").setValue(a == "" ? null : a);
  },
  applyProject: function (a, b) {
    this.setProjectId(a ? a.get("Id") : null);
    this.setCustomerId(a ? a.get("CustomerId") : null);
    this.setWorkplaceId(a ? a.get("WorkplaceId") : null);
    return a;
  },
});
Ext.define("MEM.view.diary.MyDiaryCarouselPanel", {
  extend: Ext.Carousel,
  xtype: "mydiarycarouselpanel",
  config: {
    id: "MyDiaryCarouselPanel",
    autoDestroy: !0,
    fullscreen: !1,
    layout: "fit",
    showAnimation: !1,
    indicator: !1,
    defaults: { styleHtmlContent: !0 },
    activeItem: 1,
    items: [
      { xtype: "mydiarypanel", id: "MyDiaryPanelLeft", fake: !0, html: "" },
      { xtype: "mydiarypanel", itemId: "MyDiaryPanelCenter" },
      { xtype: "mydiarypanel", id: "MyDiaryPanelRigth", fake: !0, html: "" },
    ],
  },
});
Ext.define("MEM.view.report.MyReportPanel", {
  extend: Ext.Panel,
  xtype: "myreportpanel",
  requires: [],
  alias: "widget.myreportpanel",
  fullscreen: !0,
  config: {
    cls: "myreportpanel",
    layout: { type: "card" },
    items: [
      {
        xtype: "container",
        layout: { type: "vbox" },
        items: [
          {
            itemid: "hej",
            xtype: "container",
            width: "100%",
            height: "100%",
            layout: { type: "card", align: "center", pack: "center" },
            html:
              '<iframe id="myreport-iframe" src="' +
              window.location.href.replace("mobile/", "webapp/#/report") +
              '"/>',
          },
        ],
      },
    ],
    listeners: { initialize: "onInit" },
  },
  onInit: function () {
    window.addEventListener("storage", function () {
      if (JSON.parse(localStorage.getItem("closeReport"))) {
        localStorage.setItem("closeReport", null);
        MEM.app.getController("MEM.controller.MainMenu").onHomeTap();
      }
    });
  },
});
Ext.define("MEM.view.MyLoginPanel", {
  extend: Ext.Panel,
  alias: "widget.myloginpanel",
  config: {
    layout: { type: "vbox", align: "center", width: 280 },
    cls: "my-login",
    styleHtmlContent: !0,
    defaults: { margin: "10 10 10 10", padding: "5" },
    items: [
      {
        xtype: "image",
        margin: "",
        src: "resources/images/next-logo.svg",
        cls: "logo",
      },
      { xtype: "label", html: "", height: isPhone ? 10 : 40 },
      {
        xtype: "label",
        id: "fail",
        html: T("Login failed..."),
        hidden: !0,
        top: isPhone ? 10 : 370,
        left: "50%",
        margin: "0 0 0 -100",
        width: 300,
        listeners: {
          show: function (a) {
            Ext.getCmp("myloginbutton").setDisabled(!1);
          },
        },
      },
      {
        xtype: "fieldset",
        defaults: { labelWidth: LABEL_WIDTH },
        items: [
          {
            xtype: "textfield",
            id: "user",
            label: T("Login"),
            width: isPhone ? 280 : 360,
            listeners: {
              keyup: function (a) {
                Ext.getCmp("myloginbutton").setDisabled(!1);
              },
            },
          },
          {
            xtype: "passwordfield",
            id: "pass",
            label: T("Password"),
            width: isPhone ? 280 : 360,
            listeners: {
              keyup: function (a) {
                Ext.getCmp("myloginbutton").setDisabled(!1);
              },
            },
          },
        ],
      },
      {
        xtype: "checkboxfield",
        cls: "keepsession-box",
        itemId: "keepsession",
        label: T("Keep me logged in for 48 h"),
        width: isPhone ? 280 : 360,
        labelWidth: "75%",
      },
      {
        xtype: "button",
        id: "myloginbutton",
        cls: "my-login-button",
        text: T("Log in"),
        minWidth: isPhone ? 280 : 360,
        listeners: {
          tap: function (a) {
            a.setDisabled(!0);
          },
          painted: function (a) {
            this.setDisabled(!1 || null == Ext.getCmp("pass").getValue());
          },
        },
      },
      {
        xtype: "label",
        position: "",
        html: T("Version") + " " + "4.0",
        cls: "x-version",
      },
      {
        xtype: "container",
        cls: "next-powered-by",
        margin: "",
        bottom: 0,
        right: 0,
        items: [
          { xtype: "label", html: T("Powered by"), cls: "powered" },
          {
            xtype: "image",
            src: "resources/images/next_logo.png",
            cls: "nextlogo",
          },
        ],
      },
    ],
  },
});
Ext.define("MEM.view.project.MyProjectToolbar", {
  extend: Ext.Toolbar,
  alias: "widget.myprojecttoolbar",
  config: {
    docked: "bottom",
    ui: "light",
    layout: { pack: "center", type: "hbox" },
    defaults: { margin: "0 0 0 10" },
    items: [
      {
        xtype: "button",
        cls: "x-button-standard",
        id: "myawobutton",
        minWidth: "20%",
        ui: "action",
        text: T("AWO"),
      },
      {
        xtype: "button",
        cls: "x-button-standard",
        id: "myprojectdiarybutton",
        minWidth: "20%",
        ui: "action",
        text: T("Diary"),
      },
      {
        xtype: "button",
        cls: "x-button-standard",
        id: "mysupplierinvoicebutton",
        minWidth: "20%",
        ui: "action",
        text: T("Supplier Invoices"),
      },
      {
        xtype: "button",
        cls: "x-button-standard",
        id: "myclientinvoicebutton",
        minWidth: "20%",
        ui: "action",
        text: T("Client Invoices"),
      },
      {
        xtype: "button",
        cls: "x-button-standard",
        id: "myhoursbutton",
        minWidth: "20%",
        ui: "action",
        text: T("Hours"),
      },
    ],
  },
});
Ext.define("MEM.view.project.MyEconomyPanel", {
  extend: Ext.Container,
  alias: "widget.myeconomypanel",
  datatemplate:
    '<div style = "margin: 20px; width: 90%">' +
    '<table style = "color: black; border: 0px ; cellspacing: 10px;">' +
    "<tr>" +
    '    <td colspan="4" align="center">{ProjectName}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4" align="center" style="background-color: #075643; color: white">{TSummaryOfCost}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td width="150px"><b>{TCost}</b></td>' +
    '    <td width="200px" align=right><b>{TNetto}</b></td>' +
    '    <td width="150px" align=right><b>{TAddon}</b></td>' +
    '    <td width="200px" align=right><b>{TCustomerprice}</b></td>' +
    "</tr>" +
    "<tr>" +
    '    <td align="left">{TSupplierinvoices}</td>' +
    '    <td align="right">{CostRevenueInvoices}</td>' +
    '    <td align="right">{CostRevenueInvoicesWithMarkup}</td>' +
    '    <td align="right">{CostRevenueInvoicesSum}</td>' +
    "</tr>" +
    "<tr>" +
    "    <td align=left>{TTime}</td>" +
    "    <td align=right>{CostRevenueTime}</td>" +
    "    <td align=right>{CostRevenueTimeWithMarkup}</td>" +
    "    <td align=right>{CostRevenueTimeSum}</td>" +
    "</tr>" +
    "<tr>" +
    "    <td align=left>{TInternal}</td>" +
    "    <td align=right>{CostRevenueInternal}</td>" +
    "    <td align=right>{CostRevenueInternalWithMarkup}</td>" +
    "    <td align=right>{CostRevenueInternalSum}</td>" +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4" ><hr/></td>' +
    "</tr>" +
    "<tr>" +
    '    <td align="left"><b>{TTotal}</b></td>' +
    '    <td align="right"><b>{TotalCostRevenue}</b></td>' +
    '    <td align="right"><b>{TotalCostRevenueWithMarkup}</b></td>' +
    '    <td align="right"><b>{TotalCostRevenueSum}</b></td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4">&nbsp;</td>' +
    "</tr>" +
    "<tr>" +
    '    <td align=left colspan="3">{TTotalHours}</td>' +
    "    <td align=right >{SumTime}</td>" +
    "    <td></td>" +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4">&nbsp;</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4" align="center" style="background-color: #075643; color: white">{TSummaryOfRevenues}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td align="left" colspan="3">{TInvoiced}</td>' +
    '    <td align="right">{EarnedRevenue}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td valign="bottom" align="left" colspan="3">{TEarnedNotInvoiced}</td>' +
    '    <td valign="bottom" align="right">{EarnedRevenueNotInvoiced}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4">&nbsp;</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4" align="center" style="background-color: #075643; color: white">{TKeyvalues}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="2" align=left>{TTB}</td>' +
    '    <td colspan="2" align=left>{TB}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="2" align=left>{TTG}</td>' +
    '    <td colspan="2" align=left>{TG}</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4">&nbsp;</td>' +
    "</tr>" +
    "<tr>" +
    '    <td colspan="4" class="AmountsExVat">{AmountsExVat}</td>' +
    "</tr>" +
    "</table>" +
    "</div>",
  config: { xtype: "label", html: "", cls: "myeconomypanel", scrollable: !0 },
  fillData: function (a) {
    if (!this.tpl) {
      this.tpl = new Ext.XTemplate(this.datatemplate);
    }
    var b = this.tpl.apply(a);
    this.setHtml(b);
  },
});
Ext.define("MEM.view.project.MyProjectFormPanel", {
  extend: Ext.form.FormPanel,
  xtype: "myprojectformpanel",
  alias: "widget.myprojectformpanel",
  config: {
    cls: "myprojectformpanel",
    currentProjectId: null,
    autoDestroy: !0,
    scrollable: !0,
    defaults: { labelWidth: "15%" },
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "container",
            cls: "myfield",
            items: [
              {
                xtype: "myselectfield",
                store: {
                  type: "myprojectliststorealias",
                  storeId: "MyProjectWriteRightStore",
                },
                displayField: "Project",
                valueField: "Id",
                id: "myParentProjectId",
                itemId: "parentprojectfield",
                label: T("Parent Project"),
                queryMode: "local",
                autoSelect: !1,
                required: !0,
                name: "ParentProjectId",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    this.setLeft(
                      this.up().down("myselectfield").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "ParentProjectSearchButton",
                action: "projectSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                islockable: !0,
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "numberfield",
            id: "ProjectNo",
            label: T("ProjectNumber"),
            name: "ProjectNo",
            disabled: !0,
            disabledCls: "x-item-disabled",
          },
          {
            xtype: "textfield",
            label: T("Projectname"),
            required: !0,
            name: "ProjectName",
          },
          {
            xtype: "myselectfield",
            name: "ProjectManagerId",
            id: "ProjectManagerId",
            label: T("Project manager"),
            allowBlank: !1,
            editable: !1,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyProjectManagerStore",
            displayField: "FullName",
            valueField: "Id",
            queryMode: "local",
          },
          {
            xtype: "myselectfield",
            name: "WorkLeaderId",
            id: "WorkLeaderId",
            label: T("Work leader"),
            allowBlank: !1,
            clearIcon: !0,
            editable: !1,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyWorkleaderStore",
            displayField: "FullName",
            valueField: "Id",
            queryMode: "local",
          },
          {
            xtype: "myselectfield",
            name: "PriceTypeId",
            label: T("Price type"),
            allowBlank: !1,
            editable: !1,
            clearIcon: !0,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyPriceTypeStore",
            displayField: "TypeName",
            valueField: "Id",
            queryMode: "local",
          },
          {
            xtype: "myselectfield",
            name: "ProjectTypeId",
            label: T("Project type"),
            allowBlank: !1,
            editable: !1,
            clearIcon: !0,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyProjectTypeStore",
            displayField: "TypeName",
            valueField: "Id",
            queryMode: "local",
          },
          {
            xtype: "myselectfield",
            name: "MarkupModelId",
            label: T("Markup model"),
            allowBlank: !1,
            editable: !1,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyMarkupModelStore",
            displayField: "Name",
            valueField: "Id",
            queryMode: "local",
          },
          {
            xtype: "container",
            cls: "myfield",
            items: [
              {
                id: "CustomerId",
                itemId: "customerfield",
                xtype: "mydisplayfield",
                readOnly: !0,
                parentForm: "myprojectformpanel",
                displayField: "CustomerName",
                label: T("Customer"),
                name: "CustomerId",
                needRight: "Project",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function (c) {
                    var a = this.up().down("mydisplayfield");
                    this.setLeft(a.getLabelWidth());
                    if (!haveRight(a.getNeedRight(), 4)) {
                      this.setHidden(!0);
                      var b = this.up().down("#viewContactButton");
                      b.setMargin(this.getMargin());
                    }
                  },
                },
                xtype: "button",
                action: "customerSearch",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
              {
                id: "viewContactButton",
                top: 2,
                margin: isPhone ? "0 0 0 -5em" : "0 0 0 -4.8em",
                listeners: {
                  painted: function () {
                    this.setLeft(
                      this.up().down("mydisplayfield").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                iconCls: "user",
                cls: "x-button-icon-standard",
                iconMask: !0,
                action: "contactShow",
              },
            ],
          },
          {
            xtype: "container",
            cls: "myfield",
            items: [
              {
                id: "myCustomerAgentId",
                xtype: "myselectfield",
                label: T("Contact"),
                name: "CustomerAgentId",
                allowBlank: !1,
                clearIcon: !0,
                editable: !1,
                forceSelection: !0,
                autoSelect: !1,
                store: {
                  type: "mycustomercontactliststorealias",
                  storeId: "ProjectFormPanel_MyCustomerContactListStore",
                  sorters: [{ property: "ContactName", direction: "ASC" }],
                },
                displayField: "ContactName",
                valueField: "Id",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    Ext.getCmp("ProjectContactButton").setLeft(
                      Ext.getCmp("myCustomerAgentId").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "ProjectContactButton",
                action: "projectContactAdd",
                docked: "left",
                iconCls: "add",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "textfield",
            label: T("WorkplAddress"),
            name: "WorkplaceAddress1",
          },
          { xtype: "textfield", label: T("Postal"), name: "WorkplaceZipcode" },
          { xtype: "textfield", label: T("City"), name: "WorkplaceCity" },
          {
            xtype: "datepickerfield",
            picker: { xtype: "mydatepicker", value: new Date() },
            label: T("Projectstart"),
            name: "ProjectStart",
          },
          {
            xtype: "myselectfield",
            label: T("Status"),
            name: "ProjectStatusId",
            valueField: "Id",
            displayField: "StatusName",
            columnWidth: 1,
            allowBlank: !1,
            editable: !1,
            forceSelection: !0,
            autoSelect: !1,
            store: "MyProjectStatusStore",
            queryMode: "local",
          },
          {
            xtype: "hiddenfield",
            name: "GuaranteeInspectionDate",
            type: "date",
            defaultValue: Date.now(),
          },
        ],
      },
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "mytextarea",
            name: "ProjectNote",
            labelWidth: "30%",
            label: T("Comment"),
          },
        ],
      },
      {
        xtype: "container",
        items: [
          { xtype: "spacer", docked: "left", width: "30%" },
          {
            xtype: "button",
            ui: "action",
            action: "hourlyrates",
            id: "HourlyRatesButton",
            text: T("Hourly rates"),
            disabled: !1,
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            minWidth: "19%",
          },
          { xtype: "spacer", docked: "left", width: "4px" },
          {
            xtype: "button",
            ui: "confirm",
            id: "ProjectSaveButton",
            text: T("Save"),
            docked: "left",
            minWidth: "19%",
          },
          { xtype: "spacer", minHeight: 40 },
        ],
      },
    ],
  },
  getCustomerId: function () {
    var a = this.down("#customerfield").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderRowForm", {
  extend: Ext.form.Panel,
  alias: "widget.myworkorderrowform",
  togglechange: function (b) {
    DIARY_MODE
      ? this.down("#myArticleWorkOrderId").show()
      : this.down("#myArticleWorkOrderId").hide();
    if (b === 1) {
      this.down("#myArticleCombo").show();
      this.down("#myAccountCombo").hide();
      this.down("#myCodeNo").hide();
      this.down("#myTitle").hide();
      this.down("#myTitleContainer").removeCls("mycontainer");
      this.down("button[action=articleSearch]").show();
    } else {
      this.down("#myArticleCombo").hide();
      this.down("#myCodeNo").show();
      this.down("#myTitle").show();
      this.down("#myTitleContainer").addCls("mycontainer");
      this.down("button[action=articleSearch]").hide();
      var a = this.down("#myAccountCombo");
      a.show();
      if (!a.getValue()) {
        var e = this.down("#myArticleCombo").getStore(),
          d = e ? e.getAt(0) : null;
        if (d) {
          a.setValue(d.get("AccountNo"));
        }
      }
    }
    var c = b === 1 || isNumber(this.down("#myWorkOrderRowId").getValue());
    this.down("#myItemUnitId").setDisabled(c);
    this.down("#myArticleCategoryCombo").setDisabled(c);
    this.down("#myAccountCombo").setDisabled(c);
    this.down("#myArticleCategoryCombo").setHidden(
      b == 0 || Me.formValidateHidden("ArticleStore", "ArticleCategoryId")
    );
  },
  scroll: "vertical",
  config: {
    cls: "myworkorderrowform",
    isInvoiced: !1,
    autoDestroy: !1,
    defaults: { labelWidth: "40%" },
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "hiddenfield",
            name: "Locked",
            listeners: {
              change: function (d, a, b, c) {
                this.up("myworkorderrowform").setIsInvoiced(a == "true");
              },
            },
          },
          { xtype: "hiddenfield", name: "ArticleId", itemId: "ArticleId" },
          {
            xtype: "hiddenfield",
            name: "ArticleCategoryId",
            itemId: "ArticleCategoryId",
          },
          { xtype: "hiddenfield", name: "Payoff", itemId: "Payoff" },
          { xtype: "hiddenfield", name: "Chargeable", itemId: "Chargeable" },
          {
            xtype: "hiddenfield",
            name: "CostUnitPricelist",
            itemId: "CostUnitPricelist",
          },
          {
            xtype: "hiddenfield",
            name: "PriceUnitPricelist",
            itemId: "PriceUnitPricelist",
          },
          {
            xtype: "hiddenfield",
            name: "PayoffUnitPricelist",
            itemId: "PayoffUnitPricelist",
          },
          {
            id: "myWorkOrderRowId",
            xtype: "hiddenfield",
            name: "Id",
            listeners: {
              change: function (f, c, d, e) {
                var a = isNumber(c),
                  b = this.up("myworkorderrowform");
                b.down("#myWOrowDelete").setHidden(!a);
                b.down("#myCodeNo").setDisabled(a);
                b.down("#myAccountCombo").setDisabled(a);
                b.down("#myItemUnitId").setDisabled(a);
                b.down("#myArticleCategoryCombo").setDisabled(a);
              },
            },
          },
          {
            id: "fetchtoggle",
            xtype: "togglefield",
            label: T("Fetch from pricelist"),
          },
          {
            id: "myCodeNo",
            xtype: "textfield",
            label: T("ArtNo"),
            name: "CodeNo",
            required: !0,
            disabledCls: "x-item-disabled",
          },
          {
            id: "myArticleWorkOrderId",
            xtype: "myselectfield",
            label: T("WorkOrder"),
            store: "MyCloneWorkOrderListStore",
            required: !0,
            name: "WorkOrderId",
            hidden: !0,
            displayField: "FullName",
            valueField: "Id",
          },
          {
            id: "myArticleCategoryCombo",
            xtype: "myselectfield",
            autoSelect: !1,
            label: T("Article category"),
            store: {
              storeId: "WorkOrderRowForm_MyArticleCategoryStore",
              type: "myarticlecategorystorealias",
            },
            displayField: "Name",
            valueField: "Id",
            clearIcon: !0,
            listeners: {
              painted: function () {
                if (
                  Me.formValidateHidden("ArticleStore", "ArticleCategoryId")
                ) {
                  this.setHidden(!0);
                }
              },
              change: function (d, a, c) {
                var b = this.up("myworkorderrowform")
                  .down("#myArticleCombo")
                  .getStore();
                b.clearFilter();
                if (a > 0) {
                  b.filter("ArticleCategoryId", a);
                }
              },
            },
          },
          {
            xtype: "container",
            cls: "mySearchBtnCtr",
            itemId: "myTitleContainer",
            items: [
              {
                id: "myTitle",
                xtype: "textfield",
                label: T("ArtTitle"),
                name: "Title",
                listeners: {
                  painted: function () {
                    if (MEM.app.userIsPartner()) {
                      this.setReadOnly(!0);
                    }
                  },
                },
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    var a = this.up("myworkorderrowform");
                    a.down("#ArticleSearchButton").setLeft(
                      a.down("#myArticleCombo").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "ArticleSearchButton",
                action: "articleSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            id: "myArticleCombo",
            hidden: !0,
            xtype: "myselectfield",
            autoSelect: !1,
            label: T("Article"),
            store: {
              storeId: "WorkOrderRowForm_MyArticleStore",
              meFilters: [["ShowInPDA", "=", !0]],
              type: "myarticlestorealias",
            },
            displayField: "FullDescription",
            valueField: "Id",
          },
          {
            id: "myAccountCombo",
            xtype: "myselectfield",
            hidden: !0,
            label: T("Account"),
            store: "MyAccountChartStore",
            displayField: "Account",
            valueField: "AccountNo",
            required: !0,
            name: "AccountNo",
            listeners: {
              painted: function () {
                if (MEM.app.userIsPartner()) {
                  this.setHidden(!0);
                }
              },
            },
          },
          {
            xtype: "container",
            cls: ["mySearchBtnCtr", "mycontainer"],
            itemId: "myResourceContainer",
            items: [
              {
                id: "myResourceCombo",
                xtype: "myselectfield",
                label: T("Resource"),
                store: {
                  storeId: "WorkOrderRowForm_MyResourceStore",
                  type: "myresourcestorealias",
                },
                displayField: "FullDescription",
                valueField: "Id",
                name: "ResourceId",
                autoSelect: !1,
                clearIcon: !0,
                listeners: {
                  painted: function () {
                    if (
                      Me.formValidateHidden("WorkOrderRowStore", "ResourceId")
                    ) {
                      this.setHidden(!0);
                    }
                  },
                },
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    var a = this.up("myworkorderrowform");
                    a.down("#resourcesearchbutton").setLeft(
                      a.down("#myResourceCombo").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "resourcesearchbutton",
                action: "resourceSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            id: "myFactoryPricelistCombo",
            xtype: "myselectfield",
            label: T("Factory pricelist"),
            store: {
              storeId: "WorkOrderRowForm_MyFactoryPricelistStore",
              type: "myfactorypriceliststorealias",
            },
            displayField: "Name",
            valueField: "Id",
            name: "FactoryPricelistId",
            autoSelect: !1,
            clearIcon: !0,
            listeners: {
              painted: function () {
                if (
                  Me.formValidateHidden(
                    "WorkOrderRowStore",
                    "FactoryPricelistId"
                  )
                ) {
                  this.setHidden(!0);
                }
              },
            },
          },
          {
            xtype: "datepickerfield",
            picker: { xtype: "mydatepicker", value: new Date() },
            label: T("PerformedDate"),
            name: "PerformedDate",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.ShowPerformedDate") != "1");
              },
            },
          },
          {
            id: "myPlannedQty",
            xtype: "numberfield",
            label: T("CalcQty"),
            name: "PlannedQty",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.PlannedQty") != "1");
              },
            },
          },
          {
            id: "myDays",
            xtype: "numberfield",
            label: T("Qty."),
            name: "Days",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.Days") != "1");
              },
            },
          },
          {
            itemId: "startqty",
            xtype: "textfield",
            label: T("In (m)"),
            name: "StartQty",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("WorkOrderEnableStartEnd") != "1");
              },
            },
          },
          {
            itemId: "endqty",
            xtype: "textfield",
            label: T("Out (m)"),
            name: "EndQty",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("WorkOrderEnableStartEnd") != "1");
              },
            },
          },
          {
            id: "myUsedQty",
            xtype: "numberfield",
            label: T("OrderRowUsedQuantity"),
            name: "UsedQty",
          },
          {
            id: "myItemUnitId",
            xtype: "myselectfield",
            label: T("Unit"),
            store: "MyItemUnitStore",
            displayField: "UnitName",
            valueField: "Id",
            name: "ItemUnitId",
            required: !0,
            listeners: {
              painted: function () {
                var a = this.up("myworkorderrowform");
                this.setDisabled(
                  a.down("togglefield").getValue() == 1 ||
                    isNumber(a.down("#myWorkOrderRowId").getValue())
                );
              },
            },
          },
          {
            id: "myPriceUnit",
            xtype: "numberfield",
            label: T("Price"),
            name: "PriceUnit",
          },
          {
            id: "myCostUnit",
            xtype: "numberfield",
            label: T("Cost"),
            name: "CostUnit",
          },
        ],
      },
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "mytextarea",
            label: T("Comment"),
            labelWidth: "30%",
            name: "Comment",
            showPhrases: !0,
            listeners: {
              painted: function (a) {
                this.setRequired(getSetting("MEM.MandatoryComment") == "1");
              },
            },
          },
        ],
      },
      { xtype: "spacer", height: 15 },
      {
        xtype: "container",
        layout: { type: "card" },
        items: [
          {
            xtype: "button",
            docked: "left",
            minWidth: "20%",
            ui: "decline",
            text: T("Close"),
            action: "WOrowClose",
          },
          {
            id: "myWOrowDelete",
            xtype: "button",
            docked: "left",
            listeners: {
              painted: function (a) {
                this.setDisabled(
                  TIME_MODE
                    ? _approved
                    : !1 || this.up("myworkorderrowform").getIsInvoiced()
                );
              },
            },
            minWidth: "20%",
            ui: "decline",
            text: T("Delete"),
            action: "WOrowDelete",
          },
          {
            xtype: "button",
            docked: "right",
            listeners: {
              painted: function (a) {
                this.setDisabled(
                  TIME_MODE
                    ? _approved
                    : !1 || this.up("myworkorderrowform").getIsInvoiced()
                );
              },
            },
            minWidth: "20%",
            ui: "confirm",
            text: T("Save & Close"),
            action: "WOrowSaveClose",
            hidden: !0,
          },
          {
            id: "myWORowSave",
            xtype: "button",
            docked: "right",
            listeners: {
              tap: function (a) {
                a.setDisabled(!0);
              },
              painted: function (a) {
                this.setDisabled(
                  TIME_MODE
                    ? _approved
                    : !1 || this.up("myworkorderrowform").getIsInvoiced()
                );
              },
            },
            minWidth: "20%",
            ui: "confirm",
            text: T("Save"),
            action: "WOrowSave",
          },
        ],
      },
      { xtype: "spacer", cls: "my-spacer" },
      {
        xtype: "toolbar",
        cls: "my-toolbar",
        ui: "light",
        title: T("Resourcerows"),
        layout: { align: "center", type: "hbox" },
        items: [],
      },
      {
        html:
          '<div class="my-tpl-item wrl-delete">&nbsp;</div>' +
          '<div class="my-tpl-item wrl-codeno">' +
          T("Number") +
          "</div>" +
          '<div class="my-tpl-item wrl-title">' +
          T("Title") +
          "</div>" +
          '<div class="my-tpl-item performeddateheader wrl-performed">' +
          T("PerformedDate") +
          "</div>" +
          '<div class="my-tpl-item x-days wrl-days">' +
          T("Qty.") +
          "</div>" +
          '<div class="my-tpl-item wrl-plannedqty">' +
          T("Planned qty") +
          "</div>" +
          '<div class="my-tpl-item wrl-usedqty">' +
          T("Quantity") +
          "</div>" +
          '<div class="my-tpl-item wrl-unit">' +
          T("Unit") +
          "</div>",
        cls: "myHeader",
        itemId: "WorkOrderRowFormListHeader",
      },
      {
        xtype: "myinlinelist",
        autoDestroy: !1,
        scrollable: null,
        store: "MyWorkOrderRowStore",
        id: "myRowList",
        itemId: "WorkOrderRowFormList",
        cls: "my-rowlist",
        selectedCls: "",
        listeners: {
          painted: function (b) {
            var a = this.up("myworkorderrowform");
            a.showPerformedDate(Ext.Viewport, Ext.Viewport.getOrientation());
            a.showDays();
            a.showPlannedQty();
          },
        },
        headerItem: {
          html:
            '<div class="my-tpl-item wrl-delete">&nbsp;</div>' +
            '<div class="my-tpl-item wrl-codeno">' +
            T("Number") +
            "</div>" +
            '<div class="my-tpl-item wrl-title">' +
            T("Title") +
            "</div>" +
            '<div class="my-tpl-item performeddateheader wrl-performed">' +
            T("PerformedDate") +
            "</div>" +
            '<div class="my-tpl-item x-days wrl-days">' +
            T("Qty.") +
            "</div>" +
            '<div class="my-tpl-item wrl-plannedqty">' +
            T("Planned qty") +
            "</div>" +
            '<div class="my-tpl-item wrl-usedqty">' +
            T("Quantity") +
            "</div>" +
            '<div class="my-tpl-item wrl-unit">' +
            T("Unit") +
            "</div>",
          cls: "myHeader",
        },
        itemTpl: [
          "<div " +
            '<tpl if="values.Locked == true">' +
            'class="my-tpl-item my-wide2">&nbsp;' +
            "<tpl else>" +
            'class="my-tpl-item my-wide2 my-pictos-icon my-column-delete">#' +
            "</tpl>" +
            "</div>" +
            '<div class="my-tpl-item wrl-codeno">&nbsp;{CodeNo}</div>' +
            '<div class="my-tpl-item wrl-title">&nbsp;{Title}</div>' +
            '<div class="my-tpl-item performeddate wrl-performed">&nbsp;{PerformedDate:date("' +
            Ext.util.Format.defaultDateFormat +
            '")}</div>' +
            '<div class="my-tpl-item x-days wrl-days">&nbsp;{Days_fmt}</div>' +
            '<div class="my-tpl-item wrl-plannedqty">&nbsp;{PlannedQty_fmt}</div>' +
            '<div class="my-tpl-item wrl-usedqty">&nbsp;{UsedQty_fmt}</div>' +
            '<div class="my-tpl-item wrl-unit">&nbsp;{[MEM.workorder.unit(values.ItemUnitId)]}</div>',
        ],
      },
    ],
  },
  initialize: function () {
    Ext.Viewport.on("orientationchange", "showPerformedDate", this);
    this.callParent(arguments);
  },
  setRecord: function (a) {
    var b = this.callParent(arguments);
    this.fireEvent("dataupdated", a);
    return b;
  },
  showPerformedDate: function (c, b) {
    var a = this;
    if (b == "landscape" && getSetting("MEM.ShowPerformedDate") == "1") {
      a.down("#WorkOrderRowFormList").removeCls("my-rowlist-hide-performdate");
      a.down("#WorkOrderRowFormListHeader").removeCls(
        "my-rowlist-hide-performdate"
      );
    } else {
      a.down("#WorkOrderRowFormList").addCls("my-rowlist-hide-performdate");
      a.down("#WorkOrderRowFormListHeader").addCls(
        "my-rowlist-hide-performdate"
      );
    }
  },
  showDays: function () {
    if (getSetting("MEM.Days") == "1") {
      this.down("#WorkOrderRowFormList").removeCls("my-rowlist-hide-days");
      this.down("#WorkOrderRowFormListHeader").removeCls(
        "my-rowlist-hide-days"
      );
    } else {
      this.down("#WorkOrderRowFormList").addCls("my-rowlist-hide-days");
      this.down("#WorkOrderRowFormListHeader").addCls("my-rowlist-hide-days");
    }
  },
  showPlannedQty: function () {
    if (getSetting("MEM.PlannedQty") == "1") {
      this.down("#WorkOrderRowFormList").removeCls(
        "my-rowlist-hide-plannedqty"
      );
      this.down("#WorkOrderRowFormListHeader").removeCls(
        "my-rowlist-hide-plannedqty"
      );
    } else {
      this.down("#WorkOrderRowFormList").addCls("my-rowlist-hide-plannedqty");
      this.down("#WorkOrderRowFormListHeader").addCls(
        "my-rowlist-hide-plannedqty"
      );
    }
  },
});
Ext.define("MEM.view.MyViewport", {
  extend: Ext.Panel,
  alias: "myviewport",
  config: {
    fullscreen: !0,
    layout: { animation: null, type: "card" },
    items: [
      {
        xtype: "myloginpanel",
        title: T("Login"),
        id: "myloginpanel",
        hidden: !0,
      },
      { xtype: "mynavigationview", title: T("Menu"), id: "mynavigationview" },
      {
        xtype: "mycustomercontactpanel",
        title: T("Customercontacts"),
        id: "MyCustomerContactPanel",
      },
      {
        xtype: "myprojectformpanel",
        title: T("Projects"),
        id: "MyProjectFormPanel",
      },
      {
        xtype: "myworkorderformpanel",
        title: T("WorkOrder"),
        id: "MyWorkOrderFormPanel",
      },
      {
        xtype: "myworkorderrowform",
        title: T("Resource"),
        id: "MyWorkOrderRowForm",
      },
    ],
  },
});
Ext.define("MEM.controller.Login", {
  extend: Ext.app.Controller,
  config: {
    views: ["MyLoginPanel"],
    refs: { loginview: "myloginview" },
    launch: "init",
    control: {
      "#myloginbutton": { tap: "onMyLoginButtonTap" },
      "#logout": { tap: "logout" },
    },
  },
  launch: function () {
    Ext.Viewport.add(Ext.create("MEM.view.MyViewport"));
    Ext.getCmp("user").setValue(getCookie("userName"));
  },
  logout: function () {
    var a = this;
    Ext.Msg.confirm(T("Confirmation"), T("Exit?"), function (b) {
      if (b == "yes") {
        a.doLogout();
      } else {
      }
    });
  },
  doLogout: function () {
    var a = Me.STORE_URL + "../../api/logout";
    Ext.Ajax.request({
      url: a,
      method: "DELETE",
      meResponseType: "json",
      params: { type: "json" },
      callback: function (a) {
        deletecookie("milltimesessionid");
        Ext.defer(function () {
          window.location.reload();
        }, 100);
      },
    });
  },
  onSessionError: function (c, b) {
    var a = Ext.getCmp("myloginpanel");
    if (b) {
      a.down("#keepsession").check();
    } else {
      a.down("#keepsession").uncheck();
    }
    if (!c) {
      var d = Ext.getCmp("fail");
      d.show();
    }
  },
  login: function (a) {
    var d = this,
      h = a
        ? Me.STORE_URL + "../../api/session"
        : Me.STORE_URL + "../../api/login",
      e = Ext.isDefined(Ext.getCmp("user"))
        ? Ext.getCmp("user").getValue()
        : "",
      g = Ext.isDefined(Ext.getCmp("pass"))
        ? Ext.getCmp("pass").getValue()
        : "",
      b = a
        ? getCookie("keepsession")
        : Ext.getCmp("myloginpanel").down("#keepsession").isChecked(),
      c = d.onSessionError,
      f = getCookie("milltimesessionid"),
      i;
    if (!a) {
      Me.SHOWERRORS = !0;
    } else {
      if (!f) {
        Ext.defer(function () {
          c(a, b);
        }, 100);
        return;
      }
    }
    Ext.Ajax.request({
      url: h,
      method: a ? "GET" : "POST",
      meResponseType: "json",
      params: a
        ? { type: "json" }
        : { type: "json", userlogin: e, password: g },
      success: function (h) {
        var g,
          j,
          m = h && h.status == 200,
          f = m ? Ext.decode(h.responseText) : { success: !1 },
          i = f.success,
          l = i ? f.rows[0] : {},
          n;
        if (i && d.checkMobileClientAccess(f)) {
          g = a ? getCookie("milltimesessionid") : l.Sid;
          setcookie("userName", e, 7, "/");
          j = Ext.getCmp("mynavigationview");
          Ext.Viewport.setActiveItem(j);
          d.getApplication().fireEvent("startapplication");
          var k = document.location.pathname.replace(/\/[^\/]*(\/|)$/, "/");
          if (b) {
            setcookie("milltimesessionid", g, 2, k);
            setcookie("keepsession", "1", 7, document.location.pathname);
          } else {
            setcookie("milltimesessionid", g, null, k);
            setcookie("keepsession", "1", -1, document.location.pathname);
          }
        } else {
          c(a, b);
        }
      },
      failure: function (d) {
        console.dir(d);
        if (!a) {
          MEM.serverError.show("ajax", d);
        }
        c(a, b);
      },
    });
  },
  checkMobileClientAccess: function (a) {
    var b = this;
    if (a.rows[0].MobileClient) {
      return !0;
    } else {
      Ext.Msg.alert(
        T("Message"),
        T("Mobile is disabled for this Account."),
        function () {
          b.doLogout();
        }
      );
      return !1;
    }
  },
  init: function () {
    this.login(!0);
  },
  onMyLoginButtonTap: function (b, c, a) {
    this.login(!1);
  },
});
Ext.define("MEM.model.User", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "FullName", type: "string" },
      { name: "UserLogin", type: "string" },
      { name: "PersonalNo", type: "string" },
      { name: "Languagecode", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyUserStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuserstorealias",
  config: {
    model: "MEM.model.User",
    storeId: "MyUserStore",
    autoLoad: !1,
    autoSync: !1,
    sorters: [{ property: "FullName", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserStore" },
  },
});
Ext.define("MEM.view.MyImpersonationOverlay", {
  extend: Ext.dataview.List,
  xtype: "myimpersonationoverlay",
  config: {
    left: "15%",
    top: "10%",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !1,
    width: "70%",
    height: "70%",
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    store: {
      type: "myuserstorealias",
      storeId: null,
      autoLoad: !0,
      sorters: [{ property: "FullName", direction: "ASC" }],
    },
    itemTpl: "{FullName} ({UserLogin})",
    itemId: "userlist",
    label: T("Users"),
    labelWidth: "80%",
    checked: !0,
    name: "showPrice",
  },
});
Ext.define("MEM.view.MyMainMenuPanel", {
  extend: Ext.Panel,
  xtype: "mymainmenupanel",
  xtrans: { camera: T("Files") },
  config: {
    layout: { type: "vbox", align: "stretch" },
    cls: "my-menu",
    scrollable: null,
    itemId: "MyMainMenuPanel",
    items: [
      {
        xtype: "list",
        id: "MyMainMenuList",
        scrollable: "vertical",
        itemId: "mylist",
        itemTpl: [
          '<tpl><div class="me-list-icon-{Picto}-main me-main-list-item"></tpl>' +
            '<tpl if = "window.isPhone"> {ShortMenuText}<tpl else>{MenuText}</tpl>' +
            "</div>",
        ],
        store: "MyMainMenuStore",
        onItemDisclosure: !0,
        listeners: {
          painted: function () {
            this.up("mymainmenupanel").fireEvent("panelshow");
          },
        },
        flex: 1,
      },
      {
        xtype: "image",
        margin: "",
        src: "resources/images/next-logo.svg",
        cls: "logo",
      },
    ],
  },
});
Ext.define("MEM.controller.MainMenu", {
  extend: MEM.controller.Common,
  init: function () {
    var a = this,
      b = a.getApplication();
    b.on({
      scope: a,
      startapplication: a.onStart,
      setadditemtype: a.onSetItemType,
      clearadditemtype: a.onClearItemType,
      setarchiveitemtype: a.onSetArchiveType,
      cleararchiveitemtype: a.onClearArchiveType,
      setmailtype: a.onSetMailType,
      clearmailtype: a.onClearMailType,
      settimeweektype: a.onSetTimeWeekType,
      cleartimeweektype: a.onClearTimeWeekType,
      settimetype: a.onSetTimeType,
      cleartimetype: a.onClearTimeType,
      setdiarytype: a.onSetDiaryType,
      cleardiarytype: a.onClearDiaryType,
      setfavoritestype: a.onSetFavoritesType,
      clearfavoritestype: a.onClearFavoritesType,
      seteconomytype: a.onSetEconomyType,
      cleareconomytype: a.onClearEconomyType,
      clearstafflogtype: a.onClearStaffLogType,
      setstafflogtype: a.onSetStaffLogType,
      setstaffloglisttype: a.onSetStaffLogListType,
      clearstaffloglisttype: a.onClearStaffLogListType,
      setsignaturetype: a.onSetSignatureType,
      clearsignaturetype: a.onClearSignatureType,
      setcopytype: a.onSetCopyType,
      clearcopytype: a.onClearCopyType,
    });
    a.control({ "#approveButton": { click: a.onApproveInvoice } });
    a.subpanels = {};
  },
  copyStore: function (c, d) {
    var e = this,
      a = Ext.getStore(c),
      b = Ext.getStore(d);
    a.each(function (a) {
      b.add(a);
    });
  },
  onStart: function () {
    var a = this,
      f = a.getApplication(),
      d = [
        [
          "MyUserSessionStore",
          "MyUserRightStore",
          "MyUserAccessStore",
          "MyOfficeCompanyStore",
        ],
        ["MyGroupStore", "MyUserListStore", "MyProjectStatusStore"],
        ["MyCloneProjectListStore"],
        [
          "MyOptionValueStore",
          "MyFormValidationStore",
          "MyCloneWorkOrderStatusStore",
          "MyMarkupModelStore",
          "MyItemUnitStore",
          "MyCurrencyStore",
          "MyCustomerTypeStore",
          "MyVatStore",
          "MyPhraseStore",
          "MyWorkOrderStatusRelationsStore",
          "MyExternalWorkOrderStatusStore",
        ],
        [
          "MyCloneAbsenceProjectStore",
          "MyCloneAlternativeAbsenceProjectStore",
          "MyFilteredProjectListStore",
          "MyProjectArchiveListStore",
        ],
        ["MyUserSettingStore"],
      ],
      b = Ext.getStore("MyUserSettingStore"),
      c = Ext.getStore("MyUserSessionStore"),
      e = Ext.getStore("MyMainMenuStore");
    c.on("load", function () {
      b.filter("UserId", f.getUserId());
      var a = MEM.app.getUserLang(),
        c = ["sv", "de", "en", "no", "pl", "lt", "lv"];
      if (!window.ME_LANG) {
        return;
      }
      if (c.indexOf(a) < 0) {
        return;
      }
      if (a != window.ME_LANG) {
        if (a == "sv") {
          window.location.href = window.location.href.replace(/\?.*/, "");
        } else {
          window.location.search = "?me_lang=" + a;
        }
      }
    });
    Ext.defer(
      function () {
        Me.loadAllStores(
          d,
          function () {
            a.copyStore(
              "MyCloneProjectListStore",
              "MyCloneProjectListAllStore"
            );
            e.load(function (c, b, d) {
              a.showMainMenuList();
            });
          },
          !0
        );
      },
      100,
      a
    );
  },
  onSetItemType: function (b) {
    var a = this.getAddButton();
    a.config.target = b;
    a.show();
  },
  onClearItemType: function () {
    var a = this.getAddButton();
    a.config.target = "";
    a.hide();
  },
  onSetArchiveType: function (b) {
    var a = this.getArchiveButton();
    a.config.target = b;
    a.show();
  },
  onClearArchiveType: function () {
    var a = this.getArchiveButton();
    a.config.target = "";
    a.hide();
  },
  onSetMailType: function (b) {
    var a = this.getMailButton();
    a.config.target = b;
    a.show();
  },
  onSetSignatureType: function (b) {
    var a = this.getSignatureButton();
    a.config.target = b;
    a.show();
  },
  onClearSignatureType: function (b) {
    var a = this.getSignatureButton();
    a.hide();
  },
  onSetCopyType: function (b) {
    var a = this.getCopyButton();
    a.config.target = b;
    a.show();
  },
  onClearCopyType: function (b) {
    var a = this.getCopyButton();
    a.hide();
  },
  onSetTimeType: function (b) {
    var d = this,
      a = !1,
      c = this.getTimeButton();
    switch (b) {
      case "timeworkorder":
        a = d.intSetting("MEM.TimeAWOAdd") == 1;
        break;
      case "diary":
        a = d.intSetting("MEM.DiaryAWOAdd") == 1;
        break;
    }
    if (a) {
      c.config.target = b;
      c.show();
    }
  },
  onSetTimeWeekType: function (b) {
    var a = this.getPrintDailyReportButton();
    a.config.target = b;
    a.show();
  },
  onSetDiaryType: function (a) {
    this.onSetTimeType(a);
  },
  onSetFavoritesType: function (b) {
    var a = this.getFavoritesButton();
    a.config.target = b;
    a.show();
  },
  onSetEconomyType: function (b) {
    var a = this.getEconomyButton();
    a.config.target = b;
    a.show();
  },
  onClearMailType: function () {
    var a = this.getMailButton();
    a.config.target = "";
    a.hide();
  },
  onClearTimeType: function (a) {
    var b = this.getTimeButton();
    if (a && (b.config.target == a || a == "all")) {
      b.config.target = "";
      b.hide();
    }
  },
  onClearTimeWeekType: function () {
    var a = this.getPrintDailyReportButton();
    a.config.target = "";
    a.hide();
  },
  onClearDiaryType: function (a) {
    this.onClearTimeType(a);
  },
  onClearFavoritesType: function () {
    var a = this.getFavoritesButton();
    a.config.target = "";
    a.hide();
  },
  onClearEconomyType: function (b) {
    var a = this.getEconomyButton();
    a.config.target = "";
    a.hide();
  },
  onSetStaffLogType: function (b) {
    var a = this.getStaffLogButton();
    a.config.target = b;
    a.show();
  },
  onClearStaffLogType: function () {
    var a = this.getStaffLogButton();
    a.config.target = "";
    a.hide();
  },
  onSetStaffLogListType: function (b) {
    var a = this.getPrintStaffLogButton();
    a.config.target = b;
    a.show();
    a = this.getSupplierContactButton();
    a.config.target = b;
    a.show();
  },
  onClearStaffLogListType: function () {
    var a = this.getPrintStaffLogButton();
    a.config.target = "";
    a.hide();
    a = this.getSupplierContactButton();
    a.config.target = "";
    a.hide();
  },
  launch: function () {},
  config: {
    views: ["MyMainMenuPanel"],
    refs: {
      navigation: "mynavigationview",
      home: "button[action=home]",
      impersonationButton: "button[action=impersonate]",
      MyImpersonationOverlay: {
        selector: "myimpersonationoverlay",
        xtype: "myimpersonationoverlay",
        autoCreate: !0,
      },
      homePage: {
        selector: "mymainmenupanel",
        title: T("Menu"),
        xtype: "mymainmenupanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      timePage: {
        selector: "mytimepanel",
        xtype: "mytimepanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      infoMessagePanel: {
        selector: "myinfomessagepanel",
        title: T("Messages"),
        xtype: "myinfomessagepanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      addButton: "button[action=add]",
      archiveButton: "button[action=archive]",
      mailButton: "button[action=mail]",
      signatureButton: "button[action=signature]",
      copyButton: "button[action=copy]",
      timeButton: "button[action=timeawoadd]",
      printDailyReportButton: "button[action=printdailyreport]",
      favoritesButton: "button[action=favorites]",
      economyButton: "button[action=updateeconomy]",
      staffLogButton: "button[action=openstafflog]",
      printStaffLogButton: "button[action=printstafflog]",
      supplierContactButton: "button[action=opensuppliercontact]",
      list: "#MyMainMenuList",
    },
    control: {
      mynavigationview: {
        panelshow: "onHomeTap",
        back: "onBackTap",
        push: "onNavigation",
        pop: "onNavigation",
      },
      "#MyMainMenuList": { itemsingletap: "onMyMainMenuListItemTap" },
      "button[action=home]": { tap: "onHomeTap" },
      "button[action=add]": { tap: "onAdd" },
      "button[action=archive]": { tap: "onOpenArchive" },
      "button[action=mail]": { tap: "onSendEmail" },
      "button[action=signature]": { tap: "onOpenSignature" },
      "button[action=copy]": { tap: "onCopy" },
      "button[action=impersonate]": { tap: "onImpersonate" },
      myimpersonationoverlay: { select: "onImpersonate" },
    },
  },
  onImpersonate: function (c, d) {
    console.log("disclose");
    var e = this,
      b = e.getApplication();
    if (b.isImpersonator()) {
      Ext.Ajax.request({
        url: Me.API_URL + "impersonate",
        method: "GET",
        params: { type: "json", json: Ext.JSON.encode({ userId: 0 }) },
        callback: function () {
          window.location.reload();
        },
      });
      return;
    }
    var a = this.getMyImpersonationOverlay(),
      f;
    if (c == a) {
      Ext.Ajax.request({
        url: Me.API_URL + "impersonate",
        method: "GET",
        params: {
          type: "json",
          json: Ext.JSON.encode({ userId: d.get("Id") }),
        },
        callback: function () {
          window.location.reload();
        },
      });
      return;
    } else {
      if (b.getUserId() == 1) {
        gb = a;
        if (a.isHidden()) {
          a.show();
        } else {
          this.getNavigation().push(a);
        }
      }
    }
  },
  onAdd: function (a) {
    this.getApplication().fireEvent("additem", a.config.target);
  },
  onOpenArchive: function (a) {
    this.getApplication().fireEvent("openarchive", a.config.target);
  },
  onSendEmail: function (a) {
    this.getApplication().fireEvent("sendemail", a.config.target);
  },
  onOpenSignature: function (a) {
    this.getApplication().fireEvent("opensignature", a.config.target);
  },
  onCopy: function (a) {
    this.getApplication().fireEvent("copy", a.config.target);
  },
  onHomeTap: function () {
    this.showMainMenuList(!0);
  },
  onBackTap: function (b) {
    var a = b.getItems();
    if (a && a.items) {
      if (a.items[a.length - 1].getItemId() == "MyMainMenuPanel") {
        this.hideHome();
      }
    }
  },
  onMyMainMenuListItemTap: function (c, f, e, b, g, d) {
    var a = this;
    if (a.waitingforloadview) {
      console.log("clicked again...");
      return;
    }
    a.waitingforloadview = !0;
    MEM.loadSpinner.show();
    a.loadView(b, !1);
  },
  loadView: function (f, j) {
    var b = this,
      d,
      g = f.data.View,
      l = f.data.Store,
      n = f.data.ShortMenuText,
      a = Ext.getStore(l),
      m = b.getNavigation(),
      e = b.getApplication();
    TIMER = new Date();
    TIME_MODE = !1;
    DIARY_MODE = !1;
    CURRENT_WORKORDERID = null;
    MEM.app.getController("WorkOrder").setProjectMode(!1);
    b.waitingforloadview = !1;
    d = b.ensureSubPanel(g, f);
    MEM.loadSpinner.showSpinner("menu");
    switch (g) {
      case "Map":
        var h = Ext.getCmp("MyMapPanel");
        h.me_viewstate = "workorder";
        h.me_loadstate = "reload";
        break;
      case "File":
        d.setProjectId(null);
        d.setWorkorderId(null);
        break;
    }
    view = m.setActiveItem(d);
    b.showHome();
    if (a) {
      var k = a.meFilters !== undefined && a.meFilters.length == 0;
      a.meClearFilter();
      switch (g) {
        case "TimeCarousel":
          var c = MEM.app.getController("Time");
          c.setProjectId(null);
          c.setWorkOrderId(null);
          TIME_MODE = !0;
          b.getApplication().fireEvent("renderWeek");
          b.onLoadFavorites(e.getUserId());
          MEM.loadSpinner.hide();
          break;
        case "ProjectSearch":
          DIARY_MODE = !0;
          b.onLoadFavorites(e.getUserId());
          b.getApplication().fireEvent("openDiary");
          MEM.loadSpinner.hide();
          break;
        case "WorkOrder":
          AWO_MODE = !1;
          MEM.loadSpinner.showSpinner("workorderlist");
          var i = e.getUserId(),
            c = MEM.app.getController("WorkOrder");
          c.setFilterDisabled(!0);
          a.meAddFilter(["ResponsibleServiceId", "=", i]);
          a.meAddFilter(["ProjectStatusCode", ">=", STATUS_NOTED]);
          a.meAddFilter(["ProjectStatusCode", "<", STATUS_FINISHED]);
          a.meAddFilter(["Addition", "=", !1]);
          a.load({
            callback: function () {
              c.loadSelectStores();
              b.onLoadFavorites(i);
              if (j) {
                MEM.loadSpinner.hideSpinner("workorderlist");
              }
            },
          });
          break;
        case "AWO":
          AWO_MODE = !0;
          MEM.loadSpinner.show();
          a.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
          a.load({
            callback: function () {
              MEM.loadSpinner.hide();
            },
          });
          break;
        case "PersonalStaffLog":
          MEM.loadSpinner.show();
          b.getApplication().fireEvent("renderPersonalStaffLog");
          MEM.loadSpinner.hide();
          break;
        case "InfoMessage":
          MEM.loadSpinner.show();
          a.meClearFilter();
          a.meAddFilter(["UserId", "=", e.getUserId()]);
          a.meAddFilter(["ShowInMobile", "=", !0]);
          a.load({
            callback: function () {
              d.refresh();
              MEM.loadSpinner.hide();
            },
          });
          break;
        default:
          if (k && a.isLoaded()) {
            MEM.loadSpinner.hideSpinner("menu");
            return;
          }
          MEM.loadSpinner.show();
          a.load({
            callback: function () {
              MEM.loadSpinner.hide();
            },
          });
          break;
      }
    } else {
      switch (g) {
        case "WorkOrderSearch":
          b.onLoadFavorites(e.getUserId());
          MEM.loadSpinner.hide();
          break;
      }
    }
    MEM.loadSpinner.hideSpinner("menu");
  },
  showHome: function () {
    this.getHome().show();
    this.getImpersonationButton().hide();
    Ext.select(".x-button-back").show();
  },
  hideHome: function () {
    this.getHome().hide();
    this.hideAdd();
    this.hideToolbar();
    if (
      this.getApplication().getUserId() == 1 ||
      this.getApplication().isImpersonator()
    ) {
      if (this.getApplication().isImpersonator()) {
        this.getImpersonationButton().setHtml(
          T("Running as") + " " + this.getApplication().getUserName()
        );
      }
      this.getImpersonationButton().show();
    }
    Ext.select(".x-button-back").hide();
  },
  hideAdd: function () {
    this.getApplication().fireEvent("clearadditemtype");
    this.getApplication().fireEvent("cleararchiveitemtype");
    this.getApplication().fireEvent("clearmailtype");
    this.getApplication().fireEvent("cleartimetype");
    this.getApplication().fireEvent("clearfavoritestype");
    this.getApplication().fireEvent("clearstafflogtype");
    this.getApplication().fireEvent("clearstaffloglisttype");
    this.getApplication().fireEvent("clearsuppliercontacttype");
    this.getApplication().fireEvent("cleardiarytype", "all");
  },
  hideToolbar: function () {
    this.getApplication().fireEvent("removetoolbar");
  },
  showMainMenuList: function (c) {
    var a = this,
      e = a.getNavigation(),
      d = Ext.getStore("MyProjectStatusStore"),
      b = Ext.getStore("MyProjectListStore"),
      f = Ext.getStore("MyMainMenuStore");
    if (!f.isLoaded()) {
      return;
    }
    e.pop(e.getInnerItems().length - 1);
    a.hideHome();
    d.clearFilter();
    d.load({
      callback: function () {
        b.clearFilter();
        if (b.isLoaded()) {
          a.onMainMenuReady(c);
        } else {
          b.load({
            callback: function () {
              a.onMainMenuReady(c);
            },
          });
        }
      },
    });
  },
  onMainMenuReady: function (e) {
    var b = this,
      d = b.getNavigation(),
      a = Ext.getStore("MyMainMenuStore"),
      c = !1;
    a.filter([
      { property: "Active", value: "true" },
      {
        filterFn: function (a) {
          return a.get("View") != "WorkOrderSearch";
        },
      },
    ]);
    if (a.data.length == 1 && a.data.getAt(0).get("View") != "ProjectSearch") {
      c = !0;
    } else {
      if (a.data.length == 2 && a.findRecord("View", "Info")) {
        c = !0;
      }
    }
    a.clearFilter(!0);
    a.filter([{ property: "Active", value: "true" }]);
    if (c) {
      b.loadView(a.data.getAt(0), e);
      b.hideHome();
    } else {
      if (!d.getActiveItem()) {
        d.push(b.getHomePage());
      }
    }
    b.onLoadInfoMessage(c);
  },
  ensureSubPanel: function (e, b) {
    var f = this,
      a = "My" + e + "Panel",
      c = f.subpanels[a],
      d;
    if (!c) {
      if (!b) {
        var g = Ext.getStore("MyMainMenuStore");
        b = g.findRecord("View", e, 0, !1, !0, !0);
      }
      if (b) {
        d = b.get("Title");
      }
      c = Ext.create("widget." + a.toLowerCase(), { id: a, title: d });
      f.subpanels[a] = c;
    }
    return c;
  },
  onLoadInfoMessage: function (e) {
    if (haveRight("Info")) {
      var c = this,
        a = Ext.getStore("MyInfoMessageStore"),
        b = getUserSetting("LastInfoMessageId"),
        d = b ? parseInt(b, 10) : 0;
      a.meClearFilter();
      a.meAddFilter(["Id", ">", d]);
      a.meAddFilter(["UserId", "=", c.getApplication().getUserId()]);
      a.meAddFilter(["ShowInMobile", "=", !0]);
      a.load(function (a, d, b) {
        if (b && a.length > 0) {
          c.showInfoMessage(e);
        }
      });
    }
  },
  showInfoMessage: function (c) {
    var b = this,
      a = b.getNavigation(),
      d = b.getInfoMessagePanel();
    a.pop(a.getInnerItems().length - 1);
    a.push(d);
    if (!c) {
      b.showHome();
    }
  },
  onNavigation: function (a, b) {
    if (a.innerItems.length == 1) {
      this.hideHome();
    } else {
      this.showHome();
    }
  },
  onLoadFavorites: function (b) {
    var a = Ext.getStore("MyUserFavoriteListStore");
    if (!a.isLoaded()) {
      a.meAddFilter(["UserId", "=", b]);
      a.meAddFilter(["Disabled", "=", !1]);
      a.load();
    }
  },
});
function initOverlappingMarkerSpiderfier() {
  var b = !0,
    a = null,
    c = !1;
  (function () {
    var d,
      e = {}.hasOwnProperty,
      f = [].slice;
    if (((d = this.google) != a ? d.maps : void 0) != a) {
      this.OverlappingMarkerSpiderfier = (function () {
        function w(i, d) {
          var b,
            c,
            g,
            f,
            j = this;
          this.map = i;
          d == a && (d = {});
          for (b in d) {
            e.call(d, b) && ((c = d[b]), (this[b] = c));
          }
          this.e = new this.constructor.g(this.map);
          this.n();
          this.b = {};
          f = ["click", "zoom_changed", "maptypeid_changed"];
          c = 0;
          for (g = f.length; c < g; c++) {
            (b = f[c]),
              h.addListener(this.map, b, function () {
                return j.unspiderfy();
              });
          }
        }
        var h, j, k, i, g, d, l, m;
        d = w.prototype;
        m = [w, d];
        i = 0;
        for (g = m.length; i < g; i++) {
          (k = m[i]), (k.VERSION = "0.3.3");
        }
        j = google.maps;
        h = j.event;
        g = j.MapTypeId;
        l = 2 * Math.PI;
        d.keepSpiderfied = c;
        d.markersWontHide = c;
        d.markersWontMove = c;
        d.nearbyDistance = 20;
        d.circleSpiralSwitchover = 9;
        d.circleFootSeparation = 23;
        d.circleStartAngle = l / 12;
        d.spiralFootSeparation = 26;
        d.spiralLengthStart = 11;
        d.spiralLengthFactor = 4;
        d.spiderfiedZIndex = 1000;
        d.usualLegZIndex = 10;
        d.highlightedLegZIndex = 20;
        d.legWeight = 1.5;
        d.legColors = { usual: {}, highlighted: {} };
        i = d.legColors.usual;
        k = d.legColors.highlighted;
        i[g.HYBRID] = i[g.SATELLITE] = "#fff";
        k[g.HYBRID] = k[g.SATELLITE] = "#f00";
        i[g.TERRAIN] = i[g.ROADMAP] = "#444";
        k[g.TERRAIN] = k[g.ROADMAP] = "#f00";
        d.n = function () {
          this.a = [];
          this.j = [];
        };
        d.addMarker = function (d) {
          var e,
            f = this;
          if (d._oms != a) {
            return this;
          }
          d._oms = b;
          e = [
            h.addListener(d, "click", function (a) {
              return f.F(d, a);
            }),
          ];
          this.markersWontHide ||
            e.push(
              h.addListener(d, "visible_changed", function () {
                return f.o(d, c);
              })
            );
          this.markersWontMove ||
            e.push(
              h.addListener(d, "position_changed", function () {
                return f.o(d, b);
              })
            );
          this.j.push(e);
          this.a.push(d);
          return this;
        };
        d.o = function (b, c) {
          if (
            b._omsData != a &&
            (c || !b.getVisible()) &&
            !(this.s != a || this.t != a)
          ) {
            return this.unspiderfy(c ? b : a);
          }
        };
        d.getMarkers = function () {
          return this.a.slice(0);
        };
        d.removeMarker = function (d) {
          var b, f, e, c, g;
          d._omsData != a && this.unspiderfy();
          b = this.m(this.a, d);
          if (0 > b) {
            return this;
          }
          e = this.j.splice(b, 1)[0];
          c = 0;
          for (g = e.length; c < g; c++) {
            (f = e[c]), h.removeListener(f);
          }
          delete d._oms;
          this.a.splice(b, 1);
          return this;
        };
        d.clearMarkers = function () {
          var a, c, f, d, b, i, g, e;
          this.unspiderfy();
          e = this.a;
          a = d = 0;
          for (i = e.length; d < i; a = ++d) {
            f = e[a];
            c = this.j[a];
            b = 0;
            for (g = c.length; b < g; b++) {
              (a = c[b]), h.removeListener(a);
            }
            delete f._oms;
          }
          this.n();
          return this;
        };
        d.addListener = function (c, e) {
          var b, d;
          ((d = (b = this.b)[c]) != a ? d : (b[c] = [])).push(e);
          return this;
        };
        d.removeListener = function (b, c) {
          var a;
          a = this.m(this.b[b], c);
          0 > a || this.b[b].splice(a, 1);
          return this;
        };
        d.clearListeners = function (a) {
          this.b[a] = [];
          return this;
        };
        d.trigger = function () {
          var g, b, c, d, h, e;
          b = arguments[0];
          g = 2 <= arguments.length ? f.call(arguments, 1) : [];
          b = (c = this.b[b]) != a ? c : [];
          e = [];
          d = 0;
          for (h = b.length; d < h; d++) {
            (c = b[d]), e.push(c.apply(a, g));
          }
          return e;
        };
        d.u = function (b, f) {
          var a, g, e, c, d;
          e = (this.circleFootSeparation * (2 + b)) / l;
          g = l / b;
          d = [];
          for (a = c = 0; 0 <= b ? c < b : c > b; a = 0 <= b ? ++c : --c) {
            (a = this.circleStartAngle + a * g),
              d.push(new j.Point(f.x + e * Math.cos(a), f.y + e * Math.sin(a)));
          }
          return d;
        };
        d.v = function (e, g) {
          var a, d, c, b, f;
          c = this.spiralLengthStart;
          a = 0;
          f = [];
          for (d = b = 0; 0 <= e ? b < e : b > e; d = 0 <= e ? ++b : --b) {
            (a += this.spiralFootSeparation / c + 5.0e-4 * d),
              (d = new j.Point(g.x + c * Math.cos(a), g.y + c * Math.sin(a))),
              (c += (l * this.spiralLengthFactor) / a),
              f.push(d);
          }
          return f;
        };
        d.F = function (d, i) {
          var b, g, j, c, f, k, e, l, h;
          c = d._omsData != a;
          (!c || !this.keepSpiderfied) && this.unspiderfy();
          if (
            c ||
            this.map.getStreetView().getVisible() ||
            "GoogleEarthAPI" === this.map.getMapTypeId()
          ) {
            return this.trigger("click", d, i);
          }
          c = [];
          f = [];
          b = this.nearbyDistance;
          k = b * b;
          j = this.c(d.position);
          h = this.a;
          e = 0;
          for (l = h.length; e < l; e++) {
            (b = h[e]),
              b.map != a &&
                b.getVisible() &&
                ((g = this.c(b.position)),
                this.f(g, j) < k ? c.push({ A: b, p: g }) : f.push(b));
          }
          return 1 === c.length ? this.trigger("click", d, i) : this.G(c, f);
        };
        d.markersNearMarker = function (h, e) {
          var b, k, j, f, i, d, l, g, m, n;
          e == a && (e = c);
          if (this.e.getProjection() == a) {
            throw "Must wait for 'idle' event on map before calling markersNearMarker";
          }
          b = this.nearbyDistance;
          i = b * b;
          j = this.c(h.position);
          f = [];
          g = this.a;
          d = 0;
          for (l = g.length; d < l; d++) {
            if (((b = g[d]), !(b === h || b.map == a || !b.getVisible()))) {
              if (
                ((k = this.c(
                  (m = (n = b._omsData) != a ? n.l : void 0) != a
                    ? m
                    : b.position
                )),
                this.f(k, j) < i && (f.push(b), e))
              ) {
                break;
              }
            }
          }
          return f;
        };
        d.markersNearAnyOtherMarker = function () {
          var k, e, d, j, i, g, h, n, l, o, f, m;
          if (this.e.getProjection() == a) {
            throw "Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";
          }
          g = this.nearbyDistance;
          k = g * g;
          j = this.a;
          g = [];
          f = 0;
          for (d = j.length; f < d; f++) {
            (e = j[f]),
              g.push({
                q: this.c(
                  (h = (l = e._omsData) != a ? l.l : void 0) != a
                    ? h
                    : e.position
                ),
                d: c,
              });
          }
          f = this.a;
          e = h = 0;
          for (l = f.length; h < l; e = ++h) {
            if (
              ((d = f[e]), d.map != a && d.getVisible() && ((j = g[e]), !j.d))
            ) {
              m = this.a;
              d = n = 0;
              for (o = m.length; n < o; d = ++n) {
                if (
                  ((i = m[d]),
                  d !== e &&
                    i.map != a &&
                    i.getVisible() &&
                    ((i = g[d]), (!(d < e) || i.d) && this.f(j.q, i.q) < k))
                ) {
                  j.d = i.d = b;
                  break;
                }
              }
            }
          }
          f = this.a;
          d = [];
          k = h = 0;
          for (l = f.length; h < l; k = ++h) {
            (e = f[k]), g[k].d && d.push(e);
          }
          return d;
        };
        d.z = function (b) {
          var a = this;
          return {
            h: function () {
              return b._omsData.i.setOptions({
                strokeColor: a.legColors.highlighted[a.map.mapTypeId],
                zIndex: a.highlightedLegZIndex,
              });
            },
            k: function () {
              return b._omsData.i.setOptions({
                strokeColor: a.legColors.usual[a.map.mapTypeId],
                zIndex: a.usualLegZIndex,
              });
            },
          };
        };
        d.G = function (d, o) {
          var c, g, e, i, k, m, a, l, n, f;
          this.s = b;
          f = d.length;
          c = this.C(
            (function () {
              var a, c, b;
              b = [];
              a = 0;
              for (c = d.length; a < c; a++) {
                (l = d[a]), b.push(l.p);
              }
              return b;
            })()
          );
          i =
            f >= this.circleSpiralSwitchover
              ? this.v(f, c).reverse()
              : this.u(f, c);
          c = function () {
            var b,
              f,
              c,
              l = this;
            c = [];
            b = 0;
            for (f = i.length; b < f; b++) {
              (e = i[b]),
                (g = this.D(e)),
                (n = this.B(d, function (a) {
                  return l.f(a.p, e);
                })),
                (a = n.A),
                (m = new j.Polyline({
                  map: this.map,
                  path: [a.position, g],
                  strokeColor: this.legColors.usual[this.map.mapTypeId],
                  strokeWeight: this.legWeight,
                  zIndex: this.usualLegZIndex,
                })),
                (a._omsData = { l: a.position, i: m }),
                this.legColors.highlighted[this.map.mapTypeId] !==
                  this.legColors.usual[this.map.mapTypeId] &&
                  ((k = this.z(a)),
                  (a._omsData.w = {
                    h: h.addListener(a, "mouseover", k.h),
                    k: h.addListener(a, "mouseout", k.k),
                  })),
                a.setPosition(g),
                a.setZIndex(Math.round(this.spiderfiedZIndex + e.y)),
                c.push(a);
            }
            return c;
          }.call(this);
          delete this.s;
          this.r = b;
          return this.trigger("spiderfy", c, o);
        };
        d.unspiderfy = function (f) {
          var d, c, g, i, e, k, j;
          f == a && (f = a);
          if (this.r == a) {
            return this;
          }
          this.t = b;
          i = [];
          g = [];
          j = this.a;
          e = 0;
          for (k = j.length; e < k; e++) {
            (c = j[e]),
              c._omsData != a
                ? (c._omsData.i.setMap(a),
                  c !== f && c.setPosition(c._omsData.l),
                  c.setZIndex(a),
                  (d = c._omsData.w),
                  d != a && (h.removeListener(d.h), h.removeListener(d.k)),
                  delete c._omsData,
                  i.push(c))
                : g.push(c);
          }
          delete this.t;
          delete this.r;
          this.trigger("unspiderfy", i, g);
          return this;
        };
        d.f = function (c, d) {
          var a, b;
          a = c.x - d.x;
          b = c.y - d.y;
          return a * a + b * b;
        };
        d.C = function (a) {
          var e, c, d, b, f;
          b = c = d = 0;
          for (f = a.length; b < f; b++) {
            (e = a[b]), (c += e.x), (d += e.y);
          }
          a = a.length;
          return new j.Point(c / a, d / a);
        };
        d.c = function (a) {
          return this.e.getProjection().fromLatLngToDivPixel(a);
        };
        d.D = function (a) {
          return this.e.getProjection().fromDivPixelToLatLng(a);
        };
        d.B = function (e, i) {
          var c, g, d, b, f, h;
          d = f = 0;
          for (h = e.length; f < h; d = ++f) {
            if (
              ((b = e[d]),
              (b = i(b)),
              "undefined" === typeof c || c === a || b < g)
            ) {
              (g = b), (c = d);
            }
          }
          return e.splice(c, 1)[0];
        };
        d.m = function (c, e) {
          var b, g, d, f;
          if (c.indexOf != a) {
            return c.indexOf(e);
          }
          b = d = 0;
          for (f = c.length; d < f; b = ++d) {
            if (((g = c[b]), g === e)) {
              return b;
            }
          }
          return -1;
        };
        w.g = function (a) {
          return this.setMap(a);
        };
        w.g.prototype = new j.OverlayView();
        w.g.prototype.draw = function () {};
        return w;
      })();
    }
  }.call(this));
}
Ext.define("MEM.view.map.MyGmapPanel", {
  extend: Ext.Map,
  xtype: "mygmappanel",
  markers: [],
  useCurrentLocation: !1,
  statusbarId: null,
  trackBlue1Img:
    "data:image/jpg;base64,R0lGODlhFAAUAPf/AMfS5/D1/56//3qVzIuizx1i7Pv8/q7C62OY/JK2+9Pc7Xqi7Jqu1SZRqxQ/lIyz++nx/4eg1xNLu5605MDR81J5xoKd1C1y/BxRuy9VqRxb1xxi8HGU2nud4qq73M7g/7HM/kd95yRl6PH0+U9+3hVKthFT1jVcqgFEywtCsjdiuwY+sEJptR5Wxvn6/+7x+JWp0lOH7Bpd5CRh2zV3+yFStCFh4tPj/8PP6sTW/SVt/dzm/cTb/2qW626KxbTC3xQ5hRhX1CBc0u31/5e5+khstyldxOXs/g49mRpFmv///xREpF19vkFwzk2G8rXQ/4qu9BRAmbnS/GWS6qW87Nrq/yVp8UWC/eTx/9rh8FiP/HWRyE2J/RpLrJGn0unu9iJq+ylv+lqM7Pf6/xRSy/z9/h5g5g9Mxezy/hxf6BQ7iMjW9ICm7ZWu5PT4/83f/xZIrids9SNaypvA/yVq9jR2+Sht9fP2+vDz+RU9jgpGvRhNtt7p/hxd3xVGqg9GtJGp3SFKmzdp0CJp916K5BxGln6q/3GOyLrH4X6YyhhUzhpMsSFm8lOB3lJ2vzpnwx1OshhHpG2W5wwzhjhgrTJt48vf//j6/BdEnBxPtRhRwylWrylUqBdCmER12J2w1nen/zppx2aEvx9ZzPb5/xpIo4at/xRCn+Hp+yZp7kxywA8/nhdZ3RhAjyFWvhQ7i/r7/fb4+1B5zD5x1Yes7jl69py37ufs9SBOq+nw/iVs+vP4/yZQpEJnr7jO+xdHqWCN6EJnsEBqv0Z00enz/0l62FF91i9fvKbC+qbI/0mA7ajG//f5/A9Dpd7m+AFAuzBgwzVozxNZ5s/d+idh19zt/7C/3trh7y5m1O74/xA7kRVX29He+CtgzODm8vj+/9Xi9ilq6zlr0Cdbvy1Zs77Z/xM3gj915QhQ4GWQ5qbE9a/H9Nvi8d/m8v7+/xhf7CVv/yRr+jBYqV6Bxk5wtVV4vXag78zb+4Sj4KrI/yBXw+Tt/xhJs/P3/xQ8jv///yH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjA3NzkyQTVBQUU1MTFFMzlCMTZCQ0M0MkZBRkQ0NEQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjA3NzkyQTZBQUU1MTFFMzlCMTZCQ0M0MkZBRkQ0NEQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpGMDc3OTJBM0FBRTUxMUUzOUIxNkJDQzQyRkFGRDQ0RCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpGMDc3OTJBNEFBRTUxMUUzOUIxNkJDQzQyRkFGRDQ0RCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkyAP8ALAAAAAAUABQAAAj/AP8JHEiwoEGDDOhlyEDvoEEfp/YIKlZM3J5IAxz+k8ePkAAQT57kM3UuxYmDGTAkeLODD58bb3Ik4CJBXkECfxLsC9AvAKo1VDpMuUIjBQGCS8TcIEXKhZsDjjbtUWQjjI1IBPfoHOMmAJo2gfxF+dVCRJgUA3sJWgbBRT80zgYEAqLGQZcZccgUEZjBE4gj/XYcsECplRq6pYTECXLyX18QfNDYesSpUJ7Dr0qNshKEk8Be0Zbd2IFvESZMDi7n6SLEypmsD3Lc67AoioPbDjBhmGFlBaKBS0IkAJFOk59Tp5bAwdC6j+eBBFJwMWVvhiJNmhQFsWGFzgqD8iRoMjFUJ435Aox00NFD6eCJP5XqhNFBP56MFaI0Doj0R5GGIGSk8JxGA9Ejzwn5EaigQQEBACH5BAkKAP8ALAAAAAAUABQAAAj7AP8JHEiwoMGDCBMKJFCkQYMiCgcm+gWtUQ9JjYz4IZCQSQlJTz58eMNDQIgSog56KfEAyxA0ufjkQAaq1p+DNXoQM+DCxRoLFaJVoiFik0EjT8a42NVvAi9tqyTYuHDmE0EWJCwpDZArQiEgrzC1iLMN4sAGUz64QUMBULBWaoDkwZDKTAOCDdJZCrBGVoMkeeK2yiTC7lUSPI4cOLYKkwN/ajrRNXGooJE5H2wZWeWgc6cuQuI8M9ggxBwo2CT48VMCQ2gZuAzCSOHkgTJWQYL0KaCD0c2DokqEuBIGDBgd8NKkSKTwl6Y+hVnpMRrxn5eGm5hU3849YUAAIfkECQoA/wAsAAAAABQAFAAACNEA/wkcSLCgwYMIEypc+M+Hiho1VBximCiTMTZEiLDxtIhAQgIYaFUhRrJKMicSEtaA8k2JC2cHOgDjYqXGwQHFqikZ4+IApVN/NFwIksigigXZyrgJAKjQJG1dRBRQYRBSgiFjuE2g1woIEEwzBv2pevUIhwZJ8qj5KoRRCaP2sEyTtSqKg1evSs2QVuHgrCe+hjVzECVKJH1xUBwEkCnGnBhkJEjQpMHOBjgJJYhBEGdDgUHwNkhg8HERNSu6wGwwYZPhFhUl9ghjSLu27doBAQAh+QQJCgD/ACwAAAAAFAAUAAAIrwD/CRxIsKDBgwgTKlzIECEMVY+GDQuliuGAcWykfLghZYorAgpdqfumZAS4dYZqSUhYYYESJWVw1Nsk50KaCghDSVHiYsyEQpOQjBokB2ETS0pQHajXyhwQSHEUGX3jrg25JHmAqIGUSurBUCCIcWjmwMGrPPredUNYAVg5SSVWnVqCIRy6eQklIAAlQpGiProGrUxowVWIC/B0gHmHoaEqOUEUyanYsLLly5gXBgQAIfkECQoA/wAsAAAAABQAFAAACNEA/wkcSLCgwYMIEypc+M+Hiho1VBximCiTMTZEiLDxtIhAQgIYaFUhRrJKMicSEtaA8k2JC2cHOgDjYqXGwQHFqikZ4+IApVN/NFwIksigigXZyrgJAKjQJG1dRBRQYRBSgiFjuE2g1woIEEwzBv2pevUIhwZJ8qj5KoRRCaP2sEyTtSqKg1evSs2QVuHgrCe+hjVzECVKJH1xUBwEkCnGnBhkJEjQpMHOBjgJJYhBEGdDgUHwNkhg8HERNSu6wGwwYZPhFhUl9ghjSLu27doBAQAh+QQJCgD/ACwAAAAAFAAUAAAI+wD/CRxIsKDBgwgTCiRQpEGDIgoHJvoFrVEPSY2M+CGQkEkJSU8+fHjDQ0CIEqIOeinxAMsQNLn45EAGqtafgzV6EDPgwsUaCxWiVaIhYpNBI0/GuNjVbwIvbask2Lhw5hNBFiQsKQ2QK0IhIK8wtYizDeLABlM+uEFDAVCwVmqA5MGQykwDgg3SWQqwRlaDJHnitsokwu5VEjyOHDi2CpMDf2o60TVxqKCROR9sGVnloHOnLkLiPDPYIMQcKNgk+PFTAkNoGbgMwkjh5IEyVkGC9Cmgg9HNg6JKhLgSBgwYHfDSpEik8JemPoVZ6TEa8Z+XhpuYVN/OPWFAADs=",
  config: { mapOptions: { zoom: 12 } },
  pins: {
    "000000":
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAABXklEQVRIia3VP0vDQBjH8W9OKhicxT8vQYTi5CBOvgrfgVDo23BscfENdBA3oZvQxalbBSludVARxSW2QpTokOekiebumrsfPByBy4fnLsklwpxtYB/YAhSQAQ/ANXBrufdPDoEh8G2oocyzJgJOpCMTqCuT+ZEJ7Dhi5epUwe2aoK52GdwEpp7oVByUoMdAXLUvjonF+c3Is0tdI8g3dwmYAcuenQKkQKyARiAQcRrKOq1GFHnLaSAvBVL9PY8DoWMg08u/DIQWnA0gwe91SsQppOWJtqra79YEu6Y9iYDeguA5hqNPZwW4cQTvgFUbqNMEPh3QA1dQ59QCXiwKAqyRHzT/gRmwUwcFOKtAr+qCALsV6JEPCvkTngdnWJ64y9HXL10PgHdfdFC69tpPnXWKy98LgQK8CPhF/sUZ4/o7mch4D3yEQl/nUGtc0TcZk5Dos4yPIdEnGScuk38ATj3qJoebBh4AAAAASUVORK5CYII=",
    "000080":
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAACcUlEQVRIia3VS0hUURzH8c+MliiEEkGvhVAZUViLoIxsFxgtXLaJWtWiVYsgaBe1CNoEtTBaBNUiCDcJLYQeEEVpET2ptMKh0l5kYmn4ui3OnZr03nEUf3C5c/739//OOef+/+dmFNc6NGI5spjAR9zBi2lyp2g7OhFRHbE6Yn18r45CXGfsm6JMwvgEmcOsy7AVSxJsfbiLFxHRSRyJ/wiUTQKeouIQuzJsw4IEoDi+FkszdDcyXoP2JOhByo+yByuSVpWgRajFswYm+tGRnx0sQzdNVWwpEVioe2gfQh16s3H0ADVVbJoFkJBXUxU4oUygmQ3+342ZqEzI15yHlmFN2Js0fRBKc6iIp1bgKMtiHuZTnWIewWVcxxmMpfiqBY552RRHgb7jV/x7HKPTZmTjqYzwI8WyBDuwGE2oTPH9kGeVC/38ktwGVqYkNMRXMeUEjon88tt4IixvNhoX8rXxr6RaGPjJ/VlCO4R8LfwrzJ8YJLczlEbNDIA5XMXEIdwshEIn0UJebg57u6AEYB8uYfQ0juWjk1uonfE6uuqpR0UR4BAu4NcV7Ct8knSuVaKDVfXsTrFAK553YaOwfX+VVPzD2MubMZ6lAN/hOeyfDEyDwmOc5YapbRkJca24nZRcrE2PMzDM00nhHnyMFLyYmUC/4GL4vhXqIaF00vamKBTO8Qmf4+FvvIbzxZKmgz5CF6/i4VuMDYvbcbZQuBZgeahbEt74TKG36BUOjR7CaV1UpUAfhLJ6j37Cp3NO9JWGSKCnndJ/VcpMoSc+hHNCx80J9Fu89Fwp5lKh30ONGpxLaL76e+cS2hffe0ox/wFUHKSNWPmJ1wAAAABJRU5ErkJggg==",
    "0000ff":
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAACIUlEQVRIia3Vz4tNYRzH8de9GkahKGI0w8JOIgtZyMrCAksk+QvUsJ4VNiQiG2XLQnZkw+RXU4pMKIuZqJmFkWYS+TlD92vxnNPVdc+5d+7cT317Tud8vu/O8zzf5/tUlGszdmE9qqjhPUbwpkXuf9qDZwgGgn3B0WwciPTes8zXUhWcpVLjcDAa1IJoiNFI3yu15FcpA15ieXCnCahZ3I7kd6kIPEhvMNImMI+RSHkGG4F9+M6FeQLzuBgpX9+/0DNsCOY6hM4FGyNxUpnAAY6hp53NbKIeKd+B/M0izDJc8idPg7PBdIlnOBLHIuhFMF5g/haszmpzZfCzwDee129vtT6FKJjaW0xnz7/xo8BXz69iLsVkgXmrVIZbcBGrCnyT6qyklwx1uPN5DEXi1HWa/mB2ASXVH4lT1zp85VyH0POR8q1rXJTjLA4ezRP4OFgSKb+5LqcG8bxN4ItgRaS8YlVwg75gqgVwJl/Hm0paX66leM3eaN5L8zgUGMOyVsBc2/Cb6wXA+/np2d0uMNeVNL1fDcBasCNwa75AWIMfXGuAPgjpAtzSCRSusrUBejAw3CkQtiN4lQE/R3Z1HFkIFMY4lUFvhtSmSne8WvYx013uZ4/34CG+Leg3sT8dw9lgU+DkQoGwFllPqAR2dgMK05wI/JFOXKnaWVOY4Ampvf/sFnSGdzm0pdqFfuILqRF3DfoxG6e6Cf2QjRPtmP8CML8GRX2jyM4AAAAASUVORK5CYII=",
    "00ff00":
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAACJklEQVRIia3VzUuUURTH8c9MWAYZFBRlaC3ahRQtokW0ctGiWpZE+BcI1tpVtjEiUdoEbWsh7Yo2Kb0hBEViQQulwBYZoUShZk4xp8XzPGLqM46jv8PDvXDP+T735dxzCyrrCE7hAIoo4wuG8WGN2BVqxWuEZuGscDltmwUiHW+tBlZAj4KyNmFEKIsVNiK0CQVl9KRxucA+DcKjVUCr2UOhQaAvD9ypXhiuEpjZsFAv0Lkc2Ig5t9YJzKxXYC7lLOq6g0KpRmhJOCRwnSRN4Lx21FVzlquoDu0pJ9UWLBiqMJNXQo8wVcFnSGAh5alHGM9xnhX2SHJzlzCf4zcuy9/64uISImdpHzGV9v/gV47fkvgiSij5nON8VJKFLejF7hy/JL6UfmBUV40nn1mXwOjS/3RrEhY2kFJNAt1Lofsx40aN0JsCMynnP3XYKjxfJ/CFsE2gI2e39WsQ3lQJfCvsFOjPA5JUmvsahck1gNOL+zigQunLtB3vnbF6Lc3sosAYdqwFzHQMf9zLAQ7Kbs/paoGZbmsSfi8DloUTAg/WC4S9+OXuMuhTIXkAW2qBwh1Hl0EvCAzVCoTjCO9S4A/Z03FpI1AYcy2FDghJnap44sVKg6keG0x7T8AzzG5klnDONkmxOSxwdaNA2IekJhQETm4GFKZcEfgruXEVVc2ewoSXSOr7/GZBp31ahK6paqHf/URSiDcN+i1tJzcT+jVtJ6px/gcIPwZFu/CRHQAAAABJRU5ErkJggg==",
    "00ffff":
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAClUlEQVRIia3Vz2tUZxTG8c9NiZlCR1SwtCmjLlwIJaYElC5K3HThpl1q6CJ/gSDdNjuFYhBDxE3BrV0UNyHShaZYhVkIwcEEuuhgoApNWxxKxJjECZ3TxZ0bMu2dyWTiA4f3vfee833P++OeN9FZH+MzfIQ+NPA7yvilXVDS5v3n+BanHDnCyZMcOMDKCouLPH8O8/gGP+2QmARXJEnD2FioVEKjESJarVIJY2MhSRq40iE5CaYVi+HOnf+D8mx2NhSLgel24IsKhVAudwfMrFwOhULg4n+Bg3jt2rXdATObmgq8bnK2dNnRo6Fe7w1ar4djxwKXSY8JfGl8nP7+nTYyX/39jI+nnCb0HZxw5kz7oEePmJykVmvvMzoKJ5o8BYRqNX9qq6vh8OFAOHgwrK/n+1WrqQ+Fvq2RIvIzePqUFy/S/uYma2v5ftvi+1BH3bNn+c7Dw0xPMzTE1BSHDuX7pfH1poEnJiZ62/nMJiYCT7aPc0mpFN686f1IlUqBS9uhH+KVycneoFevBl41OS26YN++8ODB7oAPH4aBgcCF/MXmumIxzM93B3z8OOzfH7jeDkhaab43OBiWlzsDa7VsHX/QofRleheLzp7Nr6WZnT8f+BXv7QTM9Ak23bqVD5yby/6e0W6BmW4olcLGRiuw0QinTwdu7xYI72PNzZut0Pv3Q3oBDvUChe8MD7dCz50LXVx2nTSCsLCQAldWsqvjq05BfZ0+ooKqmZn06e5dNjbWMbsXKPxobi7t3bsHP2O1i7iO+sLAQFpsjh8PfL1XIHyAtCYkSeDTnQK6mf6fqJmZIeIfLOwxyS3NGxkJLHXj3E2mULO0BG3unN6gf3v5krQQvzXoX812+W1C/2i2v3Xj/C9A4a/GDykkZQAAAABJRU5ErkJggg==",
    ff0000:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAACL0lEQVRIia3Vv2sTYRjA8e9FaiMYQUHRSqqDm0jFQRzEycFBHbWI9C8oVOdOtktELC0ugqsOxa3FxQZ/ERAqlio4tCi0gxVJESVtalK5x+F5roln3rvLJQ88vEfyvJ88d/e+bzyi4yRwHjgKZAAf+AqUgE8xc/+Li8A8IP0gl0Fu2tgPgua81cWGBxQ88AdBFkB8EAnlAsggiKedF2yeE5zMgcy2gFrlDEhOu550wSNZkFJCMMgSSFbhkTDYB2zebxMMckLRTXN2YvwYSD0lWgc5rvA46DIBuDoE9CR5lS2iBxgyJ/hsF1ArRnTyFqQAUo6oKWqnNfPIArLsKN4AOWhrcz/IlqNuubF+s8HtI45b+wyU7XobqDrqmudngDpQX3UUD6CL8BQwARxw1Nn8uiUAi6Mp33yQo9rsYvMPjeVBah0sqbyiY83oEaByNyV6T8GKOf/E8G6QV22Cr0F6FR12PG6mciDvEoLvQfYpOOUCQU+aJ30gazHgeuM5ThNx9AWxB/h4idZnaZDXFVwC9saBQZwGth87wLnG7rmQFAziQR7kdwj0Qc4q+LRdEOAQUH0UQl8o6KObLFU8HAih1xQtpgUBzgDywcCf7Px13OgEBVi6Y+i0glVi3ngm6kuLZ3N28VyHl8BGB00CcKXXDpsT2untTkGAw9iZ4Cl6rhsoQPmWgn/QHRcZSZ4pwMobHVeBrW6h618aaGwkRX/80rHSTfS7jWvdRL/ZuJKk+C/fsAZFF0H4NwAAAABJRU5ErkJggg==",
    ff00ff:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAClUlEQVRIia3Vz2tUZxTG8c9NiZlCR1RQ2pRRFy6EElMClS5K3HThpi41dJG/QJBum51CMYgh0k3BrV0UNyHShabYCLMQgoMJdNFBoQpNWxxKxJgfEzqni5krmfbO5GbiA4cX7j3ne8953/eek+iuj/AZPkQfGvgdZfzSKSjp8PxzfINPjjrqlFMOOGDFiiVLnnsOC/gaP+2QmARXE0ljzFhUVKKhESHarKISY8YikTRwtUtyEkwXFeOOO/8DZdms2SgqBqY7gS8VFKKsnAuYWlk5CgqBS/8FDuL1ddd3BUxtylTgdYvzRleOORZ19Z6gdfU47njgCs1rAufGjevXv9NBZqpfv3HjcC6FvoOTZ5zpGPTQQ5Mm1dQ6+owahZMtngKiqppZ2qrVOOxwIA46GOvWM/2qqoFAIS1fiMwMnnjihRdgy5Y1a5l+2+P7UEf9mWeZzsOGTZs2ZMiUKYccyvRrxddbBh5PmOjp5FObMBF4vP1Dl0tKsWmz5ytVUgpc3g79AK8mTfYEveZa4FWL06aL++yLefO7Aj7wIAYMBC5mbjZuFBVjwUIu4COPYr/9gRudgDQ7zfeDBmPZcldgTS3dxx90aX2p3sXSWWcze2lqF1wI/Ir3dgKm+hhbt9zKBM6ZS/+e0bzAVN+WlGLDRhuwoRGnnQ7c3i0QjmDtpptt0Pvuh+YAHOoFCt8NG26Dnnc+5Bh23TSCWLQYIWLFSjo6vuwW1NftJSqozpgBd921YWMds3uBwo9z5sA99+BnrOaI66ovBgzEps044UTgq70C4X3EvPlIJIFPdwrIU/6fqM2YEeIfLO4xyTdaGDESeJrHOU+mUHva5GXPnB6hf7/0kmYjfmvQv1rr8tuE/tFaf8vj/C8OLK/Gx08imgAAAABJRU5ErkJggg==",
    ffa500:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAC90lEQVRIia3VXWiVdQDH8c/ZOGZWkC4hF81d1aSk1k270EWwUmJ4ay826MULyVghSKsuooJUqDQKZRcVK0aTgtKCuSx1iqxpK6exIS6mI0PdSWxr79vTxXMOns3nvGzsd/N/+/2+D//n/xaTXfdhFe5CAabwF47hjxzZG1SFdgQlRYLqcsGGVWFZUiRAkByvigrHItrvxWK2rq8Q21rNg8uJzXD91suO72lqEwSBHahLfugGaAwf3rZQbeNmqstzT2d/B898wsCIXXg1BS5M89QujHurpY6q+3MD4d5lVK6g8biKiSlX8Us6tBjfbX9KfH1FfsCUSoq45SYOdKrE5xgoSI5tWn6HRS+vmR0wpc2PU7rUImwi3CawrmY18cLMwWyKF1KzOuSkoIUoe2RF5lDbObbvp38gs6eyDJShsABxLCgpijb/N8q693ntK+7Zwsh4tC+ZX4B4avqCINp87hJX/g3r45MMjUb70vMFGMPY+f5o8wMl7HyWlXfzwQaW3BrtS+bHMJY6z11HuqPNULuWzm1sfDSzJ5nvwlRq+vsajjI2kTmUTeOTNBwNOVzfUrv7EgZ3Ns8NuquZvoRB7Ob6iRrEQGu3JyrLKF2aP7C1m+fqmZyyBT+nQ6F9csqSb9o9/NhKihfnBnb0smYbQ6M+wtup/qir78vixZ4++S7Lbs8MTAxS/jp9CXvxpLSrr2CGN8CLF686/Xx95r0LL31GX8JZvJAOjILCMGqaT5loPB4NPHiGpjawUbge0xQFhd+xp66J0RnHMgh4Yy/4Gq1R4UxQeKcvYfiLY9M7D3fR3iOQtjCzgV5Gw8ct0zv3/IRw65yeCxTqT12g80LYuDbEvl/Bp9lCuaAdOPvtybBxoJORccOSx3GuUPjhxzNhpSWc8CERKz5b6KETf4aXzZEucDCPTE7dieDwm4JYTIBZvreZdeWVtQJM4Ob5gp54qFSAnnzM+fxT6O+5DM7PJ/Sfa0MgyyM9e+ilZHlxPqF/J8vefMz/A0Yh8xcuK43JAAAAAElFTkSuQmCC",
    ffff00:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAClElEQVRIia3Vz2sUdxjH8dekxGyhKypY2pRVDx6EElMClR5KvPTgpT1q6CF/gSC9NjeFYhBDxEvBqz2UXkKkB02xCnsQgosJ9NBFoQpNW1xKxJjEDd2nh9lZsu3sZrPxAw/znZnnec/z/THPk+iuD/EpPsAAGvgdZfzSKSjp8PwzfIOPjxzh5EkOHGB1leVlnj0Di/gaP+2QmASXk0RjYkJUKqLREBHtVqmIiQmRJBq43CU5CWaLRXHr1v9BeTY/L4pFgdlO4AuFgiiXewNmVi6LQkHgwn+Bw3h19erugJnNzAi8anJaunT0qKjX+4PW6+LYMYFLpMcEvpicZHBwp33M1+Agk5MpJ4O+hROnT3cOevCA6Wlqtc4+4+PgRJOngKhW86e2tiYOHxaIgwfFxka+X7Wa+qCQTV9EfgaPH/P8eTre2mJ9Pd9ve/wA6qg/fZrvPDrK7CwjI8zMcOhQvl8zvt408Ghqqr+dz2xqSuDR9g9dLJXE69f9H6lSSeDiduj7eDk93R/0yhWBl01Om87v2yfu3dsd8P59MTQkcD5/tblWLIrFxd6ADx+K/fsFrnUCklaa74aHxcpKd2Ct1lrH73UpfZnexvKZM/m1NLNz5wR+xTs7ATN9hK2bN/OBCwutv2e8V2Cm66WS2NxsBzYa4tQpgR92C4R3sX7jRjv07l0hbYAj/UDh29HRdujZs0IPza6bxhBLSylwdbXVOr7sFjTQ7SUqqM7NpTe3b7O5aQPze4HCjwsL6eDOHfAz1nqI66rPh4bSYnP8uMBXewXCe6Q1IUkEPtkpoJfp/4na3BwR/sHSHpNsaXFsTOBJL869ZAq1JymuQ9PpD/r3ixdIC/Ebg/7VvK68SegfzetvvTj/C9tor8YjUmXCAAAAAElFTkSuQmCC",
    ffffff:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAiCAYAAACwaJKDAAAABmJLR0QA/wD/AP+gvaeTAAAC3UlEQVRIia2Vv0sbYRiAn7PEpNATFSxtyqmDg1A0JVDpUOLSwaWOGjrkLxCka7MpFIMYUroUXO1QugSlg6bYCBmEYDCBDg0GqlDbYigRfyS50Hs7JCdqL8kZfeD44O59n3u/77v7XoXGPASeAg+ANsAAfgAJ4Gu9JKXO/WfAa+Bxb28vw8PDdHZ2UigUyGQy7O3tASSBV8DnJoWhAHOKohh+v19SqZQYhiGXSaVS4vf7RVEUA5hrUBwKEFFVVVZWVv4TWbG8vCyqqgoQqSeedrlckkgkbAlNEomEuFwuAaYvC93AycLCwpWEJuFwWICTmueM2b6+PtF1vSWpruvS398vwCxUPxOA8UAggMPhaLaRljgcDgKBAMC4Kb0FDI6OjtZN2tzcJBQKkc/n68b4fD6AwZoPFyDZbNZyasfHx9LT0yOAdHV1SbFYtIzLZrMCCOAyp4+IWFaws7PDwcEBAJVKhdPTU8u48/ltgA7ou7u7lsEej4dIJMLQ0BDhcJju7m7LuFq+XrsA2A4Ggy3tvEkwGBRg+/yLZjRNk3K53JJQ13XRNE2AmfPS+8BRKBRqSTo/Py/AUc1zgan29naJx+NXEm5sbIjT6RRgynKxgTeqqkoymbQl3Nrako6ODgHe1BNC9aR573a7ZX9/v6Ewn8+b6/iBBkefyW0gMzY2ZnmWmkxOTgrwDbjTTGjyCKgsLS1ZCmOxmPn3+OwKTd5qmialUumC0DAMGRkZEeDjVYUAd4HTxcXFC9L19XWh2gCHWpECvPN4PBekExMTgo1m1wgvIOl0WkRECoWC2TpeNEpqa/QQSAHZaDQKwOrqKqVSqQgsX0cK8CkWiwGwtrYG8AU4tpHXkOdOp1PK5bIMDAwI8PK6QoB7gMTjcVEURYAnzRLsTP8XkI9Go4jIXyB9zSLPSHq9XgFydoLtVAqQz+VyANY9p0Xpn8PDQ6gexDcm/V0b929S+rM2frcT/A8+uH0RPNsCBAAAAABJRU5ErkJggg==",
  },
  availablePins: {},
  constructor: function (a) {
    this.callParent(arguments);
    if (a.statusbarId) {
      this.statusbarId = a.statusbarId;
    }
    console.log("MyGmapPanel.constructor(", arguments, ")");
    this.on("painted", this.onPaint);
    this.on("erased", this.onErase);
  },
  initialize: function () {
    console.log("MyGmapPanel.initialize(", arguments, ")");
  },
  onPaint: function () {
    var a = this;
    if (!a.intervalId && a.intervalFn) {
      a.intervalId = navigator.geolocation.watchPosition(
        function (b) {
          if (b) {
            a.updateMe({ lat: b.coords.latitude, lng: b.coords.longitude });
          }
        },
        function () {},
        { enableHighAccuracy: !0 }
      );
    }
  },
  onErase: function () {
    var a = this;
    if (a.intervalId) {
      navigator.geolocation.clearWatch(a.intervalId);
      a.intervalId = null;
    }
  },
  clearMarkers: function (b) {
    var a = this;
    var c;
    if (a.overlapspider) {
      a.overlapspider.clearMarkers();
    }
    if (a.markers) {
      while ((c = a.markers.pop())) {
        c.setMap(null);
      }
    }
    if (!b && a.me_mymarker && a.me_mymarker.setMap) {
      a.me_mymarker.setMap(null);
      delete a.me_mymarker;
      a.me_mymarker = null;
    }
    if (!b && a.intervalId) {
      clearInterval(a.intervalId);
      a.intervalFn = null;
    }
  },
  updateMe: function (b, c) {
    if (b && b.getLatitude) {
      b.lat = b.getLatitude();
      b.lng = b.getLongitude();
    }
    var a = this;
    var e;
    if (!a.me_mymarker) {
      var d = b ? !0 : !1;
      a.me_mymarker = { title: "Me", color: "dd00dd" };
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (d) {
            if (d) {
              a.updateMe({ lat: d.coords.latitude, lng: d.coords.longitude });
            }
          },
          function () {},
          { enableHighAccuracy: !0 }
        );
        a.intervalFn = function () {
          navigator.geolocation.getCurrentPosition(
            function (d) {
              if (d) {
                a.updateMe({ lat: d.coords.latitude, lng: d.coords.longitude });
                if (0 && a.statusbarId) {
                  if (d.coords.speed != null) {
                    Ext.getCmp(a.statusbarId).setHtml(
                      '<div style="margin:20%;width:auto">speed = ' +
                        d.coords.speed +
                        "</div>"
                    );
                  } else {
                    Ext.getCmp(a.statusbarId).setHtml(
                      '<div style="margin:20%;width:auto">speed = unknown</div>'
                    );
                  }
                }
              }
            },
            function () {},
            {}
          );
        };
        a.intervalId = navigator.geolocation.watchPosition(
          function (d) {
            if (d) {
              a.updateMe({ lat: d.coords.latitude, lng: d.coords.longitude });
            }
          },
          function () {},
          { enableHighAccuracy: !0 }
        );
      } else {
        console.log("no navigator.geolocation");
      }
      return;
    }
    if (!b) {
      return;
    }
    if (!a.me_mymarker.setMap) {
      a.me_mymarker.position = new google.maps.LatLng(b.lat, b.lng);
      a.me_mymarker.icon = new google.maps.MarkerImage(a.trackBlue1Img);
      a.me_mymarker.optimized = !1;
      a.me_mymarker = new google.maps.Marker(a.me_mymarker);
      a.me_mymarker.setMap(a.getMap());
      if (a.latLngBound && !c) {
        a.latLngBound.extend(a.me_mymarker.position);
        a.getMap().fitBounds(a.latLngBound);
      }
      return;
    }
    a.me_mymarker.setPosition(new google.maps.LatLng(b.lat, b.lng));
    if (a.me_center_on_me) {
      a.getMap().setCenter(new google.maps.LatLng(b.lat, b.lng));
    }
  },
  toggleCenter: function (b) {
    var a = this;
    if (b === undefined) {
      a.me_center_on_me = !a.me_center_on_me;
    } else {
      a.me_center_on_me = !!b;
    }
    if (a.me_center_on_me && a.me_mymarker && a.me_mymarker.setMap) {
      var c = a.me_mymarker.getPosition();
      a.updateMe({ lat: c.lat(), lng: c.lng() });
    }
  },
  addMarker: function (a) {
    var c = this;
    a = Ext.apply({}, a);
    if (!c.overlapspider) {
      c.overlapspider = new OverlappingMarkerSpiderfier(c.getMap());
      c.overlapspider.addListener("click", function (b) {
        b.me_markerclick(b);
      });
    }
    if (!a.position) {
      a.position = new google.maps.LatLng(a.lat, a.lng);
    }
    if (a.color && !a.icon) {
      var b = a.color.replace("#", "");
      var e = b;
      if (b.length == 6) {
        var f = parseInt(b.substr(0, 2), 16),
          g = parseInt(b.substr(2, 2), 16),
          h = parseInt(b.substr(4, 2), 16);
        if (isNaN(f) || isNaN(g) || isNaN(h)) {
          e = "ffffff";
        } else {
          var i = function (b) {
            b = parseInt((b + 25) / 51);
            return ["00", "33", "66", "99", "cc", "ff"][b];
          };
          f = i(f);
          g = i(g);
          h = i(h);
          e = f + g + h;
        }
      } else {
        e = "ffffff";
      }
      if (b in c.pins) {
        a.icon = new google.maps.MarkerImage(c.pins[b]);
      } else {
        if ("all" in c.availablePins) {
          a.icon = new google.maps.MarkerImage(c.availablePins["all"] + b);
        } else {
          if (b in c.availablePins) {
            a.icon = new google.maps.MarkerImage(
              "resources/images/map/pin-" + b + ".png"
            );
          } else {
            console.log("getting google image", b);
            a.icon = new google.maps.MarkerImage("/pins/" + e + ".png");
          }
        }
      }
    }
    var d = new google.maps.Marker(a);
    d.setMap(this.getMap());
    c.overlapspider.addMarker(d);
    d.me_markerclick = a.listeners.click;
    c.markers.push(d);
    return d;
  },
  finalize: function (b) {
    var a = this,
      e = this,
      d;
    if (!b) {
      a.latLngBound = new google.maps.LatLngBounds();
      for (var c = 0; c < a.markers.length; c++) {
        a.latLngBound.extend(a.markers[c].position);
      }
    }
    a.updateMe(null, b);
    if (!b) {
      a.getMap().fitBounds(a.latLngBound);
    }
  },
});
CoordinateConverter = (function () {
  var b = function (a) {
    return 0.5 * (Math.exp(a) - Math.exp(-a));
  };
  var a = function (a) {
    return 0.5 * (Math.exp(a) + Math.exp(-a));
  };
  var j = function (a) {
    return 0.5 * Math.log((1 + a) / (1 - a));
  };
  var d = Math.PI / 180;
  var c = {
    sweref99: {
      axis: 6378137,
      f: 1 / 298.257222101,
      centralmeridian: 15,
      latorig: 0,
      scale: 0.9996,
      x0: 0,
      y0: 500000,
    },
    rt90: {
      axis: 6378137,
      f: 1 / 298.257222101,
      centralmeridian: 15.806284529444445,
      latorig: 0,
      scale: 1.00000561024,
      x0: -667.711,
      y0: 1500064.274,
    },
  };
  var e = function (a) {
    a.e2 = a.f * (2 - a.f);
    a.n = a.f / (2 - a.f);
    a.atop =
      (a.axis / (1 + a.n)) *
      (1 + (a.n * a.n) / 4 + (a.n * a.n * a.n * a.n) / 64);
  };
  for (var k in c) {
    e(c[k]);
  }
  var h = function (b, a) {
    if (!b || !c[b]) {
      Ext.Error.raise("Coordinate System is required.");
    }
    if (!a || !a.lat || !a.lon) {
      Ext.Error.raise("coordinates missing.  {lat:###,lon:###}");
    }
    return f(c[b], a);
  };
  var i = function (b, a) {
    if (!b || !c[b]) {
      Ext.Error.raise("Coordinate System is required.");
    }
    if (!a || !a.x || !a.y) {
      Ext.Error.raise("coordinates missing.  {x:###,y:###}");
    }
    return g(c[b], a);
  };
  var f = function (c, k) {
    var r = k.lat;
    var s = k.lon;
    var t = c.e2;
    var u = (5 * c.e2 * c.e2 - c.e2 * c.e2 * c.e2) / 6;
    var v = (104 * c.e2 * c.e2 * c.e2 - 45 * c.e2 * c.e2 * c.e2 * c.e2) / 120;
    var w = (1237 * c.e2 * c.e2 * c.e2 * c.e2) / 1260;
    var l =
      c.n / 2 -
      (2 * c.n * c.n) / 3 +
      (5 * c.n * c.n * c.n) / 16 +
      (41 * c.n * c.n * c.n * c.n) / 180;
    var m =
      (13 * c.n * c.n) / 48 -
      (3 * c.n * c.n * c.n) / 5 +
      (557 * c.n * c.n * c.n * c.n) / 1440;
    var n = (61 * c.n * c.n * c.n) / 240 - (103 * c.n * c.n * c.n * c.n) / 140;
    var o = (49561 * c.n * c.n * c.n * c.n) / 161280;
    var g = r * d;
    var q = s * d;
    var p = c.centralmeridian * d;
    var i =
      g -
      Math.sin(g) *
        Math.cos(g) *
        (t +
          u * Math.pow(Math.sin(g), 2) +
          v * Math.pow(Math.sin(g), 4) +
          w * Math.pow(Math.sin(g), 6));
    var h = q - p;
    var f = Math.atan(Math.tan(i) / Math.cos(h));
    var e = j(Math.cos(i) * Math.sin(h));
    var x =
      c.scale *
        c.atop *
        (f +
          l * Math.sin(2 * f) * a(2 * e) +
          m * Math.sin(4 * f) * a(4 * e) +
          n * Math.sin(6 * f) * a(6 * e) +
          o * Math.sin(8 * f) * a(8 * e)) +
      c.x0;
    var y =
      c.scale *
        c.atop *
        (e +
          l * Math.cos(2 * f) * b(2 * e) +
          m * Math.cos(4 * f) * b(4 * e) +
          n * Math.cos(6 * f) * b(6 * e) +
          o * Math.cos(8 * f) * b(8 * e)) +
      c.y0;
    return { x: x, y: y };
  };
  var g = function (c, i) {
    var w = i.x;
    var x = i.y;
    var j =
      c.n / 2 -
      (2 * c.n * c.n) / 3 +
      (37 * c.n * c.n * c.n) / 96 -
      (c.n * c.n * c.n * c.n) / 360;
    var k =
      (c.n * c.n) / 48 +
      (c.n * c.n * c.n) / 15 -
      (437 * c.n * c.n * c.n * c.n) / 1440;
    var l = (17 * c.n * c.n * c.n) / 480 - (37 * c.n * c.n * c.n * c.n) / 840;
    var m = (4397 * c.n * c.n * c.n * c.n) / 161280;
    var q = c.e2 + c.e2 * c.e2 + c.e2 * c.e2 * c.e2 + c.e2 * c.e2 * c.e2 * c.e2;
    var r =
      -(
        7 * c.e2 * c.e2 +
        17 * c.e2 * c.e2 * c.e2 +
        30 * c.e2 * c.e2 * c.e2 * c.e2
      ) / 6;
    var s = (224 * c.e2 * c.e2 * c.e2 + 889 * c.e2 * c.e2 * c.e2 * c.e2) / 120;
    var t = -(4279 * c.e2 * c.e2 * c.e2 * c.e2) / 1260;
    var p = c.centralmeridian * d;
    var f = (w - c.x0) / (c.scale * c.atop);
    var e = (x - c.y0) / (c.scale * c.atop);
    var n =
      f -
      j * Math.sin(2 * f) * a(2 * e) -
      k * Math.sin(4 * f) * a(4 * e) -
      l * Math.sin(6 * f) * a(6 * e) -
      m * Math.sin(8 * f) * a(8 * e);
    var h =
      e -
      j * Math.cos(2 * f) * b(2 * e) -
      k * Math.cos(4 * f) * b(4 * e) -
      l * Math.cos(6 * f) * b(6 * e) -
      m * Math.cos(8 * f) * b(8 * e);
    var g = Math.asin(Math.sin(n) / a(h));
    var o = Math.atan(b(h) / Math.cos(n));
    var v = p + o;
    var u =
      g +
      Math.sin(g) *
        Math.cos(g) *
        (q +
          r * Math.pow(Math.sin(g), 2) +
          s * Math.pow(Math.sin(g), 4) +
          t * Math.pow(Math.sin(g), 6));
    return { lat: u / d, lon: v / d };
  };
  return { gridToGeo: i, geoToGrid: h };
})();
Ext.define("MEM.view.map.MyMapPanel", {
  extend: Ext.Panel,
  xtype: "mymappanel",
  config: { layout: { type: "card" } },
  initialize: function () {
    console.log("MyMapPanel.initialize(", arguments, ")");
    this.callParent(arguments);
  },
  constructor: function (b) {
    var a = this;
    b = b || {};
    console.log("MyMapPanel.constructor(", arguments, ")");
    b.items = [
      {
        xtype: "container",
        itemId: "mapdiv",
        layout: "fit",
        html: "Waiting for maps to load...",
      },
      {
        xtype: "toolbar",
        id: "MyMapStatusbar",
        docked: "bottom",
        layout: { type: "hbox", pack: "start" },
        items: [
          {
            id: "toggleCenter",
            xtype: "togglefield",
            name: "toggleCenter",
            docked: "top",
            value: 0,
            label: T("center map on me:"),
            labelWidth: "80%",
            listeners: { change: a.onToggleCenter, scope: a },
          },
        ],
      },
    ];
    a.callParent([b]);
    a.on("activate", a.onActivate, a, { single: !0 });
  },
  onActivate: function () {
    var a = this,
      c = a.down("#mapdiv");
    if (window.google) {
      return;
    }
    console.log("loading gmap");
    window.gmaploaded = function () {
      console.log("gmap loaded");
      var b = Ext.create("MEM.view.map.MyGmapPanel", {
        id: "MyMap",
        statusbarId: "MyMapStatusbar",
        listeners: {
          painted: function () {
            a.fireEvent("panelshow");
          },
        },
        renderTo: c.element,
      });
      c.add(b);
      initOverlappingMarkerSpiderfier.apply(window);
      a.fireEvent("activatewithgoogle", b);
    };
    var b = document.createElement("script");
    b.type = "text/javascript";
    b.src =
      document.location.protocol +
      "//maps.google.com/maps/api/js?key=AIzaSyA6959yww23nDRD6hxFJdv3a_Qk378N9NM&callback=gmaploaded";
    document.head.appendChild(b);
  },
  initCenter: function (a) {
    var b = this;
    var c = b.down("mygmappanel");
    if (a && a.x && a.y) {
      a = b.rt90toLatLng(a.x, a.y);
    }
    if (!c) {
      b.on("activatewithgoogle", function (b) {
        b.setMapCenter(a);
      });
      return;
    }
    c.setMapCenter(a);
  },
  rt90toLatLng: function (c, d) {
    var b = { latitude: 59, longitude: 17 };
    if (c && d) {
      var e = { x: c, y: d };
      var a = CoordinateConverter.gridToGeo(e);
      b = { latitude: a.lat, longitude: a.lon };
    }
    return b;
  },
  clearMarkers: function (a) {
    var c = this;
    var b = c.down("mygmappanel");
    b.clearMarkers(a);
  },
  addWOMarkers: function (d, e) {
    var b = this;
    var c = b.down("mygmappanel");
    var a = Ext.getStore("MyCloneWorkOrderStatusStore");
    if (!a.isLoaded()) {
      a.load({
        callback: function () {
          b.addWOMarkers(d);
        },
      });
      return;
    }
    d.each(function (f) {
      if (!f.get("GpsX") || !f.get("GpsY")) {
        return;
      }
      var i = { x: f.get("GpsX"), y: f.get("GpsY") };
      var g;
      var k = a.findRecord("Id", f.get("WorkOrderStatusId"));
      var j = k ? k.get("StatusColor") : null;
      if (!j) {
        j = "#dddddd";
      }
      var m = f.get("GpsX");
      var l = f.get("GpsY");
      if (l > 1000000) {
        g = CoordinateConverter.gridToGeo("rt90", i);
      } else {
        if (l > 100000) {
          g = CoordinateConverter.gridToGeo("sweref99", i);
        } else {
          g = { lat: i.x, lon: i.y };
        }
      }
      var h = {
        lat: g.lat,
        lng: g.lon,
        title: f.get("Name"),
        color: j,
        listeners: {},
      };
      h.listeners.click = (function (a) {
        return function (c) {
          b.onWoTap(h, this, c);
        };
      })(h);
      c.addMarker(h);
      h.me_record = f;
    });
    c.finalize(e);
  },
  onWoTap: function (a, c, b) {
    this.fireEvent("mapworkordertap", a.me_record.get("Id"));
  },
  onToggleCenter: function () {
    var a = this.down("mygmappanel");
    a.toggleCenter();
  },
});
Ext.define("MEM.controller.Map", {
  extend: MEM.controller.Common,
  config: {
    stores: [
      "MyProjectStore",
      "MyWorkOrderLocationStore",
      "MyWorkOrderAssignedLocationStore",
    ],
    views: ["map.MyMapPanel"],
    refs: {
      mymappanel: "mymappanel",
      projectField: "myworkorderformpanel #myWOProjectId",
    },
    control: {
      mymappanel: {
        activate: "onActivate",
        activatewithgoogle: "onActivate",
        initialize: "onInitialize",
        mapworkordertap: "onMapWorkOrderTap",
      },
    },
  },
  init: function () {
    var a = this;
    a.me_inited = !0;
  },
  onInitialize: function () {
    var a = this;
    var b = a.getMymappanel();
    return;
    Ext.getStore("MyOptionValueStore").on(
      "load",
      function () {
        a.mapCenterLat = a.opt("MEM.MapLat");
        a.mapCenterLng = a.opt("MEM.MapLong");
        b.initCenter({ latitude: a.mapCenterLat, longitude: a.mapCenterLng });
      },
      a,
      { single: !0 }
    );
  },
  onActivate: function () {
    if (!window.google) {
      return;
    }
    var a = this;
    var b = a.getMymappanel();
    var d = Ext.getStore("MyWorkOrderLocationStore");
    var c = Ext.getStore("MyWorkOrderAssignedLocationStore");
    var f = Ext.getStore("MyProjectStore");
    var e = a.getApplication();
    if (b.me_viewstate == "project") {
      if (
        a.me_activated &&
        b.me_oldstate == "project" &&
        a.me_projectid == CURRENT_PROJECTID
      ) {
        a.doMarkers(!0);
        return;
      }
      d.meClearFilter();
      d.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
      a.activestore = d;
    } else {
      if (b.me_viewstate == "workorder") {
        if (
          a.me_activated &&
          b.me_oldstate == "workorder" &&
          b.me_loadstate != "reload"
        ) {
          b.me_loadstate = null;
          a.doMarkers(!0);
          return;
        }
        if (a.me_activated && b.me_oldstate == "workorder") {
        }
        c.meClearFilter();
        c.meAddFilter(["ResponsibleServiceId", "=", e.getUserId()]);
        c.meAddFilter(["ProjectStatusCode", ">=", STATUS_NOTED]);
        c.meAddFilter(["ProjectStatusCode", "<", STATUS_FINISHED]);
        a.activestore = c;
      } else {
        if (b.me_viewstate == "single_workorder") {
          a.activestore = d;
          a.norecenter = !1;
        } else {
          console.log("OOPS! MAP ERROR!");
        }
      }
    }
    b.me_loadstate = null;
    b.me_oldstate = b.me_viewstate;
    a.me_projectid = CURRENT_PROJECTID;
    a.me_activated = !0;
    a.activestore.load({ callback: a.onWorkOrderLoad, scope: a });
    Ext.getStore("MyWorkOrderStore").on(
      "wostatuschange",
      a.onWoStatusChange,
      a
    );
  },
  onWoStatusChange: function (c) {
    var a = this,
      e = c.get("WorkOrderStatusId"),
      d = a.activestore.findRecord("Id", c.get("Id")),
      b = a.getMymappanel();
    if (d) {
      d.set("WorkOrderStatusId", e);
      b.clearMarkers(!0);
      b.addWOMarkers(a.activestore, !0);
    }
  },
  onWorkOrderLoad: function (e, c, d, b) {
    var a = this;
    a.doMarkers(a.norecenter);
    a.norecenter = !1;
  },
  doMarkers: function (a) {
    var c = this;
    var b = c.getMymappanel();
    var d = c.activestore;
    b.clearMarkers(a);
    b.addWOMarkers(d, a);
  },
  onMapWorkOrderTap: function (d) {
    var b = this;
    var a = Ext.getCmp("MyWorkOrderFormPanel");
    var e = Ext.getCmp("mynavigationview");
    var c = Ext.getStore("MyWorkOrderStore");
    c.meClearFilter();
    c.meAddFilter(["Id", "=", d]);
    MEM.loadSpinner.show();
    b.filterWorkOrderRows = function (c) {
      var f = this,
        a = Ext.getStore("MyWorkOrderRowStore"),
        b = Ext.getStore("MyChecklistRowStore"),
        e;
      b.meClearFilter();
      b.meAddFilter(["WorkOrderId", "=", c]);
      b.load({
        callback: function (a) {
          Ext.getCmp("MyChecklistContainer").setHidden(a.length == 0);
        },
      });
      a.clearFilter();
      a.meClearFilter();
      e = Ext.getCmp("MyWorkOrderRowForm").down("#myRowList");
      a.meAddFilter(["WorkOrderId", "=", c]);
      a.meAddFilter(["ShowInMobile", "=", !0]);
      a.load({
        callback: function () {
          if (getSetting("MEM.Days") != "1") {
            Ext.select(".x-days").hide();
          }
        },
      });
    };
    c.load({
      callback: function (c) {
        MEM.app.getController("WorkOrder").fetchWorkOrderStatus(c[0]);
        b.getProjectField().suspendEvents();
        a.setRecord(c[0]);
        b.getProjectField().resumeEvents(!0);
        b.navigateToPanel(e, a);
        b.filterWorkOrderRows(d);
        MEM.loadSpinner.hide();
      },
    });
    return;
    a.reset();
    a.setRecord(record);
    var f = e.push(a);
    Ext.getCmp("MyWorkOrderList").fireEvent(
      "itemsingletap",
      null,
      0,
      null,
      {
        get: function () {
          return d;
        },
      },
      null,
      { fromMap: !0 }
    );
  },
});
Ext.define("MEM.view.time.MyTimeOverlay", {
  extend: Ext.Panel,
  xtype: "mytimeoverlay",
  config: {
    cls: "mytimeoverlay",
    left: 0,
    top: 0,
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    scrollable: !0,
    currentDate: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "closeTime",
          },
        ],
      },
      {
        itemId: "myTimeList",
        cls: "my-timelist",
        xtype: "list",
        itemTpl: "{name}",
        docked: "top",
      },
    ],
  },
});
Ext.define("MEM.view.time.MyProjectSearchPanel", {
  extend: Ext.form.Panel,
  alias: "widget.myprojectsearchpanel",
  config: {
    id: "MyProjectSearchPanel",
    autoDestroy: !1,
    scrollable: null,
    fullscreen: !0,
    layout: "vbox",
    title: T("Search project"),
    defaults: { labelWidth: "33%", margin: 0 },
    items: [
      {
        xtype: "fieldset",
        docked: "top",
        items: [
          {
            id: "myProjectNoSearch",
            itemId: "projectSearchNo",
            xtype: "searchfield",
            label: T("Project number"),
            name: "ProjectNo",
          },
          {
            id: "myNameSearch",
            itemId: "projectSearchName",
            xtype: "searchfield",
            label: T("Project name"),
            name: "ProjectName",
          },
        ],
      },
      {
        xtype: "mylist",
        store: {
          storeId: "ProjectSearchPanel_MyProjectListStore",
          type: "myprojectliststorealias",
        },
        scrollable: "vertical",
        flex: 1,
        id: "MyProjectList",
        itemId: "projectSearchList",
        cls: "my-rowlist",
        ui: "round",
        itemTpl: ["{ProjectNo} {ProjectName}"],
      },
    ],
  },
  constructor: function (c) {
    var a = this;
    a.callParent(arguments);
    var b = a.down("mylist");
    b.getStore().on({
      scope: a,
      load: a.onProjectListLoad,
      beforeload: a.beforeProjectListLoad,
    });
  },
  beforeProjectListLoad: function () {
    MEM.loadSpinner.showSpinner("projectSearch");
  },
  onProjectListLoad: function (b) {
    var a = MEM.app.getController("Project");
    a.filterOutReadOnly(b);
    MEM.loadSpinner.hideSpinner("projectSearch");
  },
});
Ext.define("MEM.view.project.MyProjectOverlay", {
  extend: Ext.Panel,
  xtype: "myprojectoverlay",
  config: {
    cls: "myprojectoverlay",
    left: 0,
    top: 0,
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: !0,
    currentProjectId: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "close",
          },
        ],
      },
      {
        itemId: "myProjectList",
        xtype: "list",
        listeners: {
          painted: function () {
            this.up("myprojectoverlay").fireEvent("panelshow");
          },
        },
        data: [
          {
            Name: T("Open project"),
            Tag: "Project",
            Action: "projectTap",
            Active: !0,
            NeedRight: ["MobileProject"],
          },
          {
            Name: T("AWO"),
            Tag: "AWO",
            Action: "AWOTap",
            Active: !0,
            NeedRight: ["MobileAWO"],
          },
          {
            Name: T("Workorder"),
            Tag: "Workorder",
            Action: "workorderTap",
            Active: !0,
            NeedRight: ["MobileWorkOrder"],
          },
          {
            Name: T("Supplier Invoices"),
            Tag: "SupplierInvoices",
            Action: "costTap",
            Active: !0,
            NeedRight: ["CostRevenue"],
          },
          {
            Name: T("Client Invoices"),
            Tag: "ClientInvoices",
            Action: "revenueTap",
            Active: !0,
            NeedRight: ["CostRevenue"],
          },
          {
            Name: T("Hours"),
            Tag: "HoursMenu",
            Action: "hoursTap",
            Active: !0,
            NeedRight: ["MobileTime"],
          },
          {
            Name: T("Economy"),
            Tag: "EconomyMenu",
            Action: "economyTap",
            Active: !0,
            NeedRight: ["ProjectOverview"],
          },
          {
            Name: T("Map"),
            Tag: "MapMenu",
            Action: "mapTap",
            Active: !0,
            NeedRight: ["MobileMap"],
          },
        ],
        height: isPhone ? 240 : 340,
        cls: "myProjectList",
        itemTpl: "{Name}",
        docked: "top",
      },
    ],
  },
  filterData: function () {
    this.getComponent("myProjectList")
      .getStore()
      .filterBy(function (a) {
        return (
          a.data.Active &&
          a.data.NeedRight.every(function (b) {
            return haveRight(b);
          })
        );
      });
  },
});
(withSeparator = function (a) {
  if (isNaN(a)) {
    return "";
  } else {
    return Math.round(a)
      .toString()
      .replace(/\B(?=(\d{3})+(?!\d))/g, " ");
  }
}),
  (header =
    '<div class="my-tpl-list" style="width:10%" align="left">' +
    T("Ver no") +
    "</div>" +
    '<div class="my-tpl-list" style="width:25%" align="left">' +
    T("Verificationtext") +
    "</div>" +
    '<div class="my-tpl-list" style="width:10%" align="right">' +
    T("WO/AWO") +
    "</div>" +
    '<div class="my-tpl-list" style="width: 8%" align="right">' +
    T("AccountNo") +
    "</div>" +
    '<div class="my-tpl-list" style="width:12%" align="right">' +
    T("Ledg.Date") +
    "</div>" +
    '<div class="my-tpl-list" style="width:15%" align="right">' +
    T("Amount") +
    "</div>" +
    '<div class="my-tpl-list" style="width: 8%" align="left">' +
    T("Inv.") +
    "</div>"),
  (data =
    '<div class="my-tpl-list" style="width:10%" align="left">&nbsp;{VerificationNo}</div>' +
    '<div class="my-tpl-list" style="width:25%" align="left">&nbsp;{% if(values["ScannedUrl"]) { %} <a target="_blank" href="{ScannedUrl}">{TransactionNote}</a>{% } else { %} {TransactionNote} {% } %}</div>' +
    '<div class="my-tpl-list" style="width:10%" align="right">&nbsp;{WorkOrderNo}</div>' +
    '<div class="my-tpl-list" style="width: 8%" align="right">&nbsp;{AccountNo}</div>' +
    '<div class="my-tpl-list" style="width:12%" align="right">&nbsp;{LedgerDate:date("' +
    Ext.util.Format.defaultDateFormat.replace("Y", "y") +
    '")}</div>' +
    '<div class="my-tpl-list" style="width:15%" align="right">&nbsp;{[withSeparator(values.InvoiceAmount)]}</div>' +
    '<div class="my-tpl-list" style="width:8%" align="left">{[MEM.check.bool(values.Invoiced)]}</div>');
Ext.define("MEM.view.costrevenue.MyCostRevenuePanel", {
  extend: Ext.form.Panel,
  alias: "widget.mycostrevenuepanel",
  scroll: "vertical",
  config: {
    cls: "mycostrevenuepanel",
    currentDate: null,
    autoDestroy: !0,
    title: T("Supplier invoices on Project"),
    padding: 0,
    defaults: {},
    items: [
      {
        xtype: "container",
        height: 1024,
        layout: "fit",
        items: [
          {
            html: header,
            border: 0,
            cls: "myHeader",
            height: isPhone ? 20 : 40,
          },
          {
            xtype: "mylist",
            itemId: "costrevenuerows",
            scrollable: "vertical",
            cls: "my-rowlist",
            itemTpl: [data],
          },
        ],
      },
    ],
  },
});
(header =
  '<div class="my-thp-item my-fullname" align="left">' +
  T("Name") +
  "</div>" +
  '<div class="my-thp-item my-wono" align="right">' +
  T("WO/AWO") +
  "</div>" +
  '<div class="my-thp-item my-regdate" align="right">' +
  T("Date") +
  "</div>" +
  '<div class="my-thp-item my-hours" align="right">' +
  T("Hours") +
  "</div>" +
  '<div class="my-thp-item my-thp-text my-profession" align="right">' +
  T("Role") +
  "</div>" +
  '<div class="my-thp-item my-thp-text my-thp-portrait my-description" align="left">' +
  T("Comment") +
  "</div>" +
  '<div class="my-thp-item my-travel" align="right">' +
  T("Travel to debit (km)") +
  "</div>" +
  '<div class="my-thp-item" style="margin-right: 5px ; width:0px" align="right">&nbsp;</div>' +
  '<div class="my-thp-item my-travel" align="right">' +
  T("Private travel (km)") +
  "</div>" +
  '<div class="my-thp-item my-approved" align="center">' +
  T("Appr.") +
  "</div>" +
  '<div class="my-thp-item my-thp-portrait my-invoice" align="center">' +
  T("Inv.") +
  "</div>"),
  (data =
    '<div class="my-thp-item my-thp-text my-fullname" align="left">&nbsp;{FullName}</div>' +
    '<div class="my-thp-item my-thp-text my-wono" style="list-style-type: decimal-leading-zero(4);" align="right">&nbsp;{WorkOrderNo}</div>' +
    '<div class="my-thp-item my-regdate" style="white-space:nowrap;" align="right">&nbsp;{RegDate:date("' +
    Ext.util.Format.defaultDateFormat.replace("Y", "y") +
    '")}</div>' +
    '<div class="my-thp-item my-thp-text my-hours" align="right">{Hours_fmt}</div>' +
    '<div class="my-thp-item my-thp-text my-profession" align="right">&nbsp;{ProfessionCode}</div>' +
    '<div class="my-thp-item my-thp-text my-thp-portrait my-description" align="left">&nbsp;{Description}</div>' +
    '<div class="my-thp-item my-travel" style="white-space:nowrap;" align="right">&nbsp;{Travel1Km_fmt}</div>' +
    '<div class="my-thp-item" style="margin-right: 5px ; width:0px" align="right">&nbsp;</div>' +
    '<div class="my-thp-item my-travel" style="white-space:nowrap;" align="right">&nbsp;{Travel2Km_fmt}</div>' +
    '<div class="my-thp-item my-approved checked my-pictos-icon boolcheckbox' +
    "{[values.Approved ? '' : ' me-no-checked' ]}" +
    '">' +
    "{[values.Approved ? '3' : '6' ]}" +
    "</div>" +
    '<div class="my-thp-item my-thp-text my-thp-portrait my-invoice" align="center">{[MEM.check.bool(values.Invoiced)]}</div>');
Ext.define("MEM.view.time.MyTimeHoursPanel", {
  extend: Ext.form.Panel,
  alias: "widget.mytimehourspanel",
  scroll: "vertical",
  config: {
    cls: "mytimehourspanel",
    currentDate: null,
    autoDestroy: !0,
    items: [
      { html: header, border: 0, cls: "myHeader", height: isPhone ? 45 : 68 },
      {
        xtype: "toolbar",
        ui: "light",
        cls: "approvaltoolbar",
        docked: "bottom",
        layout: { pack: "center", type: "hbox" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            html: T("Save"),
            itemId: "saveApproval",
            docked: null,
            disabled: !0,
            listeners: {
              tap: function (a) {
                this.setDisabled(!0);
              },
            },
          },
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            html: T("Check all"),
            itemId: "selectAll",
            docked: null,
          },
        ],
      },
      {
        xtype: "container",
        height: 1024,
        layout: "fit",
        items: [
          {
            xtype: "mylist",
            itemId: "hourrows",
            store: "MyTimeStore",
            scrollable: "vertical",
            cls: "my-rowlist",
            itemTpl: [data],
          },
        ],
      },
    ],
  },
  constructor: function (b) {
    var a = this;
    a.callParent([b]);
    a.down("mylist").on("itemsingletap", a.onItemSingleTap, a);
    this.down("mylist").on("painted", this.onPainted, this);
    a.down("#selectAll").on("tap", a.onSelectAll, a);
    a.down("mylist")
      .getStore()
      .on("updaterecord", function (c) {
        a.down("#saveApproval").setDisabled(c.getUpdatedRecords().length == 0);
      });
    Ext.Viewport.on("orientationchange", this.onPainted, this);
  },
  onPainted: function () {
    this.onOrientationChange(Ext.Viewport, Ext.Viewport.getOrientation());
  },
  onOrientationChange: function (c, b) {
    var a = this;
    if (b == "landscape") {
      a.addCls("my-landscape");
    } else {
      a.removeCls("my-landscape");
    }
  },
  onItemSingleTap: function (f, e, c, a, b, d) {
    if (this.getCls().indexOf("allow-approve") < 0) {
      return;
    }
    if (b.target.className.indexOf("boolcheckbox") >= 0) {
      if (a.get("Invoiced")) {
        Ext.Msg.alert(
          T("Invoiced"),
          T("Time is invoiced and can not be changed.")
        );
      } else {
        if (a.get("Approved") || b.target.checked) {
          a.set("Approved", !1);
        } else {
          a.set("Approved", !0);
        }
      }
    }
  },
  onSelectAll: function () {
    this.down("mylist")
      .getStore()
      .each(function (a) {
        if (!a.get("Invoiced")) {
          a.set("Approved", !0);
        }
      });
  },
});
Ext.define("MEM.view.project.MyHourlyRates", {
  extend: Ext.Panel,
  xtype: "myhourlyrates",
  config: {
    cls: "my-hourlyrates",
    title: T("Hourly rates"),
    scrollable: !0,
    items: [
      {
        id: "myHourlyRateCustomerId",
        docked: "top",
        cls: "my-hourlyrates-cust",
        xtype: "myselectfield",
        label: T("Customer"),
        store: "MyCustomerListStore",
        displayField: "CustomerName",
        valueField: "Id",
        required: !0,
        name: "CustomerId",
        hidden: !1,
      },
      {
        id: "myHourlyRateProjectId",
        docked: "top",
        cls: "my-hourlyrates-proj",
        xtype: "myselectfield",
        label: T("Project"),
        store: {
          type: "myprojectliststorealias",
          storeId: "MyHourlyRates_MyProjectListStore",
          sorters: [{ property: "Project", direction: "ASC" }],
          autoLoad: !0,
        },
        displayField: "Project",
        valueField: "Id",
        required: !0,
        name: "ProjectId",
        hidden: !1,
      },
      {
        xtype: "myinlinelist",
        scrollable: null,
        id: "hourlyRatesList",
        store: "MyProfessionItemStore",
        cls: "my-list-hourlyrates",
        ui: "round",
        itemTpl: [
          '<div class="my-hourly-item-wrap">' +
            '<span class="my-hourly-item">{ProfessionDescription}</span>' +
            '<span class="my-hourly-item">' +
            T("Cost per unit") +
            ": {% if(values.CostUnit) { %} {CostUnit}{% } %} </span>" +
            '<span class="my-hourly-item">' +
            T("Customer amount") +
            ": {% if(values.CustomerPriceUnit) { %} {CustomerPriceUnit}{% } %}</span>" +
            "<br>" +
            '<span class="my-hourly-prof"">{ProfessionCode} </span>' +
            '<span class="my-hourly-space">&nbsp;</span>' +
            '<span class="my-hourly-item"">' +
            T("Customer price") +
            ": {% if(values.PriceUnit) { %} {PriceUnit}{% } %}</span>" +
            '<span class="my-hourly-item"">' +
            T("Project price") +
            ": {% if(values.ProjectPriceUnit) { %} {ProjectPriceUnit}{% } %} </span>" +
            "</div>",
        ],
      },
    ],
  },
});
Ext.define("MEM.model.CustomerContactList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "CustomerId", type: "int" },
      { name: "ContactName", type: "string", max: 50 },
      { name: "CustomerRef", type: "string", max: 50 },
    ],
  },
});
Ext.define("MEM.store.MyCustomerContactListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.mycustomercontactliststorealias",
  config: {
    model: "MEM.model.CustomerContactList",
    storeId: "MyCustomerContactListStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "ContactName", direction: "ASC" }],
    syncRemovedRecords: !1,
    proxy: { type: "myproxy", url: Me.STORE_URL + "CustomerContactListStore" },
    filters: [{ property: "Disabled", value: !1 }],
  },
});
Ext.define("MEM.view.project.MyProjectCarouselPanel", {
  extend: Ext.Carousel,
  xtype: "myprojectcarouselpanel",
  config: {
    autoDestroy: !0,
    fullscreen: !1,
    layout: "fit",
    indicator: !1,
    defaults: {},
    items: [],
  },
});
Ext.define("MEM.view.project.MyHourlyRatesForm", {
  extend: Ext.form.FormPanel,
  xtype: "myhourlyratesform",
  config: {
    autoDestroy: !0,
    scrollable: !0,
    layout: {},
    defaults: { labelWidth: "15%" },
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            id: "myProfessionItemId",
            xtype: "hiddenfield",
            name: "Id",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            label: T("Code"),
            name: "ProfessionCode",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            label: T("Description"),
            name: "ProfessionDescription",
            readOnly: !0,
          },
          {
            id: "myCostUnit",
            xtype: "numberfield",
            label: T("Cost per unit"),
            name: "CostUnit",
          },
          {
            id: "myPriceUnit",
            xtype: "numberfield",
            label: T("Customer price"),
            name: "PriceUnit",
          },
          {
            id: "myCustomerPriceUnit",
            xtype: "numberfield",
            label: T("Customer amount"),
            name: "CustomerPriceUnit",
          },
          {
            id: "myProjectPriceUnit",
            xtype: "numberfield",
            label: T("Project price"),
            name: "ProjectPriceUnit",
          },
        ],
      },
      {
        xtype: "container",
        items: [
          {
            xtype: "button",
            ui: "confirm",
            action: "ratesSaveButton",
            text: T("Save"),
            centered: !0,
            minWidth: "20%",
          },
          { xtype: "spacer", minHeight: 40 },
        ],
      },
    ],
  },
});
var overlay;
Ext.define("MEM.controller.Project", {
  extend: MEM.controller.Common,
  config: {
    views: ["project.MyProjectFormPanel", "project.MyProjectCarouselPanel"],
    stores: [
      "MyProjectListStore",
      "MyCustomerContactListStore",
      "MySettingStore",
    ],
    refs: {
      mynavigationview: "mynavigationview",
      myprojecttoolbar: {
        xtype: "myprojecttoolbar",
        selector: "myprojecttoolbar",
        autoCreate: !0,
      },
      projectForm: {
        xtype: "myprojectformpanel",
        title: "Project",
        selector: "myprojectformpanel",
        autoCreate: !0,
      },
      archiveList: {
        xtype: "myprojectarchivepanel",
        title: T("Project archive"),
        selector: "myprojectarchivepanel",
        autoCreate: !0,
      },
      economyForm: {
        xtype: "myeconomypanel",
        title: T("Economy"),
        selector: "myeconomypanel",
        autoCreate: !0,
      },
      ratesForm: {
        xtype: "myhourlyratesform",
        title: "Hourly rates",
        selector: "myhourlyratesform",
        autoCreate: !0,
      },
      overlay: {
        selector: "myprojectoverlay",
        xtype: "myprojectoverlay",
        autoCreate: !0,
      },
      hourForm: {
        selector: "mytimehourspanel",
        xtype: "mytimehourspanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      costRevenueForm: {
        selector: "mycostrevenuepanel",
        xtype: "mycostrevenuepanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      AWOForm: {
        selector: "myawopanel",
        xtype: "myawopanel",
        title: T("AWO"),
        id: "MyAWOPanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      hourlyRates: {
        selector: "myhourlyrates",
        xtype: "myhourlyrates",
        autoCreate: !0,
        autoDestroy: !0,
      },
      myprojectscontainer: "#myprojectscontainer1",
      projectStatusButtons: "myprojectpanel segmentedbutton",
      projectlist: "#projectlist",
      projectarchivelist: "#projectarchivelist",
      projectSearchList: "myprojectsearchpanel #projectSearchList",
      projectSearchName: "myprojectsearchpanel #projectSearchName",
      projectSearchNo: "myprojectsearchpanel #projectSearchNo",
      costRevenueList: "#costrevenuerows",
      hourlyRatesCustomerId: "#myHourlyRateCustomerId",
      hourlyRatesProjectId: "#myHourlyRateProjectId",
      timeProjectId: "mytimerowform #myTimeProjectId",
      woProjectId: "myworkorderformpanel #myWOProjectId",
      parentProjectId: "myprojectformpanel #myParentProjectId",
      parentProjectSearchButton:
        "myprojectformpanel #ParentProjectSearchButton",
      fileProjectId: "myfilepanel #myFileProjectId",
      timeWorkOrderId: "mytimerowform #myTimeWorkOrderId",
      fileWorkOrderId: "myfilepanel #myFileWOId",
      myCustomerAgentId: "myprojectformpanel #myCustomerAgentId",
    },
    control: {
      mynavigationview: {
        pop: function (a, e, c) {
          var b = this,
            d = this.getMynavigationview();
          if (a.getActiveItem().id == "mytimerowform") {
            b.hideFavorites();
          }
        },
      },
      myprojectpanel: { panelshow: "onMyProjectPanelListPainted" },
      myprojectarchivepanel: {
        panelshow: "onMyProjectArchivePanelListPainted",
        archivestoreloaded: "onArchiveStoreLoaded",
      },
      "#projectlist": { itemsingletap: "onMyProjectPanelListItemTap" },
      "#projectarchivelist": {
        itemsingletap: "onMyProjectArchivePanelListItemTap",
      },
      myprojectoverlay: { panelshow: "showFavorites" },
      myCustomerAgentId: {
        missingvalue: function (d, e, b) {
          var a = this.getProjectForm().getRecord();
          if (a) {
            var c = {
              Id: a.get("CustomerAgentId"),
              ContactName: a.get("ContactName"),
              CustomerId: a.get("CustomerId"),
            };
            b = Ext.applyIf(b, c);
          }
        },
      },
      "#MyProjectList": { itemsingletap: "onMyProjectListItemTap" },
      "#hourlyRatesList": { itemsingletap: "onMyHourlyRatesListItemTap" },
      "#ProjectSaveButton": { tap: "onSaveProjectsTap" },
      "#CustomerId": { setData: "onCustomerIdChange" },
      "myprojectpanel segmentedbutton": { toggle: "onFilterProjectButton" },
      "button[action=projectContactAdd]": { tap: "onProjectContactAdd" },
      "button[action=close]": { tap: "onCloseTap" },
      "button[action=projectSearch]": { tap: "onProjectSearch" },
      "button[action=favorites]": { tap: "onFavorites" },
      "button[action=ratesSaveButton]": { tap: "onRatesSave" },
      "myprojectoverlay #myProjectList": {
        itemsingletap: "onMyProjectOverlayItemTap",
      },
      "mysearchoverlay #mySearchList": {
        itemsingletap: "onMySearchOverlayItemTap",
      },
      "myprojecttoolbar #mysupplierinvoicebutton": {
        tap: function () {
          COST_MODE = !0;
          this.costrevenueTap(null);
        },
      },
      "myprojecttoolbar #myclientinvoicebutton": {
        tap: function () {
          COST_MODE = !1;
          this.costrevenueTap(null);
        },
      },
      "myprojecttoolbar #myhoursbutton": {
        tap: function () {
          this.hoursTap(null);
        },
      },
      "myprojecttoolbar #myawobutton": {
        tap: function () {
          this.AWOTap(null);
        },
      },
      projectSearchName: {
        keyup: function () {
          var a = this;
          a.searchProject(
            a.getProjectSearchList().getStore(),
            a.getProjectSearchName().getValue(),
            a.getProjectSearchNo().getValue(),
            "ProjectName",
            "ProjectNo",
            2
          );
        },
        clearicontap: function () {
          var a = this;
          a.searchProject(
            a.getProjectSearchList().getStore(),
            "",
            a.getProjectSearchNo().getValue(),
            "ProjectName",
            "ProjectNo",
            0
          );
        },
      },
      projectSearchNo: {
        keyup: function () {
          var a = this;
          a.searchProject(
            a.getProjectSearchList().getStore(),
            a.getProjectSearchNo().getValue(),
            a.getProjectSearchName().getValue(),
            "ProjectNo",
            "ProjectName",
            2
          );
        },
        clearicontap: function () {
          var a = this;
          a.searchProject(
            a.getProjectSearchList().getStore(),
            "",
            a.getProjectSearchName().getValue(),
            "ProjectNo",
            "ProjectName",
            0
          );
        },
      },
      "button[action=hourlyrates]": {
        tap: function () {
          var c = this;
          var a = Ext.getCmp("CustomerId").getValue();
          var b = CURRENT_PROJECTID;
          MEM.loadSpinner.show();
          try {
            c.onShowHourlyRates(!1, a, b, MEM.loadSpinner.hide());
          } catch (d) {
            MEM.loadSpinner.hide(d);
          }
        },
      },
    },
  },
  projectSearchEnteredModes: [],
  init: function () {
    var a = this;
    a.userTimeStore = Ext.create("MEM.store.MyMobileUserTimeStore");
    a.getApplication().on({
      scope: a,
      additem: a.onProjectAdd,
      openarchive: a.onOpenArchive,
      setadditemtype: a.onToolbarAdd,
      removetoolbar: a.onToolbarRemove,
      openDiary: function () {
        this.onProjectSearch();
      },
    });
  },
  launch: function () {
    var a = this.getApplication().config;
  },
  showFavorites: function () {
    var c = this.getMynavigationview(),
      b = c.innerItems,
      a = "";
    switch (b.length) {
      case 0:
        a = "";
        break;
      case 1:
        a = b[0].getItemId();
        break;
      default:
        a = b[b.length - 2].getItemId();
        break;
    }
    if (a == "mytimerowform") {
      this.getApplication().fireEvent("setfavoritestype", "favorites");
    }
  },
  hideFavorites: function () {
    this.getApplication().fireEvent("clearfavoritestype");
  },
  onShowRates: function (a) {
    var b = this;
    b.onShowHourlyRates(!1);
    if (a) {
      a();
    }
  },
  onShowHourlyRates: function (g, a, b, d) {
    var c = this,
      e =
        a != null
          ? a
          : Ext.getCmp("myHourlyRateCustomerId") == undefined
          ? Ext.getCmp("CustomerId").getValue()
          : Ext.getCmp("myHourlyRateCustomerId").getValue(),
      f =
        b != null
          ? b
          : Ext.getCmp("myHourlyRateProjectId") == undefined
          ? CURRENT_PROJECTID
          : Ext.getCmp("myHourlyRateProjectId").getValue();
    c.onShowHourlyRatesForCustomer(e, function () {
      c.onShowHourlyRatesForProject(f, function () {
        c.popOrPushHourlyRates(g, Ext.getCmp("myHourlyRateProjectId"), a, b);
        if (d) {
          d();
        }
      });
    });
  },
  onHourlyRatesCustomerIdChange: function () {
    var a = this;
    a.onShowRates();
  },
  onHourlyRatesProjectIdChange: function () {
    var a = this;
    a.onShowRates();
  },
  filterOutReadOnly: function (b) {
    var c = this,
      a = c.getMynavigationview();
    if (
      b.getStoreId() == "MyProjectWriteRightStore" ||
      a.innerItems[a.innerItems.length - 2].getItemId() == "MyProjectFormPanel"
    ) {
      b.filterBy(function (a) {
        return a.get("SecReadOnly") == !1;
      });
    }
  },
  popOrPushHourlyRates: function (h, i, d, e) {
    var a = this,
      f = a.getMynavigationview(),
      g = a.getHourlyRates(),
      b = a.getHourlyRatesCustomerId(),
      c = a.getHourlyRatesProjectId();
    b.un("change", a.onHourlyRatesCustomerIdChange, a);
    c.un("change", a.onHourlyRatesProjectIdChange, a);
    if (!h) {
      f.push(g);
      if (d) {
        b.setValue(d);
      }
      if (e) {
        c.setValue(e);
      }
      b.on("change", a.onHourlyRatesCustomerIdChange, a);
      c.on("change", a.onHourlyRatesProjectIdChange, a);
    } else {
      f.pop();
    }
  },
  loadProffesionStore: function (b) {
    var a = Ext.getStore("MyProfessionItemStore");
    a.load({ callback: b });
  },
  onShowHourlyRatesForProject: function (f, d) {
    var e = this,
      h = e.getHourlyRates(),
      i = this.getMynavigationview(),
      g = Ext.getCmp("myHourlyRateProjectId"),
      b = Ext.getStore("MyProfessionItemStore"),
      a = Ext.getStore("MyProjectPricelistItemStore"),
      c = function () {
        var c = b.getCount();
        b.each(function (b) {
          a.meClearFilter();
          a.meAddFilter(["ProjectId", "=", parseInt(f, 10)]);
          a.meAddFilter(["ProfessionItemId", "=", parseInt(b.get("Id"), 10)]);
          a.load({
            callback: function (a) {
              b.set(
                "ProjectPriceUnit",
                a.length > 0 ? a[0].get("PriceUnit") : null
              );
              c--;
              if (c <= 0) {
                if (d) {
                  d();
                }
              }
            },
          });
        });
      };
    if (!b.isLoaded()) {
      e.loadProffesionStore(function () {
        c();
      });
    } else {
      c();
    }
  },
  onShowHourlyRatesForCustomer: function (d, b) {
    var f = this,
      h = f.getHourlyRates(),
      i = this.getMynavigationview(),
      g = Ext.getCmp("myHourlyRateCustomerId"),
      c = Ext.getStore("MyProfessionItemStore"),
      a = Ext.getStore("MyCustomerPricelistItemStore"),
      e = function () {
        var e = c.getCount();
        c.each(function (c) {
          if (d != null) {
            a.meClearFilter();
            a.meAddFilter(["CustomerId", "=", parseInt(d, 10)]);
            a.meAddFilter(["ProfessionItemId", "=", parseInt(c.get("Id"), 10)]);
            a.load({
              callback: function (a) {
                c.set(
                  "CustomerPriceUnit",
                  a.length > 0 ? a[0].get("PriceUnit") : null
                );
                e--;
                if (e <= 0) {
                  if (b) {
                    b();
                  }
                }
              },
            });
          } else {
            if (b) {
              b();
            }
          }
        });
      };
    if (!c.isLoaded()) {
      f.loadProffesionStore(function () {
        e();
      });
    } else {
      e();
    }
  },
  onProjectSearch: function () {
    var b = this,
      a = this.getMynavigationview(),
      d = MEM.app.getController("MainMenu").ensureSubPanel("ProjectSearch"),
      e = a.innerItems[a.innerItems.length - 1].getItemId(),
      c = T("Search project");
    switch (e) {
      case "mytimerowform":
        b.onStartSearch(!1, "time");
        break;
      case "MyMainMenuPanel":
      case "MyFilePanel":
      case "MyProjectSearchPanel":
        b.onStartDiarySearch("none");
        c = T("Select project");
        break;
      case "MyProjectFormPanel":
        b.onStartProjectSearch("addProject");
        break;
    }
    b.hideAdd();
    a.push(d);
    d.setTitle(c);
    a.down("titlebar").setTitle(c);
  },
  onCloseTap: function () {
    this.getOverlay().hide();
  },
  onProjectContactAdd: function () {
    var a = Ext.getCmp("CustomerId").getValue(!0);
    this.getApplication().fireEvent("addcontact", { CustomerId: a });
  },
  onFilterProjectButton: function (b, a) {
    if (a.element.hasCls("x-button-pressed")) {
      this.filter(a.getText());
    }
  },
  onProjectAdd: function (h) {
    if (h !== "project") {
      return;
    }
    var a = this;
    var g = a.getMynavigationview();
    var b = a.getProjectForm();
    var e = Ext.getStore("MyProjectStore").getModel();
    var c = a.getApplication();
    var f = Ext.getStore("MyProjectStatusStore").findRecord(
      "StatusCode",
      STATUS_NOTED
    );
    var d = Ext.ModelManager.create(
      { Id: null, ProjectStart: new Date(), ProjectStatusId: f.getId() },
      e
    );
    a.loadStores(function () {
      b.setRecord(d);
      var e = Ext.getStore("MyProjectWriteRightStore");
      a.filterOutReadOnly(e);
      a.loadUserStores(function () {
        Ext.getCmp("ProjectManagerId").setValue(c.getUserId());
        Ext.getCmp("WorkLeaderId").setValue(c.getUserId());
        Ext.getCmp("HourlyRatesButton").setDisabled(!0);
        Ext.getCmp("HourlyRatesButton").setHidden(!haveRight("HourlyRate"));
        a.getParentProjectId().setHidden(haveRight("RootProject"));
        a.getParentProjectId().setDisabled(haveRight("RootProject"));
        a.getParentProjectSearchButton().setHidden(haveRight("RootProject"));
        a.getParentProjectSearchButton().setDisabled(haveRight("RootProject"));
        view = g.push(b);
        MEM.loadSpinner.hide();
      });
    });
  },
  onOpenArchive: function (d) {
    if (d !== "project") {
      return;
    }
    var a = this,
      c = a.getMynavigationview(),
      b = a.getArchiveList();
    view = c.push(b);
  },
  onToolbarAdd: function (b) {
    var a = this.getMynavigationview(),
      c;
    if (!this.boolSetting("ProjectToolbar")) {
      return;
    }
    if (b === "projectform" && !Ext.getCmp("myprojecttoolbar")) {
      a.add(this.getMyprojecttoolbar());
      mybutton = Ext.getCmp("myawobutton");
      mybutton.setHidden(!this.boolSetting("AWO"));
      mybutton = Ext.getCmp("myprojectdiarybutton");
      mybutton.setHidden(!this.boolSetting("Diary"));
      mybutton = Ext.getCmp("mysupplierinvoicebutton");
      mybutton.setHidden(!this.boolSetting("SupplierInvoices"));
      mybutton = Ext.getCmp("myclientinvoicebutton");
      mybutton.setHidden(!this.boolSetting("ClientInvoices"));
      mybutton = Ext.getCmp("myhoursbutton");
      mybutton.setHidden(!this.boolSetting("HoursMenu"));
    }
  },
  onToolbarRemove: function () {
    this.getMynavigationview().remove(this.getMyprojecttoolbar(), !0);
  },
  setButtons: function () {
    var a = this,
      c = a.getProjectStatusButtons(),
      b = Ext.getStore("MyProjectStatusStore");
    if (c.getItems().length > 0) {
      return;
    }
    b.meClearFilter();
    b.load({ callback: a.onProjectStatusStoreLoaded, scope: a });
  },
  onProjectStatusStoreLoaded: function (n, m, k) {
    var c = this,
      l = Ext.getStore("MyProjectStatusStore"),
      j = c.intSetting("ProjectFilter");
    if (k) {
      var g = 1,
        h,
        i,
        b,
        f,
        a = [],
        d = c.getProjectStatusButtons(),
        e = c.intSetting("MobileProjectStatusCodeMax");
      a.push({
        xtype: "button",
        html:
          "<span style='background-color: grey'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
          T("All"),
        cls: "my-status-button",
        text: 0,
        pressed: !1,
      });
      l.each(function (c) {
        b = c.get("Id");
        f = c.get("StatusCode");
        if (isNaN(e) || f <= e) {
          if (j == b) {
            h = g;
          }
          g += 1;
          i = "background-color: " + c.get("StatusColor");
          a.push({
            xtype: "button",
            html:
              "<span style='" +
              i +
              "'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
              c.get("StatusName"),
            cls: "my-status-button",
            text: b,
            pressed: !0,
          });
        }
      });
      d.add(a);
      d.setPressedButtons([h]);
      if (!Ext.os.is.Android) {
        Ext.Viewport.setHeight("100%");
        Ext.Viewport.setWidth("100%");
      }
    }
  },
  onCustomerIdChange: function (g, c, f) {
    var i = this,
      b = Ext.getStore("MyCustomerContactListStore"),
      e = Ext.getStore("MyCustomerListStore"),
      a = Ext.getStore("ProjectFormPanel_MyCustomerContactListStore"),
      h = i.getProjectForm(),
      d = h.getRecord();
    if (d) {
      d.set("CustomerId", c);
      d.set("CustomerName", f);
    }
    if (parseInt(c, 10) > 0) {
      b.meClearFilter();
      b.meAddFilter({ property: "CustomerId", value: parseInt(c, 10) });
      b.meAddFilter({ property: "Disabled", value: !1 });
      b.load();
      a.meClearFilter();
      a.meAddFilter({ property: "CustomerId", value: parseInt(c, 10) });
      a.meAddFilter({ property: "Disabled", value: !1 });
      a.load();
    }
    this.styleFieldByValue(g, e, "CreditRisk", "creditrisk-warning");
  },
  onSaveProjectsTap: function (u, t, q, r) {
    var c = this,
      p = Ext.getStore("MyProjectStore"),
      e = Ext.getStore("MyProjectListStore"),
      n = Ext.getStore("MyFilteredProjectListStore"),
      h = Ext.getStore("MyProjectArchiveListStore"),
      o = Ext.getStore("MyCloneProjectListStore"),
      m = Ext.getStore("MyCloneProjectListAllStore"),
      b = c.getProjectForm(),
      s = c.getMynavigationview(),
      a = b.getRecord(),
      f = b.getValues(),
      g = b.getFields().ParentProjectId,
      l = g ? g.getStore() : null,
      d = a.get("ParentProjectId"),
      i,
      j,
      k = !1;
    if (!checkRequired(b)) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return !1;
    }
    if (!f.ParentProjectId && d && !l.findRecord("Id", d)) {
      f.ParentProjectId = d;
    }
    a.set(f);
    a.setProxy(p.getProxy());
    if (isNaN(a.getId())) {
      a.set("Id", null);
      k = !0;
    }
    a.save(
      {
        success: function (p, s) {
          if (k) {
            b.setRecord(p);
            i = Ext.getCmp("CustomerId").getValue();
            j = a.get("Id");
            e.clearFilter();
            e.meClearFilter();
            e.load({
              callback: function () {
                if (!1 && haveRight("HourlyRate")) {
                  c.onShowHourlyRates(!1, i, j);
                }
              },
            });
            o.add(a);
            n.add(a);
            m.add(a);
          } else {
            var g = Ext.getStore("MyProjectStatusStore"),
              f = g.findRecord("Id", a.get("ProjectStatusId"), 0, !1, !0, !0),
              l = f ? f.get("StatusCode") : null,
              d = parseInt(getSetting("MobileProjectStatusCodeMax"), 10);
            if (!isNaN(d) && l >= d) {
              h.currentPage = 1;
              h.load({
                callback: function () {
                  c.onArchiveStoreLoaded();
                },
              });
            }
            c.onProjectSaved();
          }
        },
        failure: function () {
          MEM.serverError.show("string", "Could not save record");
        },
      },
      this
    );
  },
  onProjectSaved: function () {
    var c = this,
      a = this.getProjectlist().getStore(),
      b = this.getMynavigationview();
    a.meClearFilter();
    popPanel = function () {
      b.pop();
    };
    a.on("load", popPanel, c, { single: !0 });
    a.load();
  },
  validate: function (a) {},
  loadUserStores: function (d) {
    var a = Ext.getStore("MyUserListStore"),
      c = Ext.getStore("MyWorkleaderStore"),
      b = Ext.getStore("MyProjectManagerStore");
    a.each(function (a) {
      c.add(a);
      b.add(a);
    });
    d();
  },
  loadStores: function (e) {
    var f = this,
      a,
      c = [
        "MyCustomerListStore",
        "MyUserListStore",
        "MyProjectStatusStore",
        "MyPriceTypeStore",
        "MyProjectTypeStore",
        "MyProjectWriteRightStore",
      ],
      b = c.length,
      d = function () {
        b -= 1;
        if (b == 0 && e) {
          e();
        }
      };
    Ext.each(
      c,
      function (b) {
        a = Ext.getStore(b);
        if (!a.isLoaded()) {
          a.meClearFilter();
          if (b == "MyProjectWriteRightStore") {
            var c = Ext.getStore("MyProjectWriteRightStore");
            f.addStatusFilter(c);
          }
          a.load();
          a.on("load", d);
        } else {
          d();
        }
      },
      f
    );
  },
  projectLoad: function (l, n) {
    var a = this,
      e = a.getProjectForm(),
      g = Ext.create("MEM.view.project.MyProjectCarouselPanel"),
      m,
      i = a.getMynavigationview(),
      f = l[0],
      k = Ext.getStore("MyCustomerListStore"),
      c = f.get("CustomerId"),
      d = Ext.getStore("MyCustomerContactListStore"),
      b = Ext.getStore("ProjectFormPanel_MyCustomerContactListStore"),
      h = function () {
        e.setRecord(f);
        if (a.intSetting("EconomyPanel")) {
          g.add(e);
          g.add({ xtype: "myeconomypanel", id: "economy" });
          i.push(g);
          Ext.getCmp("HourlyRatesButton").setDisabled(!1);
        } else {
          i.push(e);
          Ext.getCmp("HourlyRatesButton").setDisabled(!1);
        }
        a.getParentProjectId().setHidden(!0);
        a.getParentProjectId().setDisabled(!0);
        a.getParentProjectSearchButton().setHidden(!0);
        a.getParentProjectSearchButton().setDisabled(!0);
        Ext.getCmp("HourlyRatesButton").setHidden(!haveRight("HourlyRate"));
      };
    CURRENT_PROJECTID = f.get("Id");
    CURRENT_PROJECTNO = f.get("ProjectNo");
    if (c) {
      d.meClearFilter();
      d.meAddFilter({ property: "CustomerId", value: parseInt(c, 10) });
      d.meAddFilter({ property: "Disabled", value: !1 });
      d.load();
      b.meClearFilter();
      b.meAddFilter({ property: "CustomerId", value: parseInt(c, 10) });
      b.meAddFilter({ property: "Disabled", value: !1 });
      b.addListener("load", h, a, { single: !0 });
      b.load();
    } else {
      h();
    }
    var j = e.down("#CustomerId").setValue(c);
    a.styleFieldByValue(j, k, "CreditRisk", "creditrisk-warning");
  },
  onMyProjectOverlayItemTap: function (d, h, g, e, i, f) {
    var a = this,
      b = d.up("myprojectoverlay").getCurrentProjectId();
    switch (e.get("Action")) {
      case "projectTap":
        a.projectTap(b);
        break;
      case "hoursTap":
        a.hoursTap(b);
        break;
      case "costTap":
        COST_MODE = !0;
        a.costrevenueTap(b);
        break;
      case "revenueTap":
        COST_MODE = !1;
        a.costrevenueTap(b);
        break;
      case "AWOTap":
        TIME_MODE = !1;
        AWO_MODE = !0;
        a.AWOTap(b);
        break;
      case "workorderTap":
        TIME_MODE = !1;
        AWO_MODE = !0;
        a.workorderTap(b);
        break;
      case "economyTap":
        a.economyTap(b);
        break;
      case "mapTap":
        TIME_MODE = !1;
        AWO_MODE = !0;
        MEM.app.getController("WorkOrder").loadSelectStores();
        var c = Ext.getStore("MyUserFavoriteListStore");
        if (!c.isLoaded()) {
          c.meAddFilter(["UserId", "=", a.getApplication().getUserId()]);
          c.meAddFilter(["Disabled", "=", !1]);
          c.load();
        }
        a.mapTap(b);
        break;
    }
  },
  onMySearchOverlayItemTap: function (b, h, g, d, i, f) {
    var c = this,
      a = b.up("mysearchoverlay").getCurrentProjectId(),
      e = b.up("mysearchoverlay").getAdditional();
    switch (d.get("Action")) {
      case "projectSearchTap":
        c.projectTap(parseInt(a));
        break;
      case "economySearchTap":
        c.economyTap(parseInt(a));
        break;
    }
  },
  onMyProjectPanelListItemTap: function (f, h, c, b, e, g) {
    var d = this,
      a = d.getOverlay();
    a.filterData();
    if (e.getTarget(".x-list-disclosure")) {
      d.onMyProjectPanelListDisclose(f, b, c, h, e, g);
    } else {
      a.setCurrentProjectId(b.getId());
      a.showBy(c);
    }
  },
  onMyProjectArchivePanelListItemTap: function (f, h, c, b, e, g) {
    var d = this,
      a = d.getOverlay();
    a.filterData();
    if (e.getTarget(".x-list-disclosure")) {
      d.onMyProjectPanelListDisclose(f, b, c, h, e, g);
    } else {
      a.setCurrentProjectId(b.getId());
      a.showBy(c);
    }
  },
  economyTap: function (a) {
    var c = this,
      b = c.getMynavigationview();
    this.onCloseTap();
    CURRENT_PROJECTID = a;
    b.push({ xtype: "myeconomypanel", id: "economy" });
  },
  mapTap: function (d) {
    var a = this,
      e = a.getMynavigationview(),
      c = MEM.app.getController("MainMenu"),
      b = c.ensureSubPanel("Map");
    this.onCloseTap();
    CURRENT_PROJECTID = d;
    b.me_viewstate = "project";
    e.push(b);
    a.hideAdd();
    a.hideArchive();
  },
  projectTap: function (b) {
    var a = this;
    a.selectProject(b);
    a.onCloseTap();
    a.hideArchive();
  },
  hoursTap: function (a) {
    var c = this,
      g = c.getHourForm(),
      f = this.getMynavigationview(),
      h,
      e = Ext.getStore("MyTimeStore"),
      d = Ext.getStore("MyWorkOrderListStore"),
      b = Ext.getStore("MyProjectLimitedStore");
    if (a == null) {
      a = b.getAt(0).get("Id");
    }
    if (haveRight("ApproveTime")) {
      g.addCls("allow-approve");
    }
    b.meClearFilter();
    b.meAddFilter(["Id", "=", a]);
    b.load({
      callback: function () {
        CURRENT_PROJECTNO = b.getAt(0).raw.ProjectNo;
        d.meClearFilter();
        d.meAddFilter(["ProjectId", "=", a]);
        d.load({
          callback: function () {
            e.meClearFilter();
            e.meAddFilter(["ProjectId", "=", a]);
            e.load({
              callback: function () {
                h = f.push(g);
                f.down("titlebar").setTitle(
                  isPhone
                    ? T("Hours")
                    : T("Booked hours - projectno") + " " + CURRENT_PROJECTNO
                );
                c.onCloseTap();
              },
            });
          },
        });
      },
    });
    c.hideAdd();
    c.hideArchive();
  },
  costrevenueTap: function (a) {
    var c = this,
      g = c.getCostRevenueForm(),
      f = this.getMynavigationview(),
      h,
      d = COST_MODE
        ? Ext.getStore("MyCostStore")
        : Ext.getStore("MyRevenueStore"),
      b = Ext.getStore("MyProjectLimitedStore"),
      e = Ext.getStore("MyWorkOrderListStore");
    if (a == null) {
      a = b.getAt(0).get("Id");
    }
    e.meClearFilter();
    e.meAddFilter(["ProjectId", "=", a]);
    e.load({
      callback: function () {
        b.meClearFilter();
        b.meAddFilter(["Id", "=", a]);
        b.load({
          callback: function () {
            CURRENT_PROJECTNO = b.getAt(0).raw.ProjectNo;
            d.meClearFilter();
            d.meAddFilter(["ProjectId", "=", a]);
            d.meAddFilter(["RevenueTransaction", "=", !COST_MODE]);
            d.load({
              callback: function () {
                h = f.push(g);
                if (isPhone) {
                  f.down("titlebar").setTitle(
                    COST_MODE ? T("Costs") : T("Revenues")
                  );
                } else {
                  f.down("titlebar").setTitle(
                    (COST_MODE
                      ? T("Booked costs - projectno")
                      : T("Booked revenues - projectno")) +
                      " " +
                      CURRENT_PROJECTNO
                  );
                }
                c.getCostRevenueList().setStore(
                  COST_MODE ? "MyCostStore" : "MyRevenueStore"
                );
                c.onCloseTap();
              },
            });
          },
        });
      },
    });
    c.hideAdd();
    c.hideArchive();
  },
  AWOTap: function (a) {
    var c = this,
      f = c.getAWOForm(),
      e = this.getMynavigationview(),
      g,
      d = Ext.getStore("MyAdditionalWorkOrderStore"),
      b = Ext.getStore("MyProjectLimitedStore");
    if (a == null) {
      a = b.getAt(0).get("Id");
    }
    CURRENT_PROJECTID = a;
    b.meClearFilter();
    b.meAddFilter(["Id", "=", a]);
    b.load({
      callback: function () {
        CURRENT_PROJECTNO = b.getAt(0).raw.ProjectNo;
        d.meClearFilter();
        d.meAddFilter(["ProjectId", "=", a]);
        d.load({
          callback: function () {
            g = e.push(f);
            c.onCloseTap();
          },
        });
      },
    });
    c.hideAdd();
    c.hideArchive();
  },
  workorderTap: function (a) {
    var b = this,
      c = MEM.app.getController("MainMenu"),
      e = c.ensureSubPanel("WorkOrder"),
      d = this.getMynavigationview(),
      f;
    if (a == null) {
      a = Ext.getStore("MyProjectStore").getAt(0).get("Id");
    }
    CURRENT_PROJECTID = a;
    MEM.loadSpinner.showSpinner("workorderlist");
    MEM.app.getController("WorkOrder").setProjectMode(!0);
    f = d.push(e);
    b.onCloseTap();
    b.hideAdd();
    b.hideArchive();
  },
  selectProject: function (c) {
    var a = this,
      b = Ext.getStore("MyProjectStore");
    MEM.loadSpinner.show();
    a.loadStores(function () {
      a.loadUserStores(function () {
        a.getApplication().fireEvent("setadditemtype", "projectform");
        b.meClearFilter();
        b.meAddFilter(["Id", "=", c]);
        b.load({
          callback: function (b, d, e) {
            a.projectLoad(b, c);
            MEM.loadSpinner.hide();
          },
        });
      });
    });
  },
  onMyProjectPanelListDisclose: function (d, b, f, g, h, e) {
    var a = this,
      c = b.getId();
    a.selectProject(c);
    a.hideAdd();
    a.hideArchive();
  },
  onMyProjectPanelListPainted: function () {
    var a = this;
    a.setButtons();
    a.showArchive();
    a.showAdd();
    a.showFavorites();
    a.hideToolbar();
    a.filter();
  },
  onMyProjectArchivePanelListPainted: function () {
    var a = this;
    a.hideArchive();
    a.hideAdd();
  },
  onArchiveStoreLoaded: function () {
    var b = this,
      a = b.getProjectarchivelist().getStore();
    a.setRemoteSort(!1);
    a.filterBy(function (a) {
      return a.get("ProjectStatusId") > -1;
    });
    a.sort([{ property: "Project", direction: "ASC" }]);
    a.setRemoteSort(!0);
    a.setSorters([{ property: "StatusCode", direction: "ASC" }]);
  },
  filter: function (b, a) {
    var c = this,
      a = c.getProjectlist().getStore(),
      e,
      d = 1,
      f,
      g = c.intSetting("ProjectFilter");
    b = parseInt(b, 10);
    if (isNaN(b)) {
      for (d; d < c.getProjectStatusButtons().items.length; d++) {
        var h = c.getProjectStatusButtons().innerItems[d];
        if (h.element.hasCls("x-button-pressed")) {
          g = h.getText();
          break;
        }
      }
    }
    e = isNaN(b) ? g : b;
    a.suspendEvents();
    a.clearFilter();
    if (e > 0) {
      a.filterBy(function (c) {
        return c.get("ProjectStatusId") == e;
      });
    } else {
      f = c.intSetting("StatusFinished");
      a.filterBy(function (c) {
        return c.get("StatusCode") != f;
      });
    }
    a.resumeEvents();
    a.sort([{ property: "Project", direction: "ASC" }]);
  },
  showAdd: function () {
    this.getApplication().fireEvent("setadditemtype", "project");
  },
  showArchive: function () {
    var a = this.intSetting("MobileProjectStatusCodeMax");
    if (!isNaN(a)) {
      this.getApplication().fireEvent("setarchiveitemtype", "project");
    }
  },
  hideAdd: function () {
    this.getApplication().fireEvent("clearadditemtype");
    this.getApplication().fireEvent("cleartimetype");
  },
  hideArchive: function () {
    this.getApplication().fireEvent("cleararchiveitemtype");
  },
  hideFavorites: function () {
    this.getApplication().fireEvent("clearfavoritestype");
  },
  hideToolbar: function () {
    this.getApplication().fireEvent("removetoolbar");
  },
  onFavorites: function () {
    var a = this;
    a.onStartSearch(!0, none);
  },
  onRatesSave: function () {
    var a = this;
    a.ratesSave(function () {
      a.customerRatesSave(function () {
        a.projectRatesSave(function () {
          a.onShowHourlyRates(!0);
        });
      });
    });
  },
  ratesSave: function (a) {
    var d = this,
      b = Ext.getStore("MyProfessionItemStore"),
      c;
    c = Ext.getCmp("myProfessionItemId").getValue();
    if (
      !Ext.getCmp("myPriceUnit").isDirty() &&
      !Ext.getCmp("myCostUnit").isDirty()
    ) {
      if (a) {
        a();
      }
      return;
    }
    if (!b.isLoaded()) {
      alert(T("ProfessionItems not loaded"));
    } else {
      rec = b.findRecord("Id", parseInt(c, 10));
      rec.set("PriceUnit", Ext.getCmp("myPriceUnit").getValue());
      rec.set("CostUnit", Ext.getCmp("myCostUnit").getValue());
      rec.setProxy(b.getProxy());
      rec.save(
        {
          success: function () {
            if (a) {
              a();
            }
          },
          failure: function () {
            MEM.serverError.show();
          },
        },
        this
      );
    }
  },
  customerRatesSave: function (b) {
    var g = this,
      a = Ext.getStore("MyCustomerPricelistItemStore"),
      c,
      f,
      d,
      e;
    if (!Ext.getCmp("myCustomerPriceUnit").isDirty()) {
      if (b) {
        b();
      }
      return;
    }
    f = Ext.getCmp("myHourlyRateCustomerId").getValue();
    d = Ext.getCmp("myCustomerPriceUnit").getValue();
    e = Ext.getCmp("myProfessionItemId").getValue();
    a.meClearFilter();
    a.meAddFilter(["CustomerId", "=", parseInt(f, 10)]);
    a.meAddFilter(["professionItemId", "=", parseInt(e, 10)]);
    a.load({
      callback: function (g) {
        rec = g[0];
        if (rec) {
          rec.set("PriceUnit", d);
          rec.setProxy(a.getProxy());
          rec.save(
            {
              success: function () {
                if (b) {
                  b();
                }
              },
              failure: function () {
                MEM.serverError.show();
              },
            },
            this
          );
        } else {
          c = a.add(
            Ext.ModelMgr.create(
              { PriceUnit: d, CustomerId: f, ProfessionItemId: e },
              a.getModel()
            )
          )[0];
          c.setProxy(a.getProxy());
          if (isNaN(c.getId())) {
            c.set("Id", null);
          }
          c.save(
            {
              success: function () {
                if (b) {
                  b();
                }
              },
              failure: function () {
                MEM.serverError.show();
              },
            },
            this
          );
        }
      },
    });
  },
  projectRatesSave: function (b) {
    var g = this,
      a = Ext.getStore("MyProjectPricelistItemStore"),
      c,
      f,
      e,
      d;
    if (!Ext.getCmp("myProjectPriceUnit").isDirty()) {
      if (b) {
        b();
      }
      return;
    }
    f = Ext.getCmp("myHourlyRateProjectId").getValue();
    e = Ext.getCmp("myProjectPriceUnit").getValue();
    d = Ext.getCmp("myProfessionItemId").getValue();
    a.meClearFilter();
    a.meAddFilter(["ProjectId", "=", parseInt(f, 10)]);
    a.meAddFilter(["professionItemId", "=", parseInt(d, 10)]);
    a.load({
      callback: function (g) {
        rec = g[0];
        if (rec) {
          rec.set("PriceUnit", e);
          rec.setProxy(a.getProxy());
          rec.save(
            {
              success: function () {
                if (b) {
                  b();
                }
              },
              failure: function () {
                MEM.serverError.show();
              },
            },
            this
          );
        } else {
          c = a.add(
            Ext.ModelMgr.create(
              { PriceUnit: e, ProjectId: f, ProfessionItemId: d },
              a.getModel()
            )
          )[0];
          c.setProxy(a.getProxy());
          if (isNaN(c.getId())) {
            c.set("Id", null);
          }
          c.save(
            {
              success: function () {
                if (b) {
                  b();
                }
              },
              failure: function () {
                MEM.serverError.show();
              },
            },
            this
          );
        }
      },
    });
  },
  onStartSearch: function (f, e) {
    var b = this,
      d = [],
      g = b.getApplication(),
      c = b.getProjectSearchList().getStore(),
      a = b.userTimeStore;
    if (f || !Ext.Array.contains(b.projectSearchEnteredModes, e)) {
      b.clearSearchModes(e);
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["UserId", "=", parseInt(g.getUserId(), 10)]);
      a.meAddFilter([
        "RegDate",
        ">",
        Ext.Date.add(new Date(), Ext.Date.DAY, -14),
      ]);
      a.load({
        callback: function (g) {
          a.data.getSorters().clear();
          a.sort("RegDate", "DESC");
          a.each(function (b) {
            var a = b.get("ProjectId");
            if (!Ext.Array.contains(d, a)) {
              d.push(a);
              if (d.length > 9) {
                return !1;
              }
            }
          });
          c.clearFilter();
          c.meClearFilter();
          c.meAddFilter(["Id", "=", d]);
          b.addStatusFilter(c);
          c.load({ limit: 10 });
        },
      });
    }
  },
  addStatusFilter: function (e, f) {
    var g = this.getMynavigationview(),
      d = g.innerItems,
      c = "",
      b = 0,
      a = 0;
    switch (d.length) {
      case 0:
        c = "";
        break;
      case 1:
        c = d[0].getItemId();
        break;
      default:
        c = d[d.length - 2].getItemId();
        break;
    }
    switch (c) {
      case "mytimerowform":
        b = this.intSetting("MobileProjectStatusCodeMin");
        a = this.intSetting("MobileProjectStatusCodeMax");
        break;
      default:
        if (!!f) {
          b = this.intSetting("MobileProjectStatusCodeMin");
          a = this.intSetting("MobileProjectStatusCodeMax");
        }
    }
    if (b > 0) {
      e.meAddFilter(["StatusCode", ">=", b]);
    } else {
      e.meAddFilter(["StatusCode", ">=", STATUS_NOTED]);
    }
    if (a > 0) {
      e.meAddFilter(["StatusCode", "<=", a]);
    } else {
      e.meAddFilter(["StatusCode", "<", STATUS_FINISHED]);
    }
  },
  onStartProjectSearch: function (c) {
    var b = this,
      a = b.getProjectSearchList().getStore();
    b.clearSearchModes(c);
    a.clearFilter();
    a.meClearFilter();
    b.addStatusFilter(a);
    a.load({ limit: 100 });
  },
  onStartDiarySearch: function (e) {
    var a = this,
      d = a.getProjectSearchList().getStore(),
      b = a.getProjectSearchName().getValue(),
      c = a.getProjectSearchNo().getValue();
    if (!Ext.Array.contains(a.projectSearchEnteredModes, e)) {
      a.clearSearchModes(e);
      if (b && b.length > 0) {
        a.searchProject(d, b, c, "ProjectName", "ProjectNo", 1);
      } else {
        if (c && c.length > 0) {
          a.searchProject(d, c, b, "ProjectNo", "ProjectName", 1);
        } else {
          a.searchProject(d, "", "", "ProjectNo", "ProjectName", 0);
        }
      }
    }
  },
  clearSearchModes: function (b) {
    var a = this;
    a.getProjectSearchNo().setValue("");
    a.getProjectSearchName().setValue("");
    a.projectSearchEnteredModes = [];
    a.projectSearchEnteredModes.push(b);
  },
  searchProject: function (e, b, c, f, g, d) {
    var a = Ext.getStore(e);
    if (b.length >= d) {
      a.clearFilter();
      a.meClearFilter();
      if (c.length >= d && c.length > 0) {
        a.meAddFilter([g, "%", "%" + c]);
      }
      if (b.length > 0) {
        a.meAddFilter([f, "%", "%" + b]);
      }
      if (DIARY_MODE) {
        a.getProxy().getExtraParams().rightsmodule = "Diary";
      }
      this.addStatusFilter(a);
      a.load({ limit: 100 });
      if (DIARY_MODE) {
        delete a.getProxy().getExtraParams().rightsmodule;
      }
    }
  },
  onMyProjectListItemTap: function (j, m, l, b, n, k) {
    var e = this,
      d,
      c,
      f = this.getMynavigationview(),
      h = f.innerItems[f.innerItems.length - 2].getItemId(),
      i,
      a;
    CURRENT_WORKORDERID = null;
    CURRENT_PROJECTID = b.get("Id");
    CURRENT_PROJECTNAME = b.get("ProjectName");
    switch (h) {
      case "mytimerowform":
        a = e.getTimeProjectId();
        d = a.getStore();
        c = e.getTimeWorkOrderId().getStore();
        break;
      case "MyWorkOrderFormPanel":
        a = e.getWoProjectId();
        d = a.getStore();
        break;
      case "MyProjectFormPanel":
        a = e.getParentProjectId();
        d = a.getStore();
        break;
      case "MyFilePanel":
        a = e.getFileProjectId();
        d = a.getStore();
        c = e.getFileWorkOrderId().getStore();
        break;
    }
    var g = function (d, a, c) {
      if (a) {
        a.setValue(c.getId());
      }
      d.pop();
    };
    if (a && d) {
      if (d.find("Id", b.getId()) != -1) {
        g(f, a, b);
      } else {
        d.load({
          callback: function () {
            if (c) {
              c.clearFilter();
              c.meClearFilter();
              c.meAddFilter(["ProjectId", "=", b.getId()]);
              c.load({
                callback: function () {
                  g(f, a, b);
                },
              });
            } else {
              g(f, a, b);
            }
          },
        });
      }
    }
    if (h == "MyMainMenuPanel") {
      MEM.app.getController("Diary").initDiary(b);
    }
    e.hideArchive();
  },
  onMyHourlyRatesListItemTap: function (h, g, f, c, i, e) {
    var b = this,
      d = this.getMynavigationview(),
      a = this.getRatesForm();
    MEM.loadSpinner.show();
    try {
      d.push(a);
      a.setRecord(c);
    } catch (j) {
      MEM.loadSpinner.hide(j);
    } finally {
      MEM.loadSpinner.hide();
    }
    b.hideAdd();
    b.hideArchive();
  },
});
Ext.namespace("MEM.check");
MEM.check.bool = function (a) {
  return a ? T("Yes") : "";
};
Ext.define("MEM.view.time.MyTimeMonthForm", {
  extend: Ext.form.Panel,
  alias: "widget.mytimemonthform",
  scroll: "vertical",
  config: {
    cls: "mytimemonthform",
    currentDate: null,
    autoDestroy: !0,
    defaults: { labelWidth: "15%" },
    items: [
      {
        xtype: "container",
        height: 20,
        layout: { type: "card" },
        items: [
          {
            xtype: "label",
            id: "mymonthlabel",
            centered: !0,
            html: "YYYY MONTH",
          },
        ],
      },
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "textfield",
            docked: "top",
            label: T("Booked hours"),
            id: "mybookedhours",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            docked: "top",
            label: T("Working hours"),
            id: "myworkinghours",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            docked: "top",
            label: T("Break (h)"),
            id: "mybreakhours",
            listeners: {
              painted: function () {
                this.setHidden(!getSetting("Time.Timestamp.Show.Project") == 1);
              },
            },
            readOnly: !0,
          },
          {
            xtype: "textfield",
            docked: "top",
            label: T("Travel 1"),
            id: "mytravel1",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            docked: "top",
            label: T("Travel 2"),
            id: "mytravel2",
            readOnly: !0,
          },
          {
            xtype: "textfield",
            docked: "top",
            label: T("Travel 3"),
            id: "mytravel3",
            readOnly: !0,
          },
        ],
      },
      {
        xtype: "container",
        items: [
          {
            html:
              '<div class="my-tpl-item my-wide4" align="left">' +
              T("Date") +
              "</div>" +
              '<div class="my-tpl-item my-wide3 timestamp" align="center">' +
              T("Start time") +
              "</div>" +
              '<div class="my-tpl-item my-wide2 timestamp" align="center">' +
              T("Break (h)") +
              "</div>" +
              '<div class="my-tpl-item my-wide3 timestamp" align="center">' +
              T("Stop time") +
              "</div>" +
              '<div class="my-tpl-item my-wide3" align="left">' +
              T("Hours") +
              "</div>" +
              '<div class="my-tpl-item" align="center">' +
              T("Type") +
              "</div>" +
              '<div class="my-tpl-item" align="center">' +
              T("Travel1km") +
              "</div>" +
              '<div class="my-tpl-item" align="center">' +
              T("Travel2km") +
              "</div>" +
              '<div class="my-tpl-item" align="center">' +
              T("Allow.") +
              "</div>",
            border: 0,
            cls: "myHeader",
            height: isPhone ? 30 : 40,
          },
          {
            xtype: "myinlinelist",
            itemId: "monthrows",
            store: "MyMonthTimeStore",
            scrollable: null,
            cls: "my-rowlist",
            headerItem: {
              html:
                '<div class="my-tpl-item my-wide4" align="left">' +
                T("Date") +
                "</div>" +
                '<div class="my-tpl-item my-wide3 timestamp" align="center">' +
                T("Start time") +
                "</div>" +
                '<div class="my-tpl-item my-wide2 timestamp" align="center">' +
                T("Break (h)") +
                "</div>" +
                '<div class="my-tpl-item my-wide3 timestamp" align="center">' +
                T("Stop time") +
                "</div>" +
                '<div class="my-tpl-item my-wide3" align="center">' +
                T("Hours") +
                "</div>" +
                '<div class="my-tpl-item" align="center">' +
                T("Type") +
                "</div>" +
                '<div class="my-tpl-item" align="center">' +
                T("Travel1km") +
                "</div>" +
                '<div class="my-tpl-item" align="center">' +
                T("Travel2km") +
                "</div>" +
                '<div class="my-tpl-item" align="center">' +
                T("Allow.") +
                "</div>",
              cls: "myHeader",
            },
            itemTpl: [
              '<div class="my-{[values.Absence ? "abs" : "prj"]}-line">' +
                '<div class="my-tpl-item my-wide4" align="left">&nbsp;{[values.RegDate.substr(2,10)]}</div>' +
                '<div class="my-tpl-item my-wide3 timestamp"" align="center">&nbsp;{StartTime_fmt}</div>' +
                '<div class="my-tpl-item my-wide2 timestamp"" align="center">&nbsp;{BreakTime_fmt}</div>' +
                '<div class="my-tpl-item my-wide3 timestamp"" align="center">&nbsp;{StopTime_fmt}</div>' +
                '<div class="my-tpl-item my-wide3" align="center">&nbsp;{Hours_fmt}</div>' +
                '<div class="my-tpl-item" align="center">&nbsp;{[values.Absence ? "' +
                T("Absence") +
                '" : "' +
                T("Presence") +
                '" ]}</div>' +
                '<div class="my-tpl-item" align="center">&nbsp;{Travel1Km_fmt}</div>' +
                '<div class="my-tpl-item" align="center">&nbsp;{Travel2Km_fmt}</div>' +
                '<div class="my-tpl-item" align="center">&nbsp;{AllowanceQty_fmt}</div>' +
                "</div>",
            ],
          },
        ],
      },
    ],
  },
  constructor: function (a) {
    this.callParent([a]);
    this.on("painted", this.onPainted, this);
  },
  initialize: function () {
    Ext.Viewport.on("orientationchange", "onOrientationChange", this);
    this.callParent(arguments);
  },
  onPainted: function () {
    this.onOrientationChange(Ext.Viewport, Ext.Viewport.getOrientation());
  },
  onOrientationChange: function (c, b) {
    var a = this;
    if (b == "landscape" && getSetting("Time.Timestamp.Show.Project") == 1) {
      a.removeCls("hide-timestamps");
    } else {
      a.addCls("hide-timestamps");
    }
  },
});
Ext.define("MEM.ux.field.MyRestrictedNumberField", {
  extend: Ext.field.Number,
  alias: "widget.myrestrictednumberfield",
  initialize: function () {
    this.callParent();
    var a = this.getComponent();
    a.input.on({ scope: this, keydown: "onKeyDown" });
  },
  onKeyDown: function (b) {
    var a = b.browserEvent.keyCode;
    if (
      !(a >= 48 && a <= 57) &&
      !(a >= 96 && a <= 105) &&
      a !== 8 &&
      a !== 46 &&
      a !== 110 &&
      a !== 188 &&
      a !== 190
    ) {
      b.stopEvent();
    }
  },
});
Ext.define("MEM.view.time.MyTimeRowForm", {
  extend: Ext.form.Panel,
  alias: "widget.mytimerowform",
  scroll: "vertical",
  currentDate: null,
  config: {
    title: "",
    cls: "mytimerowform",
    autoDestroy: !1,
    styleHtmlContent: !0,
    defaults: {
      labelWidth: LABEL_WIDTH,
      defaults: {
        labelWidth: LABEL_WIDTH,
        defaults: { labelWidth: LABEL_WIDTH },
      },
    },
    items: [
      {
        xtype: "fieldset",
        items: [
          {
            xtype: "hiddenfield",
            id: "myTimeApproved",
            name: "Approved",
            listeners: {
              change: function (d, a, b, c) {
                _approved = a == "true";
              },
            },
          },
          {
            xtype: "hiddenfield",
            id: "myTimeApproved2",
            name: "Approved2",
            listeners: {
              change: function (d, a, b, c) {
                _approved2 = a == "true";
              },
            },
          },
          {
            xtype: "hiddenfield",
            id: "myTimeId",
            name: "Id",
            listeners: {
              change: function (e, b, c, d) {
                var a = _approved || _approved2 || isNaN(b);
                this.up("mytimerowform").setFieldsDisabled(a);
              },
            },
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "myTimeProjectId",
                xtype: "myselectfield",
                itemId: "ProjectId",
                label: T("Project"),
                store: {
                  storeId: "TimeRowForm_MyProjectListStore",
                  type: "myprojectliststorealias",
                },
                displayField: "Project",
                valueField: "Id",
                autoSelect: !1,
                name: "ProjectId",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    Ext.getCmp("ProjectSearchButton").setLeft(
                      Ext.getCmp("myTimeProjectId").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "ProjectSearchButton",
                action: "projectSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            id: "myProjectFallback",
            xtype: "textfield",
            label: T("Project"),
            name: "Project",
            disabled: !0,
            hidden: !0,
          },
          {
            itemId: "myProjectStatus",
            xtype: "hiddenfield",
            label: T("Status"),
            name: "ProjectStatus",
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "myTimeWorkOrderId",
                xtype: "myselectfield",
                itemId: "WorkOrderId",
                label: T("WorkOrder") + "<br>" + T("AWO"),
                store: "MyCloneWorkOrderListStore",
                cls: "my-two-icons",
                displayField: "FullName",
                valueField: "Id",
                required: !0,
                name: "WorkOrderId",
                listeners: {
                  change: function (e, b, c, d) {
                    var a = !(
                      Number(b) > 0 &&
                      Number(Ext.getCmp("myTimeId").getValue()) > 0
                    );
                    this.up("mytimerowform").setFieldsDisabled(a);
                  },
                },
              },
              {
                margin: "0 0 0 -2.5em",
                id: "workOrderSearchButton",
                listeners: {
                  painted: function () {
                    this.setLeft(
                      this.up().down("myselectfield").getLabelWidth()
                    );
                    var a = this.up().down("#workOrderDescriptionButton");
                    if (a) {
                      if (isPhone) {
                        a.setTop(4 + this.element.getHeight());
                      } else {
                        a.setLeft(this.getLeft());
                        a.setBottom(0);
                      }
                    }
                  },
                },
                xtype: "button",
                action: "workOrderSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
              {
                id: "workOrderDescriptionButton",
                margin: isPhone ? "0 0 0 -2.5em" : "0 0 0 -4.8em",
                listeners: {
                  painted: function () {
                    var a = this.up().down("#workOrderSearchButton");
                    if (isPhone) {
                      this.setLeft(
                        this.up().down("myselectfield").getLabelWidth()
                      );
                      this.setTop(4 + a.element.getHeight());
                    } else {
                      a.setLeft(this.getLeft());
                      a.setBottom(0);
                    }
                  },
                },
                xtype: "button",
                text: "...",
                cls: "x-button-icon-standard ellipsisButton",
                iconMask: !0,
                action: "workOrderDescriptionShow",
              },
            ],
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "TimeCustomerId",
                itemId: "CustomerId",
                xtype: "textfield",
                label: T("Customer"),
                name: "CustomerName",
                readOnly: !0,
              },
              {
                id: "TimeContactButton",
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    this.setLeft(this.up().down("textfield").getLabelWidth());
                  },
                },
                xtype: "button",
                iconCls: "user",
                cls: "x-button-icon-standard",
                iconMask: !0,
                action: "contactShow",
              },
            ],
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "professionItemId",
                itemId: "myProfessionItemId",
                xtype: "myselectfield",
                label: T("Role/Timetype"),
                store: {
                  storeId: "TimeRowForm_MyProfessionItemStore",
                  type: "myprofessionitemstorealias",
                  remoteFilter: !1,
                  autoLoad: !0,
                },
                displayField: "ProfessionDescription",
                valueField: "Id",
                name: "ProfessionItemId",
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    Ext.getCmp("ProfessionSearchButton").setLeft(
                      Ext.getCmp("professionItemId").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "ProfessionSearchButton",
                action: "professionitemSearch",
                docked: "left",
                iconCls: "search",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "workHours",
                xtype: "numberfield",
                itemId: "myHours",
                required: !0,
                maxValue: 99999999,
                minValue: -99999999,
                label: T("Hours"),
                name: "Hours",
                tpl:
                  '<div class="x-input-el x-form-field x-input-number valuemask">' +
                  T("Work (h)") +
                  ": " +
                  "{Hours}   " +
                  T("Break (h)") +
                  ": " +
                  "{Break}</div>",
                listeners: {
                  painted: function () {
                    if (getSetting("Time.Timestamp.Show.Project") == 1) {
                      this.addCls("timestamp");
                      this.setReadOnly(!0);
                      var a = this.up(".mytimerowform").getRecord();
                      this.setData({
                        Hours: getFormattedNumeric(a, "Hours"),
                        Break: getFormattedNumeric(a, "BreakTime"),
                      });
                    }
                  },
                },
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    this.setHidden(
                      getSetting("Time.Timestamp.Show.Project") != 1
                    );
                    Ext.getCmp("AddTimeButton").setLeft(
                      Ext.getCmp("workHours").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "AddTimeButton",
                action: "addTime",
                docked: "left",
                iconCls: "add",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "myrestrictednumberfield",
            label: T("Allowance"),
            id: "allowanceField",
            name: "AllowanceQty",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.AllowanceQty") != "1");
              },
            },
          },
          {
            xtype: "togglefield",
            label: T("Piece work"),
            name: "PieceWork",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.PieceWork") != "1");
              },
            },
          },
          {
            xtype: "numberfield",
            label: T("Travel to debit (km)"),
            name: "Travel1Km",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.Travel1Km") == "0");
              },
            },
          },
          {
            xtype: "numberfield",
            label: T("Private travel (km)"),
            name: "Travel2Km",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.Travel2Km") == "0");
              },
            },
          },
          {
            xtype: "togglefield",
            label: T("Public transportation"),
            name: "Travel4",
            listeners: {
              painted: function (a) {
                this.setHidden(getSetting("MEM.Travel4") != "1");
              },
            },
          },
          {
            xtype: "mytextarea",
            label: T("Diarynote"),
            name: "Description",
            showPhrases: !0,
            listeners: {
              painted: function () {
                this.setRequired(
                  getSetting("MEM.required.Description") == "1" ? !0 : !1
                );
              },
            },
          },
          { xtype: "hiddenfield", id: "myInfoNoteId", name: "InfoNoteId" },
          {
            xtype: "mytextarea",
            id: "myInfoNote",
            showPhrases: !0,
            label: T("Own comment"),
          },
        ],
      },
      {
        xtype: "container",
        cls: "my-subcontainer",
        layout: { type: "hbox", pack: "center" },
        items: [
          {
            itemId: "deletetime",
            xtype: "button",
            flex: 1,
            ui: "decline",
            text: T("Delete"),
            action: "timeDelete",
          },
          {
            itemId: "savetime",
            xtype: "button",
            flex: 1,
            ui: "confirm",
            text: T("Save"),
            action: "timeSave",
          },
          {
            itemId: "newtime",
            xtype: "button",
            flex: 1,
            ui: "confirm",
            text: T("New"),
            action: "timeNew",
          },
        ],
      },
      {
        xtype: "toolbar",
        cls: "myresourceheader",
        ui: "light",
        title: T("Resourcerows"),
        layout: { align: "center", type: "hbox" },
        items: [
          {
            id: "rowaddwotime",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "right",
            text: T("Add"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "add",
            iconMask: !0,
          },
          { xtype: "spacer", docked: "right", width: 20 },
          {
            id: "rowsaddwotime",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Favorite"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "favorites",
            iconMask: !0,
          },
          {
            id: "addfiletime",
            xtype: "button",
            cls: "x-textbutton-icon-standard",
            disabledCls: "x-button-icon-disabled",
            docked: "left",
            text: T("Image"),
            iconAlign: isPhone ? "top" : "left",
            iconCls: "camera",
            iconMask: !0,
          },
        ],
      },
      {
        xtype: "myworkorderrowlist",
        store: "MyWorkOrderRowStore",
        id: "myTimeWorkOrderRowList",
        itemId: "WorkOrderRows",
        listeners: {
          painted: function (a) {
            this.up("mytimerowform").fireEvent("panelshow");
          },
        },
      },
    ],
  },
  setFieldsDisabled: function (a) {
    this.down("#rowaddwotime").setDisabled(a);
    this.down("#rowsaddwotime").setDisabled(a);
    this.down("#addfiletime").setDisabled(a);
    this.down("#WorkOrderRows").setDisabled(a);
  },
  disableTimeButtons: function (a) {
    this.down("#ProjectSearchButton").setDisabled(a);
    this.down("#deletetime").setDisabled(a);
    this.down("#savetime").setDisabled(a);
    this.down("#newtime").setDisabled(a);
  },
  getProjectId: function () {
    var a = this.down("#ProjectId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getWorkOrderId: function () {
    var a = this.down("#WorkOrderId").getValue();
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getCustomerId: function () {
    var a = this.down("button[action=contactShow]").customerId;
    if (a) {
      return parseInt(a, 10);
    }
    return undefined;
  },
  getRightStoreName: function () {
    if (this.getWorkOrderId()) {
      return "WorkOrderStore";
    } else {
      if (this.getProjectId()) {
        return "ProjectStore";
      } else {
        return undefined;
      }
    }
  },
  getRightStoreId: function () {
    return this.getWorkOrderId() || this.getProjectId() || undefined;
  },
});
Ext.define("MEM.view.time.MyTimeAbsenceForm", {
  extend: Ext.form.Panel,
  alias: "widget.mytimeabsenceform",
  scroll: "vertical",
  config: {
    title: "",
    cls: "mytimeabsenceform",
    autoDestroy: !1,
    defaults: { labelWidth: "15%" },
    items: [
      { xtype: "container", height: 20, layout: { type: "card" } },
      {
        xtype: "fieldset",
        items: [
          {
            itemId: "myTimeProjectId",
            xtype: "hiddenfield",
            name: "ProjectId",
          },
          {
            itemId: "myAbsenceTimeWorkOrderId",
            xtype: "myselectfield",
            label: T("Absence (WO)"),
            store: "MyCloneWAbsenceWorkOrderListStore",
            required: !0,
            displayField: "Name",
            valueField: "Id",
            name: "WorkOrderId",
          },
          {
            itemId: "myAbsenceProjectIdId",
            xtype: "myselectfield",
            label: T("Alternative absence project"),
            store: "MyCloneAlternativeAbsenceProjectStore",
            clearIcon: !0,
            displayField: "Project",
            valueField: "Id",
            name: "AbsenceProjectId",
            listeners: {
              painted: function () {
                if (Me.formValidateHidden("TimeStore", "AbsenceProjectId")) {
                  this.setHidden(!0);
                }
              },
            },
          },
          {
            xtype: "container",
            cls: "my-field",
            items: [
              {
                id: "absenceHours",
                xtype: "numberfield",
                itemId: "myHours",
                required: !0,
                maxValue: 99999999,
                minValue: -99999999,
                label: T("Hours"),
                name: "Hours",
                listeners: {
                  painted: function () {
                    this.setReadOnly(
                      getSetting("Time.Timestamp.Show.Absence") == 1
                    );
                  },
                },
              },
              {
                top: 2,
                margin: "0 0 0 -2.5em",
                listeners: {
                  painted: function () {
                    this.setHidden(
                      getSetting("Time.Timestamp.Show.Absence") != 1
                    );
                    Ext.getCmp("AddAbsenceButton").setLeft(
                      Ext.getCmp("absenceHours").getLabelWidth()
                    );
                  },
                },
                xtype: "button",
                id: "AddAbsenceButton",
                action: "addTime",
                docked: "left",
                iconCls: "add",
                cls: "x-button-icon-standard",
                iconMask: !0,
              },
            ],
          },
          {
            xtype: "textareafield",
            cls: "my-textfield",
            label: T("Description"),
            labelAlign: "top",
            name: "Description",
            autoComplete: !0,
            autoCapitalize: !0,
          },
        ],
      },
      {
        xtype: "container",
        cls: "my-subcontainer",
        layout: { type: "hbox", pack: "center" },
        items: [
          {
            id: "deleteabsence",
            xtype: "button",
            flex: 1,
            ui: "decline",
            text: T("Delete"),
            action: "absenceDelete",
          },
          {
            id: "saveabsence",
            xtype: "button",
            flex: 1,
            ui: "confirm",
            text: T("Save"),
            action: "absenceSave",
          },
        ],
      },
    ],
  },
  disableTimeButtons: function (a) {
    Ext.getCmp("deleteabsence").setDisabled(a);
    Ext.getCmp("saveabsence").setDisabled(a);
  },
});
Ext.define("MEM.view.time.MyTimeWorkOrderSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.mytimeworkordersearchpanel",
  config: {
    itemId: "MyTimeWorkOrderSearchPanel",
    title: T("Search workorder"),
    searchfields: [
      {
        label: T("Workorder number"),
        field: "WorkOrderNo",
        type: "workorderno",
      },
      { label: T("Workorder name"), field: "Name" },
    ],
    store: {
      storeId: "MyTimeWorkOrderSearchPanel_MyWorkOrderListStore",
      type: "myworkorderliststorealias",
      singleRequest: !0,
      autoLoad: !1,
      autoSync: !1,
      remoteFilter: !1,
      remoteSort: !0,
      sorters: [
        { property: "Addition", direction: "ASC" },
        { property: "WorkOrderNo", direction: "ASC" },
      ],
      grouper: null,
    },
    itemTpl: ["{FullName}"],
    minLength: 2,
  },
});
Ext.define("MEM.view.time.MyAddTimePanel", {
  extend: Ext.Panel,
  xtype: "myaddtimepanel",
  config: {
    cls: "myaddtimepanel",
    left: "50%",
    top: "50%",
    width: 300,
    modal: !0,
    hideOnMaskTap: !0,
    absence: !1,
    styleHtmlContent: !1,
    currentDate: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            listeners: {
              tap: function () {
                this.up(".myaddtimepanel").hide();
              },
            },
          },
        ],
      },
      {
        xtype: "fieldset",
        itemId: "fields",
        items: [
          {
            xtype: "datepickerfield",
            labelWidth: "60%",
            label: T("Start time"),
            dateFormat: "H:i",
            name: "StartTime",
            itemId: "startTime",
            picker: {
              xtype: "datetimepicker",
              slotOrder: ["hour", "minute"],
              minuteInterval: 5,
            },
          },
          {
            xtype: "datepickerfield",
            labelWidth: "60%",
            label: T("Stop time"),
            dateFormat: "H:i",
            name: "StopTime",
            itemId: "stopTime",
            picker: {
              xtype: "datetimepicker",
              slotOrder: ["hour", "minute"],
              minuteInterval: 5,
            },
          },
          {
            xtype: "numberfield",
            labelWidth: "60%",
            maxValue: 99999999,
            minValue: -99999999,
            label: T("Work (h)"),
            itemId: "hours",
            name: "Hours",
            displayField: "Hours",
          },
          {
            xtype: "numberfield",
            labelWidth: "60%",
            maxValue: 99999999,
            minValue: -99999999,
            label: T("Break (h)"),
            itemId: "breakTime",
            name: "BreakTime",
          },
          {
            xtype: "checkboxfield",
            itemId: "rememberHours",
            name: "RememberHours",
            labelWidth: "60%",
            label: T("Remember hours"),
          },
        ],
      },
      {
        xtype: "toolbar",
        ui: "light",
        cls: "approvaltoolbar",
        docked: "bottom",
        layout: { pack: "right", type: "hbox" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            html: T("Close"),
            listeners: {
              tap: function () {
                this.up(".myaddtimepanel").hide();
              },
            },
          },
        ],
      },
    ],
  },
  constructor: function () {
    this.callParent(arguments);
    var a = this,
      e = a.down("#fields").items.items,
      c = a.down("#startTime").getPicker(),
      d = a.down("#stopTime").getPicker(),
      b = parseInt(getSetting("Time.Timestamp.Interval"));
    if ([15, 30].indexOf(b) == -1) {
      b = 15;
      console.warn("Invalid interval-settings. Defaulting to " + b + ".");
    }
    d.setMinuteInterval(b);
    c.setMinuteInterval(b);
    d.createSlots();
    c.createSlots();
    a.on("painted", function () {
      a.fireEvent("panelshow");
      Ext.each(e, function (b) {
        if (b.getName() === "RememberHours") {
          b.setChecked(a.getRecord().get(b.getName()));
        } else {
          b.setValue(a.getRecord().get(b.getName()));
        }
      });
      if (a.getAbsence()) {
        a.down("#breakTime").setReadOnly(!0);
        a.down("#hours").setLabel(T("Hours"));
      }
    });
    a.on("hide", function () {});
  },
});
Ext.define("MEM.view.time.MyProfessionItemSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.myprofessionitemsearchpanel",
  config: {
    itemId: "MyProfessionItemSearchPanel",
    title: T("Search professionitem"),
    searchfields: [
      { label: T("Profession item"), field: "ProfessionDescription" },
    ],
    store: {
      storeId: "ProfessionItemSearchPanel_MyProfessionItemStore",
      type: "myprofessionitemstorealias",
    },
    filters: [["Disabled", "=", !1]],
    itemTpl: ["{ProfessionDescription}"],
  },
});
var _currentDate, _selectedDate, _currentTimeId;
function getMonday(a) {
  var b = a.getDay(),
    c = a.getMonth(),
    d = a.getYear();
  b = b == 0 ? 7 : b;
  a = Ext.Date.add(a, Ext.Date.DAY, -b + 1);
  return a;
}
function isDate(a) {
  return null != a && !isNaN(a) && "undefined" !== typeof a.getDate;
}
function getWeekNumber(a) {
  var c, b;
  if (!Ext.isDate(a)) {
    a = new Date(a);
  }
  return [T("W") + Ext.Date.format(a, "W") + " - " + a.getFullYear()];
}
Ext.define("MEM.controller.Time", {
  extend: MEM.controller.Common,
  config: {
    stores: ["MEM.store.MyWorkOrderStore", "MEM.store.MyMonthTimeStore"],
    refs: {
      mynavigationview: "mynavigationview",
      navigationBar: "#mynavigationbar",
      timePanel: "#MyTimePanel",
      timeCarouselPanel: "#MyTimeCarouselPanel",
      timeForm: {
        selector: "mytimerowform",
        xtype: "mytimerowform",
        id: "mytimerowform",
        autoCreate: !0,
      },
      monthForm: {
        selector: "mytimemonthform",
        xtype: "mytimemonthform",
        autoCreate: !0,
      },
      hourForm: {
        selector: "mytimehoursform",
        xtype: "mytimehoursform",
        autoCreate: !0,
        erased: "hideTimeAdd",
      },
      absenceForm: {
        selector: "mytimeabsenceform",
        xtype: "mytimeabsenceform",
        id: "mytimeabsenceform",
        autoCreate: !0,
      },
      AWOForm: {
        selector: "myawopanel",
        xtype: "myawopanel",
        title: T("AWO"),
        id: "MyAWOPanel",
        autoCreate: !0,
        autoDestroy: !0,
      },
      addButton: "mytimedaycontainer button",
      dayToolbar: "mytimeday toolbar",
      myTimeId: "mytimerowform #myTimeId",
      overlay: {
        selector: "mytimeoverlay",
        xtype: "mytimeoverlay",
        autoCreate: !0,
      },
      professionCode: { selector: "mytimerowform #myProfessionCode" },
      TimeProjectId: { selector: "mytimerowform #myTimeProjectId" },
      ProjectFallback: { selector: "mytimerowform #myProjectFallback" },
      TimeWorkOrderId: { selector: "mytimerowform #myTimeWorkOrderId" },
      TimeCustomerId: { selector: "mytimerowform #TimeCustomerId" },
      TimeAbsenceProjectId: { selector: "mytimeabsenceform #myTimeProjectId" },
      TimeAbsenceWorkOrderId: {
        selector: "mytimeabsenceform #myAbsenceTimeWorkOrderId",
      },
      Travel2container: { selector: "mytimerowform #myTravel2container" },
      Travel3container: { selector: "mytimerowform #myTravel3container" },
      Travel3IsDriver: { selector: 'mytimerowform [name="Travel3IsDriver"]' },
      travel2km: { selector: 'mytimerowform [name="Travel2Km"]' },
      Travel2PassengerCount: {
        selector: 'mytimerowform [name="Travel2PassengerCount"]',
      },
      InfoLabel: "#MyTimePanel #infoLabel",
      timeAdd: "#MyTimePanelCenter button[action=timeAdd]",
      dayLabel: "#MyTimePanelCenter mytimeday dayLabel",
      myHours: "mytimerowform #myHours",
      myAbsence: "mytimeabsenceform #myHours",
      contactButton: "mytimerowform button[action=contactShow]",
      saveButton: "mytimerowform button[action=timeSave]",
      absSaveButton: "mytimeabsenceform button[action=absenceSave]",
      newButton: "mytimerowform button[action=timeNew]",
      timeToolbar: "mytimerowform toolbar",
      timeList: "mytimerowform #WorkOrderRows",
      myProfessionItemId: "mytimerowform #myProfessionItemId",
      myFilePanel: {
        selector: "myfilepanel",
        xtype: "myfilepanel",
        id: "MyFilePanel",
      },
      copyWeek: "mytimepanel #copyWeek",
      fillWeek: "mytimepanel #fillWeek",
      allowanceField: "mytimerowform #allowanceField",
      infoNoteId: "mytimerowform #myInfoNoteId",
      infoNote: "mytimerowform #myInfoNote",
      favouriteButton: "mytimerowform #rowsaddwotime",
      addTimePanel: {
        xtype: "myaddtimepanel",
        selector: "mytimeaddpanel",
        autoCreate: !0,
        title: T("Add time"),
      },
      professionItemSearchpanel: {
        xtype: "myprofessionitemsearchpanel",
        selector: "myprofessionitemsearchpanel",
        autoCreate: !0,
        title: T("Search professionitem"),
      },
      workOrderSearchpanel: {
        xtype: "mytimeworkordersearchpanel",
        selector: "mytimeworkordersearchpanel",
        autoCreate: !0,
        title: T("Search workorder"),
      },
      approvallist: "mytimehourspanel #hourrows",
    },
    control: {
      navigationBar: {
        beforeback: function (f, e) {
          var b = this,
            d = !1,
            a,
            c = !0;
          if (b.getMynavigationview().getActiveItem().id === "mytimerowform") {
            a = !1;
            c = !b.saveQueryIfDirtyForm(d, a);
          }
          if (
            b.getMynavigationview().getActiveItem().id === "mytimeabsenceform"
          ) {
            a = !0;
            c = !b.saveQueryIfDirtyForm(d, a);
          }
          return c;
        },
      },
      mynavigationview: {
        push: function (c, d, b) {
          var a = this;
          a.hideTimeAdd();
          a.hidePrintDailyReportButton();
        },
        pop: function (b, e, d) {
          var a = this;
          if (b.getActiveItem().getActiveItem().id == "MyTimePanel") {
            a.showPrintDailyReportButton();
            a.clearTimeRowForm();
          } else {
            a.hidePrintDailyReportButton();
          }
          if (b.getActiveItem().id == "mytimerowform") {
            a.showTimeAdd();
            AWO_MODE = !1;
            TIME_MODE = !0;
            var c = a.getTimeProjectId().getValue();
            if (c) {
              CURRENT_PROJECTID = c;
            }
          } else {
            a.hideTimeAdd();
          }
          if (
            b.getActiveItem().id == "mytimerowform" &&
            a.getNewButton().clickedForRecord
          ) {
            a.onSetTimeRecord(
              a.getNewButton().clickedForRecord,
              b.getActiveItem()
            );
            a.getNewButton().clickedForRecord = null;
          }
        },
        back: function (b, c) {
          var a = this.getMynavigationview();
          if (b.getActiveItem().getActiveItem().id == "MyTimePanel") {
            if (this.navigationSourceIsWorkOrder()) {
              a.pop();
            } else {
              a.down("titlebar").setTitle(getWeekNumber(_currentDate));
            }
          }
        },
      },
      timeAdd: {
        tap: function (a) {
          this.showOverlay(a);
        },
      },
      timeForm: {
        activate: function () {
          var a = this,
            c = a.getMynavigationview(),
            d = MEM.app.getController("Project"),
            b = a.getTimeProjectId().getStore();
          if (!b.isLoaded()) {
            d.addStatusFilter(b, !0);
            b.load();
          }
          if (c.innerItems.length > 3) {
            if (
              c.innerItems[c.innerItems.length - 3].id == "MyWorkOrderFormPanel"
            ) {
              a.getTimeToolbar().setHidden(!0);
              a.getTimeList().setHidden(!0);
            }
          } else {
            a.getTimeToolbar().setHidden(!1);
            a.getTimeList().setHidden(!1);
            if (getSetting("MEM.Days") != "1") {
              a.getTimeForm("my-rowlist-hide-days");
            }
          }
          a.getMyProfessionItemId()
            .getStore()
            .on({ scope: a, load: a.onProfessionItemLoaded });
        },
      },
      TimeWorkOrderId: {
        change: function (c, a, b) {
          this.onWorkOrderChange(a);
        },
        missingvalue: function (d, e, b) {
          var a = this.getTimeForm().getRecord();
          if (a && a.get("WorkOrderNo")) {
            var c = {
              WorkOrderNo: a.get("WorkOrderNo"),
              Name: a.get("WorkOrderName"),
              Addition: a.get("Addition"),
              ProjectId: a.get("ProjectId"),
              ProjectNo: a.get("ProjectNo"),
              ProjectName: a.get("ProjectName"),
            };
            b = Ext.applyIf(b, c);
          }
        },
      },
      allowanceField: {
        change: function (c, a, b) {
          if (getSetting("AllowanceMandatoryComment") == "1") {
            this.getInfoNote().setRequired(a && a != "" ? !0 : !1);
          }
        },
      },
      "button[action=timeSave]": { tap: "onTimeRowSaveTap" },
      "button[action=timeNew]": { tap: "onTimeRowNewTap" },
      "button[action=absenceSave]": { tap: "onTimeAbsenceSaveTap" },
      "button[action=timeDelete]": { tap: "onTimeDeleteTap" },
      "button[action=absenceDelete]": { tap: "onAbsenceDeleteTap" },
      "button[action=closeTime]": { tap: "onCloseTap" },
      "button[action=showMonth]": { tap: "onRenderMonth" },
      "button[action=printdailyreport]": { tap: "onPrintDailyReport" },
      "button[action=copyWeeek]": { tap: "onCopyWeek" },
      "button[action=fillWeeek]": { tap: "onFillWeek" },
      "button[action=timeawoadd]": { tap: "onTimeAWOTap" },
      "button[action=closeDescription]": { tap: "onCloseDescription" },
      "mytimeoverlay #myTimeList": { itemsingletap: "onMyTimeOverlayItemTap" },
      "button[action=workOrderSearch]": { tap: "onWorkOrderSearch" },
      "mytimerowform #myTimeProjectId": { change: "onProjectChangeTap" },
      "mytimerowform #myTravel3IsDriver": { change: "onToggleChange" },
      "mytimerowform button[action=addTime]": {
        tap: function () {
          this.onAddTime();
        },
      },
      "mytimeabsenceform button[action=addTime]": {
        tap: function () {
          this.onAddTime(!0);
        },
      },
      "mytimerowform #myHours": {
        focus: function () {
          if (getSetting("Time.Timestamp.Show.Project") == 1) {
            this.onAddTime();
          }
        },
      },
      "mytimeabsenceform #myHours": {
        focus: function () {
          if (getSetting("Time.Timestamp.Show.Absence") == 1) {
            this.onAddTime(!0);
          }
        },
      },
      myaddtimepanel: { hide: "onTimePanelClose", show: "onTimePanelShow" },
      "list[itemId=selecttimerow]": { itemsingletap: "onDaySelectListTap" },
      "button[action=workOrderDescriptionShow]": {
        tap: function (a) {
          this.showTextAreaOverlay(a);
        },
      },
      "#addfiletime": { tap: "showFileManageDlg" },
      timeCarouselPanel: {
        activeitemchange: function (e, f, h, i) {
          var b = e.getInnerItems().indexOf(f),
            a = new Date(),
            d = this.getTimePanel().getStartday(),
            c,
            g;
          if (b < 1 || b > 1) {
            TIMER = new Date();
            c = b > 1 ? 7 : -7;
            g = b > 1 ? "right" : "left";
            a =
              d == null
                ? Ext.Date.add(new Date(), Ext.Date.DAY, c)
                : Ext.Date.add(new Date(d), Ext.Date.DAY, c);
            this.getTimePanel().setStartday(a);
            this.onRenderWeek(this.getTimePanel(), null, a, 1);
            _currentDate = a;
          }
        },
      },
      "button[action=professionitemSearch]": { tap: "onProfessionItemSearch" },
      professionItemSearchpanel: { itemsingletap: "onProfessionItemSelected" },
      workOrderSearchpanel: { itemsingletap: "onWorkOrderSelected" },
      "mytimehourspanel #saveApproval": { tap: "onSaveApproval" },
    },
  },
  init: function () {
    var a = this;
    a.getApplication().on({
      scope: a,
      renderWeek: function () {
        var a = this;
        var b = a.intSetting("MEM.TimeHideCopy");
        if (b == 1) {
          a.getCopyWeek().setHidden(!0);
          a.getFillWeek().setHidden(!0);
        }
        a.clearTimeRowForm();
        a.ensureAbsenceWorkOrderStoreLoaded(function () {
          a.onRenderWeek(a.getTimePanel(), null, new Date(_currentDate));
        });
      },
      timeawosaved: function (b) {
        a.reloadWorkOrderListStore(b);
      },
    });
  },
  ensureAbsenceWorkOrderStoreLoaded: function (c) {
    var b = this,
      a = Ext.getStore("MyCloneWAbsenceWorkOrderListStore");
    if (a.isLoaded()) {
      c();
    } else {
      a.meClearFilter();
      a.meAddFilter([
        "ProjectId",
        "=",
        b.absenceProjectId() == null ? -1 : b.absenceProjectId(),
      ]);
      a.meAddFilter(["WorkOrderNo", ">", b.intSetting("BasicScopeWONo")]);
      a.meAddFilter(["WorkOrderStatusCode", "<", STATUS_FINISHED]);
      a.load({ callback: c });
    }
  },
  clearTimeRowForm: function () {
    var c = this,
      b = c.getTimeForm(),
      a = Ext.ModelManager.create(
        {},
        Ext.getStore("MyMobileUserTimeStore").getModel()
      );
    b.setRecord(a);
  },
  showPrintDailyReportButton: function () {
    this.getApplication().fireEvent("settimeweektype", "time");
  },
  hidePrintDailyReportButton: function () {
    this.getApplication().fireEvent("cleartimeweektype", "time");
  },
  showTimeAdd: function () {
    this.getApplication().fireEvent("settimetype", "timeworkorder");
  },
  hideTimeAdd: function () {
    this.getApplication().fireEvent("cleartimetype", "timeworkorder");
  },
  onTimeAWOTap: function () {
    var c = this,
      g = c.getAWOForm(),
      e = this.getMynavigationview(),
      d = e.getInnerItems(),
      f = d[d.length - 1],
      b = Ext.getStore("MyAdditionalWorkOrderStore"),
      a = Ext.getStore("MyProjectLimitedStore");
    MEM.app.getController("AWO")._fromTime = !0;
    CURRENT_PROJECTID = f.getProjectId();
    if (CURRENT_PROJECTID == null) {
      Ext.Msg.alert(T("Project must first be choosen"));
    } else {
      currentProjectId = CURRENT_PROJECTID;
      a.meClearFilter();
      a.meAddFilter(["Id", "=", currentProjectId]);
      a.load({
        callback: function () {
          CURRENT_PROJECTNO = a.getAt(0).raw.ProjectNo;
          b.meClearFilter();
          b.meAddFilter(["ProjectId", "=", currentProjectId]);
          b.load({
            callback: function () {
              TIME_MODE = !1;
              AWO_MODE = !0;
              view = e.push(g);
              c.onCloseTap();
              c.hideTimeAdd();
            },
          });
        },
      });
    }
  },
  showFileManageDlg: function () {
    var b = this.getMynavigationview(),
      a = this.getMyFilePanel();
    a = MEM.app.getController("MEM.controller.MainMenu").ensureSubPanel("File");
    a.setProjectId(this.getTimeProjectId().getValue());
    a.setWorkorderId(this.getTimeWorkOrderId().getValue());
    MEM.loadSpinner.show();
    b.add(a);
    MEM.loadSpinner.hide();
  },
  showTextAreaOverlay: function (i) {
    var f = this,
      c,
      g = !0,
      a,
      h = f.getMynavigationview(),
      d = Ext.getStore("MyWorkOrderStore"),
      b = Ext.getStore("MyAdditionalWorkOrderStore"),
      e = Ext.getCmp("myTimeWorkOrderId").getValue();
    c = Ext.create("MEM.ux.form.MyTextAreaOverlay");
    if (e != null) {
      d.meClearFilter();
      d.meAddFilter(["Id", "=", e]);
      d.load({
        callback: function (d) {
          if (d[0] != undefined) {
            a = d[0].get("WorkDescription");
            c.initOverlay(null, a, g, h, f.editorAlignment);
          } else {
            b.meClearFilter();
            b.meAddFilter(["Id", "=", e]);
            b.load({
              callback: function (b) {
                if (b[0] != undefined) {
                  a = b[0].get("WorkDescription");
                  c.initOverlay(null, a, g, h, f.editorAlignment);
                }
              },
            });
          }
        },
      });
    }
  },
  showOverlay: function (c, e) {
    var f = this,
      d = e != undefined ? e : c.up("mytimeday"),
      a = f.getOverlay(),
      h = Ext.getStore("MyCloneWAbsenceWorkOrderListStore"),
      b = new Array();
    try {
      if (d) {
        c = d.down("button");
      }
      a.setCurrentDate(d.getCurrentDate());
      if (a.down("list").getData() == null) {
        a.showBy(c);
        b = [{ name: T("Project"), action: "onTimeAdd" }];
        var g = f.intSetting("MEM.TimeHideCopy");
        if (g != 1) {
          b.push({ name: T("Copy previous day"), action: "onCopyPrevious" });
        }
        h.each(function (a) {
          b.push({
            name: a.get("Name"),
            action: "onAbsensceTap",
            wo: a.get("Id"),
          });
        });
        if (b) {
          a.down("list").setData(b);
        }
      } else {
        a.showBy(c);
      }
    } catch (i) {
      MEM.loadSpinner.hide(i);
    }
  },
  onTimeDeleteTap: function () {
    this.onDeleteTap(this.getTimeForm());
  },
  onAbsenceDeleteTap: function () {
    this.onDeleteTap(this.getAbsenceForm());
  },
  onDeleteTap: function (e) {
    var c = this,
      h,
      g,
      a = Ext.getStore("MyMobileUserTimeStore"),
      f = Ext.getStore("MyTimeStore"),
      d = this.getMynavigationview(),
      b = e.getRecord();
    a.clearFilter();
    a.meClearFilter();
    if (!c.validateDelete(b)) {
      return;
    }
    Ext.Msg.confirm(T("Delete item."), T("Are you sure?"), function (f) {
      if (f == "yes" && isNumber(b.get("Id"))) {
        a.meAddFilter(["Id", "=", b.get("Id")]);
        a.meAddFilter(["UserId", "=", b.get("UserId")]);
        a.meAddFilter(["RegDate", "=", b.get("RegDate")]);
        a.load({
          callback: function (b) {
            var g = b[0].getProxy();
            if (!g) {
              b[0].setProxy(a.getProxy());
            }
            b[0].erase({
              callback: function () {
                d.pop();
                c.onRenderWeek(c.getTimePanel(), null, new Date(_currentDate));
              },
            });
          },
        });
      }
    });
  },
  onRenderPanel: function () {},
  reloadWorkOrderRows: function (a, b) {
    var c = this;
    c.getApplication().fireEvent("woidchange", a, b);
  },
  setTimeRecord: function (a, e) {
    var b = this,
      c = a && a.get("ProjectId") == b.absenceProjectId(),
      d = c
        ? Ext.getStore("MyCloneAbsenceProjectStore")
        : b.getTimeProjectId().getStore();
    if (!c) {
      MEM.app.getController("Project").addStatusFilter(d, !0);
    }
    d.load({
      callback: function (d, c, f) {
        b.onSetTimeRecord(a, e);
      },
    });
    b.setInfoNoteRequired(a);
  },
  onSetTimeRecord: function (b, d) {
    var a = this,
      c = b.get("ProjectId");
    if (c == a.absenceProjectId()) {
      a.setFormRecord(b, d, !0);
    } else {
      a.reloadWorkOrderListStore(c, function () {
        a.setFormRecord(b, d, !1);
      });
    }
  },
  setFormRecord: function (a, c, d) {
    var b = this,
      e = a.get("ProjectId"),
      f = this.getMynavigationview();
    b.appendProfessionItem(a.get("ProfessionItemId"));
    c.setRecord(a);
    b.setDayLabel(a.get("RegDate"));
    view = f.push(c);
    b.displayFields(!0);
    _currentDate = a.get("RegDate");
    _selectedDate = a.get("RegDate");
    _currentTimeId = a.phantom ? null : a.get("Id");
    if (d) {
      c.disableTimeButtons(!1);
    } else {
      b.toggleProjectList(e);
      b.reloadWorkOrderRows(a.get("WorkOrderId"), _currentTimeId);
      b.setInfoNote(a.get("InfoNoteId"), b.getInfoNote());
      b.showTimeAdd();
    }
    MEM.loadSpinner.hide();
  },
  onDaySelectListTap: function (e, h, g, d, i, f) {
    var b = this,
      a = d.get("ProjectId"),
      c;
    MEM.loadSpinner.show();
    try {
      c =
        a != b.absenceProjectId() ? this.getTimeForm() : this.getAbsenceForm();
      a = a == null ? 0 : a;
      CURRENT_PROJECTID = a;
      b.setTimeRecord(d, c);
    } catch (j) {
      MEM.loadSpinner.hide(j, b);
    }
  },
  appendProfessionItem: function (c) {
    var b = this,
      a = b.getMyProfessionItemId();
    if (a) {
      b.filterProfessionItems(a.getStore(), c);
    }
  },
  onProjectChangeTap: function (b, a) {
    this.onProjectChange(a);
  },
  onProjectChange: function (a) {
    var c = this,
      b = Ext.getStore("MyCloneWorkOrderListStore");
    if (a == null) {
      return;
    }
    if (b.meGetFilterValue("ProjectId") != a) {
      MEM.loadSpinner.show();
      c.reloadWorkOrderListStore(a);
    }
  },
  reloadWorkOrderListStore: function (c, b) {
    var a = Ext.getStore("MyCloneWorkOrderListStore");
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["ProjectId", "=", c]);
    a.load({
      callback: function (a) {
        if (b) {
          b();
        }
      },
    });
  },
  onWorkOrderChange: function (c) {
    var d = this,
      e = Ext.getStore("MyCloneWorkOrderListStore"),
      f = e.findRecord("Id", c);
    if (c == null) {
      d.setTimeRecordCustomer(null, null);
      return;
    }
    var a = f.get("Addition")
        ? Ext.getStore("MyAdditionalWorkOrderStore")
        : Ext.getStore("MyWorkOrderStore"),
      b = a.findRecord("Id", c);
    if (b) {
      if (a.isLoading()) {
        a.abortCallback = !0;
      }
      d.setTimeRecordCustomer(b.get("CustomerId"), b.get("CustomerName"));
    } else {
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["Id", "=", c]);
      a.load({
        callback: function (e) {
          b = e[0];
          if (b && !a.abortCallback) {
            d.setTimeRecordCustomer(b.get("CustomerId"), b.get("CustomerName"));
          } else {
            if (a.abortCallback) {
              a.abortCallback = !1;
            }
          }
        },
      });
    }
  },
  setTimeRecordCustomer: function (d, c) {
    var a = this,
      b = a.getContactButton() || {};
    a.getTimeCustomerId().setValue(c);
    b.customerId = d;
  },
  setHoursLabel: function (e, d, a) {
    var b = this.getApplication().getUserName(),
      g = Ext.String.format(
        "{0}: {1} {2}",
        T("Sum"),
        Me.getFormattedNumeric(e),
        T("h")
      ),
      c = Ext.String.format(
        "{0}: {1} {2}",
        T("chrgbl"),
        Me.getFormattedNumeric(d),
        T("km")
      ),
      f = Ext.String.format(
        "{0}: {1} {2}",
        T("prvt"),
        Me.getFormattedNumeric(a),
        T("km")
      );
    this.getInfoLabel().setHtml(
      Ext.String.format("{0}, {1}, {2}, {3}", g, c, f, b)
    );
  },
  onRenderWeek: function (p, A, q, n) {
    var h = this,
      a = new Date(),
      g = new Date(),
      z,
      c = 0,
      b = 0,
      f,
      y,
      w = this.getMynavigationview(),
      v = new Array(
        T("Mo"),
        T("Tu"),
        T("We"),
        T("Th"),
        T("Fr"),
        T("Sa"),
        T("Su")
      ),
      d = Ext.getStore("MyMobileUserTimeStore"),
      x = h.getApplication(),
      l = Ext.getStore("MyCloneProfessionItemStore"),
      t,
      u,
      s = 0,
      j = new Array("0.0"),
      r = 0,
      m = 0,
      e,
      k = new Array(null, null, null, null, null, null, null),
      o = this.getMonthForm();
    try {
      h.showPrintDailyReportButton();
      MEM.loadSpinner.show();
      if (!l.isLoaded()) {
        l.load();
      }
      if (isDate(q)) {
        a = q;
      }
      a = getMonday(a);
      if (o.getCurrentDate() == a) {
        return;
      }
      o.setCurrentDate(a);
      _currentDate = a;
      w.down("titlebar").setTitle(getWeekNumber(a));
      t = p.query("mytimeday");
      d.clearFilter();
      d.meClearFilter();
      d.meAddFilter(["UserId", "=", parseInt(x.getUserId(), 10)]);
      d.meAddFilter(["RegDate", ">=", Ext.Date.format(a, "Y-m-d")]);
      d.meAddFilter([
        "RegDate",
        "<",
        Ext.Date.format(Ext.Date.add(a, Ext.Date.DAY, 7), "Y-m-d"),
      ]);
      d.load({
        callback: function () {
          try {
            for (b = 0; b < 7; b++) {
              var w = "DayTime" + b + "Store",
                o = Ext.getStore(w),
                x = o
                  ? o
                  : Ext.create("MEM.store.MyMobileUserTimeStore", {
                      storeId: w,
                    }),
                l = t[b].down("#selecttimerow");
              x.setData([]);
              k[b] = x;
              j[b] = 0;
              l.setStore(k[b]);
              if (l.getSelectionCount()) {
                l.deselectAll();
              }
            }
            d.each(function (a) {
              var c = new Date(Ext.Date.parseDate(a.get("RegDate"), "Y-m-d")),
                b = c.getDay();
              b = b == 0 ? 6 : b - 1;
              s += parseFloat(a.get("Hours"));
              j[b] += parseFloat(a.get("Hours"));
              r += isNaN(parseFloat(a.get("Travel1Km")))
                ? 0
                : parseFloat(a.get("Travel1Km"));
              m += isNaN(parseFloat(a.get("Travel2Km")))
                ? 0
                : parseFloat(a.get("Travel2Km"));
              k[b].add(a);
              f = a;
            });
            if (
              CURRENT_WORKORDERID == null &&
              f != null &&
              f.get("StatusCode") < STATUS_FINISHED &&
              f.get("StatusCode") >= STATUS_NOTED
            ) {
              CURRENT_PROJECTID = f.get("ProjectId");
              CURRENT_WORKORDERID = f.get("WorkOrderId");
            }
            h.setHoursLabel(s, r, m);
            c = 0;
            Ext.each(p.query("mytimeday"), function (b) {
              e = b.down("list");
              if (k[c].data.length > (c > 4 ? 1 : 3)) {
                e.setScrollable(!0);
              } else {
                e.setScrollable(!1);
              }
              g = Ext.Date.add(a, Ext.Date.DAY, c);
              u =
                j[c] != 0
                  ? " : " + Me.getFormattedNumeric(j[c]) + " " + T("h")
                  : "";
              b.down("toolbar").setTitle("");
              b.down("toolbar")
                .down("label")
                .setHtml(
                  v[c] +
                    " " +
                    Ext.Date.format(
                      g,
                      Ext.util.Format.defaultDateFormat.replace("Y", "y")
                    ) +
                    u
                );
              b.setCurrentDate(g);
              button = b.down("toolbar").down("button");
              b.down("toolbar")
                .down("label")
                .element.on({
                  tap: {
                    fn: function (c, d, a) {
                      h.showOverlay(a, b);
                    },
                    scope: this,
                    single: !0,
                  },
                });
              if (
                Ext.Date.format(g, "Y-m-d") ==
                Ext.Date.format(new Date(), "Y-m-d")
              ) {
                b.down("toolbar").setCls("currentDay");
                b.down("label").setCls("currentDayHeader");
              } else {
                b.down("toolbar").setCls("dayToolbar");
                b.down("label").setCls("dayHeader");
              }
              var d = e.items.getAt(0).items;
              for (i = 0; i < d.length; i++) {
                if (
                  d
                    .getAt(i)
                    .getInnerHtmlElement()
                    .getFirstChild()
                    .hasCls("approved")
                ) {
                  d.getAt(i).addCls("locked");
                }
              }
              if (MEM.calcdates.isFreeDay(g)) {
                e.addCls("my-list-holiday");
              } else {
                e.removeCls("my-list-holiday");
              }
              c += 1;
            });
            if (n != undefined) {
              h.getTimeCarouselPanel().setActiveItem(n);
            }
            MEM.loadSpinner.hide();
          } catch (B) {
            MEM.loadSpinner.hide(B);
          }
        },
      });
    } catch (B) {
      MEM.loadSpinner.hide(B);
    }
  },
  onMonthTap: function () {
    var b = this.getMonthForm(),
      c = this.getMynavigationview(),
      a = b.getCurrentDate();
    currentMonth = a.getMonth() + 1;
    c.push(b);
    Ext.getCmp("myworkinghours").setValue(
      Me.getFormattedNumeric(
        MEM.calcdates.getWorkingHours(a.getFullYear(), a.getMonth() + 1)
      )
    );
    Ext.getCmp("mymonthlabel").setHtml(Ext.Date.format(a, "Y-m"));
  },
  onRenderMonth: function (g, l) {
    var b = this,
      k = 0,
      a = Ext.getStore("MyMonthTimeStore"),
      e = b.getApplication(),
      d,
      c,
      h = 0,
      j = 0,
      i,
      f = this.getMonthForm();
    d = this.getTimePanel().query("mytimeday");
    c = new Date(
      Ext.Date.format(d[0].getCurrentDate(), "Y/m/d").substr(0, 7) + "/01"
    );
    a.clearFilter();
    a.meClearFilter();
    a.sort("RegDate", "ASC");
    a.meAddFilter(["UserId", "=", parseInt(e.getUserId(), 10)]);
    a.meAddFilter(["RegDate", ">=", Ext.Date.format(c, "Y-m-d")]);
    a.meAddFilter([
      "RegDate",
      "<",
      Ext.Date.format(Ext.Date.add(c, Ext.Date.MONTH, 1), "Y-m-d"),
    ]);
    a.load({
      callback: function () {
        b.setSumField(a, "Hours", "mybookedhours", "");
        b.setSumField(a, "BreakTime", "mybreakhours", "");
        b.setSumField(a, "Travel1Km", "mytravel1", " km");
        b.setSumField(a, "Travel2Km", "mytravel2", " km");
        b.setSumField(a, "Travel3Km", "mytravel3", " km");
        b.onMonthTap();
      },
    });
    b.showPrintDailyReportButton();
  },
  setSumField: function (e, a, c, d) {
    var b = 0;
    e.each(function (f) {
      b += parseFloat(Ext.isNumeric(f.get(a)) ? f.get(a) : 0);
    });
    Ext.getCmp(c).setValue(Me.getFormattedNumeric(b) + d);
  },
  onToggleChange: function (d, c, e, a, b) {
    this.displayFields(a);
  },
  displayFields: function (a) {
    if (this.getTravel2container()) {
      this.getTravel2container()[a ? "show" : "hide"]();
      this.getTravel3container()[!a ? "show" : "hide"]();
    }
  },
  onCloseTap: function () {
    if (this.getOverlay() != undefined) {
      this.getOverlay().hide();
    }
  },
  toggleProjectList: function (d) {
    var f = this,
      g = !1,
      a = f.getTimeProjectId(),
      c = f.getProjectFallback(),
      e = null,
      b = f.getTimeForm();
    if (a && c) {
      e = a.getStore().getById(d);
      if (e || b.getRecord().phantom === !0) {
        a.setHidden(!1);
        c.setHidden(!0);
        b.disableTimeButtons(!1);
      } else {
        a.setHidden(!0);
        c.setHidden(!1);
        b.setFieldsDisabled(!0);
        b.disableTimeButtons(!0);
      }
    }
    if (!e) {
      d = null;
    }
    return d;
  },
  onProfessionItemLoaded: function (a, d, b, c) {
    this.filterProfessionItems(a);
  },
  filterProfessionItems: function (d, e) {
    var g = this,
      c = Ext.getStore("MyUserListStore"),
      f = g.getApplication().getUserId(),
      b,
      a;
    c.clearFilter();
    a = c.getById(f).get("ProfessionItemId");
    if (a) {
      b = Ext.getStore("MyCloneProfessionItemStore")
        .getById(a)
        .get("ProfessionGroup");
      d.clearFilter(!0);
      d.filterBy(function (a, c) {
        return (
          (!a.get("Disabled") &&
            (!a.get("ProfessionGroup") || a.get("ProfessionGroup") == b)) ||
          e == c
        );
      });
    }
  },
  onTimeAdd: function (b, e) {
    var a = this,
      j = a.getApplication(),
      i = this.getMynavigationview(),
      c = this.getTimeForm(),
      g = Ext.getStore("MyMobileUserTimeStore").getModel(),
      f = j.getUserId(),
      h = parseInt(a.WorkOrderId, 10);
    (getProfession = function () {
      var a = Ext.getStore("MyUserListStore"),
        c;
      a.clearFilter();
      c = a.getById(f);
      return c.get("ProfessionItemId");
    }),
      (setTimeRecord = function (a, l, j, h, g, i, k, f) {
        var d = Ext.ModelManager.create(
          {
            Id: null,
            ProjectId: h,
            WorkOrderId: g,
            RegDate: Ext.Date.format(k, "Y-m-d"),
            UserId: i,
            Hours: null,
            InfoNoteId: null,
            ProfessionItemId: f,
            Unit: a.boolSetting("Unit"),
            Debit: a.boolSetting("MEM.HoursDebitable"),
            Travel3IsDriver: a.boolSetting("Travel3IsDriver"),
          },
          j
        );
        c.disableTimeButtons(!1);
        l.setRecord(d);
        if (!d.get("WorkOrderId")) {
          a.setTimeRecordWorkOrderIdFromForm();
        }
        MEM.loadSpinner.hideSpinner("timerecord");
        a.showTimeAdd();
        a.resetInfoNoteRequired();
      });
    try {
      MEM.loadSpinner.showSpinner("timerecord");
      try {
        Ext.getCmp("myTimeProjectId").setHidden(!1);
        Ext.getCmp("myProjectFallback").setHidden(!0);
        var d = getProfession();
        a.appendProfessionItem(d);
        a.setInfoNote(null, a.getInfoNote());
        a.setDayLabel(Ext.Date.format(b, Ext.util.Format.defaultDateFormat));
        i.push(c);
        a.onCloseTap();
        a.displayFields(!0);
        _currentTimeId = null;
        a.reloadWorkOrderRows(null, null);
        a.reloadWorkOrderListStore(e, function () {
          var i = a.getTimeProjectId().getStore();
          if (!i.isLoaded()) {
            MEM.app.getController("Project").addStatusFilter(i, !0);
            i.load({
              callback: function (j, i, k) {
                setTimeRecord(a, c, g, e, h, f, b, d);
              },
            });
          } else {
            setTimeRecord(a, c, g, e, h, f, b, d);
          }
        });
        a.hidePrintDailyReportButton();
      } catch (k) {
        MEM.loadSpinner.hideSpinner(k, null, null, "timerecord");
      }
      _currentDate = Ext.Date.format(b, "Y-m-d");
      _selectedDate = Ext.Date.format(b, "Y-m-d");
    } catch (l) {
      MEM.loadSpinner.hideSpinner(l, null, null, "timerecord");
    }
  },
  setTimeRecordWorkOrderIdFromForm: function () {
    var b = this,
      d = b.getTimeForm(),
      a = d.getRecord(),
      c = b.getTimeWorkOrderId().getValue();
    a.set("WorkOrderId", c);
    if (a.modified) {
      delete a.modified.WorkOrderId;
    }
  },
  onAbsenceTap: function (c, j) {
    var a = this,
      i = a.getApplication(),
      h = a.getMynavigationview(),
      b = a.getAbsenceForm(),
      g = Ext.getStore("MyMobileUserTimeStore").getModel(),
      d = a.getInfoNote(),
      f = i.getUserId(),
      e = Ext.ModelManager.create(
        {
          Id: null,
          ProjectId: a.absenceProjectId(),
          RegDate: Ext.Date.format(c, "Y-m-d"),
          UserId: f,
          WorkOrderId: j,
          Unit: a.boolSetting("Unit"),
          Debit: a.boolSetting("MEM.HoursDebitable"),
          Travel3IsDriver: a.boolSetting("Travel3IsDriver"),
        },
        g
      );
    b.setRecord(e);
    b = h.push(b);
    if (d) {
      d.setValue(null);
    }
    a.onCloseTap();
    a.setDayLabel(Ext.Date.format(c, Ext.util.Format.defaultDateFormat));
    _currentDate = Ext.Date.format(c, "Y-m-d");
    b.disableTimeButtons(!1);
  },
  setDayLabel: function (a) {
    var b = this,
      c = b.getMynavigationview();
    c.down("titlebar").setTitle(a);
    b.getTimeForm().setTitle(a);
    b.getAbsenceForm().setTitle(a);
  },
  onMyTimeOverlayItemTap: function (d, g, f, c, h, e) {
    var b = this,
      a = d.up("mytimeoverlay").getCurrentDate();
    switch (c.get("action")) {
      case "onTimeAdd":
        b.addTime(a);
        break;
      case "onAbsensceTap":
        b.onAbsenceTap(a, c.raw.wo);
        break;
      case "onCopyPrevious":
        b.onCopyPrevious(a);
        break;
    }
  },
  addTime: function (d) {
    var a = this,
      b;
    if (a.ProjectId) {
      MEM.app
        .getController("WorkOrder")
        .ensureProject(a.getTimeProjectId(), a.ProjectId, function () {
          a.onTimeAdd(d, a.ProjectId);
        });
    } else {
      var c = Ext.create("MEM.store.MyMobileUserTimeStore", {
        storeId: null,
        remoteSort: !0,
        pageSize: 1,
        sorters: [{ property: "Created", direction: "DESC" }],
      });
      c.meAddFilter([
        "UserId",
        "=",
        parseInt(a.getApplication().getUserId(), 10),
      ]);
      c.meAddFilter([
        "RegDate",
        ">",
        Ext.Date.add(new Date(), Ext.Date.MONTH, -1),
      ]);
      c.meAddFilter(["ProjectId", "!=", a.absenceProjectId()]);
      c.load({
        limit: 1,
        callback: function (f) {
          var c,
            e = !1;
          if (f.length > 0) {
            c = f[0].get("ProjectId");
            b = Ext.getStore("MyCloneWorkOrderListStore");
            if (b.meGetFilterValue("ProjectId") != c) {
              e = !0;
              b.clearFilter();
              b.meClearFilter();
              b.meAddFilter(["ProjectId", "=", c]);
              b.load({
                callback: function () {
                  a.onTimeAdd(d, c);
                },
              });
            }
          }
          if (!e) {
            a.onTimeAdd(d, c);
          }
        },
      });
    }
  },
  onPrintDailyReport: function () {
    var d = this,
      a = {},
      c = [],
      g = d.getApplication(),
      b = getMonday(
        _currentDate instanceof Date ? _currentDate : new Date(_currentDate)
      ),
      e = Ext.Date.format(Ext.Date.add(b, Ext.Date.DAY, 6), "Y-m-d");
    a.name = "meUserDailyReport";
    a.displayname =
      T("Daily Report") + " " + d.getNavigationBar().get("title")[0];
    a.userid = g.getUserId();
    a.startdate = b;
    a.enddate = e;
    a.showallowance = 1;
    a.showimages = 1;
    a.showbookedhours = 1;
    a.showinvoiceablehours = 0;
    a.showstaffroles = 0;
    c.push(a);
    var f = { type: "pdf", json: Ext.JSON.encode({ report: c }) };
    var h = Me.API_URL + "getReport" + "?" + Ext.urlEncode(f);
    window.open(h);
  },
  onCopyPrevious: function (b) {
    var a = this;
    a.copyPrompt(T("Copy previous day"), function (c) {
      a.copyPreviousDay(b, c);
    });
  },
  copyPreviousDay: function (c, f) {
    var d = this,
      a = Ext.getStore("MyMobileUserTimeStore"),
      g = d.getApplication(),
      b,
      e;
    a.meClearFilter();
    a.meAddFilter(["UserId", "=", parseInt(g.getUserId(), 10)]);
    a.meAddFilter(["RegDate", "<", Ext.Date.format(c, "Y-m-d")]);
    a.meAddFilter([
      "RegDate",
      ">=",
      Ext.Date.format(Ext.Date.add(c, Ext.Date.DAY, -30), "Y-m-d"),
    ]);
    e = a.getProxy();
    a.load({
      callback: function () {
        a.data.getSorters().clear();
        a.sort("RegDate", "DESC");
        if (a.getCount() === 0) {
          Ext.Msg.show({
            title: T("Not found"),
            message: T("No time post was found the previous 30 days."),
          });
          return;
        }
        a.filter("RegDate", a.getAt(0).get("RegDate"));
        var g = [];
        a.each(function (a) {
          var d = a.get("Id");
          b = a.copy();
          b.setProxy(e);
          b.set("Id", Ext.id());
          b.set("RegDate", Ext.Date.format(c, "Y-m-d"));
          b.set("Approved", !1);
          b.set("Approved2", !1);
          b.set("Locked", !1);
          b.set("Invoiced", !1);
          b.set("InvoiceId", null);
          g.push({ clone: b, copyWORows: f, original_id: d });
        });
        d.saveCopiedPosts(g, c);
        d.onCloseTap();
      },
    });
  },
  onCopyWeek: function () {
    var a = this;
    a.copyPrompt(T("Copy week."), function (b) {
      a.doCopyWeek(b);
    });
  },
  doCopyWeek: function (e) {
    var d = this,
      a = Ext.getStore("MyCloneUserTimeStore"),
      f = d.getApplication(),
      b,
      c = getMonday(
        _currentDate instanceof Date ? _currentDate : new Date(_currentDate)
      );
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["UserId", "=", parseInt(f.getUserId(), 10)]);
    a.meAddFilter(["RegDate", ">=", Ext.Date.format(c, "Y-m-d")]);
    a.meAddFilter([
      "RegDate",
      "<",
      Ext.Date.format(Ext.Date.add(c, Ext.Date.DAY, 7), "Y-m-d"),
    ]);
    a.load({
      callback: function () {
        a.data.getSorters().clear();
        a.sort("RegDate", "asc");
        var f = [];
        a.each(function (c) {
          var d = c.get("Id");
          b = c.copy();
          b.setProxy(a.getProxy());
          b.set("Id", null);
          copyday = Ext.Date.parse(c.get("RegDate"), "Y-m-d");
          copyday = Ext.Date.add(
            copyday,
            Ext.Date.MINUTE,
            -copyday.getTimezoneOffset()
          );
          b.set(
            "RegDate",
            Ext.Date.format(Ext.Date.add(copyday, Ext.Date.DAY, 7), "Y-m-d")
          );
          b.set("Approved", !1);
          b.set("Approved2", !1);
          b.set("Locked", !1);
          b.set("Invoiced", !1);
          b.set("InvoiceId", null);
          f.push({ clone: b, copyWORows: e, original_id: d });
        });
        d.saveCopiedPosts(f, Ext.Date.add(c, Ext.Date.DAY, 7));
      },
    });
    d.onCloseTap();
  },
  saveCopiedPosts: function (a, f, b, d, c) {
    b = b === undefined ? a.length : b;
    d = d === undefined ? 1 : d;
    c = c === undefined ? [] : c;
    var e = this,
      h =
        b && b > 1
          ? T("Copying posts") + "<br />" + d + " " + T("of") + " " + b + ""
          : null;
    MEM.loadSpinner.show(h, "timeCopy");
    if (a.length > 0) {
      a[0].clone.save({
        success: function (g) {
          if (a[0].copyWORows) {
            var i = Number(g.get("WorkOrderId")),
              h = a[0].original_id;
            e.getTimeWorkOrderRowClones(i, h, function (h) {
              var k = g.get("Id"),
                j = g.get("RegDate"),
                i = function () {
                  if (h.length > 0) {
                    var l = h[0];
                    l.set("Id", Ext.id());
                    l.set("PerformedDate", j);
                    l.set("TimeId", k);
                    h.shift();
                    l.save(i);
                  } else {
                    a.shift();
                    d++;
                    e.saveCopiedPosts(a, f, b, d, c);
                  }
                };
              i();
            });
          } else {
            a.shift();
            d++;
            e.saveCopiedPosts(a, f, b, d, c);
          }
        },
        failure: function (g, h) {
          console.log(g.data);
          c.push({
            error: Ext.decode(h._response.responseText).errors,
            title: g.data.DisplayTitle + " - " + g.data.Hours + " " + T("h"),
          });
          a.shift();
          d++;
          e.saveCopiedPosts(a, f, b, d, c);
        },
        ignoreErrors: !0,
      });
    } else {
      MEM.loadSpinner.hideSpinner("timeCopy");
      e.onRenderWeek(e.getTimePanel(), null, f);
      var g = "";
      if (c.length > 0) {
        c.forEach(function (e) {
          g += "" + e.title + "<br />" + e.error + "<hr />";
        });
        Ext.Msg.show({
          title: Ext.String.format(
            T("{0} of {1} posts could not be copied."),
            c.length,
            b
          ),
          message: g,
        });
      } else {
        Ext.Msg.show({ title: T("Success"), message: T("Timeposts copied") });
      }
    }
  },
  onFillWeek: function () {
    var a = this;
    a.copyPrompt(T("Fill week."), function (b) {
      a.doFillWeek(b);
    });
  },
  doFillWeek: function (h) {
    var c = this,
      a = Ext.getStore("MyCloneUserTimeStore"),
      i = c.getApplication(),
      b,
      f = 1,
      e = 0,
      d = getMonday(
        _currentDate instanceof Date ? _currentDate : new Date(_currentDate)
      ),
      g = new Date();
    removeTime = function (a) {
      a = new Date(a.setHours(0, 0, 0));
      return a;
    };
    a.meClearFilter();
    a.clearFilter();
    a.meAddFilter(["UserId", "=", parseInt(i.getUserId(), 10)]);
    a.meAddFilter(["RegDate", ">=", Ext.Date.format(d, "Y-m-d")]);
    a.meAddFilter([
      "RegDate",
      "<",
      Ext.Date.format(Ext.Date.add(d, Ext.Date.DAY, 7), "Y-m-d"),
    ]);
    a.load({
      callback: function () {
        if (a.getCount() <= 0) {
          Ext.Msg.show({
            title: T("Not found"),
            message: T("Please add a time post to fill week with."),
          });
          return;
        }
        a.data.getSorters().clear();
        a.sort("RegDate", "desc");
        g = new Date(a.getAt(0).get("RegDate"));
        a.filter("RegDate", Ext.Date.format(g, "Y-m-d"));
        while (
          Ext.Date.add(removeTime(g), Ext.Date.DAY, f) <=
          Ext.Date.add(removeTime(new Date(d)), Ext.Date.DAY, 4)
        ) {
          a.each(function (a) {
            e += 1;
          });
          f += 1;
        }
        if (e > 0) {
          MEM.loadSpinner.show(T("Loading..."), "timeCopy");
        }
        f = 1;
        while (
          Ext.Date.add(removeTime(g), Ext.Date.DAY, f) <=
          Ext.Date.add(removeTime(new Date(d)), Ext.Date.DAY, 4)
        ) {
          var i = Ext.Date.format(Ext.Date.add(g, Ext.Date.DAY, f), "Y-m-d");
          a.each(function (f) {
            b = f.copy();
            b.setProxy(a.getProxy());
            b.set("Id", null);
            b.set("RegDate", i);
            b.set("Approved", !1);
            b.set("Approved2", !1);
            b.set("Locked", !1);
            b.set("Invoiced", !1);
            b.set("InvoiceId", null);
            b.save(
              {
                success: function (a) {
                  if (h) {
                    var g = Number(f.get("WorkOrderId")),
                      b = f.get("Id");
                    c.getTimeWorkOrderRowClones(g, b, function (b) {
                      var j = a.get("Id"),
                        i = a.get("RegDate"),
                        g = function () {
                          if (b.length > 0) {
                            var k = b[0];
                            k.set("Id", Ext.id());
                            k.set("PerformedDate", i);
                            k.set("TimeId", j);
                            b.shift();
                            k.save(g);
                          } else {
                            e -= 1;
                            if (e == 0) {
                              MEM.loadSpinner.hideSpinner("timeCopy");
                              c.onRenderWeek(c.getTimePanel(), null, d);
                            }
                          }
                        };
                      g();
                    });
                  } else {
                    e -= 1;
                    if (e == 0) {
                      MEM.loadSpinner.hideSpinner("timeCopy");
                      c.onRenderWeek(c.getTimePanel(), null, d);
                    }
                  }
                },
                failure: function () {
                  MEM.loadSpinner.hideSpinner("timeCopy");
                  MEM.serverError.show();
                  c.onRenderWeek(c.getTimePanel(), null, d);
                },
              },
              this
            );
          });
          f += 1;
        }
      },
    });
  },
  copyPrompt: function (c, a) {
    var b = getSetting("Time.Copy.IncludeResourceRows") == 1;
    Ext.Msg.confirm(c, T("Are you sure?"), function (d) {
      if (d == "yes") {
        if (b) {
          Ext.Msg.confirm(
            T("Copy resouces"),
            T("Do you also wish to copy all resources?"),
            function (b) {
              a(b == "yes");
            }
          );
        } else {
          a(!1);
        }
      }
    });
  },
  getTimeWorkOrderRowClones: function (c, d, e) {
    var a = Ext.getStore("MyWorkOrderRowStore"),
      b = [];
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["WorkOrderId", "=", c]);
    a.meAddFilter(["TimeId", "=", d]);
    a.meAddFilter(["ShowInMobile", "=", !0]);
    a.load(function (f) {
      f.forEach(function (h) {
        var g = h.copy();
        g.setProxy(a.getProxy());
        b.push(g);
      });
      e(b);
    });
  },
  onMyTimeListItemTap: function (f, i, h, a, j, g) {
    var e = this,
      d = this.getMynavigationview(),
      b = this.getTimeForm(),
      c = function () {
        b.setRecord(a);
        _currentDate = Ext.Date.format(a.RegDate, "Y-m-d");
        _currentTimeId = a.get("Id");
        view = d.push(b);
      };
    MEM.loadSpinner.show();
    c();
    MEM.loadSpinner.hide();
    e.onCloseTap();
  },
  onTimeRowSaveTap: function (e, d, b, c) {
    var a = this.getTimeForm();
    this.onTimeRowSave(a, !1);
  },
  onTimeRowNewTap: function (d, e, c) {
    var a = !0,
      b = !1;
    this.saveQueryIfDirtyForm(a, b);
  },
  setNewTimeRecord: function (a) {
    return Ext.ModelManager.create(
      {
        Id: null,
        ProjectId: a.get("ProjectId"),
        WorkOrderId: a.get("WorkOrderId"),
        CustomerId: a.get("CustomerId"),
        RegDate: a.get("RegDate"),
        UserId: a.get("UserId"),
        Hours: null,
        InfoNoteId: null,
        ProfessionItemId: a.get("ProfessionItemId"),
        Unit: a.get("Unit"),
        Debit: a.get("Debit"),
        Travel3IsDriver: a.get("Travel3IsDriver"),
      },
      Ext.getStore("MyMobileUserTimeStore").getModel()
    );
  },
  onTimeAbsenceSaveTap: function (e, d, b, c) {
    var a = this.getAbsenceForm();
    this.onTimeRowSave(a, !1);
  },
  validateSave: function (b, g) {
    var c = this,
      e = g == c.getAbsenceForm(),
      a,
      f,
      h = e
        ? Ext.getStore("MyCloneAbsenceProjectStore")
        : c.getTimeProjectId().getStore(),
      d;
    if (!checkRequired(g)) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return !1;
    }
    a = b.get("ProjectStatus");
    if (a == null) {
      f = e ? c.absenceProjectId() : c.getTimeProjectId().getValue();
      d = h.findRecord("Id", f);
      a = d ? d.get("StatusCode") : null;
    }
    if (b.get("Approved") || b.get("Approved2")) {
      Ext.Msg.alert(
        T("Approved"),
        T("Time is approved and can not be changed.")
      );
      return !1;
    } else {
      if (b.get("Invoiced")) {
        Ext.Msg.alert(
          T("Invoiced"),
          T("Time is invoiced and can not be changed.")
        );
        return !1;
      } else {
        if (b.get("RegDate") == "1970-01-01") {
          Ext.Msg.alert(T("Date"), T("Time has wrong date."));
          return !1;
        } else {
          if (
            !e &&
            a &&
            (a < STATUS_NOTED ||
              a >= STATUS_FINISHED ||
              c.getTimeProjectId().getHidden())
          ) {
            Ext.Msg.alert(
              T("Closed"),
              T(
                "Project is finished or an administration node, so time can not be changed or added."
              )
            );
            return !1;
          }
        }
      }
    }
    return !0;
  },
  validateDelete: function (a) {
    if (a.get("Approved") || a.get("Approved2")) {
      Ext.Msg.alert(
        T("Approved"),
        T("Time is approved and can not be deleted.")
      );
      return !1;
    } else {
      if (a.get("Invoiced")) {
        Ext.Msg.alert(
          T("Invoiced"),
          T("Time is invoiced and can not be deleted.")
        );
        return !1;
      }
    }
    return !0;
  },
  navigationSourceIsWorkOrder: function () {
    var c = this,
      b = c.getMynavigationview().getItems().keys;
    for (var a = 0; a < b.length; a++) {
      if (b[a] == "MyWorkOrderFormPanel") {
        return !0;
      }
    }
    return !1;
  },
  onTimeRowSave: function (c, d) {
    var b = this,
      g = Ext.getStore("MyCloneUserTimeStore"),
      l = this.getMynavigationview(),
      a = c.getRecord(),
      k = c.getValues(),
      f = c.down("#professionItemId"),
      j = c == this.getAbsenceForm(),
      e;
    try {
      e = a.get("InfoNoteId");
      c.disableTimeButtons(!0);
      a.set(k);
      if (f) {
        var h = f.getRecord(),
          i = h.get("Chargeable");
        if (a.get("ProfessionCode") !== h.get("ProfessionCode")) {
          a.set("Debit", i);
        }
      }
      if (isNaN(a.getId())) {
        a.set("Id", null);
      }
      if (isNaN(a.get("Hours"))) {
        a.set("Hours", 0);
      }
      if (!this.validateSave(a, c)) {
        c.disableTimeButtons(!1);
        return;
      }
      if (document.getElementsByClassName("x-invalid").length > 0) {
        Ext.Msg.alert(T("Value"), T("Please check current values."));
        c.disableTimeButtons(!1);
        return;
      }
      MEM.loadSpinner.show();
      CURRENT_PROJECTID =
        a.get("ProjectId") != b.absenceProjectId()
          ? a.get("ProjectId")
          : CURRENT_PROJECTID;
      if (!g.getProxy()) {
        MEM.serverError.show();
      }
      if (!a.getProxy()) {
        a.setProxy(g.getProxy());
      }
      a.set("MoveAll", !0);
      if (a.modified) {
        a.modified.MoveAll = !0;
      }
      a.save(
        {
          success: function () {
            try {
              b.setDayLabel(a.get("RegDate"));
              c.disableTimeButtons(!1);
              MEM.loadSpinner.hide();
              b.getMyTimeId().setValue(a.get("Id"));
              _currentTimeId = a.get("Id");
              if (!j) {
                b.reloadWorkOrderRows(a.get("WorkOrderId"), _currentTimeId);
              }
              var g = b.getInfoNote().getValue();
              var h = function () {
                b.onRenderWeek(b.getTimePanel(), null, new Date(_currentDate));
              };
              b.saveInfoNote(
                _currentTimeId,
                g,
                a,
                "TimeStore",
                e,
                b.getInfoNoteId(),
                h
              );
            } catch (m) {
              Ext.Msg.alert(
                T("Error"),
                T(
                  "Unknown error. Please contact administrator and give the following information:"
                ) +
                  "<br>" +
                  T("Error message:") +
                  m +
                  "<br>" +
                  "timeId = " +
                  _currentTimeId +
                  "<br>" +
                  "record = " +
                  a
              );
            }
            if (
              !b.navigationSourceIsWorkOrder() &&
              a.get("ProjectId") != b.absenceProjectId() &&
              (b.intSetting("FavoritesOnSave") == "1" ||
                b.intSetting("MEM.FavoritesOnSave") == "1")
            ) {
              CURRENT_WORKORDERID = a.get("WorkOrderId");
              var f = b.getFavouriteButton();
              if (d) {
                b.getNewButton().clickedForRecord = b.setNewTimeRecord(a);
              }
              f.fireEvent("tap", f);
            } else {
              if (d) {
                Ext.Msg.show({
                  title: T("Saved"),
                  message: T("Saved. Creating new."),
                  buttons: [Ext.MessageBox.OK],
                  fn: function (e) {
                    b.onSetTimeRecord(b.setNewTimeRecord(a), c);
                  },
                });
              } else {
                Ext.Msg.alert(T("Saved"), T("Saved."));
              }
            }
          },
          failure: function () {
            c.disableTimeButtons(!1);
            MEM.loadSpinner.hide();
          },
        },
        this
      );
    } catch (m) {
      c.disableTimeButtons(!1);
      MEM.loadSpinner.hide(m);
    }
  },
  isInfoNoteDirty: function (d) {
    var c = this,
      e = Ext.getStore("MyInfoNoteStore"),
      a = d.get("InfoNoteId");
    if (a) {
      var b = e.getById(a);
      if (b && b.get("Note") != c.getInfoNote().getValue()) {
        return !0;
      }
    } else {
      if (c.getInfoNote().getValue()) {
        return !0;
      }
    }
    return !1;
  },
  saveQueryIfDirtyForm: function (d, e) {
    var a = this,
      b = e ? a.getAbsenceForm() : a.getTimeForm(),
      f = e ? a.getAbsSaveButton() : a.getSaveButton(),
      c = b.getRecord();
    a.trimAllFormFields(b);
    b.updateRecord(c);
    if (
      f.isDisabled() === !1 &&
      ((c.dirty && !a.dirtyDueToNew(c) && !a.dirtyDueToCreatedByAdmin(c)) ||
        (a.isInfoNoteDirty(c) && e === !1))
    ) {
      b.disableTimeButtons(!0);
      Ext.Msg.show({
        title: T("Time"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (f) {
          if (f == "yes") {
            Ext.defer(function () {
              a.onTimeRowSave(b, d);
            }, 100);
          } else {
            if (d) {
              a.onSetTimeRecord(a.setNewTimeRecord(c), b);
            } else {
              a.getMynavigationview().pop();
            }
            b.disableTimeButtons(!1);
            c.reject();
          }
        },
      });
      return !0;
    } else {
      if (d) {
        a.onSetTimeRecord(a.setNewTimeRecord(c), b);
        b.disableTimeButtons(!1);
      }
      return !1;
    }
  },
  setProjectId: function (a) {
    this.ProjectId = a;
  },
  setWorkOrderId: function (a) {
    this.WorkOrderId = a;
  },
  onProfessionItemSearch: function () {
    var c = this,
      a = this.getMynavigationview(),
      b = this.getProfessionItemSearchpanel();
    a.push(b);
  },
  onAddTime: function (g) {
    var c = this,
      b = Ext.getStore("MyMobileUserTimeStore"),
      j = c.getApplication(),
      i = c.getAddTimePanel(),
      a = g ? c.getAbsenceForm().getRecord() : c.getTimeForm().getRecord(),
      h = g
        ? getUserSetting("PrevAbsenceTimeStamp")
        : getUserSetting("PrevTimeStamp");
    if (!parseInt(a.get("Id"))) {
      if (h && h.length > 1) {
        var e = new Date(a.get("RegDate")),
          f = new Date(a.get("RegDate")),
          d = JSON.parse(h);
        Object.keys(d).forEach(function (b) {
          switch (b) {
            case "StartHours":
              e = new Date(e.setHours(d[b]));
              break;
            case "StartMinutes":
              e = new Date(e.setMinutes(d[b]));
              break;
            case "StopHours":
              f = new Date(f.setHours(d[b]));
              break;
            case "StopMinutes":
              f = new Date(f.setMinutes(d[b]));
              break;
            default:
              a.set(b, d[b]);
          }
        });
        a.set({ StartTime: e, StopTime: f, RememberHours: !0 });
        c.showAddTimeModal(i, a, g);
      } else {
        b.meClearFilter();
        b.meAddFilter(["UserId", "=", parseInt(j.getUserId(), 10)]);
        b.meAddFilter(["RegDate", "=", a.get("RegDate")]);
        b.load({
          callback: function () {
            if (b.getCount() > 0) {
              b.data.getSorters().clear();
              b.sort("StartTime", "DESC");
              var d = b.getAt(0);
              if (d.get("StopTime")) {
                a.set({
                  StartTime: d.get("StopTime"),
                  StopTime: d.get("StopTime"),
                });
              }
            }
            c.showAddTimeModal(i, a, g);
          },
        });
      }
    } else {
      c.showAddTimeModal(i, a, g);
    }
  },
  showAddTimeModal: function (a, c, b) {
    a.setAbsence(b);
    a.setRecord(c);
    Ext.Viewport.add(a);
    a.show();
  },
  onTimePanelShow: function (a) {
    var b = this,
      d = a.getAbsence()
        ? b.getAbsenceForm().getRecord()
        : b.getTimeForm().getRecord(),
      h = a.down("#hours"),
      e = a.down("#breakTime"),
      c = a.down("#startTime"),
      f = a.down("#stopTime"),
      g = a.down("fieldset").getItems().items;
    Ext.each(g, function (b) {
      b.setValue(d.get(b.getName()));
      if (b.getName("StopTime") && !d.get("StopTime")) {
        b.setValue(c.getValue());
        d.set("StopTime", c.getValue());
      }
    });
    c.on("change", "onSetStartStopTime", b);
    f.on("change", "onSetStartStopTime", b);
    h.on("change", "onSetHours", b);
    e.on("change", "onSetBreakHours", b);
  },
  onSetStartStopTime: function (h) {
    var i = h.up(".myaddtimepanel"),
      a = this,
      f = i.getAbsence()
        ? a.getAbsenceForm().getRecord()
        : a.getTimeForm().getRecord(),
      c,
      e,
      d,
      b = i.down("#hours"),
      g = i.down("#breakTime");
    f.set([h.getName()], h.getValue());
    c = a.calculateTimeStamps(f);
    e = Math.round((c - a.calculateBreakTime(c)) * 100) / 100;
    d = a.calculateBreakTime(c);
    f.set("BreakTime", d);
    f.set("Hours", e);
    b.suspendEvents();
    g.suspendEvents();
    b.setValue(e);
    b.setData({ Hours: e, Break: d });
    g.setValue(d);
    b.resumeEvents(!0);
    g.resumeEvents(!0);
  },
  onSetHours: function (b) {
    Date.prototype.addHours = function (a) {
      this.setTime(this.getTime() + a * 60 * 60 * 1000);
      return this;
    };
    var e = b.up(".myaddtimepanel"),
      i = this,
      f = e.getAbsence()
        ? i.getAbsenceForm().getRecord()
        : i.getTimeForm().getRecord(),
      k = f.get("StartTime"),
      j = e.down("#breakTime"),
      d = e.down("#stopTime"),
      a = b.getValue() || 0,
      c = j.getValue() || 0,
      g = 23.75,
      a = a + c <= g ? a : g - c,
      h = new Date(k).addHours(a + c);
    f.set("StopTime", h);
    b.suspendEvents();
    d.suspendEvents();
    f.set("Hours", a);
    b.setValue(a);
    b.setData({ Hours: a, Break: c });
    d.setValue(h);
    b.resumeEvents(!0);
    d.resumeEvents(!0);
  },
  onSetBreakHours: function (f, a, j) {
    var h = f.up(".myaddtimepanel"),
      i = this,
      d = i.getTimeForm().getRecord(),
      e = h.down("#hours"),
      g = d.get("Hours") + d.get("BreakTime"),
      b,
      c;
    e.suspendEvents();
    f.suspendEvents();
    if (!a || a < 0) {
      a = 0;
    }
    if (a > g) {
      c = d.get("BreakTime");
      b = d.get("Hours");
    } else {
      b = Math.round((parseFloat(g) - parseFloat(a)) * 100) / 100;
      c = a;
    }
    d.set({ Hours: b, BreakTime: c });
    f.setValue(c);
    e.setValue(b);
    e.setData({ Hours: b, Break: c });
    f.resumeEvents(!0);
    e.resumeEvents(!0);
  },
  onTimePanelClose: function (b) {
    var c = this,
      g = b.down("#breakTime").getValue(),
      d = b.down("#hours").getValue(),
      e = b.down("#rememberHours").isChecked(),
      a = b.getAbsence()
        ? c.getAbsenceForm().getRecord()
        : c.getTimeForm().getRecord();
    a.set("BreakTime", g);
    a.set("Hours", d);
    var f = b.getAbsence() ? this.getMyAbsence() : this.getMyHours();
    f.setValue(d);
    f.setData({ Hours: d, Break: g });
    var h = b.getAbsence() ? "PrevAbsenceTimeStamp" : "PrevTimeStamp";
    if (e) {
      saveUserSetting(
        c.getApplication().getUserId(),
        h,
        JSON.stringify({
          StartHours: a.get("StartTime").getHours(),
          StartMinutes: a.get("StartTime").getMinutes(),
          StopHours: a.get("StopTime").getHours(),
          StopMinutes: a.get("StopTime").getMinutes(),
          Hours: a.get("Hours"),
          BreakTime: a.get("BreakTime"),
          RememberHours: e,
        })
      );
    } else {
      saveUserSetting(c.getApplication().getUserId(), h, "");
      a.set("RememberHours", !1);
    }
    c.setInfoNoteRequired(a);
    b.destroy();
  },
  setInfoNoteRequired: function (a) {
    var b = this,
      h = getSetting("Time.Timestamp.Show.Project") === "1",
      g = a && a.get("ProjectId") == b.absenceProjectId(),
      f = getSetting("Time.Timestamp.RequireBreakComment") !== "0";
    if (!h || g || !f) {
      return;
    }
    var i = b.calculateTimeStamps(a),
      d = b.calculateBreakTime(i),
      e = a.get("BreakTime") ? a.get("BreakTime") : 0,
      c = e != d,
      j = Ext.String.format(
        T("Explain why breaktime is set to {0}h instead of expected {1}h."),
        e,
        d
      );
    b.getInfoNote().setRequired(c);
    b.getInfoNote().setPlaceHolder(c ? j : "");
  },
  resetInfoNoteRequired: function () {
    var a = this;
    if (getSetting("Time.Timestamp.Show.Project") == 1) {
      a.getInfoNote().setRequired(!1);
      a.getInfoNote().setPlaceHolder("");
    }
  },
  calculateTimeStamps: function (a) {
    var e = new Date(a.get("StartTime")),
      b = new Date(a.get("StopTime")),
      d,
      c;
    if (a.get("StartTime") > a.get("StopTime")) {
      b.setDate(b.getDate() + 1);
    }
    d = Math.abs(e - b) / 3600000;
    c = Math.round(d * 100) / 100;
    return c;
  },
  calculateBreakTime: function (e) {
    var d = getSetting("Time.Timestamp.Formula")
        ? getSetting("Time.Timestamp.Formula").split(",")
        : null,
      c,
      a,
      b = 0;
    Ext.each(d, function (d) {
      c = d.split(":")[0];
      a = d.split(":")[1];
      if (e > parseFloat(c)) {
        if (!a) {
          Ext.Msg.alert(
            T("Error"),
            T(
              "Invalid value for parameter Time.Timestamp.Formula, contact support."
            )
          );
        }
        b = parseFloat(a);
      }
    });
    return b;
  },
  onProfessionItemSelected: function (d, g, f, b, h, e) {
    var a = this,
      c = a.getMynavigationview();
    a.appendProfessionItem(b.getId());
    a.getMyProfessionItemId().setValue(b.getId());
    c.pop();
  },
  onWorkOrderSelected: function (d, g, f, b, h, e) {
    var a = this,
      c = a.getMynavigationview();
    a.getTimeWorkOrderId().setValue(b.getId());
    c.pop();
  },
  onWorkOrderSearch: function () {
    var c = this,
      f = this.getMynavigationview(),
      b = this.getWorkOrderSearchpanel(),
      a = [],
      e = c.intSetting("MobileWorkOrderStatusCodeMin"),
      d = c.intSetting("MobileWorkOrderStatusCodeMax");
    a.push(["ProjectId", "=", c.getTimeProjectId().getValue()]);
    if (e > 0) {
      a.push(["WorkOrderStatusCode", ">=", e]);
    }
    if (d > 0) {
      a.push(["WorkOrderStatusCode", "<=", d]);
    }
    b.setFilters(a);
    b.search(null, !0);
    f.push(b);
  },
  onSaveApproval: function () {
    var a = this.getApprovallist().getStore();
    a.on({
      scope: this,
      single: !0,
      write: function (b, a) {
        MEM.loadSpinner.hide();
        Ext.Msg.alert(T("Saved"), T("Saved."));
      },
    });
    MEM.loadSpinner.show();
    a.sync();
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderOverlay", {
  extend: Ext.Panel,
  xtype: "myworkorderoverlay",
  config: {
    cls: "myworkorderoverlay",
    left: 0,
    top: 0,
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    styleHtmlContent: !1,
    scrollable: !0,
    currentDate: null,
    store: "MyCustomerContactStore",
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "close",
          },
        ],
      },
      {
        xtype: "myinlinelist",
        store: "MyCustomerContactStore",
        id: "MyCustomerContactList",
        scrollable: !1,
        cls: "my-rowlist",
        ui: "round",
        itemTpl: [
          '<div style="width:100%">' +
            "<div>{ContactName}</div>" +
            '<tpl if="Email"><div style="float:right"><a href="mailto:{Email}">{Email}</a></div><br></tpl>' +
            '<tpl if="Phone"><div style="float:right"><a href="tel:{Phone}">{Phone}</a></div><br></tpl>' +
            '<tpl if="Mobile"><div style="float:right"><a href="tel:{Mobile}">{Mobile}</a></div><br></tpl>' +
            "</div >",
        ],
      },
      {
        id: "myCustomerInfo",
        xtype: "label",
        margin: "10 10 10 10",
        scrollable: !1,
      },
    ],
  },
});
Ext.define("MEM.ux.field.MySpinner", {
  extend: Ext.field.Spinner,
  alias: "widget.myspinnerfield",
  _isScrolling: !1,
  _isDefered: !1,
  initialize: function () {
    this.callParent(arguments);
    var a = this.getComponent();
    a.on("focus", function () {
      if (a.getValue() <= 0) {
        a.setValue(null);
      }
    });
    a.on("blur", function () {
      if (a.getValue() <= 0) {
        a.setValue(0);
      }
    });
  },
  onTouchStart: function (d) {
    var a = this,
      c = a.up("panel"),
      b = c && c.getScrollable() ? c.getScrollable().getScroller() : null;
    if (a._isDefered) {
      b.un("scrollstart", a.setScrolling, a);
      a.setReadOnly(!1);
      this.callParent(arguments);
      d.fireEvent("tap");
    } else {
      a.setReadOnly(!0);
      if (b) {
        b.on("scrollstart", a.setScrolling, a, { single: !0 });
      }
      a._isDefered = !0;
      Ext.Function.defer(a.checkScrolling, 300, a, arguments);
    }
  },
  onTouchEnd: function (b) {
    var a = this;
    if (a._isDefered) {
      a.checkScrolling(b);
    }
    a.resetScrolling();
    a.setReadOnly(!1);
    this.callParent(arguments);
  },
  checkScrolling: function (b) {
    var a = this;
    if (!a._isScrolling && a._isDefered) {
      a.onTouchStart(b);
    }
    a._isDefered = !1;
  },
  setScrolling: function (a) {
    this._isScrolling = !0;
  },
  resetScrolling: function () {
    this._isScrolling = !1;
  },
});
Ext.define("MyListItem", {
  extend: Ext.dataview.component.DataItem,
  xtype: "mylistitem",
  statics: { ii: 0 },
  config: {
    spinner: !0,
    label: "Spinner Field",
    cls: "my-spinner",
    dataMap: { getSpinner: { setLabel: "Description" } },
  },
  applySpinner: function (a) {
    MyListItem.ii += 1;
    return Ext.factory(
      a && {
        component: { disabled: !1, readOnly: !1 },
        increment: 1,
        width: isPhone ? 200 : 300,
        labelWidth: isPhone ? 150 : 190,
        itemId: "mySpinner_" + MyListItem.ii,
        minValue: 0,
      },
      "MEM.ux.field.MySpinner",
      this.getSpinner()
    );
  },
  updateSpinner: function (a, b) {
    if (b) {
      this.remove(b);
    }
    if (a) {
      this.add(a);
    }
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderRowOverlay", {
  extend: Ext.Panel,
  xtype: "myworkorderrowoverlay",
  config: {
    cls: "myworkorderrowoverlay",
    left: 0,
    top: 0,
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    scrollable: !0,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Favoriter"),
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "closeRow",
          },
        ],
      },
      {
        xtype: "button",
        html: T("Save"),
        action: "saveList",
        docked: "bottom",
        ui: "confirm",
        flex: 1,
      },
      {
        xtype: "dataview",
        id: "myArticleDataview",
        scrollable: null,
        useComponents: !0,
        defaultType: "mylistitem",
        store: {
          storeId: "WorkOrderRowOverlay_MyArticleStore",
          type: "myarticlestorealias",
        },
        value: 0,
        increment: 1,
        minValue: 0,
        labelWidth: "60%",
        cls: "myWOdataview",
      },
    ],
  },
});
Ext.define("MEM.view.workorder.MySearchOverlay", {
  extend: Ext.Panel,
  xtype: "mysearchoverlay",
  config: {
    cls: "mysearchoverlay",
    left: 0,
    top: 0,
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: !0,
    currentProjectId: null,
    currentWorkOrderId: null,
    additional: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: "&nbsp;",
        layout: { pack: "end" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "searchClose",
          },
        ],
      },
      {
        itemId: "mySearchList",
        xtype: "list",
        data: [
          {
            Name: T("Open project"),
            Tag: "Project",
            Action: "projectSearchTap",
            Active: !0,
            NeedRight: ["MobileProject"],
          },
          {
            Name: T("Economy"),
            Tag: "EconomyMenu",
            Action: "economySearchTap",
            Active: !0,
            NeedRight: ["ProjectOverview"],
          },
          {
            Name: T("Workorder") + "/" + T("AWO"),
            Tag: "WO",
            Action: "WOSearchTap",
            Active: !0,
            NeedRight: ["MobileAWO"] && ["MobileWorkOrder"],
          },
        ],
        cls: "myProjectList",
        itemTpl: "{Name}",
        docked: "top",
      },
    ],
  },
  filterData: function () {
    this.getComponent("mySearchList")
      .getStore()
      .filterBy(function (a) {
        return (
          a.data.Active &&
          a.data.NeedRight.every(function (b) {
            return haveRight(b);
          })
        );
      });
  },
});
Ext.define("MEM.view.workorder.MyStatusOverlay", {
  extend: Ext.form.Panel,
  xtype: "mystatusoverlay",
  config: {
    cls: "mystatusoverlay",
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !0,
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    items: [
      {
        xtype: "toolbar",
        docked: "top",
        title: T("Set status on WO"),
        layout: { pack: "end" },
        items: [
          {
            id: "setStatus",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "check2",
            iconMask: !0,
            action: "setStatus",
          },
          {
            id: "closeStatus",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            action: "closeStatus",
          },
        ],
      },
      {
        xtype: "selectfield",
        itemId: "overlayStatus",
        store: "LocalWorkOrderStatusStore",
        displayField: "StatusName",
        valueField: "Id",
        usePicker: !1,
        label: T("Status"),
        name: "WorkOrderStatusId",
      },
    ],
  },
});
Ext.define("MEM.view.workorder.MyArticleSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.myarticlesearchpanel",
  config: {
    title: T("Search article"),
    searchfields: [
      {
        label: T("Article category"),
        field: "ArticleCategoryName",
        listeners: {
          painted: function () {
            if (Me.formValidateHidden("ArticleStore", "ArticleCategoryId")) {
              this.setHidden(!0);
            }
          },
        },
      },
      { label: T("ArtNo"), field: "ArticleNo" },
      { label: T("ArtTitle"), field: "Description" },
    ],
    store: {
      storeId: "ArticleSearchPanel_MyArticleStore",
      type: "myarticlestorealias",
    },
    itemTpl: ["{ArticleNo} {FullDescription}"],
    filters: [["Disabled", "=", !1]],
    minLength: 2,
  },
});
Ext.define("MEM.view.workorder.MyResourceSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.myresourcesearchpanel",
  config: {
    itemId: "MyResourceSearchPanel",
    title: T("Search resource"),
    searchfields: [
      { label: T("Resource number"), field: "ResourceNo" },
      { label: T("Name"), field: "Description" },
      { label: T("Partner"), field: "CreditProjectName" },
    ],
    store: {
      storeId: "ResourceSearchPanel_MyResourceStore",
      type: "myresourcestorealias",
    },
    filters: [["Disabled", "=", !1]],
    itemTpl: ["{ResourceNo} {Description} ({CreditProjectName})"],
    targetField: undefined,
  },
});
Ext.define("MEM.view.workorder.MySignaturePanel", {
  extend: Ext.Panel,
  alias: "widget.mysignaturepanel",
  config: {
    cls: "mysignaturepanel",
    layout: { type: "vbox", align: "stretch", pack: "end" },
    title: T("Sign WorkOrder"),
    items: [
      {
        xtype: "mysignature",
        height: 0,
        imageWidth: 768,
        imageHeight: 1024,
        signHeight: 120,
      },
      {
        xtype: "list",
        itemId: "header",
        cls: "mysignatureoverlayheader",
        itemCls: "mysignatureoverlayheaderitem",
        flex: 0,
        scrollable: "vertical",
        inline: { wrap: !1 },
        store: { fields: ["title", "value"] },
        itemHeight: isPhone ? 18 : 30,
        itemTpl: [
          '<div class="sign-listitem sign-header-title";align="left"><tpl if="title">{title}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-header-value";align="left"><tpl if="value">{value}<tpl else>&nbsp;</tpl></div>',
        ],
      },
      {
        xtype: "list",
        itemId: "list",
        itemCls: "mysignatureoverlaylistitem",
        flex: 1,
        scrollable: "vertical",
        inline: { wrap: !1 },
        store: { fields: ["date", "title", "unit", "qty", "comment"] },
        itemHeight: isPhone ? 18 : 30,
        itemTpl: [
          '<div class="sign-listitem sign-date ";align="left"><tpl if="date">{date}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-title";align="left"><tpl if="title">{title}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-unit";align="left"><tpl if="unit">{unit}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-qty";align="right"><tpl if="qty">{qty}<tpl else>&nbsp;</tpl></div>',
          '<div class="sign-listitem sign-comment";align="left">{comment}</div>',
        ],
      },
      { xtype: "mysignaturepad", height: 120 },
      {
        xtype: "toolbar",
        cls: "my-button-toolbar",
        ui: "light",
        layout: { pack: "center", type: "hbox" },
        items: [
          {
            xtype: "button",
            itemId: "signatureSave",
            cls: "x-button-icon-standard",
            text: T("Save"),
            handler: function () {
              var b = this.up("mysignaturepanel"),
                a = b.down("mysignature"),
                f = a.canvas,
                e = f.getContext("2d"),
                c = new Image(),
                d = new Image();
              c.onload = function () {
                e.drawImage(
                  c,
                  0,
                  0,
                  a.getImageWidth(),
                  a.getImageHeight() - a.getSignHeight()
                );
                d.src = b.down("mysignaturepad").canvas.toDataURL();
              };
              d.onload = function () {
                e.drawImage(
                  d,
                  0,
                  a.getImageHeight() - a.getSignHeight(),
                  a.getImageWidth(),
                  a.getSignHeight()
                );
                var c = b.down("mysignature").getImage();
                b.fireEvent("signaturesave", c);
              };
              c.src = b.down("mysignature").canvas.toDataURL();
            },
          },
          {
            xtype: "button",
            itemId: "signatureClear",
            cls: "x-button-icon-standard",
            text: T("Clear"),
            handler: function () {
              var a = this.up("mysignaturepanel");
              a.down("mysignature").initImage();
              a.down("mysignaturepad").initImage();
            },
          },
        ],
      },
    ],
  },
  constructor: function () {
    this.callParent(arguments);
    this.relayEvents(this.down("mysignature"), "signatureopen");
  },
  getLineWidth: function () {
    return this.down("mysignature").getLineWidth();
  },
  getCanvas: function () {
    return this.down("mysignature").canvasContext;
  },
  initImage: function (a) {
    this.setOverlayText(a);
    this.down("mysignature").initImage(a);
    this.down("mysignaturepad").initImage(a);
  },
  setOverlayText: function (c) {
    var a = new Ext.util.MixedCollection(),
      b = new Ext.util.MixedCollection();
    c.forEach(function (d) {
      if (d.datafield) {
        var f = d.header === !0 ? a : b,
          e = f.get(d.row);
        if (!e) {
          e = f.add(d.row, {});
        }
        e[d.datafield] = d.text;
      }
    });
    this.down("#header").getStore().setData(a.getRange(0));
    this.down("#list").getStore().setData(b.getRange(0));
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderRowAttributePanel", {
  extend: Ext.form.Panel,
  xtype: "myworkorderrowattributepanel",
  config: {
    cls: "myworkorderrowattributepanel",
    autoDestroy: !1,
    scrollable: null,
    layout: "vbox",
    items: [
      {
        xtype: "fieldset",
        defaults: { labelWidth: "40%" },
        items: [
          {
            itemId: "resourceCombo",
            xtype: "myselectfield",
            label: T("Resource"),
            store: {
              storeId: "MyWorkOrderRowAttributePanel_MyResourceStore",
              type: "myresourcestorealias",
            },
            displayField: "FullDescription",
            valueField: "Id",
            name: "ResourceId",
            autoSelect: !1,
            clearIcon: !0,
            hidden: !0,
            listeners: {
              change: function () {
                var a = this.up("#itemlistpanel").down("[cls=myWOdataview]");
                this.up("myworkorderrowattributepanel").fireEvent(
                  "attributeChange",
                  a
                );
              },
            },
          },
          {
            id: "factoryPricelistCombo",
            xtype: "myselectfield",
            label: T("Factory pricelist"),
            store: {
              storeId: "MyWorkOrderRowAttributePanel_MyFactoryPricelistStore",
              type: "myfactorypriceliststorealias",
            },
            displayField: "Name",
            valueField: "Id",
            name: "FactoryPricelistId",
            autoSelect: !1,
            clearIcon: !0,
            hidden: !0,
            listeners: {
              change: function () {
                var a = this.up("#itemlistpanel").down("[cls=myWOdataview]");
                this.up("myworkorderrowattributepanel").fireEvent(
                  "attributeChange",
                  a
                );
              },
            },
          },
        ],
      },
    ],
  },
});
Ext.define("MEM.view.workorder.MyKPIReportingPanel", {
  extend: Ext.Panel,
  xtype: "myworkorderkpireportingpanel",
  config: {
    cls: "my-reporting",
    title: T("Reporting"),
    layout: "vbox",
    scrollable: !0,
    itemId: "itemlistpanel",
    items: [
      {
        xtype: "toolbar",
        ui: "light",
        docked: "bottom",
        layout: { pack: "center", type: "hbox" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            html: T("Save"),
            itemId: "saveButton",
            docked: null,
            listeners: {
              tap: function (a) {
                this.setDisabled(!0);
              },
              painted: function (a) {
                this.setDisabled(
                  !1 ||
                    null ==
                      this.up("myworkorderkpireportingpanel")
                        .down("#workorderId")
                        .getValue()
                );
              },
            },
          },
        ],
      },
      {
        itemId: "workorderId",
        cls: "my-selectfield my-woselectfield",
        docked: "top",
        xtype: "myselectfield",
        label: T("WorkOrder"),
        store: "MyCloneWorkOrderListStore",
        displayField: "FullName",
        valueField: "Id",
        required: !0,
      },
      {
        itemId: "productId",
        cls: "my-selectfield",
        docked: "top",
        xtype: "myselectfield",
        label: T("Performed"),
        store: { type: "myarticlestorealias", storeId: "kpiproductstore" },
        displayField: "FullDescription",
        valueField: "Id",
        required: !0,
      },
      {
        xtype: "numberfield",
        itemId: "performedqty",
        cls: "my-qtyfield",
        required: !0,
        maxValue: 99999999,
        minValue: 0,
        label: T("Qty"),
      },
      { xtype: "label", html: T("Consumed"), cls: "my-label" },
      {
        xtype: "dataview",
        itemId: "consumptionlist",
        scrollable: null,
        useComponents: !0,
        defaultType: "mylistitemfull",
        store: { type: "myarticlestorealias", storeId: "kpiconsumptionstore" },
        value: 0,
        cls: "myWOdataview",
      },
      {
        xtype: "myworkorderrowattributepanel",
        itemId: "attributePanel",
        docked: "bottom",
        listeners: {
          painted: function () {
            if (
              Me.formValidateHidden("WorkOrderRowStore", "ResourceId") &&
              Me.formValidateHidden("WorkOrderRowStore", "FactoryPricelistId")
            ) {
              this.setHidden(!0);
            }
          },
        },
      },
    ],
  },
  constructor: function (b) {
    var a = this;
    a.callParent(arguments);
    a.on("painted", function () {
      a.fireEvent("panelshow");
    });
  },
});
Ext.define("MEM.ux.image.MyPinchZoomImage", {
  extend: Ext.Container,
  xtype: "pinchzoomimage",
  alias: "widget.pinchzoomimage",
  config: {
    src: "",
    height: null,
    width: null,
    imgheight: null,
    imgwidth: null,
    scrollable: !0,
  },
  initImage: function (c) {
    var d =
        this.getInitialConfig("imgheight") ||
        this.getHeight() ||
        this.element.getHeight(),
      e =
        this.getInitialConfig("imgwidth") ||
        this.getWidth() ||
        this.element.getWidth(),
      a = this.getSrc() || c,
      b = null;
    if (Ext.isString(a) && a !== "") {
      b = Ext.create("Ext.Img", {
        mode: "",
        src: a,
        listeners: {
          pinch: { element: "element", fn: this.onImagePinch },
          doubletap: { element: "element", fn: this.onImageDoubletap },
          load: { fn: this.onImageLoad },
          error: function (a, b) {
            Ext.Msg.alert("Ext.Img could not be loaded", a.getSrc());
          },
        },
      });
      this.add(b);
    }
  },
  onImageLoad: function (e) {
    var c = this;
    var b = Ext.getCmp("mynavigationview");
    this.initialWidth = b.element.dom.scrollWidth;
    this.initialHeight = b.element.dom.scrollHeight;
    var d = this.element.down("img");
    this.initialWidthImg = d.getWidth();
    this.initialHeightImg = d.getHeight();
    var a = this.initialWidth / this.initialWidthImg;
    this.initialHeight =
      (this.initialHeightImg / this.initialWidthImg) * this.initialWidth;
    this.isScaled = !0;
    var g = this.initialWidth * a;
    var f = this.initialHeight * a;
    this.newWidthImg = this.initialWidthImg * a;
    this.newHeightImg = this.initialHeightImg * a;
    c.setWidth(this.initialWidth);
    c.setHeight(this.initialHeight);
    e.setWidth(this.newWidthImg);
    e.setHeight(this.newHeightImg);
  },
  onImageDoubletap: function (k) {
    var j = this.initialWidth,
      i = this.initialHeight,
      f = this.initialWidthImg,
      e = this.initialHeightImg,
      h = this.newWidthImg,
      g = this.newHeightImg,
      b = this,
      a = this.element,
      d = this.isScaled ? f : h,
      c = this.isScaled ? e : g;
    b.setWidth(j);
    b.setHeight(i);
    a.down("img").setWidth(d);
    a.down("img").setHeight(c);
    a.setWidth(d);
    a.setHeight(c);
    this.isScaled = !this.isScaled;
  },
  setImgSize: function (c, b) {
    var a = this,
      d = this.element;
    a.setWidth(c);
    a.setHeight(b);
    d.setSize(c, b);
  },
  onImagePinch: function (a) {
    var g = this.initialWidth,
      f = this.initialHeight,
      e = this.newWidthImg,
      d = this.newHeightImg,
      k = g * a.scale,
      j = f * a.scale,
      i = e * a.scale,
      h = d * a.scale,
      b = this,
      c = this.element,
      l = this.up("container").getScrollable().getScroller(),
      m = l.getMaxPosition();
    b.setWidth(k);
    b.setHeight(j);
    c.setWidth(i);
    c.setHeight(h);
    this.isScaled = !1;
  },
  applySrc: function (b) {
    var a = this.down("img");
    if (Ext.isObject(a)) {
      a.destroy();
    }
    this.initImage(b);
  },
});
var header = !0;
function hexToR(a) {
  return parseInt(cutHex(a).substring(0, 2), 16);
}
function hexToG(a) {
  return parseInt(cutHex(a).substring(2, 4), 16);
}
function hexToB(a) {
  return parseInt(cutHex(a).substring(4, 6), 16);
}
function cutHex(a) {
  return a.charAt(0) == "#" ? a.substring(1, 7) : a;
}
function status(c) {
  var b = Ext.getStore("MyWorkOrderStatusStore"),
    a = b.findRecord("Id", c, 0, !1, !0, !0);
  if (a) {
    return a.get("StatusName");
  }
  return "";
}
function statusColor(d) {
  var c = Ext.getStore("MyCloneWorkOrderStatusStore"),
    b,
    g,
    f,
    e,
    a = c.findRecord("Id", d, 0, !1, !0, !0);
  if (a) {
    b = a.get("StatusColor");
    return "background-color: " + b;
  }
  return "";
}
function attachment(a) {
  if (a) {
    return '<span class="me-list-icon-attachment">&nbsp;</span>';
  } else {
    return '<span style="min-height: 24px; position: absolute; left: 3em;">&nbsp</span>';
  }
}
Ext.define("MEM.view.workorder.MyWorkOrderPanel", {
  extend: Ext.Panel,
  alias: "widget.myworkorderpanel",
  fullscreen: !0,
  config: {
    cls: "myworkorderpanel",
    autoDestroy: !1,
    layout: { type: "card" },
    items: [
      {
        xtype: "container",
        cls: "mywopaneltop",
        docked: "top",
        scrollable: "horizontal",
        items: [
          {
            xtype: "toolbar",
            ui: "my-status-button-ui",
            cls: "woToolbar",
            width: "4096",
            fieldLabel: T("Status"),
            items: [
              {
                xtype: "segmentedbutton",
                itemId: "statusButtons",
                allowDepress: !1,
              },
            ],
          },
        ],
      },
      {
        xtype: "list",
        title: "All",
        autoDestroy: !1,
        scrollable: "vertical",
        store: "",
        id: "MyWorkOrderList",
        scrollToTopOnRefresh: !1,
        listeners: {
          painted: function (b, a) {
            this.up("myworkorderpanel").fireEvent("panelshow", this, a);
          },
        },
        onItemDisclosure: !0,
        cls: "myWOlist",
        itemHeight: isPhone ? 28 : 42,
        grouped: !0,
        indexBar: {
          xtype: "myindexbar",
          itemId: "myworkorderindexbar",
          listeners: {
            index: function (d, a, b, c) {
              console.log(a);
            },
          },
        },
        ui: "round",
        itemTpl: [
          '<div class="status-box" style="{[statusColor(values.WorkOrderStatusId)]}"></div>{[attachment(values.HaveDocument)]}<span class="WOlist-span"> {WorkOrderNo}, {Name} <span class="WOlist-date">{ProductionStartDate:date("' +
            Ext.util.Format.defaultDateFormat +
            '")}',
        ],
      },
      {
        xtype: "container",
        docked: "bottom",
        scrollable: null,
        items: [
          {
            xtype: "toolbar",
            itemId: "viewtoolbar",
            ui: "light",
            docked: "bottom",
            layout: { pack: "start", align: "center", type: "hbox" },
            items: [
              {
                itemId: "organisationtoggle",
                hidden: !0,
                cls: "organisationtoggle",
                xtype: "togglefield",
                label: T("Show all"),
                name: "organisationtoggle",
              },
              { hidden: !0, xtype: "spacer", itemId: "toolbarspacer" },
              {
                xtype: "segmentedbutton",
                allowDepress: !1,
                itemId: "viewButtons",
                items: [
                  {
                    xtype: "button",
                    itemId: "groupByDate",
                    cls: "my-status-button",
                    pressed: !0,
                    iconCls: "time-clock",
                    ui: "dark",
                    iconMask: !0,
                    align: "right",
                  },
                  {
                    xtype: "button",
                    itemId: "groupByProject",
                    cls: "my-status-button",
                    pressed: !0,
                    iconCls: "list",
                    ui: "dark",
                    iconMask: !0,
                    align: "right",
                  },
                  {
                    xtype: "button",
                    itemId: "groupByProjectName",
                    cls: "my-status-button",
                    pressed: !0,
                    iconCls: "font-clock",
                    ui: "dark",
                    iconMask: !0,
                    align: "right",
                  },
                ],
              },
            ],
          },
        ],
      },
    ],
  },
});
Ext.define("MyListItemFull", {
  extend: Ext.dataview.component.DataItem,
  xtype: "mylistitemfull",
  config: {
    spinner: !0,
    label: "Spinner Field",
    cls: "my-listitemfull",
    dataMap: { getSpinner: { setLabel: "FullDescription" } },
  },
  applySpinner: function (c) {
    var b = {};
    Ext.apply(b, {
      stepValue: 1,
      component: { disabled: !1, readOnly: !1 },
      labelWidth: null,
    });
    var a = Ext.factory(b, "MEM.ux.field.MySpinner", this.getSpinner());
    a.on({ change: this.onChange });
    return a;
  },
  updateSpinner: function (a, b) {
    if (b) {
      this.remove(b);
    }
    if (a) {
      this.add(a);
    }
  },
  onChange: function (a, c, d) {
    var b = a.up("dataview"),
      e = a.getParent(),
      f = a.getParent().getRecord();
    b.fireEvent("listspinnerchange", b, e, f, c, d);
  },
});
Ext.define("MEM.view.workorder.MyWorkOrderRowFavourite", {
  extend: Ext.Panel,
  xtype: "myworkorderrowfavourite",
  config: {
    workOrderFavourite: !1,
    cls: "my-workorderrowfav",
    itemId: "itemlistpanel",
    title: T("Favourites"),
    layout: "vbox",
    scrollable: !0,
    items: [
      {
        xtype: "toolbar",
        itemId: "favoritePanel",
        docked: "top",
        ui: "my-status-button-ui",
        cls: "woToolbar",
        fieldLabel: T("Status"),
        scrollable: { direction: "horizontal", directionLock: !0 },
        items: [
          {
            xtype: "segmentedbutton",
            itemId: "favoriteLists",
            allowDepress: !1,
          },
        ],
      },
      {
        xtype: "toolbar",
        ui: "light",
        docked: "bottom",
        layout: { pack: "center", type: "hbox" },
        items: [
          {
            xtype: "button",
            cls: "x-button-icon-standard",
            html: T("Save"),
            action: "saveList",
            itemId: "saveButton",
            docked: null,
            listeners: {
              tap: function (a) {
                this.setDisabled(!0);
              },
              painted: function (a) {
                this.setDisabled(
                  !1 ||
                    null ==
                      this.up("myworkorderrowfavourite")
                        .down("#workorderidfield")
                        .getValue()
                );
              },
            },
          },
        ],
      },
      {
        id: "myFavouritWorkOrderId",
        itemId: "workorderidfield",
        cls: "my-favouriteworkorderid",
        docked: "top",
        xtype: "myselectfield",
        label: T("WorkOrder"),
        store: "MyCloneWorkOrderListStore",
        displayField: "FullName",
        valueField: "Id",
        required: !0,
        name: "WorkOrderId",
        hidden: !1,
      },
      {
        xtype: "dataview",
        id: "myFavouritList",
        scrollable: null,
        useComponents: !0,
        defaultType: "mylistitemfull",
        store: null,
        value: 0,
        cls: "myWOdataview",
      },
      {
        xtype: "myworkorderrowattributepanel",
        itemId: "attributePanel",
        docked: "bottom",
        listeners: {
          painted: function () {
            if (
              Me.formValidateHidden("WorkOrderRowStore", "ResourceId") &&
              Me.formValidateHidden("WorkOrderRowStore", "FactoryPricelistId")
            ) {
              this.setHidden(!0);
            }
          },
        },
      },
    ],
  },
});
Ext.define("MEM.view.workorder.MyEmailOverlay", {
  extend: Ext.form.Panel,
  xtype: "myemailoverlay",
  config: {
    left: 0,
    top: 0,
    layout: "vbox",
    modal: !0,
    hideOnMaskTap: !0,
    hidden: !1,
    width: "70%",
    contentEl: "content",
    styleHtmlContent: !0,
    scrollable: null,
    items: [
      {
        xtype: "titlebar",
        docked: "top",
        title: T("Settings"),
        layout: { pack: "end" },
        items: [
          {
            id: "preview",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "file",
            iconMask: !0,
            align: "right",
            action: "previewMail",
          },
          {
            id: "sendEmail",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "mail",
            iconMask: !0,
            align: "right",
            action: "sendEmail",
          },
          {
            id: "closeEmailOverlay",
            xtype: "button",
            cls: "x-button-icon-standard",
            iconCls: "delete_black1",
            iconMask: !0,
            align: "right",
            action: "closeEmailOverlay",
          },
        ],
      },
      {
        xtype: "checkboxfield",
        itemId: "orderSummaryShowPrice",
        label: T("Show price and amount"),
        labelWidth: "80%",
        value: "1",
        checked: !0,
        name: "showPrice",
      },
      {
        xtype: "checkboxfield",
        itemId: "orderSummaryShowVat",
        label: T("Show net amount and vat"),
        labelWidth: "80%",
        value: "1",
        checked: !0,
        name: "showVat",
      },
    ],
  },
});
Ext.define("MEM.model.ProjectLimited", {
  extend: MEM.model.Base,
  config: {
    fields: [
      {
        name: "Project",
        type: "string",
        convert: function (b, a) {
          return a.data.ProjectNo + ", " + a.data.ProjectName;
        },
      },
      {
        name: "ParentProjectId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Parent Project No"),
      },
      {
        name: "ProjectNo",
        type: "string",
        meType: "meShortText",
        max: 10,
        persist: !0,
        display: T("Project No"),
      },
      {
        name: "ProjectStatusId",
        type: "int",
        meType: "meMediumText",
        display: T("Project status") + T("Code"),
      },
      {
        name: "ProjectStatusCode",
        type: "int",
        meType: "meMediumText",
        display: T("Project status") + T("Code"),
      },
      {
        name: "ProjectName",
        type: "string",
        meType: "meMediumText",
        max: 50,
        display: T("Project Name"),
      },
      {
        name: "PriceTypeId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Pricetype") + T("Code"),
      },
      {
        name: "ProjectTypeId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Project type") + T("Code"),
      },
      {
        name: "ProjectManagerId",
        type: "int",
        meType: "meMediumText",
        display: T("Project manager") + " " + T("Username"),
      },
      {
        name: "WorkLeaderId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Work leader") + " " + T("Username"),
      },
      {
        name: "TagField1Id",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Tag field 1"),
      },
      {
        name: "TagField2Id",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Tag field 2"),
      },
      {
        name: "CustomerId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Customer no"),
      },
      {
        name: "CustomerAgentId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Customer Contact"),
      },
      {
        name: "CustomerRef",
        type: "string",
        meType: "meMediumText",
        max: 50,
        display: T("Customer ref."),
      },
      {
        name: "MarkupModelId",
        type: "int",
        meType: "meShortText",
        display: T("Markup model"),
      },
      {
        name: "CostCenterId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Costcenter"),
      },
      {
        name: "SellerId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Seller") + " " + T("Username"),
      },
      {
        name: "FrameworkContractId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Framework contract"),
        translate: T("FrameworkContract"),
      },
      {
        name: "PartnerSupplierId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("Partner supplier"),
      },
      {
        name: "ProjectResourceGroupId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("ProjectResourceGroupProject"),
      },
      {
        name: "WorkplaceId",
        type: "string",
        meType: "meMediumText",
        max: 50,
        allowNull: !0,
        display: T("WorkplaceId"),
      },
      {
        name: "BasicScopeId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
      },
      {
        name: "KPIRuleId",
        type: "int",
        meType: "meMediumText",
        allowNull: !0,
        display: T("KPI rule"),
      },
      { name: "WOFavorite", type: "boolean", persist: !1 },
    ],
  },
});
Ext.define("MEM.store.MyProjectLimitedStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myprojectlimitedstorealias",
  config: {
    model: "MEM.model.ProjectLimited",
    storeId: "MyProjectLimitedStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Project", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectLimitedStore" },
  },
});
Ext.define("MEM.model.ProjectStatus", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "StatusName", type: "string", max: 50 },
      { name: "StatusCode", type: "int" },
      { name: "StatusColor", type: "string", max: 20 },
    ],
  },
});
Ext.define("MEM.store.MyProjectStatusStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.ProjectStatus",
    storeId: "MyProjectStatusStore",
    remoteFilter: !1,
    remoteSort: !0,
    sorters: [{ property: "StatusCode", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "ProjectStatusStore" },
  },
});
Ext.define("MEM.model.UserFavoriteList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "UserId", type: "int" },
      { name: "FavoriteListId", type: "int" },
      { name: "Name", type: "string" },
    ],
  },
});
Ext.define("MEM.store.MyUserFavoriteListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myuserfavoriteliststorealias",
  config: {
    model: "MEM.model.UserFavoriteList",
    storeId: "MyUserFavoriteListStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "UserFavoriteListStore" },
  },
});
Ext.define("MEM.model.UserFavoriteArticle", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ArticleId", type: "int" },
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (d, a) {
          var c = Ext.getStore("MyItemUnitStore"),
            b = c.findRecord("Id", a.get("ItemUnitId"));
          if (b) {
            return Ext.String.format(
              "{0} ({1})",
              a.get("Description"),
              b.get("Description")
            );
          } else {
            return a.get("Description");
          }
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "FavoriteListId", type: "int" },
      { name: "UserId", type: "int" },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
    ],
  },
});
Ext.define("MEM.store.MyUserFavoriteArticleStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.UserFavoriteArticle",
    storeId: "MyUserFavoriteArticleStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "UserFavoriteArticleItemStore",
    },
  },
});
Ext.define("MEM.model.CustomerFavoriteArticle", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ArticleId", type: "int" },
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (d, a) {
          var c = Ext.getStore("MyItemUnitStore"),
            b = c.findRecord("Id", a.get("ItemUnitId"));
          if (b) {
            return Ext.String.format(
              "{0} ({1})",
              a.get("Description"),
              b.get("Description")
            );
          } else {
            return a.get("Description");
          }
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "FavoriteListId", type: "int" },
      { name: "CustomerId", type: "int" },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
    ],
  },
});
Ext.define("MEM.store.MyCustomerFavoriteArticleStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.CustomerFavoriteArticle",
    storeId: "MyCustomerFavoriteArticleStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: {
      type: "myproxy",
      url: Me.STORE_URL + "CustomerFavoriteArticleItemStore",
    },
  },
});
Ext.define("MEM.model.FavoriteList", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "Name", type: "string" },
      { name: "IsCustomerList", type: "bool" },
      { name: "IsGlobal", type: "bool" },
    ],
  },
});
Ext.define("MEM.store.MyFavoriteListStore", {
  extend: MEM.ux.data.MyBaseStore,
  alias: "store.myfavoriteliststorealias",
  config: {
    model: "MEM.model.FavoriteList",
    storeId: "MyFavoriteListStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Name", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FavoriteListStore" },
  },
});
Ext.define("MEM.model.FavoriteArticle", {
  extend: MEM.model.Base,
  config: {
    fields: [
      { name: "ArticleId", type: "int" },
      { name: "ArticleNo", type: "string", max: 10 },
      { name: "Description", type: "string", max: 50 },
      {
        name: "FullDescription",
        type: "string",
        max: 50,
        convert: function (d, a) {
          var c = Ext.getStore("MyItemUnitStore"),
            b = c.findRecord("Id", a.get("ItemUnitId"));
          if (b) {
            return Ext.String.format(
              "{0} ({1})",
              a.get("Description"),
              b.get("Description")
            );
          } else {
            return a.get("Description");
          }
        },
      },
      { name: "AccountNo", type: "string", max: 5 },
      { name: "ItemUnitId", type: "int" },
      { name: "FavoriteListId", type: "int" },
      { name: "Payoff", type: "bool", defaultValue: !1 },
      { name: "Chargeable", type: "bool", defaultValue: !0 },
    ],
  },
});
Ext.define("MEM.store.MyFavoriteArticleStore", {
  extend: MEM.ux.data.MyBaseStore,
  config: {
    model: "MEM.model.FavoriteArticle",
    storeId: "MyFavoriteArticleStore",
    autoLoad: !1,
    autoSync: !1,
    remoteFilter: !1,
    sorters: [{ property: "Description", direction: "ASC" }],
    proxy: { type: "myproxy", url: Me.STORE_URL + "FavoriteArticleItemStore" },
  },
});
Ext.define("MEM.view.workorder.MyUserSearchPanel", {
  extend: MEM.ux.dataview.MySearchPanel,
  alias: "widget.myusersearchpanel",
  config: {
    itemId: "MyUserSearchPanel",
    title: T("Search user"),
    searchfields: [{ label: T("Name"), field: "FullName" }],
    store: {
      storeId: "UserSearchPanel_MyUserStore",
      type: "myuserliststorealias",
    },
    itemTpl: ["{FullName}"],
    targetField: undefined,
    filters: [{ property: "Disabled", value: !1 }],
  },
});
var PROJECT_MODE = !1;
Ext.define("MEM.controller.WorkOrder", {
  extend: MEM.controller.Common,
  config: {
    views: [
      "workorder.MyWorkOrderPanel",
      "workorder.MyWorkOrderFormPanel",
      "workorder.MyWorkOrderRowForm",
      "workorder.MyWorkOrderRowFavourite",
      "workorder.MyEmailOverlay",
      "workorder.MySignaturePanel",
      "workorder.MyWorkOrderContactList",
    ],
    stores: [
      "MyWorkOrderStore",
      "MyWorkOrderListStore",
      "MyWorkOrderRowStore",
      "MyWorkOrderContactStore",
      "MyCustomerListStore",
      "MyCustomerContactStore",
      "MyCustomerContactListStore",
      "MyProjectListStore",
      "MyProjectLimitedStore",
      "MyProjectStatusStore",
      "MyWorkOrderDocumentStore",
      "MyUserFavoriteListStore",
      "MyUserFavoriteArticleStore",
      "MyCustomerFavoriteArticleStore",
      "MyFavoriteListStore",
      "MyFavoriteArticleStore",
    ],
    refs: {
      mynavigationview: "mynavigationview",
      navigationBar: "#mynavigationbar",
      myworkorderpanel: "myworkorderpanel",
      workorderform: "myworkorderformpanel",
      workorderrowform: "myworkorderrowform",
      articleworkorderId: "myworkorderrowform #myArticleWorkOrderId",
      articlecombo: "myworkorderrowform #myArticleCombo",
      articleid: "myworkorderrowform #ArticleId",
      articleno: "myworkorderrowform #myCodeNo",
      titlefield: "myworkorderrowform #myTitle",
      itemunitid: "myworkorderrowform #myItemUnitId",
      priceunit: "myworkorderrowform #myPriceUnit",
      costunit: "myworkorderrowform #myCostUnit",
      articleCategoryCombo: "myworkorderrowform #myArticleCategoryCombo",
      factoryPricelistId: "myworkorderrowform #myFactoryPricelistCombo",
      resourceId: "myworkorderrowform #myResourceCombo",
      attributeFactoryPricelistId:
        "myworkorderrowattributepanel #factoryPricelistCombo",
      attributeResourceId: "myworkorderrowattributepanel #resourceCombo",
      accountcombo: "myworkorderrowform #myAccountCombo",
      payoff: "myworkorderrowform #Payoff",
      chargeable: "myworkorderrowform #Chargeable",
      costunitpricelist: "myworkorderrowform #CostUnitPricelist",
      priceunitpricelist: "myworkorderrowform #PriceUnitPricelist",
      payoffunitpricelist: "myworkorderrowform #PayoffUnitPricelist",
      articleCategoryId: "myworkorderrowform #ArticleCategoryId",
      fetchtoggle: "myworkorderrowform #fetchtoggle",
      WORowSaveButton: "myworkorderrowform #myWORowSave",
      togglelist: "myworkorderpanel #organisationtoggle",
      toolbarspacer: "myworkorderpanel #toolbarspacer",
      viewtoolbar: "myworkorderpanel #viewtoolbar",
      statusButtons: "myworkorderpanel #statusButtons",
      list: "myworkorderformpanel #MyWorkOrderRowList",
      checkListHeader: "myworkorderformpanel #MyChecklistContainer",
      checkList: "myworkorderformpanel #MyChecklistRowList",
      workOrderSaveButton: "myworkorderformpanel #WorkOrderSaveButton",
      viewButtons: "myworkorderpanel #viewButtons",
      groupByDate: "myworkorderpanel #groupByDate",
      groupByProject: "myworkorderpanel #groupByProject",
      groupByProjectName: "myworkorderpanel #groupByProjectName",
      workorderIndexBar: "#myworkorderindexbar",
      usedqty: "myworkorderrowform #myUsedQty",
      startqty: "#startqty",
      endqty: "#endqty",
      responsibleserviceid: "myworkorderformpanel #myResponsibleServiceId",
      responsibleForemanId: "myworkorderformpanel #responsibleForemanId",
      createdid: "#createdid",
      timeCustomerId: "#TimeCustomerId",
      workorderCustomerId: "myworkorderformpanel #customerfield",
      frameworkContractId: "myworkorderformpanel #frameworkContractId",
      customerContactId: "myworkorderformpanel #customerContactId",
      customerRefNo: "myworkorderformpanel #customerRefNo",
      serviceCategoryId: "myworkorderformpanel #serviceCategoryId",
      workorderNo: "myworkorderformpanel #woNo",
      favouriteWorkOrderId: "#myFavouritWorkOrderId",
      saveFavoriteButton: "myworkorderrowfavourite #saveButton",
      favoriteList: "myworkorderrowfavourite #myFavouritList",
      favoriteButtons: "myworkorderrowfavourite #favoriteLists",
      favoritePanel: "myworkorderrowfavourite #favoritePanel",
      timeWorkOrderId: "#myTimeWorkOrderId",
      workOrderId: "#myWorkOrderId",
      workOrderList: "#MyWorkOrderList",
      plannedqty: "myworkorderrowform #myPlannedQty",
      statusField: "myworkorderformpanel #myWorkOrderStatusId",
      reportingWorkOrderId: "myworkorderkpireportingpanel #workorderId",
      productId: "myworkorderkpireportingpanel #productId",
      consumptionList: "myworkorderkpireportingpanel #consumptionlist",
      performedQty: "myworkorderkpireportingpanel #performedqty",
      mymappanel: {
        selector: "mymappanel",
        xtype: "mymappanel",
        autoCreate: !0,
      },
      mysignaturepanel: {
        selector: "mysignaturepanel",
        xtype: "mysignaturepanel",
        autoCreate: !0,
      },
      customercontactpanel: {
        selector: "mycustomercontactpanel",
        xtype: "mycustomercontactpanel",
        title: T("Customercontact"),
        id: "mycustomercontactpanel",
        autoCreate: !0,
      },
      overlay: {
        selector: "myworkorderoverlay",
        xtype: "myworkorderoverlay",
        autoCreate: !0,
      },
      statusOverlay: {
        selector: "mystatusoverlay",
        xtype: "mystatusoverlay",
        autoCreate: !0,
      },
      searchOverlay: {
        selector: "mysearchoverlay",
        xtype: "mysearchoverlay",
        autoCreate: !0,
      },
      rowFavourite: {
        selector: "myworkorderrowfavourite",
        xtype: "myworkorderrowfavourite",
        id: "myArticleFav",
        autoCreate: !0,
      },
      kpiReportingPanel: {
        selector: "myworkorderkpireportingpanel",
        xtype: "myworkorderkpireportingpanel",
        id: "mykpireporting",
        autoCreate: !0,
      },
      articleSearchPanel: {
        selector: "myarticlesearchpanel",
        xtype: "myarticlesearchpanel",
        id: "myArticleSearchPanel",
        autoCreate: !0,
      },
      searchPanel: {
        selector: "myworkordersearchpanel",
        xtype: "myworkordersearchpanel",
        id: "myWorkorderSearchPanel",
        autoCreate: !0,
      },
      textAreaOverlay: {
        selector: "mytextareaoverlay",
        xtype: "mytextareaoverlay",
        autoCreate: !0,
        autoDestroy: !0,
      },
      contactList: {
        selector: "myworkordercontactlist",
        xtype: "myworkordercontactlist",
        autoCreate: !0,
      },
      contactListList: "myworkordercontactlist #MyWorkOrderContactList",
      contactListHeader: "myworkorderformpanel #MyWorkOrderContactListHeader",
      woName: "myworkorderformpanel #woName",
      myWOProjectId: "#myWOProjectId",
      filePanel: {
        selector: "myfilepanel",
        xtype: "myfilepanel",
        id: "MyFilePanel",
      },
      MyEmailOverlay: {
        selector: "myemailoverlay",
        xtype: "myemailoverlay",
        autoCreate: !0,
      },
      userSearchpanel: {
        xtype: "myusersearchpanel",
        selector: "myusersearchpanel",
        autoCreate: !0,
        title: T("Search user"),
      },
      resourceSearchpanel: {
        xtype: "myresourcesearchpanel",
        selector: "myresourcesearchpanel",
        autoCreate: !0,
        title: T("Search resource"),
      },
      sendStatusMail: "myworkorderformpanel #sendStatusMail",
      gpsX: "myworkorderformpanel #gpsX",
      gpsY: "myworkorderformpanel #gpsY",
      mapButton: "myworkorderformpanel #mapButton",
      externalStatusName: "myworkorderformpanel #externalstatusname",
    },
    control: {
      favouriteWorkOrderId: {
        change: function (k, e, m, n) {
          if (!e || TIME_MODE) {
            return;
          }
          var a = this,
            b = a.getFavoriteList(),
            d = a.getRowFavourite().getWorkOrderFavourite(),
            l = k.getStore(),
            c = l.findRecord("Id", e),
            f = a.hasCustomerFavourites(c),
            i = a.hasProjectFavourites(c),
            g = c ? c.get("CustomerId") : null,
            j = c ? c.get("ProjectId") : null;
          var h = Ext.create("MEM.store.MyArticleStore", {
            storeId: null,
            pageSize: 1,
          });
          h.meAddFilter(["WorkOrderId", "=", e]);
          h.load({
            callback: function (o) {
              if (!o.length) {
                d = !1;
              }
              a.onSetFavoriteButtons(
                d,
                c,
                g,
                a.getApplication().getUserId(),
                f,
                i
              );
              if (
                f &&
                !d &&
                b.getStore() &&
                b.getStore() != a.articleCustomerStore
              ) {
                b.setStore(a.articleCustomerStore);
              } else {
                if (d && b.getStore() && b.getStore() != a.articleStore) {
                  b.setStore(a.articleStore);
                }
              }
              var h = a.getFavoriteButtons(),
                l = h && h.items.length ? h.items.getAt(0) : null;
              if (l) {
                a.onToggleFavorite(h, l);
              } else {
                a.getFavourites(b.getStore(), g, j, e, f);
              }
            },
          });
        },
      },
      "#myWorkOrderStatusId": {
        change: function (b, a, c, d) {
          if (b.isDirty() && a != null && b.init) {
            this.checkCheckList(b, a, c);
            this.setFinished(a);
          }
        },
      },
      mynavigationview: {
        pop: function (d, a, c) {
          if (a.getItemId() == "MyWorkOrderFormPanel" && !a.getIsReadOnly()) {
            if (getSetting("MEM.ShowStatus") == "1") {
              var b = a.getRecord();
              if (b) {
                this.showStatusOverlay(a);
              }
              return;
            }
            if (this.markStop()) {
              return;
            }
          } else {
            if (a.getItemId() != "MyWorkOrderRowForm" || AWO_MODE) {
              return;
            } else {
              if (!TIME_MODE) {
                this.onWOidChange();
              }
            }
          }
        },
      },
      navigationBar: {
        beforeback: function (d, c) {
          var a = this,
            b = !0;
          switch (a.getMynavigationview().getActiveItem().id) {
            case "MyWorkOrderFormPanel":
              return (b = !a.saveQueryIfDirtyForm());
            case "MyWorkOrderRowForm":
              return (b = !a.saveQueryIfDirtyRowForm());
            case "myArticleFav":
              return (b = !a.saveQueryIfDirtyFavouriteList());
            case "mykpireporting":
              return (b = a.onBeforeProductChange(
                a.getProductId().getValue(),
                function () {
                  a.getMynavigationview().pop();
                }
              ));
            default:
              return b;
          }
        },
      },
      "#MyWorkOrderFormPanel": {
        activate: function (b) {
          TIME_MODE = !1;
          this.checkProject();
          this.showMail();
          this.showCopy();
          this.setRequiredFields(b, "WorkOrderStore");
          var a = this.getWorkOrderId().getValue();
          if (a) {
            this.filterWorkOrderRows(parseInt(a, 10), this.showSignatureButton);
          }
        },
        deactivate: function () {
          this.hideMail();
          this.hideSignatureButton();
          this.hideCopy();
        },
        beforedataupdated: function (a) {
          this.filterProjectStore(a.get("ProjectId"));
        },
        dataupdated: function (a) {
          this.filterUsers(this.getCreatedid(), a.get("CreatedId"));
          this.filterUsers(
            this.getResponsibleserviceid(),
            a.get("ResponsibleServiceId")
          );
          this.filterFrameworkContract(
            a.get("CustomerId"),
            !1,
            a.get("FrameworkContractId")
          );
          this.filterCustomerContact(
            a.get("CustomerId"),
            !1,
            a.get("CustomerAgentId")
          );
          this.checkSignOnSite(a);
          this.checkCurrentStatus(a);
        },
      },
      "mysearchoverlay #mySearchList": {
        itemsingletap: "onMySearchOverlayItemTap",
      },
      "#myWOProjectId": {
        change: "onProjectIdChange",
        updateData: "onProjectIdChange",
      },
      "#myWOCustomerId": { setData: "onCustomerIdChange" },
      myworkorderpanel: { panelshow: "onMyWorkOrderListPainted" },
      "#MyWorkOrderList": {
        itemsingletap: "onMyWorkOrderListItemTap",
        erased: "hideAdd",
      },
      searchPanel: { itemsingletap: "onMySearchPanelListItemTap" },
      "myworkorderformpanel myworkorderrowlist": {
        meitemselect: "onMyWorkOrderRowListItemTap",
        meitemdelete: "onDeleteWORow",
      },
      "mydiaryrowform myworkorderrowlist": {
        meitemselect: "onMyDiaryRowListItemTap",
        meitemdelete: "onDeleteWORow",
      },
      "#MyChecklistRowList": { itemsingletap: "onMyChecklistRowListItemTap" },
      "#myRowList": { itemsingletap: "onMyRowListItemTap" },
      mysignaturepanel: {
        signaturesave: "onSignatureSave",
        signatureopen: "onSignatureOpen",
      },
      mytimerowform: {
        panelshow: function () {
          this.loadStores({ MyCustomerListStore: "no" });
        },
      },
      "mytimerowform myworkorderrowlist": {
        meitemselect: "onMyWorkOrderRowListItemTap",
        meitemdelete: "onDeleteWORow",
      },
      mymappanel: { panelshow: "loadStores" },
      articleSearchPanel: { itemsingletap: "onMyArticlesListItemTap" },
      "#selectproject": { itemsingletap: "onSelectProjectItemTap" },
      "#WorkOrderSaveButton": { tap: "onSaveWorkOrdersTap" },
      "#addWorkOrderContact": { tap: "onWorkOrderContactAdd" },
      "#rowaddfavdiary": {
        tap: function (a) {
          this.showRowOverlay(a);
        },
      },
      "#rowsaddwotime": {
        tap: function (a) {
          this.showRowOverlay(a);
        },
      },
      "#rowsaddwofav": {
        tap: function (a) {
          this.showRowOverlay(a);
        },
      },
      "#rowaddwotime": {
        tap: function (a) {
          this.renderTimeApperance();
          this.onRowAdd(this.getTimeWorkOrderId().getValue());
        },
      },
      "#rowaddwodiary": { tap: "onAddWODiary" },
      "#rowadd": {
        tap: function (a) {
          this.renderWOApperance();
          this.onRowAdd(this.getWorkOrderId().getValue());
        },
      },
      "#rowsaddtimewo": {
        tap: function (f) {
          var a = this,
            c = MEM.app.getController("Time"),
            d = Ext.getCmp("myWOProjectId").getValue(),
            b = a.getWorkOrderId().getValue(),
            e = a.getMynavigationview();
          if (!a.checkWOSaved(b)) {
            return;
          }
          CURRENT_PROJECTID = d;
          CURRENT_WORKORDERID = b;
          TIME_MODE = !0;
          view = e.setActiveItem(
            MEM.app
              .getController("MEM.controller.MainMenu")
              .ensureSubPanel("TimeCarousel")
          );
          c.setProjectId(Ext.getCmp("myWOProjectId").getValue());
          c.setWorkOrderId(a.getWorkOrderId().getValue());
          a.getApplication().fireEvent("renderWeek");
        },
      },
      "#addfile": { tap: "onAddFile" },
      "button[action=WOrowSave]": { tap: "onRowSave" },
      "button[action=WOrowSaveClose]": { tap: "onRowSaveClose" },
      "button[action=WOrowClose]": { tap: "onClose" },
      "button[action=WOrowDelete]": { tap: "onDeleteTap" },
      "button[action=closeStatus]": { tap: "onCloseStatus" },
      "button[action=setStatus]": { tap: "onSetStatus" },
      "button[action=saveList]": { tap: "onSaveList" },
      "#searchProjectButton": { tap: "onFilterList" },
      "myworkorderpanel #statusButtons": { toggle: "onFilterButton" },
      "myworkorderformpanel #rowdelete": { tap: "onDeleteWORow" },
      articlecombo: { change: "onArticleComboChange" },
      "#fetchtoggle": {
        change: function (b, a, c) {
          this.getWorkorderrowform().togglechange(a);
          this.onArticleComboChange(this.getArticlecombo(), a, 0, null);
        },
      },
      "button[action=contactShow]": {
        tap: function (a) {
          this.showOverlay(a);
        },
      },
      "button[action=setUser]": {
        tap: function (a) {
          this.setUser();
        },
      },
      "button[action=close]": { tap: "onCloseTap" },
      "button[action=searchClose]": { tap: "onSearchCloseTap" },
      "button[action=closeRow]": { tap: "onCloseRowTap" },
      "button[action=articleSearch]": { tap: "onArticleSearch" },
      "myworkorderpanel #viewButtons": {
        toggle: function (d, b, c) {
          var a = this;
          if (c) {
            if (b == a.getGroupByDate()) {
              a.setGroupBy(1, !0);
            } else {
              if (b == a.getGroupByProject()) {
                a.setGroupBy(0, !0);
              } else {
                a.setGroupBy(2, !0);
              }
            }
          }
        },
      },
      "button[action=sendEmail]": { tap: "sendOrderSummary" },
      "button[action=previewMail]": { tap: "previewOrderSummary" },
      "button[action=closeEmailOverlay]": { tap: "closeEmailOverlay" },
      "myworkorderrowform #startqty": { change: "onStartEndChange" },
      "myworkorderrowform #endqty": { change: "onStartEndChange" },
      "button[action=userSearch]": { tap: "onUserSearch" },
      "button[action=resourceSearch]": { tap: "onResourceSearch" },
      "button[action=foremanSearch]": { tap: "onForemanSearch" },
      "button[action=externalstatuscomment]": {
        tap: "onExternalStatusComment",
      },
      userSearchpanel: { itemsingletap: "onUserSelected" },
      resourceSearchpanel: { itemsingletap: "onResourceSelected" },
      workorderCustomerId: {
        change: function (c, a, d, e) {
          if (!a) {
            return;
          }
          var b = Ext.getStore("MyWorkOrderStore");
          this.filterFrameworkContract(a, !0);
          this.filterCustomerContact(a, !0);
          this.styleFieldByValue(c, b, "CreditRisk", "creditrisk-warning");
          this.setExternalStatusId(a);
        },
      },
      workorderrowform: {
        activate: function () {
          this.loadRowSelectStores();
        },
        dataupdated: function (a) {
          this.filterResources(this.getResourceId(), a.get("ResourceId"));
        },
      },
      togglelist: { change: "onToggleList" },
      accountcombo: {
        change: function (b, c, d) {
          var a = b.getStore().findRecord(b.getValueField(), c);
          if (a) {
            if (!Me.formValidateHidden("WorkOrderRowStore", "ResourceId")) {
              this.getWorkorderrowform()
                .down("#myResourceContainer")
                .setHidden(a.get("Material"));
              this.getResourceId().setValue(null);
            }
            if (
              !Me.formValidateHidden("WorkOrderRowStore", "FactoryPricelistId")
            ) {
              this.getFactoryPricelistId().setHidden(!a.get("Material"));
              this.getFactoryPricelistId().setValue(null);
              if (!this.getFactoryPricelistId().getHidden()) {
                this.loadSelectStore(this.getFactoryPricelistId());
              }
            }
            this.loadRowSelectStores();
          }
          this.setRequired();
        },
      },
      sendStatusMail: { tap: "sendStatusMail" },
      usedqty: {
        blur: function () {
          this.setRequired();
        },
      },
      favoriteList: { listspinnerchange: "onSpinnerChange" },
      "myworkorderrowfavourite #attributePanel": {
        attributeChange: "onAttributeChange",
      },
      "button[action=setPosition]": {
        tap: function (a) {
          this.setPosition();
        },
      },
      "button[action=setPosition]": {
        tap: function (a) {
          this.setPosition();
        },
      },
      "button[action=showPosition]": {
        tap: function (a) {
          this.showPosition();
        },
      },
      customerContactId: {
        change: function (f, a, i) {
          var g = Ext.getStore("MyProjectLimitedStore"),
            d = this.getWorkorderform(),
            h = d.getProjectId(),
            e = g.getById(h),
            b = e ? e.get("CustomerRef") : null;
          if (
            !a ||
            (d.getRecord() && d.getRecord().get("CustomerAgentId") === a)
          ) {
            return;
          }
          if (!b) {
            var c = f.getStore().findRecord(f.getValueField(), a);
            if (c && c.get("CustomerRef")) {
              b = c.get("CustomerRef");
            }
          }
          if (b) {
            this.getCustomerRefNo().setValue(b);
          }
          this.setExternalStatusId(null, a);
        },
        missingvalue: function (d, e, b) {
          var a = this.getWorkorderform().getRecord();
          if (a) {
            var c = {
              Id: a.get("CustomerAgentId"),
              ContactName: a.get("ContactName"),
              CustomerId: a.get("CustomerId"),
            };
            b = Ext.applyIf(b, c);
          }
        },
      },
      favoriteButtons: { toggle: "onToggleFavorite" },
      kpiReportingPanel: { panelshow: "onKpiInitialize" },
      reportingWorkOrderId: { change: "onReportingWoChange" },
      productId: { change: "onReportingProductChange" },
      "myworkorderkpireportingpanel #saveButton": { tap: "onKpiSaveTap" },
      "myworkorderkpireportingpanel #attributePanel": {
        attributeChange: "onAttributeChange",
      },
      consumptionList: { listspinnerchange: "onSpinnerChange" },
    },
    filterDisabled: !1,
    kpiRelations: null,
  },
  init: function () {
    var a = this;
    a.articleStore = Ext.create("MEM.store.MyArticleStore", {
      storeId: "WorkOrder_MyArticleStore",
    });
    a.articleCustomerStore = Ext.create("MEM.store.MyArticleCustomerStore", {
      storeId: "WorkOrder_MyArticlCustomerStore",
    });
    Ext.getStore("MyArticleDataStore").on({
      scope: a,
      load: a.onArticleDataLoaded,
    });
    Ext.getStore("MyWorkOrderRowStore").on({
      scope: a,
      load: a.onWorkOrderRowLoaded,
    });
    a.getApplication().on({
      scope: a,
      additem: a.onWorkOrderAdd,
      copy: a.onCopyWorkOrder,
      sendemail: a.showEmailOverlay,
      opensignature: a.openSignature,
      woidchange: function (b, c) {
        TIME_MODE ? a.onTimeWOidChange(b, c) : a.onWOidChange();
      },
    });
  },
  onCustomerIdChange: function (d, e, c) {
    var g = this,
      b = Ext.getStore("MyCustomerListStore"),
      f = g.getWorkorderform(),
      a = f.getRecord();
    if (a) {
      a.set("CustomerId", e);
      a.set("CustomerName", c);
    }
    this.styleFieldByValue(d, b, "CreditRisk", "creditrisk-warning");
  },
  markStop: function () {
    var a = this,
      e = Ext.getStore("MyWorkOrderStore"),
      c = Ext.getStore("MyCloneWorkOrderStatusStore"),
      b = a.stringSetting("MEM.WorkOrderStopCode"),
      f = a.getWorkOrderId().getValue(),
      d;
    if (b && b != "") {
      Ext.Msg.show({
        title: T("Finish Workorder."),
        message: T("Workorder will be marked as finished. OK?"),
        buttons: [Ext.MessageBox.YES, Ext.MessageBox.NO],
        fn: function (g) {
          if (g == "yes") {
            status = c.findRecord(
              "StatusCode",
              a.intSetting("MEM.WorkOrderStopCode")
            );
            if (
              a.checkCheckList(
                Ext.getCmp("myWorkOrderStatusId"),
                status.get("Id"),
                Ext.getCmp("myWorkOrderStatusId").getValue()
              )
            ) {
              rec = e.getById(f);
              d = c.findRecord("StatusCode", b);
              rec.set("WorkOrderStatusId", d.getId());
              rec.set("ProductionEnd", new Date());
              rec.setProxy(e.getProxy());
              rec.save({
                success: function () {
                  a.applyButtonFilter();
                },
              });
              return !0;
            } else {
              return !1;
            }
          } else {
            if (g == "no") {
              return !1;
            }
          }
        },
      });
    } else {
      return !0;
    }
  },
  onAddWODiary: function () {
    var b = this,
      a = Ext.getStore("MyCloneWorkOrderListStore");
    try {
      var c = function () {
        var a = b.getArticleworkorderId(),
          c;
        if (null == a.getStore().getAt(0)) {
          Ext.Msg.alert(
            T("Not found"),
            T("WorkOrder") + "/" + T("AWO") + " " + T("not found.")
          );
          return;
        }
        c = a.getStore().getAt(0).get("Id");
        b.onRowAdd(c);
        MEM.loadSpinner.hideSpinner("addwodiary");
      };
      MEM.loadSpinner.showSpinner("addwodiary");
      b.renderDiaryApperance();
      if (b.storeIsReady(a, "ProjectId", CURRENT_PROJECTID)) {
        c();
      } else {
        a.meClearFilter();
        a.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
        a.load({
          callback: function (a) {
            c();
          },
        });
      }
    } catch (d) {
      MEM.loadSpinner.hide(d, null, null, "addwodiary");
    }
  },
  showOverlay: function (b) {
    var g = this,
      a = Ext.getStore("MyCustomerContactStore"),
      c = b.up("panel"),
      d = Ext.getStore("MyCustomerStore"),
      e = b.customerId || c.getCustomerId(),
      h =
        b.rightStoreName ||
        (c.getRightStoreName ? c.getRightStoreName() : null) ||
        "ProjectStore",
      i =
        b.rightStoreId ||
        (c.getRightStoreId ? c.getRightStoreId() : null) ||
        CURRENT_PROJECTID;
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["CustomerId", "=", e]);
    a.meAddFilter({ property: "Disabled", value: !1 });
    a.getProxy().getExtraParams().TableName = h;
    a.getProxy().getExtraParams().TableId = i;
    a.removeAll(!0);
    var f = g.getOverlay();
    d.clearFilter();
    d.meClearFilter();
    d.meAddFilter(["Id", "=", parseInt(e)]);
    getFieldText = function (f, g, e, c, d) {
      var a = f.get(g);
      if (!Ext.isDefined(a) || a == null) {
        a = "";
      }
      return (
        (Ext.isDefined(c) ? c : "") +
        a +
        (Ext.isDefined(d) ? d : "") +
        (e ? "<br>" : "")
      );
    };
    d.load({
      callback: function (c, e, d) {
        if (d && c.length > 0) {
          var a = c[0];
          Ext.getCmp("myCustomerInfo").setHtml(
            getFieldText(a, "BillAddress1", !0) +
              getFieldText(a, "BillAddress2", !0) +
              getFieldText(a, "BillAddress3", !0) +
              getFieldText(a, "BillAddress4", !1) +
              " " +
              getFieldText(a, "BillAddress5", !0) +
              getFieldText(
                a,
                "Email",
                !0,
                '<a href="mailto://' + getFieldText(a, "Email", !1) + '">',
                "</a>"
              ) +
              getFieldText(
                a,
                "Phone",
                !0,
                '<a href="tel://' + getFieldText(a, "Phone", !1) + '">',
                "</a>"
              ) +
              getFieldText(
                a,
                "Mobile",
                !0,
                '<a href="tel://' + getFieldText(a, "Mobile", !1) + '">',
                "</a>"
              )
          );
        } else {
          Ext.getCmp("myCustomerInfo").setHtml("");
        }
      },
    });
    f.on({
      scope: g,
      single: !0,
      hide: function (a) {
        a.destroy();
      },
    });
    a.load({
      callback: function () {
        delete a.getProxy().getExtraParams().TableName;
        delete a.getProxy().getExtraParams().TableId;
        f.showBy(b);
      },
    });
  },
  onSetFavoriteButtons: function (i, d, f, j, g, h) {
    var c = this,
      a = [],
      e = c.getFavoriteButtons(),
      b = Ext.getStore("MyFavoriteListStore");
    c.selectedfavorites = {};
    b.clearFilter();
    b.meClearFilter();
    b.meAddFilter(["IsGlobal", "=", !0]);
    b.meAddFilter(["Disabled", "=", !1]);
    b.load({
      callback: function (o, q, p) {
        var l = o.length;
        if (p) {
          if (i) {
            if (d) {
              a.push({
                xtype: "button",
                cls: ["my-favorite-button", "wo-favorite"],
                html: Ext.String.format(
                  '<span class="wo-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                  d.get("Name")
                ),
                text: d.get("Id"),
              });
            }
          }
          if (h) {
            var n = Ext.getStore("MyProjectLimitedStore"),
              m = n.getData().items[0];
            a.push({
              xtype: "button",
              cls: ["my-favorite-button", "project-favorite"],
              html: Ext.String.format(
                '<span class="project-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                m.get("ProjectName")
              ),
              text: m.get("Id"),
            });
          }
          var k = Ext.create("MEM.store.MyCustomerStore", { storeId: null });
          k.clearFilter();
          k.meClearFilter();
          k.meAddFilter(["Id", "=", parseInt(f)]);
          k.load({
            callback: function (s, u, t) {
              if (t && s.length > 0) {
                var k = s[0];
                if (k.get("HasFavorites")) {
                  l = !0;
                  a.push({
                    xtype: "button",
                    cls: ["my-favorite-button", "customer-favorite"],
                    html: Ext.String.format(
                      '<span class="customer-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                      k.get("CustomerName")
                    ),
                    text: k.get("Id"),
                  });
                } else {
                  if (g) {
                    a.push({
                      xtype: "button",
                      cls: [
                        "my-favorite-button",
                        "customer-favorite",
                        "basic-favorite",
                      ],
                      html: Ext.String.format(
                        '<span class="customer-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                        k.get("CustomerName")
                      ),
                      text: f,
                    });
                  }
                }
              }
              var m = Ext.getStore("MyUserFavoriteListStore"),
                r = [],
                n;
              if (m.getCount()) {
                l = !0;
                n = {
                  xtype: "button",
                  cls: ["my-favorite-button", "my-favorite"],
                  html: Ext.String.format(
                    '<span class="user-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                    T("My favorites")
                  ),
                  text: j,
                };
                m.each(function (b) {
                  if (m.getCount() > 1) {
                    a.push({
                      xtype: "button",
                      cls: "my-favorite-button",
                      html: Ext.String.format(
                        '<span class="user-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                        b.get("Name")
                      ),
                      text: b.get("FavoriteListId"),
                    });
                  }
                  r.push(b.get("FavoriteListId"));
                });
              }
              b.each(function (b) {
                if (r.indexOf(b.get("Id")) < 0) {
                  a.push({
                    xtype: "button",
                    cls: "my-favorite-button",
                    html: Ext.String.format(
                      '<span class="other-favorite">&nbsp;&nbsp;&nbsp;&nbsp;</span> {0}',
                      b.get("Name")
                    ),
                    text: b.get("Id"),
                  });
                }
              });
              if (n) {
                a.push(n);
              }
              if (l) {
                e.removeAll();
                e.add(a);
                e.setPressedButtons([0]);
                c.resetOverlay();
              } else {
                c.getFavoritePanel().setHidden(!0);
              }
            },
          });
        }
      },
    });
  },
  onToggleFavorite: function (f, a) {
    var c = this;
    if (a.element && a.element.hasCls("x-button-pressed")) {
      var d,
        b,
        e = a.getText();
      if (a.element.hasCls("wo-favorite")) {
        b = "workorder";
        d = c.articleStore;
      } else {
        if (
          a.element.hasCls("customer-favorite") &&
          a.element.hasCls("basic-favorite")
        ) {
          b = "customer";
        } else {
          if (a.element.hasCls("customer-favorite")) {
            b = "customerlist";
          } else {
            if (a.element.hasCls("project-favorite")) {
              b = "project";
            } else {
              if (a.element.hasCls("my-favorite")) {
                b = "user";
              } else {
                b = "favoritelist";
              }
            }
          }
        }
      }
      c.loadFavorites(b, e);
    }
  },
  setFavoriteStore: function (c) {
    var b = this,
      a = b.getFavoriteList();
    if (a.getStore() != c) {
      a.suspendEvents();
      a.setStore(c);
      a.resumeEvents();
    }
    Ext.each(a.getViewItems(), function (a) {
      var e = 0;
      if (a.getRecord() && b.selectedfavorites) {
        var d = b.selectedfavorites[a.getRecord().get("ArticleId")];
        e = d ? d.qty : 0;
      }
      a.getSpinner().setValue(e);
    });
  },
  showStatusOverlay: function (e) {
    var b = this,
      c = b.getStatusOverlay();
    if (!isNaN(b.getWorkOrderId().getValue())) {
      var d = c.down("#overlayStatus"),
        a = b.getWorkorderform().getRecord();
      d.getStore().fetchData(
        a.get("WorkOrderStatusId"),
        a.get("ExternalWorkOrderStatusId")
      );
      d.setValue(a.get("WorkOrderStatusId"));
      c.showBy(e);
    }
  },
  onCloseStatus: function () {
    this.getStatusOverlay().hide();
  },
  onSetStatus: function () {
    var a = this.getStatusOverlay();
    Ext.getCmp("myWorkOrderStatusId").setValue(
      a.down("selectfield").getValue()
    );
    a.hide();
    this.onWOSave(!1);
  },
  setUser: function (c) {
    var b = this,
      a;
    if (!!c) {
      a = null;
    } else {
      a = b.getApplication().getUserId();
    }
    b.getResponsibleserviceid().setValue(a);
  },
  onKpiInitialize: function (a) {
    this.getReportingWorkOrderId().onBefore({
      change: this.onBeforeReportingWorkOrderChange,
      scope: this,
    });
    this.getProductId().onBefore({
      change: this.onBeforeReportingProductChange,
      scope: this,
    });
  },
  initKPIReporting: function () {
    this.setKpiRelations(new Ext.util.MixedCollection());
  },
  matchConsumption: function (b, a) {
    if (b.get("ItemUnitId") != a.get("ItemUnitId")) {
      return !1;
    }
    if (a.get("ArticleNo")) {
      return b.get("CodeNo") == a.get("ArticleNo");
    } else {
      return b.get("Title") == a.get("Description");
    }
  },
  onKPIReporting: function (h, g, l, n) {
    var a = this,
      m = a.getMynavigationview(),
      k = a.getKpiReportingPanel(),
      f = a.getReportingWorkOrderId(),
      b = a.getProductId(),
      d = f.getStore(),
      e = a.getConsumptionList().getStore(),
      c = b.getStore(),
      j = a.intSetting("MobileWorkOrderStatusCodeMin"),
      i = a.intSetting("MobileWorkOrderStatusCodeMax");
    a.selectedfavorites = {};
    a._kpirowstore = g;
    a._diaryid = l;
    a.initKPIReporting(g);
    f.suspendEvents();
    b.suspendEvents();
    d.clearFilter();
    d.meClearFilter();
    b.setValue(null);
    a.getPerformedQty().setValue(null);
    d.meAddFilter(["ProjectId", "=", h.get("Id")]);
    d.meAddFilter(["Addition", "=", !1]);
    if (j > 0) {
      d.meAddFilter(["WorkOrderStatusCode", ">=", j]);
    }
    if (i > 0) {
      d.meAddFilter(["WorkOrderStatusCode", "<=", i]);
    }
    d.load(function (i, d, j) {
      c.setRemoteFilter(!0);
      c.clearFilter();
      c.meClearFilter();
      c.meAddFilter(["WorkOrderId", ">", 0]);
      c.meAddFilter(["WorkOrderProjectId", "=", h.get("Id")]);
      c.meAddFilter(["IsKPIRecord", "=", !0]);
      c.load(function (k, m, o) {
        var c = !1;
        b.setValue(null);
        g.getData()
          .clone()
          .sort(function (a, b) {
            return b.get("Created") - a.get("Created");
          })
          .forEach(function (e) {
            var p = k.find(function (a) {
              return a.get("ArticleId") == -e.get("RelatedWorkOrderRowId");
            });
            if (p) {
              if (!c) {
                b.setValue(p.get("Id"));
                a.getPerformedQty().setValue(e.get("UsedQty"));
                f.setValue(e.get("WorkOrderId"));
              }
              var q = {
                originid: p.get("Id"),
                relatedid: e.get("Id"),
                consumption: [],
              };
              a.getKpiRelations().add(q.relatedid, q);
              c = !0;
            }
          });
        a.onReportingWoChange(b, f.getValue());
        e.meClearFilter();
        e.meAddFilter(["WorkOrderId", ">", 0]);
        e.meAddFilter(["WorkOrderProjectId", "=", h.get("Id")]);
        e.meAddFilter(["IsKPIRecord", "=", !1]);
        e.load(function (b, c, e) {
          g.each(function (f) {
            var p = a.getKpiRelations().get(f.get("RelatedWorkOrderRowId"));
            if (p) {
              var q = b.find(function (p) {
                return a.matchConsumption(f, p);
              });
              if (q) {
                p.consumption.push({
                  worowid: f.get("Id"),
                  originid: q.get("ArticleId"),
                });
              }
            }
          });
          a.onSetKPIConsumption();
        }, a);
        b.resumeEvents(!0);
        f.resumeEvents(!0);
      }, a);
    }, a);
    m.push(k);
  },
  onSetKPIConsumption: function () {
    var a = this,
      h = a.getKpiRelations(),
      c = a._kpirowstore,
      e = a.getProductId().getStore().getById(a.getProductId().getValue()),
      b = e
        ? a.getKpiRelations().findBy(function (a) {
            return a.originid == e.get("ArticleId");
          })
        : null,
      g = b ? b.consumption : [],
      f = null;
    if (b) {
      var d = c.getById(b.relatedid);
      if (d) {
        f = d.get("UsedQty");
      }
    }
    a.getPerformedQty().setValue(f);
    Ext.each(a.getConsumptionList().getViewItems(), function (d) {
      var f = d.getRecord(),
        e = 0,
        b = g.filter(function (a) {
          return a.originid == f.get("ArticleId");
        });
      if (b.length) {
        var a = c.getById(b[0].worowid);
        if (a) {
          e = a.get("UsedQty");
        }
      }
      d.getSpinner().setValue(e);
    });
  },
  onBeforeProductChange: function (d, e) {
    var b = this,
      k = b.getKpiRelations(),
      f = b._kpirowstore,
      g = b.getProductId().getStore().getById(d),
      c = g
        ? b.getKpiRelations().findBy(function (a) {
            return a.originid == g.get("ArticleId");
          })
        : null,
      j = c ? c.consumption : [],
      i = b.getConsumptionList(),
      a = !1;
    if (!d) {
      return !0;
    }
    if (b.getPerformedQty().getValue()) {
      if (!c) {
        a = !0;
      } else {
        var h = f.getById(c.relatedid);
        a = a || !h || h.get("UsedQty") != b.getPerformedQty().getValue();
      }
    }
    if (!a) {
      i.getViewItems().forEach(function (b) {
        if (b.getSpinner().getValue() > 0) {
          if (!a) {
            var c = j.find(function (a) {
              return a.originid == b.getRecord().get("Id");
            });
            if (!c) {
              a = !0;
            } else {
              var g = f.getById(c.worowid);
              a = a || !g || g.get("UsedQty") != b.getSpinner().getValue();
            }
          }
        }
      });
    }
    if (a) {
      Ext.Msg.show({
        title: T("Reporting"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (a) {
          if (a == "yes") {
            Ext.defer(function () {
              b.onSaveReporting(d, e);
            }, 100);
          } else {
            e.call(b);
          }
        },
      });
      return !1;
    }
    return !0;
  },
  onBeforeReportingWorkOrderChange: function (c, a, b) {
    return this.onBeforeProductChange(
      this.getProductId().getValue(),
      this.onLoadProducts
    );
  },
  onBeforeReportingProductChange: function (c, b, a) {
    return this.onBeforeProductChange(a, this.onSetKPIConsumption);
  },
  onReportingProductChange: function (c, a, b) {
    this.onSetKPIConsumption();
  },
  onLoadProducts: function () {
    var b = this.getReportingWorkOrderId().getValue(),
      a = this.getProductId().getStore();
    if (!b) {
      return;
    }
    a.clearFilter();
    a.meClearFilter();
    a.setRemoteFilter(!1);
    a.filter("WorkOrderId", b);
  },
  onReportingWoChange: function (c, a, b) {
    if (!a) {
      return;
    }
    this.onLoadProducts();
  },
  onKpiSaveTap: function () {
    this.onSaveReporting(this.getProductId().getValue(), this.onCloseRowTap);
  },
  onSaveReporting: function (g, n) {
    var a = this,
      m = a.getProductId(),
      j = a.getAttributeResourceId(),
      i = a.getAttributeFactoryPricelistId(),
      l = a.getKpiRelations();
    g = g || m.getValue();
    if (!g || !a.getPerformedQty().getValue()) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return;
    }
    if (
      (j.getHidden() == !1 && j.getRequired() && !j.getValue()) ||
      (i.getHidden() == !1 && i.getRequired() && !i.getValue())
    ) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return;
    }
    MEM.loadSpinner.show();
    try {
      var c = this._kpirowstore,
        q = a.getReportingWorkOrderId().getValue(),
        f = a.getAttributeResourceId().getHidden()
          ? null
          : a.getAttributeResourceId().getValue(),
        e = a.getAttributeFactoryPricelistId().getHidden()
          ? null
          : a.getAttributeFactoryPricelistId().getValue(),
        h = m.getStore().getById(g),
        p = a.getPerformedQty().getValue(),
        r = [],
        d,
        o,
        b;
      var k = l.findBy(function (a) {
        return a.originid == h.get("ArticleId");
      });
      if (k) {
        b = c.getById(k.relatedid);
        b.set("UsedQty", p);
        d = b.get("Id");
      } else {
        b = a.createRecord(h, q, p);
        if (f && a.needResource(b)) {
          b.set("ResourceId", f);
        }
        if (e && a.needFactoryPricelist(b)) {
          b.set("FactoryPricelistId", e);
        }
        b.set("RelatedWorkOrderRowId", -h.get("Id"));
        b.set("DiaryId", a._diaryid);
        o = h.get("Id");
        b.set("Id", -Math.abs(c.data.length));
        c.add(b);
      }
      if (c.isNeedSync()) {
        c.on({
          scope: a,
          single: !0,
          write: function (f, e) {
            var c = e.getRecords() || [];
            d = c.length ? c[0].get("Id") : null;
            if (!k) {
              var b = { originid: o, relatedid: d, consumption: [] };
              l.add(b.relatedid, b);
            }
            a.onSaveReportingConsumption(d, n);
          },
        });
        c.sync();
      } else {
        a.onSaveReportingConsumption(d, n);
      }
      if (f) {
        saveUserSetting(
          a.getApplication().getUserId(),
          "FavoriteResourceId",
          f
        );
      }
      if (e) {
        saveUserSetting(
          a.getApplication().getUserId(),
          "FavoriteFactoryPricelistId",
          e
        );
      }
    } catch (s) {
      MEM.loadSpinner.hide(s);
    }
  },
  onSaveReportingConsumption: function (h, c) {
    var a = this,
      g = a.getConsumptionList(),
      b = this._kpirowstore,
      i = a.getAttributeResourceId().getHidden()
        ? null
        : a.getAttributeResourceId().getValue(),
      f = a.getAttributeFactoryPricelistId().getHidden()
        ? null
        : a.getAttributeFactoryPricelistId().getValue(),
      d = a.getKpiRelations().get(h),
      e = [],
      j;
    g.getViewItems().forEach(function (a) {
      if (a.getSpinner().getValue() > 0) {
        e.push({ article: a.getRecord(), qty: a.getSpinner().getValue() });
      }
    });
    if (!Ext.isFunction(c)) {
      c = a.onCloseRowTap;
    }
    if (e.length == 0) {
      c.call(a);
    }
    Ext.each(e, function (g) {
      var j = d
          ? d.consumption.filter(function (a) {
              return g.article.get("Id") == a.originid;
            })
          : [],
        e;
      if (j.length) {
        e = b.getById(j[0].worowid);
        e.set("UsedQty", g.qty);
      } else {
        e = a.createRecord(g.article, g.article.get("WorkOrderId"), g.qty);
        if (i && a.needResource(e)) {
          e.set("ResourceId", i);
        }
        if (f && a.needFactoryPricelist(e)) {
          e.set("FactoryPricelistId", f);
        }
        e.set("RelatedWorkOrderRowId", h);
        e.set("DiaryId", a._diaryid);
        e.set("Id", -Math.abs(b.data.length));
        b.add(e);
        d.consumption.push({ worowid: null, originid: g.article.get("Id") });
      }
    });
    if (b.isNeedSync()) {
      b.on({
        scope: a,
        single: !0,
        write: function (b, e) {
          d.consumption.forEach(function (d) {
            if (!d.worowid) {
              var f = g.getStore().getById(d.originid),
                i = f
                  ? b.findBy(function (g) {
                      return a.matchConsumption(g, f);
                    })
                  : -1;
              if (i > -1) {
                d.worowid = b.getAt(i).get("Id");
              }
            }
          });
          c.call(a);
        },
      });
      b.sync();
    } else {
      c.call(a);
    }
  },
  getCustomerForWorkOrder: function (d, e, c) {
    var b = Ext.getStore("MyWorkOrderStore"),
      a = b.findRecord("Id", d);
    if (a && a.get("CustomerId") > 0) {
      c(a.get("CustomerId"));
    } else {
      b.clearFilter();
      b.meClearFilter();
      b.meAddFilter(["Id", "=", d]);
      b.load({
        callback: function (f) {
          a = f[0];
          if (a && a.get("CustomerId") > 0) {
            c(a.get("CustomerId"));
          } else {
            var b = Ext.getStore("MyProjectLimitedStore");
            b.clearFilter();
            b.meClearFilter();
            b.meAddFilter(["Id", "=", e]);
            b.load({
              callback: function (b) {
                a = b[0];
                if (a && a.get("CustomerId") > 0) {
                  c(a.get("CustomerId"));
                } else {
                  c(null);
                }
              },
            });
          }
        },
      });
    }
  },
  loadFavorites: function (g, e, j, i, f) {
    var c = this,
      a,
      b;
    MEM.loadSpinner.showSpinner("loadfavorites");
    g = g || "";
    switch (g) {
      case "":
        a = c.articleStore;
        b = [
          ["ShowInPDA", "=", !0],
          ["FavoriteInPDA", "=", !0],
        ];
        break;
      case "workorder":
        a = c.articleStore;
        b = [["WorkOrderId", "=", e]];
        break;
      case "customer":
        a = c.articleCustomerStore;
        b = [
          ["CustomerId", "=", e],
          ["ProjectId", "=", i],
          ["HasFavorite", "=", !0],
          ["ArticlePricelistId", "<>", 0],
        ];
        break;
      case "customerlist":
        a = Ext.getStore("MyCustomerFavoriteArticleStore");
        b = [["CustomerId", "=", e]];
        break;
      case "project":
        a = c.articleCustomerStore;
        b = [
          ["ProjectId", "=", e],
          ["HasFavorite", "=", !0],
          ["ArticlePricelistId", "<>", 0],
        ];
        break;
      case "user":
        a = Ext.getStore("MyUserFavoriteArticleStore");
        b = [["UserId", "=", e]];
        break;
      case "favoritelist":
        a = Ext.getStore("MyFavoriteArticleStore");
        b = [["FavoriteListId", "=", e]];
        break;
    }
    var h = a.meFilters,
      d = h.length != b.length;
    if (!d) {
      d = c.getFavoriteList().getStore() != a;
    }
    if (!d) {
      h.forEach(function (c) {
        var a = !1;
        b.forEach(function (b) {
          if (b[0] == c[0]) {
            a = !0;
            if (b[2] != c[2]) {
              d = !0;
              return !1;
            }
          }
        });
        if (d || a) {
          return !1;
        }
      });
    }
    if (d) {
      a.meClearFilter();
      b.forEach(function (b) {
        a.meAddFilter(b);
      });
      if (c.intSetting("MEM.SortFavoritesOnArticleNo") == 1) {
        a.sort("ArticleNo", "ASC");
      }
      a.load({
        callback: function (d, b, h) {
          if (f) {
            f();
          }
          c.setFavoriteStore(a);
          MEM.loadSpinner.hideSpinner("loadfavorites");
        },
      });
    } else {
      if (f) {
        f();
      }
      c.setFavoriteStore(a);
      MEM.loadSpinner.hideSpinner("loadfavorites");
    }
  },
  getFavourites: function (g, c, e, d, h, f) {
    var a, b;
    if (c && g == this.articleCustomerStore) {
      a = "customer";
      b = c;
    } else {
      a = "";
      b = null;
    }
    if (d) {
      a = "workorder";
      b = d;
    }
    this.loadFavorites(a, b, c, e, f);
  },
  showRowOverlay: function (i) {
    var a = this,
      c,
      n = a.getMynavigationview(),
      k = a.getRowFavourite(),
      d = !1,
      h = !1,
      j = !1,
      e = Ext.getStore("MyCloneWorkOrderListStore"),
      f = Ext.getStore("MyProjectLimitedStore"),
      g = i.up("panel").getProjectId(),
      c = i.up("panel").getCustomerId(),
      b = i.up("panel").getWorkOrderId();
    var m = function (g, c, j, h, d, f) {
      try {
        MEM.loadSpinner.hideSpinner("showrowoverlay");
        var b = a.getFavoriteList();
        if (undefined != b) {
          b.setStore(j);
        } else {
          Ext.Msg.alert(T("Favorites"), T("No favorites to show"));
          return;
        }
        a.resetOverlay();
        a.getFavouriteWorkOrderId().setHidden(!DIARY_MODE);
        var l = e.findRecord(
          "Id",
          c ? c : DIARY_MODE ? a.getFavouriteWorkOrderId().getValue() : null
        );
        a.onSetFavoriteButtons(h, l, g, a.getApplication().getUserId(), d, f);
        view = n.push(k);
      } catch (o) {
        MEM.loadSpinner.hide(o, null, null, "showrowoverlay");
      }
    };
    var l = function () {
      MEM.loadSpinner.showSpinner("showrowoverlay");
      var k = a.articleStore,
        n = b ? b : DIARY_MODE ? a.getFavouriteWorkOrderId().getValue() : null,
        f = e.findRecord("Id", n);
      var l = Ext.create("MEM.store.MyArticleStore", {
        storeId: null,
        pageSize: 1,
      });
      l.meAddFilter(["WorkOrderId", "=", n]);
      l.load({
        callback: function (l) {
          if (!l.length) {
            d = !1;
          }
          if ((c && a.hasCustomerFavourites(f)) || a.hasProjectFavourites(f)) {
            if (f.get("CustomerId") != c) {
              c = f.get("CustomerId");
            }
            h = a.hasCustomerFavourites(f);
            j = a.hasProjectFavourites(f);
            if (!d) {
              k = a.articleCustomerStore;
            }
          } else {
            c = null;
          }
          k.clearFilter();
          k.meClearFilter();
          if (!d) {
            b = null;
          } else {
            if (!b) {
              b = a.getFavouriteWorkOrderId().getValue();
            }
          }
          var e = Ext.Function.pass(m, [c, b, k, d, h, j]);
          a.getFavourites(k, c, g, b, h, e);
          a.getFavouriteWorkOrderId().resumeEvents(!0);
        },
      });
    };
    if (!DIARY_MODE && !a.checkWOSaved(b)) {
      return;
    }
    try {
      f.clearFilter();
      f.meClearFilter();
      f.meAddFilter(["Id", "=", g]);
      f.load({
        callback: function (c) {
          if (c.length > 0 && c[0].get("WOFavorite")) {
            d = !0;
          }
          k.setWorkOrderFavourite(d);
          a.getFavouriteWorkOrderId().suspendEvents();
          if (a.storeIsReady(e, "ProjectId", g, b)) {
            l();
          } else {
            e.meClearFilter();
            e.meAddFilter(["ProjectId", "=", g]);
            e.load({
              callback: function (a) {
                l();
              },
            });
          }
        },
      });
    } catch (o) {
      MEM.loadSpinner.hide(o, null, null, "showrowoverlay");
    }
  },
  hasCustomerFavourites: function (a) {
    return (
      a &&
      (a.get("CustomerFavoritePriceList") ||
        a.get("CustomerFavoriteArticlePrice"))
    );
  },
  hasProjectFavourites: function (a) {
    return a && a.get("ProjectFavorite");
  },
  resetOverlay: function () {
    var a = this.getFavoriteList().getViewItems();
    Ext.each(a, function (a) {
      a.getSpinner().setValue(0);
    });
  },
  onCloseTap: function () {
    this.getOverlay().hide();
  },
  onSearchCloseTap: function () {
    this.getSearchOverlay().hide();
  },
  onCloseRowTap: function (b, c) {
    var a = this,
      e = a.getMynavigationview(),
      d = function () {
        if (TIME_MODE) {
          a.onTimeWOidChange(b, c);
        } else {
          if (DIARY_MODE) {
            a.onDiaryIdChange();
          } else {
            a.onWOidChange();
          }
        }
      };
    e.pop();
    d();
  },
  loadStores: function (c) {
    var b = this,
      f = "MyArticleStore",
      g = "MyWorkOrderStatusStore",
      e = "MyCloneWorkOrderStatusStore",
      h = ["MyItemUnitStore", "MyAccountChartStore"],
      d = this.getMynavigationview();
    b.loadSelectStores();
    if (
      (d.getActiveItem() &&
        d.getActiveItem().getActiveItem().id == "MyWorkOrderList") ||
      !Ext.getStore("MyArticleStore").isLoaded() ||
      !Ext.getStore("MyWorkOrderStatusStore").isLoaded()
    ) {
      Ext.each(
        h,
        function (b) {
          if (c && c[b]) {
            return;
          }
          a = Ext.getStore(b);
          if (!a.loading) {
            a.clearFilter();
            a.meClearFilter();
            a.load();
          }
        },
        this
      );
      var a = Ext.getStore(g);
      if (!a.loading) {
        a.meClearFilter();
        a.meAddFilter(["StatusCode", "<", b.intSetting("StatusFinished")]);
        a.load();
      }
      a = Ext.getStore(e);
      if (!a.loading) {
        a.meClearFilter();
        a.load();
      }
      a = Ext.getStore(f);
      if (!a.loading) {
        a.meClearFilter();
        a.meAddFilter(["ShowInPDA", "=", !0]);
        a.load({
          callback: function () {
            b.getApplication().fireEvent("storesloaded");
          },
        });
      }
    }
  },
  renderWOApperance: function () {
    this.setFetchToggle(1);
    this.loadStores();
    this.getArticleworkorderId().setHidden(!0);
    this.getArticlecombo().setHidden(!1);
    this.getArticleno().setHidden(!0);
    this.getTitlefield().setHidden(!0);
    this.getItemunitid().setHidden(!1);
    this.getPlannedqty().setHidden(getSetting("MEM.PlannedQty") != "1");
  },
  renderDiaryApperance: function () {
    this.setFetchToggle(1);
    this.loadStores();
    this.getArticleworkorderId().setHidden(!1);
    this.getArticlecombo().setHidden(!1);
    this.getArticleno().setHidden(!0);
    this.getTitlefield().setHidden(!0);
    this.getItemunitid().setHidden(!1);
    this.getPlannedqty().setHidden(!0);
  },
  renderTimeApperance: function () {
    this.setFetchToggle(1);
    this.loadSelectStore(this.getArticleCategoryCombo());
    this.loadStores();
    this.getArticleworkorderId().setHidden(!0);
    this.getArticlecombo().setHidden(!1);
    this.getArticleno().setHidden(!0);
    this.getTitlefield().setHidden(!0);
    this.getItemunitid().setHidden(!1);
    this.getPlannedqty().setHidden(!0);
  },
  onWorkOrderAddSetValues: function (m, i, l) {
    var b = this,
      a = i[0],
      c = Ext.getStore("MyCustomerStore"),
      k = this.getMynavigationview(),
      e = this.getWorkorderform(),
      j = Ext.getStore("MyWorkOrderStore").getModel(),
      d = b.intSetting("MobileWorkOrderStatusCodeMin"),
      f,
      h,
      g = Ext.getStore("MyWorkOrderStatusStore");
    if (isNaN(d)) {
      d = 0;
    }
    f = g.findBy(function (a) {
      return a.get("StatusCode") >= d;
    });
    h = g.getAt(Math.max(f, 0)).get("Id");
    c.clearFilter();
    c.meClearFilter();
    c.meAddFilter(["Id", "=", parseInt(a.get("CustomerId"))]);
    c.load({
      callback: function (n, o, p) {
        var c = n[0],
          f = c
            ? c.get("FrameworkContractId") || a.get("FrameworkContractId")
            : null,
          g = c ? c.get("CustomerName") : null;
        var d = Ext.ModelManager.create(
          {
            Id: null,
            ProjectId: a.getId(),
            CustomerName: g,
            CustomerId: a.get("CustomerId"),
            CustomerAgentId: a.get("CustomerAgentId"),
            WorkOrderNo: b.stringSetting("WorkOrderNo"),
            Addition: 0,
            OrderDate: new Date(),
            ProductionStart: new Date(),
            WorkOrderStatusId: h,
            FrameworkContractId: f,
          },
          j
        );
        b.getWorkOrderId().setValue(null);
        b.fetchWorkOrderStatus(d);
        view = k.push(e);
        d.get("ProductionStart").setMilliseconds(0);
        e.setRecord(d);
        b.filterWorkOrderRows(-1);
        b.setExternalStatusId(a.get("CustomerId"));
      },
    });
  },
  onWorkOrderAdd: function (i) {
    var b = this,
      a = Ext.getStore("MyProjectLimitedStore");
    if (i !== "workorder") {
      return;
    }
    a.on({ scope: b, single: !0, load: b.onWorkOrderAddSetValues });
    a.clearFilter();
    a.meClearFilter();
    if (b.getApplication().userIsPartner()) {
      a.meAddFilter([
        "Id",
        "=",
        b.getApplication().getUserRec().get("OrganizationalProjectId"),
      ]);
      a.load();
    } else {
      var g = !1;
      if (CURRENT_PROJECTID) {
        var h = b.getMyWOProjectId().getStore().getById(CURRENT_PROJECTID),
          e = this.intSetting("MobileProjectStatusCodeMin"),
          d = this.intSetting("MobileProjectStatusCodeMax"),
          f = h ? parseInt(h.get("StatusCode")) : null;
        if (isNaN(e)) {
          e = 0;
        }
        if (isNaN(d)) {
          d = 0;
        }
        g = !0;
        if (f == null || (e != 0 && e > f) || (d != 0 && d < f)) {
          g = !1;
        }
      }
      if (g) {
        a.meAddFilter(["Id", "=", CURRENT_PROJECTID]);
        a.load();
      } else {
        var c = Ext.getStore("MyCloneProjectListStore");
        c.clearFilter();
        c.meClearFilter();
        MEM.app.getController("Project").addStatusFilter(c, !0);
        c.load({
          callback: function (b) {
            a.meAddFilter(["Id", "=", b[0].getId()]);
            a.load();
          },
        });
      }
    }
  },
  onMyWorkOrderListPainted: function () {
    var a = this,
      b = Ext.getStore("MyWorkOrderStatusStore");
    a.showToggle();
    b.meClearFilter();
    b.load({
      callback: function () {
        a.setButtons();
        a.showAdd();
        if (a.getStatusButtons().getItems().getCount()) {
          a.setFilterDisabled(!1);
        }
        a.loadStores();
      },
    });
  },
  onFilterButton: function (b, a) {
    if (a.element.hasCls("x-button-pressed")) {
      this.filter(a.getText());
    }
  },
  setButtons: function () {
    var a = this,
      c = a.getStatusButtons(),
      b = Ext.getStore("MyCloneWorkOrderStatusStore");
    if (c.getItems().length > 0) {
      a.forceFilter("workorderlist");
    } else {
      b.clearFilter();
      b.sort("StatusCode", "ASC");
      b.load({ callback: a.onWorkOrderStatusStoreLoaded, scope: a });
    }
  },
  forceFilter: function (a) {
    this.filter(this.getStartFilter(0));
    if (a) {
      MEM.loadSpinner.hideSpinner(a);
    }
  },
  onWorkOrderStatusStoreLoaded: function (k, i, f) {
    MEM.loadSpinner.hideSpinner("workorderlist");
    if (f) {
      var h = this,
        g = Ext.getStore("MyCloneWorkOrderStatusStore"),
        e = 0,
        j,
        d,
        c,
        a = [],
        b = h.getStatusButtons();
      a.push({
        xtype: "button",
        html:
          "<span style='border-radius: 3px; background-color: grey'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
          T("All"),
        cls: "my-status-button",
        text: 0,
        pressed: !0,
      });
      a.push({
        xtype: "button",
        html:
          "<span id:'mystatusbutton-pool' style='border-radius: 3px; background-color: #eba10c'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
          T("Pool"),
        cls: "my-status-button",
        text: "pool",
        pressed: !0,
      });
      g.each(function (b) {
        c = b.get("Id");
        e += 1;
        d = "border-radius: 3px; background-color: " + b.get("StatusColor");
        a.push({
          xtype: "button",
          html:
            "<span  id:'mystatusbutton-" +
            b.get("Id") +
            "' style='" +
            d +
            "'>&nbsp;&nbsp;&nbsp;&nbsp;</span> " +
            b.get("StatusName"),
          cls: "my-status-button",
          text: c,
          pressed: !0,
        });
      });
      b.add(a);
      b.setPressedButtons([0]);
      if (!Ext.os.is.Android) {
        Ext.Viewport.setHeight("100%");
        Ext.Viewport.setWidth("100%");
      }
    }
  },
  onRowAdd: function (b) {
    var a = this,
      k = this.getMynavigationview(),
      i = Ext.getStore("MyWorkOrderRowStore").getModel(),
      c = Ext.getStore("MyCloneWorkOrderListStore"),
      d = this.getArticlecombo(),
      h = d.getStore(),
      j = this.getWorkorderrowform(),
      g,
      f;
    if (!DIARY_MODE && !a.checkWOSaved(b)) {
      return;
    } else {
      MEM.loadSpinner.showSpinner("onrowadd");
      if (
        !a.ensureArticleStoreLoaded(h, function () {
          a.onRowAdd(b);
        })
      ) {
        return;
      }
      var e = function () {
        f = Ext.ModelManager.create(
          {
            Id: null,
            WorkOrderId: b,
            PerformedDate: new Date(),
            UsedQty: getSetting("DefaultUsedQty"),
            ItemUnitId: 1,
          },
          i
        );
        g = j.setRecord(f);
        a.onArticleComboChange(d, d.getValue());
        k.add(g);
        a.filterWorkOrderRows(parseInt(b, 10));
        MEM.loadSpinner.hideSpinner("onrowadd");
      };
      d.setValue(null);
      a.getArticleCategoryCombo().setValue(null);
      if (a.storeIsReady(c, "ProjectId", CURRENT_PROJECTID, b)) {
        e();
      } else {
        c.meClearFilter();
        c.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
        c.load({
          callback: function (a) {
            e();
          },
        });
      }
    }
  },
  onWorkOrderContactAdd: function () {
    var b = this.getMynavigationview(),
      a = this.getMyWorkOrdercontactformpanel(),
      c = b.push(a);
  },
  saveQueryIfDirtyForm: function () {
    var a = this,
      c = a.getWorkorderform(),
      b = c.getRecord(),
      e = c.getValues(),
      d = a.getMyWOProjectId();
    a.trimAllFormFields(c);
    if (e.hasOwnProperty("ProjectId") && d.getDisabled()) {
      d.suspendEvents(!0);
      d.setValue(b.get("ProjectId"));
      d.resumeEvents(!0);
    }
    c.updateRecord(b);
    if (
      a.getWorkOrderSaveButton().isDisabled() === !1 &&
      b.dirty &&
      !a.dirtyDueToNew(b) &&
      !a.dirtyDueToCreatedByAdmin(b)
    ) {
      Ext.Msg.show({
        title: T("Workorder"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (d) {
          if (d == "yes") {
            Ext.defer(function () {
              a.onWOSave();
            }, 100);
          } else {
            b.reject();
            c.setRecord(b);
            a.getMynavigationview().pop();
          }
        },
      });
      return !0;
    } else {
      return !1;
    }
  },
  saveQueryIfDirtyRowForm: function () {
    var a = this,
      c = a.getWorkorderrowform(),
      b = c.getRecord();
    a.trimAllFormFields(c);
    c.updateRecord(b);
    if (
      a.getWORowSaveButton().isDisabled() === !1 &&
      b.dirty &&
      !a.dirtyDueToNew(b) &&
      !a.dirtyDueToCreatedByAdmin(b)
    ) {
      Ext.Msg.show({
        title: T("Resource"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (b) {
          if (b == "yes") {
            Ext.defer(function () {
              a.onRowSave();
            }, 100);
          } else {
            a.getMynavigationview().pop();
          }
        },
      });
      return !0;
    } else {
      return !1;
    }
  },
  saveQueryIfDirtyFavouriteList: function () {
    var a = this;
    if (a.selectedfavorites && Object.keys(a.selectedfavorites).length > 0) {
      Ext.Msg.show({
        title: T("Favourites"),
        message: T("Unsaved changes. Save changes?"),
        buttons: Ext.MessageBox.YESNO,
        fn: function (b) {
          if (b == "yes") {
            Ext.defer(function () {
              a.onSaveList();
            }, 100);
          } else {
            a.getMynavigationview().pop();
          }
        },
      });
      return !0;
    } else {
      return !1;
    }
  },
  onSaveWorkOrdersTap: function (d, c, a, b) {
    this.onWOSave();
  },
  onWOSave: function (n, o) {
    var b = this,
      v = b.getApplication(),
      q = Ext.getStore("MyWorkOrderStore"),
      s = Ext.getStore("MyUserWorkOrderListStore"),
      f = Ext.getCmp("MyWorkOrderFormPanel"),
      w = Ext.getCmp("mynavigationview"),
      k =
        b.stringSetting("ArtNoCreateOnWOHourStop") ||
        b.stringSetting("MEM.ArtNoCreateOnWOHourStop"),
      a = f.getRecord(),
      d = f.getValues(),
      j,
      l,
      e = v.getUserId(),
      m = getSetting("MEM.StatusCodeTriggerSetPerformed"),
      p = !1,
      c = "saveworkorder",
      h = b.getMyWOProjectId();
    MEM.loadSpinner.showSpinner(c);
    try {
      l = f.getRecord().get("CustomerId");
      if (
        a.get("WorkOrderStatusId") &&
        a.get("WorkOrderStatusId") != d["WorkOrderStatusId"]
      ) {
        var r = Ext.getStore("MyWorkOrderStatusStore"),
          g = r.findRecord("Id", d["WorkOrderStatusId"]);
      }
      if (m && g && g.get("StatusCode") == m) {
        var u = Ext.getStore("MyWorkOrderRowStore");
        p = !0;
        var t = a.get("Id");
        u.each(function (a) {
          if (a.get("WorkOrderId") == t) {
            a.set("PerformedDate", new Date());
            a.set("PerformedUserId", e);
          }
        });
      }
      var i = !1;
      if (
        Ext.isDefined(d.FrameworkContractId) &&
        d.FrameworkContractId != a.get("FrameworkContractId")
      ) {
        i = !0;
      }
      if (
        d.hasOwnProperty("ProjectId") &&
        f.getFields()["ProjectId"].getDisabled()
      ) {
        delete d.ProjectId;
        h.suspendEvents(!0);
        h.setValue(a.get("ProjectId"));
        h.resumeEvents(!0);
      }
      a.set(d);
      a.set("CustomerId", Ext.getCmp("myWOCustomerId").getValue());
      if (l != a.get("CustomerId")) {
        a.set("CustomerAgentId", null);
      }
      if (a.get("CreatedId") == null) {
        a.set("CreatedId", e);
        b.getCreatedid().setValue(e);
      }
      if (!Ext.isNumber(a.get("Id"))) {
        if (a.get("ResponsibleServiceId") == null) {
          a.set("ResponsibleServiceId", e);
          b.getResponsibleserviceid().setValue(e);
        }
      }
      if (
        Ext.getCmp("myProductionStart") &&
        Ext.getCmp("myProductionStart").getValue() != null
      ) {
        a.set("ProductionStart", Ext.getCmp("myProductionStart").getValue());
      }
      if (!!a.get("UpdatePrices") != i) {
        a.set("UpdatePrices", i);
      }
      if (!checkRequired(f)) {
        MEM.loadSpinner.hideSpinner(c);
        Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
        return;
      }
      a.setProxy(q.getProxy());
      delete a.getProxy().getExtraParams().filter;
      if (a.isModified("WorkOrderStatusId")) {
        q.fireEvent("wostatuschange", a);
      }
      a.save({
        success: function () {
          try {
            j = a.internalId;
            CURRENT_PROJECTID = a.get("ProjectId");
            if (a.get("WorkOrderNo") == 1 && g) {
              var f = b.opt("CascadeWOStatus");
              if (f && f == 1) {
                var e = Ext.getStore("MyProjectStatusStore").findRecord(
                  "StatusCode",
                  g.get("StatusCode")
                );
                if (e) {
                  var d = Ext.getStore("MyProjectLimitedStore");
                  d.meClearFilter();
                  d.meAddFilter(["Id", "=", parseInt(a.get("ProjectId"), 10)]);
                  d.load({
                    callback: function (b) {
                      var a = b[0];
                      if (a) {
                        a.set("ProjectStatusId", e.getId());
                        a.setProxy(d.getProxy());
                        a.save({
                          success: function () {
                            var c = Ext.getStore("MyProjectListStore"),
                              f = c.getFilters();
                            c.clearFilter();
                            c.meClearFilter();
                            var d = c.getById(a.getId());
                            if (d) {
                              d.set("ProjectStatusId", e.getId());
                            }
                            c.setFilters(f);
                          },
                        });
                      }
                    },
                  });
                }
              }
            }
            if (k && k != "") {
              b.onStartStop(k, j);
            }
            b.getWorkOrderId().setValue(j);
            b.getWorkorderNo().setValue(a.get("WorkOrderNo"));
            if (p === !0) {
              Ext.getStore("MyWorkOrderRowStore").sync();
            }
            s.filter("WorkOrderStatusId", -1);
            if (b.getWorkOrderList()) {
              var i, h;
              if (!(n == !1)) {
                h = c;
              }
              b.filter(i, h);
            }
            MEM.loadSpinner.hideSpinner(c);
            if (!1 != n) {
              if (
                b.intSetting("FavoritesOnSave") == "1" ||
                b.intSetting("MEM.FavoritesOnSave") == "1"
              ) {
                button = Ext.getCmp("rowsaddwofav");
                button.fireEvent("tap", button);
              } else {
                Ext.Msg.alert(T("Saved"), T("Saved."));
              }
            }
            if (o) {
              o();
            }
          } catch (x) {
            MEM.loadSpinner.hideSpinner(c);
            console.log(x);
          } finally {
            MEM.loadSpinner.hideSpinner(c);
          }
        },
        failure: function (a) {
          MEM.loadSpinner.hideSpinner(c);
          console.log(a);
        },
      });
    } catch (x) {
      MEM.loadSpinner.hideSpinner(c);
      console.log(x);
    }
  },
  dateDiff: function (c, d) {
    var a = c.split(/[^0-9]/),
      b = d.split(/[^0-9]/);
    if (a.length > 5) {
      c = new Date(a[0], a[1] - 1, a[2], a[3], a[4], a[5]);
    } else {
      c = new Date(a[0], a[1] - 1, a[2], a[3], a[4]);
    }
    if (b.length > 5) {
      d = new Date(b[0], b[1] - 1, b[2], b[3], b[4], b[5]);
    } else {
      d = new Date(b[0], b[1] - 1, b[2], b[3], b[4]);
    }
    datediff = c.getTime() - d.getTime();
    return Math.round(100 * (datediff / (60 * 60 * 1000))) / 100;
  },
  onStartStop: function (d, f) {
    var h = this,
      k = this.getApplication(),
      j = Ext.getStore("MyWorkOrderRowStore"),
      c = Ext.getStore("MyCloneWorkOrderRowStore"),
      g = c.getModel(),
      i = Ext.getStore("MyArticleStore"),
      a,
      l,
      b,
      e;
    b = i.findRecord("ArticleNo", d);
    if (
      b &&
      Ext.getCmp("myProductionEndClock").getValue() &&
      Ext.getCmp("myProductionStartClock").getValue()
    ) {
      e = h.dateDiff(
        Ext.getCmp("myProductionEndClock").getValue(),
        Ext.getCmp("myProductionStartClock").getValue()
      );
      a = j.findRecord("CodeNo", d);
      if (a) {
        a.set("UsedQty", e);
        a.setProxy(c.getProxy());
      } else {
        g.setProxy(c.getProxy());
        a = Ext.ModelManager.create(
          {
            WorkOrderId: f,
            CodeNo: d,
            ItemUnitId: b.get("ItemUnitId"),
            Title: b.get("Description"),
            PerformedUserId: k.getUserId(),
            PerformedDate: _selectedDate,
            TimeId: TIME_MODE ? _currentTimeId : null,
            PlannedQty: null,
            UsedQty: e,
          },
          g
        );
        a.set("Id", null);
      }
    } else {
      Ext.Msg.alert(T("Setting"), T("Please check Start/Stop setting."));
      return !1;
    }
    a.save({
      callback: function () {
        h.filterWorkOrderRows(parseInt(f, 10));
        return !0;
      },
    });
  },
  onRowSave: function (o, n, l, m, i) {
    var b = this,
      k = Ext.getStore("MyWorkOrderRowStore"),
      e = Ext.getStore("MyCloneWorkOrderRowStore"),
      g = Ext.getCmp("MyWorkOrderRowForm"),
      j = Ext.getCmp("mynavigationview"),
      a = g.getRecord(),
      h = g.getValues(),
      d = h.UsedQty,
      c;
    if (!checkRequired(g)) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return !1;
    }
    if (document.getElementsByClassName("x-invalid").length > 0) {
      Ext.Msg.alert(T("Value"), T("Please check current values."));
      return !1;
    }
    if (!a.get("Title") && Ext.getCmp("fetchtoggle").getValue() != !1) {
      var f = b.getArticlecombo();
      b.onArticleComboChange(f, f.getValue(), f.getValue());
    }
    if (d) {
      a.set("PerformedUserId", b.getApplication().getUserId());
    }
    a.set(h);
    if (isNaN(a.get("WorkOrderId"))) {
      a.set("WorkOrderId", null);
      if (Ext.getCmp("fetchtoggle").getValue() == !0) {
        a.set("CostUnit", null);
        a.set("PriceUnit", null);
      }
    }
    if (a.phantom) {
      if (b.getCostunit().getHidden()) {
        a.set("CostUnit", null);
      }
      if (b.getPriceunit().getHidden()) {
        a.set("PriceUnit", null);
      }
    }
    if (TIME_MODE) {
      if (d) {
        a.set("PerformedDate", _selectedDate);
      }
      a.set("TimeId", _currentTimeId);
      c = parseInt(b.getTimeWorkOrderId().getValue(), 10);
    } else {
      if (DIARY_MODE) {
        if (d) {
          a.set("PerformedDate", _selectedDate);
        }
        a.set("DiaryId", _currentDiaryId);
        c = parseInt(b.getArticleworkorderId().getValue(), 10);
      } else {
        if (AWO_MODE) {
          if (d) {
            a.set("PerformedDate", new Date());
          }
          c = parseInt(Ext.getCmp("myAWOId").getValue(), 10);
        } else {
          if (d && !a.get("PerformedDate")) {
            a.set("PerformedDate", new Date());
          } else {
            if (!d) {
              a.set("PerformedDate", null);
            }
          }
          c = parseInt(b.getWorkOrderId().getValue(), 10);
        }
      }
    }
    if (null == a.get("WorkOrderId")) {
      Ext.Msg.alert(
        T("Not found"),
        T("WorkOrder") +
          "/" +
          T("AWO") +
          " " +
          T("not found. Please check status."),
        Ext.emptyFn
      );
      return;
    } else {
      if (c != a.get("WorkOrderId")) {
        Ext.Msg.alert(T("Differs"), T("WorkorderId differs, can't save."));
        return;
      }
    }
    a.setProxy(k.getProxy());
    b.workorderid = c;
    a.save(
      {
        success: function (f, a) {
          Ext.Msg.alert(T("Saved"), T("Saved."), function () {
            if (a._action == "update") {
              j.pop();
            }
          });
          var d = Ext.getCmp("myWORowSave");
          d.element.fireEvent("painted");
          e.meClearFilter();
          if (TIME_MODE) {
            e.meAddFilter(["TimeId", "=", _currentTimeId]);
          } else {
            if (DIARY_MODE) {
              e.meAddFilter(["DiaryId", "=", _currentDiaryId]);
            } else {
              e.meAddFilter(["WorkOrderId", "=", b.workorderid]);
            }
          }
          e.load();
          b.filterWorkOrderRows(b.workorderid);
          if (!i) {
            b.onRowAdd(c);
          }
        },
        failure: function () {
          MEM.loadSpinner.hide();
        },
      },
      b
    );
  },
  onRowSaveClose: function (d, c, a, b) {
    this.onRowSave(d, c, a, b, !0);
  },
  onClose: function (f, e, c, d) {
    var b = this,
      a = Ext.getCmp("mynavigationview");
    if (!b.saveQueryIfDirtyRowForm()) {
      a.pop();
    }
  },
  filterWorkOrderRows: function (c, f) {
    var b = this,
      a = Ext.getStore("MyWorkOrderRowStore"),
      d = Ext.getStore("MyChecklistRowStore"),
      e = b.getContactListList().getStore(),
      g;
    d.meClearFilter();
    d.meAddFilter(["WorkOrderId", "=", c]);
    d.load({
      callback: function (a) {
        b.getCheckList().setHidden(a.length == 0);
        b.getCheckListHeader().setHidden(a.length == 0);
      },
    });
    e.meClearFilter();
    e.meAddFilter(["WorkOrderId", "=", c]);
    e.load({
      callback: function (a) {
        b.getContactList().setHidden(a.length == 0);
        b.getContactListHeader().setHidden(a.length == 0);
      },
    });
    a.clearFilter();
    a.meClearFilter();
    g = b.getWorkorderrowform().down("#myRowList");
    if (TIME_MODE) {
      a.meAddFilter(["WorkOrderId", "=", c]);
      a.meAddFilter(["TimeId", "=", _currentTimeId]);
    } else {
      if (DIARY_MODE) {
        a.clearFilter();
        a.meClearFilter();
        a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
      } else {
        a.meAddFilter(["WorkOrderId", "=", c]);
      }
    }
    a.meAddFilter(["ShowInMobile", "=", !0]);
    a.load({ callback: f, scope: b });
  },
  onMyWorkOrderListItemTap: function (m, p, o, k, q, n) {
    var a = this,
      l = Ext.getCmp("mynavigationview"),
      c = Ext.getStore("MyWorkOrderStore"),
      j = Ext.getStore("MyCloneWorkOrderStatusStore"),
      f = Ext.getStore("MyCloneWorkOrderListStore"),
      d = this.getWorkorderform(),
      b,
      h,
      e,
      i = parseInt(k.get("WorkOrderId"), 10);
    a.getCustomerContactId().suspendEvents();
    a.getFrameworkContractId().suspendEvents();
    if (a.getTimeWorkOrderId()) {
      a.getTimeWorkOrderId().suspendEvents();
    }
    if (!haveRight("BookedHour")) {
      a.getWorkorderform().down("#rowsaddtimewo").setHidden(!0);
    }
    var g = function (e) {
      MEM.loadSpinner.showSpinner("loadwo");
      c.meClearFilter();
      c.meAddFilter(["Id", "=", i]);
      c.load({
        callback: function (g) {
          if (g.length > 0) {
            b = g[0];
          } else {
            Ext.Msg.alert(
              T("No item."),
              T("Selected item not found. Please check connection.")
            );
            return;
          }
          if (b.getId() != i) {
            cExt.Msg.alert(T("Warning expected id differs."));
            return;
          }
          CURRENT_PROJECTID = b.get("ProjectId");
          a.getMyWOProjectId().suspendEvents();
          a.getWorkorderCustomerId().suspendEvents();
          d.lockButtons(!0);
          f.meClearFilter();
          f.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
          f.load({
            callback: function (a) {
              d.lockButtons(!1);
            },
          });
          if (e) {
            h = j.findRecord(
              "StatusCode",
              a.stringSetting("MEM.WorkOrderStartCode")
            );
            b.set("WorkOrderStatusId", h.getId());
            b.set("ProductionStart", new Date());
            b.setProxy(c.getProxy());
            b.save({
              success: function () {
                a.applyButtonFilter();
              },
            });
          }
          CURRENT_PROJECTID = b.get("ProjectId");
          a.fetchWorkOrderStatus(b);
          a.ensureProject(
            a.getMyWOProjectId(),
            b.get("ProjectId"),
            function () {
              d.reset();
              d.setRecord(b);
              view = l.push(d);
              a.getMyWOProjectId().resumeEvents(!0);
              a.getWorkorderCustomerId().resumeEvents(!0);
              a.getCustomerContactId().resumeEvents(!0);
              a.getFrameworkContractId().resumeEvents(!0);
              if (a.getTimeWorkOrderId()) {
                a.getTimeWorkOrderId().resumeEvents(!0);
              }
              a.getExternalStatusName().originalValue = a
                .getExternalStatusName()
                .getValue();
              a.styleFieldByValue(
                a.getWorkorderCustomerId(),
                c,
                "CreditRisk",
                "creditrisk-warning"
              );
              MEM.loadSpinner.hideSpinner("loadwo");
            }
          );
        },
      });
    };
    e = a.stringSetting("MEM.WorkOrderStartCode");
    if (e && e != "") {
      Ext.Msg.show({
        title: T("Start Workorder."),
        message: T("Workorder will be marked as started. OK?"),
        buttons: [Ext.MessageBox.YES, Ext.MessageBox.NO, Ext.MessageBox.CANCEL],
        fn: function (a) {
          if (a == "yes") {
            g(!0);
          } else {
            if (a == "no") {
              g(!1);
            }
          }
        },
      });
    } else {
      g(!1);
    }
  },
  applyButtonFilter: function () {
    var c = this;
    var b = this.getMynavigationview();
    var a = b.down("segmentedbutton");
    c.onFilterButton(a, a.getPressedButtons()[0]);
  },
  ensureArticleStoreLoaded: function (a, b) {
    if (a.isLoaded()) {
      return !0;
    }
    a.load({ callback: b });
    return !1;
  },
  onMyDiaryRowListItemTap: function (h, k, j, d, m, i) {
    var a = this,
      l = this.getMynavigationview(),
      g = this.getWorkorderrowform(),
      b = Ext.getStore("MyWorkOrderRowStore"),
      c = Ext.getStore("MyCloneWorkOrderListStore"),
      e = CURRENT_PROJECTID;
    if (
      !a.ensureArticleStoreLoaded(a.getArticlecombo().getStore(), function () {
        a.onMyDiaryRowListItemTap(h, k, j, d, m, i);
      })
    ) {
      return;
    }
    var f = function () {
      a.renderTimeApperance();
      b.clearFilter();
      b.meClearFilter();
      if (Number(_currentDiaryId)) {
        b.meAddFilter(["DiaryId", "=", _currentDiaryId]);
      } else {
        b.meAddFilter(["DiaryId", "=", -1]);
      }
      b.meAddFilter(["ShowInMobile", "=", !0]);
      b.load();
      a.setFetchToggle(0);
      g.setRecord(d);
      a.onArticleSelected(
        a.getArticlecombo().getStore().findRecord("Id", a.getArticleId(d)),
        !0
      );
      view = l.push(g);
    };
    if (a.storeIsReady(c, "ProjectId", e, d.get("WorkOrderId"))) {
      f();
    } else {
      c.meClearFilter();
      c.meAddFilter(["ProjectId", "=", e]);
      c.load({
        callback: function (a) {
          f();
        },
      });
    }
  },
  setFetchToggle: function (b) {
    var a = this;
    a.getFetchtoggle().setValue(b);
    a.getWorkorderrowform().togglechange(b);
    a.onShowPrices();
    if (a.getApplication().userIsPartner()) {
      a.getFetchtoggle().hide();
    }
  },
  onMyWorkOrderRowListItemTap: function (g, j, i, c, m, h) {
    var a = this,
      k = this.getMynavigationview(),
      f = this.getWorkorderrowform(),
      l = Ext.getStore("MyWorkOrderRowStore"),
      b = Ext.getStore("MyCloneWorkOrderListStore"),
      d = CURRENT_PROJECTID
        ? CURRENT_PROJECTID
        : a.getWorkorderform().getProjectId();
    if (
      !a.ensureArticleStoreLoaded(a.getArticlecombo().getStore(), function () {
        a.onMyWorkOrderRowListItemTap(g, j, i, c, m, h);
      })
    ) {
      return;
    }
    var e = function () {
      a.renderWOApperance();
      l.clearFilter();
      a.setFetchToggle(0);
      f.setRecord(c);
      a.onArticleSelected(
        a.getArticlecombo().getStore().findRecord("Id", a.getArticleId(c)),
        !0
      );
      view = k.push(f);
    };
    if (a.storeIsReady(b, "ProjectId", d, c.get("WorkOrderId"))) {
      e();
    } else {
      b.meClearFilter();
      b.meAddFilter(["ProjectId", "=", d]);
      b.load({
        callback: function (a) {
          e();
        },
      });
    }
  },
  onMyChecklistRowListItemTap: function (j, n, h, d, i, m) {
    var l = this,
      g = j.up("myworkorderformpanel"),
      c = l.getTextAreaOverlay(),
      k = Ext.getStore("MyChecklistRowStore"),
      a,
      e,
      f,
      b;
    if (i.target.className.indexOf("checklistcomment") >= 0) {
      a = "CheckNote";
      e = d.get(a);
      f = d.fields.getByKey(a).initialConfig.max || 255;
      b = !1;
      if (g && g.getIsReadOnly()) {
        b = !0;
      }
      c.initOverlay(d, e, b, h, "", f);
      c.on("handleText", function (b, e) {
        b.set(a, e);
        b.setProxy(k.getProxy());
        b.save({
          success: function () {
            c.destroy();
            c.un("handleText");
          },
        });
      });
    } else {
      if (i.target.className.indexOf("description") >= 0) {
        a = "ItemDescription";
        e = d.get(a);
        b = !0;
        c.initOverlay(d, e, b, h, "");
      }
    }
  },
  onMyRowListItemTap: function (e, h, g, a, c, f) {
    var b = this,
      d;
    if (c.target.className.indexOf("trash2") >= 0) {
      console.log("deprecated use of trash2.");
      b.onDeleteWORow(a);
    } else {
      if (c.target.className.indexOf("my-column-delete") >= 0) {
        b.onDeleteWORow(a);
      }
    }
  },
  onMySearchPanelListItemTap: function (g, i, f, c, j, h) {
    var e = this,
      a = e.getSearchOverlay();
    this.loadStores();
    var d = Ext.getStore("MyProjectLimitedStore");
    var b = c.raw.ProjectId;
    if (!d.isLoaded() || d.getAt(0).getId() != b) {
      e.onProjectIdChange(undefined, b, 0);
    }
    a.setCurrentProjectId(b);
    a.setCurrentWorkOrderId(parseInt(c.get("WorkOrderId")));
    a.setAdditional(c.raw.Addition);
    a.filterData();
    a.showBy(f);
  },
  onMySearchOverlayItemTap: function (c, l, k, h, m, j) {
    var a = this,
      d = Ext.getCmp("MyWorkOrderFormPanel"),
      i = Ext.getCmp("mynavigationview"),
      b = Ext.getStore("MyWorkOrderStore"),
      g = a.getSearchOverlay(),
      e = c.up("mysearchoverlay").getCurrentWorkOrderId(),
      f = c.up("mysearchoverlay").getAdditional();
    switch (h.get("Action")) {
      case "WOSearchTap":
        if (0 == f) {
          TIME_MODE = !1;
          AWO_MODE = !1;
          b.meClearFilter();
          b.meAddFilter(["Id", "=", e]);
          b.load({
            callback: function (b) {
              var f = a.getMyWOProjectId();
              f.suspendEvents();
              a.fetchWorkOrderStatus(b[0]);
              d.setRecord(b[0]);
              CURRENT_PROJECTID = b[0].get("ProjectId");
              f.resumeEvents();
              view = i.push(d);
              a.filterWorkOrderRows(e);
              MEM.loadSpinner.hide();
            },
          });
        }
        break;
    }
    g.hide();
  },
  onDeleteTap: function () {
    var d = this;
    var c = Ext.getStore("MyWorkOrderRowStore");
    var b;
    var a;
    b = Ext.getCmp("myWorkOrderRowId").getValue();
    a = c.findRecord("Id", b);
    d.onDeleteWORow(a);
  },
  onDeleteWORow: function (b) {
    var d = this,
      c,
      a = Ext.getStore("MyCloneWorkOrderRowStore");
    Ext.Msg.confirm(T("Delete item."), T("Are you sure?"), function (e) {
      if (e == "yes") {
        a.meClearFilter();
        a.meAddFilter(["Id", "=", b.getId()]);
        a.meAddFilter(["WorkOrderId", "=", b.get("WorkOrderId")]);
        a.load({
          callback: function (f) {
            if (!f[0].getProxy()) {
              f[0].setProxy(a.getProxy());
            }
            f[0].erase({
              callback: function () {
                c = b.get("WorkOrderId");
                if (DIARY_MODE) {
                  a.meClearFilter();
                  a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
                  a.load();
                }
                d.filterWorkOrderRows(c);
              },
            });
          },
        });
      }
    });
  },
  setProjectMode: function (a) {
    this.PROJECT_MODE = a;
  },
  getStartFilter: function (d) {
    var b = this,
      a = 1,
      c;
    d = parseInt(d, 10);
    for (a; a < b.getStatusButtons().items.length; a++) {
      if (
        b.getStatusButtons().innerItems[a].getCls() != null &&
        b.getStatusButtons().innerItems[a].getCls() != ""
      ) {
        if (
          b.getStatusButtons().getPressedButtons()[0].getText() ==
          b.getStatusButtons().innerItems[a].getText()
        ) {
          c = b.getStatusButtons().innerItems[a].getText();
          break;
        }
      }
    }
    if (!c) {
      c = d === 0 ? "" : d;
    }
    return c;
  },
  filter: function (f, e) {
    var a = this,
      g = this.getApplication(),
      h,
      i = Ext.getStore("MyCloneWorkOrderStatusStore"),
      d = a.getStartFilter(f),
      b = a.getStoreForList(d);
    var c = parseInt(getUserSetting("MemGroupByDay"), 10);
    if (isNaN(c)) {
      c = 1;
    }
    a.setGroupBy(c, !1, b);
    switch (c) {
      case 1:
        a.getViewButtons().setPressedButtons([0]);
        break;
      case 2:
        a.getViewButtons().setPressedButtons([2]);
        break;
      default:
        a.getViewButtons().setPressedButtons([1]);
    }
    a.addWorkOrderListFilter(b);
    if (d == "pool") {
      h = i.findRecord("StatusCode", a.stringSetting("StatusFinished"));
      b.meAddFilter(["PoolSelectionUserId", "=", g.getUserId()]);
      b.meAddFilter(["WorkOrderStatusId", "<>", h.getId()]);
      a.getTogglelist().setValue(0);
    } else {
      if (b == Ext.getStore("MyOrganisationWorkOrderListStore")) {
        b.meAddFilter([
          "OrganizationalProjectId",
          "=",
          g.getUserRec().get("OrganizationalProjectId"),
        ]);
      } else {
        if (a.PROJECT_MODE || isNaN(f) || f == "") {
          b.meAddFilter(["ResponsibleServiceId", "=", g.getUserId()]);
        } else {
          a.applyFilter(c, b, a.stringSetting("StatusFinished"), d);
          return;
        }
      }
    }
    e = e || "filter";
    MEM.loadSpinner.showSpinner(e);
    b.load({
      callback: function () {
        a.applyFilter(c, b, a.stringSetting("StatusFinished"), d);
        MEM.loadSpinner.hideSpinner(e);
        a.setFilterDisabled(!1);
      },
    });
  },
  showAdd: function () {
    this.getApplication().fireEvent("setadditemtype", "workorder");
  },
  hideAdd: function () {
    this.getApplication().fireEvent("clearadditemtype");
  },
  showMail: function () {
    if (this.boolSetting("MEM.OrderSummaryEmail")) {
      this.getApplication().fireEvent("setmailtype", "workorder");
    }
  },
  hideMail: function () {
    this.getApplication().fireEvent("clearmailtype");
    this.getMyEmailOverlay().hide();
  },
  showToggle: function () {
    if (haveRight("OrganisationWorkOrder")) {
      var b = this.getTogglelist(),
        a = this.getToolbarspacer(),
        c = this.getViewButtons();
      b.setHidden(!1);
      a.setHidden(!1);
      a.setWidth(
        Ext.Viewport.getSize().width / 2 -
          b.element.getWidth() -
          c.element.getWidth() / 2
      );
    } else {
      this.getViewtoolbar().getLayout().setPack("center");
    }
  },
  showSignatureButton: function () {
    var a = this;
    if (a.getMynavigationview().getActiveItem().id == "MyWorkOrderFormPanel") {
      this.getApplication().fireEvent("setsignaturetype", "workorder");
    }
  },
  hideSignatureButton: function () {
    this.getApplication().fireEvent("clearsignaturetype");
  },
  showCopy: function () {
    if (
      this.getApplication().userIsPartner(this.getMyWOProjectId().getValue())
    ) {
      this.getApplication().fireEvent("setcopytype", "workorder");
    }
  },
  hideCopy: function () {
    this.getApplication().fireEvent("clearcopytype");
  },
  onFilterList: function () {
    var a = Ext.getStore("MyProjectListStore");
    a.clearFilter();
    a.meClearFilter();
    a.filter(
      "ProjectName",
      new RegExp(".*" + Ext.getCmp("searchField").value + ".*", "i"),
      !0
    );
  },
  createRecord: function (a, d, c) {
    var e = this.getApplication(),
      b = Ext.ModelManager.create(
        {
          WorkOrderId: Number(d),
          DiaryId: DIARY_MODE ? _currentDiaryId : null,
          AccountNo: a.get("AccountNo"),
          CodeNo: a.get("ArticleNo"),
          ItemUnitId: a.get("ItemUnitId"),
          Title: a.get("Description"),
          PerformedUserId: c ? e.getUserId() : null,
          PerformedDate: c
            ? _selectedDate && (TIME_MODE || DIARY_MODE)
              ? _selectedDate
              : new Date()
            : null,
          TimeId: TIME_MODE ? _currentTimeId : null,
          PlannedQty: null,
          UsedQty: c,
          Payoff: a.get("Payoff"),
          Chargeable: a.get("Chargeable"),
          ArticleCategoryId: a.get("ArticleCategoryId"),
        },
        Ext.getStore("MyWorkOrderRowStore").getModel()
      );
    if (a.getId() < 0) {
      b.set("PriceUnit", a.get("PriceUnit"));
      b.set("CostUnit", a.get("CostUnit"));
      b.set("CreditProjectId", a.get("CreditProjectId"));
    } else {
      b.set("ArticleId", a.get("ArticleId"));
    }
    return b;
  },
  onSaveList: function () {
    var a = this,
      b,
      g = a.getAttributeResourceId(),
      f = a.getAttributeFactoryPricelistId();
    if (
      (g.getHidden() == !1 && g.getRequired() && !g.getValue()) ||
      (f.getHidden() == !1 && f.getRequired() && !f.getValue())
    ) {
      Ext.Msg.alert(T("Mandatory"), T("Check mandatory fields."));
      return;
    }
    MEM.loadSpinner.show();
    try {
      if (TIME_MODE) {
        b = a.getTimeWorkOrderId().getValue();
      } else {
        if (DIARY_MODE) {
          b = a.getFavouriteWorkOrderId().getValue();
        } else {
          b = a.getWorkOrderId().getValue();
        }
      }
      var c = Ext.getStore("MyWorkOrderRowStore"),
        k = a.getFavoriteList(),
        e = a.getAttributeResourceId().getHidden()
          ? null
          : a.getAttributeResourceId().getValue(),
        d = a.getAttributeFactoryPricelistId().getHidden()
          ? null
          : a.getAttributeFactoryPricelistId().getValue(),
        h = [];
      for (var j in a.selectedfavorites) {
        var i = a.selectedfavorites[j];
        if (i) {
          h.push({ article: i.record, qty: i.qty });
        }
      }
      if (h.length == 0) {
        a.onCloseRowTap(b, _currentTimeId);
      }
      Ext.each(h, function (g) {
        var f = a.createRecord(g.article, b, g.qty);
        if (e && a.needResource(f)) {
          f.set("ResourceId", e);
        }
        if (d && a.needFactoryPricelist(f)) {
          f.set("FactoryPricelistId", d);
        }
        f.set("Id", -Math.abs(c.data.length));
        c.add(f);
      });
      if (e) {
        saveUserSetting(
          a.getApplication().getUserId(),
          "FavoriteResourceId",
          e
        );
      }
      if (d) {
        saveUserSetting(
          a.getApplication().getUserId(),
          "FavoriteFactoryPricelistId",
          d
        );
      }
      if (c.isNeedSync()) {
        c.on({
          scope: a,
          single: !0,
          write: function (d, c) {
            a.onCloseRowTap(b, _currentTimeId);
          },
        });
        c.sync();
      }
    } catch (l) {
      MEM.loadSpinner.hide(l);
    }
  },
  onTimeWOidChange: function (b, c) {
    var a = Ext.getStore("MyWorkOrderRowStore");
    if (b && Number(b) && c) {
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["WorkOrderId", "=", Number(b)]);
      a.meAddFilter(["TimeId", "=", c]);
      a.meAddFilter(["ShowInMobile", "=", !0]);
      a.load();
    } else {
      if (a.data.items.length > 0) {
        a.setSyncRemovedRecords(!1);
        a.removeAll();
      }
    }
  },
  onDiaryIdChange: function () {
    var a = Ext.getStore("MyCloneWorkOrderRowStore");
    if (_currentDiaryId) {
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["DiaryId", "=", _currentDiaryId]);
      a.meAddFilter(["ShowInMobile", "=", !0]);
      a.load();
    } else {
      if (a.data.items.length > 0) {
        a.setSyncRemovedRecords(!1);
        a.removeAll();
      }
    }
  },
  onWOidChange: function () {
    var a = Ext.getStore("MyWorkOrderRowStore"),
      b = this.getWorkOrderId() ? this.getWorkOrderId().getValue() : null;
    if (b && Number(b)) {
      a.clearFilter();
      a.meClearFilter();
      a.meAddFilter(["WorkOrderId", "=", Number(b)]);
      a.meAddFilter(["ShowInMobile", "=", !0]);
      a.load();
    } else {
      if (a.data.items.length > 0) {
        a.setSyncRemovedRecords(!1);
        a.removeAll();
      }
    }
  },
  onFilterProject: function (c, a) {
    var b = Ext.getStore("MyProjectListStore");
    b.clearFilter(!0);
    b.filterBy(function (b, d) {
      if (
        b.get("ProjectNo").indexOf(a) > -1 ||
        b.get("ProjectName").indexOf(a) > -1
      ) {
        return !0;
      }
      return !1;
    });
  },
  onArticleComboChange: function (c, d, e, f) {
    var a = this;
    if (d != 0 && d != e) {
      var b = c.getStore().findRecord(c.getValueField(), c.getValue());
      if (b) {
        a.getPayoff().setValue(b.get("Payoff"));
        a.getChargeable().setValue(b.get("Chargeable"));
        a.getArticleCategoryId().setValue(b.get("ArticleCategoryId"));
        a.getArticleid().setValue(a.getArticleId(b));
        a.getArticleno().setValue(b.get("ArticleNo"));
        a.getTitlefield().setValue(b.get("Description"));
        a.getItemunitid().setValue(b.get("ItemUnitId"));
        a.getAccountcombo().setValue(b.get("AccountNo"));
        if (c.element.isPainted()) {
          a.onArticleSelected(b);
          a.filterFactoryList(b);
        }
      }
    }
    if (d == 0 || a.getFetchtoggle().getValue() == 0) {
      a.getArticleid().setValue(null);
      a.getArticleno().setValue(null);
      a.getTitlefield().setValue(null);
      a.getItemunitid().setValue(1);
      a.getPayoff().setValue(!1);
      a.getChargeable().setValue(!0);
      a.getCostunitpricelist().setValue(null);
      a.getPriceunitpricelist().setValue(null);
      a.getPayoffunitpricelist().setValue(null);
      a.getArticleCategoryId().setValue(null);
    }
  },
  onArticleSelected: function (b, d) {
    if (b) {
      var c = this,
        a = Ext.getStore("MyArticleDataStore");
      a.meClearFilter();
      a.meAddFilter(["ArticleId", "=", parseInt(c.getArticleId(b))]);
      a.meAddFilter(["WorkOrderId", "=", c.getArticleworkorderId().getValue()]);
      a.keepvalues = d;
      a.load();
    }
  },
  onArticleDataLoaded: function (c, b, d) {
    var a = b[0];
    this.onShowPrices(a, c.keepvalues);
    this.getCostunitpricelist().setValue(a.get("CostUnitPricelist"));
    this.getPriceunitpricelist().setValue(a.get("PriceUnitPricelist"));
    this.getPayoffunitpricelist().setValue(a.get("PayoffUnitPricelist"));
  },
  onShowPrices: function (b, c) {
    var a = this;
    if (a.getApplication().userIsPartner()) {
      var d = !0;
      if (b && b.get("BasePriceUsed")) {
        d = !1;
        if (!c) {
          a.getPriceunit().setValue(b.get("PriceUnit"));
        }
        if (!b.get("Payoff") && !c) {
          a.getCostunit().setValue(b.get("CostUnit"));
        }
      }
      a.getPriceunit().setHidden(d);
      a.getCostunit().setHidden(!0);
    } else {
      a.getPriceunit().setHidden(!a.boolSetting("MEM.PriceUnit"));
      a.getCostunit().setHidden(!a.boolSetting("MEM.CostUnit"));
    }
  },
  onProjectIdChange: function (c, a, f) {
    var j = this,
      b = Ext.getStore("MyProjectLimitedStore"),
      i = !Ext.isNumeric(j.getWorkOrderId().getValue());
    if (!i && a && f) {
      var d = j.getWorkorderform().getRecord();
      if (d.get("ProjectId") && d.get("ProjectId") != a) {
        var e = c ? c.getStore() : null,
          g = e ? e.getById(a) : null,
          h = g ? g.get("Project") : null,
          k = h
            ? Ext.String.format(
                T("Workorder will be moved to '{0}'. Do you want to continue?"),
                h
              )
            : T("Workorder will be moved. Do you want to continue?");
        Ext.Msg.show({
          title: T("Confirmation"),
          message: k,
          buttons: [Ext.MessageBox.YES, Ext.MessageBox.NO],
          fn: function (b) {
            if (b != "yes") {
              c.setValue(d.get("ProjectId"));
            }
          },
        });
      }
    }
    if (parseInt(a, 10) > 0 && a != f) {
      b.meClearFilter();
      b.meAddFilter(["Id", "=", parseInt(a, 10)]);
      b.load({
        callback: function () {
          var e = Ext.getCmp("myWOCustomerId"),
            g = b.getAt(0);
          if (i && e) {
            var d = Ext.getStore("MyCustomerListStore");
            d.clearFilter();
            d.meClearFilter();
            d.meAddFilter(["Id", "=", parseInt(g.get("CustomerId"))]);
            d.load({
              callback: function (b, d, h) {
                e.setDisplayRecord(g);
                e.setValue(g.get("CustomerId"));
                e.setDisplayValue(b[0].get("CustomerName"));
              },
            });
          }
        },
      });
    }
  },
  onAddFile: function (h, g, d, f, e) {
    var c = this.getMynavigationview(),
      a = this.getFilePanel(),
      b = this.getWorkOrderId().getValue();
    if (!this.checkWOSaved(b)) {
      return;
    }
    if (!a) {
      a = MEM.app
        .getController("MEM.controller.MainMenu")
        .ensureSubPanel("File");
    }
    a.setWorkorderId(b);
    a.setProjectId(this.getMyWOProjectId().getValue());
    c.add(a);
  },
  onArticleSearch: function () {
    var d = this.getMynavigationview(),
      a = this.getArticleSearchPanel(),
      b = this.getFrameworkContractId().getRecord(),
      c;
    if (b && b.get("LimitArticles")) {
      c = Ext.create("MEM.store.MyFrameworkArticleItemStore", {
        storeId: "ArticleSearchPanel_MyArticleStore",
        type: "myframeworkarticleitemstorealias",
      });
      a.setFilters([["FrameworkContractId", "=", b.getId()]]);
    } else {
      c = Ext.create("MEM.store.MyArticleStore", {
        storeId: "ArticleSearchPanel_MyArticleStore",
        type: "myarticlestorealias",
      });
      a.setFilters([]);
    }
    a.setSearchStore(c);
    d.push(a);
  },
  onMyArticlesListItemTap: function (g, j, i, a, k, h) {
    var e = this.getMynavigationview(),
      d = this.getArticlecombo(),
      f = d.getStore(),
      b = a.get("ArticleCategoryId"),
      c = this.getArticleCategoryCombo().getValue();
    f.add(a);
    if (c && b != c) {
      this.getArticleCategoryCombo().setValue(b);
    }
    d.setValue(this.getArticleId(a));
    this.onArticleSelected(a);
    e.pop();
  },
  checkCheckList: function (b, g, f) {
    var h = this,
      e = Ext.getStore("MyWorkOrderStatusStore"),
      d = Ext.getStore("MyChecklistRowStore"),
      a,
      c = h.intSetting("MEM.WorkOrderStopCode");
    ret = !0;
    a = d.findRecord("Checked", !1);
    if (!Ext.isNumber(c)) {
      return ret;
    }
    e.each(function (d) {
      if (d.get("StatusCode") >= c && g == d.get("Id")) {
        if (a && a.getData() != null) {
          Ext.Msg.alert(
            T("Checklist"),
            T("Checklist must first be finished."),
            Ext.emptyFn
          );
          b.suspendEvents();
          b.setValue(f);
          b.resumeEvents();
          ret = !1;
          return !1;
        }
      }
    });
    return ret;
  },
  setFinished: function (c) {
    var a = this,
      b = Ext.getStore("MyWorkOrderStatusStore"),
      e,
      d = !0;
    b.each(function (b) {
      if (
        a.intSetting("MEM.SetEndDate") &&
        b.get("StatusCode") >= a.intSetting("MEM.WorkOrderEndCode") &&
        c == b.get("Id")
      ) {
        Ext.getCmp("myProductionEndClock").setValue(new Date());
      }
    });
    return d;
  },
  setGroupBy: function (d, h, b) {
    var c = this,
      g = Ext.getCmp("MyWorkOrderList"),
      e = c.getWorkorderIndexBar(),
      f,
      a;
    if (!b) {
      b = g.getStore();
    }
    if (e) {
      e.setHidden(d != 2);
    }
    switch (d) {
      case 1:
        b.setGrouper({
          groupFn: function (a) {
            if (a.get("ProductionStartWeekDay")) {
              return (
                a.get("ProductionStartWeekDay") +
                ", " +
                Ext.Date.format(
                  new Date(a.get("ProductionStartDateDisplay")),
                  Ext.util.Format.defaultDateFormat
                )
              );
            } else {
              return "";
            }
          },
          sortProperty: "ProductionStartDateDisplay",
        });
        b.setSorters([
          { property: "ProductionStart", direction: "ASC" },
          { property: "ProductionStartTimeDisplay", direction: "ASC" },
          { property: "WorkOrderStatusCode", direction: "ASC" },
          { property: "WorkOrderNo", direction: "ASC" },
        ]);
        a = c.stringSetting("MEM.WorkOrderDateFormat");
        if (!a) {
          a = "{p}, {pn}, {w} - {wn}";
        }
        break;
      case 2:
        b.setGrouper({
          groupFn: function (a) {
            return a.get("ProjectName") + ", " + a.get("ProjectNo");
          },
          sortProperty: "ProjectName",
        });
        b.setSorters([
          { property: "ProjectName", direction: "ASC" },
          { property: "WorkOrderStatusCode", direction: "ASC" },
          { property: "WorkOrderNo", direction: "ASC" },
        ]);
        a = c.stringSetting("MEM.WorkOrderListFormat");
        if (!a) {
          a = "{w}, {wn}";
        }
        break;
      default:
        b.setGrouper({
          groupFn: function (a) {
            return a.get("ProjectNo") + ", " + a.get("ProjectName");
          },
          sortProperty: "ProjectNo",
        });
        b.setSorters([
          { property: "ProjectNo", direction: "ASC" },
          { property: "WorkOrderStatusCode", direction: "ASC" },
          { property: "WorkOrderNo", direction: "ASC" },
        ]);
        a = c.stringSetting("MEM.WorkOrderListFormat");
        if (!a) {
          a = "{w}, {wn}";
        }
    }
    if (h) {
      c.applyFilter(
        d,
        b,
        c.stringSetting("StatusFinished"),
        c.getStartFilter(0)
      );
    }
    a = Me.templateRender(
      a,
      {
        p: "{ProjectNo}",
        pn: "{ProjectName}",
        w: "{WorkOrderNo}",
        wn: "{Name}",
        a: "{Addition}",
        t: "{ProductionStartTimeDisplay}",
        cn: "{CustomerName}",
      },
      "tpl"
    );
    f = Ext.String.format(
      '<div class="status-box" style="{[statusColor(values.WorkOrderStatusId)]}"></div>{[attachment(values.HaveDocument)]}<span class="WOlist-span"> {0} <span class="WOlist-date">{ProductionStartDate:date("' +
        Ext.util.Format.defaultDateFormat +
        '")}',
      a
    );
    g.setItemTpl(f);
    b.sort();
    saveUserSetting(c.getApplication().getUserId(), "MemGroupByDay", d);
  },
  applyFilter: function (e, a, c, b) {
    a.meClearFilter();
    a.clearFilter();
    switch (e) {
      case 1:
        a.filterBy(function (d) {
          if (b == "pool") {
            return !0;
          }
          if (b > 0) {
            return d.get("WorkOrderStatusId") == b;
          }
          return d.get("WorkOrderStatusCode") != c;
        }, a);
        break;
      default:
        a.filterBy(function (d) {
          var f = this,
            h = d.get("WorkOrderId"),
            g = f.findRecord("WorkOrderId", h, f.indexOf(d) + 1, !1, !1, !0);
          if (g != null) {
            return !1;
          }
          if (b == "pool") {
            return !0;
          }
          if (b > 0) {
            return d.get("WorkOrderStatusId") == b;
          }
          return d.get("WorkOrderStatusCode") != c;
        }, a);
    }
    var d = this.getWorkOrderList().getStore();
    if (!d || d != a) {
      this.getWorkOrderList().setStore(a);
    } else {
      this.getWorkOrderList().refresh();
    }
  },
  openSignature: function (d) {
    if (d != "workorder") {
      return;
    }
    var a = this,
      c = a.getMynavigationview(),
      b = a.getMysignaturepanel();
    c.push(b);
  },
  showEmailOverlay: function (d) {
    if (d != "workorder") {
      return;
    }
    var b = this,
      c = b.getMynavigationview(),
      a = b.getMyEmailOverlay();
    if (a.isHidden()) {
      a.show();
    } else {
      c.push(a);
    }
  },
  closeEmailOverlay: function () {
    this.getMyEmailOverlay().hide();
  },
  previewOrderSummary: function () {
    var a = this,
      h = a.getApplication(),
      j = a.getWorkOrderId().getValue(),
      d = a.getMyEmailOverlay(),
      b = d.getValues(),
      c = b.showPrice ? 1 : 0,
      f = b.showVat ? 1 : 0;
    var e = [
      {
        name: "meOrderSummary",
        displayname: T("WorkOrder"),
        workorderid: j,
        userid: h.getUserId(),
        showprice: c,
        showvat: f,
      },
    ];
    var g = { type: "pdf", json: Ext.JSON.encode({ report: e }) };
    var i = Me.API_URL + "getReport" + "?" + Ext.urlEncode(g);
    window.open(i);
  },
  sendOrderSummary: function () {
    var a = this,
      h = a.getApplication(),
      d = a.getWorkOrderId().getValue(),
      i = MEM.app.getController("AWO"),
      b = a.getMyEmailOverlay(),
      c = b.getValues(),
      f = c.showPrice ? 1 : 0,
      g = c.showVat ? 1 : 0,
      e = function (a) {
        return window.JSON && window.JSON.parse
          ? window.JSON.parse(a)
          : new Function("return " + a)();
      };
    b.hide();
    a.checkEmail(d, function (a) {
      if (a == "") {
        Ext.Msg.show({
          title: T("Mail"),
          message: T("No contact email found."),
        });
      } else {
        Ext.Msg.show({
          title: T("Mail"),
          message: T("Mail will be sent to:") + " " + a,
          buttons: Ext.MessageBox.OKCANCEL,
          fn: function (b) {
            if (b == Ext.MessageBox.OK.itemId) {
              Ext.Ajax.request({
                url: Me.API_URL + "sendOrderSummary",
                method: "POST",
                params: {
                  type: "json",
                  msgtype: "email",
                  workorderid: d,
                  userid: h.getUserId(),
                  showprice: f,
                  showvat: g,
                },
                success: function (d, f) {
                  var c = e(d.responseText);
                  if (c.success == !0) {
                    Ext.Msg.show({
                      title: T("Mail"),
                      message: T("Mail sent."),
                    });
                  } else {
                    Ext.Msg.show({ title: T("Mail"), message: c.errors });
                  }
                },
                failure: function (c, d) {
                  Ext.Msg.show({ title: T("Mail"), message: c.statusText });
                },
              });
            }
          },
        });
      }
    });
  },
  checkEmail: function (h, f) {
    var g = Ext.getStore("MyWorkOrderStore"),
      a = Ext.getStore("MyCustomerContactStore"),
      b = Ext.getStore("MyCustomerStore"),
      d = g.getAt(0).get("CustomerId"),
      e = g.getAt(0).get("CustomerAgentId"),
      c = "";
    if (e || d) {
      a.meClearFilter();
      a.meAddFilter(["CustomerId", "=", d]);
      a.meAddFilter(["Id", "=", e > 0 ? e : -1]);
      a.getProxy().getExtraParams().TableName = "WorkOrderStore";
      a.getProxy().getExtraParams().TableId = h;
      a.load({
        callback: function () {
          delete a.getProxy().getExtraParams().TableName;
          delete a.getProxy().getExtraParams().TableId;
          c = (a.data.length > 0 ? a.getAt(0).get("Email") : "") || "";
          if (c != "") {
            f(c);
          } else {
            b.meClearFilter();
            b.meAddFilter(["Id", "=", d == null ? -1 : d]);
            b.load({
              callback: function () {
                c = (b.data.length > 0 ? b.getAt(0).get("Email") : "") || "";
                f(c);
              },
            });
          }
        },
      });
    } else {
      f("");
    }
  },
  onStartEndChange: function (f, d, e) {
    var b = parseFloat(this.getStartqty().getValue()),
      c = parseFloat(this.getEndqty().getValue()),
      a = this.getUsedqty();
    if (b && c && a) {
      a.setValue(Math.abs(c - b));
    }
  },
  onSignatureOpen: function (y) {
    var s = this,
      g = s.getMysignaturepanel(),
      i = s.getWorkorderform(),
      x = i.getWorkOrderId(),
      k = g.getCanvas(),
      w = Ext.getStore("MyItemUnitStore"),
      l,
      d = 100,
      e = g.getLineWidth(),
      c = e - d,
      a = 0,
      h = 40,
      o = 0,
      p = 65,
      q = 300,
      r = 330,
      j = 390,
      t = 65 - 2,
      u = 235 - 2,
      v = 40 - 2,
      m = 60 - 2,
      n = e - j - 2,
      b = [];
    var f = Ext.create("MEM.store.MyWorkOrderRowStore");
    f.meAddFilter(["WorkOrderId", "=", x]);
    f.meAddFilter(["Invoiced", "=", !1]);
    f.meAddFilter(["Chargeable", "=", !0]);
    f.load({
      callback: function () {
        var z = this;
        l = 47 - Math.min(z.getCount(), 40);
        var s = function (a, b) {
          return new Array(Math.round(b) + 1).join(a);
        };
        var f = i.getRecord();
        var x = i
          .getFields("ProjectId")
          .getStore()
          .findRecord("Id", f.get("ProjectId"), 0, !1, !1, !0);
        var A = Me.string2Lines(f.get("WorkDescription"), c, !0, l, k);
        b.push({
          text: Ext.String.format(
            "{0} - {1}",
            T("Workorder summary").toUpperCase(),
            Ext.Date.dateFormat(new Date(), Ext.util.Format.defaultDateFormat)
          ),
          row: a++,
          header: !0,
        });
        b.push({ text: s("-", 65), row: a++, header: !0 });
        b.push({
          text: T("Project no"),
          row: a,
          header: !0,
          datafield: "title",
        });
        b.push({
          text: x.get("ProjectNo"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        b.push({
          text: T("Project name"),
          row: a,
          header: !0,
          datafield: "title",
        });
        b.push({
          text: x.get("ProjectName"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        b.push({ text: T("WO-no"), row: a, header: !0, datafield: "title" });
        b.push({
          text: f.get("WorkOrderNo"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        b.push({
          text: T("Workorder"),
          row: a,
          header: !0,
          datafield: "title",
        });
        b.push({
          text: f.get("Name"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        b.push({
          text: T("Description"),
          row: a,
          header: !0,
          datafield: "title",
        });
        b.push({
          text: f.get("WorkDescription"),
          row: a,
          width: c,
          header: !0,
          datafield: "value",
          suppress: !0,
        });
        A.forEach(function (e) {
          b.push({ text: e, row: a++, xpos: d, width: c, header: !1 });
        });
        b.push({ text: T("Customer"), row: a, header: !0, datafield: "title" });
        b.push({
          text: f.get("CustomerName"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        b.push({
          text: T("CustomerRefNo"),
          row: a,
          header: !0,
          datafield: "title",
        });
        b.push({
          text: f.get("CustomerRefNo"),
          row: a++,
          xpos: d,
          width: c,
          header: !0,
          datafield: "value",
        });
        a++;
        b.push({ text: T("Date"), row: a, xpos: o, datafield: "date" });
        b.push({ text: T("Title"), row: a, xpos: p, datafield: "title" });
        b.push({ text: T("Unit-short"), row: a, xpos: q, datafield: "unit" });
        b.push({
          text: T("Qty"),
          row: a,
          xpos: r,
          width: m,
          align: "right",
          datafield: "qty",
        });
        b.push({ text: T("Comment"), row: a++, xpos: j });
        b.push({ text: s("-", 184), row: a++ });
        z.each(function (c) {
          if (c.get("PerformedDate")) {
            b.push({
              text: Ext.Date.format(
                c.get("PerformedDate"),
                Ext.util.Format.defaultDateFormat.replace("Y", "y")
              ),
              row: a,
              xpos: o,
              width: t,
              datafield: "date",
            });
          }
          b.push({
            text: c.get("Title"),
            row: a,
            xpos: p,
            width: u,
            datafield: "title",
          });
          b.push({
            text: w
              .findRecord("Id", c.get("ItemUnitId"), 0, !1, !1, !0)
              .get("UnitName"),
            row: a,
            xpos: q,
            width: v,
            datafield: "unit",
          });
          b.push({
            text: Me.getFormattedNumeric(c.get("UsedQty") * c.get("Days")),
            row: a,
            xpos: r,
            width: m,
            align: "right",
            datafield: "qty",
          });
          if (c.get("Comment")) {
            var d = c.get("Comment"),
              f = Me.string2Lines(d, n, !0, 1, k);
            b.push({ text: d, row: a, datafield: "comment", suppress: !0 });
            b.push({ text: f[0], row: a++, xpos: j, width: n });
            if (d.length > f[0].length) {
              d = d.substr(f[0].length).trim();
              f = Me.string2Lines(d, e - h, !0, 5, k);
              f.forEach(function (d) {
                b.push({ text: d, row: a++, xpos: h, width: e - h });
              });
            }
          } else {
            a++;
          }
        });
        g.initImage(b);
      },
    });
  },
  onSignatureSave: function (a) {
    var d = this,
      h = Ext.getStore("MyWorkOrderDocumentStore"),
      b = d.getWorkorderform(),
      f = Ext.String.format(
        "{0} {1}",
        T("Signature"),
        Ext.Date.dateFormat(
          new Date(),
          Ext.util.Format.defaultDateFormat + " H:i:s"
        )
      ),
      e,
      g,
      i,
      c;
    if (!a || !b) {
      console.log("missing data");
      return;
    }
    switch (a.type) {
      case "image/png":
        e = "png";
        break;
      default:
        e = "jpg";
        break;
    }
    g = b.getFields("Id").getValue();
    c = Ext.ModelManager.create(
      {
        WorkOrderId: g,
        ProjectId: b.getFields("ProjectId").getValue(),
        Title: f,
        DocumentDescription: f,
        DocumentMimeType: a.type,
        DocumentSize: a.size,
        DocumentData: a.data,
        Filename: Ext.String.format("{0}.{1}", f.replace(/:/g, ""), e),
        ImageWidth: a.width,
        ImageHeight: a.height,
        HideInPDA: !1,
        EnlargeInReports: !0,
        IncludeInReport: !0,
        Id: null,
      },
      h.getModel()
    );
    c.setProxy(h.getProxy());
    c.setId(null);
    MEM.loadSpinner.show();
    c.save({
      success: function (c, f) {
        d.onSignatureSaved(b.getRecord(), c.getId());
        var e = d.getMynavigationview();
        MEM.loadSpinner.hide();
        e.pop();
        d.onEmailSignature(c.getId(), g);
      },
      failure: function () {
        MEM.loadSpinner.hide();
      },
    });
  },
  onEmailSignature: function (h, g) {
    var b = this,
      e = b.getMynavigationview(),
      f = b.getCustomercontactpanel(),
      c = b.getWorkorderform().getFields("CustomerId").getValue(),
      d = Ext.util.Filter({ property: "CustomerId", value: parseInt(c, 10) }),
      a = Ext.getStore("MyCustomerContactStore");
    a.meClearFilter();
    a.clearFilter();
    a.meAddFilter(d);
    a.getProxy().getExtraParams().TableName = "WorkOrderStore";
    a.getProxy().getExtraParams().TableId = g;
    a.load({
      callback: function () {
        delete a.getProxy().getExtraParams().TableName;
        delete a.getProxy().getExtraParams().TableId;
        var b = MEM.app.getController("CustomerContact");
        b.setMode("signature");
        b.setDocumentId(h);
        b.setCustomerId(c);
        e.push(f);
      },
    });
  },
  onUserSearch: function () {
    var a = this.getUserSearchpanel();
    a.setTargetField(this.getResponsibleserviceid());
    this.getMynavigationview().push(a);
  },
  onForemanSearch: function () {
    var a = this.getUserSearchpanel();
    a.setTargetField(this.getResponsibleForemanId());
    this.getMynavigationview().push(a);
  },
  onUserSelected: function (d, h, g, a, i, f) {
    var c = this,
      b = d.up("panel").getTargetField(),
      e = c.getMynavigationview();
    c.filterUsers(b, a.getId());
    b.setValue(a.getId());
    e.pop();
  },
  filterUsers: function (a, b) {
    var d = this;
    if (d.getApplication().userIsPartner()) {
      var e = d.getApplication().getUserRec().get("OrganizationalProjectId"),
        c = a.getStore();
      c.clearFilter(!0);
      c.filterBy(function (c, d) {
        return (
          (!c.get("Disabled") && c.get("OrganizationalProjectId") == e) ||
          b == d
        );
      });
    }
    if (a.getValue() != b) {
      a.setValue(b);
    }
  },
  onResourceSearch: function () {
    var a = this.getResourceSearchpanel();
    a.setTargetField(this.getResourceId());
    this.getMynavigationview().push(a);
  },
  onResourceSelected: function (d, h, g, a, i, f) {
    var c = this,
      b = d.up("panel").getTargetField(),
      e = c.getMynavigationview();
    c.filterResources(b, a.getId());
    b.setValue(a.getId());
    e.pop();
  },
  filterResources: function (a, b) {
    var d = this.getApplication().userIsPartner()
        ? this.getApplication().getUserRec().get("OrganizationalProjectId")
        : -1,
      c = a.getStore();
    c.clearFilter(!0);
    c.filterBy(function (c, e) {
      return (
        (!c.get("Disabled") && (c.get("CreditProjectId") == d || d == -1)) ||
        b == e
      );
    });
    if (a.getValue() != b) {
      a.setValue(b);
    }
  },
  filterFrameworkContract: function (e, d, b) {
    var f = this,
      a = f.getFrameworkContractId();
    if (a && !a.getHidden()) {
      var c = a.getStore();
      c.clearFilter();
      c.filterBy(function (a, c) {
        return (
          !a.get("Disabled") &&
          (!a.get("CustomerId") || a.get("CustomerId") == e)
        );
      });
      if (d) {
        a.setValue(null);
      } else {
        if (b) {
          a.setValue(b);
        }
      }
    }
  },
  filterCustomerContact: function (e, d, c) {
    var f = this,
      b = f.getCustomerContactId();
    if (b && !b.getHidden()) {
      var a = b.getStore();
      a.meClearFilter();
      a.clearFilter();
      a.meAddFilter({ property: "CustomerId", value: parseInt(e, 10) });
      a.meAddFilter({ property: "Disabled", value: !1 });
      a.load({
        callback: function () {
          if (d && !a.getById(c)) {
            b.setValue(null);
          } else {
            if (c) {
              b.setValue(c);
            }
          }
        },
      });
    }
  },
  setExternalStatusId: function (c, e) {
    var b = this,
      a = b.getWorkorderform().getRecord(),
      f = Ext.create("MEM.store.MyCustomerStore"),
      h = b.getCustomerContactId().getStore();
    var g = function (d, g, f) {
      a.set("ExternalWorkOrderStatusId", f);
      d.fetchWorkOrderStatus(a);
      var b = Ext.getStore("MyExternalWorkOrderStatusStore").getById(
        a.get("ExternalWorkOrderStatusId")
      );
      d.getExternalStatusName().setValue(b ? b.get("StatusName") : "");
    };
    if (a) {
      if (e) {
        var d = h.findRecord("Id", e);
        if (d && d.get("DefaultExternalWorkOrderStatusId")) {
          g(b, a, d.get("DefaultExternalWorkOrderStatusId"));
          return;
        }
      }
      if (!c) {
        c = b.getWorkorderform().getCustomerId();
      }
      f.meAddFilter(["Id", "=", parseInt(c)]);
      f.load({
        callback: function (f, h, i) {
          var d;
          if (f.length) {
            d = f[0].get("DefaultExternalWorkOrderStatusId");
          }
          g(b, a, d);
        },
        scope: this,
      });
    }
  },
  fetchWorkOrderStatus: function (b) {
    var c = this,
      a = c.getStatusField();
    a.suspendEvents();
    a.getStore().fetchData(
      b.get("WorkOrderStatusId"),
      b.get("ExternalWorkOrderStatusId")
    );
    a.resumeEvents();
  },
  loadSelectStores: function () {
    var a = this;
    a.loadSelectStore(a.getCreatedid());
    a.loadSelectStore(a.getResponsibleserviceid());
    a.loadSelectStore(a.getFrameworkContractId());
    a.loadSelectStore(a.getServiceCategoryId());
    a.loadSelectStore(a.getArticleCategoryCombo());
  },
  loadRowSelectStores: function () {
    var b = this,
      a,
      c = b.getArticlecombo(),
      d = b.getFrameworkContractId().getRecord();
    if (d && d.get("LimitArticles")) {
      if (
        c.getStore().getStoreId() !=
        "WorkOrderRowForm_MyFrameworkArticleItemStore"
      ) {
        a = Ext.getStore("WorkOrderRowForm_MyFrameworkArticleItemStore");
        if (!a) {
          a = Ext.create("MEM.store.MyFrameworkArticleItemStore", {
            storeId: "WorkOrderRowForm_MyFrameworkArticleItemStore",
            meFilters: [["ShowInPDA", "=", !0]],
            type: "myframeworkarticleitemstorealias",
          });
        }
        c.setStore(a);
      }
      b.loadSelectStore(c, { field: "FrameworkContractId", value: d.getId() });
    } else {
      if (c.getStore().getStoreId() != "WorkOrderRowForm_MyArticleStore") {
        a = Ext.getStore("WorkOrderRowForm_MyArticleStore");
        if (!a) {
          a = Ext.create("MEM.store.MyArticleStore", {
            storeId: "WorkOrderRowForm_MyArticleStore",
            meFilters: [["ShowInPDA", "=", !0]],
            type: "myarticlestorealias",
          });
        }
        c.setStore(a);
        b.loadSelectStore(c);
      }
    }
    b.loadSelectStore(b.getFactoryPricelistId());
    b.loadSelectStore(b.getResourceId(), null, !0);
  },
  loadSelectStore: function (d, b, e) {
    if (d && !d.getHidden()) {
      var a = d.getStore();
      if (b) {
        var c = a.getFilters();
        if (c && c.length > 0) {
          var g = c[0].getValue();
          if (g == b.value) {
            return;
          }
          a.meRemoveFilterByField(b.field);
        }
        var f = [{ property: b.field, value: b.value }];
        if (e) {
          f.push({ property: "Disabled", value: !1 });
        }
        a.clearFilter(!0);
        a.filter(f);
        a.meAddFilter([b.field, "=", b.value]);
        if (e) {
          a.meAddFilter(["Disabled", "=", !1]);
        }
      } else {
        if (a.isLoaded()) {
          return;
        }
      }
      a.load();
    }
  },
  onToggleList: function (c, a, d) {
    var b = this.getStartFilter(0);
    if (a == 1 && b == "pool") {
      this.getStatusButtons().setPressedButtons(0);
    }
    this.filter(this.getStartFilter(0));
  },
  getStoreForList: function (a) {
    if (a == "pool") {
      return Ext.getStore("MyUserPoolWorkOrderListStore");
    } else {
      if (this.getTogglelist().getValue() == 1) {
        return Ext.getStore("MyOrganisationWorkOrderListStore");
      } else {
        return Ext.getStore("MyUserWorkOrderListStore");
      }
    }
  },
  addWorkOrderListFilter: function (a) {
    a.meClearFilter();
    a.clearFilter(!0);
    a.meAddFilter(["ProjectStatusCode", ">=", STATUS_NOTED]);
    a.meAddFilter(["ProjectStatusCode", "<", STATUS_FINISHED]);
    a.meAddFilter(["Addition", "=", !1]);
    if (this.PROJECT_MODE) {
      a.meAddFilter(["ProjectId", "=", CURRENT_PROJECTID]);
    }
  },
  onCopyWorkOrder: function (f) {
    if (f != "workorder") {
      return;
    }
    var a = this,
      c = a.getWorkorderform(),
      g = c.getRecord(),
      b = c.getValues(),
      d = parseInt(b.Id, 10),
      e = b.ProjectId;
    Ext.Msg.show({
      title: T("Copy"),
      message: T("Copy this workorder?"),
      buttons: Ext.MessageBox.OKCANCEL,
      fn: function (b) {
        if (b == Ext.MessageBox.OK.itemId) {
          MEM.loadSpinner.showSpinner("copyworkorder");
          Ext.Ajax.request({
            url: Me.API_URL + "copyWorkOrder",
            headers: { "Content-Type": "application/x-www-form-urlencoded" },
            params: {
              json: Ext.JSON.encode({ projectid: e, workorderlist: [d] }),
              type: "json",
            },
            success: function (h, i) {
              var d = Ext.decode(h.responseText),
                e = d.rows.length > 0 ? parseInt(d.rows[0].WorkOrderId, 10) : 0,
                c = Ext.getStore("MyWorkOrderStore"),
                g = a.getWorkorderform();
              c.meClearFilter();
              c.meAddFilter(["Id", "=", e]);
              c.load({
                callback: function (d) {
                  if (d.length == 0) {
                    MEM.loadSpinner.hideSpinner("copyworkorder");
                    Ext.Msg.alert(
                      T("No item."),
                      T("Selected item not found. Please check connection.")
                    );
                    return;
                  }
                  var j = a.stringSetting("WorkOrderStatusDistribute");
                  if (j) {
                    var l = Ext.getStore("MyCloneWorkOrderStatusStore"),
                      k = l.findRecord("StatusCode", j);
                    if (k) {
                      c.getById(d[0].getId()).set(
                        "WorkOrderStatusId",
                        k.getId()
                      );
                      c.sync();
                    }
                  }
                  g.reset();
                  g.setRecord(d[0]);
                  a.filterWorkOrderRows(e);
                  MEM.loadSpinner.hideSpinner("copyworkorder");
                },
              });
            },
            failure: function (a, c) {
              MEM.loadSpinner.hideSpinner("copyworkorder");
              console.log("server-side failure with status code " + a.status);
            },
          });
        }
      },
    });
  },
  setPosition: function () {
    var a = this;
    var b = Ext.create("Ext.util.Geolocation", {
      autoUpdate: !1,
      allowHighAccuracy: !0,
      listeners: {
        locationupdate: function (c) {
          MEM.loadSpinner.hide();
          var b = CoordinateConverter.geoToGrid("rt90", {
            lat: c.getLatitude(),
            lon: c.getLongitude(),
          });
          a.getGpsX().setValue(b.x.toFixed());
          a.getGpsY().setValue(b.y.toFixed());
          a.getMapButton().setHidden(!a.getGpsX().getValue());
        },
        locationerror: function (e, c, b, d, a) {
          MEM.loadSpinner.hide();
          var f = a;
          if (c) {
            a = "Timeout occurred";
          } else {
            if (b) {
              a = T(
                "Webpage does not have access to location, please check settings for:<br/>* location enabled<br/>* webpage has access to location"
              );
            }
          }
          Ext.Msg.show({ title: T("Position"), message: a });
        },
      },
    });
    Ext.Msg.show({
      title: T("Fetch position"),
      message: T("Position will be updated. OK?"),
      buttons: [Ext.MessageBox.YES, Ext.MessageBox.NO],
      fn: function (a) {
        if (a == "yes") {
          MEM.loadSpinner.show(T("Searching..."));
          try {
            b.updateLocation();
          } catch (c) {
            MEM.loadSpinner.hide();
          }
        }
      },
    });
  },
  sendStatusMail: function () {
    var b = this,
      g = b.getMynavigationview(),
      h = b.getCustomercontactpanel(),
      e = b.getWorkorderform(),
      d = e.getRecord(),
      c = b.getWorkorderform().getCustomerId(),
      f = Ext.util.Filter({ property: "CustomerId", value: parseInt(c, 10) }),
      a = Ext.getStore("MyCustomerContactStore");
    a.meClearFilter();
    a.clearFilter();
    a.meAddFilter(f);
    a.getProxy().getExtraParams().TableName = "WorkOrderStore";
    a.getProxy().getExtraParams().TableId = d.get("Id");
    a.load({
      callback: function () {
        delete a.getProxy().getExtraParams().TableName;
        delete a.getProxy().getExtraParams().TableId;
        var d = MEM.app.getController("CustomerContact");
        d.setMode("statusmail");
        d.setWorkorderId(b.getWorkorderform().getWorkOrderId());
        d.setCustomerId(c);
        g.push(h);
      },
    });
  },
  setRequiredFields: function (b, a) {
    var c = this;
    b.getItems().each(function (d) {
      c.setRequiredField(d, a);
    });
  },
  setRequiredField: function (a, b) {
    var c = this;
    if (
      Ext.isFunction(a.getName) &&
      !Me.formValidateAllowBlank(b, a.getName())
    ) {
      a.setRequired(!0);
    } else {
      if (a.items && a.items.getCount()) {
        a.items.each(function (d) {
          c.setRequiredField(d, b);
        });
      }
    }
  },
  setRequired: function () {
    var a = this,
      c = a.getWorkorderrowform().getRecord(),
      b = a.getAccountcombo().getRecord(),
      e = a.needResource(
        c,
        b,
        a.getUsedqty().getValue(),
        a.getPayoff().getValue() === "true"
      ),
      d = a.needFactoryPricelist(
        c,
        b,
        a.getUsedqty().getValue(),
        a.getPayoff().getValue() === "true"
      );
    a.getFactoryPricelistId().setRequired(d);
    a.getResourceId().setRequired(e);
  },
  needResource: function (c, a, b, d) {
    if (!Ext.isDefined(d)) {
      d = c.get("Payoff");
    }
    if (!c || !d) {
      return !1;
    }
    if (!a) {
      a = Ext.getStore("MyAccountChartStore").findRecord(
        "AccountNo",
        c.get("AccountNo")
      );
    }
    if (!Ext.isDefined(b)) {
      b = c.get("UsedQty");
    }
    if (!a || !a.get("Material")) {
      return b != 0 && b != null;
    }
    return !1;
  },
  needFactoryPricelist: function (b, a, c, d) {
    if (!Ext.isDefined(d)) {
      d = b.get("Payoff");
    }
    if (!b || !d) {
      return !1;
    }
    if (!a) {
      a = Ext.getStore("MyAccountChartStore").findRecord(
        "AccountNo",
        b.get("AccountNo")
      );
    }
    if (!Ext.isDefined(c)) {
      c = b.get("UsedQty");
    }
    if (a && a.get("Material") && c) {
      return !0;
    }
    return !1;
  },
  onSpinnerChange: function (h, o, d, m, n) {
    var a = this,
      e = parseFloat(m),
      c = a.getAttributeResourceId(),
      b = a.getAttributeFactoryPricelistId();
    if (!e) {
      if (!c.getHidden() || !b.getHidden()) {
        var l = h,
          g = !1,
          f = !1;
        Ext.each(l.getViewItems(), function (b) {
          g =
            g || a.needResource(b.getRecord(), null, b.getSpinner().getValue());
          f =
            f ||
            a.needFactoryPricelist(
              b.getRecord(),
              null,
              b.getSpinner().getValue()
            );
        });
        c.setRequired(g);
        c.setHidden(!g);
        b.setRequired(f);
        b.setHidden(!f);
      }
    }
    var i = a.selectedfavorites[d.get("ArticleId")];
    if (i && e == 0) {
      delete a.selectedfavorites[i.record.get("ArticleId")];
    } else {
      if (i || e) {
        a.selectedfavorites[d.get("ArticleId")] = { record: d, qty: e };
      }
    }
    if (
      c.getHidden() &&
      !Me.formValidateHidden("WorkOrderRowStore", "ResourceId") &&
      a.needResource(d, null, e, d.get("Payoff"))
    ) {
      var k = getUserSetting("FavoriteResourceId");
      c.getStore().on({
        scope: a,
        single: !0,
        load: function () {
          c.setValue(parseInt(k, 10));
          a.onAttributeChange(h);
        },
      });
      c.setHidden(!1);
      c.setRequired(!0);
      a.loadSelectStore(
        c,
        {
          field: "CreditProjectId",
          value: this.getApplication()
            .getUserRec()
            .get("OrganizationalProjectId"),
        },
        !0
      );
    }
    if (
      b.getHidden() &&
      !Me.formValidateHidden("WorkOrderRowStore", "FactoryPricelistId") &&
      a.needFactoryPricelist(d, null, e, d.get("Payoff"))
    ) {
      var j = getUserSetting("FavoriteFactoryPricelistId");
      b.getStore().on({
        scope: a,
        single: !0,
        load: function () {
          b.setValue(parseInt(j, 10));
          a.onAttributeChange(h);
        },
      });
      b.setHidden(!1);
      b.setRequired(!0);
      a.loadSelectStore(b);
    }
    a.onAttributeChange(h);
  },
  onAttributeChange: function (e) {
    var c = this,
      d = e.up("panel").down("#saveButton"),
      b = c.getAttributeResourceId(),
      a = c.getAttributeFactoryPricelistId();
    d.setDisabled(
      (!b.getHidden() && !b.getValue()) || (!a.getHidden() && !a.getValue())
    );
  },
  filterFactoryList: function (c) {
    var a = this,
      b = a.getFactoryPricelistId();
    if (b && !b.getHidden()) {
      if (!a.factoryArticleItemStore) {
        a.factoryArticleItemStore = Ext.create(
          "MEM.store.MyFactoryArticleItemStore",
          {
            storeId: null,
            buffered: !1,
            remoteSort: !1,
            remoteFilter: !0,
            pageSize: 0,
          }
        );
      }
      a.factoryArticleItemStore.meClearFilter();
      a.factoryArticleItemStore.meAddFilter([
        "ArticleId",
        "=",
        a.getArticleId(c),
      ]);
      a.factoryArticleItemStore.load({
        callback: function (g, f, h) {
          var e = b.getStore(),
            d = [];
          a.factoryArticleItemStore.each(function (a) {
            d.push(a.get("FactoryPricelistId"));
          });
          e.clearFilter();
          e.filterBy(function (a, b) {
            return d.indexOf(a.getId()) >= 0;
          });
          if (d.indexOf(b.getValue()) < 0) {
            b.setValue(null);
          }
        },
      });
    }
  },
  onExternalStatusComment: function (d) {
    var b = this,
      c = b.getTextAreaOverlay(),
      a = b.getWorkorderform().getRecord();
    c.initOverlay(a, a.get("ExternalStatusComment"), !0, d, "");
  },
  getArticleId: function (a) {
    if (a.modelName == "MEM.model.WorkOrderRow") {
      var d = this.getArticlecombo().getStore(),
        c = d.findRecord("ArticleNo", a.get("CodeNo"));
      if (c) {
        return c.get("Id");
      }
      return null;
    }
    var b = this.getFrameworkContractId().getRecord();
    if (b && b.get("LimitArticles")) {
      return a.get("ArticleId");
    }
    return a.getId();
  },
  showPosition: function () {
    var a = this,
      b = Ext.getStore("MyWorkOrderLocationStore");
    var c = function () {
      var b = a.getMymappanel();
      b.me_viewstate = "single_workorder";
      a.navigateToPanel(a.getMynavigationview(), a.getMymappanel());
    };
    b.meClearFilter();
    b.clearFilter();
    b.meAddFilter([
      "ProjectId",
      "=",
      parseInt(Ext.getCmp("myWOProjectId").getValue(), 10),
    ]);
    b.meAddFilter(["Id", "=", parseInt(a.getWorkOrderId().getValue(), 10)]);
    a.onWOSave(!1, c);
  },
  checkSignOnSite: function (c) {
    var b = this.getMynavigationview().down("button[action=signature]"),
      a = this.getWorkorderform().down("button[action=signature]");
    if (c.get("SignOnSite")) {
      b.addCls("highlight");
      a.addCls("highlight");
      a.setHidden(!1);
    } else {
      b.removeCls("highlight");
      a.removeCls("highlight");
      a.setHidden(!0);
    }
  },
  onSignatureSaved: function (a, d) {
    var e = this,
      f = Ext.getStore("MyExternalWorkOrderStatusStore");
    if (a.get("ExternalWorkOrderStatusId")) {
      var c = f.findRecord("IsSignatureStatus", !0);
      if (c) {
        if (!a.getProxy()) {
          a.setProxy(Ext.getStore("MyWorkOrderStore").getProxy());
        }
        if (a.get("ExternalWorkOrderStatusId") == c.getId()) {
          a.set("WorkOrderDocumentId", d);
          a.save();
          return;
        }
        var b = Ext.create("MEM.store.MyWorkOrderStatusRelationsStore");
        b.load({
          callback: function (h, g, i) {
            b.clearFilter(!0);
            b.filter([
              { property: "ExternalWorkOrderStatusId", value: c.getId() },
              {
                property: "WorkOrderStatusId",
                value: a.get("WorkOrderStatusId"),
              },
              { property: "AllowExternal", value: !0 },
            ]);
            if (b.getCount()) {
              a.set("ExternalWorkOrderStatusId", c.getId());
              a.save();
            } else {
              b.clearFilter(!0);
              b.filter([
                { property: "ExternalWorkOrderStatusId", value: c.getId() },
                { property: "AllowExternal", value: !0 },
              ]);
              if (b.getCount() == 1) {
                var f = b.data.getAt(0).get("WorkOrderStatusId");
                b.clearFilter(!0);
                b.filter([
                  {
                    property: "ExternalWorkOrderStatusId",
                    value: a.get("ExternalWorkOrderStatusId"),
                  },
                  { property: "WorkOrderStatusId", value: f },
                  { property: "RequireExternal", value: !0 },
                ]);
                if (b.getCount() == 1) {
                  a.set("WorkOrderStatusId", f);
                  a.save({
                    success: function (j, b) {
                      e.getStatusField().setValue(f);
                      a.set("ExternalWorkOrderStatusId", c.getId());
                      a.set("WorkOrderDocumentId", d);
                      a.save();
                    },
                  });
                }
              }
            }
          },
          scope: e,
        });
      }
    }
  },
  loadProjectStore: function (c, b) {
    var a = Ext.getStore("MyProjectLimitedStore");
    a.clearFilter();
    a.meClearFilter();
    a.meAddFilter(["Id", "=", c]);
    a.load(function () {
      if (b) {
        b(a.getAt(0));
      }
    });
  },
  checkProject: function () {
    var c = this,
      d = Ext.getStore("MyProjectLimitedStore"),
      b = d.getAt(0),
      a = c.getWorkorderform().getProjectId();
    if (b && b.get("Id") != a) {
      c.loadProjectStore(a);
    }
  },
  applyFilterDisabled: function (b, c) {
    var a = this.getStatusButtons();
    if (a) {
      a.setDisabled(b);
    }
  },
  filterProjectStore: function (c) {
    var d = this.getMyWOProjectId().getStore(),
      c = c || this.getWorkorderform().getProjectId(),
      b = this.intSetting("MobileProjectStatusCodeMin"),
      a = this.intSetting("MobileProjectStatusCodeMax");
    d.clearFilter(!0);
    if (isNaN(b)) {
      b = 0;
    }
    if (isNaN(a)) {
      a = 0;
    }
    d.filterBy(function (d, e) {
      return (
        c == e ||
        ((b == 0 || d.get("StatusCode") >= b) &&
          (a == 0 || d.get("StatusCode") <= a))
      );
    });
  },
  ensureProject: function (d, b, c) {
    if (d && Ext.isFunction(d.getStore)) {
      var e = this,
        a = d.getStore();
      a.clearFilter();
      a.meClearFilter();
      MEM.app.getController("Project").addStatusFilter(a, !0);
      if (b && !a.findRecord("Id", b)) {
        a.on({
          single: !0,
          scope: this,
          load: function () {
            if (!a.findRecord("Id", b)) {
              e.loadProjectStore(b, function (f) {
                f.set("isTmpRec", !0);
                var g = Ext.ModelManager.create(
                  f.data,
                  e.getMyWOProjectId().getStore().getModel()
                );
                a.add(g);
                c();
              });
            } else {
              c();
            }
          },
        });
        a.load();
      } else {
        c();
      }
    } else {
      c();
    }
  },
  checkCurrentStatus: function (f) {
    var c = this,
      a = !1,
      b = c
        .getStatusField()
        .getStore()
        .findRecord("Id", f.get("WorkOrderStatusId"));
    if (!b || b.get("TempRec")) {
      a = !0;
    } else {
      var e = c.intSetting("MobileWorkOrderStatusCodeMin"),
        d = c.intSetting("MobileWorkOrderStatusCodeMax");
      if (e > 0 && b.get("StatusCode") < e) {
        a = !0;
      } else {
        if (d > 0 && b.get("StatusCode") > d) {
          a = !0;
        }
      }
    }
    c.getWorkorderform().setIsReadOnly(a);
  },
  onWorkOrderRowLoaded: function (c, a, b) {
    if (this.getWorkorderform().getIsReadOnly()) {
      a.forEach(function (d) {
        d.set("ParentIsReadOnly", !0);
        d.set("Locked", !0);
      });
    }
  },
  checkWOSaved: function (a) {
    if (parseInt(a, 10) != a) {
      Ext.Msg.alert(
        T("Save"),
        T("Workorder must be saved first."),
        Ext.emptyFn
      );
      return !1;
    }
    return !0;
  },
  storeIsReady: function (a, c, d, b) {
    return (
      a &&
      a.meGetFilterValue(c) == d &&
      a.isLoaded() &&
      (!b || a.findRecord("Id", b))
    );
  },
});
Ext.Loader.setConfig({ enabled: !0 });
Ext.getHead().append = function (b) {
  var a = b;
  if (a.name == "apple-mobile-web-app-capable") {
    a.content = "no";
  }
  this.appendChild.apply(this, arguments);
};
Ext.application({
  name: "MEM",
  views: ["MyViewport"],
  controllers: [
    "AWO",
    "Common",
    "Customer",
    "CustomerContact",
    "Diary",
    "Economy",
    "File",
    "InfoMessage",
    "Login",
    "MainMenu",
    "Map",
    "Project",
    "Time",
    "WorkOrder",
  ],
  stores: [
    "MyAccountChartStore",
    "MyAdditionalWorkOrderRowStore",
    "MyAdditionalWorkOrderStatusStore",
    "MyAdditionalWorkOrderStore",
    "MyArticleCustomerStore",
    "MyArticleCategoryStore",
    "MyArticleDataStore",
    "MyArticleStore",
    "MyChecklistDiaryStore",
    "MyChecklistRowStore",
    "MyConstructionTypeStore",
    "MyCostStore",
    "MyCurrencyStore",
    "MyCustomerContactStore",
    "MyCustomerListStore",
    "MyCustomerPricelistItemStore",
    "MyCustomerStore",
    "MyCustomerTypeStore",
    "MyDiaryStore",
    "MyExternalWorkOrderStatusStore",
    "MyFactoryPricelistStore",
    "MyFactoryArticleItemStore",
    "MyFrameworkContractStore",
    "MyFrameworkArticleItemStore",
    "MyFormValidationStore",
    "MyGroupStore",
    "MyHourlyRate2Store",
    "MyHourlyRateStore",
    "MyInfoMessageStore",
    "MyInfoNoteStore",
    "MyInvoiceRowStore",
    "MyInvoiceStore",
    "MyItemUnitStore",
    "MyMainMenuStore",
    "MyMarkupModelItemStore",
    "MyMarkupModelStore",
    "MyMonthTimeStore",
    "MyOptionValueStore",
    "MyOfficeCompanyStore",
    "MyPhraseStore",
    "MyPriceTypeStore",
    "MyProfessionItemStore",
    "MyProject4WorkOrderStore",
    "MyProjectEconomyBudgetStore",
    "MyProjectEconomyStore",
    "MyProjectListStore",
    "MyProjectManagerStore",
    "MyProjectOverviewStore",
    "MyProjectPricelistItemStore",
    "MyProjectPricelistStore",
    "MyProjectStatusHistoryStore",
    "MyProjectArchiveListStore",
    "MyProjectStore",
    "MyProjectTreeStore",
    "MyProjectTypeStore",
    "MyResourceStore",
    "MyRevenueStore",
    "MySettingStore",
    "MyServiceCategoryStore",
    "MyStaffListStore",
    "MyStatusHistoryStore",
    "MyTagStore",
    "MyTimeStore",
    "MyUserPoolWorkOrderListStore",
    "MyOrganisationWorkOrderListStore",
    "MyUserProjectWorkOrderListStore",
    "MyUserRightStore",
    "MyUserAccessStore",
    "MyUserSessionStore",
    "MyUserSettingStore",
    "MyUserListStore",
    "MyMobileUserTimeStore",
    "MyUserWorkOrderListStore",
    "MyVatStore",
    "MyWorkleaderStore",
    "MyWorkOrderAssignedLocationStore",
    "MyWorkOrderDocumentStore",
    "MyWorkOrderListStore",
    "MyWorkOrderLocationStore",
    "MyWorkOrderRowStore",
    "MyWorkOrderStatusStore",
    "MyWorkOrderStatusRelationsStore",
    "MyWorkOrderStore",
    "LocalWorkOrderStatusStore",
  ],
  icon: {
    57: "resources/icons/Icon.png",
    72: "resources/icons/Icon~ipad.png",
    114: "resources/icons/Icon@2x.png",
    144: "resources/icons/Icon~ipad@2x.png",
  },
  isIconPrecomposed: !0,
  startupImage: {
    "320x460": "resources/startup/320x460.jpg",
    "640x920": "resources/startup/640x920.png",
    "768x1004": "resources/startup/768x1004.png",
    "748x1024": "resources/startup/748x1024.png",
    "1536x2008": "resources/startup/1536x2008.png",
    "1496x2048": "resources/startup/1496x2048.png",
  },
  launch: function () {
    var d = this;
    if (isPhone) {
      Ext.getBody().addCls("mephone");
      if (PREVENT_ZOOM_CSS_REQUIRED) {
        Ext.getBody().addCls("smallScreen");
      }
      if (IS_IOSgt9) {
        Ext.getBody().addCls("iosgt9");
      }
    } else {
      Ext.getBody().addCls("metablet");
    }
    if (IS_IOSgt10) {
      var e = document.querySelectorAll('meta[name="viewport"]');
      e.forEach(function (a) {
        a.setAttribute(
          "content",
          a.getAttribute("content") + ", viewport-fit=contain"
        );
      });
    }
    history.pushState({}, {});
    d.doLeave = !1;
    window.addEventListener("popstate", function () {
      d.onPopState();
    });
    window.onload = function () {
      if (navigator.onLine) {
        online();
      } else {
        offline();
      }
      window.addEventListener("online", online, !1);
      window.addEventListener("offline", offline, !1);
    };
    function online() {
      Ext.Viewport.setMasked(!1);
    }
    function offline() {
      Ext.Viewport.setMasked({
        id: "myConnectionMask",
        xtype: "loadmask",
        message: T("No network connection."),
        indicator: !1,
      });
    }
    function onBeforeAbsenceLoad(b) {
      var a = getAbsenceProjectId();
      b.meAddFilter(["Id", "=", a]);
    }
    function onBeforeFilteredProjectStoreLoad(c) {
      var b = Ext.getStore("MyOptionValueStore");
      c.setSorters([{ property: "StatusCode", direction: "ASC" }]);
      if (b.findRecord("SettingKey", "MobileProjectStatusCodeMax")) {
        var a = parseInt(
          b
            .findRecord("SettingKey", "MobileProjectStatusCodeMax")
            .get("SettingValue"),
          10
        );
        if (isNaN(a)) {
          a = STATUS_FINISHED;
        }
        c.meAddFilter(["StatusCode", "<=", a]);
      }
    }
    function onBeforeProjectArchiveStoreLoad(c) {
      var b = Ext.getStore("MyOptionValueStore");
      if (b.findRecord("SettingKey", "MobileProjectStatusCodeMax")) {
        var a = parseInt(
          b
            .findRecord("SettingKey", "MobileProjectStatusCodeMax")
            .get("SettingValue"),
          10
        );
        if (isNaN(a)) {
          a = STATUS_FINISHED;
        }
        c.meAddFilter(["StatusCode", ">", a]);
      }
    }
    Ext.override(Ext.data.Connection, {
      getXhrInstance: function () {
        var c = this,
          a = c.callOverridden(),
          b = c.onProgress.bind(c);
        a.upload.addEventListener("loadstart", b);
        a.upload.addEventListener("load", b);
        a.upload.addEventListener("loadend", b);
        a.upload.addEventListener("progress", b);
        a.upload.addEventListener("error", b);
        a.upload.addEventListener("abort", b);
        return a;
      },
      onProgress: function (a) {
        this.fireEvent("progress", a);
      },
    });
    Ext.Ajax.on("requestcomplete", function (e, b, c) {
      try {
        var a,
          d = c.operation;
        if (d && d.config && d.config.ignoreErrors) {
          return;
        }
        if (b == undefined) {
          MEM.loadSpinner.hide();
          Ext.Msg.alert("Error", "Info: No response", Ext.emptyFn);
          return;
        } else {
          if (b.responseText == undefined) {
            MEM.loadSpinner.hide();
            Ext.Msg.alert("Error", "Info: No responseText", Ext.emptyFn);
            return;
          }
        }
        if (c.meResponseType == undefined || c.meResponseType != "html") {
          MEM.loadSpinner.hide();
          a = Ext.decode(b.responseText);
          if (a && a.success != undefined && !a.success) {
            Ext.Msg.alert("Error", "Info: " + a.errors, Ext.emptyFn);
          }
        }
      } catch (f) {
        MEM.loadSpinner.hide();
        Ext.Msg.alert(
          "Error",
          "Info: " + f.toString().substring(0, 255),
          Ext.emptyFn
        );
      }
    });
    var c = [
      {
        store: "MyUserProjectWorkOrderListStore",
        name: "MyCloneWorkOrderListStore",
        options: {
          sorters: [
            { property: "Addition", direction: "ASC" },
            { property: "BasicScope", direction: "DESC" },
            { property: "FullName", direction: "ASC" },
            { property: "WorkOrderNo", direction: "ASC" },
          ],
        },
      },
      {
        store: "MyWorkOrderListStore",
        name: "MyCloneWAbsenceWorkOrderListStore",
        options: {
          sorters: [
            { property: "Addition", direction: "ASC" },
            { property: "BasicScope", direction: "DESC" },
            { property: "FullName", direction: "ASC" },
            { property: "WorkOrderNo", direction: "ASC" },
          ],
        },
      },
      {
        store: "MyMobileUserTimeStore",
        name: "MyCloneUserTimeStore",
        options: {
          validations: [{ type: "format", name: "Hours", matcher: /[0-9]+/ }],
        },
      },
      {
        store: "MyProfessionItemStore",
        name: "MyCloneProfessionItemStore",
        options: { remoteSort: !0 },
      },
      { store: "MyWorkOrderStatusStore", name: "MyCloneWorkOrderStatusStore" },
      { store: "MyWorkOrderRowStore", name: "MyCloneWorkOrderRowStore" },
      {
        store: "MyProjectListStore",
        name: "MyCloneProjectListStore",
        options: {
          meFilters: [
            ["StatusCode", "<", STATUS_FINISHED],
            ["StatusCode", ">=", STATUS_NOTED],
          ],
        },
      },
      { store: "MyProjectListStore", name: "MyCloneProjectListAllStore" },
      {
        store: "MyProjectListStore",
        name: "MyCloneAbsenceProjectStore",
        options: { meBeforeStartupLoad: onBeforeAbsenceLoad },
      },
      {
        store: "MyProjectListStore",
        name: "MyCloneAlternativeAbsenceProjectStore",
        options: {
          meFilters: [
            ["Piecework", "=", !0],
            ["StatusCode", "<", STATUS_FINISHED],
          ],
        },
      },
      {
        store: "MyProjectListStore",
        name: "MyFilteredProjectListStore",
        options: {
          meBeforeStartupLoad: onBeforeFilteredProjectStoreLoad,
          meFilters: [["StatusCode", ">=", STATUS_NOTED]],
        },
      },
      {
        store: "MyProjectArchiveListStore",
        name: "MyProjectArchiveListStore",
        options: { meBeforeStartupLoad: onBeforeProjectArchiveStoreLoad },
      },
    ];
    for (var b = 0; b < c.length; b++) {
      var a = c[b];
      Ext.create(
        "MEM.store." + a.store,
        Ext.apply({ storeId: a.name }, a.options)
      );
    }
    Ext.getStore("MyProfessionItemStore").meAddFilter(["Disabled", "=", !1]);
    if (Ext.fly("appLoadingIndicator")) {
      Ext.fly("appLoadingIndicator").destroy();
    }
  },
  onPopState: function () {
    var b = this;
    if (b.doLeave) {
      return;
    }
    var a = Ext.getCmp("mynavigationview").getItems();
    if (a.length > 2) {
      a.getAt(0).fireEvent("back");
    } else {
      if (confirm(T("Do you really want to leave Next Mobile?"))) {
        b.doLeave = !0;
        history.back();
      }
    }
    history.pushState({}, {});
  },
  onUpdated: function () {
    Ext.Msg.confirm(
      "Application Update",
      "This application has just successfully been updated to the latest version. Reload now?",
      function (a) {
        if (a === "yes") {
          window.location.reload();
        }
      }
    );
  },
  onReady: function () {
    Ext.applyIf(Ext.util.Format, { defaultDateFormat: "Y-m-d" });
  },
  getUserId: function () {
    var a = Ext.getStore("MyUserSessionStore").getAt(0);
    if (a) {
      return a.get("ImpersonatedUserId");
    }
    return null;
  },
  isImpersonator: function () {
    var a = Ext.getStore("MyUserSessionStore").getAt(0);
    if (a) {
      return a.get("ImpersonatedUserId") != a.get("SessionUserId");
    }
    return null;
  },
  getUserName: function () {
    var a = this.getUserRec();
    if (a) {
      return a.get("FullName");
    }
    return null;
  },
  getUserRec: function () {
    var a = Ext.getStore("MyUserListStore").getById(this.getUserId());
    if (a) {
      return a;
    }
    console.log("getUserRec(): Failed to find user");
    return null;
  },
  getUserLang: function () {
    var a = Ext.getStore("MyUserSessionStore").getAt(0);
    if (a) {
      return a.get("Languagecode");
    }
    return null;
  },
  userIsPartner: function (b) {
    var a = this.getUserRec();
    if (!a) {
      return !1;
    }
    if (a.get("PartnerSupplier")) {
      if (b) {
        return a.get("OrganizationalProjectId") == b;
      }
      return !0;
    }
    return !1;
  },
});
